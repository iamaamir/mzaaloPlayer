/**
 * @license Copyright (c) 2015-2020 Radiant Media Player 
 * Radiant Media Player 5.10.2 | https://www.radiantmediaplayer.com
 * Terms of service: https://www.radiantmediaplayer.com/terms-of-service.html
 * Contact information: https://www.radiantmediaplayer.com/contact.html
 */
/**
 * @license
 * webxr-polyfill
 * Copyright (c) 2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * webvr-polyfill-dpdb 
 * Copyright (c) 2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * wglu-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
/**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.WebXRPolyfill=t()}(this,function(){"use strict";const e="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t=Symbol("@@webxr-polyfill/EventTarget");class i{constructor(){this[t]={listeners:new Map}}addEventListener(e,i){if("string"!=typeof e)throw new Error("`type` must be a string");if("function"!=typeof i)throw new Error("`listener` must be a function");const r=this[t].listeners.get(e)||[];r.push(i),this[t].listeners.set(e,r)}removeEventListener(e,i){if("string"!=typeof e)throw new Error("`type` must be a string");if("function"!=typeof i)throw new Error("`listener` must be a function");const r=this[t].listeners.get(e)||[];for(let e=r.length;e>=0;e--)r[e]===i&&r.pop()}dispatchEvent(e,i){const r=this[t].listeners.get(e)||[],s=[];for(let e=0;e<r.length;e++)s[e]=r[e];for(let e of s)e(i);"function"==typeof this[`on${e}`]&&this[`on${e}`](i)}}const r=1e-6;let s="undefined"!=typeof Float32Array?Float32Array:Array;Math.PI;function n(){let e=new s(16);return s!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function a(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function o(e,t){let i=t[0],r=t[1],s=t[2],n=t[3],a=t[4],o=t[5],l=t[6],A=t[7],h=t[8],c=t[9],d=t[10],u=t[11],p=t[12],f=t[13],m=t[14],g=t[15],v=i*o-r*a,w=i*l-s*a,y=i*A-n*a,b=r*l-s*o,E=r*A-n*o,S=s*A-n*l,M=h*f-c*p,x=h*m-d*p,_=h*g-u*p,F=c*m-d*f,R=c*g-u*f,T=d*g-u*m,B=v*T-w*R+y*F+b*_-E*x+S*M;return B?(B=1/B,e[0]=(o*T-l*R+A*F)*B,e[1]=(s*R-r*T-n*F)*B,e[2]=(f*S-m*E+g*b)*B,e[3]=(d*E-c*S-u*b)*B,e[4]=(l*_-a*T-A*x)*B,e[5]=(i*T-s*_+n*x)*B,e[6]=(m*y-p*S-g*w)*B,e[7]=(h*S-d*y+u*w)*B,e[8]=(a*R-o*_+A*M)*B,e[9]=(r*_-i*R-n*M)*B,e[10]=(p*E-f*y+g*v)*B,e[11]=(c*y-h*E-u*v)*B,e[12]=(o*x-a*F-l*M)*B,e[13]=(i*F-r*x+s*M)*B,e[14]=(f*w-p*b-m*v)*B,e[15]=(h*b-c*w+d*v)*B,e):null}function l(e,t,i){let r=t[0],s=t[1],n=t[2],a=t[3],o=t[4],l=t[5],A=t[6],h=t[7],c=t[8],d=t[9],u=t[10],p=t[11],f=t[12],m=t[13],g=t[14],v=t[15],w=i[0],y=i[1],b=i[2],E=i[3];return e[0]=w*r+y*o+b*c+E*f,e[1]=w*s+y*l+b*d+E*m,e[2]=w*n+y*A+b*u+E*g,e[3]=w*a+y*h+b*p+E*v,w=i[4],y=i[5],b=i[6],E=i[7],e[4]=w*r+y*o+b*c+E*f,e[5]=w*s+y*l+b*d+E*m,e[6]=w*n+y*A+b*u+E*g,e[7]=w*a+y*h+b*p+E*v,w=i[8],y=i[9],b=i[10],E=i[11],e[8]=w*r+y*o+b*c+E*f,e[9]=w*s+y*l+b*d+E*m,e[10]=w*n+y*A+b*u+E*g,e[11]=w*a+y*h+b*p+E*v,w=i[12],y=i[13],b=i[14],E=i[15],e[12]=w*r+y*o+b*c+E*f,e[13]=w*s+y*l+b*d+E*m,e[14]=w*n+y*A+b*u+E*g,e[15]=w*a+y*h+b*p+E*v,e}function A(e,t,i){let r=t[0],s=t[1],n=t[2],a=t[3],o=r+r,l=s+s,A=n+n,h=r*o,c=r*l,d=r*A,u=s*l,p=s*A,f=n*A,m=a*o,g=a*l,v=a*A;return e[0]=1-(u+f),e[1]=c+v,e[2]=d-g,e[3]=0,e[4]=c-v,e[5]=1-(h+f),e[6]=p+m,e[7]=0,e[8]=d+g,e[9]=p-m,e[10]=1-(h+u),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function h(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function c(e,t){let i=t[0]+t[5]+t[10],r=0;return i>0?(r=2*Math.sqrt(i+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function d(e,t,i,r,s){let n,a=1/Math.tan(t/2);return e[0]=a/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=s&&s!==1/0?(n=1/(r-s),e[10]=(s+r)*n,e[14]=2*s*r*n):(e[10]=-1,e[14]=-2*r),e}function u(){let e=new s(3);return s!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function p(e){var t=new s(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function f(e,t,i){let r=new s(3);return r[0]=e,r[1]=t,r[2]=i,r}function m(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function g(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function v(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function w(e,t){let i=t[0],r=t[1],s=t[2],n=i*i+r*r+s*s;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n),e}function y(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function b(e,t,i){let r=t[0],s=t[1],n=t[2],a=i[0],o=i[1],l=i[2];return e[0]=s*l-n*o,e[1]=n*a-r*l,e[2]=r*o-s*a,e}function E(e,t,i){let r=i[0],s=i[1],n=i[2],a=i[3],o=t[0],l=t[1],A=t[2],h=s*A-n*l,c=n*o-r*A,d=r*l-s*o,u=s*d-n*c,p=n*h-r*d,f=r*c-s*h,m=2*a;return h*=m,c*=m,d*=m,u*=2,p*=2,f*=2,e[0]=o+h+u,e[1]=l+c+p,e[2]=A+d+f,e}const S=function(e){let t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)};!function(){let e=u()}();!function(){let e=function(){let e=new s(4);return s!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}()}();function M(){let e=new s(4);return s!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function x(e,t,i){let r=t[0],s=t[1],n=t[2],a=t[3],o=i[0],l=i[1],A=i[2],h=i[3];return e[0]=r*h+a*o+s*A-n*l,e[1]=s*h+a*l+n*o-r*A,e[2]=n*h+a*A+r*l-s*o,e[3]=a*h-r*o-s*l-n*A,e}function _(e,t,i,s){let n,a,o,l,A,h=t[0],c=t[1],d=t[2],u=t[3],p=i[0],f=i[1],m=i[2],g=i[3];return(a=h*p+c*f+d*m+u*g)<0&&(a=-a,p=-p,f=-f,m=-m,g=-g),1-a>r?(n=Math.acos(a),o=Math.sin(n),l=Math.sin((1-s)*n)/o,A=Math.sin(s*n)/o):(l=1-s,A=s),e[0]=l*h+A*p,e[1]=l*c+A*f,e[2]=l*d+A*m,e[3]=l*u+A*g,e}function F(e,t){let i=t[0],r=t[1],s=t[2],n=t[3],a=i*i+r*r+s*s+n*n,o=a?1/a:0;return e[0]=-i*o,e[1]=-r*o,e[2]=-s*o,e[3]=n*o,e}const R=function(e){let t=new s(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},T=function(e,t,i,r){let n=new s(4);return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n},B=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},P=function(e,t){let i=t[0],r=t[1],s=t[2],n=t[3],a=i*i+r*r+s*s+n*n;return a>0&&(a=1/Math.sqrt(a),e[0]=i*a,e[1]=r*a,e[2]=s*a,e[3]=n*a),e},C=(function(){let e=u(),t=f(1,0,0),i=f(0,1,0)}(),function(){let e=M(),t=M()}(),function(){let e=function(){let e=new s(9);return s!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}()}(),Symbol("@@webxr-polyfill/XRRigidTransform"));class D{constructor(){if(this[C]={matrix:null,position:null,orientation:null,inverse:null},0===arguments.length)this[C].matrix=a(new Float32Array(16));else if(1===arguments.length)arguments[0]instanceof Float32Array?this[C].matrix=arguments[0]:(this[C].position=this._getPoint(arguments[0]),this[C].orientation=DOMPointReadOnly.fromPoint({x:0,y:0,z:0,w:1}));else{if(2!==arguments.length)throw new Error("Too many arguments!");this[C].position=this._getPoint(arguments[0]),this[C].orientation=this._getPoint(arguments[1])}if(this[C].matrix){let e=u();h(e,this[C].matrix),this[C].position=DOMPointReadOnly.fromPoint({x:e[0],y:e[1],z:e[2]});let t=M();c(t,this[C].matrix),this[C].orientation=DOMPointReadOnly.fromPoint({x:t[0],y:t[1],z:t[2],w:t[3]})}else this[C].matrix=a(new Float32Array(16)),A(this[C].matrix,T(this[C].orientation.x,this[C].orientation.y,this[C].orientation.z,this[C].orientation.w),f(this[C].position.x,this[C].position.y,this[C].position.z))}_getPoint(e){return e instanceof DOMPointReadOnly?e:DOMPointReadOnly.fromPoint(e)}get matrix(){return this[C].matrix}get position(){return this[C].position}get orientation(){return this[C].orientation}get inverse(){if(null===this[C].inverse){let e=a(new Float32Array(16));o(e,this[C].matrix),this[C].inverse=new D(e),this[C].inverse[C].inverse=this}return this[C].inverse}}const I=Symbol("@@webxr-polyfill/XRSpace");class L{constructor(e=null,t=null){this[I]={specialType:e,inputSource:t,baseMatrix:null,inverseBaseMatrix:null,lastFrameId:-1}}get _specialType(){return this[I].specialType}get _inputSource(){return this[I].inputSource}_ensurePoseUpdated(e,t){t!=this[I].lastFrameId&&(this[I].lastFrameId=t,this._onPoseUpdate(e))}_onPoseUpdate(e){"viewer"==this[I].specialType&&(this._baseMatrix=e.getBasePoseMatrix())}set _baseMatrix(e){this[I].baseMatrix=e,this[I].inverseBaseMatrix=null}get _baseMatrix(){return this[I].baseMatrix||this[I].inverseBaseMatrix&&(this[I].baseMatrix=new Float32Array(16),o(this[I].baseMatrix,this[I].inverseBaseMatrix)),this[I].baseMatrix}set _inverseBaseMatrix(e){this[I].inverseBaseMatrix=e,this[I].baseMatrix=null}get _inverseBaseMatrix(){return this[I].inverseBaseMatrix||this[I].baseMatrix&&(this[I].inverseBaseMatrix=new Float32Array(16),o(this[I].inverseBaseMatrix,this[I].baseMatrix)),this[I].inverseBaseMatrix}_getSpaceRelativeTransform(e){if(!this._inverseBaseMatrix||!e._baseMatrix)return null;let t=new Float32Array(16);return l(t,this._inverseBaseMatrix,e._baseMatrix),new D(t)}}const O=1.6,N=Symbol("@@webxr-polyfill/XRReferenceSpace"),G=["viewer","local","local-floor","bounded-floor","unbounded"];class Q extends L{constructor(e,t=null){if(!G.includes(e))throw new Error(`XRReferenceSpaceType must be one of ${G}`);if(super(e),"bounded-floor"===e&&!t)throw new Error("XRReferenceSpace cannot use 'bounded-floor' type if the platform does not provide the floor level");(function(e){return"bounded-floor"===e||"local-floor"===e})(e)&&!t&&((t=a(new Float32Array(16)))[13]=O),this._inverseBaseMatrix=t||a(new Float32Array(16)),this[N]={type:e,transform:t,originOffset:a(new Float32Array(16))}}_transformBasePoseMatrix(e,t){l(e,this._inverseBaseMatrix,t)}_originOffsetMatrix(){return this[N].originOffset}_adjustForOriginOffset(e){let t=new Float32Array(16);o(t,this[N].originOffset),l(e,t,e)}_getSpaceRelativeTransform(e){let t=super._getSpaceRelativeTransform(e);return this._adjustForOriginOffset(t.matrix),new XRRigidTransform(t.matrix)}getOffsetReferenceSpace(e){let t=new Q(this[N].type,this[N].transform,this[N].bounds);return l(t[N].originOffset,this[N].originOffset,e.matrix),t}}const k=Symbol("@@webxr-polyfill/XR"),z=["inline","immersive-vr","immersive-ar"],V={inline:{requiredFeatures:["viewer"],optionalFeatures:[]},"immersive-vr":{requiredFeatures:["viewer","local"],optionalFeatures:[]},"immersive-ar":{requiredFeatures:["viewer","local"],optionalFeatures:[]}},U="Polyfill Error: Must call navigator.xr.isSessionSupported() with any XRSessionMode\nor navigator.xr.requestSession('inline') prior to requesting an immersive\nsession. This is a limitation specific to the WebXR Polyfill and does not apply\nto native implementations of the API.";let H;if("performance"in e==!1){let e=Date.now();H=(()=>Date.now()-e)}else H=(()=>performance.now());var X=H;const W=Symbol("@@webxr-polyfill/XRPose");class j{constructor(e,t){this[W]={transform:e,emulatedPosition:t}}get transform(){return this[W].transform}get emulatedPosition(){return this[W].emulatedPosition}}const q=Symbol("@@webxr-polyfill/XRViewerPose");class Y extends j{constructor(e,t,i=!1){super(e,i),this[q]={views:t}}get views(){return this[q].views}}const Z=Symbol("@@webxr-polyfill/XRViewport");class J{constructor(e){this[Z]={target:e}}get x(){return this[Z].target.x}get y(){return this[Z].target.y}get width(){return this[Z].target.width}get height(){return this[Z].target.height}}const K=["left","right","none"],$=Symbol("@@webxr-polyfill/XRView");class ee{constructor(e,t,i,r){if(!K.includes(i))throw new Error(`XREye must be one of: ${K}`);const s=Object.create(null),n=new J(s);this[$]={device:e,eye:i,viewport:n,temp:s,sessionId:r,transform:t}}get eye(){return this[$].eye}get projectionMatrix(){return this[$].device.getProjectionMatrix(this.eye)}get transform(){return this[$].transform}_getViewport(e){if(this[$].device.getViewport(this[$].sessionId,this.eye,e,this[$].temp))return this[$].viewport}}const te=Symbol("@@webxr-polyfill/XRFrame"),ie="XRFrame access outside the callback that produced it is invalid.",re="getViewerPose can only be called on XRFrame objects passed to XRSession.requestAnimationFrame callbacks.";let se=0;class ne{constructor(e,t,i){this[te]={id:++se,active:!1,animationFrame:!1,device:e,session:t,sessionId:i}}get session(){return this[te].session}getViewerPose(e){if(!this[te].animationFrame)throw new DOMException(re,"InvalidStateError");if(!this[te].active)throw new DOMException(ie,"InvalidStateError");const t=this[te].device,i=this[te].session;i[we].viewerSpace._ensurePoseUpdated(t,this[te].id),e._ensurePoseUpdated(t,this[te].id);let r=e._getSpaceRelativeTransform(i[we].viewerSpace);const s=[];for(let r of i[we].viewSpaces){r._ensurePoseUpdated(t,this[te].id);let i=e._getSpaceRelativeTransform(r),n=new ee(t,i,r.eye,this[te].sessionId);s.push(n)}return new Y(r,s,!1)}getPose(e,t){if(!this[te].active)throw new DOMException(ie,"InvalidStateError");const i=this[te].device;if("target-ray"===e._specialType||"grip"===e._specialType)return i.getInputPose(e._inputSource,t,e._specialType);{e._ensurePoseUpdated(i,this[te].id),t._ensurePoseUpdated(i,this[te].id);let r=t._getSpaceRelativeTransform(e);return r?new XRPose(r,!1):null}}}const ae=Symbol("@@webxr-polyfill/XRRenderState"),oe=Object.freeze({depthNear:.1,depthFar:1e3,inlineVerticalFieldOfView:null,baseLayer:null});class le{constructor(e={}){const t=Object.assign({},oe,e);this[ae]={config:t}}get depthNear(){return this[ae].config.depthNear}get depthFar(){return this[ae].config.depthFar}get inlineVerticalFieldOfView(){return this[ae].config.inlineVerticalFieldOfView}get baseLayer(){return this[ae].config.baseLayer}}const Ae=Symbol("@@webxr-polyfill/polyfilled-xr-compatible"),he=Symbol("@@webxr-polyfill/xr-compatible"),ce=Symbol("@@webxr-polyfill/XRWebGLLayer"),de=Object.freeze({antialias:!0,depth:!1,stencil:!1,alpha:!0,multiview:!1,ignoreDepthValues:!1,framebufferScaleFactor:1});const ue=Symbol("@@webxr-polyfill/XRInputSourceEvent");class pe extends Event{constructor(e,t){super(e,t),this[ue]={frame:t.frame,inputSource:t.inputSource},Object.setPrototypeOf(this,pe.prototype)}get frame(){return this[ue].frame}get inputSource(){return this[ue].inputSource}}const fe=Symbol("@@webxr-polyfill/XRSessionEvent");class me extends Event{constructor(e,t){super(e,t),this[fe]={session:t.session},Object.setPrototypeOf(this,me.prototype)}get session(){return this[fe].session}}const ge=Symbol("@@webxr-polyfill/XRInputSourcesChangeEvent");class ve extends Event{constructor(e,t){super(e,t),this[ge]={session:t.session,added:t.added,removed:t.removed},Object.setPrototypeOf(this,ve.prototype)}get session(){return this[ge].session}get added(){return this[ge].added}get removed(){return this[ge].removed}}const we=Symbol("@@webxr-polyfill/XRSession");class ye extends L{constructor(e){super(e)}get eye(){return this._specialType}_onPoseUpdate(e){this._inverseBaseMatrix=e.getBaseViewMatrix(this._specialType)}}class be extends i{constructor(e,t,i){super();let r="inline"!=t,s=new le({inlineVerticalFieldOfView:r?null:.5*Math.PI});this[we]={device:e,mode:t,immersive:r,ended:!1,suspended:!1,frameCallbacks:[],currentFrameCallbacks:null,frameHandle:0,deviceFrameHandle:null,id:i,activeRenderState:s,pendingRenderState:null,viewerSpace:new Q("viewer"),viewSpaces:[],currentInputSources:[]},r?this[we].viewSpaces.push(new ye("left"),new ye("right")):this[we].viewSpaces.push(new ye("none")),this[we].onDeviceFrame=(()=>{if(this[we].ended||this[we].suspended)return;if(this[we].deviceFrameHandle=null,this[we].startDeviceFrameLoop(),null!==this[we].pendingRenderState&&(this[we].activeRenderState=new le(this[we].pendingRenderState),this[we].pendingRenderState=null,this[we].activeRenderState.baseLayer&&this[we].device.onBaseLayerSet(this[we].id,this[we].activeRenderState.baseLayer)),null===this[we].activeRenderState.baseLayer)return;const t=new ne(e,this,this[we].id),i=this[we].currentFrameCallbacks=this[we].frameCallbacks;this[we].frameCallbacks=[],t[te].active=!0,t[te].animationFrame=!0,this[we].device.onFrameStart(this[we].id,this[we].activeRenderState),this._checkInputSourcesChange();const r=X();for(let e=0;e<i.length;e++)try{i[e].cancelled||"function"!=typeof i[e].callback||i[e].callback(r,t)}catch(e){console.error(e)}this[we].currentFrameCallbacks=null,t[te].active=!1,this[we].device.onFrameEnd(this[we].id)}),this[we].startDeviceFrameLoop=(()=>{null===this[we].deviceFrameHandle&&(this[we].deviceFrameHandle=this[we].device.requestAnimationFrame(this[we].onDeviceFrame))}),this[we].stopDeviceFrameLoop=(()=>{const e=this[we].deviceFrameHandle;null!==e&&(this[we].device.cancelAnimationFrame(e),this[we].deviceFrameHandle=null)}),this[we].onPresentationEnd=(t=>{if(t!==this[we].id)return this[we].suspended=!1,this[we].startDeviceFrameLoop(),void this.dispatchEvent("focus",{session:this});this[we].ended=!0,this[we].stopDeviceFrameLoop(),e.removeEventListener("@@webxr-polyfill/vr-present-end",this[we].onPresentationEnd),e.removeEventListener("@@webxr-polyfill/vr-present-start",this[we].onPresentationStart),e.removeEventListener("@@webxr-polyfill/input-select-start",this[we].onSelectStart),e.removeEventListener("@@webxr-polyfill/input-select-end",this[we].onSelectEnd),this.dispatchEvent("end",new me("end",{session:this}))}),e.addEventListener("@@webxr-polyfill/vr-present-end",this[we].onPresentationEnd),this[we].onPresentationStart=(e=>{e!==this[we].id&&(this[we].suspended=!0,this[we].stopDeviceFrameLoop(),this.dispatchEvent("blur",{session:this}))}),e.addEventListener("@@webxr-polyfill/vr-present-start",this[we].onPresentationStart),this[we].onSelectStart=(e=>{e.sessionId===this[we].id&&this[we].dispatchInputSourceEvent("selectstart",e.inputSource)}),e.addEventListener("@@webxr-polyfill/input-select-start",this[we].onSelectStart),this[we].onSelectEnd=(e=>{e.sessionId===this[we].id&&(this[we].dispatchInputSourceEvent("selectend",e.inputSource),this[we].dispatchInputSourceEvent("select",e.inputSource))}),e.addEventListener("@@webxr-polyfill/input-select-end",this[we].onSelectEnd),this[we].onSqueezeStart=(e=>{e.sessionId===this[we].id&&this[we].dispatchInputSourceEvent("squeezestart",e.inputSource)}),e.addEventListener("@@webxr-polyfill/input-squeeze-start",this[we].onSqueezeStart),this[we].onSqueezeEnd=(e=>{e.sessionId===this[we].id&&(this[we].dispatchInputSourceEvent("squeezeend",e.inputSource),this[we].dispatchInputSourceEvent("squeeze",e.inputSource))}),e.addEventListener("@@webxr-polyfill/input-squeeze-end",this[we].onSqueezeEnd),this[we].dispatchInputSourceEvent=((t,i)=>{const r=new ne(e,this,this[we].id),s=new pe(t,{frame:r,inputSource:i});r[te].active=!0,this.dispatchEvent(t,s),r[te].active=!1}),this[we].startDeviceFrameLoop(),this.onblur=void 0,this.onfocus=void 0,this.onresetpose=void 0,this.onend=void 0,this.onselect=void 0,this.onselectstart=void 0,this.onselectend=void 0}get renderState(){return this[we].activeRenderState}get environmentBlendMode(){return this[we].device.environmentBlendMode||"opaque"}async requestReferenceSpace(e){if(this[we].ended)return;if(!G.includes(e))throw new TypeError(`XRReferenceSpaceType must be one of ${G}`);if(!this[we].device.doesSessionSupportReferenceSpace(this[we].id,e))throw new DOMException(`The ${e} reference space is not supported by this session.`,"NotSupportedError");if("viewer"===e)return this[we].viewerSpace;let t=await this[we].device.requestFrameOfReferenceTransform(e);if("bounded-floor"===e){if(!t)throw new DOMException(`${e} XRReferenceSpace not supported by this device.`,"NotSupportedError");if(!this[we].device.requestStageBounds())throw new DOMException(`${e} XRReferenceSpace not supported by this device.`,"NotSupportedError");throw new DOMException(`The WebXR polyfill does not support the ${e} reference space yet.`,"NotSupportedError")}return new Q(e,t)}requestAnimationFrame(e){if(this[we].ended)return;const t=++this[we].frameHandle;return this[we].frameCallbacks.push({handle:t,callback:e,cancelled:!1}),t}cancelAnimationFrame(e){let t=this[we].frameCallbacks,i=t.findIndex(t=>t&&t.handle===e);i>-1&&(t[i].cancelled=!0,t.splice(i,1)),(t=this[we].currentFrameCallbacks)&&(i=t.findIndex(t=>t&&t.handle===e))>-1&&(t[i].cancelled=!0)}get inputSources(){return this[we].device.getInputSources()}async end(){if(!this[we].ended)return this[we].immersive&&(this[we].ended=!0,this[we].device.removeEventListener("@@webxr-polyfill/vr-present-start",this[we].onPresentationStart),this[we].device.removeEventListener("@@webxr-polyfill/vr-present-end",this[we].onPresentationEnd),this[we].device.removeEventListener("@@webxr-polyfill/input-select-start",this[we].onSelectStart),this[we].device.removeEventListener("@@webxr-polyfill/input-select-end",this[we].onSelectEnd),this.dispatchEvent("end",new me("end",{session:this}))),this[we].stopDeviceFrameLoop(),this[we].device.endSession(this[we].id)}updateRenderState(e){if(this[we].ended){throw new Error("Can't call updateRenderState on an XRSession that has already ended.")}if(e.baseLayer&&e.baseLayer._session!==this){throw new Error("Called updateRenderState with a base layer that was created by a different session.")}if(null!==e.inlineVerticalFieldOfView&&void 0!==e.inlineVerticalFieldOfView){if(this[we].immersive){throw new Error("inlineVerticalFieldOfView must not be set for an XRRenderState passed to updateRenderState for an immersive session.")}e.inlineVerticalFieldOfView=Math.min(3.13,Math.max(.01,e.inlineVerticalFieldOfView))}if(null===this[we].pendingRenderState){const e=this[we].activeRenderState;this[we].pendingRenderState={depthNear:e.depthNear,depthFar:e.depthFar,inlineVerticalFieldOfView:e.inlineVerticalFieldOfView,baseLayer:e.baseLayer}}Object.assign(this[we].pendingRenderState,e)}_checkInputSourcesChange(){const e=[],t=[],i=this.inputSources,r=this[we].currentInputSources;for(const t of i)r.includes(t)||e.push(t);for(const e of r)i.includes(e)||t.push(e);(e.length>0||t.length>0)&&this.dispatchEvent("inputsourceschange",new ve("inputsourceschange",{session:this,added:e,removed:t})),this[we].currentInputSources.length=0;for(const e of i)this[we].currentInputSources.push(e)}}const Ee=Symbol("@@webxr-polyfill/XRInputSource");class Se{constructor(e){this[Ee]={impl:e,gripSpace:new L("grip",this),targetRaySpace:new L("target-ray",this)}}get handedness(){return this[Ee].impl.handedness}get targetRayMode(){return this[Ee].impl.targetRayMode}get gripSpace(){let e=this[Ee].impl.targetRayMode;return"gaze"===e||"screen"===e?null:this[Ee].gripSpace}get targetRaySpace(){return this[Ee].targetRaySpace}get profiles(){return this[Ee].impl.profiles}get gamepad(){return this[Ee].impl.gamepad}}const Me=Symbol("@@webxr-polyfill/XRReferenceSpaceEvent");class xe extends Event{constructor(e,t){super(e,t),this[Me]={referenceSpace:t.referenceSpace,transform:t.transform||null},Object.setPrototypeOf(this,xe.prototype)}get referenceSpace(){return this[Me].referenceSpace}get transform(){return this[Me].transform}}var _e={XRSystem:class extends i{constructor(e){super(),this[k]={device:null,devicePromise:e,immersiveSession:null,inlineSessions:new Set},e.then(e=>{this[k].device=e})}async isSessionSupported(e){return this[k].device||await this[k].devicePromise,"inline"!=e?Promise.resolve(this[k].device.isSessionSupported(e)):Promise.resolve(!0)}async requestSession(e,t){if(!this[k].device){if("inline"!=e)throw new Error(U);await this[k].devicePromise}if(!z.includes(e))throw new TypeError(`The provided value '${e}' is not a valid enum value of type XRSessionMode`);const i=V[e],r=i.requiredFeatures.concat(t&&t.requiredFeatures?t.requiredFeatures:[]),s=i.optionalFeatures.concat(t&&t.optionalFeatures?t.optionalFeatures:[]),n=new Set;let a=!1;for(let e of r)this[k].device.isFeatureSupported(e)?n.add(e):(console.error(`The required feature '${e}' is not supported`),a=!0);if(a)throw new DOMException("Session does not support some required features","NotSupportedError");for(let e of s)this[k].device.isFeatureSupported(e)?n.add(e):console.log(`The optional feature '${e}' is not supported`);const o=await this[k].device.requestSession(e,n),l=new XRSession(this[k].device,e,o);"inline"==e?this[k].inlineSessions.add(l):this[k].immersiveSession=l;const A=()=>{"inline"==e?this[k].inlineSessions.delete(l):this[k].immersiveSession=null,l.removeEventListener("end",A)};return l.addEventListener("end",A),l}},XRSession:be,XRSessionEvent:me,XRFrame:ne,XRView:ee,XRViewport:J,XRViewerPose:Y,XRWebGLLayer:class{constructor(e,t,i={}){const r=Object.assign({},de,i);if(!(e instanceof be))throw new Error("session must be a XRSession");if(e.ended)throw new Error("InvalidStateError");if(t[Ae]&&!0!==t[he])throw new Error("InvalidStateError");const s=t.getParameter(t.FRAMEBUFFER_BINDING);this[ce]={context:t,config:r,framebuffer:s,session:e}}get context(){return this[ce].context}get antialias(){return this[ce].config.antialias}get ignoreDepthValues(){return!0}get framebuffer(){return this[ce].framebuffer}get framebufferWidth(){return this[ce].context.drawingBufferWidth}get framebufferHeight(){return this[ce].context.drawingBufferHeight}get _session(){return this[ce].session}getViewport(e){return e._getViewport(this)}static getNativeFramebufferScaleFactor(e){if(!e)throw new TypeError("getNativeFramebufferScaleFactor must be passed a session.");return e[we].ended?0:1}},XRSpace:L,XRReferenceSpace:Q,XRReferenceSpaceEvent:xe,XRInputSource:Se,XRInputSourceEvent:pe,XRInputSourcesChangeEvent:ve,XRRenderState:le,XRRigidTransform:D,XRPose:j};const Fe=e=>"function"!=typeof e.prototype.makeXRCompatible&&(e.prototype.makeXRCompatible=function(){return this[he]=!0,Promise.resolve()},!0),Re=e=>{const t=e.prototype.getContext;e.prototype.getContext=function(e,i){const r=t.call(this,e,i);return r&&(r[Ae]=!0,i&&"xrCompatible"in i&&(r[he]=i.xrCompatible)),r}},Te=e=>!(!e.ImageBitmapRenderingContext||!e.createImageBitmap);var Be;const Pe=e=>{e.style.display="block",e.style.position="absolute",e.style.width=e.style.height="1px",e.style.top=e.style.left="0px"};var Ce="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var De,Ie,Le=(function(e,t){e.exports=function(){var e,t,i,r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],r=!0,s=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done)&&(i.push(a.value),!t||i.length!==t);r=!0);}catch(e){s=!0,n=e}finally{try{!r&&o.return&&o.return()}finally{if(s)throw n}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(e,t,i){return e+(t-e)*i},o=function(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return e}}(),l=function(){var e=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return e}}(),A=function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return e}}(),h=function(){var e=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return e}}(),c=(t=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),i=t?parseInt(t[1],10):null,function(){return i}),d=function(){var e=!1;return e=o()&&A()&&-1!==navigator.userAgent.indexOf("13_4"),function(){return e}}(),u=function(){var e=!1;if(65===c()){var t=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(t){var i=t[1].split("."),r=n(i,4),s=(r[0],r[1],r[2]),a=r[3];e=3325===parseInt(s,10)&&parseInt(a,10)<148}}return function(){return e}}(),p=function(){var e=-1!==navigator.userAgent.indexOf("R7 Build");return function(){return e}}(),f=function(){var e=90==window.orientation||-90==window.orientation;return p()?!e:e},m=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},g=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},v=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},w=function(e,t,i,r){var s=e.createShader(e.VERTEX_SHADER);e.shaderSource(s,t),e.compileShader(s);var n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(n,i),e.compileShader(n);var a=e.createProgram();for(var o in e.attachShader(a,s),e.attachShader(a,n),r)e.bindAttribLocation(a,r[o],o);return e.linkProgram(a),e.deleteShader(s),e.deleteShader(n),a},y=function(e,t){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),s="",n=0;n<r;n++){var a=e.getActiveUniform(t,n);s=a.name.replace("[0]",""),i[s]=e.getUniformLocation(t,s)}return i},b=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},E=function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},S=function(e){if(o()){var t=e.style.width,i=e.style.height;e.style.width=parseInt(t)+1+"px",e.style.height=parseInt(i)+"px",setTimeout(function(){e.style.width=t,e.style.height=i},100)}window.canvas=e},M=function(){var e=Math.PI/180,t=.25*Math.PI,i=new Float32Array([0,0,0,1]),r=new Float32Array([0,0,0]);function s(s,n,a,o,l,A){!function(i,r,s,n){var a=Math.tan(r?r.upDegrees*e:t),o=Math.tan(r?r.downDegrees*e:t),l=Math.tan(r?r.leftDegrees*e:t),A=Math.tan(r?r.rightDegrees*e:t),h=2/(l+A),c=2/(a+o);i[0]=h,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=c,i[6]=0,i[7]=0,i[8]=-(l-A)*h*.5,i[9]=(a-o)*c*.5,i[10]=n/(s-n),i[11]=-1,i[12]=0,i[13]=0,i[14]=n*s/(s-n),i[15]=0}(s,o||null,A.depthNear,A.depthFar);var h,c,d,u,p,f,m,g,v,w,y,b,E,S,M,x,_,F,R,T=a.orientation||i,B=a.position||r;h=n,d=B,u=(c=T)[0],p=c[1],f=c[2],m=c[3],y=u*(g=u+u),b=u*(v=p+p),E=u*(w=f+f),S=p*v,M=p*w,x=f*w,_=m*g,F=m*v,R=m*w,h[0]=1-(S+x),h[1]=b+R,h[2]=E-F,h[3]=0,h[4]=b-R,h[5]=1-(y+x),h[6]=M+_,h[7]=0,h[8]=E+F,h[9]=M-_,h[10]=1-(y+S),h[11]=0,h[12]=d[0],h[13]=d[1],h[14]=d[2],h[15]=1,l&&function(e,t,i){var r,s,n,a,o,l,A,h,c,d,u,p,f=i[0],m=i[1],g=i[2];t===e?(e[12]=t[0]*f+t[4]*m+t[8]*g+t[12],e[13]=t[1]*f+t[5]*m+t[9]*g+t[13],e[14]=t[2]*f+t[6]*m+t[10]*g+t[14],e[15]=t[3]*f+t[7]*m+t[11]*g+t[15]):(r=t[0],s=t[1],n=t[2],a=t[3],o=t[4],l=t[5],A=t[6],h=t[7],c=t[8],d=t[9],u=t[10],p=t[11],e[0]=r,e[1]=s,e[2]=n,e[3]=a,e[4]=o,e[5]=l,e[6]=A,e[7]=h,e[8]=c,e[9]=d,e[10]=u,e[11]=p,e[12]=r*f+o*m+c*g+t[12],e[13]=s*f+l*m+d*g+t[13],e[14]=n*f+A*m+u*g+t[14],e[15]=a*f+h*m+p*g+t[15])}(n,n,l),function(e,t){var i=t[0],r=t[1],s=t[2],n=t[3],a=t[4],o=t[5],l=t[6],A=t[7],h=t[8],c=t[9],d=t[10],u=t[11],p=t[12],f=t[13],m=t[14],g=t[15],v=i*o-r*a,w=i*l-s*a,y=i*A-n*a,b=r*l-s*o,E=r*A-n*o,S=s*A-n*l,M=h*f-c*p,x=h*m-d*p,_=h*g-u*p,F=c*m-d*f,R=c*g-u*f,T=d*g-u*m,B=v*T-w*R+y*F+b*_-E*x+S*M;if(!B)return null;B=1/B,e[0]=(o*T-l*R+A*F)*B,e[1]=(s*R-r*T-n*F)*B,e[2]=(f*S-m*E+g*b)*B,e[3]=(d*E-c*S-u*b)*B,e[4]=(l*_-a*T-A*x)*B,e[5]=(i*T-s*_+n*x)*B,e[6]=(m*y-p*S-g*w)*B,e[7]=(h*S-d*y+u*w)*B,e[8]=(a*R-o*_+A*M)*B,e[9]=(r*_-i*R-n*M)*B,e[10]=(p*E-f*y+g*v)*B,e[11]=(c*y-h*E-u*v)*B,e[12]=(o*x-a*F-l*M)*B,e[13]=(i*F-r*x+s*M)*B,e[14]=(f*w-p*b-m*v)*B,e[15]=(h*b-c*w+d*v)*B}(n,n)}return function(e,t,i){return!(!e||!t||(e.pose=t,e.timestamp=t.timestamp,s(e.leftProjectionMatrix,e.leftViewMatrix,t,i._getFieldOfView("left"),i._getEyeOffset("left"),i),s(e.rightProjectionMatrix,e.rightViewMatrix,t,i._getFieldOfView("right"),i._getEyeOffset("right"),i),0))}}(),x=function(e){var t,i=e.indexOf("://");t=-1!==i?i+3:0;var r=e.indexOf("/",t);return-1===r&&(r=e.length),e.substring(0,r)},_=(e={},function(t,i){void 0===e[t]&&(console.warn("webvr-polyfill: "+i),e[t]=!0)}),F=function(e,t){var i=t?"Please use "+t+" instead.":"";_(e,e+" has been deprecated. This may not work on native WebVR displays. "+i)},R=function(e,t,i){if(t){for(var r=[],s=null,n=0;n<t.length;++n){var a=t[n];switch(a){case e.TEXTURE_BINDING_2D:case e.TEXTURE_BINDING_CUBE_MAP:var o=t[++n];if(o<e.TEXTURE0||o>e.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),r.push(null,null);break}s||(s=e.getParameter(e.ACTIVE_TEXTURE)),e.activeTexture(o),r.push(e.getParameter(a),null);break;case e.ACTIVE_TEXTURE:s=e.getParameter(e.ACTIVE_TEXTURE),r.push(null);break;default:r.push(e.getParameter(a))}}i(e);for(var n=0;n<t.length;++n){var a=t[n],l=r[n];switch(a){case e.ACTIVE_TEXTURE:break;case e.ARRAY_BUFFER_BINDING:e.bindBuffer(e.ARRAY_BUFFER,l);break;case e.COLOR_CLEAR_VALUE:e.clearColor(l[0],l[1],l[2],l[3]);break;case e.COLOR_WRITEMASK:e.colorMask(l[0],l[1],l[2],l[3]);break;case e.CURRENT_PROGRAM:e.useProgram(l);break;case e.ELEMENT_ARRAY_BUFFER_BINDING:e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,l);break;case e.FRAMEBUFFER_BINDING:e.bindFramebuffer(e.FRAMEBUFFER,l);break;case e.RENDERBUFFER_BINDING:e.bindRenderbuffer(e.RENDERBUFFER,l);break;case e.TEXTURE_BINDING_2D:var o=t[++n];if(o<e.TEXTURE0||o>e.TEXTURE31)break;e.activeTexture(o),e.bindTexture(e.TEXTURE_2D,l);break;case e.TEXTURE_BINDING_CUBE_MAP:var o=t[++n];if(o<e.TEXTURE0||o>e.TEXTURE31)break;e.activeTexture(o),e.bindTexture(e.TEXTURE_CUBE_MAP,l);break;case e.VIEWPORT:e.viewport(l[0],l[1],l[2],l[3]);break;case e.BLEND:case e.CULL_FACE:case e.DEPTH_TEST:case e.SCISSOR_TEST:case e.STENCIL_TEST:l?e.enable(a):e.disable(a);break;default:console.log("No GL restore behavior for 0x"+a.toString(16))}s&&e.activeTexture(s)}}else i(e)},T=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),B=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function P(e,t,i,r){this.gl=e,this.cardboardUI=t,this.bufferScale=i,this.dirtySubmitFrameBindings=r,this.ctxAttribs=e.getContextAttributes(),this.instanceExt=e.getExtension("ANGLE_instanced_arrays"),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=e.drawingBufferWidth,this.bufferHeight=e.drawingBufferHeight,this.realBindFramebuffer=e.bindFramebuffer,this.realEnable=e.enable,this.realDisable=e.disable,this.realColorMask=e.colorMask,this.realClearColor=e.clearColor,this.realViewport=e.viewport,o()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=w(e,T,B,this.attribs),this.uniforms=y(e,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.indexCount=0,this.renderTarget=e.createTexture(),this.framebuffer=e.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=e.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=e.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=e.createRenderbuffer()),this.patch(),this.onResize()}P.prototype.destroy=function(){var e=this.gl;this.unpatch(),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer),e.deleteTexture(this.renderTarget),e.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&e.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&e.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&e.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},P.prototype.onResize=function(){var e=this.gl,t=this,i=[e.RENDERBUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0];R(e,i,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.framebuffer),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.texImage2D(e.TEXTURE_2D,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,t.bufferWidth,t.bufferHeight,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.renderTarget,0),t.ctxAttribs.depth&&t.ctxAttribs.stencil?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t.depthStencilBuffer)):t.ctxAttribs.depth?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t.depthBuffer)):t.ctxAttribs.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,t.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX8,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,t.stencilBuffer)),!e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),t.realClearColor.apply(e,t.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},P.prototype.patch=function(){if(!this.isPatched){var e=this,t=this.gl.canvas,i=this.gl;o()||(t.width=m()*this.bufferScale,t.height=g()*this.bufferScale,Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return e.bufferWidth},set:function(i){e.bufferWidth=i,e.realCanvasWidth.set.call(t,i),e.onResize()}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return e.bufferHeight},set:function(i){e.bufferHeight=i,e.realCanvasHeight.set.call(t,i),e.onResize()}})),this.lastBoundFramebuffer=i.getParameter(i.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(i.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(t,r){e.lastBoundFramebuffer=r||e.framebuffer,e.realBindFramebuffer.call(i,t,e.lastBoundFramebuffer)},this.cullFace=i.getParameter(i.CULL_FACE),this.depthTest=i.getParameter(i.DEPTH_TEST),this.blend=i.getParameter(i.BLEND),this.scissorTest=i.getParameter(i.SCISSOR_TEST),this.stencilTest=i.getParameter(i.STENCIL_TEST),i.enable=function(t){switch(t){case i.CULL_FACE:e.cullFace=!0;break;case i.DEPTH_TEST:e.depthTest=!0;break;case i.BLEND:e.blend=!0;break;case i.SCISSOR_TEST:e.scissorTest=!0;break;case i.STENCIL_TEST:e.stencilTest=!0}e.realEnable.call(i,t)},i.disable=function(t){switch(t){case i.CULL_FACE:e.cullFace=!1;break;case i.DEPTH_TEST:e.depthTest=!1;break;case i.BLEND:e.blend=!1;break;case i.SCISSOR_TEST:e.scissorTest=!1;break;case i.STENCIL_TEST:e.stencilTest=!1}e.realDisable.call(i,t)},this.colorMask=i.getParameter(i.COLOR_WRITEMASK),i.colorMask=function(t,r,s,n){e.colorMask[0]=t,e.colorMask[1]=r,e.colorMask[2]=s,e.colorMask[3]=n,e.realColorMask.call(i,t,r,s,n)},this.clearColor=i.getParameter(i.COLOR_CLEAR_VALUE),i.clearColor=function(t,r,s,n){e.clearColor[0]=t,e.clearColor[1]=r,e.clearColor[2]=s,e.clearColor[3]=n,e.realClearColor.call(i,t,r,s,n)},this.viewport=i.getParameter(i.VIEWPORT),i.viewport=function(t,r,s,n){e.viewport[0]=t,e.viewport[1]=r,e.viewport[2]=s,e.viewport[3]=n,e.realViewport.call(i,t,r,s,n)},this.isPatched=!0,S(t)}},P.prototype.unpatch=function(){if(this.isPatched){var e=this.gl,t=this.gl.canvas;o()||(Object.defineProperty(t,"width",this.realCanvasWidth),Object.defineProperty(t,"height",this.realCanvasHeight)),t.width=this.bufferWidth,t.height=this.bufferHeight,e.bindFramebuffer=this.realBindFramebuffer,e.enable=this.realEnable,e.disable=this.realDisable,e.colorMask=this.realColorMask,e.clearColor=this.realClearColor,e.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&e.bindFramebuffer(e.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){S(t)},1)}},P.prototype.setTextureBounds=function(e,t){e||(e=[0,0,.5,1]),t||(t=[.5,0,.5,1]),this.viewportOffsetScale[0]=e[0],this.viewportOffsetScale[1]=e[1],this.viewportOffsetScale[2]=e[2],this.viewportOffsetScale[3]=e[3],this.viewportOffsetScale[4]=t[0],this.viewportOffsetScale[5]=t[1],this.viewportOffsetScale[6]=t[2],this.viewportOffsetScale[7]=t[3]},P.prototype.submitFrame=function(){var e=this.gl,t=this,i=[];if(this.dirtySubmitFrameBindings||i.push(e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0),R(e,i,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null);var i=0,r=0;t.instanceExt&&(i=e.getVertexAttrib(t.attribs.position,t.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),r=e.getVertexAttrib(t.attribs.texCoord,t.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE)),t.cullFace&&t.realDisable.call(e,e.CULL_FACE),t.depthTest&&t.realDisable.call(e,e.DEPTH_TEST),t.blend&&t.realDisable.call(e,e.BLEND),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realDisable.call(e,e.STENCIL_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),(t.ctxAttribs.alpha||o())&&(t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)),e.useProgram(t.program),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer),e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.enableVertexAttribArray(t.attribs.position),e.enableVertexAttribArray(t.attribs.texCoord),e.vertexAttribPointer(t.attribs.position,2,e.FLOAT,!1,20,0),e.vertexAttribPointer(t.attribs.texCoord,3,e.FLOAT,!1,20,8),t.instanceExt&&(0!=i&&t.instanceExt.vertexAttribDivisorANGLE(t.attribs.position,0),0!=r&&t.instanceExt.vertexAttribDivisorANGLE(t.attribs.texCoord,0)),e.activeTexture(e.TEXTURE0),e.uniform1i(t.uniforms.diffuse,0),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.uniform4fv(t.uniforms.viewportOffsetScale,t.viewportOffsetScale),e.drawElements(e.TRIANGLES,t.indexCount,e.UNSIGNED_SHORT,0),t.cardboardUI&&t.cardboardUI.renderNoState(),t.realBindFramebuffer.call(t.gl,e.FRAMEBUFFER,t.framebuffer),t.ctxAttribs.preserveDrawingBuffer||(t.realClearColor.call(e,0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),t.dirtySubmitFrameBindings||t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.cullFace&&t.realEnable.call(e,e.CULL_FACE),t.depthTest&&t.realEnable.call(e,e.DEPTH_TEST),t.blend&&t.realEnable.call(e,e.BLEND),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realEnable.call(e,e.STENCIL_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),!t.ctxAttribs.alpha&&t.ctxAttribs.preserveDrawingBuffer||t.realClearColor.apply(e,t.clearColor),t.instanceExt&&(0!=i&&t.instanceExt.vertexAttribDivisorANGLE(t.attribs.position,i),0!=r&&t.instanceExt.vertexAttribDivisorANGLE(t.attribs.texCoord,r))}),o()){var r=e.canvas;r.width==t.bufferWidth&&r.height==t.bufferHeight||(t.bufferWidth=r.width,t.bufferHeight=r.height,t.onResize())}},P.prototype.updateDeviceInfo=function(e){var t=this.gl,i=this,r=[t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING];R(t,r,function(t){var r=i.computeMeshVertices_(i.meshWidth,i.meshHeight,e);if(t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),!i.indexCount){var s=i.computeMeshIndices_(i.meshWidth,i.meshHeight);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,s,t.STATIC_DRAW),i.indexCount=s.length}})},P.prototype.computeMeshVertices_=function(e,t,i){for(var r=new Float32Array(2*e*t*5),s=i.getLeftEyeVisibleTanAngles(),n=i.getLeftEyeNoLensTanAngles(),o=i.getLeftEyeVisibleScreenRect(n),l=0,A=0;A<2;A++){for(var h=0;h<t;h++)for(var c=0;c<e;c++,l++){var d=c/(e-1),u=h/(t-1),p=d,f=u,m=a(s[0],s[2],d),g=a(s[3],s[1],u),v=Math.sqrt(m*m+g*g),w=i.distortion.distortInverse(v),y=m*w/v,b=g*w/v;d=(y-n[0])/(n[2]-n[0]),u=(b-n[3])/(n[1]-n[3]),d=2*(o.x+d*o.width-.5),u=2*(o.y+u*o.height-.5),r[5*l+0]=d,r[5*l+1]=u,r[5*l+2]=p,r[5*l+3]=f,r[5*l+4]=A}var E=s[2]-s[0];s[0]=-(E+s[0]),s[2]=E-s[2],E=n[2]-n[0],n[0]=-(E+n[0]),n[2]=E-n[2],o.x=1-(o.x+o.width)}return r},P.prototype.computeMeshIndices_=function(e,t){for(var i=new Uint16Array(2*(e-1)*(t-1)*6),r=e/2,s=t/2,n=0,a=0,o=0;o<2;o++)for(var l=0;l<t;l++)for(var A=0;A<e;A++,n++)0!=A&&0!=l&&(A<=r==l<=s?(i[a++]=n,i[a++]=n-e-1,i[a++]=n-e,i[a++]=n-e-1,i[a++]=n,i[a++]=n-1):(i[a++]=n-1,i[a++]=n-e,i[a++]=n,i[a++]=n-e,i[a++]=n-1,i[a++]=n-e-1));return i},P.prototype.getOwnPropertyDescriptor_=function(e,t){var i=Object.getOwnPropertyDescriptor(e,t);return void 0!==i.get&&void 0!==i.set||(i.configurable=!0,i.enumerable=!0,i.get=function(){return this.getAttribute(t)},i.set=function(e){this.setAttribute(t,e)}),i};var C=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),D=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),I=Math.PI/180,L=.3125;function O(e){this.gl=e,this.attribs={position:0},this.program=w(e,C,D,this.attribs),this.uniforms=y(e,this.program),this.vertexBuffer=e.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function N(e){this.coefficients=e}O.prototype.destroy=function(){var e=this.gl;this.listener&&e.canvas.removeEventListener("click",this.listener,!1),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer)},O.prototype.listen=function(e,t){var i=this.gl.canvas;this.listener=function(r){var s=i.clientWidth/2;r.clientX>s-42&&r.clientX<s+42&&r.clientY>i.clientHeight-42?e(r):r.clientX<42&&r.clientY<42&&t(r)},i.addEventListener("click",this.listener,!1)},O.prototype.onResize=function(){var e=this.gl,t=this,i=[e.ARRAY_BUFFER_BINDING];R(e,i,function(e){var i=[],r=e.drawingBufferWidth/2,s=Math.max(screen.width,screen.height)*window.devicePixelRatio,n=e.drawingBufferWidth/s,a=n*window.devicePixelRatio,o=4*a/2,l=42*a,A=28*a/2,h=14*a;function c(e,t){var s=(90-e)*I,n=Math.cos(s),a=Math.sin(s);i.push(L*n*A+r,L*a*A+A),i.push(t*n*A+r,t*a*A+A)}i.push(r-o,l),i.push(r-o,e.drawingBufferHeight),i.push(r+o,l),i.push(r+o,e.drawingBufferHeight),t.gearOffset=i.length/2;for(var d=0;d<=6;d++){var u=60*d;c(u,1),c(u+12,1),c(u+20,.75),c(u+40,.75),c(u+48,1)}function p(t,r){i.push(h+t,e.drawingBufferHeight-h-r)}t.gearVertexCount=i.length/2-t.gearOffset,t.arrowOffset=i.length/2;var f=o/Math.sin(45*I);p(0,A),p(A,0),p(A+f,f),p(f,A+f),p(f,A-f),p(0,A),p(A,2*A),p(A+f,2*A-f),p(f,A-f),p(0,A),p(f,A-o),p(28*a,A-o),p(f,A+o),p(28*a,A+o),t.arrowVertexCount=i.length/2-t.arrowOffset,e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW)})},O.prototype.render=function(){var e=this.gl,t=this,i=[e.CULL_FACE,e.DEPTH_TEST,e.BLEND,e.SCISSOR_TEST,e.STENCIL_TEST,e.COLOR_WRITEMASK,e.VIEWPORT,e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING];R(e,i,function(e){e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.BLEND),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.colorMask(!0,!0,!0,!0),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.renderNoState()})},O.prototype.renderNoState=function(){var e,t,i,r,s,n,a,o,l,A,h=this.gl;h.useProgram(this.program),h.bindBuffer(h.ARRAY_BUFFER,this.vertexBuffer),h.enableVertexAttribArray(this.attribs.position),h.vertexAttribPointer(this.attribs.position,2,h.FLOAT,!1,8,0),h.uniform4f(this.uniforms.color,1,1,1,1),e=this.projMat,t=0,i=h.drawingBufferWidth,r=0,s=h.drawingBufferHeight,o=1/(t-i),l=1/(r-s),A=1/((n=.1)-(a=1024)),e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*A,e[11]=0,e[12]=(t+i)*o,e[13]=(s+r)*l,e[14]=(a+n)*A,e[15]=1,h.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),h.drawArrays(h.TRIANGLE_STRIP,0,4),h.drawArrays(h.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),h.drawArrays(h.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},N.prototype.distortInverse=function(e){for(var t=0,i=1,r=e-this.distort(t);Math.abs(i-t)>1e-4;){var s=e-this.distort(i),n=i-s*((i-t)/(s-r));t=i,i=n,r=s}return i},N.prototype.distort=function(e){for(var t=e*e,i=0,r=0;r<this.coefficients.length;r++)i=t*(i+this.coefficients[r]);return(i+1)*e};var G=Math.PI/180,Q=180/Math.PI,k=function(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0};k.prototype={constructor:k,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();if(0!==e){var t=1/e;this.multiplyScalar(t)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(e){this.x*=e,this.y*=e,this.z*=e},applyQuaternion:function(e){var t=this.x,i=this.y,r=this.z,s=e.x,n=e.y,a=e.z,o=e.w,l=o*t+n*r-a*i,A=o*i+a*t-s*r,h=o*r+s*i-n*t,c=-s*t-n*i-a*r;return this.x=l*o+c*-s+A*-a-h*-n,this.y=A*o+c*-n+h*-s-l*-a,this.z=h*o+c*-a+l*-n-A*-s,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var i=e.x,r=e.y,s=e.z,n=t.x,a=t.y,o=t.z;return this.x=r*o-s*a,this.y=s*n-i*o,this.z=i*a-r*n,this}};var z,V,U=function(e,t,i,r){this.x=e||0,this.y=t||0,this.z=i||0,this.w=void 0!==r?r:1};function H(e){this.width=e.width||m(),this.height=e.height||g(),this.widthMeters=e.widthMeters,this.heightMeters=e.heightMeters,this.bevelMeters=e.bevelMeters}U.prototype={constructor:U,set:function(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEulerXYZ:function(e,t,i){var r=Math.cos(e/2),s=Math.cos(t/2),n=Math.cos(i/2),a=Math.sin(e/2),o=Math.sin(t/2),l=Math.sin(i/2);return this.x=a*s*n+r*o*l,this.y=r*o*n-a*s*l,this.z=r*s*l+a*o*n,this.w=r*s*n-a*o*l,this},setFromEulerYXZ:function(e,t,i){var r=Math.cos(e/2),s=Math.cos(t/2),n=Math.cos(i/2),a=Math.sin(e/2),o=Math.sin(t/2),l=Math.sin(i/2);return this.x=a*s*n+r*o*l,this.y=r*o*n-a*s*l,this.z=r*s*l-a*o*n,this.w=r*s*n+a*o*l,this},setFromAxisAngle:function(e,t){var i=t/2,r=Math.sin(i);return this.x=e.x*r,this.y=e.y*r,this.z=e.z*r,this.w=Math.cos(i),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var i=e.x,r=e.y,s=e.z,n=e.w,a=t.x,o=t.y,l=t.z,A=t.w;return this.x=i*A+n*a+r*l-s*o,this.y=r*A+n*o+s*a-i*l,this.z=s*A+n*l+i*o-r*a,this.w=n*A-i*a-r*o-s*l,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var i=this.x,r=this.y,s=this.z,n=this.w,a=n*e.w+i*e.x+r*e.y+s*e.z;if(a<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,a=-a):this.copy(e),a>=1)return this.w=n,this.x=i,this.y=r,this.z=s,this;var o=Math.acos(a),l=Math.sqrt(1-a*a);if(Math.abs(l)<.001)return this.w=.5*(n+this.w),this.x=.5*(i+this.x),this.y=.5*(r+this.y),this.z=.5*(s+this.z),this;var A=Math.sin((1-t)*o)/l,h=Math.sin(t*o)/l;return this.w=n*A+this.w*h,this.x=i*A+this.x*h,this.y=r*A+this.y*h,this.z=s*A+this.z*h,this},setFromUnitVectors:function(e,t){return void 0===z&&(z=new k),(V=e.dot(t)+1)<1e-6?(V=0,Math.abs(e.x)>Math.abs(e.z)?z.set(-e.y,e.x,0):z.set(0,-e.z,e.y)):z.crossVectors(e,t),this.x=z.x,this.y=z.y,this.z=z.z,this.w=V,this.normalize(),this}};var X=new H({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),W=new H({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),j={CardboardV1:new Y({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new Y({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function q(e,t){this.viewer=j.CardboardV2,this.updateDeviceParams(e),this.distortion=new N(this.viewer.distortionCoefficients);for(var i=0;i<t.length;i++){var r=t[i];j[r.id]=new Y(r)}}function Y(e){this.id=e.id,this.label=e.label,this.fov=e.fov,this.interLensDistance=e.interLensDistance,this.baselineLensDistance=e.baselineLensDistance,this.screenLensDistance=e.screenLensDistance,this.distortionCoefficients=e.distortionCoefficients,this.inverseCoefficients=e.inverseCoefficients}q.prototype.updateDeviceParams=function(e){this.device=this.determineDevice_(e)||this.device},q.prototype.getDevice=function(){return this.device},q.prototype.setViewer=function(e){this.viewer=e,this.distortion=new N(this.viewer.distortionCoefficients)},q.prototype.determineDevice_=function(e){if(!e)return o()?(console.warn("Using fallback iOS device measurements."),W):(console.warn("Using fallback Android device measurements."),X);var t=.0254/e.xdpi,i=.0254/e.ydpi,r=m(),s=g();return new H({widthMeters:t*r,heightMeters:i*s,bevelMeters:.001*e.bevelMm})},q.prototype.getDistortedFieldOfViewLeftEye=function(){var e=this.viewer,t=this.device,i=this.distortion,r=e.screenLensDistance,s=(t.widthMeters-e.interLensDistance)/2,n=e.interLensDistance/2,a=e.baselineLensDistance-t.bevelMeters,o=t.heightMeters-a,l=Q*Math.atan(i.distort(s/r)),A=Q*Math.atan(i.distort(n/r)),h=Q*Math.atan(i.distort(a/r)),c=Q*Math.atan(i.distort(o/r));return{leftDegrees:Math.min(l,e.fov),rightDegrees:Math.min(A,e.fov),downDegrees:Math.min(h,e.fov),upDegrees:Math.min(c,e.fov)}},q.prototype.getLeftEyeVisibleTanAngles=function(){var e=this.viewer,t=this.device,i=this.distortion,r=Math.tan(-G*e.fov),s=Math.tan(G*e.fov),n=Math.tan(G*e.fov),a=Math.tan(-G*e.fov),o=t.widthMeters/4,l=t.heightMeters/2,A=e.baselineLensDistance-t.bevelMeters-l,h=e.interLensDistance/2-o,c=-A,d=e.screenLensDistance,u=i.distort((h-o)/d),p=i.distort((c+l)/d),f=i.distort((h+o)/d),m=i.distort((c-l)/d),g=new Float32Array(4);return g[0]=Math.max(r,u),g[1]=Math.min(s,p),g[2]=Math.min(n,f),g[3]=Math.max(a,m),g},q.prototype.getLeftEyeNoLensTanAngles=function(){var e=this.viewer,t=this.device,i=this.distortion,r=new Float32Array(4),s=i.distortInverse(Math.tan(-G*e.fov)),n=i.distortInverse(Math.tan(G*e.fov)),a=i.distortInverse(Math.tan(G*e.fov)),o=i.distortInverse(Math.tan(-G*e.fov)),l=t.widthMeters/4,A=t.heightMeters/2,h=e.baselineLensDistance-t.bevelMeters-A,c=e.interLensDistance/2-l,d=-h,u=e.screenLensDistance,p=(c-l)/u,f=(d+A)/u,m=(c+l)/u,g=(d-A)/u;return r[0]=Math.max(s,p),r[1]=Math.min(n,f),r[2]=Math.min(a,m),r[3]=Math.max(o,g),r},q.prototype.getLeftEyeVisibleScreenRect=function(e){var t=this.viewer,i=this.device,r=t.screenLensDistance,s=(i.widthMeters-t.interLensDistance)/2,n=t.baselineLensDistance-i.bevelMeters,a=(e[0]*r+s)/i.widthMeters,o=(e[1]*r+n)/i.heightMeters,l=(e[2]*r+s)/i.widthMeters,A=(e[3]*r+n)/i.heightMeters;return{x:a,y:A,width:l-a,height:o-A}},q.prototype.getFieldOfViewLeftEye=function(e){return e?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},q.prototype.getFieldOfViewRightEye=function(e){var t=this.getFieldOfViewLeftEye(e);return{leftDegrees:t.rightDegrees,rightDegrees:t.leftDegrees,upDegrees:t.upDegrees,downDegrees:t.downDegrees}},q.prototype.getUndistortedFieldOfViewLeftEye=function(){var e=this.getUndistortedParams_();return{leftDegrees:Q*Math.atan(e.outerDist),rightDegrees:Q*Math.atan(e.innerDist),downDegrees:Q*Math.atan(e.bottomDist),upDegrees:Q*Math.atan(e.topDist)}},q.prototype.getUndistortedViewportLeftEye=function(){var e=this.getUndistortedParams_(),t=this.viewer,i=this.device,r=t.screenLensDistance,s=i.widthMeters/r,n=i.heightMeters/r,a=i.width/s,o=i.height/n,l=Math.round((e.eyePosX-e.outerDist)*a),A=Math.round((e.eyePosY-e.bottomDist)*o);return{x:l,y:A,width:Math.round((e.eyePosX+e.innerDist)*a)-l,height:Math.round((e.eyePosY+e.topDist)*o)-A}},q.prototype.getUndistortedParams_=function(){var e=this.viewer,t=this.device,i=this.distortion,r=e.screenLensDistance,s=e.interLensDistance/2/r,n=t.widthMeters/r,a=t.heightMeters/r,o=n/2-s,l=(e.baselineLensDistance-t.bevelMeters)/r,A=e.fov,h=i.distortInverse(Math.tan(G*A)),c=Math.min(o,h),d=Math.min(s,h),u=Math.min(l,h),p=Math.min(a-l,h);return{outerDist:c,innerDist:d,topDist:p,bottomDist:u,eyePosX:o,eyePosY:l}},q.Viewers=j;var Z={format:1,last_updated:"2019-11-09T17:36:14Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X00PD/*"},{ua:"ASUS_X00PD"}],dpi:245,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X008D/*"},{ua:"ASUS_X008D"}],dpi:282,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2 XL/*"},{ua:"Pixel 2 XL"}],dpi:537.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3 XL/*"},{ua:"Pixel 3 XL"}],dpi:[558.5,553.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3/*"},{ua:"Pixel 3"}],dpi:442.4,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2/*"},{ua:"Pixel 2"}],dpi:441,bw:3,ac:500},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1001/*"},{ua:"ONE E1001"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1003/*"},{ua:"ONE E1003"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2001/*"},{ua:"ONE A2001"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2003/*"},{ua:"ONE A2003"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3000/*"},{ua:"ONEPLUS A3000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3003/*"},{ua:"ONEPLUS A3003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3010/*"},{ua:"ONEPLUS A3010"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6000/*"},{ua:"ONEPLUS A6000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6003/*"},{ua:"ONEPLUS A6003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6010/*"},{ua:"ONEPLUS A6010"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6013/*"},{ua:"ONEPLUS A6013"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G960F/*"},{ua:"SM-G960F"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9600/*"},{ua:"SM-G9600"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960T/*"},{ua:"SM-G960T"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960N/*"},{ua:"SM-G960N"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960U/*"},{ua:"SM-G960U"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9608/*"},{ua:"SM-G9608"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960FD/*"},{ua:"SM-G960FD"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960W/*"},{ua:"SM-G960W"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G965F/*"},{ua:"SM-G965F"}],dpi:529,bw:2,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/EML-L29/*"},{ua:"EML-L29"}],dpi:428,bw:3.45,ac:500},{type:"android",rules:[{mdmh:"Nokia/*/Nokia 7.1/*"},{ua:"Nokia 7.1"}],dpi:[432,431.9],bw:3,ac:500},{type:"ios",rules:[{res:[1242,2688]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G570M/*"},{ua:"SM-G570M"}],dpi:320,bw:3.684,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G970F/*"},{ua:"SM-G970F"}],dpi:438,bw:2.281,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G973F/*"},{ua:"SM-G973F"}],dpi:550,bw:2.002,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G975F/*"},{ua:"SM-G975F"}],dpi:522,bw:2.054,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G977F/*"},{ua:"SM-G977F"}],dpi:505,bw:2.334,ac:500},{type:"ios",rules:[{res:[828,1792]}],dpi:326,bw:5,ac:500}]};function J(e,t){if(this.dpdb=Z,this.recalculateDeviceParams_(),e){this.onDeviceParamsUpdated=t;var i=new XMLHttpRequest,r=this;i.open("GET",e,!0),i.addEventListener("load",function(){r.loading=!1,i.status>=200&&i.status<=299?(r.dpdb=JSON.parse(i.response),r.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),i.send()}}function K(e){this.xdpi=e.xdpi,this.ydpi=e.ydpi,this.bevelMm=e.bevelMm}function $(e,t){this.set(e,t)}function ee(e,t){this.kFilter=e,this.isDebug=t,this.currentAccelMeasurement=new $,this.currentGyroMeasurement=new $,this.previousGyroMeasurement=new $,o()?this.filterQ=new U(-1,0,0,1):this.filterQ=new U(1,0,0,1),this.previousFilterQ=new U,this.previousFilterQ.copy(this.filterQ),this.accelQ=new U,this.isOrientationInitialized=!1,this.estimatedGravity=new k,this.measuredGravity=new k,this.gyroIntegralQ=new U}function te(e,t){this.predictionTimeS=e,this.isDebug=t,this.previousQ=new U,this.previousTimestampS=null,this.deltaQ=new U,this.outQ=new U}function ie(e,t,i,r){this.yawOnly=i,this.accelerometer=new k,this.gyroscope=new k,this.filter=new ee(e,r),this.posePredictor=new te(t,r),this.isFirefoxAndroid=h(),this.isIOS=o();var s=c();this.isDeviceMotionInRadians=!this.isIOS&&s&&s<66,this.isWithoutDeviceMotion=u()||d(),this.filterToWorldQ=new U,o()?this.filterToWorldQ.setFromAxisAngle(new k(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new k(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new U,this.worldToScreenQ=new U,this.originalPoseAdjustQ=new U,this.originalPoseAdjustQ.setFromAxisAngle(new k(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),f()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new U,this.orientationOut_=new Float32Array(4),this.start()}J.prototype.getDeviceParams=function(){return this.deviceParams},J.prototype.recalculateDeviceParams_=function(){var e=this.calcDeviceParams_();e?(this.deviceParams=e,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},J.prototype.calcDeviceParams_=function(){var e=this.dpdb;if(!e)return console.error("DPDB not available."),null;if(1!=e.format)return console.error("DPDB has unexpected format version."),null;if(!e.devices||!e.devices.length)return console.error("DPDB does not have a devices section."),null;var t=navigator.userAgent||navigator.vendor||window.opera,i=m(),r=g();if(!e.devices)return console.error("DPDB has no devices section."),null;for(var s=0;s<e.devices.length;s++){var n=e.devices[s];if(n.rules)if("ios"==n.type||"android"==n.type){if(o()==("ios"==n.type)){for(var a=!1,l=0;l<n.rules.length;l++){var A=n.rules[l];if(this.ruleMatches_(A,t,i,r)){a=!0;break}}if(a){var h=n.dpi[0]||n.dpi,c=n.dpi[1]||n.dpi;return new K({xdpi:h,ydpi:c,bevelMm:n.bw})}}}else console.warn("Device["+s+"] has invalid type.");else console.warn("Device["+s+"] has no rules section.")}return console.warn("No DPDB device match."),null},J.prototype.ruleMatches_=function(e,t,i,r){if(!e.ua&&!e.res)return!1;if(e.ua&&"SM"===e.ua.substring(0,2)&&(e.ua=e.ua.substring(0,7)),e.ua&&t.indexOf(e.ua)<0)return!1;if(e.res){if(!e.res[0]||!e.res[1])return!1;var s=e.res[0],n=e.res[1];if(Math.min(i,r)!=Math.min(s,n)||Math.max(i,r)!=Math.max(s,n))return!1}return!0},$.prototype.set=function(e,t){this.sample=e,this.timestampS=t},$.prototype.copy=function(e){this.set(e.sample,e.timestampS)},ee.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t)},ee.prototype.addGyroMeasurement=function(e,t){this.currentGyroMeasurement.set(e,t);var i,r=t-this.previousGyroMeasurement.timestampS;i=r,!(isNaN(i)||i<=.001||i>1)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},ee.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var i=new U;i.copy(this.filterQ),i.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(i),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var r,s=new U;s.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),s.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",Q*((r=s).w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*Math.acos(r.w)),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var n=new U;n.copy(this.filterQ),n.multiply(s),this.filterQ.slerp(n,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},ee.prototype.getOrientation=function(){return this.filterQ},ee.prototype.accelToQuaternion_=function(e){var t=new k;t.copy(e),t.normalize();var i=new U;return i.setFromUnitVectors(new k(0,0,-1),t),i.inverse(),i},ee.prototype.gyroToQuaternionDelta_=function(e,t){var i=new U,r=new k;return r.copy(e),r.normalize(),i.setFromAxisAngle(r,e.length()*t),i},te.prototype.getPrediction=function(e,t,i){if(!this.previousTimestampS)return this.previousQ.copy(e),this.previousTimestampS=i,e;var r=new k;r.copy(t),r.normalize();var s=t.length();if(s<20*G)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(Q*s).toFixed(1)),this.outQ.copy(e),this.previousQ.copy(e),this.outQ;var n=s*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(r,n),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(e),this.previousTimestampS=i,this.outQ},ie.prototype.getPosition=function(){return null},ie.prototype.getOrientation=function(){var e=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||(r=(new U).setFromAxisAngle(new k(0,0,-1),0),s=new U,-90===window.orientation?s.setFromAxisAngle(new k(0,1,0),Math.PI/-2):s.setFromAxisAngle(new k(0,1,0),Math.PI/2),r.multiply(s)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((i=new U).setFromAxisAngle(new k(1,0,0),-Math.PI/2),i),e=this._deviceOrientationQ;var t=new U;return t.copy(e),t.multiply(this.deviceOrientationFilterToWorldQ),t.multiply(this.resetQ),t.multiply(this.worldToScreenQ),t.multiplyQuaternions(this.deviceOrientationFixQ,t),this.yawOnly&&(t.x=0,t.z=0,t.normalize()),this.orientationOut_[0]=t.x,this.orientationOut_[1]=t.y,this.orientationOut_[2]=t.z,this.orientationOut_[3]=t.w,this.orientationOut_}var i,r,s,n=this.filter.getOrientation();e=this.posePredictor.getPrediction(n,this.gyroscope,this.previousTimestampS);var t=new U;return t.copy(this.filterToWorldQ),t.multiply(this.resetQ),t.multiply(e),t.multiply(this.worldToScreenQ),this.yawOnly&&(t.x=0,t.z=0,t.normalize()),this.orientationOut_[0]=t.x,this.orientationOut_[1]=t.y,this.orientationOut_[2]=t.z,this.orientationOut_[3]=t.w,this.orientationOut_},ie.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),f()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},ie.prototype.onDeviceOrientation_=function(e){this._deviceOrientationQ=this._deviceOrientationQ||new U;var t=e.alpha,i=e.beta,r=e.gamma;t=(t||0)*Math.PI/180,i=(i||0)*Math.PI/180,r=(r||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(i,t,-r)},ie.prototype.onDeviceMotion_=function(e){this.updateDeviceMotion_(e)},ie.prototype.updateDeviceMotion_=function(e){var t=e.accelerationIncludingGravity,i=e.rotationRate,r=e.timeStamp/1e3,s=r-this.previousTimestampS;return s<0?(_("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=r)):s<=.001||s>1?(_("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=r)):(this.accelerometer.set(-t.x,-t.y,-t.z),i&&(p()?this.gyroscope.set(-i.beta,i.alpha,i.gamma):this.gyroscope.set(i.alpha,i.beta,i.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,r)),this.filter.addAccelMeasurement(this.accelerometer,r),void(this.previousTimestampS=r))},ie.prototype.onOrientationChange_=function(e){this.setScreenTransform_()},ie.prototype.onMessage_=function(e){var t=e.data;if(t&&t.type){var i=t.type.toLowerCase();"devicemotion"===i&&this.updateDeviceMotion_(t.deviceMotionEvent)}},ie.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new k(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new k(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},ie.prototype.start=function(){var e,t,i;this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),o()&&(e=window.self!==window.top,t=x(document.referrer),i=x(window.location.href),e&&t!==i)&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},ie.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var re=new k(1,0,0),se=new k(0,0,1),ne=new U;ne.setFromAxisAngle(re,-Math.PI/2),ne.multiply((new U).setFromAxisAngle(se,Math.PI/2));var ae=function(){function e(t){r(this,e),this.config=t,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new U,this._outQ=new U,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return s(e,[{key:"init",value:function(){var e=null;try{(e=new RelativeOrientationSensor({frequency:60,referenceFrame:"screen"})).addEventListener("error",this._onSensorError)}catch(e){this.errors.push(e),"SecurityError"===e.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===e.name?this.useDeviceMotion():console.error(e)}e&&(this.api="sensor",this.sensor=e,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new ie(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var e=this.sensor.quaternion;this._sensorQ.set(e[0],e[1],e[2],e[3]);var t=this._outQ;return t.copy(ne),t.multiply(this._sensorQ),this.config.YAW_ONLY&&(t.x=t.z=0,t.normalize()),this._out[0]=t.x,this._out[1]=t.y,this._out[2]=t.z,this._out[3]=t.w,this._out}},{key:"_onSensorError",value:function(e){this.errors.push(e.error),"NotAllowedError"===e.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===e.error.name?console.error("Sensor could not be read"):console.error(e.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),e}();function oe(){this.loadIcon_();var e=document.createElement("div"),t=e.style;t.position="fixed",t.top=0,t.right=0,t.bottom=0,t.left=0,t.backgroundColor="gray",t.fontFamily="sans-serif",t.zIndex=1e6;var i=document.createElement("img");i.src=this.icon;var t=i.style;t.marginLeft="25%",t.marginTop="25%",t.width="50%",e.appendChild(i);var r=document.createElement("div"),t=r.style;t.textAlign="center",t.fontSize="16px",t.lineHeight="24px",t.margin="24px 25%",t.width="50%",r.innerHTML="Place your phone into your Cardboard viewer.",e.appendChild(r);var s=document.createElement("div"),t=s.style;t.backgroundColor="#CFD8DC",t.position="fixed",t.bottom=0,t.width="100%",t.height="48px",t.padding="14px 24px",t.boxSizing="border-box",t.color="#656A6B",e.appendChild(s);var n=document.createElement("div");n.style.float="left",n.innerHTML="No Cardboard viewer?";var a=document.createElement("a");a.href="https://www.google.com/get/cardboard/get-cardboard/",a.innerHTML="get one",a.target="_blank";var t=a.style;t.float="right",t.fontWeight=600,t.textTransform="uppercase",t.borderLeft="1px solid gray",t.paddingLeft="24px",t.textDecoration="none",t.color="#656A6B",s.appendChild(n),s.appendChild(a),this.overlay=e,this.text=r,this.hide()}oe.prototype.show=function(e){e||this.overlay.parentElement?e&&(this.overlay.parentElement&&this.overlay.parentElement!=e&&this.overlay.parentElement.removeChild(this.overlay),e.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var t=this.overlay.querySelector("img"),i=t.style;f()?(i.width="20%",i.marginLeft="40%",i.marginTop="3%"):(i.width="50%",i.marginLeft="25%",i.marginTop="25%")},oe.prototype.hide=function(){this.overlay.style.display="none"},oe.prototype.showTemporarily=function(e,t){this.show(t),this.timer=setTimeout(this.hide.bind(this),e)},oe.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},oe.prototype.update=function(){this.disableShowTemporarily(),!f()&&b()?this.show():this.hide()},oe.prototype.loadIcon_=function(){this.icon="data:image/svg+xml,"+encodeURIComponent("<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>")};var le="CardboardV1",Ae="WEBVR_CARDBOARD_VIEWER";function he(e){try{this.selectedKey=localStorage.getItem(Ae)}catch(e){console.error("Failed to load viewer profile: %s",e)}this.selectedKey||(this.selectedKey=e||le),this.dialog=this.createDialog_(q.Viewers),this.root=null,this.onChangeCallbacks_=[]}he.prototype.show=function(e){this.root=e,e.appendChild(this.dialog);var t=this.dialog.querySelector("#"+this.selectedKey);t.checked=!0,this.dialog.style.display="block"},he.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},he.prototype.getCurrentViewer=function(){return q.Viewers[this.selectedKey]},he.prototype.getSelectedKey_=function(){var e=this.dialog.querySelector("input[name=field]:checked");return e?e.id:null},he.prototype.onChange=function(e){this.onChangeCallbacks_.push(e)},he.prototype.fireOnChange_=function(e){for(var t=0;t<this.onChangeCallbacks_.length;t++)this.onChangeCallbacks_[t](e)},he.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),this.selectedKey&&q.Viewers[this.selectedKey]){this.fireOnChange_(q.Viewers[this.selectedKey]);try{localStorage.setItem(Ae,this.selectedKey)}catch(e){console.error("Failed to save viewer profile: %s",e)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},he.prototype.createDialog_=function(e){var t=document.createElement("div");t.classList.add("webvr-polyfill-viewer-selector"),t.style.display="none";var i=document.createElement("div"),r=i.style;r.position="fixed",r.left=0,r.top=0,r.width="100%",r.height="100%",r.background="rgba(0, 0, 0, 0.3)",i.addEventListener("click",this.hide.bind(this));var s=document.createElement("div"),r=s.style;for(var n in r.boxSizing="border-box",r.position="fixed",r.top="24px",r.left="50%",r.marginLeft="-140px",r.width="280px",r.padding="24px",r.overflow="hidden",r.background="#fafafa",r.fontFamily="'Roboto', sans-serif",r.boxShadow="0px 5px 20px #666",s.appendChild(this.createH1_("Select your viewer")),e)s.appendChild(this.createChoice_(n,e[n].label));return s.appendChild(this.createButton_("Save",this.onSave_.bind(this))),t.appendChild(i),t.appendChild(s),t},he.prototype.createH1_=function(e){var t=document.createElement("h1"),i=t.style;return i.color="black",i.fontSize="20px",i.fontWeight="bold",i.marginTop=0,i.marginBottom="24px",t.innerHTML=e,t},he.prototype.createChoice_=function(e,t){var i=document.createElement("div");i.style.marginTop="8px",i.style.color="black";var r=document.createElement("input");r.style.fontSize="30px",r.setAttribute("id",e),r.setAttribute("type","radio"),r.setAttribute("value",e),r.setAttribute("name","field");var s=document.createElement("label");return s.style.marginLeft="4px",s.setAttribute("for",e),s.innerHTML=t,i.appendChild(r),i.appendChild(s),i},he.prototype.createButton_=function(e,t){var i=document.createElement("button");i.innerHTML=e;var r=i.style;return r.float="right",r.textTransform="uppercase",r.color="#1094f7",r.fontSize="14px",r.letterSpacing=0,r.border=0,r.background="none",r.marginTop="16px",i.addEventListener("click",t),i},"undefined"!=typeof window?window:void 0!==Ce||"undefined"!=typeof self&&self;var ce,de,ue=(function(e,t){var i;i=function(){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=i(1),n="undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",s),this.noSleepVideo.addEventListener("timeupdate",function(e){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return r(e,[{key:"enable",value:function(){n?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){n?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),e}();e.exports=a},function(e,t,i){e.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])},e.exports=i()}(de={exports:{}},de.exports),(ce=de.exports)&&ce.__esModule&&Object.prototype.hasOwnProperty.call(ce,"default")?ce.default:ce),pe=1e3,fe=[0,0,.5,1],me=[.5,0,.5,1],ge=window.requestAnimationFrame,ve=window.cancelAnimationFrame;function we(e){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:e.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:e.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:e.canPresent},maxLayers:{writable:!1,enumerable:!0,value:e.maxLayers},hasOrientation:{enumerable:!0,get:function(){return F("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),e.hasOrientation}}})}function ye(e){var t=!("wakelock"in(e=e||{}))||e.wakelock;this.isPolyfilled=!0,this.displayId=pe++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return F("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new we({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,t&&b()&&(this.wakelock_=new ue)}ye.prototype.getFrameData=function(e){return M(e,this._getPose(),this)},ye.prototype.getPose=function(){return F("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},ye.prototype.resetPose=function(){return F("VRDisplay.prototype.resetPose"),this._resetPose()},ye.prototype.getImmediatePose=function(){return F("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},ye.prototype.requestAnimationFrame=function(e){return ge(e)},ye.prototype.cancelAnimationFrame=function(e){return ve(e)},ye.prototype.wrapForFullscreen=function(e){if(o())return e;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var t=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",t.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==e)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=e,this.originalParent_=e.parentElement,this.originalParent_||document.body.appendChild(e),!this.fullscreenWrapper_.parentElement){var i=this.fullscreenElement_.parentElement;i.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),i.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var r=this;return function(){if(r.fullscreenElement_){var e=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];r.fullscreenElement_.setAttribute("style",e.join("; ")+";")}}(),this.fullscreenWrapper_},ye.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var e=this.fullscreenElement_;this.fullscreenElementCachedStyle_?e.setAttribute("style",this.fullscreenElementCachedStyle_):e.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var t=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(e),this.originalParent_===t?t.insertBefore(e,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(e),t.removeChild(this.fullscreenWrapper_),e}},ye.prototype.requestPresent=function(e){var t=this.isPresenting,i=this;return e instanceof Array||(F("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),e=[e]),new Promise(function(r,s){if(i.capabilities.canPresent)if(0==e.length||e.length>i.capabilities.maxLayers)s(new Error("Invalid number of layers."));else{var n=e[0];if(n.source){var a=n.leftBounds||fe,A=n.rightBounds||me;if(t){var h=i.layer_;h.source!==n.source&&(h.source=n.source);for(var c=0;c<4;c++)h.leftBounds[c]=a[c],h.rightBounds[c]=A[c];return i.wrapForFullscreen(i.layer_.source),i.updatePresent_(),void r()}if(i.layer_={predistorted:n.predistorted,source:n.source,leftBounds:a.slice(0),rightBounds:A.slice(0)},i.waitingForPresent_=!1,i.layer_&&i.layer_.source){var d=i.wrapForFullscreen(i.layer_.source);i.addFullscreenListeners_(d,function(){var e=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;i.isPresenting=d===e,i.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(e){console.error("screen.orientation.lock() failed due to",e.message)}),i.waitingForPresent_=!1,i.beginPresent_(),r()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),i.removeFullscreenWrapper(),i.disableWakeLock(),i.endPresent_(),i.removeFullscreenListeners_()),i.fireVRDisplayPresentChange_()},function(){i.waitingForPresent_&&(i.removeFullscreenWrapper(),i.removeFullscreenListeners_(),i.disableWakeLock(),i.waitingForPresent_=!1,i.isPresenting=!1,s(new Error("Unable to present.")))}),function(e){if(l())return!1;if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0}(d)?(i.enableWakeLock(),i.waitingForPresent_=!0):(o()||l())&&(i.enableWakeLock(),i.isPresenting=!0,i.beginPresent_(),i.fireVRDisplayPresentChange_(),r())}i.waitingForPresent_||o()||(v(),s(new Error("Unable to present.")))}else r()}else s(new Error("VRDisplay is not capable of presenting."))})},ye.prototype.exitPresent=function(){var e=this.isPresenting,t=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(i,r){e?(!v()&&o()&&(t.endPresent_(),t.fireVRDisplayPresentChange_()),l()&&(t.removeFullscreenWrapper(),t.removeFullscreenListeners_(),t.endPresent_(),t.fireVRDisplayPresentChange_()),i()):r(new Error("Was not presenting to VRDisplay."))})},ye.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},ye.prototype.fireVRDisplayPresentChange_=function(){var e=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(e)},ye.prototype.fireVRDisplayConnect_=function(){var e=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(e)},ye.prototype.addFullscreenListeners_=function(e,t,i){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=e,this.fullscreenChangeHandler_=t,this.fullscreenErrorHandler_=i,t&&(document.fullscreenEnabled?e.addEventListener("fullscreenchange",t,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenchange",t,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",t,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenchange",t,!1)),i&&(document.fullscreenEnabled?e.addEventListener("fullscreenerror",i,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenerror",i,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",i,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenerror",i,!1))},ye.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var e=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var t=this.fullscreenChangeHandler_;e.removeEventListener("fullscreenchange",t,!1),e.removeEventListener("webkitfullscreenchange",t,!1),document.removeEventListener("mozfullscreenchange",t,!1),e.removeEventListener("msfullscreenchange",t,!1)}if(this.fullscreenErrorHandler_){var i=this.fullscreenErrorHandler_;e.removeEventListener("fullscreenerror",i,!1),e.removeEventListener("webkitfullscreenerror",i,!1),document.removeEventListener("mozfullscreenerror",i,!1),e.removeEventListener("msfullscreenerror",i,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},ye.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},ye.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},ye.prototype.beginPresent_=function(){},ye.prototype.endPresent_=function(){},ye.prototype.submitFrame=function(e){},ye.prototype.getEyeParameters=function(e){return null};var be={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},Ee={LEFT:"left",RIGHT:"right"};function Se(e){var t=E({},be);e=E(t,e||{}),ye.call(this,{wakelock:e.MOBILE_WAKE_LOCK}),this.config=e,this.displayName="Cardboard VRDisplay",this.capabilities=new we({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new ae(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new J(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new q(this.dpdb_.getDeviceParams(),e.ADDITIONAL_VIEWERS),this.viewerSelector_=new he(e.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new oe),o()&&window.addEventListener("resize",this.onResize_.bind(this))}return Se.prototype=Object.create(ye.prototype),Se.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},Se.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},Se.prototype._getFieldOfView=function(e){var t;if(e==Ee.LEFT)t=this.deviceInfo_.getFieldOfViewLeftEye();else{if(e!=Ee.RIGHT)return console.error("Invalid eye provided: %s",e),null;t=this.deviceInfo_.getFieldOfViewRightEye()}return t},Se.prototype._getEyeOffset=function(e){var t;if(e==Ee.LEFT)t=[.5*-this.deviceInfo_.viewer.interLensDistance,0,0];else{if(e!=Ee.RIGHT)return console.error("Invalid eye provided: %s",e),null;t=[.5*this.deviceInfo_.viewer.interLensDistance,0,0]}return t},Se.prototype.getEyeParameters=function(e){var t=this._getEyeOffset(e),i=this._getFieldOfView(e),r={offset:t,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(r,"fieldOfView",{enumerable:!0,get:function(){return F("VRFieldOfView","VRFrameData's projection matrices"),i}}),r},Se.prototype.onDeviceParamsUpdated_=function(e){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},Se.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},Se.prototype.beginPresent_=function(){var e=this.layer_.source.getContext("webgl");e||(e=this.layer_.source.getContext("experimental-webgl")),e||(e=this.layer_.source.getContext("webgl2")),e&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(e.canvas.width=m()*this.bufferScale_,e.canvas.height=g()*this.bufferScale_,this.cardboardUI_=new O(e)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new O(e)),this.distorter_=new P(e,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(e){this.viewerSelector_.show(this.layer_.source.parentElement),e.stopPropagation(),e.preventDefault()}.bind(this),function(e){this.exitPresent(),e.stopPropagation(),e.preventDefault()}.bind(this)),this.rotateInstructions_&&(f()&&b()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},Se.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},Se.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},Se.prototype.submitFrame=function(e){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl");t||(t=this.layer_.source.getContext("experimental-webgl")),t||(t=this.layer_.source.getContext("webgl2"));var i=t.canvas;i.width==this.lastWidth&&i.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=i.width,this.lastHeight=i.height,this.cardboardUI_.render()}},Se.prototype.onOrientationChange_=function(e){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},Se.prototype.onResize_=function(e){if(this.layer_){var t=this.layer_.source.getContext("webgl");t||(t=this.layer_.source.getContext("experimental-webgl")),t||(t=this.layer_.source.getContext("webgl2")),t.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),S(t.canvas)}},Se.prototype.onViewerChanged_=function(e){this.deviceInfo_.setViewer(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},Se.prototype.fireVRDisplayDeviceParamsChange_=function(){var e=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(e)},Se.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},Se.VRDisplay=ye,Se}()}(De={exports:{}},De.exports),De.exports),Oe=(Ie=Le)&&Ie.__esModule&&Object.prototype.hasOwnProperty.call(Ie,"default")?Ie.default:Ie;class Ne extends i{constructor(e){super(),this.global=e,this.onWindowResize=this.onWindowResize.bind(this),this.global.window.addEventListener("resize",this.onWindowResize),this.environmentBlendMode="opaque"}onBaseLayerSet(e,t){throw new Error("Not implemented")}isSessionSupported(e){throw new Error("Not implemented")}isFeatureSupported(e){throw new Error("Not implemented")}async requestSession(e,t){throw new Error("Not implemented")}requestAnimationFrame(e){throw new Error("Not implemented")}onFrameStart(e){throw new Error("Not implemented")}onFrameEnd(e){throw new Error("Not implemented")}doesSessionSupportReferenceSpace(e,t){throw new Error("Not implemented")}requestStageBounds(){throw new Error("Not implemented")}async requestFrameOfReferenceTransform(e,t){}cancelAnimationFrame(e){throw new Error("Not implemented")}endSession(e){throw new Error("Not implemented")}getViewport(e,t,i,r){throw new Error("Not implemented")}getProjectionMatrix(e){throw new Error("Not implemented")}getBasePoseMatrix(){throw new Error("Not implemented")}getBaseViewMatrix(e){throw new Error("Not implemented")}getInputSources(){throw new Error("Not implemented")}getInputPose(e,t,i){throw new Error("Not implemented")}onWindowResize(){this.onWindowResize()}}let Ge={mapping:"xr-standard",profiles:["oculus-go","generic-trigger-touchpad"],buttons:{length:3,0:1,1:null,2:0},gripTransform:{orientation:[.11*Math.PI,0,0,1]}},Qe={mapping:"xr-standard",displayProfiles:{"Oculus Quest":["oculus-touch-v2","oculus-touch","generic-trigger-squeeze-thumbstick"]},profiles:["oculus-touch","generic-trigger-squeeze-thumbstick"],axes:{length:4,0:null,1:null,2:0,3:1},buttons:{length:7,0:1,1:2,2:null,3:0,4:3,5:4,6:null},gripTransform:{position:[0,-.02,.04,1],orientation:[.11*Math.PI,0,0,1]}},ke={mapping:"xr-standard",profiles:["htc-vive","generic-trigger-squeeze-touchpad"],displayProfiles:{"HTC Vive":["htc-vive","generic-trigger-squeeze-touchpad"],"HTC Vive DVT":["htc-vive","generic-trigger-squeeze-touchpad"],"Valve Index":["valve-index","generic-trigger-squeeze-touchpad-thumbstick"]},buttons:{length:3,0:1,1:2,2:0},gripTransform:{position:[0,0,.05,1]},targetRayTransform:{orientation:[-.08*Math.PI,0,0,1]},userAgentOverrides:{Firefox:{axes:{invert:[1,3]}}}},ze={mapping:"xr-standard",profiles:["samsung-gearvr","generic-trigger-touchpad"],buttons:{length:3,0:1,1:null,2:0},gripTransform:{orientation:[.11*Math.PI,0,0,1]}},Ve={mapping:"xr-standard",profiles:["samsung-odyssey","microsoft-mixed-reality","generic-trigger-squeeze-touchpad-thumbstick"],buttons:{length:4,0:1,1:0,2:2,3:4},gripTransform:{position:[0,-.02,.04,1],orientation:[.11*Math.PI,0,0,1]}},Ue={mapping:"xr-standard",profiles:["microsoft-mixed-reality","generic-trigger-squeeze-touchpad-thumbstick"],buttons:{length:4,0:1,1:0,2:2,3:4},gripTransform:{position:[0,-.02,.04,1],orientation:[.11*Math.PI,0,0,1]}},He={"Daydream Controller":{mapping:"",profiles:["google-daydream","generic-trigger-touchpad"],buttons:{length:3,0:null,1:null,2:0}},"Gear VR Controller":ze,"HTC Vive Focus Controller":{mapping:"xr-standard",profiles:["htc-vive-focus","generic-trigger-touchpad"],buttons:{length:3,0:1,1:null,2:0}},"Oculus Go Controller":Ge,"Oculus Touch (Right)":Qe,"Oculus Touch (Left)":Qe,"OpenVR Gamepad":ke,"Spatial Controller (Spatial Interaction Source) 045E-065A":Ue,"Spatial Controller (Spatial Interaction Source) 045E-065D":Ve,"Windows Mixed Reality (Right)":Ue,"Windows Mixed Reality (Left)":Ue};const Xe=f(.155,-.465,-.15),We=f(-.155,-.465,-.15),je=f(0,0,-.25),qe=f(0,0,.05),Ye=f(-.08,.14,.08),Ze=.4,Je=.4,Ke=.61,$e=.175,et=.12,tt=.87,it=180/Math.PI;class rt{constructor(){this.hand="right",this.headElbowOffset=Xe,this.controllerQ=M(),this.lastControllerQ=M(),this.headQ=M(),this.headPos=u(),this.elbowPos=u(),this.wristPos=u(),this.time=null,this.lastTime=null,this.rootQ=M(),this.position=u()}setHandedness(e){this.hand!=e&&(this.hand=e,"left"==this.hand?this.headElbowOffset=We:this.headElbowOffset=Xe)}update(e,t){this.time=X(),e&&(B(this.lastControllerQ,this.controllerQ),B(this.controllerQ,e)),t&&(h(this.headPos,t),c(this.headQ,t));let i=this.getHeadYawOrientation_(),r=this.quatAngle_(this.lastControllerQ,this.controllerQ);r/((this.time-this.lastTime)/1e3)>Ke?_(this.rootQ,this.rootQ,i,Math.min(r/$e,1)):B(this.rootQ,i);let s=f(0,0,-1);E(s,s,this.controllerQ);let n=y(s,[0,1,0]),a=this.clamp_((n-et)/tt,0,1),o=R(this.rootQ);F(o,o),x(o,o,this.controllerQ);let l=this.elbowPos;m(l,this.headPos),g(l,l,this.headElbowOffset);let A=p(Ye);v(A,A,a),g(l,l,A);let d=this.quatAngle_(o,M())*it,u=(1-Math.pow(d/180,4))*(Ze+(1-Ze)*a*Je),w=M();_(w,w,o,u);let b=F(M(),w),S=R(o);x(S,S,b);let T=this.wristPos;m(T,qe),E(T,T,w),g(T,T,je),E(T,T,S),g(T,T,l);let P=p(Ye);v(P,P,a),g(this.position,this.wristPos,P),E(this.position,this.position,this.rootQ),this.lastTime=this.time}getPosition(){return this.position}getHeadYawOrientation_(){let e=u();return function(e,t,i){function r(e,t,i){return e<t?t:e>i?i:e}var s=t[0]*t[0],n=t[1]*t[1],a=t[2]*t[2],o=t[3]*t[3];if("XYZ"===i)e[0]=Math.atan2(2*(t[0]*t[3]-t[1]*t[2]),o-s-n+a),e[1]=Math.asin(r(2*(t[0]*t[2]+t[1]*t[3]),-1,1)),e[2]=Math.atan2(2*(t[2]*t[3]-t[0]*t[1]),o+s-n-a);else if("YXZ"===i)e[0]=Math.asin(r(2*(t[0]*t[3]-t[1]*t[2]),-1,1)),e[1]=Math.atan2(2*(t[0]*t[2]+t[1]*t[3]),o-s-n+a),e[2]=Math.atan2(2*(t[0]*t[1]+t[2]*t[3]),o-s+n-a);else if("ZXY"===i)e[0]=Math.asin(r(2*(t[0]*t[3]+t[1]*t[2]),-1,1)),e[1]=Math.atan2(2*(t[1]*t[3]-t[2]*t[0]),o-s-n+a),e[2]=Math.atan2(2*(t[2]*t[3]-t[0]*t[1]),o-s+n-a);else if("ZYX"===i)e[0]=Math.atan2(2*(t[0]*t[3]+t[2]*t[1]),o-s-n+a),e[1]=Math.asin(r(2*(t[1]*t[3]-t[0]*t[2]),-1,1)),e[2]=Math.atan2(2*(t[0]*t[1]+t[2]*t[3]),o+s-n-a);else if("YZX"===i)e[0]=Math.atan2(2*(t[0]*t[3]-t[2]*t[1]),o-s+n-a),e[1]=Math.atan2(2*(t[1]*t[3]-t[0]*t[2]),o+s-n-a),e[2]=Math.asin(r(2*(t[0]*t[1]+t[2]*t[3]),-1,1));else{if("XZY"!==i)return void console.log("No order given for quaternion to euler conversion.");e[0]=Math.atan2(2*(t[0]*t[3]+t[1]*t[2]),o-s+n-a),e[1]=Math.atan2(2*(t[0]*t[2]+t[1]*t[3]),o+s-n-a),e[2]=Math.asin(r(2*(t[2]*t[3]-t[0]*t[1]),-1,1))}}(e,this.headQ,"YXZ"),function(e,t,i,r){let s=.5*Math.PI/180;t*=s,i*=s,r*=s;let n=Math.sin(t),a=Math.cos(t),o=Math.sin(i),l=Math.cos(i),A=Math.sin(r),h=Math.cos(r);return e[0]=n*l*h-a*o*A,e[1]=a*o*h+n*l*A,e[2]=a*l*A-n*o*h,e[3]=a*l*h+n*o*A,e}(M(),0,e[1]*it,0)}clamp_(e,t,i){return Math.min(Math.max(e,t),i)}quatAngle_(e,t){let i=[0,0,-1],r=[0,0,-1];return E(i,i,e),E(r,r,t),function(e,t){let i=f(e[0],e[1],e[2]),r=f(t[0],t[1],t[2]);w(i,i),w(r,r);let s=y(i,r);return s>1?0:s<-1?Math.PI:Math.acos(s)}(i,r)}}const st=Symbol("@@webxr-polyfill/XRRemappedGamepad"),nt={pressed:!1,touched:!1,value:0};Object.freeze(nt);class at{constructor(e,t,i){if(i||(i={}),i.userAgentOverrides)for(let e in i.userAgentOverrides)if(navigator.userAgent.includes(e)){let t=i.userAgentOverrides[e];for(let e in t)e in i?Object.assign(i[e],t[e]):i[e]=t[e];break}let r=new Array(i.axes&&i.axes.length?i.axes.length:e.axes.length),s=new Array(i.buttons&&i.buttons.length?i.buttons.length:e.buttons.length),a=null;if(i.gripTransform){let e=i.gripTransform.orientation||[0,0,0,1];A(a=n(),P(e,e),i.gripTransform.position||[0,0,0])}let o=null;if(i.targetRayTransform){let e=i.targetRayTransform.orientation||[0,0,0,1];A(o=n(),P(e,e),i.targetRayTransform.position||[0,0,0])}let l=i.profiles;i.displayProfiles&&t.displayName in i.displayProfiles&&(l=i.displayProfiles[t.displayName]),this[st]={gamepad:e,map:i,profiles:l||[e.id],mapping:i.mapping||e.mapping,axes:r,buttons:s,gripTransform:a,targetRayTransform:o},this._update()}_update(){let e=this[st].gamepad,t=this[st].map,i=this[st].axes;for(let r=0;r<i.length;++r)t.axes&&r in t.axes?null===t.axes[r]?i[r]=0:i[r]=e.axes[t.axes[r]]:i[r]=e.axes[r];if(t.axes&&t.axes.invert)for(let e of t.axes.invert)e<i.length&&(i[e]*=-1);let r=this[st].buttons;for(let i=0;i<r.length;++i)t.buttons&&i in t.buttons?null===t.buttons[i]?r[i]=nt:r[i]=e.buttons[t.buttons[i]]:r[i]=e.buttons[i]}get id(){return""}get _profiles(){return this[st].profiles}get index(){return-1}get connected(){return this[st].gamepad.connected}get timestamp(){return this[st].gamepad.timestamp}get mapping(){return this[st].mapping}get axes(){return this[st].axes}get buttons(){return this[st].buttons}get hapticActuators(){return this[st].gamepad.hapticActuators}}class ot{constructor(e,t,i=0,r=-1){this.polyfill=e,this.display=t,this.nativeGamepad=null,this.gamepad=null,this.inputSource=new Se(this),this.lastPosition=u(),this.emulatedPosition=!1,this.basePoseMatrix=n(),this.outputMatrix=n(),this.primaryButtonIndex=i,this.primaryActionPressed=!1,this.primarySqueezeButtonIndex=r,this.primarySqueezeActionPressed=!1,this.handedness="",this.targetRayMode="gaze",this.armModel=null}get profiles(){return this.gamepad?this.gamepad._profiles:[]}updateFromGamepad(e){this.nativeGamepad!==e&&(this.nativeGamepad=e,this.gamepad=e?new at(e,this.display,He[e.id]):null),this.handedness=""===e.hand?"none":e.hand,this.gamepad&&this.gamepad._update(),e.pose?(this.targetRayMode="tracked-pointer",this.emulatedPosition=!e.pose.hasPosition):""===e.hand&&(this.targetRayMode="gaze",this.emulatedPosition=!1)}updateBasePoseMatrix(){if(this.nativeGamepad&&this.nativeGamepad.pose){let e=this.nativeGamepad.pose,t=e.position,i=e.orientation;if(!t&&!i)return;t?(this.lastPosition[0]=t[0],this.lastPosition[1]=t[1],this.lastPosition[2]=t[2]):e.hasPosition?t=this.lastPosition:(this.armModel||(this.armModel=new rt),this.armModel.setHandedness(this.nativeGamepad.hand),this.armModel.update(i,this.polyfill.getBasePoseMatrix()),t=this.armModel.getPosition()),A(this.basePoseMatrix,i,t)}else e=this.basePoseMatrix,t=this.polyfill.getBasePoseMatrix(),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15];var e,t;return this.basePoseMatrix}getXRPose(e,t){switch(this.updateBasePoseMatrix(),t){case"target-ray":e._transformBasePoseMatrix(this.outputMatrix,this.basePoseMatrix),this.gamepad&&this.gamepad[st].targetRayTransform&&l(this.outputMatrix,this.outputMatrix,this.gamepad[st].targetRayTransform);break;case"grip":if(!this.nativeGamepad||!this.nativeGamepad.pose)return null;e._transformBasePoseMatrix(this.outputMatrix,this.basePoseMatrix),this.gamepad&&this.gamepad[st].gripTransform&&l(this.outputMatrix,this.outputMatrix,this.gamepad[st].gripTransform);break;default:return null}return e._adjustForOriginOffset(this.outputMatrix),new XRPose(new XRRigidTransform(this.outputMatrix),this.emulatedPosition)}}const lt=!1,At={highRefreshRate:!0},ht={oculus:1,openvr:1,"spatial controller (spatial interaction source)":1};let ct=0;class dt{constructor(e,t,i={}){if(this.mode=e,this.enabledFeatures=t,this.outputContext=null,this.immersive="immersive-vr"==e||"immersive-ar"==e,this.ended=null,this.baseLayer=null,this.id=++ct,this.modifiedCanvasLayer=!1,this.outputContext&&!lt){const e=i.renderContextType||"2d";this.renderContext=this.outputContext.canvas.getContext(e)}}}class ut extends Ne{constructor(e,t){const{canPresent:i}=t.capabilities;super(e),this.display=t,this.frame=new e.VRFrameData,this.sessions=new Map,this.immersiveSession=null,this.canPresent=i,this.baseModelMatrix=n(),this.gamepadInputSources={},this.tempVec3=new Float32Array(3),this.onVRDisplayPresentChange=this.onVRDisplayPresentChange.bind(this),e.window.addEventListener("vrdisplaypresentchange",this.onVRDisplayPresentChange),this.CAN_USE_GAMEPAD=e.navigator&&"getGamepads"in e.navigator,this.HAS_BITMAP_SUPPORT=Te(e)}get depthNear(){return this.display.depthNear}set depthNear(e){this.display.depthNear=e}get depthFar(){return this.display.depthFar}set depthFar(e){this.display.depthFar=e}onBaseLayerSet(e,t){const i=this.sessions.get(e),r=t.context.canvas;if(i.immersive){const e=this.display.getEyeParameters("left"),s=this.display.getEyeParameters("right");r.width=2*Math.max(e.renderWidth,s.renderWidth),r.height=Math.max(e.renderHeight,s.renderHeight),this.display.requestPresent([{source:r,attributes:At}]).then(()=>{lt||this.global.document.body.contains(r)||(i.modifiedCanvasLayer=!0,this.global.document.body.appendChild(r),Pe(r)),i.baseLayer=t})}else i.baseLayer=t}isSessionSupported(e){return"immersive-ar"!=e&&("immersive-vr"!=e||!1!==this.canPresent)}isFeatureSupported(e){switch(e){case"viewer":case"local":case"local-floor":return!0;case"bounded":case"unbounded":default:return!1}}async requestSession(e,t){if(!this.isSessionSupported(e))return Promise.reject();let i="immersive-vr"==e;if(i){const e=this.global.document.createElement("canvas");if(!lt){e.getContext("webgl")}await this.display.requestPresent([{source:e,attributes:At}])}const r=new dt(e,t,{renderContextType:this.HAS_BITMAP_SUPPORT?"bitmaprenderer":"2d"});return this.sessions.set(r.id,r),i&&(this.immersiveSession=r,this.dispatchEvent("@@webxr-polyfill/vr-present-start",r.id)),Promise.resolve(r.id)}requestAnimationFrame(e){return this.display.requestAnimationFrame(e)}getPrimaryButtonIndex(e){let t=0,i=e.id.toLowerCase();for(let e in ht)if(i.includes(e)){t=ht[e];break}return Math.min(t,e.buttons.length-1)}onFrameStart(e,t){this.display.depthNear=t.depthNear,this.display.depthFar=t.depthFar,this.display.getFrameData(this.frame);const i=this.sessions.get(e);if(i.immersive&&this.CAN_USE_GAMEPAD){let e=this.gamepadInputSources;this.gamepadInputSources={};let t=this.global.navigator.getGamepads();for(let r=0;r<t.length;++r){let s=t[r];if(s&&s.displayId>0){let t=e[r];if(t||(t=new ot(this,this.display,this.getPrimaryButtonIndex(s))),t.updateFromGamepad(s),this.gamepadInputSources[r]=t,-1!=t.primaryButtonIndex){let e=s.buttons[t.primaryButtonIndex].pressed;e&&!t.primaryActionPressed?this.dispatchEvent("@@webxr-polyfill/input-select-start",{sessionId:i.id,inputSource:t.inputSource}):!e&&t.primaryActionPressed&&this.dispatchEvent("@@webxr-polyfill/input-select-end",{sessionId:i.id,inputSource:t.inputSource}),t.primaryActionPressed=e}if(-1!=t.primarySqueezeButtonIndex){let e=s.buttons[t.primarySqueezeButtonIndex].pressed;e&&!t.primarySqueezeActionPressed?this.dispatchEvent("@@webxr-polyfill/input-squeeze-start",{sessionId:i.id,inputSource:t.inputSource}):!e&&t.primarySqueezeActionPressed&&this.dispatchEvent("@@webxr-polyfill/input-squeeze-end",{sessionId:i.id,inputSource:t.inputSource}),t.primarySqueezeActionPressed=e}}}}if(!lt&&!i.immersive&&i.baseLayer){const e=i.baseLayer.context.canvas;d(this.frame.leftProjectionMatrix,t.inlineVerticalFieldOfView,e.width/e.height,t.depthNear,t.depthFar)}}onFrameEnd(e){const t=this.sessions.get(e);if(!t.ended&&t.baseLayer){if(t.outputContext&&(!t.immersive||this.display.capabilities.hasExternalDisplay)){const e=t.immersive&&this.display.capabilities.hasExternalDisplay,i=t.baseLayer.context.canvas,r=e?i.width/2:i.width,s=i.height;if(!lt){const e=t.outputContext.canvas,n=e.width,a=e.height,o=t.renderContext;this.HAS_BITMAP_SUPPORT?i.transferToImageBitmap?o.transferFromImageBitmap(i.transferToImageBitmap()):this.global.createImageBitmap(i,0,0,r,s,{resizeWidth:n,resizeHeight:a}).then(e=>o.transferFromImageBitmap(e)):o.drawImage(i,0,0,r,s,0,0,n,a)}}t.immersive&&t.baseLayer&&this.display.submitFrame()}}cancelAnimationFrame(e){this.display.cancelAnimationFrame(e)}async endSession(e){const t=this.sessions.get(e);if(!t.ended)return t.immersive?this.display.exitPresent():void(t.ended=!0)}doesSessionSupportReferenceSpace(e,t){const i=this.sessions.get(e);return!i.ended&&i.enabledFeatures.has(t)}requestStageBounds(){if(this.display.stageParameters){const e=this.display.stageParameters.sizeX,t=this.display.stageParameters.sizeZ,i=[];return i.push(-e/2),i.push(-t/2),i.push(e/2),i.push(-t/2),i.push(e/2),i.push(t/2),i.push(-e/2),i.push(t/2),i}return null}async requestFrameOfReferenceTransform(e,t){return("local-floor"===e||"bounded-floor"===e)&&this.display.stageParameters&&this.display.stageParameters.sittingToStandingTransform?this.display.stageParameters.sittingToStandingTransform:null}getProjectionMatrix(e){if("left"===e)return this.frame.leftProjectionMatrix;if("right"===e)return this.frame.rightProjectionMatrix;if("none"===e)return this.frame.leftProjectionMatrix;throw new Error("eye must be of type 'left' or 'right'")}getViewport(e,t,i,r){const s=this.sessions.get(e),{width:n,height:a}=i.context.canvas;if(!s.immersive)return r.x=r.y=0,r.width=n,r.height=a,!0;if("left"===t||"none"===t)r.x=0;else{if("right"!==t)return!1;r.x=n/2}return r.y=0,r.width=n/2,r.height=a,!0}getBasePoseMatrix(){let{position:e,orientation:t}=this.frame.pose;return e||t?(e||((e=this.tempVec3)[0]=e[1]=e[2]=0),A(this.baseModelMatrix,t,e),this.baseModelMatrix):this.baseModelMatrix}getBaseViewMatrix(e){if("left"===e||"none"===e)return this.frame.leftViewMatrix;if("right"===e)return this.frame.rightViewMatrix;throw new Error("eye must be of type 'left' or 'right'")}getInputSources(){let e=[];for(let t in this.gamepadInputSources)e.push(this.gamepadInputSources[t].inputSource);return e}getInputPose(e,t,i){if(!t)return null;for(let r in this.gamepadInputSources){let s=this.gamepadInputSources[r];if(s.inputSource===e)return s.getXRPose(t,i)}return null}onWindowResize(){}onVRDisplayPresentChange(e){this.display.isPresenting||this.sessions.forEach(e=>{if(e.immersive&&!e.ended){if(e.modifiedCanvasLayer){const t=e.baseLayer.context.canvas;document.body.removeChild(t),t.setAttribute("style","")}this.immersiveSession===e&&(this.immersiveSession=null),this.dispatchEvent("@@webxr-polyfill/vr-present-end",e.id)}})}}const pt=!1;let ft=0;class mt{constructor(e,t){this.mode=e,this.enabledFeatures=t,this.ended=null,this.baseLayer=null,this.id=++ft}}const gt=async function(e,t){if(t.webvr){let t=await async function(e){let t=null;if("getVRDisplays"in e.navigator)try{const i=await e.navigator.getVRDisplays();i&&i.length&&(t=new ut(e,i[0]))}catch(e){}return t}(e);if(t)return t}let i=(e=>{var t=!1;return Be=e.navigator.userAgent||e.navigator.vendor||e.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(Be)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(Be.substr(0,4)))&&(t=!0),t})(e);return i&&t.cardboard||!i&&t.allowCardboardOnDesktop?(e.VRFrameData||(e.VRFrameData=function(){this.rightViewMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.leftProjectionMatrix=new Float32Array(16),this.pose=null}),new class extends ut{constructor(e,t){const i=new Oe(t||{});super(e,i),this.display=i,this.frame={rightViewMatrix:new Float32Array(16),leftViewMatrix:new Float32Array(16),rightProjectionMatrix:new Float32Array(16),leftProjectionMatrix:new Float32Array(16),pose:null,timestamp:null}}}(e,t.cardboardConfig)):new class extends Ne{constructor(e){super(e),this.sessions=new Map,this.projectionMatrix=n(),this.identityMatrix=n()}onBaseLayerSet(e,t){this.sessions.get(e).baseLayer=t}isSessionSupported(e){return"inline"==e}isFeatureSupported(e){switch(e){case"viewer":return!0;default:return!1}}async requestSession(e,t){if(!this.isSessionSupported(e))return Promise.reject();const i=new mt(e,t);return this.sessions.set(i.id,i),Promise.resolve(i.id)}requestAnimationFrame(e){return window.requestAnimationFrame(e)}cancelAnimationFrame(e){window.cancelAnimationFrame(e)}onFrameStart(e,t){if(pt)return;const i=this.sessions.get(e);if(i.baseLayer){const e=i.baseLayer.context.canvas;d(this.projectionMatrix,t.inlineVerticalFieldOfView,e.width/e.height,t.depthNear,t.depthFar)}}onFrameEnd(e){}async endSession(e){this.sessions.get(e).ended=!0}doesSessionSupportReferenceSpace(e,t){const i=this.sessions.get(e);return!i.ended&&i.enabledFeatures.has(t)}requestStageBounds(){return null}async requestFrameOfReferenceTransform(e,t){return null}getProjectionMatrix(e){return this.projectionMatrix}getViewport(e,t,i,r){const{width:s,height:n}=i.context.canvas;return this.sessions.get(e),r.x=r.y=0,r.width=s,r.height=n,!0}getBasePoseMatrix(){return this.identityMatrix}getBaseViewMatrix(e){return this.identityMatrix}getInputSources(){return[]}getInputPose(e,t,i){return null}onWindowResize(){}}(e)},vt={global:e,webvr:!0,cardboard:!0,cardboardConfig:null,allowCardboardOnDesktop:!1},wt=["navigator","HTMLCanvasElement","WebGLRenderingContext"];return class{constructor(e={}){this.config=Object.freeze(Object.assign({},vt,e)),this.global=this.config.global,this.nativeWebXR="xr"in this.global.navigator,this.injected=!1,this.nativeWebXR?this._injectCompatibilityShims(this.global):this._injectPolyfill(this.global)}_injectPolyfill(e){if(!wt.every(t=>!!e[t]))throw new Error(`Global must have the following attributes : ${wt}`);for(const t of Object.keys(_e))void 0!==e[t]?console.warn(`${t} already defined on global.`):e[t]=_e[t];Fe(e.WebGLRenderingContext)&&(Re(e.HTMLCanvasElement),e.OffscreenCanvas&&Re(e.OffscreenCanvas),e.WebGL2RenderingContext&&Fe(e.WebGL2RenderingContext),window.isSecureContext||console.warn("WebXR Polyfill Warning:\nThis page is not running in a secure context (https:// or localhost)!\nThis means that although the page may be able to use the WebXR Polyfill it will\nnot be able to use native WebXR implementations, and as such will not be able to\naccess dedicated VR or AR hardware, and will not be able to take advantage of\nany performance improvements a native WebXR implementation may offer. Please\nhost this content on a secure origin for the best user experience.\n")),this.injected=!0,this._patchNavigatorXR()}_patchNavigatorXR(){let e=gt(this.global,this.config);this.xr=new _e.XRSystem(e),Object.defineProperty(this.global.navigator,"xr",{value:this.xr,configurable:!0})}_injectCompatibilityShims(e){if(!wt.every(t=>!!e[t]))throw new Error(`Global must have the following attributes : ${wt}`);if(e.navigator.xr&&"supportsSession"in e.navigator.xr&&!("isSessionSupported"in e.navigator.xr)){let t=e.navigator.xr.supportsSession;e.navigator.xr.isSessionSupported=function(e){return t.call(this,e).then(()=>!0).catch(()=>!1)},e.navigator.xr.supportsSession=function(e){return console.warn("navigator.xr.supportsSession() is deprecated. Please call navigator.xr.isSessionSupported() instead and check the boolean value returned when the promise resolves."),t.call(this,e)}}}}});
// threejs.org/license
(function(r,wb){"object"===typeof exports&&"undefined"!==typeof module?wb(exports):"function"===typeof define&&define.amd?define(["exports"],wb):(r="undefined"!==typeof globalThis?globalThis:r||self,wb(r.THREE={}))})(this,function(r){function wb(){}function Oa(c,a,b,d,e,f,g,h,k,l){Object.defineProperty(this,"id",{value:hk++});this.uuid=xa.generateUUID();this.name="";this.image=void 0!==c?c:Oa.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==a?a:Oa.DEFAULT_MAPPING;this.wrapS=void 0!==b?b:1001;this.wrapT=
void 0!==d?d:1001;this.magFilter=void 0!==e?e:1006;this.minFilter=void 0!==f?f:1008;this.anisotropy=void 0!==k?k:1;this.format=void 0!==g?g:1023;this.internalFormat=null;this.type=void 0!==h?h:1009;this.offset=new L(0,0);this.repeat=new L(1,1);this.center=new L(0,0);this.rotation=0;this.matrixAutoUpdate=!0;this.matrix=new Da;this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==l?l:3E3;this.version=0;this.onUpdate=null}function Db(c,a,b){this.width=
c;this.height=a;this.scissor=new ca(0,0,c,a);this.scissorTest=!1;this.viewport=new ca(0,0,c,a);b=b||{};this.texture=new Oa(void 0,b.mapping,b.wrapS,b.wrapT,b.magFilter,b.minFilter,b.format,b.type,b.anisotropy,b.encoding);this.texture.image={};this.texture.image.width=c;this.texture.image.height=a;this.texture.generateMipmaps=void 0!==b.generateMipmaps?b.generateMipmaps:!1;this.texture.minFilter=void 0!==b.minFilter?b.minFilter:1006;this.depthBuffer=void 0!==b.depthBuffer?b.depthBuffer:!0;this.stencilBuffer=
void 0!==b.stencilBuffer?b.stencilBuffer:!1;this.depthTexture=void 0!==b.depthTexture?b.depthTexture:null}function dh(c,a,b){Db.call(this,c,a,b);this.samples=4}function eh(c,a,b,d,e){for(var f=0,g=c.length-3;f<=g;f+=3){Yc.fromArray(c,f);var h=e.x*Math.abs(Yc.x)+e.y*Math.abs(Yc.y)+e.z*Math.abs(Yc.z),k=a.dot(Yc),l=b.dot(Yc),m=d.dot(Yc);if(Math.max(-Math.max(k,l,m),Math.min(k,l,m))>h)return!1}return!0}function ha(){Object.defineProperty(this,"id",{value:ik++});this.uuid=xa.generateUUID();this.name="";
this.type="Object3D";this.parent=null;this.children=[];this.up=ha.DefaultUp.clone();var c=new w,a=new hb,b=new ua,d=new w(1,1,1);a._onChange(function(){b.setFromEuler(a,!1)});b._onChange(function(){a.setFromQuaternion(b,void 0,!1)});Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:c},rotation:{configurable:!0,enumerable:!0,value:a},quaternion:{configurable:!0,enumerable:!0,value:b},scale:{configurable:!0,enumerable:!0,value:d},modelViewMatrix:{value:new da},normalMatrix:{value:new Da}});
this.matrix=new da;this.matrixWorld=new da;this.matrixAutoUpdate=ha.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new $b;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={}}function fh(c,a,b){0>b&&(b+=1);1<b&&--b;return b<1/6?c+6*(a-c)*b:.5>b?a:b<2/3?c+6*(a-c)*(2/3-b):c}function gh(c){return.04045>c?.0773993808*c:Math.pow(.9478672986*c+.0521327014,2.4)}function hh(c){return.0031308>c?12.92*c:1.055*Math.pow(c,.41666)-
.055}function ra(){Object.defineProperty(this,"id",{value:jk++});this.uuid=xa.generateUUID();this.name="";this.type="Material";this.fog=!0;this.blending=1;this.side=0;this.vertexColors=this.flatShading=!1;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;this.stencilWriteMask=255;this.stencilFunc=519;this.stencilRef=0;this.stencilFuncMask=
255;this.stencilZPass=this.stencilZFail=this.stencilFail=7680;this.stencilWrite=!1;this.clippingPlanes=null;this.clipShadows=this.clipIntersection=!1;this.shadowSide=null;this.colorWrite=!0;this.precision=null;this.polygonOffset=!1;this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.dithering=!1;this.alphaTest=0;this.premultipliedAlpha=!1;this.toneMapped=this.visible=!0;this.userData={};this.version=0}function Kb(c){ra.call(this);this.type="MeshBasicMaterial";this.color=new S(16777215);this.lightMap=
this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphTargets=this.skinning=!1;this.setValues(c)}function pa(c,a,b){if(Array.isArray(c))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="";this.array=c;this.itemSize=a;this.count=
void 0!==c?c.length/a:0;this.normalized=!0===b;this.usage=35044;this.updateRange={offset:0,count:-1};this.version=0}function Ce(c,a,b){pa.call(this,new Int8Array(c),a,b)}function De(c,a,b){pa.call(this,new Uint8Array(c),a,b)}function Ee(c,a,b){pa.call(this,new Uint8ClampedArray(c),a,b)}function Fe(c,a,b){pa.call(this,new Int16Array(c),a,b)}function Zc(c,a,b){pa.call(this,new Uint16Array(c),a,b)}function Ge(c,a,b){pa.call(this,new Int32Array(c),a,b)}function $c(c,a,b){pa.call(this,new Uint32Array(c),
a,b)}function ea(c,a,b){pa.call(this,new Float32Array(c),a,b)}function He(c,a,b){pa.call(this,new Float64Array(c),a,b)}function vi(c){if(0===c.length)return-Infinity;for(var a=c[0],b=1,d=c.length;b<d;++b)c[b]>a&&(a=c[b]);return a}function ka(){Object.defineProperty(this,"id",{value:kk+=2});this.uuid=xa.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.morphTargetsRelative=!1;this.groups=[];this.boundingSphere=this.boundingBox=null;
this.drawRange={start:0,count:Infinity};this.userData={}}function Qa(c,a){ha.call(this);this.type="Mesh";this.geometry=void 0!==c?c:new ka;this.material=void 0!==a?a:new Kb;this.updateMorphTargets()}function wi(c,a,b,d,e,f,g,h){if(null===(1===a.side?d.intersectTriangle(g,f,e,!0,h):d.intersectTriangle(e,f,g,2!==a.side,h)))return null;Of.copy(h);Of.applyMatrix4(c.matrixWorld);a=b.ray.origin.distanceTo(Of);return a<b.near||a>b.far?null:{distance:a,point:Of.clone(),object:c}}function Pf(c,a,b,d,e,f,g,
h,k,l,m,n){yc.fromBufferAttribute(e,l);zc.fromBufferAttribute(e,m);Ac.fromBufferAttribute(e,n);e=c.morphTargetInfluences;if(a.morphTargets&&f&&e){Qf.set(0,0,0);Rf.set(0,0,0);Sf.set(0,0,0);for(var p=0,t=f.length;p<t;p++){var q=e[p],v=f[p];0!==q&&(ih.fromBufferAttribute(v,l),jh.fromBufferAttribute(v,m),kh.fromBufferAttribute(v,n),g?(Qf.addScaledVector(ih,q),Rf.addScaledVector(jh,q),Sf.addScaledVector(kh,q)):(Qf.addScaledVector(ih.sub(yc),q),Rf.addScaledVector(jh.sub(zc),q),Sf.addScaledVector(kh.sub(Ac),
q)))}yc.add(Qf);zc.add(Rf);Ac.add(Sf)}c.isSkinnedMesh&&(c.boneTransform(l,yc),c.boneTransform(m,zc),c.boneTransform(n,Ac));if(c=wi(c,a,b,d,yc,zc,Ac,Ie))h&&(Cd.fromBufferAttribute(h,l),Dd.fromBufferAttribute(h,m),Ed.fromBufferAttribute(h,n),c.uv=Ga.getUV(Ie,yc,zc,Ac,Cd,Dd,Ed,new L)),k&&(Cd.fromBufferAttribute(k,l),Dd.fromBufferAttribute(k,m),Ed.fromBufferAttribute(k,n),c.uv2=Ga.getUV(Ie,yc,zc,Ac,Cd,Dd,Ed,new L)),h=new ad(l,m,n),Ga.getNormal(yc,zc,Ac,h.normal),c.face=h;return c}function sa(){Object.defineProperty(this,
"id",{value:lk+=2});this.uuid=xa.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function Fd(c,a,b,d,e,f){sa.call(this);
this.type="BoxGeometry";this.parameters={width:c,height:a,depth:b,widthSegments:d,heightSegments:e,depthSegments:f};this.fromBufferGeometry(new Bc(c,a,b,d,e,f));this.mergeVertices()}function Bc(c,a,b,d,e,f){function g(q,v,u,A,B,D,G,I,E,H,M){var F=D/E,K=G/H,P=D/2,V=G/2,ia=I/2;G=E+1;for(var W=H+1,aa=D=0,Z=new w,ja=0;ja<W;ja++)for(var Aa=ja*K-V,Xa=0;Xa<G;Xa++)Z[q]=(Xa*F-P)*A,Z[v]=Aa*B,Z[u]=ia,l.push(Z.x,Z.y,Z.z),Z[q]=0,Z[v]=0,Z[u]=0<I?1:-1,m.push(Z.x,Z.y,Z.z),n.push(Xa/E),n.push(1-ja/H),D+=1;for(q=0;q<
H;q++)for(v=0;v<E;v++)u=p+v+G*(q+1),A=p+(v+1)+G*(q+1),B=p+(v+1)+G*q,k.push(p+v+G*q,u,B),k.push(u,A,B),aa+=6;h.addGroup(t,aa,M);t+=aa;p+=D}void 0===c&&(c=1);void 0===a&&(a=1);void 0===b&&(b=1);void 0===d&&(d=1);void 0===e&&(e=1);void 0===f&&(f=1);ka.call(this);this.type="BoxBufferGeometry";this.parameters={width:c,height:a,depth:b,widthSegments:d,heightSegments:e,depthSegments:f};var h=this;d=Math.floor(d);e=Math.floor(e);f=Math.floor(f);var k=[],l=[],m=[],n=[],p=0,t=0;g("z","y","x",-1,-1,b,a,c,f,
e,0);g("z","y","x",1,-1,b,a,-c,f,e,1);g("x","z","y",1,1,c,b,a,d,f,2);g("x","z","y",1,-1,c,b,-a,d,f,3);g("x","y","z",1,-1,c,a,b,d,e,4);g("x","y","z",-1,-1,c,a,-b,d,e,5);this.setIndex(k);this.setAttribute("position",new ea(l,3));this.setAttribute("normal",new ea(m,3));this.setAttribute("uv",new ea(n,2))}function Gd(c){var a={},b;for(b in c){a[b]={};for(var d in c[b]){var e=c[b][d];e&&(e.isColor||e.isMatrix3||e.isMatrix4||e.isVector2||e.isVector3||e.isVector4||e.isTexture)?a[b][d]=e.clone():Array.isArray(e)?
a[b][d]=e.slice():a[b][d]=e}}return a}function nb(c){for(var a={},b=0;b<c.length;b++){var d=Gd(c[b]),e;for(e in d)a[e]=d[e]}return a}function sb(c){ra.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=
this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;this.uniformsNeedUpdate=!1;this.glslVersion=null;void 0!==c&&(void 0!==c.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(c))}function ac(){ha.call(this);this.type="Camera";this.matrixWorldInverse=
new da;this.projectionMatrix=new da;this.projectionMatrixInverse=new da}function eb(c,a,b,d){ac.call(this);this.type="PerspectiveCamera";this.fov=void 0!==c?c:50;this.zoom=1;this.near=void 0!==b?b:.1;this.far=void 0!==d?d:2E3;this.focus=10;this.aspect=void 0!==a?a:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}function Hd(c,a,b){ha.call(this);this.type="CubeCamera";if(!0!==b.isWebGLCubeRenderTarget)console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");
else{this.renderTarget=b;var d=new eb(90,1,c,a);d.layers=this.layers;d.up.set(0,-1,0);d.lookAt(new w(1,0,0));this.add(d);var e=new eb(90,1,c,a);e.layers=this.layers;e.up.set(0,-1,0);e.lookAt(new w(-1,0,0));this.add(e);var f=new eb(90,1,c,a);f.layers=this.layers;f.up.set(0,0,1);f.lookAt(new w(0,1,0));this.add(f);var g=new eb(90,1,c,a);g.layers=this.layers;g.up.set(0,0,-1);g.lookAt(new w(0,-1,0));this.add(g);var h=new eb(90,1,c,a);h.layers=this.layers;h.up.set(0,-1,0);h.lookAt(new w(0,0,1));this.add(h);
var k=new eb(90,1,c,a);k.layers=this.layers;k.up.set(0,-1,0);k.lookAt(new w(0,0,-1));this.add(k);this.update=function(l,m){null===this.parent&&this.updateMatrixWorld();var n=l.xr.enabled,p=l.getRenderTarget();l.xr.enabled=!1;var t=b.texture.generateMipmaps;b.texture.generateMipmaps=!1;l.setRenderTarget(b,0);l.render(m,d);l.setRenderTarget(b,1);l.render(m,e);l.setRenderTarget(b,2);l.render(m,f);l.setRenderTarget(b,3);l.render(m,g);l.setRenderTarget(b,4);l.render(m,h);b.texture.generateMipmaps=t;l.setRenderTarget(b,
5);l.render(m,k);l.setRenderTarget(p);l.xr.enabled=n};this.clear=function(l,m,n,p){for(var t=l.getRenderTarget(),q=0;6>q;q++)l.setRenderTarget(b,q),l.clear(m,n,p);l.setRenderTarget(t)}}}function Cc(c,a,b){Number.isInteger(a)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),a=b);Db.call(this,c,c,a);this.texture.isWebGLCubeRenderTargetTexture=!0}function bd(c,a,b,d,e,f,g,h,k,l,m,n){Oa.call(this,null,f,g,h,k,l,d,e,m,n);this.image={data:c||
null,width:a||1,height:b||1};this.magFilter=void 0!==k?k:1003;this.minFilter=void 0!==l?l:1003;this.flipY=this.generateMipmaps=!1;this.unpackAlignment=1;this.needsUpdate=!0}function xi(){function c(f,g){d(f,g);e=a.requestAnimationFrame(c)}var a=null,b=!1,d=null,e=null;return{start:function(){!0!==b&&null!==d&&(e=a.requestAnimationFrame(c),b=!0)},stop:function(){a.cancelAnimationFrame(e);b=!1},setAnimationLoop:function(f){d=f},setContext:function(f){a=f}}}function mk(c,a){function b(f,g){var h=f.array,
k=f.usage,l=c.createBuffer();c.bindBuffer(g,l);c.bufferData(g,h,k);f.onUploadCallback();g=5126;h instanceof Float32Array?g=5126:h instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):h instanceof Uint16Array?g=5123:h instanceof Int16Array?g=5122:h instanceof Uint32Array?g=5125:h instanceof Int32Array?g=5124:h instanceof Int8Array?g=5120:h instanceof Uint8Array&&(g=5121);return{buffer:l,type:g,bytesPerElement:h.BYTES_PER_ELEMENT,version:f.version}}
var d=a.isWebGL2,e=new WeakMap;return{get:function(f){f.isInterleavedBufferAttribute&&(f=f.data);return e.get(f)},remove:function(f){f.isInterleavedBufferAttribute&&(f=f.data);var g=e.get(f);g&&(c.deleteBuffer(g.buffer),e.delete(f))},update:function(f,g){if(f.isGLBufferAttribute)g=e.get(f),(!g||g.version<f.version)&&e.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});else{f.isInterleavedBufferAttribute&&(f=f.data);var h=e.get(f);if(void 0===h)e.set(f,b(f,g));else if(h.version<
f.version){var k=f.array,l=f.updateRange;c.bindBuffer(g,h.buffer);-1===l.count?c.bufferSubData(g,0,k):(d?c.bufferSubData(g,l.offset*k.BYTES_PER_ELEMENT,k,l.offset,l.count):c.bufferSubData(g,l.offset*k.BYTES_PER_ELEMENT,k.subarray(l.offset,l.offset+l.count)),l.count=-1);h.version=f.version}}}}}function Je(c,a,b,d){sa.call(this);this.type="PlaneGeometry";this.parameters={width:c,height:a,widthSegments:b,heightSegments:d};this.fromBufferGeometry(new cd(c,a,b,d));this.mergeVertices()}function cd(c,a,
b,d){ka.call(this);this.type="PlaneBufferGeometry";this.parameters={width:c,height:a,widthSegments:b,heightSegments:d};c=c||1;a=a||1;var e=c/2,f=a/2;b=Math.floor(b)||1;d=Math.floor(d)||1;var g=b+1,h=d+1,k=c/b,l=a/d;a=[];c=[];for(var m=[],n=[],p=0;p<h;p++)for(var t=p*l-f,q=0;q<g;q++)c.push(q*k-e,-t,0),m.push(0,0,1),n.push(q/b),n.push(1-p/d);for(e=0;e<d;e++)for(f=0;f<b;f++)h=f+g*(e+1),k=f+1+g*(e+1),l=f+1+g*e,a.push(f+g*e,h,l),a.push(h,k,l);this.setIndex(a);this.setAttribute("position",new ea(c,3));
this.setAttribute("normal",new ea(m,3));this.setAttribute("uv",new ea(n,2))}function nk(c,a,b,d,e){function f(t,q){b.buffers.color.setClear(t.r,t.g,t.b,q,e)}var g=new S(0),h=0,k,l,m=null,n=0,p=null;return{getClearColor:function(){return g},setClearColor:function(t,q){g.set(t);h=void 0!==q?q:1;f(g,h)},getClearAlpha:function(){return h},setClearAlpha:function(t){h=t;f(g,h)},render:function(t,q,v,u){(q=!0===q.isScene?q.background:null)&&q.isTexture&&(q=a.get(q));v=c.xr;(v=v.getSession&&v.getSession())&&
"additive"===v.environmentBlendMode&&(q=null);null===q?f(g,h):q&&q.isColor&&(f(q,1),u=!0);(c.autoClear||u)&&c.clear(c.autoClearColor,c.autoClearDepth,c.autoClearStencil);if(q&&(q.isCubeTexture||q.isWebGLCubeRenderTarget||q.isWebGLCubeRenderTargetTexture||306===q.mapping)){void 0===l&&(l=new Qa(new Bc(1,1,1),new sb({name:"BackgroundCubeMaterial",uniforms:Gd(Pb.cube.uniforms),vertexShader:Pb.cube.vertexShader,fragmentShader:Pb.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),
l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(A,B,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),d.update(l));q.isWebGLCubeRenderTarget&&(q=q.texture);l.material.uniforms.envMap.value=q;l.material.uniforms.flipEnvMap.value=q.isCubeTexture?-1:1;if(m!==q||n!==q.version||p!==c.toneMapping)l.material.needsUpdate=!0,m=q,n=q.version,p=c.toneMapping;t.unshift(l,l.geometry,l.material,0,0,null)}else if(q&&
q.isTexture){void 0===k&&(k=new Qa(new cd(2,2),new sb({name:"BackgroundMaterial",uniforms:Gd(Pb.background.uniforms),vertexShader:Pb.background.vertexShader,fragmentShader:Pb.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),k.geometry.deleteAttribute("normal"),Object.defineProperty(k.material,"map",{get:function(){return this.uniforms.t2D.value}}),d.update(k));k.material.uniforms.t2D.value=q;!0===q.matrixAutoUpdate&&q.updateMatrix();k.material.uniforms.uvTransform.value.copy(q.matrix);
if(m!==q||n!==q.version||p!==c.toneMapping)k.material.needsUpdate=!0,m=q,n=q.version,p=c.toneMapping;t.unshift(k,k.geometry,k.material,0,0,null)}}}}function ok(c,a,b,d){function e(D){return d.isWebGL2?c.bindVertexArray(D):q.bindVertexArrayOES(D)}function f(D){return d.isWebGL2?c.deleteVertexArray(D):q.deleteVertexArrayOES(D)}function g(D){for(var G=[],I=[],E=[],H=0;H<t;H++)G[H]=0,I[H]=0,E[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:G,enabledAttributes:I,attributeDivisors:E,object:D,
attributes:{},index:null}}function h(){for(var D=B.newAttributes,G=0,I=D.length;G<I;G++)D[G]=0}function k(D){l(D,0)}function l(D,G){var I=B.enabledAttributes,E=B.attributeDivisors;B.newAttributes[D]=1;0===I[D]&&(c.enableVertexAttribArray(D),I[D]=1);E[D]!==G&&((d.isWebGL2?c:a.get("ANGLE_instanced_arrays"))[d.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](D,G),E[D]=G)}function m(){for(var D=B.newAttributes,G=B.enabledAttributes,I=0,E=G.length;I<E;I++)G[I]!==D[I]&&(c.disableVertexAttribArray(I),
G[I]=0)}function n(){p();B!==A&&(B=A,e(B.object))}function p(){A.geometry=null;A.program=null;A.wireframe=!1}var t=c.getParameter(34921),q=d.isWebGL2?null:a.get("OES_vertex_array_object"),v=d.isWebGL2||null!==q,u={},A=g(null),B=A;return{setup:function(D,G,I,E,H){var M=!1;if(v){M=!0===G.wireframe;var F=u[E.id];void 0===F&&(F={},u[E.id]=F);var K=F[I.id];void 0===K&&(K={},F[I.id]=K);F=K[M];void 0===F&&(F=g(d.isWebGL2?c.createVertexArray():q.createVertexArrayOES()),K[M]=F);M=F;B!==M&&(B=M,e(B.object));
a:if(M=B.attributes,K=E.attributes,Object.keys(M).length!==Object.keys(K).length)M=!0;else{for(var P in K){F=M[P];var V=K[P];if(void 0===F||F.attribute!==V||F.data!==V.data){M=!0;break a}}M=B.index!==H?!0:!1}if(M){P={};K=E.attributes;for(var ia in K)F=K[ia],V={},V.attribute=F,F.data&&(V.data=F.data),P[ia]=V;B.attributes=P;B.index=H}}else if(ia=!0===G.wireframe,B.geometry!==E.id||B.program!==I.id||B.wireframe!==ia)B.geometry=E.id,B.program=I.id,B.wireframe=ia,M=!0;!0===D.isInstancedMesh&&(M=!0);null!==
H&&b.update(H,34963);if(M){if(!1!==d.isWebGL2||!D.isInstancedMesh&&!E.isInstancedBufferGeometry||null!==a.get("ANGLE_instanced_arrays")){h();ia=E.attributes;I=I.getAttributes();G=G.defaultAttributeValues;for(var W in I)if(M=I[W],0<=M){var aa=ia[W];if(void 0!==aa){if(P=aa.normalized,V=aa.itemSize,F=b.get(aa),void 0!==F){var Z=F.buffer;K=F.type;F=F.bytesPerElement;if(aa.isInterleavedBufferAttribute){var ja=aa.data,Aa=ja.stride;aa=aa.offset;ja&&ja.isInstancedInterleavedBuffer?(l(M,ja.meshPerAttribute),
void 0===E._maxInstanceCount&&(E._maxInstanceCount=ja.meshPerAttribute*ja.count)):k(M);c.bindBuffer(34962,Z);Aa*=F;F*=aa;!0!==d.isWebGL2||5124!==K&&5125!==K?c.vertexAttribPointer(M,V,K,P,Aa,F):c.vertexAttribIPointer(M,V,K,Aa,F)}else aa.isInstancedBufferAttribute?(l(M,aa.meshPerAttribute),void 0===E._maxInstanceCount&&(E._maxInstanceCount=aa.meshPerAttribute*aa.count)):k(M),c.bindBuffer(34962,Z),F=V,!0!==d.isWebGL2||5124!==K&&5125!==K?c.vertexAttribPointer(M,F,K,P,0,0):c.vertexAttribIPointer(M,F,K,
0,0)}}else if("instanceMatrix"===W)K=b.get(D.instanceMatrix),void 0!==K&&(P=K.buffer,K=K.type,l(M+0,1),l(M+1,1),l(M+2,1),l(M+3,1),c.bindBuffer(34962,P),c.vertexAttribPointer(M+0,4,K,!1,64,0),c.vertexAttribPointer(M+1,4,K,!1,64,16),c.vertexAttribPointer(M+2,4,K,!1,64,32),c.vertexAttribPointer(M+3,4,K,!1,64,48));else if("instanceColor"===W)K=b.get(D.instanceColor),void 0!==K&&(P=K.buffer,K=K.type,l(M,1),c.bindBuffer(34962,P),c.vertexAttribPointer(M,3,K,!1,12,0));else if(void 0!==G&&(P=G[W],void 0!==
P))switch(P.length){case 2:c.vertexAttrib2fv(M,P);break;case 3:c.vertexAttrib3fv(M,P);break;case 4:c.vertexAttrib4fv(M,P);break;default:c.vertexAttrib1fv(M,P)}}m()}null!==H&&c.bindBuffer(34963,b.get(H).buffer)}},reset:n,resetDefaultState:p,dispose:function(){n();for(var D in u){var G=u[D],I;for(I in G){var E=G[I],H;for(H in E)f(E[H].object),delete E[H];delete G[I]}delete u[D]}},releaseStatesOfGeometry:function(D){if(void 0!==u[D.id]){var G=u[D.id],I;for(I in G){var E=G[I],H;for(H in E)f(E[H].object),
delete E[H];delete G[I]}delete u[D.id]}},releaseStatesOfProgram:function(D){for(var G in u){var I=u[G];if(void 0!==I[D.id]){var E=I[D.id],H;for(H in E)f(E[H].object),delete E[H];delete I[D.id]}}},initAttributes:h,enableAttribute:k,disableUnusedAttributes:m}}function pk(c,a,b,d){var e=d.isWebGL2,f;this.setMode=function(g){f=g};this.render=function(g,h){c.drawArrays(f,g,h);b.update(h,f,1)};this.renderInstances=function(g,h,k){if(0!==k){if(e){var l=c;var m="drawArraysInstanced"}else if(l=a.get("ANGLE_instanced_arrays"),
m="drawArraysInstancedANGLE",null===l){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}l[m](f,g,h,k);b.update(h,f,k)}}}function qk(c,a,b){function d(D){if("highp"===D){if(0<c.getShaderPrecisionFormat(35633,36338).precision&&0<c.getShaderPrecisionFormat(35632,36338).precision)return"highp";D="mediump"}return"mediump"===D&&0<c.getShaderPrecisionFormat(35633,36337).precision&&0<c.getShaderPrecisionFormat(35632,
36337).precision?"mediump":"lowp"}var e,f="undefined"!==typeof WebGL2RenderingContext&&c instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&c instanceof WebGL2ComputeRenderingContext,g=void 0!==b.precision?b.precision:"highp",h=d(g);h!==g&&(console.warn("THREE.WebGLRenderer:",g,"not supported, using",h,"instead."),g=h);b=!0===b.logarithmicDepthBuffer;h=c.getParameter(34930);var k=c.getParameter(35660),l=c.getParameter(3379),m=c.getParameter(34076),n=c.getParameter(34921),
p=c.getParameter(36347),t=c.getParameter(36348),q=c.getParameter(36349),v=0<k,u=f||!!a.get("OES_texture_float"),A=v&&u,B=f?c.getParameter(36183):0;return{isWebGL2:f,getMaxAnisotropy:function(){if(void 0!==e)return e;var D=a.get("EXT_texture_filter_anisotropic");return e=null!==D?c.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:d,precision:g,logarithmicDepthBuffer:b,maxTextures:h,maxVertexTextures:k,maxTextureSize:l,maxCubemapSize:m,maxAttributes:n,maxVertexUniforms:p,maxVaryings:t,
maxFragmentUniforms:q,vertexTextures:v,floatFragmentTextures:u,floatVertexTextures:A,maxSamples:B}}function rk(c){function a(){m.value!==e&&(m.value=e,m.needsUpdate=0<f);d.numPlanes=f;d.numIntersection=0}function b(n,p,t,q){var v=null!==n?n.length:0,u=null;if(0!==v){u=m.value;if(!0!==q||null===u){q=t+4*v;p=p.matrixWorldInverse;l.getNormalMatrix(p);if(null===u||u.length<q)u=new Float32Array(q);for(q=0;q!==v;++q,t+=4)k.copy(n[q]).applyMatrix4(p,l),k.normal.toArray(u,t),u[t+3]=k.constant}m.value=u;m.needsUpdate=
!0}d.numPlanes=v;d.numIntersection=0;return u}var d=this,e=null,f=0,g=!1,h=!1,k=new Na,l=new Da,m={value:null,needsUpdate:!1};this.uniform=m;this.numIntersection=this.numPlanes=0;this.init=function(n,p,t){var q=0!==n.length||p||0!==f||g;g=p;e=b(n,t,0);f=n.length;return q};this.beginShadows=function(){h=!0;b(null)};this.endShadows=function(){h=!1;a()};this.setState=function(n,p,t){var q=n.clippingPlanes,v=n.clipIntersection,u=n.clipShadows;n=c.get(n);if(!g||null===q||0===q.length||h&&!u)h?b(null):
a();else{u=h?0:f;var A=4*u,B=n.clippingState||null;m.value=B;B=b(q,p,A,t);for(p=0;p!==A;++p)B[p]=e[p];n.clippingState=B;this.numIntersection=v?this.numPlanes:0;this.numPlanes+=u}}}function sk(c){function a(d,e){303===e?d.mapping=301:304===e&&(d.mapping=302);return d}var b=new WeakMap;return{get:function(d){if(d&&d.isTexture){var e=d.mapping;if(303===e||304===e){if(b.has(d))return e=b.get(d).texture,a(e,d.mapping);var f=d.image;if(f&&0<f.height){e=c.getRenderList();var g=c.getRenderTarget(),h=c.getRenderState();
f=new Cc(f.height/2);f.fromEquirectangularTexture(c,d);b.set(d,f);c.setRenderTarget(g);c.setRenderList(e);c.setRenderState(h);return a(f.texture,d.mapping)}return null}}return d},dispose:function(){b=new WeakMap}}}function tk(c){var a={};return{has:function(b){if(void 0!==a[b])return null!==a[b];switch(b){case "WEBGL_depth_texture":var d=c.getExtension("WEBGL_depth_texture")||c.getExtension("MOZ_WEBGL_depth_texture")||c.getExtension("WEBKIT_WEBGL_depth_texture");break;case "EXT_texture_filter_anisotropic":d=
c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":d=c.getExtension("WEBGL_compressed_texture_s3tc")||c.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||c.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":d=c.getExtension("WEBGL_compressed_texture_pvrtc")||c.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
break;default:d=c.getExtension(b)}a[b]=d;return null!==d},get:function(b){this.has(b)||console.warn("THREE.WebGLRenderer: "+b+" extension not supported.");return a[b]}}}function uk(c,a,b,d){function e(k){k=k.target;var l=g.get(k);null!==l.index&&a.remove(l.index);for(var m in l.attributes)a.remove(l.attributes[m]);k.removeEventListener("dispose",e);g.delete(k);if(m=h.get(l))a.remove(m),h.delete(l);d.releaseStatesOfGeometry(k);!0===k.isInstancedBufferGeometry&&delete k._maxInstanceCount;b.memory.geometries--}
function f(k){var l=[],m=k.index,n=k.attributes.position;if(null!==m){n=m.array;m=m.version;for(var p=0,t=n.length;p<t;p+=3){var q=n[p+0],v=n[p+1],u=n[p+2];l.push(q,v,v,u,u,q)}}else for(p=n.array,m=n.version,n=0,p=p.length/3-1;n<p;n+=3)t=n+0,q=n+1,v=n+2,l.push(t,q,q,v,v,t);l=new (65535<vi(l)?$c:Zc)(l,1);l.version=m;(m=h.get(k))&&a.remove(m);h.set(k,l)}var g=new WeakMap,h=new WeakMap;return{get:function(k,l){var m=g.get(l);if(m)return m;l.addEventListener("dispose",e);l.isBufferGeometry?m=l:l.isGeometry&&
(void 0===l._bufferGeometry&&(l._bufferGeometry=(new ka).setFromObject(k)),m=l._bufferGeometry);g.set(l,m);b.memory.geometries++;return m},update:function(k){var l=k.attributes;for(n in l)a.update(l[n],34962);k=k.morphAttributes;for(var m in k){l=k[m];var n=0;for(var p=l.length;n<p;n++)a.update(l[n],34962)}},getWireframeAttribute:function(k){var l=h.get(k);if(l){var m=k.index;null!==m&&l.version<m.version&&f(k)}else f(k);return h.get(k)}}}function vk(c,a,b,d){var e=d.isWebGL2,f,g,h;this.setMode=function(k){f=
k};this.setIndex=function(k){g=k.type;h=k.bytesPerElement};this.render=function(k,l){c.drawElements(f,l,g,k*h);b.update(l,f,1)};this.renderInstances=function(k,l,m){if(0!==m){if(e){var n=c;var p="drawElementsInstanced"}else if(n=a.get("ANGLE_instanced_arrays"),p="drawElementsInstancedANGLE",null===n){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}n[p](f,l,g,k*h,m);b.update(l,f,m)}}}function wk(c){var a=
{frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:a,programs:null,autoReset:!0,reset:function(){a.frame++;a.calls=0;a.triangles=0;a.points=0;a.lines=0},update:function(b,d,e){a.calls++;switch(d){case 4:a.triangles+=b/3*e;break;case 1:a.lines+=b/2*e;break;case 3:a.lines+=e*(b-1);break;case 2:a.lines+=e*b;break;case 0:a.points+=e*b;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",d)}}}}function xk(c,a){return c[0]-a[0]}function yk(c,a){return Math.abs(a[1])-
Math.abs(c[1])}function zk(c){for(var a={},b=new Float32Array(8),d=[],e=0;8>e;e++)d[e]=[e,0];return{update:function(f,g,h,k){var l=f.morphTargetInfluences;f=void 0===l?0:l.length;var m=a[g.id];if(void 0===m){m=[];for(var n=0;n<f;n++)m[n]=[n,0];a[g.id]=m}for(n=0;n<f;n++){var p=m[n];p[0]=n;p[1]=l[n]}m.sort(yk);for(l=0;8>l;l++)l<f&&m[l][1]?(d[l][0]=m[l][0],d[l][1]=m[l][1]):(d[l][0]=Number.MAX_SAFE_INTEGER,d[l][1]=0);d.sort(xk);f=h.morphTargets&&g.morphAttributes.position;h=h.morphNormals&&g.morphAttributes.normal;
for(l=m=0;8>l;l++)p=d[l],n=p[0],p=p[1],n!==Number.MAX_SAFE_INTEGER&&p?(f&&g.getAttribute("morphTarget"+l)!==f[n]&&g.setAttribute("morphTarget"+l,f[n]),h&&g.getAttribute("morphNormal"+l)!==h[n]&&g.setAttribute("morphNormal"+l,h[n]),b[l]=p,m+=p):(f&&void 0!==g.getAttribute("morphTarget"+l)&&g.deleteAttribute("morphTarget"+l),h&&void 0!==g.getAttribute("morphNormal"+l)&&g.deleteAttribute("morphNormal"+l),b[l]=0);g=g.morphTargetsRelative?1:1-m;k.getUniforms().setValue(c,"morphTargetBaseInfluence",g);
k.getUniforms().setValue(c,"morphTargetInfluences",b)}}}function Ak(c,a,b,d){var e=new WeakMap;return{update:function(f){var g=d.render.frame,h=f.geometry,k=a.get(f,h);e.get(k)!==g&&(h.isGeometry&&k.updateFromObject(f),a.update(k),e.set(k,g));f.isInstancedMesh&&(b.update(f.instanceMatrix,34962),null!==f.instanceColor&&b.update(f.instanceColor,34962));return k},dispose:function(){e=new WeakMap}}}function kc(c,a,b,d,e,f,g,h,k,l){c=void 0!==c?c:[];Oa.call(this,c,void 0!==a?a:301,b,d,e,f,void 0!==g?g:
1022,h,k,l);this.flipY=!1}function Id(c,a,b,d){Oa.call(this,null);this.image={data:c||null,width:a||1,height:b||1,depth:d||1};this.minFilter=this.magFilter=1003;this.wrapR=1001;this.flipY=this.generateMipmaps=!1;this.needsUpdate=!0}function Jd(c,a,b,d){Oa.call(this,null);this.image={data:c||null,width:a||1,height:b||1,depth:d||1};this.minFilter=this.magFilter=1003;this.wrapR=1001;this.flipY=this.generateMipmaps=!1;this.needsUpdate=!0}function Kd(c,a,b){var d=c[0];if(0>=d||0<d)return c;var e=a*b,f=
yi[e];void 0===f&&(f=new Float32Array(e),yi[e]=f);if(0!==a)for(d.toArray(f,0),d=1,e=0;d!==a;++d)e+=b,c[d].toArray(f,e);return f}function Lb(c,a){if(c.length!==a.length)return!1;for(var b=0,d=c.length;b<d;b++)if(c[b]!==a[b])return!1;return!0}function Eb(c,a){for(var b=0,d=a.length;b<d;b++)c[b]=a[b]}function zi(c,a){var b=Ai[a];void 0===b&&(b=new Int32Array(a),Ai[a]=b);for(var d=0;d!==a;++d)b[d]=c.allocateTextureUnit();return b}function Bk(c,a){var b=this.cache;b[0]!==a&&(c.uniform1f(this.addr,a),b[0]=
a)}function Ck(c,a){var b=this.cache;if(void 0!==a.x){if(b[0]!==a.x||b[1]!==a.y)c.uniform2f(this.addr,a.x,a.y),b[0]=a.x,b[1]=a.y}else Lb(b,a)||(c.uniform2fv(this.addr,a),Eb(b,a))}function Dk(c,a){var b=this.cache;if(void 0!==a.x){if(b[0]!==a.x||b[1]!==a.y||b[2]!==a.z)c.uniform3f(this.addr,a.x,a.y,a.z),b[0]=a.x,b[1]=a.y,b[2]=a.z}else if(void 0!==a.r){if(b[0]!==a.r||b[1]!==a.g||b[2]!==a.b)c.uniform3f(this.addr,a.r,a.g,a.b),b[0]=a.r,b[1]=a.g,b[2]=a.b}else Lb(b,a)||(c.uniform3fv(this.addr,a),Eb(b,a))}
function Ek(c,a){var b=this.cache;if(void 0!==a.x){if(b[0]!==a.x||b[1]!==a.y||b[2]!==a.z||b[3]!==a.w)c.uniform4f(this.addr,a.x,a.y,a.z,a.w),b[0]=a.x,b[1]=a.y,b[2]=a.z,b[3]=a.w}else Lb(b,a)||(c.uniform4fv(this.addr,a),Eb(b,a))}function Fk(c,a){var b=this.cache,d=a.elements;void 0===d?Lb(b,a)||(c.uniformMatrix2fv(this.addr,!1,a),Eb(b,a)):Lb(b,d)||(Bi.set(d),c.uniformMatrix2fv(this.addr,!1,Bi),Eb(b,d))}function Gk(c,a){var b=this.cache,d=a.elements;void 0===d?Lb(b,a)||(c.uniformMatrix3fv(this.addr,!1,
a),Eb(b,a)):Lb(b,d)||(Ci.set(d),c.uniformMatrix3fv(this.addr,!1,Ci),Eb(b,d))}function Hk(c,a){var b=this.cache,d=a.elements;void 0===d?Lb(b,a)||(c.uniformMatrix4fv(this.addr,!1,a),Eb(b,a)):Lb(b,d)||(Di.set(d),c.uniformMatrix4fv(this.addr,!1,Di),Eb(b,d))}function Ik(c,a,b){var d=this.cache,e=b.allocateTextureUnit();d[0]!==e&&(c.uniform1i(this.addr,e),d[0]=e);b.safeSetTexture2D(a||Ei,e)}function Jk(c,a,b){var d=this.cache,e=b.allocateTextureUnit();d[0]!==e&&(c.uniform1i(this.addr,e),d[0]=e);b.setTexture2DArray(a||
Kk,e)}function Lk(c,a,b){var d=this.cache,e=b.allocateTextureUnit();d[0]!==e&&(c.uniform1i(this.addr,e),d[0]=e);b.setTexture3D(a||Mk,e)}function Nk(c,a,b){var d=this.cache,e=b.allocateTextureUnit();d[0]!==e&&(c.uniform1i(this.addr,e),d[0]=e);b.safeSetTextureCube(a||Fi,e)}function Ok(c,a){var b=this.cache;b[0]!==a&&(c.uniform1i(this.addr,a),b[0]=a)}function Pk(c,a){var b=this.cache;Lb(b,a)||(c.uniform2iv(this.addr,a),Eb(b,a))}function Qk(c,a){var b=this.cache;Lb(b,a)||(c.uniform3iv(this.addr,a),Eb(b,
a))}function Rk(c,a){var b=this.cache;Lb(b,a)||(c.uniform4iv(this.addr,a),Eb(b,a))}function Sk(c,a){var b=this.cache;b[0]!==a&&(c.uniform1ui(this.addr,a),b[0]=a)}function Tk(c){switch(c){case 5126:return Bk;case 35664:return Ck;case 35665:return Dk;case 35666:return Ek;case 35674:return Fk;case 35675:return Gk;case 35676:return Hk;case 5124:case 35670:return Ok;case 35667:case 35671:return Pk;case 35668:case 35672:return Qk;case 35669:case 35673:return Rk;case 5125:return Sk;case 35678:case 36198:case 36298:case 36306:case 35682:return Ik;
case 35679:case 36299:case 36307:return Lk;case 35680:case 36300:case 36308:case 36293:return Nk;case 36289:case 36303:case 36311:case 36292:return Jk}}function Uk(c,a){c.uniform1fv(this.addr,a)}function Vk(c,a){c.uniform1iv(this.addr,a)}function Wk(c,a){c.uniform2iv(this.addr,a)}function Xk(c,a){c.uniform3iv(this.addr,a)}function Yk(c,a){c.uniform4iv(this.addr,a)}function Zk(c,a){a=Kd(a,this.size,2);c.uniform2fv(this.addr,a)}function $k(c,a){a=Kd(a,this.size,3);c.uniform3fv(this.addr,a)}function al(c,
a){a=Kd(a,this.size,4);c.uniform4fv(this.addr,a)}function bl(c,a){a=Kd(a,this.size,4);c.uniformMatrix2fv(this.addr,!1,a)}function cl(c,a){a=Kd(a,this.size,9);c.uniformMatrix3fv(this.addr,!1,a)}function dl(c,a){a=Kd(a,this.size,16);c.uniformMatrix4fv(this.addr,!1,a)}function el(c,a,b){var d=a.length,e=zi(b,d);c.uniform1iv(this.addr,e);for(c=0;c!==d;++c)b.safeSetTexture2D(a[c]||Ei,e[c])}function fl(c,a,b){var d=a.length,e=zi(b,d);c.uniform1iv(this.addr,e);for(c=0;c!==d;++c)b.safeSetTextureCube(a[c]||
Fi,e[c])}function gl(c){switch(c){case 5126:return Uk;case 35664:return Zk;case 35665:return $k;case 35666:return al;case 35674:return bl;case 35675:return cl;case 35676:return dl;case 5124:case 35670:return Vk;case 35667:case 35671:return Wk;case 35668:case 35672:return Xk;case 35669:case 35673:return Yk;case 35678:case 36198:case 36298:case 36306:case 35682:return el;case 35680:case 36300:case 36308:case 36293:return fl}}function hl(c,a,b){this.id=c;this.addr=b;this.cache=[];this.setValue=Tk(a.type)}
function Gi(c,a,b){this.id=c;this.addr=b;this.cache=[];this.size=a.size;this.setValue=gl(a.type)}function Hi(c){this.id=c;this.seq=[];this.map={}}function Dc(c,a){this.seq=[];this.map={};for(var b=c.getProgramParameter(a,35718),d=0;d<b;++d){var e=c.getActiveUniform(a,d),f=c.getUniformLocation(a,e.name),g=this,h=e.name,k=h.length;for(lh.lastIndex=0;;){var l=lh.exec(h),m=lh.lastIndex,n=l[1],p=l[3];"]"===l[2]&&(n|=0);if(void 0===p||"["===p&&m+2===k){h=g;e=void 0===p?new hl(n,e,f):new Gi(n,e,f);h.seq.push(e);
h.map[e.id]=e;break}else p=g.map[n],void 0===p&&(p=new Hi(n),n=g,g=p,n.seq.push(g),n.map[g.id]=g),g=p}}}function Ii(c,a,b){a=c.createShader(a);c.shaderSource(a,b);c.compileShader(a);return a}function Ji(c){switch(c){case 3E3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];
case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",c),["Linear","( value )"]}}function Ki(c,a,b){var d=c.getShaderParameter(a,35713),e=c.getShaderInfoLog(a).trim();if(d&&""===e)return"";c=c.getShaderSource(a).split("\n");for(a=0;a<c.length;a++)c[a]=a+1+": "+c[a];c=c.join("\n");return"THREE.WebGLShader: gl.getShaderInfoLog() "+b+"\n"+e+c}function Ke(c,a){a=Ji(a);return"vec4 "+c+"( vec4 value ) { return "+a[0]+"ToLinear"+a[1]+"; }"}function il(c,
a){a=Ji(a);return"vec4 "+c+"( vec4 value ) { return LinearTo"+a[0]+a[1]+"; }"}function jl(c,a){switch(a){case 1:a="Linear";break;case 2:a="Reinhard";break;case 3:a="OptimizedCineon";break;case 4:a="ACESFilmic";break;case 5:a="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",a),a="Linear"}return"vec3 "+c+"( vec3 color ) { return "+a+"ToneMapping( color ); }"}function kl(c){var a=[],b;for(b in c){var d=c[b];!1!==d&&a.push("#define "+b+" "+d)}return a.join("\n")}function Le(c){return""!==
c}function Li(c,a){return c.replace(/NUM_DIR_LIGHTS/g,a.numDirLights).replace(/NUM_SPOT_LIGHTS/g,a.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,a.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,a.numPointLights).replace(/NUM_HEMI_LIGHTS/g,a.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,a.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,a.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,a.numPointLightShadows)}function Mi(c,a){return c.replace(/NUM_CLIPPING_PLANES/g,a.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,
a.numClippingPlanes-a.numClipIntersection)}function mh(c,a){c=Ba[a];if(void 0===c)throw Error("Can not resolve #include <"+a+">");return c.replace(nh,mh)}function Ni(c,a,b,d){console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.");return oh(c,a,b,d)}function oh(c,a,b,d){c="";for(a=parseInt(a);a<parseInt(b);a++)c+=d.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return c}function Oi(c){var a="precision "+
c.precision+" float;\nprecision "+c.precision+" int;";"highp"===c.precision?a+="\n#define HIGH_PRECISION":"mediump"===c.precision?a+="\n#define MEDIUM_PRECISION":"lowp"===c.precision&&(a+="\n#define LOW_PRECISION");return a}function ll(c){var a="SHADOWMAP_TYPE_BASIC";1===c.shadowMapType?a="SHADOWMAP_TYPE_PCF":2===c.shadowMapType?a="SHADOWMAP_TYPE_PCF_SOFT":3===c.shadowMapType&&(a="SHADOWMAP_TYPE_VSM");return a}function ml(c){var a="ENVMAP_TYPE_CUBE";if(c.envMap)switch(c.envMapMode){case 301:case 302:a=
"ENVMAP_TYPE_CUBE";break;case 306:case 307:a="ENVMAP_TYPE_CUBE_UV"}return a}function nl(c){var a="ENVMAP_MODE_REFLECTION";if(c.envMap)switch(c.envMapMode){case 302:case 307:a="ENVMAP_MODE_REFRACTION"}return a}function ol(c){var a="ENVMAP_BLENDING_NONE";if(c.envMap)switch(c.combine){case 0:a="ENVMAP_BLENDING_MULTIPLY";break;case 1:a="ENVMAP_BLENDING_MIX";break;case 2:a="ENVMAP_BLENDING_ADD"}return a}function pl(c,a,b,d){var e=c.getContext(),f=b.defines,g=b.vertexShader,h=b.fragmentShader,k=ll(b),l=
ml(b),m=nl(b),n=ol(b),p=0<c.gammaFactor?c.gammaFactor:1,t=b.isWebGL2?"":[b.extensionDerivatives||b.envMapCubeUV||b.bumpMap||b.tangentSpaceNormalMap||b.clearcoatNormalMap||b.flatShading||"physical"===b.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(b.extensionFragDepth||b.logarithmicDepthBuffer)&&b.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",b.extensionDrawBuffers&&b.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(b.extensionShaderTextureLOD||
b.envMap)&&b.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Le).join("\n"),q=kl(f),v=e.createProgram(),u=b.glslVersion?"#version "+b.glslVersion+"\n":"";b.isRawShaderMaterial?(f=[q].filter(Le).join("\n"),0<f.length&&(f+="\n"),k=[t,q].filter(Le).join("\n"),0<k.length&&(k+="\n")):(f=[Oi(b),"#define SHADER_NAME "+b.shaderName,q,b.instancing?"#define USE_INSTANCING":"",b.instancingColor?"#define USE_INSTANCING_COLOR":"",b.supportsVertexTextures?"#define VERTEX_TEXTURES":
"","#define GAMMA_FACTOR "+p,"#define MAX_BONES "+b.maxBones,b.useFog&&b.fog?"#define USE_FOG":"",b.useFog&&b.fogExp2?"#define FOG_EXP2":"",b.map?"#define USE_MAP":"",b.envMap?"#define USE_ENVMAP":"",b.envMap?"#define "+m:"",b.lightMap?"#define USE_LIGHTMAP":"",b.aoMap?"#define USE_AOMAP":"",b.emissiveMap?"#define USE_EMISSIVEMAP":"",b.bumpMap?"#define USE_BUMPMAP":"",b.normalMap?"#define USE_NORMALMAP":"",b.normalMap&&b.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",b.normalMap&&b.tangentSpaceNormalMap?
"#define TANGENTSPACE_NORMALMAP":"",b.clearcoatMap?"#define USE_CLEARCOATMAP":"",b.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",b.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",b.displacementMap&&b.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",b.specularMap?"#define USE_SPECULARMAP":"",b.roughnessMap?"#define USE_ROUGHNESSMAP":"",b.metalnessMap?"#define USE_METALNESSMAP":"",b.alphaMap?"#define USE_ALPHAMAP":"",b.transmissionMap?"#define USE_TRANSMISSIONMAP":"",
b.vertexTangents?"#define USE_TANGENT":"",b.vertexColors?"#define USE_COLOR":"",b.vertexUvs?"#define USE_UV":"",b.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",b.flatShading?"#define FLAT_SHADED":"",b.skinning?"#define USE_SKINNING":"",b.useVertexTexture?"#define BONE_TEXTURE":"",b.morphTargets?"#define USE_MORPHTARGETS":"",b.morphNormals&&!1===b.flatShading?"#define USE_MORPHNORMALS":"",b.doubleSided?"#define DOUBLE_SIDED":"",b.flipSided?"#define FLIP_SIDED":"",b.shadowMapEnabled?"#define USE_SHADOWMAP":
"",b.shadowMapEnabled?"#define "+k:"",b.sizeAttenuation?"#define USE_SIZEATTENUATION":"",b.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",b.logarithmicDepthBuffer&&b.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;",
"#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;",
"\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Le).join("\n"),k=[t,Oi(b),"#define SHADER_NAME "+b.shaderName,q,b.alphaTest?"#define ALPHATEST "+b.alphaTest+(b.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+
p,b.useFog&&b.fog?"#define USE_FOG":"",b.useFog&&b.fogExp2?"#define FOG_EXP2":"",b.map?"#define USE_MAP":"",b.matcap?"#define USE_MATCAP":"",b.envMap?"#define USE_ENVMAP":"",b.envMap?"#define "+l:"",b.envMap?"#define "+m:"",b.envMap?"#define "+n:"",b.lightMap?"#define USE_LIGHTMAP":"",b.aoMap?"#define USE_AOMAP":"",b.emissiveMap?"#define USE_EMISSIVEMAP":"",b.bumpMap?"#define USE_BUMPMAP":"",b.normalMap?"#define USE_NORMALMAP":"",b.normalMap&&b.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":
"",b.normalMap&&b.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",b.clearcoatMap?"#define USE_CLEARCOATMAP":"",b.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",b.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",b.specularMap?"#define USE_SPECULARMAP":"",b.roughnessMap?"#define USE_ROUGHNESSMAP":"",b.metalnessMap?"#define USE_METALNESSMAP":"",b.alphaMap?"#define USE_ALPHAMAP":"",b.sheen?"#define USE_SHEEN":"",b.transmissionMap?"#define USE_TRANSMISSIONMAP":"",b.vertexTangents?
"#define USE_TANGENT":"",b.vertexColors||b.instancingColor?"#define USE_COLOR":"",b.vertexUvs?"#define USE_UV":"",b.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",b.gradientMap?"#define USE_GRADIENTMAP":"",b.flatShading?"#define FLAT_SHADED":"",b.doubleSided?"#define DOUBLE_SIDED":"",b.flipSided?"#define FLIP_SIDED":"",b.shadowMapEnabled?"#define USE_SHADOWMAP":"",b.shadowMapEnabled?"#define "+k:"",b.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",b.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":
"",b.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",b.logarithmicDepthBuffer&&b.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(b.extensionShaderTextureLOD||b.envMap)&&b.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==b.toneMapping?"#define TONE_MAPPING":"",0!==b.toneMapping?Ba.tonemapping_pars_fragment:"",0!==b.toneMapping?jl("toneMapping",b.toneMapping):"",b.dithering?"#define DITHERING":
"",Ba.encodings_pars_fragment,b.map?Ke("mapTexelToLinear",b.mapEncoding):"",b.matcap?Ke("matcapTexelToLinear",b.matcapEncoding):"",b.envMap?Ke("envMapTexelToLinear",b.envMapEncoding):"",b.emissiveMap?Ke("emissiveMapTexelToLinear",b.emissiveMapEncoding):"",b.lightMap?Ke("lightMapTexelToLinear",b.lightMapEncoding):"",il("linearToOutputTexel",b.outputEncoding),b.depthPacking?"#define DEPTH_PACKING "+b.depthPacking:"","\n"].filter(Le).join("\n"));g=g.replace(nh,mh);g=Li(g,b);g=Mi(g,b);h=h.replace(nh,
mh);h=Li(h,b);h=Mi(h,b);g=g.replace(Pi,oh).replace(Qi,Ni);h=h.replace(Pi,oh).replace(Qi,Ni);b.isWebGL2&&!0!==b.isRawShaderMaterial&&(u="#version 300 es\n",f="#define attribute in\n#define varying out\n#define texture2D texture\n"+f,k=["#define varying in","300 es"===b.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===b.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+
"\n"+k);h=u+k+h;g=Ii(e,35633,u+f+g);h=Ii(e,35632,h);e.attachShader(v,g);e.attachShader(v,h);void 0!==b.index0AttributeName?e.bindAttribLocation(v,0,b.index0AttributeName):!0===b.morphTargets&&e.bindAttribLocation(v,0,"position");e.linkProgram(v);if(c.debug.checkShaderErrors){c=e.getProgramInfoLog(v).trim();u=e.getShaderInfoLog(g).trim();l=e.getShaderInfoLog(h).trim();n=m=!0;if(!1===e.getProgramParameter(v,35714))m=!1,p=Ki(e,g,"vertex"),t=Ki(e,h,"fragment"),console.error("THREE.WebGLProgram: shader error: ",
e.getError(),"35715",e.getProgramParameter(v,35715),"gl.getProgramInfoLog",c,p,t);else if(""!==c)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",c);else if(""===u||""===l)n=!1;n&&(this.diagnostics={runnable:m,programLog:c,vertexShader:{log:u,prefix:f},fragmentShader:{log:l,prefix:k}})}e.deleteShader(g);e.deleteShader(h);var A;this.getUniforms=function(){void 0===A&&(A=new Dc(e,v));return A};var B;this.getAttributes=function(){if(void 0===B){for(var D={},G=e.getProgramParameter(v,35721),
I=0;I<G;I++){var E=e.getActiveAttrib(v,I).name;D[E]=e.getAttribLocation(v,E)}B=D}return B};this.destroy=function(){d.releaseStatesOfProgram(this);e.deleteProgram(v);this.program=void 0};this.name=b.shaderName;this.id=ql++;this.cacheKey=a;this.usedTimes=1;this.program=v;this.vertexShader=g;this.fragmentShader=h;return this}function rl(c,a,b,d,e,f){function g(u){if(u)u.isTexture?A=u.encoding:u.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),
A=u.texture.encoding);else var A=3E3;return A}var h=[],k=d.isWebGL2,l=d.logarithmicDepthBuffer,m=d.floatVertexTextures,n=d.maxVertexUniforms,p=d.vertexTextures,t=d.precision,q={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",
PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},v="precision isWebGL2 supportsVertexTextures outputEncoding instancing instancingColor map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding envMapCubeUV lightMap lightMapEncoding aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap tangentSpaceNormalMap clearcoatMap clearcoatRoughnessMap clearcoatNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents vertexUvs uvsVertexOnly fog useFog fogExp2 flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights numDirLightShadows numPointLightShadows numSpotLightShadows shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering sheen transmissionMap".split(" ");
return{getParameters:function(u,A,B,D,G){var I=D.fog;D=u.isMeshStandardMaterial?D.environment:null;D=a.get(u.envMap||D);var E=q[u.type];if(G.isSkinnedMesh){var H=G.skeleton.bones;if(m)H=1024;else{var M=Math.min(Math.floor((n-20)/4),H.length);M<H.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+H.length+" bones. This GPU supports "+M+"."),H=0):H=M}}else H=0;null!==u.precision&&(t=d.getMaxPrecision(u.precision),t!==u.precision&&console.warn("THREE.WebGLProgram.getParameters:",u.precision,"not supported, using",
t,"instead."));if(E){var F=Pb[E];M=F.vertexShader;F=F.fragmentShader}else M=u.vertexShader,F=u.fragmentShader;var K=c.getRenderTarget();return{isWebGL2:k,shaderID:E,shaderName:u.type,vertexShader:M,fragmentShader:F,defines:u.defines,isRawShaderMaterial:!0===u.isRawShaderMaterial,glslVersion:u.glslVersion,precision:t,instancing:!0===G.isInstancedMesh,instancingColor:!0===G.isInstancedMesh&&null!==G.instanceColor,supportsVertexTextures:p,outputEncoding:null!==K?g(K.texture):c.outputEncoding,map:!!u.map,
mapEncoding:g(u.map),matcap:!!u.matcap,matcapEncoding:g(u.matcap),envMap:!!D,envMapMode:D&&D.mapping,envMapEncoding:g(D),envMapCubeUV:!!D&&(306===D.mapping||307===D.mapping),lightMap:!!u.lightMap,lightMapEncoding:g(u.lightMap),aoMap:!!u.aoMap,emissiveMap:!!u.emissiveMap,emissiveMapEncoding:g(u.emissiveMap),bumpMap:!!u.bumpMap,normalMap:!!u.normalMap,objectSpaceNormalMap:1===u.normalMapType,tangentSpaceNormalMap:0===u.normalMapType,clearcoatMap:!!u.clearcoatMap,clearcoatRoughnessMap:!!u.clearcoatRoughnessMap,
clearcoatNormalMap:!!u.clearcoatNormalMap,displacementMap:!!u.displacementMap,roughnessMap:!!u.roughnessMap,metalnessMap:!!u.metalnessMap,specularMap:!!u.specularMap,alphaMap:!!u.alphaMap,gradientMap:!!u.gradientMap,sheen:!!u.sheen,transmissionMap:!!u.transmissionMap,combine:u.combine,vertexTangents:u.normalMap&&u.vertexTangents,vertexColors:u.vertexColors,vertexUvs:!!u.map||!!u.bumpMap||!!u.normalMap||!!u.specularMap||!!u.alphaMap||!!u.emissiveMap||!!u.roughnessMap||!!u.metalnessMap||!!u.clearcoatMap||
!!u.clearcoatRoughnessMap||!!u.clearcoatNormalMap||!!u.displacementMap||!!u.transmissionMap,uvsVertexOnly:!(u.map||u.bumpMap||u.normalMap||u.specularMap||u.alphaMap||u.emissiveMap||u.roughnessMap||u.metalnessMap||u.clearcoatNormalMap||u.transmissionMap)&&!!u.displacementMap,fog:!!I,useFog:u.fog,fogExp2:I&&I.isFogExp2,flatShading:u.flatShading,sizeAttenuation:u.sizeAttenuation,logarithmicDepthBuffer:l,skinning:u.skinning&&0<H,maxBones:H,useVertexTexture:m,morphTargets:u.morphTargets,morphNormals:u.morphNormals,
maxMorphTargets:c.maxMorphTargets,maxMorphNormals:c.maxMorphNormals,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numClippingPlanes:f.numPlanes,numClipIntersection:f.numIntersection,dithering:u.dithering,shadowMapEnabled:c.shadowMap.enabled&&0<B.length,shadowMapType:c.shadowMap.type,
toneMapping:u.toneMapped?c.toneMapping:0,physicallyCorrectLights:c.physicallyCorrectLights,premultipliedAlpha:u.premultipliedAlpha,alphaTest:u.alphaTest,doubleSided:2===u.side,flipSided:1===u.side,depthPacking:void 0!==u.depthPacking?u.depthPacking:!1,index0AttributeName:u.index0AttributeName,extensionDerivatives:u.extensions&&u.extensions.derivatives,extensionFragDepth:u.extensions&&u.extensions.fragDepth,extensionDrawBuffers:u.extensions&&u.extensions.drawBuffers,extensionShaderTextureLOD:u.extensions&&
u.extensions.shaderTextureLOD,rendererExtensionFragDepth:k||b.has("EXT_frag_depth"),rendererExtensionDrawBuffers:k||b.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:k||b.has("EXT_shader_texture_lod"),customProgramCacheKey:u.customProgramCacheKey()}},getProgramCacheKey:function(u){var A=[];u.shaderID?A.push(u.shaderID):(A.push(u.fragmentShader),A.push(u.vertexShader));if(void 0!==u.defines)for(var B in u.defines)A.push(B),A.push(u.defines[B]);if(!1===u.isRawShaderMaterial){for(B=0;B<v.length;B++)A.push(u[v[B]]);
A.push(c.outputEncoding);A.push(c.gammaFactor)}A.push(u.customProgramCacheKey);return A.join()},getUniforms:function(u){var A=q[u.type];return A?Ri.clone(Pb[A].uniforms):u.uniforms},acquireProgram:function(u,A){for(var B,D=0,G=h.length;D<G;D++){var I=h[D];if(I.cacheKey===A){B=I;++B.usedTimes;break}}void 0===B&&(B=new pl(c,A,u,e),h.push(B));return B},releaseProgram:function(u){if(0===--u.usedTimes){var A=h.indexOf(u);h[A]=h[h.length-1];h.pop();u.destroy()}},programs:h}}function sl(){var c=new WeakMap;
return{get:function(a){var b=c.get(a);void 0===b&&(b={},c.set(a,b));return b},remove:function(a){c.delete(a)},update:function(a,b,d){c.get(a)[b]=d},dispose:function(){c=new WeakMap}}}function tl(c,a){return c.groupOrder!==a.groupOrder?c.groupOrder-a.groupOrder:c.renderOrder!==a.renderOrder?c.renderOrder-a.renderOrder:c.program!==a.program?c.program.id-a.program.id:c.material.id!==a.material.id?c.material.id-a.material.id:c.z!==a.z?c.z-a.z:c.id-a.id}function ul(c,a){return c.groupOrder!==a.groupOrder?
c.groupOrder-a.groupOrder:c.renderOrder!==a.renderOrder?c.renderOrder-a.renderOrder:c.z!==a.z?a.z-c.z:c.id-a.id}function Si(c){function a(h,k,l,m,n,p){var t=b[d],q=c.get(l);void 0===t?(t={id:h.id,object:h,geometry:k,material:l,program:q.program||g,groupOrder:m,renderOrder:h.renderOrder,z:n,group:p},b[d]=t):(t.id=h.id,t.object=h,t.geometry=k,t.material=l,t.program=q.program||g,t.groupOrder=m,t.renderOrder=h.renderOrder,t.z=n,t.group=p);d++;return t}var b=[],d=0,e=[],f=[],g={id:-1};return{opaque:e,
transparent:f,init:function(){d=0;e.length=0;f.length=0},push:function(h,k,l,m,n,p){h=a(h,k,l,m,n,p);(!0===l.transparent?f:e).push(h)},unshift:function(h,k,l,m,n,p){h=a(h,k,l,m,n,p);(!0===l.transparent?f:e).unshift(h)},finish:function(){for(var h=d,k=b.length;h<k;h++){var l=b[h];if(null===l.id)break;l.id=null;l.object=null;l.geometry=null;l.material=null;l.program=null;l.group=null}},sort:function(h,k){1<e.length&&e.sort(h||tl);1<f.length&&f.sort(k||ul)}}}function vl(c){var a=new WeakMap;return{get:function(b,
d){var e=a.get(b);if(void 0===e){var f=new Si(c);a.set(b,new WeakMap);a.get(b).set(d,f)}else f=e.get(d),void 0===f&&(f=new Si(c),e.set(d,f));return f},dispose:function(){a=new WeakMap}}}function wl(){var c={};return{get:function(a){if(void 0!==c[a.id])return c[a.id];switch(a.type){case "DirectionalLight":var b={direction:new w,color:new S};break;case "SpotLight":b={position:new w,direction:new w,color:new S,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case "PointLight":b={position:new w,color:new S,
distance:0,decay:0};break;case "HemisphereLight":b={direction:new w,skyColor:new S,groundColor:new S};break;case "RectAreaLight":b={color:new S,position:new w,halfWidth:new w,halfHeight:new w}}return c[a.id]=b}}}function xl(){var c={};return{get:function(a){if(void 0!==c[a.id])return c[a.id];switch(a.type){case "DirectionalLight":var b={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new L};break;case "SpotLight":b={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new L};
break;case "PointLight":b={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new L,shadowCameraNear:1,shadowCameraFar:1E3}}return c[a.id]=b}}}function yl(c,a){return(a.castShadow?1:0)-(c.castShadow?1:0)}function zl(){for(var c=new wl,a=xl(),b={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],
directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},d=0;9>d;d++)b.probe.push(new w);var e=new w,f=new da,g=new da;return{setup:function(h,k,l){for(var m=k=0,n=0,p=0;9>p;p++)b.probe[p].set(0,0,0);var t=p=0,q=0,v=0,u=0,A=0,B=0,D=0;l=l.matrixWorldInverse;h.sort(yl);for(var G=0,I=h.length;G<I;G++){var E=h[G],H=E.color,M=E.intensity,F=E.distance,K=E.shadow&&
E.shadow.map?E.shadow.map.texture:null;if(E.isAmbientLight)k+=H.r*M,m+=H.g*M,n+=H.b*M;else if(E.isLightProbe)for(K=0;9>K;K++)b.probe[K].addScaledVector(E.sh.coefficients[K],M);else if(E.isDirectionalLight){M=c.get(E);M.color.copy(E.color).multiplyScalar(E.intensity);M.direction.setFromMatrixPosition(E.matrixWorld);e.setFromMatrixPosition(E.target.matrixWorld);M.direction.sub(e);M.direction.transformDirection(l);if(E.castShadow){var P=E.shadow;H=a.get(E);H.shadowBias=P.bias;H.shadowNormalBias=P.normalBias;
H.shadowRadius=P.radius;H.shadowMapSize=P.mapSize;b.directionalShadow[p]=H;b.directionalShadowMap[p]=K;b.directionalShadowMatrix[p]=E.shadow.matrix;A++}b.directional[p]=M;p++}else E.isSpotLight?(P=c.get(E),P.position.setFromMatrixPosition(E.matrixWorld),P.position.applyMatrix4(l),P.color.copy(H).multiplyScalar(M),P.distance=F,P.direction.setFromMatrixPosition(E.matrixWorld),e.setFromMatrixPosition(E.target.matrixWorld),P.direction.sub(e),P.direction.transformDirection(l),P.coneCos=Math.cos(E.angle),
P.penumbraCos=Math.cos(E.angle*(1-E.penumbra)),P.decay=E.decay,E.castShadow&&(M=E.shadow,H=a.get(E),H.shadowBias=M.bias,H.shadowNormalBias=M.normalBias,H.shadowRadius=M.radius,H.shadowMapSize=M.mapSize,b.spotShadow[q]=H,b.spotShadowMap[q]=K,b.spotShadowMatrix[q]=E.shadow.matrix,D++),b.spot[q]=P,q++):E.isRectAreaLight?(K=c.get(E),K.color.copy(H).multiplyScalar(M),K.position.setFromMatrixPosition(E.matrixWorld),K.position.applyMatrix4(l),g.identity(),f.copy(E.matrixWorld),f.premultiply(l),g.extractRotation(f),
K.halfWidth.set(.5*E.width,0,0),K.halfHeight.set(0,.5*E.height,0),K.halfWidth.applyMatrix4(g),K.halfHeight.applyMatrix4(g),b.rectArea[v]=K,v++):E.isPointLight?(M=c.get(E),M.position.setFromMatrixPosition(E.matrixWorld),M.position.applyMatrix4(l),M.color.copy(E.color).multiplyScalar(E.intensity),M.distance=E.distance,M.decay=E.decay,E.castShadow&&(P=E.shadow,H=a.get(E),H.shadowBias=P.bias,H.shadowNormalBias=P.normalBias,H.shadowRadius=P.radius,H.shadowMapSize=P.mapSize,H.shadowCameraNear=P.camera.near,
H.shadowCameraFar=P.camera.far,b.pointShadow[t]=H,b.pointShadowMap[t]=K,b.pointShadowMatrix[t]=E.shadow.matrix,B++),b.point[t]=M,t++):E.isHemisphereLight&&(K=c.get(E),K.direction.setFromMatrixPosition(E.matrixWorld),K.direction.transformDirection(l),K.direction.normalize(),K.skyColor.copy(E.color).multiplyScalar(M),K.groundColor.copy(E.groundColor).multiplyScalar(M),b.hemi[u]=K,u++)}0<v&&(b.rectAreaLTC1=fa.LTC_1,b.rectAreaLTC2=fa.LTC_2);b.ambient[0]=k;b.ambient[1]=m;b.ambient[2]=n;h=b.hash;if(h.directionalLength!==
p||h.pointLength!==t||h.spotLength!==q||h.rectAreaLength!==v||h.hemiLength!==u||h.numDirectionalShadows!==A||h.numPointShadows!==B||h.numSpotShadows!==D)b.directional.length=p,b.spot.length=q,b.rectArea.length=v,b.point.length=t,b.hemi.length=u,b.directionalShadow.length=A,b.directionalShadowMap.length=A,b.pointShadow.length=B,b.pointShadowMap.length=B,b.spotShadow.length=D,b.spotShadowMap.length=D,b.directionalShadowMatrix.length=A,b.pointShadowMatrix.length=B,b.spotShadowMatrix.length=D,h.directionalLength=
p,h.pointLength=t,h.spotLength=q,h.rectAreaLength=v,h.hemiLength=u,h.numDirectionalShadows=A,h.numPointShadows=B,h.numSpotShadows=D,b.version=Al++},state:b}}function Ti(){var c=new zl,a=[],b=[];return{init:function(){a.length=0;b.length=0},state:{lightsArray:a,shadowsArray:b,lights:c},setupLights:function(d){c.setup(a,b,d)},pushLight:function(d){a.push(d)},pushShadow:function(d){b.push(d)}}}function Bl(){var c=new WeakMap;return{get:function(a,b){if(!1===c.has(a)){var d=new Ti;c.set(a,new WeakMap);
c.get(a).set(b,d)}else!1===c.get(a).has(b)?(d=new Ti,c.get(a).set(b,d)):d=c.get(a).get(b);return d},dispose:function(){c=new WeakMap}}}function Ec(c){ra.call(this);this.type="MeshDepthMaterial";this.depthPacking=3200;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.fog=!1;this.setValues(c)}function Fc(c){ra.call(this);this.type="MeshDistanceMaterial";this.referencePosition=
new w;this.nearDistance=1;this.farDistance=1E3;this.morphTargets=this.skinning=!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.fog=!1;this.setValues(c)}function Ui(c,a,b){function d(G,I,E){E=G<<0|I<<1|E<<2;var H=n[E];void 0===H&&(H=new Ec({depthPacking:3201,morphTargets:G,skinning:I}),n[E]=H);return H}function e(G,I,E){E=G<<0|I<<1|E<<2;var H=p[E];void 0===H&&(H=new Fc({morphTargets:G,skinning:I}),p[E]=H);return H}function f(G,I,E,H,M,F,K){var P=
d,V=G.customDepthMaterial;!0===H.isPointLight&&(P=e,V=G.customDistanceMaterial);void 0===V?(V=!1,!0===E.morphTargets&&(V=I.morphAttributes&&I.morphAttributes.position&&0<I.morphAttributes.position.length),I=!1,!0===G.isSkinnedMesh&&(!0===E.skinning?I=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",G)),G=P(V,I,!0===G.isInstancedMesh)):G=V;c.localClippingEnabled&&!0===E.clipShadows&&0!==E.clippingPlanes.length&&(V=G.uuid,P=E.uuid,I=t[V],void 0===I&&(I=
{},t[V]=I),V=I[P],void 0===V&&(V=G.clone(),I[P]=V),G=V);G.visible=E.visible;G.wireframe=E.wireframe;G.side=3===K?null!==E.shadowSide?E.shadowSide:E.side:null!==E.shadowSide?E.shadowSide:q[E.side];G.clipShadows=E.clipShadows;G.clippingPlanes=E.clippingPlanes;G.clipIntersection=E.clipIntersection;G.wireframeLinewidth=E.wireframeLinewidth;G.linewidth=E.linewidth;!0===H.isPointLight&&!0===G.isMeshDistanceMaterial&&(G.referencePosition.setFromMatrixPosition(H.matrixWorld),G.nearDistance=M,G.farDistance=
F);return G}function g(G,I,E,H,M){if(!1!==G.visible){if(G.layers.test(I.layers)&&(G.isMesh||G.isLine||G.isPoints)&&(G.castShadow||G.receiveShadow&&3===M)&&(!G.frustumCulled||h.intersectsObject(G))){G.modelViewMatrix.multiplyMatrices(E.matrixWorldInverse,G.matrixWorld);var F=a.update(G),K=G.material;if(Array.isArray(K))for(var P=F.groups,V=0,ia=P.length;V<ia;V++){var W=P[V],aa=K[W.materialIndex];aa&&aa.visible&&(aa=f(G,F,aa,H,E.near,E.far,M),c.renderBufferDirect(E,null,F,aa,G,W))}else K.visible&&(K=
f(G,F,K,H,E.near,E.far,M),c.renderBufferDirect(E,null,F,K,G,null))}G=G.children;F=0;for(K=G.length;F<K;F++)g(G[F],I,E,H,M)}}var h=new xb,k=new L,l=new L,m=new ca,n=[],p=[],t={},q={0:1,1:0,2:2},v=new sb({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:.125},uniforms:{shadow_pass:{value:null},resolution:{value:new L},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),
u=v.clone();u.defines.HORIZONAL_PASS=1;var A=new ka;A.setAttribute("position",new pa(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var B=new Qa(A,v),D=this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.render=function(G,I,E){if(!1!==D.enabled&&(!1!==D.autoUpdate||!1!==D.needsUpdate)&&0!==G.length){var H=c.getRenderTarget(),M=c.getActiveCubeFace(),F=c.getActiveMipmapLevel(),K=c.state;K.setBlending(0);K.buffers.color.setClear(1,1,1,1);K.buffers.depth.setTest(!0);K.setScissorTest(!1);
for(var P=0,V=G.length;P<V;P++){var ia=G[P],W=ia.shadow;if(!1!==W.autoUpdate||!1!==W.needsUpdate)if(void 0===W)console.warn("THREE.WebGLShadowMap:",ia,"has no shadow.");else{k.copy(W.mapSize);var aa=W.getFrameExtents();k.multiply(aa);l.copy(W.mapSize);if(k.x>b||k.y>b)k.x>b&&(l.x=Math.floor(b/aa.x),k.x=l.x*aa.x,W.mapSize.x=l.x),k.y>b&&(l.y=Math.floor(b/aa.y),k.y=l.y*aa.y,W.mapSize.y=l.y);null!==W.map||W.isPointLightShadow||3!==this.type||(aa={minFilter:1006,magFilter:1006,format:1023},W.map=new Db(k.x,
k.y,aa),W.map.texture.name=ia.name+".shadowMap",W.mapPass=new Db(k.x,k.y,aa),W.camera.updateProjectionMatrix());null===W.map&&(W.map=new Db(k.x,k.y,{minFilter:1003,magFilter:1003,format:1023}),W.map.texture.name=ia.name+".shadowMap",W.camera.updateProjectionMatrix());c.setRenderTarget(W.map);c.clear();aa=W.getViewportCount();for(var Z=0;Z<aa;Z++){var ja=W.getViewport(Z);m.set(l.x*ja.x,l.y*ja.y,l.x*ja.z,l.y*ja.w);K.viewport(m);W.updateMatrices(ia,Z);h=W.getFrustum();g(I,E,W.camera,ia,this.type)}W.isPointLightShadow||
3!==this.type||(ia=W,aa=E,Z=a.update(B),v.uniforms.shadow_pass.value=ia.map.texture,v.uniforms.resolution.value=ia.mapSize,v.uniforms.radius.value=ia.radius,c.setRenderTarget(ia.mapPass),c.clear(),c.renderBufferDirect(aa,null,Z,v,B,null),u.uniforms.shadow_pass.value=ia.mapPass.texture,u.uniforms.resolution.value=ia.mapSize,u.uniforms.radius.value=ia.radius,c.setRenderTarget(ia.map),c.clear(),c.renderBufferDirect(aa,null,Z,u,B,null));W.needsUpdate=!1}}D.needsUpdate=!1;c.setRenderTarget(H,M,F)}}}function Cl(c,
a,b){function d(y,Q,T){var ba=new Uint8Array(4),X=c.createTexture();c.bindTexture(y,X);c.texParameteri(y,10241,9728);c.texParameteri(y,10240,9728);for(y=0;y<T;y++)c.texImage2D(Q+y,0,6408,1,1,0,6408,5121,ba);return X}function e(y){!0!==q[y]&&(c.enable(y),q[y]=!0)}function f(y){!1!==q[y]&&(c.disable(y),q[y]=!1)}function g(y,Q,T,ba,X,ta,va,ya){if(0===y)u&&(f(3042),u=!1);else if(u||(e(3042),u=!0),5!==y){if(y!==A||ya!==M){if(100!==B||100!==I)c.blendEquation(32774),I=B=100;if(ya)switch(y){case 1:c.blendFuncSeparate(1,
771,1,771);break;case 2:c.blendFunc(1,1);break;case 3:c.blendFuncSeparate(0,0,769,771);break;case 4:c.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",y)}else switch(y){case 1:c.blendFuncSeparate(770,771,1,771);break;case 2:c.blendFunc(770,1);break;case 3:c.blendFunc(0,769);break;case 4:c.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",y)}H=E=G=D=null;A=y;M=ya}}else{X=X||Q;ta=ta||T;va=va||ba;if(Q!==B||X!==I)c.blendEquationSeparate(z[Q],
z[X]),B=Q,I=X;if(T!==D||ba!==G||ta!==E||va!==H)c.blendFuncSeparate(C[T],C[ba],C[ta],C[va]),D=T,G=ba,E=ta,H=va;A=y;M=null}}function h(y){F!==y&&(y?c.frontFace(2304):c.frontFace(2305),F=y)}function k(y){0!==y?(e(2884),y!==K&&(1===y?c.cullFace(1029):2===y?c.cullFace(1028):c.cullFace(1032))):f(2884);K=y}function l(y,Q,T){if(y){if(e(32823),V!==Q||ia!==T)c.polygonOffset(Q,T),V=Q,ia=T}else f(32823)}function m(y){void 0===y&&(y=33984+W-1);ja!==y&&(c.activeTexture(y),ja=y)}b=b.isWebGL2;var n=new function(){var y=
!1,Q=new ca,T=null,ba=new ca(0,0,0,0);return{setMask:function(X){T===X||y||(c.colorMask(X,X,X,X),T=X)},setLocked:function(X){y=X},setClear:function(X,ta,va,ya,Pa){!0===Pa&&(X*=ya,ta*=ya,va*=ya);Q.set(X,ta,va,ya);!1===ba.equals(Q)&&(c.clearColor(X,ta,va,ya),ba.copy(Q))},reset:function(){y=!1;T=null;ba.set(-1,0,0,0)}}},p=new function(){var y=!1,Q=null,T=null,ba=null;return{setTest:function(X){X?e(2929):f(2929)},setMask:function(X){Q===X||y||(c.depthMask(X),Q=X)},setFunc:function(X){if(T!==X){if(X)switch(X){case 0:c.depthFunc(512);
break;case 1:c.depthFunc(519);break;case 2:c.depthFunc(513);break;case 3:c.depthFunc(515);break;case 4:c.depthFunc(514);break;case 5:c.depthFunc(518);break;case 6:c.depthFunc(516);break;case 7:c.depthFunc(517);break;default:c.depthFunc(515)}else c.depthFunc(515);T=X}},setLocked:function(X){y=X},setClear:function(X){ba!==X&&(c.clearDepth(X),ba=X)},reset:function(){y=!1;ba=T=Q=null}}},t=new function(){var y=!1,Q=null,T=null,ba=null,X=null,ta=null,va=null,ya=null,Pa=null;return{setTest:function(U){y||
(U?e(2960):f(2960))},setMask:function(U){Q===U||y||(c.stencilMask(U),Q=U)},setFunc:function(U,la,wa){if(T!==U||ba!==la||X!==wa)c.stencilFunc(U,la,wa),T=U,ba=la,X=wa},setOp:function(U,la,wa){if(ta!==U||va!==la||ya!==wa)c.stencilOp(U,la,wa),ta=U,va=la,ya=wa},setLocked:function(U){y=U},setClear:function(U){Pa!==U&&(c.clearStencil(U),Pa=U)},reset:function(){y=!1;Pa=ya=va=ta=X=ba=T=Q=null}}},q={},v=null,u=null,A=null,B=null,D=null,G=null,I=null,E=null,H=null,M=!1,F=null,K=null,P=null,V=null,ia=null,W=
c.getParameter(35661),aa=!1,Z=0;Z=c.getParameter(7938);-1!==Z.indexOf("WebGL")?(Z=parseFloat(/^WebGL ([0-9])/.exec(Z)[1]),aa=1<=Z):-1!==Z.indexOf("OpenGL ES")&&(Z=parseFloat(/^OpenGL ES ([0-9])/.exec(Z)[1]),aa=2<=Z);var ja=null,Aa={},Xa=new ca,bb=new ca,fb={};fb[3553]=d(3553,3553,1);fb[34067]=d(34067,34069,6);n.setClear(0,0,0,1);p.setClear(1);t.setClear(0);e(2929);p.setFunc(3);h(!1);k(1);e(2884);g(0);var z={100:32774,101:32778,102:32779};b?(z[103]=32775,z[104]=32776):(a=a.get("EXT_blend_minmax"),
null!==a&&(z[103]=a.MIN_EXT,z[104]=a.MAX_EXT));var C={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};return{buffers:{color:n,depth:p,stencil:t},enable:e,disable:f,useProgram:function(y){return v!==y?(c.useProgram(y),v=y,!0):!1},setBlending:g,setMaterial:function(y,Q){2===y.side?f(2884):e(2884);var T=1===y.side;Q&&(T=!T);h(T);1===y.blending&&!1===y.transparent?g(0):g(y.blending,y.blendEquation,y.blendSrc,y.blendDst,y.blendEquationAlpha,y.blendSrcAlpha,y.blendDstAlpha,
y.premultipliedAlpha);p.setFunc(y.depthFunc);p.setTest(y.depthTest);p.setMask(y.depthWrite);n.setMask(y.colorWrite);Q=y.stencilWrite;t.setTest(Q);Q&&(t.setMask(y.stencilWriteMask),t.setFunc(y.stencilFunc,y.stencilRef,y.stencilFuncMask),t.setOp(y.stencilFail,y.stencilZFail,y.stencilZPass));l(y.polygonOffset,y.polygonOffsetFactor,y.polygonOffsetUnits)},setFlipSided:h,setCullFace:k,setLineWidth:function(y){y!==P&&(aa&&c.lineWidth(y),P=y)},setPolygonOffset:l,setScissorTest:function(y){y?e(3089):f(3089)},
activeTexture:m,bindTexture:function(y,Q){null===ja&&m();var T=Aa[ja];void 0===T&&(T={type:void 0,texture:void 0},Aa[ja]=T);if(T.type!==y||T.texture!==Q)c.bindTexture(y,Q||fb[y]),T.type=y,T.texture=Q},unbindTexture:function(){var y=Aa[ja];void 0!==y&&void 0!==y.type&&(c.bindTexture(y.type,null),y.type=void 0,y.texture=void 0)},compressedTexImage2D:function(){try{c.compressedTexImage2D.apply(c,arguments)}catch(y){console.error("THREE.WebGLState:",y)}},texImage2D:function(){try{c.texImage2D.apply(c,
arguments)}catch(y){console.error("THREE.WebGLState:",y)}},texImage3D:function(){try{c.texImage3D.apply(c,arguments)}catch(y){console.error("THREE.WebGLState:",y)}},scissor:function(y){!1===Xa.equals(y)&&(c.scissor(y.x,y.y,y.z,y.w),Xa.copy(y))},viewport:function(y){!1===bb.equals(y)&&(c.viewport(y.x,y.y,y.z,y.w),bb.copy(y))},reset:function(){q={};ja=null;Aa={};K=F=A=v=null;n.reset();p.reset();t.reset()}}}function Dl(c,a,b,d,e,f,g){function h(z,C){return Z?new OffscreenCanvas(z,C):document.createElementNS("http://www.w3.org/1999/xhtml",
"canvas")}function k(z,C,y,Q){var T=1;if(z.width>Q||z.height>Q)T=Q/Math.max(z.width,z.height);if(1>T||!0===C){if("undefined"!==typeof HTMLImageElement&&z instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&z instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&z instanceof ImageBitmap)return Q=C?xa.floorPowerOfTwo:Math.floor,C=Q(T*z.width),T=Q(T*z.height),void 0===aa&&(aa=h(C,T)),y=y?h(C,T):aa,y.width=C,y.height=T,y.getContext("2d").drawImage(z,0,0,C,T),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+
z.width+"x"+z.height+") to ("+C+"x"+T+")."),y;"data"in z&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+z.width+"x"+z.height+").")}return z}function l(z){return xa.isPowerOfTwo(z.width)&&xa.isPowerOfTwo(z.height)}function m(z,C){return z.generateMipmaps&&C&&1003!==z.minFilter&&1006!==z.minFilter}function n(z,C,y,Q){c.generateMipmap(z);d.get(C).__maxMipLevel=Math.log(Math.max(y,Q))*Math.LOG2E}function p(z,C,y){if(!1===F)return C;if(null!==z){if(void 0!==c[z])return c[z];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+
z+"'")}z=C;6403===C&&(5126===y&&(z=33326),5131===y&&(z=33325),5121===y&&(z=33321));6407===C&&(5126===y&&(z=34837),5131===y&&(z=34843),5121===y&&(z=32849));6408===C&&(5126===y&&(z=34836),5131===y&&(z=34842),5121===y&&(z=32856));33325!==z&&33326!==z&&34842!==z&&34836!==z||a.get("EXT_color_buffer_float");return z}function t(z){return 1003===z||1004===z||1005===z?9728:9729}function q(z){z=z.target;z.removeEventListener("dispose",q);var C=d.get(z);void 0!==C.__webglInit&&(c.deleteTexture(C.__webglTexture),
d.remove(z));z.isVideoTexture&&W.delete(z);g.memory.textures--}function v(z){z=z.target;z.removeEventListener("dispose",v);var C=d.get(z),y=d.get(z.texture);if(z){void 0!==y.__webglTexture&&c.deleteTexture(y.__webglTexture);z.depthTexture&&z.depthTexture.dispose();if(z.isWebGLCubeRenderTarget)for(y=0;6>y;y++)c.deleteFramebuffer(C.__webglFramebuffer[y]),C.__webglDepthbuffer&&c.deleteRenderbuffer(C.__webglDepthbuffer[y]);else c.deleteFramebuffer(C.__webglFramebuffer),C.__webglDepthbuffer&&c.deleteRenderbuffer(C.__webglDepthbuffer),
C.__webglMultisampledFramebuffer&&c.deleteFramebuffer(C.__webglMultisampledFramebuffer),C.__webglColorRenderbuffer&&c.deleteRenderbuffer(C.__webglColorRenderbuffer),C.__webglDepthRenderbuffer&&c.deleteRenderbuffer(C.__webglDepthRenderbuffer);d.remove(z.texture);d.remove(z)}g.memory.textures--}function u(z,C){var y=d.get(z);if(z.isVideoTexture){var Q=g.render.frame;W.get(z)!==Q&&(W.set(z,Q),z.update())}if(0<z.version&&y.__version!==z.version)if(Q=z.image,void 0===Q)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");
else if(!1===Q.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{I(y,z,C);return}b.activeTexture(33984+C);b.bindTexture(3553,y.__webglTexture)}function A(z,C){if(6===z.image.length){var y=d.get(z);if(0<z.version&&y.__version!==z.version){G(y,z);b.activeTexture(33984+C);b.bindTexture(34067,y.__webglTexture);c.pixelStorei(37440,z.flipY);var Q=z&&(z.isCompressedTexture||z.image[0].isCompressedTexture),T=z.image[0]&&z.image[0].isDataTexture;C=[];for(var ba=
0;6>ba;ba++)C[ba]=Q||T?T?z.image[ba].image:z.image[ba]:k(z.image[ba],!1,!0,P);ba=C[0];var X=l(ba)||F,ta=f.convert(z.format),va=f.convert(z.type),ya=p(z.internalFormat,ta,va);D(34067,z,X);if(Q){for(T=0;6>T;T++){var Pa=C[T].mipmaps;for(Q=0;Q<Pa.length;Q++){var U=Pa[Q];1023!==z.format&&1022!==z.format?null!==ta?b.compressedTexImage2D(34069+T,Q,ya,U.width,U.height,0,U.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):b.texImage2D(34069+
T,Q,ya,U.width,U.height,0,ta,va,U.data)}}y.__maxMipLevel=Pa.length-1}else{Pa=z.mipmaps;for(Q=0;6>Q;Q++)if(T)for(b.texImage2D(34069+Q,0,ya,C[Q].width,C[Q].height,0,ta,va,C[Q].data),U=0;U<Pa.length;U++){var la=Pa[U].image[Q].image;b.texImage2D(34069+Q,U+1,ya,la.width,la.height,0,ta,va,la.data)}else for(b.texImage2D(34069+Q,0,ya,ta,va,C[Q]),U=0;U<Pa.length;U++)b.texImage2D(34069+Q,U+1,ya,ta,va,Pa[U].image[Q]);y.__maxMipLevel=Pa.length}m(z,X)&&n(34067,z,ba.width,ba.height);y.__version=z.version;if(z.onUpdate)z.onUpdate(z)}else b.activeTexture(33984+
C),b.bindTexture(34067,y.__webglTexture)}}function B(z,C){b.activeTexture(33984+C);b.bindTexture(34067,d.get(z).__webglTexture)}function D(z,C,y){y?(c.texParameteri(z,10242,Aa[C.wrapS]),c.texParameteri(z,10243,Aa[C.wrapT]),32879!==z&&35866!==z||c.texParameteri(z,32882,Aa[C.wrapR]),c.texParameteri(z,10240,Xa[C.magFilter]),c.texParameteri(z,10241,Xa[C.minFilter])):(c.texParameteri(z,10242,33071),c.texParameteri(z,10243,33071),32879!==z&&35866!==z||c.texParameteri(z,32882,33071),1001===C.wrapS&&1001===
C.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),c.texParameteri(z,10240,t(C.magFilter)),c.texParameteri(z,10241,t(C.minFilter)),1003!==C.minFilter&&1006!==C.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));!(y=a.get("EXT_texture_filter_anisotropic"))||1015===C.type&&null===a.get("OES_texture_float_linear")||
1016===C.type&&null===(F||a.get("OES_texture_half_float_linear"))||!(1<C.anisotropy||d.get(C).__currentAnisotropy)||(c.texParameterf(z,y.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(C.anisotropy,e.getMaxAnisotropy())),d.get(C).__currentAnisotropy=C.anisotropy)}function G(z,C){void 0===z.__webglInit&&(z.__webglInit=!0,C.addEventListener("dispose",q),z.__webglTexture=c.createTexture(),g.memory.textures++)}function I(z,C,y){var Q=3553;C.isDataTexture2DArray&&(Q=35866);C.isDataTexture3D&&(Q=32879);G(z,C);b.activeTexture(33984+
y);b.bindTexture(Q,z.__webglTexture);c.pixelStorei(37440,C.flipY);c.pixelStorei(37441,C.premultiplyAlpha);c.pixelStorei(3317,C.unpackAlignment);y=F?!1:1001!==C.wrapS||1001!==C.wrapT||1003!==C.minFilter&&1006!==C.minFilter;y=y&&!1===l(C.image);y=k(C.image,y,!1,V);var T=l(y)||F,ba=f.convert(C.format),X=f.convert(C.type),ta=p(C.internalFormat,ba,X);D(Q,C,T);var va=C.mipmaps;if(C.isDepthTexture)ta=6402,F?ta=1015===C.type?36012:1014===C.type?33190:1020===C.type?35056:33189:1015===C.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),
1026===C.format&&6402===ta&&1012!==C.type&&1014!==C.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),C.type=1012,X=f.convert(C.type)),1027===C.format&&6402===ta&&(ta=34041,1020!==C.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),C.type=1020,X=f.convert(C.type))),b.texImage2D(3553,0,ta,y.width,y.height,0,ba,X,null);else if(C.isDataTexture)if(0<va.length&&T){for(var ya=0,Pa=va.length;ya<
Pa;ya++){var U=va[ya];b.texImage2D(3553,ya,ta,U.width,U.height,0,ba,X,U.data)}C.generateMipmaps=!1;z.__maxMipLevel=va.length-1}else b.texImage2D(3553,0,ta,y.width,y.height,0,ba,X,y.data),z.__maxMipLevel=0;else if(C.isCompressedTexture){ya=0;for(Pa=va.length;ya<Pa;ya++)U=va[ya],1023!==C.format&&1022!==C.format?null!==ba?b.compressedTexImage2D(3553,ya,ta,U.width,U.height,0,U.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):b.texImage2D(3553,
ya,ta,U.width,U.height,0,ba,X,U.data);z.__maxMipLevel=va.length-1}else if(C.isDataTexture2DArray)b.texImage3D(35866,0,ta,y.width,y.height,y.depth,0,ba,X,y.data),z.__maxMipLevel=0;else if(C.isDataTexture3D)b.texImage3D(32879,0,ta,y.width,y.height,y.depth,0,ba,X,y.data),z.__maxMipLevel=0;else if(0<va.length&&T){ya=0;for(Pa=va.length;ya<Pa;ya++)U=va[ya],b.texImage2D(3553,ya,ta,ba,X,U);C.generateMipmaps=!1;z.__maxMipLevel=va.length-1}else b.texImage2D(3553,0,ta,ba,X,y),z.__maxMipLevel=0;m(C,T)&&n(Q,C,
y.width,y.height);z.__version=C.version;if(C.onUpdate)C.onUpdate(C)}function E(z,C,y,Q){var T=f.convert(C.texture.format),ba=f.convert(C.texture.type),X=p(C.texture.internalFormat,T,ba);b.texImage2D(Q,0,X,C.width,C.height,0,T,ba,null);c.bindFramebuffer(36160,z);c.framebufferTexture2D(36160,y,Q,d.get(C.texture).__webglTexture,0);c.bindFramebuffer(36160,null)}function H(z,C,y){c.bindRenderbuffer(36161,z);if(C.depthBuffer&&!C.stencilBuffer){var Q=33189;y?((y=C.depthTexture)&&y.isDepthTexture&&(1015===
y.type?Q=36012:1014===y.type&&(Q=33190)),y=M(C),c.renderbufferStorageMultisample(36161,y,Q,C.width,C.height)):c.renderbufferStorage(36161,Q,C.width,C.height);c.framebufferRenderbuffer(36160,36096,36161,z)}else C.depthBuffer&&C.stencilBuffer?(y?(y=M(C),c.renderbufferStorageMultisample(36161,y,35056,C.width,C.height)):c.renderbufferStorage(36161,34041,C.width,C.height),c.framebufferRenderbuffer(36160,33306,36161,z)):(z=f.convert(C.texture.format),Q=f.convert(C.texture.type),z=p(C.texture.internalFormat,
z,Q),y?(y=M(C),c.renderbufferStorageMultisample(36161,y,z,C.width,C.height)):c.renderbufferStorage(36161,z,C.width,C.height));c.bindRenderbuffer(36161,null)}function M(z){return F&&z.isWebGLMultisampleRenderTarget?Math.min(ia,z.samples):0}var F=e.isWebGL2,K=e.maxTextures,P=e.maxCubemapSize,V=e.maxTextureSize,ia=e.maxSamples,W=new WeakMap,aa,Z=!1;try{Z="undefined"!==typeof OffscreenCanvas&&null!==(new OffscreenCanvas(1,1)).getContext("2d")}catch(z){}var ja=0,Aa={1E3:10497,1001:33071,1002:33648},Xa=
{1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987},bb=!1,fb=!1;this.allocateTextureUnit=function(){var z=ja;z>=K&&console.warn("THREE.WebGLTextures: Trying to use "+z+" texture units while this GPU supports only "+K);ja+=1;return z};this.resetTextureUnits=function(){ja=0};this.setTexture2D=u;this.setTexture2DArray=function(z,C){var y=d.get(z);0<z.version&&y.__version!==z.version?I(y,z,C):(b.activeTexture(33984+C),b.bindTexture(35866,y.__webglTexture))};this.setTexture3D=function(z,C){var y=
d.get(z);0<z.version&&y.__version!==z.version?I(y,z,C):(b.activeTexture(33984+C),b.bindTexture(32879,y.__webglTexture))};this.setTextureCube=A;this.setTextureCubeDynamic=B;this.setupRenderTarget=function(z){var C=d.get(z),y=d.get(z.texture);z.addEventListener("dispose",v);y.__webglTexture=c.createTexture();g.memory.textures++;var Q=!0===z.isWebGLCubeRenderTarget,T=!0===z.isWebGLMultisampleRenderTarget,ba=l(z)||F;!F||1022!==z.texture.format||1015!==z.texture.type&&1016!==z.texture.type||(z.texture.format=
1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead."));if(Q)for(C.__webglFramebuffer=[],T=0;6>T;T++)C.__webglFramebuffer[T]=c.createFramebuffer();else if(C.__webglFramebuffer=c.createFramebuffer(),T)if(F){C.__webglMultisampledFramebuffer=c.createFramebuffer();C.__webglColorRenderbuffer=c.createRenderbuffer();c.bindRenderbuffer(36161,C.__webglColorRenderbuffer);T=f.convert(z.texture.format);var X=f.convert(z.texture.type);T=p(z.texture.internalFormat,
T,X);X=M(z);c.renderbufferStorageMultisample(36161,X,T,z.width,z.height);c.bindFramebuffer(36160,C.__webglMultisampledFramebuffer);c.framebufferRenderbuffer(36160,36064,36161,C.__webglColorRenderbuffer);c.bindRenderbuffer(36161,null);z.depthBuffer&&(C.__webglDepthRenderbuffer=c.createRenderbuffer(),H(C.__webglDepthRenderbuffer,z,!0));c.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Q){b.bindTexture(34067,y.__webglTexture);
D(34067,z.texture,ba);for(y=0;6>y;y++)E(C.__webglFramebuffer[y],z,36064,34069+y);m(z.texture,ba)&&n(34067,z.texture,z.width,z.height);b.bindTexture(34067,null)}else b.bindTexture(3553,y.__webglTexture),D(3553,z.texture,ba),E(C.__webglFramebuffer,z,36064,3553),m(z.texture,ba)&&n(3553,z.texture,z.width,z.height),b.bindTexture(3553,null);if(z.depthBuffer){C=d.get(z);ba=!0===z.isWebGLCubeRenderTarget;if(z.depthTexture){if(ba)throw Error("target.depthTexture not supported in Cube render targets");if(z&&
z.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");c.bindFramebuffer(36160,C.__webglFramebuffer);if(!z.depthTexture||!z.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");d.get(z.depthTexture).__webglTexture&&z.depthTexture.image.width===z.width&&z.depthTexture.image.height===z.height||(z.depthTexture.image.width=z.width,z.depthTexture.image.height=z.height,z.depthTexture.needsUpdate=!0);u(z.depthTexture,
0);C=d.get(z.depthTexture).__webglTexture;if(1026===z.depthTexture.format)c.framebufferTexture2D(36160,36096,3553,C,0);else if(1027===z.depthTexture.format)c.framebufferTexture2D(36160,33306,3553,C,0);else throw Error("Unknown depthTexture format");}else if(ba)for(C.__webglDepthbuffer=[],ba=0;6>ba;ba++)c.bindFramebuffer(36160,C.__webglFramebuffer[ba]),C.__webglDepthbuffer[ba]=c.createRenderbuffer(),H(C.__webglDepthbuffer[ba],z,!1);else c.bindFramebuffer(36160,C.__webglFramebuffer),C.__webglDepthbuffer=
c.createRenderbuffer(),H(C.__webglDepthbuffer,z,!1);c.bindFramebuffer(36160,null)}};this.updateRenderTargetMipmap=function(z){var C=z.texture,y=l(z)||F;if(m(C,y)){y=z.isWebGLCubeRenderTarget?34067:3553;var Q=d.get(C).__webglTexture;b.bindTexture(y,Q);n(y,C,z.width,z.height);b.bindTexture(y,null)}};this.updateMultisampleRenderTarget=function(z){if(z.isWebGLMultisampleRenderTarget)if(F){var C=d.get(z);c.bindFramebuffer(36008,C.__webglMultisampledFramebuffer);c.bindFramebuffer(36009,C.__webglFramebuffer);
var y=z.width,Q=z.height,T=16384;z.depthBuffer&&(T|=256);z.stencilBuffer&&(T|=1024);c.blitFramebuffer(0,0,y,Q,0,0,y,Q,T,9728);c.bindFramebuffer(36160,C.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")};this.safeSetTexture2D=function(z,C){z&&z.isWebGLRenderTarget&&(!1===bb&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),bb=!0),z=z.texture);
u(z,C)};this.safeSetTextureCube=function(z,C){z&&z.isWebGLCubeRenderTarget&&(!1===fb&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),fb=!0),z=z.texture);z&&z.isCubeTexture||Array.isArray(z.image)&&6===z.image.length?A(z,C):B(z,C)}}function Vi(c,a,b){var d=b.isWebGL2;return{convert:function(e){if(1009===e)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;
if(1011===e)return 5122;if(1012===e)return 5123;if(1013===e)return 5124;if(1014===e)return 5125;if(1015===e)return 5126;if(1016===e){if(d)return 5131;var f=a.get("OES_texture_half_float");return null!==f?f.HALF_FLOAT_OES:null}if(1021===e)return 6406;if(1022===e)return 6407;if(1023===e)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(1026===e)return 6402;if(1027===e)return 34041;if(1028===e)return 6403;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1032===
e)return 36248;if(1033===e)return 36249;if(33776===e||33777===e||33778===e||33779===e)if(f=a.get("WEBGL_compressed_texture_s3tc"),null!==f){if(33776===e)return f.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return f.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return f.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return f.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(35840===e||35841===e||35842===e||35843===e)if(f=a.get("WEBGL_compressed_texture_pvrtc"),null!==f){if(35840===e)return f.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
if(35841===e)return f.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return f.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return f.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(36196===e)return f=a.get("WEBGL_compressed_texture_etc1"),null!==f?f.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===e||37496===e)if(f=a.get("WEBGL_compressed_texture_etc"),null!==f){if(37492===e)return f.COMPRESSED_RGB8_ETC2;if(37496===e)return f.COMPRESSED_RGBA8_ETC2_EAC}if(37808===e||37809===e||37810===e||37811===e||37812===
e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e)return f=a.get("WEBGL_compressed_texture_astc"),null!==f?e:null;if(36492===e)return f=a.get("EXT_texture_compression_bptc"),null!==f?e:null;if(1020===e){if(d)return 34042;f=a.get("WEBGL_depth_texture");return null!==f?f.UNSIGNED_INT_24_8_WEBGL:null}}}}
function Tf(c){eb.call(this);this.cameras=c||[]}function Gc(){ha.call(this);this.type="Group"}function Me(){this._hand=this._grip=this._targetRay=null}function Wi(c,a){function b(F){var K=q.get(F.inputSource);K&&K.dispatchEvent({type:F.type})}function d(){q.forEach(function(F,K){F.disconnect(K)});q.clear();c.setFramebuffer(null);c.setRenderTarget(c.getRenderTarget());M.stop();h.isPresenting=!1;h.dispatchEvent({type:"sessionend"})}function e(F){m=F;M.setContext(k);M.start();h.isPresenting=!0;h.dispatchEvent({type:"sessionstart"})}
function f(F){for(var K=k.inputSources,P=0;P<t.length;P++)q.set(K[P],t[P]);for(K=0;K<F.removed.length;K++){P=F.removed[K];var V=q.get(P);V&&(V.dispatchEvent({type:"disconnected",data:P}),q.delete(P))}for(K=0;K<F.added.length;K++)P=F.added[K],(V=q.get(P))&&V.dispatchEvent({type:"connected",data:P})}function g(F,K){null===K?F.matrixWorld.copy(F.matrix):F.matrixWorld.multiplyMatrices(K.matrixWorld,F.matrix);F.matrixWorldInverse.getInverse(F.matrixWorld)}var h=this,k=null,l=1,m=null,n="local-floor",p=
null,t=[],q=new Map,v=new eb;v.layers.enable(1);v.viewport=new ca;var u=new eb;u.layers.enable(2);u.viewport=new ca;var A=[v,u],B=new Tf;B.layers.enable(1);B.layers.enable(2);var D=null,G=null;this.isPresenting=this.enabled=!1;this.getController=function(F){var K=t[F];void 0===K&&(K=new Me,t[F]=K);return K.getTargetRaySpace()};this.getControllerGrip=function(F){var K=t[F];void 0===K&&(K=new Me,t[F]=K);return K.getGripSpace()};this.getHand=function(F){var K=t[F];void 0===K&&(K=new Me,t[F]=K);return K.getHandSpace()};
this.setFramebufferScaleFactor=function(F){l=F;!0===h.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")};this.setReferenceSpaceType=function(F){n=F;!0===h.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")};this.getReferenceSpace=function(){return m};this.getSession=function(){return k};this.setSession=function(F){k=F;null!==k&&(k.addEventListener("select",b),k.addEventListener("selectstart",b),k.addEventListener("selectend",
b),k.addEventListener("squeeze",b),k.addEventListener("squeezestart",b),k.addEventListener("squeezeend",b),k.addEventListener("end",d),F=a.getContextAttributes(),!0!==F.xrCompatible&&a.makeXRCompatible(),F=new XRWebGLLayer(k,a,{antialias:F.antialias,alpha:F.alpha,depth:F.depth,stencil:F.stencil,framebufferScaleFactor:l}),k.updateRenderState({baseLayer:F}),k.requestReferenceSpace(n).then(e),k.addEventListener("inputsourceschange",f))};var I=new w,E=new w;this.getCamera=function(F){B.near=u.near=v.near=
F.near;B.far=u.far=v.far=F.far;if(D!==B.near||G!==B.far)k.updateRenderState({depthNear:B.near,depthFar:B.far}),D=B.near,G=B.far;var K=F.parent,P=B.cameras;g(B,K);for(var V=0;V<P.length;V++)g(P[V],K);F.matrixWorld.copy(B.matrixWorld);F=F.children;K=0;for(V=F.length;K<V;K++)F[K].updateMatrixWorld(!0);if(2===P.length){I.setFromMatrixPosition(v.matrixWorld);E.setFromMatrixPosition(u.matrixWorld);P=I.distanceTo(E);var ia=v.projectionMatrix.elements,W=u.projectionMatrix.elements,aa=ia[14]/(ia[10]-1);F=
ia[14]/(ia[10]+1);K=(ia[9]+1)/ia[5];V=(ia[9]-1)/ia[5];var Z=(ia[8]-1)/ia[0],ja=(W[8]+1)/W[0];W=aa*Z;ia=aa*ja;ja=P/(-Z+ja);Z=ja*-Z;v.matrixWorld.decompose(B.position,B.quaternion,B.scale);B.translateX(Z);B.translateZ(ja);B.matrixWorld.compose(B.position,B.quaternion,B.scale);B.matrixWorldInverse.getInverse(B.matrixWorld);aa+=ja;ja=F+ja;B.projectionMatrix.makePerspective(W-Z,ia+(P-Z),K*F/ja*aa,V*F/ja*aa,aa,ja)}else B.projectionMatrix.copy(v.projectionMatrix);return B};var H=null,M=new xi;M.setAnimationLoop(function(F,
K){p=K.getViewerPose(m);if(null!==p){var P=p.views,V=k.renderState.baseLayer;c.setFramebuffer(V.framebuffer);var ia=!1;P.length!==B.cameras.length&&(B.cameras.length=0,ia=!0);for(var W=0;W<P.length;W++){var aa=P[W],Z=V.getViewport(aa),ja=A[W];ja.matrix.fromArray(aa.transform.matrix);ja.projectionMatrix.fromArray(aa.projectionMatrix);ja.viewport.set(Z.x,Z.y,Z.width,Z.height);0===W&&B.matrix.copy(ja.matrix);!0===ia&&B.cameras.push(ja)}}P=k.inputSources;for(V=0;V<t.length;V++)t[V].update(P[V],K,m);H&&
H(F,K)});this.setAnimationLoop=function(F){H=F};this.dispose=function(){}}function El(c){function a(d,e){d.opacity.value=e.opacity;e.color&&d.diffuse.value.copy(e.color);e.emissive&&d.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity);e.map&&(d.map.value=e.map);e.alphaMap&&(d.alphaMap.value=e.alphaMap);e.specularMap&&(d.specularMap.value=e.specularMap);var f=c.get(e).envMap;f&&(d.envMap.value=f,d.flipEnvMap.value=f.isCubeTexture?-1:1,d.reflectivity.value=e.reflectivity,d.refractionRatio.value=
e.refractionRatio,f=c.get(f).__maxMipLevel,void 0!==f&&(d.maxMipLevel.value=f));e.lightMap&&(d.lightMap.value=e.lightMap,d.lightMapIntensity.value=e.lightMapIntensity);e.aoMap&&(d.aoMap.value=e.aoMap,d.aoMapIntensity.value=e.aoMapIntensity);if(e.map)var g=e.map;else e.specularMap?g=e.specularMap:e.displacementMap?g=e.displacementMap:e.normalMap?g=e.normalMap:e.bumpMap?g=e.bumpMap:e.roughnessMap?g=e.roughnessMap:e.metalnessMap?g=e.metalnessMap:e.alphaMap?g=e.alphaMap:e.emissiveMap?g=e.emissiveMap:
e.clearcoatMap?g=e.clearcoatMap:e.clearcoatNormalMap?g=e.clearcoatNormalMap:e.clearcoatRoughnessMap&&(g=e.clearcoatRoughnessMap);void 0!==g&&(g.isWebGLRenderTarget&&(g=g.texture),!0===g.matrixAutoUpdate&&g.updateMatrix(),d.uvTransform.value.copy(g.matrix));if(e.aoMap)var h=e.aoMap;else e.lightMap&&(h=e.lightMap);void 0!==h&&(h.isWebGLRenderTarget&&(h=h.texture),!0===h.matrixAutoUpdate&&h.updateMatrix(),d.uv2Transform.value.copy(h.matrix))}function b(d,e){d.roughness.value=e.roughness;d.metalness.value=
e.metalness;e.roughnessMap&&(d.roughnessMap.value=e.roughnessMap);e.metalnessMap&&(d.metalnessMap.value=e.metalnessMap);e.emissiveMap&&(d.emissiveMap.value=e.emissiveMap);e.bumpMap&&(d.bumpMap.value=e.bumpMap,d.bumpScale.value=e.bumpScale,1===e.side&&(d.bumpScale.value*=-1));e.normalMap&&(d.normalMap.value=e.normalMap,d.normalScale.value.copy(e.normalScale),1===e.side&&d.normalScale.value.negate());e.displacementMap&&(d.displacementMap.value=e.displacementMap,d.displacementScale.value=e.displacementScale,
d.displacementBias.value=e.displacementBias);c.get(e).envMap&&(d.envMapIntensity.value=e.envMapIntensity)}return{refreshFogUniforms:function(d,e){d.fogColor.value.copy(e.color);e.isFog?(d.fogNear.value=e.near,d.fogFar.value=e.far):e.isFogExp2&&(d.fogDensity.value=e.density)},refreshMaterialUniforms:function(d,e,f,g){if(e.isMeshBasicMaterial)a(d,e);else if(e.isMeshLambertMaterial)a(d,e),e.emissiveMap&&(d.emissiveMap.value=e.emissiveMap);else if(e.isMeshToonMaterial)a(d,e),e.gradientMap&&(d.gradientMap.value=
e.gradientMap),e.emissiveMap&&(d.emissiveMap.value=e.emissiveMap),e.bumpMap&&(d.bumpMap.value=e.bumpMap,d.bumpScale.value=e.bumpScale,1===e.side&&(d.bumpScale.value*=-1)),e.normalMap&&(d.normalMap.value=e.normalMap,d.normalScale.value.copy(e.normalScale),1===e.side&&d.normalScale.value.negate()),e.displacementMap&&(d.displacementMap.value=e.displacementMap,d.displacementScale.value=e.displacementScale,d.displacementBias.value=e.displacementBias);else if(e.isMeshPhongMaterial)a(d,e),d.specular.value.copy(e.specular),
d.shininess.value=Math.max(e.shininess,1E-4),e.emissiveMap&&(d.emissiveMap.value=e.emissiveMap),e.bumpMap&&(d.bumpMap.value=e.bumpMap,d.bumpScale.value=e.bumpScale,1===e.side&&(d.bumpScale.value*=-1)),e.normalMap&&(d.normalMap.value=e.normalMap,d.normalScale.value.copy(e.normalScale),1===e.side&&d.normalScale.value.negate()),e.displacementMap&&(d.displacementMap.value=e.displacementMap,d.displacementScale.value=e.displacementScale,d.displacementBias.value=e.displacementBias);else if(e.isMeshStandardMaterial)a(d,
e),e.isMeshPhysicalMaterial?(b(d,e),d.reflectivity.value=e.reflectivity,d.clearcoat.value=e.clearcoat,d.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&d.sheen.value.copy(e.sheen),e.clearcoatMap&&(d.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(d.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(d.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),d.clearcoatNormalMap.value=e.clearcoatNormalMap,1===e.side&&d.clearcoatNormalScale.value.negate()),
d.transmission.value=e.transmission,e.transmissionMap&&(d.transmissionMap.value=e.transmissionMap)):b(d,e);else if(e.isMeshMatcapMaterial)a(d,e),e.matcap&&(d.matcap.value=e.matcap),e.bumpMap&&(d.bumpMap.value=e.bumpMap,d.bumpScale.value=e.bumpScale,1===e.side&&(d.bumpScale.value*=-1)),e.normalMap&&(d.normalMap.value=e.normalMap,d.normalScale.value.copy(e.normalScale),1===e.side&&d.normalScale.value.negate()),e.displacementMap&&(d.displacementMap.value=e.displacementMap,d.displacementScale.value=e.displacementScale,
d.displacementBias.value=e.displacementBias);else if(e.isMeshDepthMaterial)a(d,e),e.displacementMap&&(d.displacementMap.value=e.displacementMap,d.displacementScale.value=e.displacementScale,d.displacementBias.value=e.displacementBias);else if(e.isMeshDistanceMaterial)a(d,e),e.displacementMap&&(d.displacementMap.value=e.displacementMap,d.displacementScale.value=e.displacementScale,d.displacementBias.value=e.displacementBias),d.referencePosition.value.copy(e.referencePosition),d.nearDistance.value=
e.nearDistance,d.farDistance.value=e.farDistance;else if(e.isMeshNormalMaterial)a(d,e),e.bumpMap&&(d.bumpMap.value=e.bumpMap,d.bumpScale.value=e.bumpScale,1===e.side&&(d.bumpScale.value*=-1)),e.normalMap&&(d.normalMap.value=e.normalMap,d.normalScale.value.copy(e.normalScale),1===e.side&&d.normalScale.value.negate()),e.displacementMap&&(d.displacementMap.value=e.displacementMap,d.displacementScale.value=e.displacementScale,d.displacementBias.value=e.displacementBias);else if(e.isLineBasicMaterial)d.diffuse.value.copy(e.color),
d.opacity.value=e.opacity,e.isLineDashedMaterial&&(d.dashSize.value=e.dashSize,d.totalSize.value=e.dashSize+e.gapSize,d.scale.value=e.scale);else if(e.isPointsMaterial){d.diffuse.value.copy(e.color);d.opacity.value=e.opacity;d.size.value=e.size*f;d.scale.value=.5*g;e.map&&(d.map.value=e.map);e.alphaMap&&(d.alphaMap.value=e.alphaMap);if(e.map)var h=e.map;else e.alphaMap&&(h=e.alphaMap);void 0!==h&&(!0===h.matrixAutoUpdate&&h.updateMatrix(),d.uvTransform.value.copy(h.matrix))}else if(e.isSpriteMaterial){d.diffuse.value.copy(e.color);
d.opacity.value=e.opacity;d.rotation.value=e.rotation;e.map&&(d.map.value=e.map);e.alphaMap&&(d.alphaMap.value=e.alphaMap);if(e.map)var k=e.map;else e.alphaMap&&(k=e.alphaMap);void 0!==k&&(!0===k.matrixAutoUpdate&&k.updateMatrix(),d.uvTransform.value.copy(k.matrix))}else e.isShadowMaterial?(d.color.value.copy(e.color),d.opacity.value=e.opacity):e.isShaderMaterial&&(e.uniformsNeedUpdate=!1)}}}function Ne(c){function a(x,N){for(var J=0;J<x.length;J++){var O=t.getContext(x[J],N);if(null!==O)return O}return null}
function b(){qa=new tk(R);Ea=new qk(R,qa,c);!1===Ea.isWebGL2&&(qa.get("WEBGL_depth_texture"),qa.get("OES_texture_float"),qa.get("OES_texture_half_float"),qa.get("OES_texture_half_float_linear"),qa.get("OES_standard_derivatives"),qa.get("OES_element_index_uint"),qa.get("OES_vertex_array_object"),qa.get("ANGLE_instanced_arrays"));qa.get("OES_texture_float_linear");lc=new Vi(R,qa,Ea);Ca=new Cl(R,qa,Ea);Ca.scissor(bb.copy(X).multiplyScalar(y).floor());Ca.viewport(Xa.copy(ba).multiplyScalar(y).floor());
Ka=new wk(R);Ra=new sl;kb=new Dl(R,qa,Ca,Ra,Ea,lc,Ka);mc=new sk(F);Oe=new mk(R,Ea);Fb=new ok(R,qa,Oe,Ea);ph=new uk(R,Oe,Ka,Fb);Ld=new Ak(R,ph,Oe,Ka);Xi=new zk(R);Qb=new rk(Ra);dd=new rl(F,mc,qa,Ea,Fb,Qb);qh=new El(Ra);Uf=new vl(Ra);Md=new Bl;Hc=new nk(F,mc,Ca,Ld,D);Yi=new pk(R,qa,Ka,Ea);Zi=new vk(R,qa,Ka,Ea);Ka.programs=dd.programs;F.capabilities=Ea;F.extensions=qa;F.properties=Ra;F.renderLists=Uf;F.state=Ca;F.info=Ka}function d(x){x.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");
K=!0}function e(){console.log("THREE.WebGLRenderer: Context Restored.");K=!1;b()}function f(x){x=x.target;x.removeEventListener("dispose",f);g(x);Ra.remove(x)}function g(x){x=Ra.get(x).program;void 0!==x&&dd.releaseProgram(x)}function h(x,N){x.render(function(J){F.renderBufferImmediate(J,N)})}function k(x,N,J,O){if(!1!==x.visible){if(x.layers.test(N.layers))if(x.isGroup)J=x.renderOrder;else if(x.isLOD)!0===x.autoUpdate&&x.update(N);else if(x.isLight)M.pushLight(x),x.castShadow&&M.pushShadow(x);else if(x.isSprite){if(!x.frustumCulled||
va.intersectsSprite(x)){O&&la.setFromMatrixPosition(x.matrixWorld).applyMatrix4(U);var Y=Ld.update(x),ma=x.material;ma.visible&&H.push(x,Y,ma,J,la.z,null)}}else if(x.isImmediateRenderObject)O&&la.setFromMatrixPosition(x.matrixWorld).applyMatrix4(U),H.push(x,null,x.material,J,la.z,null);else if(x.isMesh||x.isLine||x.isPoints)if(x.isSkinnedMesh&&x.skeleton.frame!==Ka.render.frame&&(x.skeleton.update(),x.skeleton.frame=Ka.render.frame),!x.frustumCulled||va.intersectsObject(x))if(O&&la.setFromMatrixPosition(x.matrixWorld).applyMatrix4(U),
Y=Ld.update(x),ma=x.material,Array.isArray(ma))for(var na=Y.groups,Ha=0,Fa=na.length;Ha<Fa;Ha++){var ib=na[Ha],Ia=ma[ib.materialIndex];Ia&&Ia.visible&&H.push(x,Y,Ia,J,la.z,ib)}else ma.visible&&H.push(x,Y,ma,J,la.z,null);x=x.children;Y=0;for(ma=x.length;Y<ma;Y++)k(x[Y],N,J,O)}}function l(x,N,J){for(var O=!0===N.isScene?N.overrideMaterial:null,Y=0,ma=x.length;Y<ma;Y++){var na=x[Y],Ha=na.object,Fa=na.geometry,ib=null===O?na.material:O;na=na.group;if(J.isArrayCamera){Aa=J;for(var Ia=J.cameras,ed=0,rh=
Ia.length;ed<rh;ed++){var Vf=Ia[ed];Ha.layers.test(Vf.layers)&&(Ca.viewport(Xa.copy(Vf.viewport)),M.setupLights(Vf),m(Ha,N,Vf,Fa,ib,na))}}else Aa=null,m(Ha,N,J,Fa,ib,na)}}function m(x,N,J,O,Y,ma){x.onBeforeRender(F,N,J,O,Y,ma);M=Md.get(N,Aa||J);x.modelViewMatrix.multiplyMatrices(J.matrixWorldInverse,x.matrixWorld);x.normalMatrix.getNormalMatrix(x.modelViewMatrix);if(x.isImmediateRenderObject){var na=p(J,N,Y,x);Ca.setMaterial(Y);Fb.reset();h(x,na)}else F.renderBufferDirect(J,N,O,Y,x,ma);x.onAfterRender(F,
N,J,O,Y,ma);M=Md.get(N,Aa||J)}function n(x,N,J){!0!==N.isScene&&(N=wa);var O=Ra.get(x),Y=M.state.lights,ma=Y.state.version;J=dd.getParameters(x,Y.state,M.state.shadowsArray,N,J);var na=dd.getProgramCacheKey(J),Ha=O.program,Fa=!0;if(void 0===Ha)x.addEventListener("dispose",f);else if(Ha.cacheKey!==na)g(x);else{if(O.lightsStateVersion===ma&&void 0!==J.shaderID){N=x.isMeshStandardMaterial?N.environment:null;O.envMap=mc.get(x.envMap||N);return}Fa=!1}Fa&&(J.uniforms=dd.getUniforms(x),x.onBeforeCompile(J,
F),Ha=dd.acquireProgram(J,na),O.program=Ha,O.uniforms=J.uniforms,O.outputEncoding=J.outputEncoding);J=O.uniforms;if(!x.isShaderMaterial&&!x.isRawShaderMaterial||!0===x.clipping)O.numClippingPlanes=Qb.numPlanes,O.numIntersection=Qb.numIntersection,J.clippingPlanes=Qb.uniform;O.environment=x.isMeshStandardMaterial?N.environment:null;O.fog=N.fog;O.envMap=mc.get(x.envMap||O.environment);O.needsLights=x.isMeshLambertMaterial||x.isMeshToonMaterial||x.isMeshPhongMaterial||x.isMeshStandardMaterial||x.isShadowMaterial||
x.isShaderMaterial&&!0===x.lights;O.lightsStateVersion=ma;O.needsLights&&(J.ambientLightColor.value=Y.state.ambient,J.lightProbe.value=Y.state.probe,J.directionalLights.value=Y.state.directional,J.directionalLightShadows.value=Y.state.directionalShadow,J.spotLights.value=Y.state.spot,J.spotLightShadows.value=Y.state.spotShadow,J.rectAreaLights.value=Y.state.rectArea,J.ltc_1.value=Y.state.rectAreaLTC1,J.ltc_2.value=Y.state.rectAreaLTC2,J.pointLights.value=Y.state.point,J.pointLightShadows.value=Y.state.pointShadow,
J.hemisphereLights.value=Y.state.hemi,J.directionalShadowMap.value=Y.state.directionalShadowMap,J.directionalShadowMatrix.value=Y.state.directionalShadowMatrix,J.spotShadowMap.value=Y.state.spotShadowMap,J.spotShadowMatrix.value=Y.state.spotShadowMatrix,J.pointShadowMap.value=Y.state.pointShadowMap,J.pointShadowMatrix.value=Y.state.pointShadowMatrix);x=O.program.getUniforms();x=Dc.seqWithValue(x.seq,J);O.uniformsList=x}function p(x,N,J,O){!0!==N.isScene&&(N=wa);kb.resetTextureUnits();var Y=N.fog,
ma=J.isMeshStandardMaterial?N.environment:null,na=null===W?F.outputEncoding:W.texture.encoding,Ha=mc.get(J.envMap||ma),Fa=Ra.get(J),ib=M.state.lights;!0!==ya||!0!==Pa&&x===ja||Qb.setState(J,x,x===ja&&J.id===Z);J.version===Fa.__version?J.fog&&Fa.fog!==Y?n(J,N,O):Fa.environment!==ma?n(J,N,O):Fa.needsLights&&Fa.lightsStateVersion!==ib.state.version?n(J,N,O):void 0===Fa.numClippingPlanes||Fa.numClippingPlanes===Qb.numPlanes&&Fa.numIntersection===Qb.numIntersection?Fa.outputEncoding!==na?n(J,N,O):Fa.envMap!==
Ha&&n(J,N,O):n(J,N,O):(n(J,N,O),Fa.__version=J.version);var Ia=!1;ib=Ha=!1;N=Fa.program;ma=N.getUniforms();na=Fa.uniforms;Ca.useProgram(N.program)&&(ib=Ha=Ia=!0);J.id!==Z&&(Z=J.id,Ha=!0);if(Ia||ja!==x){ma.setValue(R,"projectionMatrix",x.projectionMatrix);Ea.logarithmicDepthBuffer&&ma.setValue(R,"logDepthBufFC",2/(Math.log(x.far+1)/Math.LN2));ja!==x&&(ja=x,ib=Ha=!0);if(J.isShaderMaterial||J.isMeshPhongMaterial||J.isMeshToonMaterial||J.isMeshStandardMaterial||J.envMap)Ia=ma.map.cameraPosition,void 0!==
Ia&&Ia.setValue(R,la.setFromMatrixPosition(x.matrixWorld));(J.isMeshPhongMaterial||J.isMeshToonMaterial||J.isMeshLambertMaterial||J.isMeshBasicMaterial||J.isMeshStandardMaterial||J.isShaderMaterial)&&ma.setValue(R,"isOrthographic",!0===x.isOrthographicCamera);(J.isMeshPhongMaterial||J.isMeshToonMaterial||J.isMeshLambertMaterial||J.isMeshBasicMaterial||J.isMeshStandardMaterial||J.isShaderMaterial||J.isShadowMaterial||J.skinning)&&ma.setValue(R,"viewMatrix",x.matrixWorldInverse)}if(J.skinning&&(ma.setOptional(R,
O,"bindMatrix"),ma.setOptional(R,O,"bindMatrixInverse"),x=O.skeleton))if(Ia=x.bones,Ea.floatVertexTextures){if(void 0===x.boneTexture){Ia=Math.sqrt(4*Ia.length);Ia=xa.ceilPowerOfTwo(Ia);Ia=Math.max(Ia,4);var ed=new Float32Array(Ia*Ia*4);ed.set(x.boneMatrices);var rh=new bd(ed,Ia,Ia,1023,1015);x.boneMatrices=ed;x.boneTexture=rh;x.boneTextureSize=Ia}ma.setValue(R,"boneTexture",x.boneTexture,kb);ma.setValue(R,"boneTextureSize",x.boneTextureSize)}else ma.setOptional(R,x,"boneMatrices");if(Ha||Fa.receiveShadow!==
O.receiveShadow)Fa.receiveShadow=O.receiveShadow,ma.setValue(R,"receiveShadow",O.receiveShadow);Ha&&(ma.setValue(R,"toneMappingExposure",F.toneMappingExposure),Fa.needsLights&&(x=ib,na.ambientLightColor.needsUpdate=x,na.lightProbe.needsUpdate=x,na.directionalLights.needsUpdate=x,na.directionalLightShadows.needsUpdate=x,na.pointLights.needsUpdate=x,na.pointLightShadows.needsUpdate=x,na.spotLights.needsUpdate=x,na.spotLightShadows.needsUpdate=x,na.rectAreaLights.needsUpdate=x,na.hemisphereLights.needsUpdate=
x),Y&&J.fog&&qh.refreshFogUniforms(na,Y),qh.refreshMaterialUniforms(na,J,y,C),Dc.upload(R,Fa.uniformsList,na,kb));J.isShaderMaterial&&!0===J.uniformsNeedUpdate&&(Dc.upload(R,Fa.uniformsList,na,kb),J.uniformsNeedUpdate=!1);J.isSpriteMaterial&&ma.setValue(R,"center",O.center);ma.setValue(R,"modelViewMatrix",O.modelViewMatrix);ma.setValue(R,"normalMatrix",O.normalMatrix);ma.setValue(R,"modelMatrix",O.matrixWorld);return N}c=c||{};var t=void 0!==c.canvas?c.canvas:document.createElementNS("http://www.w3.org/1999/xhtml",
"canvas"),q=void 0!==c.context?c.context:null,v=void 0!==c.alpha?c.alpha:!1,u=void 0!==c.depth?c.depth:!0,A=void 0!==c.stencil?c.stencil:!0,B=void 0!==c.antialias?c.antialias:!1,D=void 0!==c.premultipliedAlpha?c.premultipliedAlpha:!0,G=void 0!==c.preserveDrawingBuffer?c.preserveDrawingBuffer:!1,I=void 0!==c.powerPreference?c.powerPreference:"default",E=void 0!==c.failIfMajorPerformanceCaveat?c.failIfMajorPerformanceCaveat:!1,H=null,M=null;this.domElement=t;this.debug={checkShaderErrors:!0};this.sortObjects=
this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.gammaFactor=2;this.outputEncoding=3E3;this.physicallyCorrectLights=!1;this.toneMapping=0;this.toneMappingExposure=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var F=this,K=!1,P=null,V=0,ia=0,W=null,aa=null,Z=-1,ja=null,Aa=null,Xa=new ca,bb=new ca,fb=null,z=t.width,C=t.height,y=1,Q=null,T=null,ba=new ca(0,0,z,C),X=new ca(0,0,z,C),ta=!1,va=new xb,ya=!1,Pa=!1,U=
new da,la=new w,wa={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},R=q;try{q={alpha:v,depth:u,stencil:A,antialias:B,premultipliedAlpha:D,preserveDrawingBuffer:G,powerPreference:I,failIfMajorPerformanceCaveat:E};t.addEventListener("webglcontextlost",d,!1);t.addEventListener("webglcontextrestored",e,!1);if(null===R&&(v=["webgl2","webgl","experimental-webgl"],!0===F.isWebGL1Renderer&&v.shift(),R=a(v,q),null===R)){if(a(v))throw Error("Error creating WebGL context with your selected attributes.");
throw Error("Error creating WebGL context.");}void 0===R.getShaderPrecisionFormat&&(R.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(x){throw console.error("THREE.WebGLRenderer: "+x.message),x;}var qa,Ea,Ca,Ka,Ra,kb,mc,Oe,ph,Ld,dd,qh,Uf,Md,Qb,Hc,Xi,Yi,Zi,lc,Fb;b();var Ic=new Wi(F,R);this.xr=Ic;var $i=new Ui(F,Ld,Ea.maxTextureSize);this.shadowMap=$i;this.getContext=function(){return R};this.getContextAttributes=function(){return R.getContextAttributes()};this.forceContextLoss=
function(){var x=qa.get("WEBGL_lose_context");x&&x.loseContext()};this.forceContextRestore=function(){var x=qa.get("WEBGL_lose_context");x&&x.restoreContext()};this.getPixelRatio=function(){return y};this.setPixelRatio=function(x){void 0!==x&&(y=x,this.setSize(z,C,!1))};this.getSize=function(x){void 0===x&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),x=new L);return x.set(z,C)};this.setSize=function(x,N,J){Ic.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):
(z=x,C=N,t.width=Math.floor(x*y),t.height=Math.floor(N*y),!1!==J&&(t.style.width=x+"px",t.style.height=N+"px"),this.setViewport(0,0,x,N))};this.getDrawingBufferSize=function(x){void 0===x&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),x=new L);return x.set(z*y,C*y).floor()};this.setDrawingBufferSize=function(x,N,J){z=x;C=N;y=J;t.width=Math.floor(x*J);t.height=Math.floor(N*J);this.setViewport(0,0,x,N)};this.getCurrentViewport=function(x){void 0===x&&
(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),x=new ca);return x.copy(Xa)};this.getViewport=function(x){return x.copy(ba)};this.setViewport=function(x,N,J,O){x.isVector4?ba.set(x.x,x.y,x.z,x.w):ba.set(x,N,J,O);Ca.viewport(Xa.copy(ba).multiplyScalar(y).floor())};this.getScissor=function(x){return x.copy(X)};this.setScissor=function(x,N,J,O){x.isVector4?X.set(x.x,x.y,x.z,x.w):X.set(x,N,J,O);Ca.scissor(bb.copy(X).multiplyScalar(y).floor())};this.getScissorTest=
function(){return ta};this.setScissorTest=function(x){Ca.setScissorTest(ta=x)};this.setOpaqueSort=function(x){Q=x};this.setTransparentSort=function(x){T=x};this.getClearColor=function(){return Hc.getClearColor()};this.setClearColor=function(){Hc.setClearColor.apply(Hc,arguments)};this.getClearAlpha=function(){return Hc.getClearAlpha()};this.setClearAlpha=function(){Hc.setClearAlpha.apply(Hc,arguments)};this.clear=function(x,N,J){var O=0;if(void 0===x||x)O|=16384;if(void 0===N||N)O|=256;if(void 0===
J||J)O|=1024;R.clear(O)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.dispose=function(){t.removeEventListener("webglcontextlost",d,!1);t.removeEventListener("webglcontextrestored",e,!1);Uf.dispose();Md.dispose();Ra.dispose();mc.dispose();Ld.dispose();Fb.dispose();Ic.dispose();Pe.stop()};this.renderBufferImmediate=function(x,N){Fb.initAttributes();var J=Ra.get(x);x.hasPositions&&!J.position&&
(J.position=R.createBuffer());x.hasNormals&&!J.normal&&(J.normal=R.createBuffer());x.hasUvs&&!J.uv&&(J.uv=R.createBuffer());x.hasColors&&!J.color&&(J.color=R.createBuffer());N=N.getAttributes();x.hasPositions&&(R.bindBuffer(34962,J.position),R.bufferData(34962,x.positionArray,35048),Fb.enableAttribute(N.position),R.vertexAttribPointer(N.position,3,5126,!1,0,0));x.hasNormals&&(R.bindBuffer(34962,J.normal),R.bufferData(34962,x.normalArray,35048),Fb.enableAttribute(N.normal),R.vertexAttribPointer(N.normal,
3,5126,!1,0,0));x.hasUvs&&(R.bindBuffer(34962,J.uv),R.bufferData(34962,x.uvArray,35048),Fb.enableAttribute(N.uv),R.vertexAttribPointer(N.uv,2,5126,!1,0,0));x.hasColors&&(R.bindBuffer(34962,J.color),R.bufferData(34962,x.colorArray,35048),Fb.enableAttribute(N.color),R.vertexAttribPointer(N.color,3,5126,!1,0,0));Fb.disableUnusedAttributes();R.drawArrays(4,0,x.count);x.count=0};this.renderBufferDirect=function(x,N,J,O,Y,ma){null===N&&(N=wa);var na=Y.isMesh&&0>Y.matrixWorld.determinant();x=p(x,N,O,Y);
Ca.setMaterial(O,na);na=J.index;N=J.attributes.position;if(null===na){if(void 0===N||0===N.count)return}else if(0===na.count)return;var Ha=1;!0===O.wireframe&&(na=ph.getWireframeAttribute(J),Ha=2);(O.morphTargets||O.morphNormals)&&Xi.update(Y,J,O,x);Fb.setup(Y,O,x,J,na);x=Yi;if(null!==na){var Fa=Oe.get(na);x=Zi;x.setIndex(Fa)}var ib=J.drawRange.start*Ha,Ia=null!==ma?ma.start*Ha:0;Fa=Math.max(ib,Ia);ma=Math.max(0,Math.min(null!==na?na.count:N.count,ib+J.drawRange.count*Ha,Ia+(null!==ma?ma.count*Ha:
Infinity))-1-Fa+1);0!==ma&&(Y.isMesh?!0===O.wireframe?(Ca.setLineWidth(O.wireframeLinewidth*(null===W?y:1)),x.setMode(1)):x.setMode(4):Y.isLine?(O=O.linewidth,void 0===O&&(O=1),Ca.setLineWidth(O*(null===W?y:1)),Y.isLineSegments?x.setMode(1):Y.isLineLoop?x.setMode(2):x.setMode(3)):Y.isPoints?x.setMode(0):Y.isSprite&&x.setMode(4),Y.isInstancedMesh?x.renderInstances(Fa,ma,Y.count):J.isInstancedBufferGeometry?x.renderInstances(Fa,ma,Math.min(J.instanceCount,J._maxInstanceCount)):x.render(Fa,ma))};this.compile=
function(x,N){M=Md.get(x,N);M.init();x.traverse(function(O){O.isLight&&(M.pushLight(O),O.castShadow&&M.pushShadow(O))});M.setupLights(N);var J=new WeakMap;x.traverse(function(O){var Y=O.material;if(Y)if(Array.isArray(Y))for(var ma=0;ma<Y.length;ma++){var na=Y[ma];!1===J.has(na)&&(n(na,x,O),J.set(na))}else!1===J.has(Y)&&(n(Y,x,O),J.set(Y))})};var sh=null,Pe=new xi;Pe.setAnimationLoop(function(x){Ic.isPresenting||sh&&sh(x)});"undefined"!==typeof window&&Pe.setContext(window);this.setAnimationLoop=function(x){sh=
x;Ic.setAnimationLoop(x);null===x?Pe.stop():Pe.start()};this.render=function(x,N,J,O){if(void 0!==J){console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.");var Y=J}if(void 0!==O){console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.");var ma=O}if(void 0!==N&&!0!==N.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else if(!0!==K){Fb.resetDefaultState();
Z=-1;ja=null;!0===x.autoUpdate&&x.updateMatrixWorld();null===N.parent&&N.updateMatrixWorld();!0===Ic.enabled&&!0===Ic.isPresenting&&(N=Ic.getCamera(N));if(!0===x.isScene)x.onBeforeRender(F,x,N,Y||W);M=Md.get(x,N);M.init();U.multiplyMatrices(N.projectionMatrix,N.matrixWorldInverse);va.setFromProjectionMatrix(U);Pa=this.localClippingEnabled;ya=Qb.init(this.clippingPlanes,Pa,N);H=Uf.get(x,N);H.init();k(x,N,0,F.sortObjects);H.finish();!0===F.sortObjects&&H.sort(Q,T);!0===ya&&Qb.beginShadows();$i.render(M.state.shadowsArray,
x,N);M.setupLights(N);!0===ya&&Qb.endShadows();!0===this.info.autoReset&&this.info.reset();void 0!==Y&&this.setRenderTarget(Y);Hc.render(H,x,N,ma);J=H.opaque;O=H.transparent;0<J.length&&l(J,x,N);0<O.length&&l(O,x,N);if(!0===x.isScene)x.onAfterRender(F,x,N);null!==W&&(kb.updateRenderTargetMipmap(W),kb.updateMultisampleRenderTarget(W));Ca.buffers.depth.setTest(!0);Ca.buffers.depth.setMask(!0);Ca.buffers.color.setMask(!0);Ca.setPolygonOffset(!1);M=H=null}};this.setFramebuffer=function(x){P!==x&&null===
W&&R.bindFramebuffer(36160,x);P=x};this.getActiveCubeFace=function(){return V};this.getActiveMipmapLevel=function(){return ia};this.getRenderList=function(){return H};this.setRenderList=function(x){H=x};this.getRenderState=function(){return M};this.setRenderState=function(x){M=x};this.getRenderTarget=function(){return W};this.setRenderTarget=function(x,N,J){void 0===N&&(N=0);void 0===J&&(J=0);W=x;V=N;ia=J;x&&void 0===Ra.get(x).__webglFramebuffer&&kb.setupRenderTarget(x);var O=P,Y=!1;x?(O=Ra.get(x).__webglFramebuffer,
x.isWebGLCubeRenderTarget?(O=O[N],Y=!0):O=x.isWebGLMultisampleRenderTarget?Ra.get(x).__webglMultisampledFramebuffer:O,Xa.copy(x.viewport),bb.copy(x.scissor),fb=x.scissorTest):(Xa.copy(ba).multiplyScalar(y).floor(),bb.copy(X).multiplyScalar(y).floor(),fb=ta);aa!==O&&(R.bindFramebuffer(36160,O),aa=O);Ca.viewport(Xa);Ca.scissor(bb);Ca.setScissorTest(fb);Y&&(x=Ra.get(x.texture),R.framebufferTexture2D(36160,36064,34069+N,x.__webglTexture,J))};this.readRenderTargetPixels=function(x,N,J,O,Y,ma,na){if(x&&
x.isWebGLRenderTarget){var Ha=Ra.get(x).__webglFramebuffer;x.isWebGLCubeRenderTarget&&void 0!==na&&(Ha=Ha[na]);if(Ha){na=!1;Ha!==aa&&(R.bindFramebuffer(36160,Ha),na=!0);try{var Fa=x.texture,ib=Fa.format,Ia=Fa.type;1023!==ib&&lc.convert(ib)!==R.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===Ia||lc.convert(Ia)===R.getParameter(35738)||1015===Ia&&(Ea.isWebGL2||qa.get("OES_texture_float")||qa.get("WEBGL_color_buffer_float"))||
1016===Ia&&(Ea.isWebGL2?qa.get("EXT_color_buffer_float"):qa.get("EXT_color_buffer_half_float"))?36053===R.checkFramebufferStatus(36160)?0<=N&&N<=x.width-O&&0<=J&&J<=x.height-Y&&R.readPixels(N,J,O,Y,lc.convert(ib),lc.convert(Ia),ma):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{na&&
R.bindFramebuffer(36160,aa)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")};this.copyFramebufferToTexture=function(x,N,J){void 0===J&&(J=0);var O=Math.pow(2,-J),Y=Math.floor(N.image.width*O);O=Math.floor(N.image.height*O);var ma=lc.convert(N.format);kb.setTexture2D(N,0);R.copyTexImage2D(3553,J,ma,x.x,x.y,Y,O,0);Ca.unbindTexture()};this.copyTextureToTexture=function(x,N,J,O){void 0===O&&(O=0);var Y=N.image.width,ma=N.image.height,na=
lc.convert(J.format),Ha=lc.convert(J.type);kb.setTexture2D(J,0);R.pixelStorei(37440,J.flipY);R.pixelStorei(37441,J.premultiplyAlpha);R.pixelStorei(3317,J.unpackAlignment);N.isDataTexture?R.texSubImage2D(3553,O,x.x,x.y,Y,ma,na,Ha,N.image.data):N.isCompressedTexture?R.compressedTexSubImage2D(3553,O,x.x,x.y,N.mipmaps[0].width,N.mipmaps[0].height,na,N.mipmaps[0].data):R.texSubImage2D(3553,O,x.x,x.y,na,Ha,N.image);0===O&&J.generateMipmaps&&R.generateMipmap(3553);Ca.unbindTexture()};this.initTexture=function(x){kb.setTexture2D(x,
0);Ca.unbindTexture()};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function th(c){Ne.call(this,c)}function Jc(){ha.call(this);Object.defineProperty(this,"isScene",{value:!0});this.type="Scene";this.overrideMaterial=this.fog=this.environment=this.background=null;this.autoUpdate=!0;"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Gb(c,a){this.array=c;this.stride=
a;this.count=void 0!==c?c.length/a:0;this.usage=35044;this.updateRange={offset:0,count:-1};this.version=0;this.uuid=xa.generateUUID()}function Kc(c,a,b,d){this.name="";this.data=c;this.itemSize=a;this.offset=b;this.normalized=!0===d}function Lc(c){ra.call(this);this.type="SpriteMaterial";this.color=new S(16777215);this.alphaMap=this.map=null;this.rotation=0;this.transparent=this.sizeAttenuation=!0;this.setValues(c)}function Qe(c){ha.call(this);this.type="Sprite";if(void 0===Nd){Nd=new ka;var a=new Float32Array([-.5,
-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);a=new Gb(a,5);Nd.setIndex([0,1,2,0,2,3]);Nd.setAttribute("position",new Kc(a,3,0,!1));Nd.setAttribute("uv",new Kc(a,2,3,!1))}this.geometry=Nd;this.material=void 0!==c?c:new Lc;this.center=new L(.5,.5)}function Wf(c,a,b,d,e,f){Od.subVectors(c,b).addScalar(.5).multiply(d);void 0!==e?(Re.x=f*Od.x-e*Od.y,Re.y=e*Od.x+f*Od.y):Re.copy(Od);c.copy(a);c.x+=Re.x;c.y+=Re.y;c.applyMatrix4(aj)}function Se(){ha.call(this);this._currentLevel=0;this.type="LOD";Object.defineProperties(this,
{levels:{enumerable:!0,value:[]}});this.autoUpdate=!0}function Xf(c,a){c&&c.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");Qa.call(this,c,a);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new da;this.bindMatrixInverse=new da}function Yf(c,a){c=c||[];this.bones=c.slice(0);this.boneMatrices=new Float32Array(16*this.bones.length);this.frame=-1;if(void 0===a)this.calculateInverses();else if(this.bones.length===a.length)this.boneInverses=
a.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],c=0,a=this.bones.length;c<a;c++)this.boneInverses.push(new da)}function uh(){ha.call(this);this.type="Bone"}function Zf(c,a,b){Qa.call(this,c,a);this.instanceMatrix=new pa(new Float32Array(16*b),16);this.instanceColor=null;this.count=b;this.frustumCulled=!1}function Ya(c){ra.call(this);this.type="LineBasicMaterial";this.color=new S(16777215);this.linewidth=1;this.linejoin=this.linecap="round";
this.morphTargets=!1;this.setValues(c)}function yb(c,a,b){1===b&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead.");ha.call(this);this.type="Line";this.geometry=void 0!==c?c:new ka;this.material=void 0!==a?a:new Ya;this.updateMorphTargets()}function Za(c,a){yb.call(this,c,a);this.type="LineSegments"}function $f(c,a){yb.call(this,c,a);this.type="LineLoop"}function Rb(c){ra.call(this);this.type="PointsMaterial";this.color=new S(16777215);this.alphaMap=
this.map=null;this.size=1;this.sizeAttenuation=!0;this.morphTargets=!1;this.setValues(c)}function Pd(c,a){ha.call(this);this.type="Points";this.geometry=void 0!==c?c:new ka;this.material=void 0!==a?a:new Rb;this.updateMorphTargets()}function vh(c,a,b,d,e,f,g){var h=wh.distanceSqToPoint(c);h<b&&(b=new w,wh.closestPointToPoint(c,b),b.applyMatrix4(d),c=e.ray.origin.distanceTo(b),c<e.near||c>e.far||f.push({distance:c,distanceToRay:Math.sqrt(h),point:b,index:a,face:null,object:g}))}function xh(c,a,b,d,
e,f,g,h,k){function l(){m.needsUpdate=!0;c.requestVideoFrameCallback(l)}Oa.call(this,c,a,b,d,e,f,g,h,k);this.format=void 0!==g?g:1022;this.minFilter=void 0!==f?f:1006;this.magFilter=void 0!==e?e:1006;this.generateMipmaps=!1;var m=this;"requestVideoFrameCallback"in c&&c.requestVideoFrameCallback(l)}function Qd(c,a,b,d,e,f,g,h,k,l,m,n){Oa.call(this,null,f,g,h,k,l,d,e,m,n);this.image={width:a,height:b};this.mipmaps=c;this.generateMipmaps=this.flipY=!1}function Te(c,a,b,d,e,f,g,h,k){Oa.call(this,c,a,
b,d,e,f,g,h,k);this.needsUpdate=!0}function Ue(c,a,b,d,e,f,g,h,k,l){l=void 0!==l?l:1026;if(1026!==l&&1027!==l)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===b&&1026===l&&(b=1012);void 0===b&&1027===l&&(b=1020);Oa.call(this,null,d,e,f,g,h,l,b,k);this.image={width:c,height:a};this.magFilter=void 0!==g?g:1003;this.minFilter=void 0!==h?h:1003;this.generateMipmaps=this.flipY=!1}function Rd(c){ka.call(this);this.type="WireframeGeometry";var a=[],
b=[0,0],d={},e=["a","b","c"];if(c&&c.isGeometry){for(var f=c.faces,g=0,h=f.length;g<h;g++)for(var k=f[g],l=0;3>l;l++){var m=k[e[l]],n=k[e[(l+1)%3]];b[0]=Math.min(m,n);b[1]=Math.max(m,n);m=b[0]+","+b[1];void 0===d[m]&&(d[m]={index1:b[0],index2:b[1]})}for(var p in d)b=d[p],f=c.vertices[b.index1],a.push(f.x,f.y,f.z),f=c.vertices[b.index2],a.push(f.x,f.y,f.z)}else if(c&&c.isBufferGeometry)if(p=new w,null!==c.index){e=c.attributes.position;g=c.index;c=c.groups;0===c.length&&(c=[{start:0,count:g.count,
materialIndex:0}]);h=0;for(k=c.length;h<k;++h)for(m=c[h],l=n=m.start,m=n+m.count;l<m;l+=3)for(n=0;3>n;n++){var t=g.getX(l+n),q=g.getX(l+(n+1)%3);b[0]=Math.min(t,q);b[1]=Math.max(t,q);t=b[0]+","+b[1];void 0===d[t]&&(d[t]={index1:b[0],index2:b[1]})}for(f in d)b=d[f],p.fromBufferAttribute(e,b.index1),a.push(p.x,p.y,p.z),p.fromBufferAttribute(e,b.index2),a.push(p.x,p.y,p.z)}else for(d=c.attributes.position,b=0,f=d.count/3;b<f;b++)for(c=0;3>c;c++)p.fromBufferAttribute(d,3*b+c),a.push(p.x,p.y,p.z),p.fromBufferAttribute(d,
3*b+(c+1)%3),a.push(p.x,p.y,p.z);this.setAttribute("position",new ea(a,3))}function Ve(c,a,b){sa.call(this);this.type="ParametricGeometry";this.parameters={func:c,slices:a,stacks:b};this.fromBufferGeometry(new Sd(c,a,b));this.mergeVertices()}function Sd(c,a,b){ka.call(this);this.type="ParametricBufferGeometry";this.parameters={func:c,slices:a,stacks:b};var d=[],e=[],f=[],g=[],h=new w,k=new w,l=new w,m=new w,n=new w;3>c.length&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");
for(var p=a+1,t=0;t<=b;t++)for(var q=t/b,v=0;v<=a;v++){var u=v/a;c(u,q,k);e.push(k.x,k.y,k.z);0<=u-1E-5?(c(u-1E-5,q,l),m.subVectors(k,l)):(c(u+1E-5,q,l),m.subVectors(l,k));0<=q-1E-5?(c(u,q-1E-5,l),n.subVectors(k,l)):(c(u,q+1E-5,l),n.subVectors(l,k));h.crossVectors(m,n).normalize();f.push(h.x,h.y,h.z);g.push(u,q)}for(c=0;c<b;c++)for(h=0;h<a;h++)k=c*p+h+1,l=(c+1)*p+h+1,m=(c+1)*p+h,d.push(c*p+h,k,m),d.push(k,l,m);this.setIndex(d);this.setAttribute("position",new ea(e,3));this.setAttribute("normal",new ea(f,
3));this.setAttribute("uv",new ea(g,2))}function We(c,a,b,d){sa.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:c,indices:a,radius:b,detail:d};this.fromBufferGeometry(new zb(c,a,b,d));this.mergeVertices()}function zb(c,a,b,d){function e(l){h.push(l.x,l.y,l.z)}function f(l,m){l*=3;m.x=c[l+0];m.y=c[l+1];m.z=c[l+2]}function g(l,m,n,p){0>p&&1===l.x&&(k[m]=l.x-1);0===n.x&&0===n.z&&(k[m]=p/2/Math.PI+.5)}ka.call(this);this.type="PolyhedronBufferGeometry";this.parameters={vertices:c,indices:a,
radius:b,detail:d};b=b||1;d=d||0;var h=[],k=[];(function(l){for(var m=new w,n=new w,p=new w,t=0;t<a.length;t+=3){f(a[t+0],m);f(a[t+1],n);f(a[t+2],p);for(var q=m,v=n,u=p,A=Math.pow(2,l),B=[],D=0;D<=A;D++){B[D]=[];for(var G=q.clone().lerp(u,D/A),I=v.clone().lerp(u,D/A),E=A-D,H=0;H<=E;H++)B[D][H]=0===H&&D===A?G:G.clone().lerp(I,H/E)}for(q=0;q<A;q++)for(v=0;v<2*(A-q)-1;v++)u=Math.floor(v/2),0===v%2?(e(B[q][u+1]),e(B[q+1][u]),e(B[q][u])):(e(B[q][u+1]),e(B[q+1][u+1]),e(B[q+1][u]))}})(d);(function(l){for(var m=
new w,n=0;n<h.length;n+=3)m.x=h[n+0],m.y=h[n+1],m.z=h[n+2],m.normalize().multiplyScalar(l),h[n+0]=m.x,h[n+1]=m.y,h[n+2]=m.z})(b);(function(){for(var l=new w,m=0;m<h.length;m+=3)l.x=h[m+0],l.y=h[m+1],l.z=h[m+2],k.push(Math.atan2(l.z,-l.x)/2/Math.PI+.5,1-(Math.atan2(-l.y,Math.sqrt(l.x*l.x+l.z*l.z))/Math.PI+.5));l=new w;m=new w;for(var n=new w,p=new w,t=new L,q=new L,v=new L,u=0,A=0;u<h.length;u+=9,A+=6){l.set(h[u+0],h[u+1],h[u+2]);m.set(h[u+3],h[u+4],h[u+5]);n.set(h[u+6],h[u+7],h[u+8]);t.set(k[A+0],
k[A+1]);q.set(k[A+2],k[A+3]);v.set(k[A+4],k[A+5]);p.copy(l).add(m).add(n).divideScalar(3);var B=Math.atan2(p.z,-p.x);g(t,A+0,l,B);g(q,A+2,m,B);g(v,A+4,n,B)}for(l=0;l<k.length;l+=6)m=k[l+0],n=k[l+2],p=k[l+4],t=Math.min(m,n,p),.9<Math.max(m,n,p)&&.1>t&&(.2>m&&(k[l+0]+=1),.2>n&&(k[l+2]+=1),.2>p&&(k[l+4]+=1))})();this.setAttribute("position",new ea(h,3));this.setAttribute("normal",new ea(h.slice(),3));this.setAttribute("uv",new ea(k,2));0===d?this.computeVertexNormals():this.normalizeNormals()}function Xe(c,
a){sa.call(this);this.type="TetrahedronGeometry";this.parameters={radius:c,detail:a};this.fromBufferGeometry(new Td(c,a));this.mergeVertices()}function Td(c,a){zb.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],c,a);this.type="TetrahedronBufferGeometry";this.parameters={radius:c,detail:a}}function Ye(c,a){sa.call(this);this.type="OctahedronGeometry";this.parameters={radius:c,detail:a};this.fromBufferGeometry(new fd(c,a));this.mergeVertices()}function fd(c,a){zb.call(this,[1,0,
0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],c,a);this.type="OctahedronBufferGeometry";this.parameters={radius:c,detail:a}}function Ze(c,a){sa.call(this);this.type="IcosahedronGeometry";this.parameters={radius:c,detail:a};this.fromBufferGeometry(new Ud(c,a));this.mergeVertices()}function Ud(c,a){var b=(1+Math.sqrt(5))/2;zb.call(this,[-1,b,0,1,b,0,-1,-b,0,1,-b,0,0,-1,b,0,1,b,0,-1,-b,0,1,-b,b,0,-1,b,0,1,-b,0,-1,-b,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,
9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],c,a);this.type="IcosahedronBufferGeometry";this.parameters={radius:c,detail:a}}function $e(c,a){sa.call(this);this.type="DodecahedronGeometry";this.parameters={radius:c,detail:a};this.fromBufferGeometry(new Vd(c,a));this.mergeVertices()}function Vd(c,a){var b=(1+Math.sqrt(5))/2,d=1/b;zb.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-b,0,-d,b,0,d,-b,0,d,b,-d,-b,0,-d,b,0,d,-b,0,
d,b,0,-b,0,-d,b,0,-d,-b,0,d,b,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],c,a);this.type="DodecahedronBufferGeometry";this.parameters={radius:c,detail:a}}function af(c,a,b,d,e,f){sa.call(this);this.type="TubeGeometry";this.parameters={path:c,tubularSegments:a,radius:b,radialSegments:d,
closed:e};void 0!==f&&console.warn("THREE.TubeGeometry: taper has been removed.");c=new gd(c,a,b,d,e);this.tangents=c.tangents;this.normals=c.normals;this.binormals=c.binormals;this.fromBufferGeometry(c);this.mergeVertices()}function gd(c,a,b,d,e){function f(v){m=c.getPointAt(v/a,m);var u=g.normals[v];v=g.binormals[v];for(var A=0;A<=d;A++){var B=A/d*Math.PI*2,D=Math.sin(B);B=-Math.cos(B);k.x=B*u.x+D*v.x;k.y=B*u.y+D*v.y;k.z=B*u.z+D*v.z;k.normalize();p.push(k.x,k.y,k.z);h.x=m.x+b*k.x;h.y=m.y+b*k.y;
h.z=m.z+b*k.z;n.push(h.x,h.y,h.z)}}ka.call(this);this.type="TubeBufferGeometry";this.parameters={path:c,tubularSegments:a,radius:b,radialSegments:d,closed:e};a=a||64;b=b||1;d=d||8;e=e||!1;var g=c.computeFrenetFrames(a,e);this.tangents=g.tangents;this.normals=g.normals;this.binormals=g.binormals;var h=new w,k=new w,l=new L,m=new w,n=[],p=[],t=[],q=[];(function(){for(var v=0;v<a;v++)f(v);f(!1===e?a:0);for(v=0;v<=a;v++)for(var u=0;u<=d;u++)l.x=v/a,l.y=u/d,t.push(l.x,l.y);for(v=1;v<=a;v++)for(u=1;u<=
d;u++){var A=(d+1)*v+(u-1),B=(d+1)*v+u,D=(d+1)*(v-1)+u;q.push((d+1)*(v-1)+(u-1),A,D);q.push(A,B,D)}})();this.setIndex(q);this.setAttribute("position",new ea(n,3));this.setAttribute("normal",new ea(p,3));this.setAttribute("uv",new ea(t,2))}function bf(c,a,b,d,e,f,g){sa.call(this);this.type="TorusKnotGeometry";this.parameters={radius:c,tube:a,tubularSegments:b,radialSegments:d,p:e,q:f};void 0!==g&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");
this.fromBufferGeometry(new Wd(c,a,b,d,e,f));this.mergeVertices()}function Wd(c,a,b,d,e,f){function g(E,H,M,F,K){var P=Math.sin(E);H=M/H*E;M=Math.cos(H);K.x=F*(2+M)*.5*Math.cos(E);K.y=F*(2+M)*P*.5;K.z=F*Math.sin(H)*.5}ka.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:c,tube:a,tubularSegments:b,radialSegments:d,p:e,q:f};c=c||1;a=a||.4;b=Math.floor(b)||64;d=Math.floor(d)||8;e=e||2;f=f||3;for(var h=[],k=[],l=[],m=[],n=new w,p=new w,t=new w,q=new w,v=new w,u=new w,A=new w,B=0;B<=
b;++B){var D=B/b*e*Math.PI*2;g(D,e,f,c,t);g(D+.01,e,f,c,q);u.subVectors(q,t);A.addVectors(q,t);v.crossVectors(u,A);A.crossVectors(v,u);v.normalize();A.normalize();for(D=0;D<=d;++D){var G=D/d*Math.PI*2,I=-a*Math.cos(G);G=a*Math.sin(G);n.x=t.x+(I*A.x+G*v.x);n.y=t.y+(I*A.y+G*v.y);n.z=t.z+(I*A.z+G*v.z);k.push(n.x,n.y,n.z);p.subVectors(n,t).normalize();l.push(p.x,p.y,p.z);m.push(B/b);m.push(D/d)}}for(c=1;c<=b;c++)for(a=1;a<=d;a++)e=(d+1)*c+(a-1),f=(d+1)*c+a,n=(d+1)*(c-1)+a,h.push((d+1)*(c-1)+(a-1),e,n),
h.push(e,f,n);this.setIndex(h);this.setAttribute("position",new ea(k,3));this.setAttribute("normal",new ea(l,3));this.setAttribute("uv",new ea(m,2))}function cf(c,a,b,d,e){sa.call(this);this.type="TorusGeometry";this.parameters={radius:c,tube:a,radialSegments:b,tubularSegments:d,arc:e};this.fromBufferGeometry(new Xd(c,a,b,d,e));this.mergeVertices()}function Xd(c,a,b,d,e){ka.call(this);this.type="TorusBufferGeometry";this.parameters={radius:c,tube:a,radialSegments:b,tubularSegments:d,arc:e};c=c||1;
a=a||.4;b=Math.floor(b)||8;d=Math.floor(d)||6;e=e||2*Math.PI;for(var f=[],g=[],h=[],k=[],l=new w,m=new w,n=new w,p=0;p<=b;p++)for(var t=0;t<=d;t++){var q=t/d*e,v=p/b*Math.PI*2;m.x=(c+a*Math.cos(v))*Math.cos(q);m.y=(c+a*Math.cos(v))*Math.sin(q);m.z=a*Math.sin(v);g.push(m.x,m.y,m.z);l.x=c*Math.cos(q);l.y=c*Math.sin(q);n.subVectors(m,l).normalize();h.push(n.x,n.y,n.z);k.push(t/d);k.push(p/b)}for(c=1;c<=b;c++)for(a=1;a<=d;a++)e=(d+1)*(c-1)+a-1,l=(d+1)*(c-1)+a,m=(d+1)*c+a,f.push((d+1)*c+a-1,e,m),f.push(e,
l,m);this.setIndex(f);this.setAttribute("position",new ea(g,3));this.setAttribute("normal",new ea(h,3));this.setAttribute("uv",new ea(k,2))}function bj(c,a,b,d,e){for(var f,g=0,h=a,k=b-d;h<b;h+=d)g+=(c[k]-c[h])*(c[h+1]+c[k+1]),k=h;if(e===0<g)for(e=a;e<b;e+=d)f=cj(e,c[e],c[e+1],f);else for(e=b-d;e>=a;e-=d)f=cj(e,c[e],c[e+1],f);f&&ag(f,f.next)&&(df(f),f=f.next);return f}function Mc(c,a){if(!c)return c;a||(a=c);do{var b=!1;if(c.steiner||!ag(c,c.next)&&0!==ab(c.prev,c,c.next))c=c.next;else{df(c);c=a=
c.prev;if(c===c.next)break;b=!0}}while(b||c!==a);return a}function ef(c,a,b,d,e,f,g){if(c){if(!g&&f){var h=c,k=h;do null===k.z&&(k.z=yh(k.x,k.y,d,e,f)),k.prevZ=k.prev,k=k.nextZ=k.next;while(k!==h);k.prevZ.nextZ=null;k.prevZ=null;h=k;var l,m,n,p,t=1;do{k=h;var q=h=null;for(m=0;k;){m++;var v=k;for(l=n=0;l<t&&(n++,v=v.nextZ,v);l++);for(p=t;0<n||0<p&&v;)0!==n&&(0===p||!v||k.z<=v.z)?(l=k,k=k.nextZ,n--):(l=v,v=v.nextZ,p--),q?q.nextZ=l:h=l,l.prevZ=q,q=l;k=v}q.nextZ=null;t*=2}while(1<m)}for(h=c;c.prev!==
c.next;){k=c.prev;v=c.next;if(f)q=Fl(c,d,e,f);else a:if(q=c,m=q.prev,n=q,t=q.next,0<=ab(m,n,t))q=!1;else{for(l=q.next.next;l!==q.prev;){if(Yd(m.x,m.y,n.x,n.y,t.x,t.y,l.x,l.y)&&0<=ab(l.prev,l,l.next)){q=!1;break a}l=l.next}q=!0}if(q)a.push(k.i/b),a.push(c.i/b),a.push(v.i/b),df(c),h=c=v.next;else if(c=v,c===h){if(!g)ef(Mc(c),a,b,d,e,f,1);else if(1===g){c=Mc(c);g=a;h=b;k=c;do v=k.prev,q=k.next.next,!ag(v,q)&&dj(v,k,k.next,q)&&ff(v,q)&&ff(q,v)&&(g.push(v.i/h),g.push(k.i/h),g.push(q.i/h),df(k),df(k.next),
k=c=q),k=k.next;while(k!==c);c=Mc(k);ef(c,a,b,d,e,f,2)}else if(2===g)a:{g=c;do{for(h=g.next.next;h!==g.prev;){if(k=g.i!==h.i){k=g;v=h;if(q=k.next.i!==v.i&&k.prev.i!==v.i){b:{q=k;do{if(q.i!==k.i&&q.next.i!==k.i&&q.i!==v.i&&q.next.i!==v.i&&dj(q,q.next,k,v)){q=!0;break b}q=q.next}while(q!==k);q=!1}q=!q}if(q){if(q=ff(k,v)&&ff(v,k)){q=k;m=!1;n=(k.x+v.x)/2;t=(k.y+v.y)/2;do q.y>t!==q.next.y>t&&q.next.y!==q.y&&n<(q.next.x-q.x)*(t-q.y)/(q.next.y-q.y)+q.x&&(m=!m),q=q.next;while(q!==k);q=m}q=q&&(ab(k.prev,k,
v.prev)||ab(k,v.prev,v))||ag(k,v)&&0<ab(k.prev,k,k.next)&&0<ab(v.prev,v,v.next)}k=q}if(k){c=ej(g,h);g=Mc(g,g.next);c=Mc(c,c.next);ef(g,a,b,d,e,f);ef(c,a,b,d,e,f);break a}h=h.next}g=g.next}while(g!==c)}break}}}}function Fl(c,a,b,d){var e=c.prev,f=c.next;if(0<=ab(e,c,f))return!1;var g=e.x>c.x?e.x>f.x?e.x:f.x:c.x>f.x?c.x:f.x,h=e.y>c.y?e.y>f.y?e.y:f.y:c.y>f.y?c.y:f.y,k=yh(e.x<c.x?e.x<f.x?e.x:f.x:c.x<f.x?c.x:f.x,e.y<c.y?e.y<f.y?e.y:f.y:c.y<f.y?c.y:f.y,a,b,d);a=yh(g,h,a,b,d);b=c.prevZ;for(d=c.nextZ;b&&
b.z>=k&&d&&d.z<=a;){if(b!==c.prev&&b!==c.next&&Yd(e.x,e.y,c.x,c.y,f.x,f.y,b.x,b.y)&&0<=ab(b.prev,b,b.next))return!1;b=b.prevZ;if(d!==c.prev&&d!==c.next&&Yd(e.x,e.y,c.x,c.y,f.x,f.y,d.x,d.y)&&0<=ab(d.prev,d,d.next))return!1;d=d.nextZ}for(;b&&b.z>=k;){if(b!==c.prev&&b!==c.next&&Yd(e.x,e.y,c.x,c.y,f.x,f.y,b.x,b.y)&&0<=ab(b.prev,b,b.next))return!1;b=b.prevZ}for(;d&&d.z<=a;){if(d!==c.prev&&d!==c.next&&Yd(e.x,e.y,c.x,c.y,f.x,f.y,d.x,d.y)&&0<=ab(d.prev,d,d.next))return!1;d=d.nextZ}return!0}function Gl(c,
a){return c.x-a.x}function Hl(c,a){var b=a,d=c.x,e=c.y,f=-Infinity;do{if(e<=b.y&&e>=b.next.y&&b.next.y!==b.y){var g=b.x+(e-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(g<=d&&g>f){f=g;if(g===d){if(e===b.y)return b;if(e===b.next.y)return b.next}var h=b.x<b.next.x?b:b.next}}b=b.next}while(b!==a);if(!h)return null;if(d===f)return h;a=h;g=h.x;var k=h.y,l=Infinity;b=h;do{if(d>=b.x&&b.x>=g&&d!==b.x&&Yd(e<k?d:f,e,g,k,e<k?f:d,e,b.x,b.y)){var m=Math.abs(e-b.y)/(d-b.x);var n;if((n=ff(b,c))&&!(n=m<l)&&(n=m===l)&&!(n=
b.x>h.x)&&(n=b.x===h.x)){n=h;var p=b;n=0>ab(n.prev,n,p.prev)&&0>ab(p.next,n,n.next)}n&&(h=b,l=m)}b=b.next}while(b!==a);return h}function yh(c,a,b,d,e){c=32767*(c-b)*e;a=32767*(a-d)*e;c=(c|c<<8)&16711935;c=(c|c<<4)&252645135;c=(c|c<<2)&858993459;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;return(c|c<<1)&1431655765|((a|a<<1)&1431655765)<<1}function Il(c){var a=c,b=c;do{if(a.x<b.x||a.x===b.x&&a.y<b.y)b=a;a=a.next}while(a!==c);return b}function Yd(c,a,b,d,e,f,g,h){return 0<=(e-g)*(a-
h)-(c-g)*(f-h)&&0<=(c-g)*(d-h)-(b-g)*(a-h)&&0<=(b-g)*(f-h)-(e-g)*(d-h)}function ab(c,a,b){return(a.y-c.y)*(b.x-a.x)-(a.x-c.x)*(b.y-a.y)}function ag(c,a){return c.x===a.x&&c.y===a.y}function dj(c,a,b,d){var e=bg(ab(c,a,b)),f=bg(ab(c,a,d)),g=bg(ab(b,d,c)),h=bg(ab(b,d,a));return e!==f&&g!==h||0===e&&cg(c,b,a)||0===f&&cg(c,d,a)||0===g&&cg(b,c,d)||0===h&&cg(b,a,d)?!0:!1}function cg(c,a,b){return a.x<=Math.max(c.x,b.x)&&a.x>=Math.min(c.x,b.x)&&a.y<=Math.max(c.y,b.y)&&a.y>=Math.min(c.y,b.y)}function bg(c){return 0<
c?1:0>c?-1:0}function ff(c,a){return 0>ab(c.prev,c,c.next)?0<=ab(c,a,c.next)&&0<=ab(c,c.prev,a):0>ab(c,a,c.prev)||0>ab(c,c.next,a)}function ej(c,a){var b=new zh(c.i,c.x,c.y),d=new zh(a.i,a.x,a.y),e=c.next,f=a.prev;c.next=a;a.prev=c;b.next=e;e.prev=b;d.next=b;b.prev=d;f.next=d;d.prev=f;return d}function cj(c,a,b,d){c=new zh(c,a,b);d?(c.next=d.next,c.prev=d,d.next.prev=c,d.next=c):(c.prev=c,c.next=c);return c}function df(c){c.next.prev=c.prev;c.prev.next=c.next;c.prevZ&&(c.prevZ.nextZ=c.nextZ);c.nextZ&&
(c.nextZ.prevZ=c.prevZ)}function zh(c,a,b){this.i=c;this.x=a;this.y=b;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function fj(c){var a=c.length;2<a&&c[a-1].equals(c[0])&&c.pop()}function gj(c,a){for(var b=0;b<a.length;b++)c.push(a[b].x),c.push(a[b].y)}function hd(c,a){sa.call(this);this.type="ExtrudeGeometry";this.parameters={shapes:c,options:a};this.fromBufferGeometry(new bc(c,a));this.mergeVertices()}function bc(c,a){function b(k){function l(U,la,wa){la||console.error("THREE.ExtrudeGeometry: vec does not exist");
return la.clone().multiplyScalar(wa).add(U)}function m(U,la,wa){var R=U.x-la.x;var qa=U.y-la.y;var Ea=wa.x-U.x;var Ca=wa.y-U.y,Ka=R*R+qa*qa;if(Math.abs(R*Ca-qa*Ea)>Number.EPSILON){var Ra=Math.sqrt(Ka),kb=Math.sqrt(Ea*Ea+Ca*Ca);Ka=la.x-qa/Ra;la=la.y+R/Ra;Ca=((wa.x-Ca/kb-Ka)*Ca-(wa.y+Ea/kb-la)*Ea)/(R*Ca-qa*Ea);Ea=Ka+R*Ca-U.x;R=la+qa*Ca-U.y;qa=Ea*Ea+R*R;if(2>=qa)return new L(Ea,R);qa=Math.sqrt(qa/2)}else U=!1,R>Number.EPSILON?Ea>Number.EPSILON&&(U=!0):R<-Number.EPSILON?Ea<-Number.EPSILON&&(U=!0):Math.sign(qa)===
Math.sign(Ca)&&(U=!0),U?(Ea=-qa,qa=Math.sqrt(Ka)):(Ea=R,R=qa,qa=Math.sqrt(Ka/2));return new L(Ea/qa,R/qa)}function n(U,la){for(var wa=U.length;0<=--wa;){var R=wa,qa=wa-1;0>qa&&(qa=U.length-1);for(var Ea=0,Ca=B+2*M;Ea<Ca;Ea++){var Ka=fb*Ea,Ra=fb*(Ea+1),kb=la+qa+Ka,mc=la+qa+Ra;Ra=la+R+Ra;q(la+R+Ka);q(kb);q(Ra);q(kb);q(mc);q(Ra);Ka=e.length/3;Ka=K.generateSideWallUV(d,e,Ka-6,Ka-3,Ka-2,Ka-1);v(Ka[0]);v(Ka[1]);v(Ka[3]);v(Ka[1]);v(Ka[2]);v(Ka[3])}}}function p(U,la,wa){u.push(U);u.push(la);u.push(wa)}function t(U,
la,wa){q(U);q(la);q(wa);U=e.length/3;U=K.generateTopUV(d,e,U-3,U-2,U-1);v(U[0]);v(U[1]);v(U[2])}function q(U){e.push(u[3*U]);e.push(u[3*U+1]);e.push(u[3*U+2])}function v(U){f.push(U.x);f.push(U.y)}var u=[],A=void 0!==a.curveSegments?a.curveSegments:12,B=void 0!==a.steps?a.steps:1,D=void 0!==a.depth?a.depth:100,G=void 0!==a.bevelEnabled?a.bevelEnabled:!0,I=void 0!==a.bevelThickness?a.bevelThickness:6,E=void 0!==a.bevelSize?a.bevelSize:I-2,H=void 0!==a.bevelOffset?a.bevelOffset:0,M=void 0!==a.bevelSegments?
a.bevelSegments:3,F=a.extrudePath,K=void 0!==a.UVGenerator?a.UVGenerator:Jl;void 0!==a.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),D=a.amount);var P=!1;if(F){var V=F.getSpacedPoints(B);P=!0;G=!1;var ia=F.computeFrenetFrames(B,!1);var W=new w;var aa=new w;var Z=new w}G||(H=E=I=M=0);k=k.extractPoints(A);F=k.shape;var ja=k.holes;if(!nc.isClockWise(F))for(F=F.reverse(),k=0,A=ja.length;k<A;k++){var Aa=ja[k];nc.isClockWise(Aa)&&(ja[k]=Aa.reverse())}var Xa=nc.triangulateShape(F,
ja),bb=F;k=0;for(A=ja.length;k<A;k++)F=F.concat(ja[k]);var fb=F.length,z=Xa.length;k=[];A=0;Aa=bb.length;for(var C=Aa-1,y=A+1;A<Aa;A++,C++,y++)C===Aa&&(C=0),y===Aa&&(y=0),k[A]=m(bb[A],bb[C],bb[y]);A=[];Aa=k.concat();y=0;for(var Q=ja.length;y<Q;y++){var T=ja[y];C=[];for(var ba=0,X=T.length,ta=X-1,va=ba+1;ba<X;ba++,ta++,va++)ta===X&&(ta=0),va===X&&(va=0),C[ba]=m(T[ba],T[ta],T[va]);A.push(C);Aa=Aa.concat(C)}for(y=0;y<M;y++){C=y/M;Q=I*Math.cos(C*Math.PI/2);T=E*Math.sin(C*Math.PI/2)+H;C=0;for(ba=bb.length;C<
ba;C++)X=l(bb[C],k[C],T),p(X.x,X.y,-Q);ba=0;for(X=ja.length;ba<X;ba++){ta=ja[ba];C=A[ba];va=0;for(var ya=ta.length;va<ya;va++){var Pa=l(ta[va],C[va],T);p(Pa.x,Pa.y,-Q)}}}C=E+H;for(y=0;y<fb;y++)Q=G?l(F[y],Aa[y],C):F[y],P?(aa.copy(ia.normals[0]).multiplyScalar(Q.x),W.copy(ia.binormals[0]).multiplyScalar(Q.y),Z.copy(V[0]).add(aa).add(W),p(Z.x,Z.y,Z.z)):p(Q.x,Q.y,0);for(y=1;y<=B;y++)for(Q=0;Q<fb;Q++)T=G?l(F[Q],Aa[Q],C):F[Q],P?(aa.copy(ia.normals[y]).multiplyScalar(T.x),W.copy(ia.binormals[y]).multiplyScalar(T.y),
Z.copy(V[y]).add(aa).add(W),p(Z.x,Z.y,Z.z)):p(T.x,T.y,D/B*y);for(ia=M-1;0<=ia;ia--){aa=ia/M;W=I*Math.cos(aa*Math.PI/2);aa=E*Math.sin(aa*Math.PI/2)+H;Z=0;for(F=bb.length;Z<F;Z++)Aa=l(bb[Z],k[Z],aa),p(Aa.x,Aa.y,D+W);Z=0;for(F=ja.length;Z<F;Z++)for(Aa=ja[Z],C=A[Z],y=0,Q=Aa.length;y<Q;y++)T=l(Aa[y],C[y],aa),P?p(T.x,T.y+V[B-1].y,V[B-1].x+W):p(T.x,T.y,D+W)}(function(){var U=e.length/3;if(G){for(var la=0*fb,wa=0;wa<z;wa++){var R=Xa[wa];t(R[2]+la,R[1]+la,R[0]+la)}la=fb*(B+2*M);for(wa=0;wa<z;wa++)R=Xa[wa],
t(R[0]+la,R[1]+la,R[2]+la)}else{for(la=0;la<z;la++)wa=Xa[la],t(wa[2],wa[1],wa[0]);for(la=0;la<z;la++)wa=Xa[la],t(wa[0]+fb*B,wa[1]+fb*B,wa[2]+fb*B)}d.addGroup(U,e.length/3-U,0)})();(function(){var U=e.length/3,la=0;n(bb,la);la+=bb.length;for(var wa=0,R=ja.length;wa<R;wa++){var qa=ja[wa];n(qa,la);la+=qa.length}d.addGroup(U,e.length/3-U,1)})()}ka.call(this);this.type="ExtrudeBufferGeometry";this.parameters={shapes:c,options:a};c=Array.isArray(c)?c:[c];for(var d=this,e=[],f=[],g=0,h=c.length;g<h;g++)b(c[g]);
this.setAttribute("position",new ea(e,3));this.setAttribute("uv",new ea(f,2));this.computeVertexNormals()}function hj(c,a,b){b.shapes=[];if(Array.isArray(c))for(var d=0,e=c.length;d<e;d++)b.shapes.push(c[d].uuid);else b.shapes.push(c.uuid);void 0!==a.extrudePath&&(b.options.extrudePath=a.extrudePath.toJSON());return b}function gf(c,a){sa.call(this);this.type="TextGeometry";this.parameters={text:c,parameters:a};this.fromBufferGeometry(new Zd(c,a));this.mergeVertices()}function Zd(c,a){a=a||{};var b=
a.font;if(!b||!b.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new sa;c=b.generateShapes(c,a.size);a.depth=void 0!==a.height?a.height:50;void 0===a.bevelThickness&&(a.bevelThickness=10);void 0===a.bevelSize&&(a.bevelSize=8);void 0===a.bevelEnabled&&(a.bevelEnabled=!1);bc.call(this,c,a);this.type="TextBufferGeometry"}function hf(c,a,b,d,e,f,g){sa.call(this);this.type="SphereGeometry";this.parameters={radius:c,widthSegments:a,heightSegments:b,phiStart:d,
phiLength:e,thetaStart:f,thetaLength:g};this.fromBufferGeometry(new id(c,a,b,d,e,f,g));this.mergeVertices()}function id(c,a,b,d,e,f,g){ka.call(this);this.type="SphereBufferGeometry";this.parameters={radius:c,widthSegments:a,heightSegments:b,phiStart:d,phiLength:e,thetaStart:f,thetaLength:g};c=c||1;a=Math.max(3,Math.floor(a)||8);b=Math.max(2,Math.floor(b)||6);d=void 0!==d?d:0;e=void 0!==e?e:2*Math.PI;f=void 0!==f?f:0;g=void 0!==g?g:Math.PI;for(var h=Math.min(f+g,Math.PI),k=0,l=[],m=new w,n=new w,p=
[],t=[],q=[],v=[],u=0;u<=b;u++){var A=[],B=u/b,D=0;0==u&&0==f?D=.5/a:u==b&&h==Math.PI&&(D=-.5/a);for(var G=0;G<=a;G++){var I=G/a;m.x=-c*Math.cos(d+I*e)*Math.sin(f+B*g);m.y=c*Math.cos(f+B*g);m.z=c*Math.sin(d+I*e)*Math.sin(f+B*g);t.push(m.x,m.y,m.z);n.copy(m).normalize();q.push(n.x,n.y,n.z);v.push(I+D,1-B);A.push(k++)}l.push(A)}for(c=0;c<b;c++)for(d=0;d<a;d++)e=l[c][d+1],g=l[c][d],k=l[c+1][d],m=l[c+1][d+1],(0!==c||0<f)&&p.push(e,g,m),(c!==b-1||h<Math.PI)&&p.push(g,k,m);this.setIndex(p);this.setAttribute("position",
new ea(t,3));this.setAttribute("normal",new ea(q,3));this.setAttribute("uv",new ea(v,2))}function jf(c,a,b,d,e,f){sa.call(this);this.type="RingGeometry";this.parameters={innerRadius:c,outerRadius:a,thetaSegments:b,phiSegments:d,thetaStart:e,thetaLength:f};this.fromBufferGeometry(new $d(c,a,b,d,e,f));this.mergeVertices()}function $d(c,a,b,d,e,f){ka.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:c,outerRadius:a,thetaSegments:b,phiSegments:d,thetaStart:e,thetaLength:f};c=c||.5;
a=a||1;e=void 0!==e?e:0;f=void 0!==f?f:2*Math.PI;b=void 0!==b?Math.max(3,b):8;d=void 0!==d?Math.max(1,d):1;var g=[],h=[],k=[],l=[],m=c;c=(a-c)/d;for(var n=new w,p=new L,t=0;t<=d;t++){for(var q=0;q<=b;q++){var v=e+q/b*f;n.x=m*Math.cos(v);n.y=m*Math.sin(v);h.push(n.x,n.y,n.z);k.push(0,0,1);p.x=(n.x/a+1)/2;p.y=(n.y/a+1)/2;l.push(p.x,p.y)}m+=c}for(a=0;a<d;a++)for(e=a*(b+1),f=0;f<b;f++)m=f+e,c=m+b+1,n=m+b+2,p=m+1,g.push(m,c,p),g.push(c,n,p);this.setIndex(g);this.setAttribute("position",new ea(h,3));this.setAttribute("normal",
new ea(k,3));this.setAttribute("uv",new ea(l,2))}function kf(c,a,b,d){sa.call(this);this.type="LatheGeometry";this.parameters={points:c,segments:a,phiStart:b,phiLength:d};this.fromBufferGeometry(new ae(c,a,b,d));this.mergeVertices()}function ae(c,a,b,d){ka.call(this);this.type="LatheBufferGeometry";this.parameters={points:c,segments:a,phiStart:b,phiLength:d};a=Math.floor(a)||12;b=b||0;d=d||2*Math.PI;d=xa.clamp(d,0,2*Math.PI);for(var e=[],f=[],g=[],h=1/a,k=new w,l=new L,m=0;m<=a;m++){var n=b+m*h*d,
p=Math.sin(n);n=Math.cos(n);for(var t=0;t<=c.length-1;t++)k.x=c[t].x*p,k.y=c[t].y,k.z=c[t].x*n,f.push(k.x,k.y,k.z),l.x=m/a,l.y=t/(c.length-1),g.push(l.x,l.y)}for(b=0;b<a;b++)for(h=0;h<c.length-1;h++)k=h+b*c.length,l=k+c.length,m=k+c.length+1,p=k+1,e.push(k,l,p),e.push(l,m,p);this.setIndex(e);this.setAttribute("position",new ea(f,3));this.setAttribute("uv",new ea(g,2));this.computeVertexNormals();if(d===2*Math.PI)for(d=this.attributes.normal.array,e=new w,f=new w,g=new w,a=a*c.length*3,h=b=0;b<c.length;b++,
h+=3)e.x=d[h+0],e.y=d[h+1],e.z=d[h+2],f.x=d[a+h+0],f.y=d[a+h+1],f.z=d[a+h+2],g.addVectors(e,f).normalize(),d[h+0]=d[a+h+0]=g.x,d[h+1]=d[a+h+1]=g.y,d[h+2]=d[a+h+2]=g.z}function jd(c,a){sa.call(this);this.type="ShapeGeometry";"object"===typeof a&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),a=a.curveSegments);this.parameters={shapes:c,curveSegments:a};this.fromBufferGeometry(new kd(c,a));this.mergeVertices()}function kd(c,a){function b(m){var n=e.length/3,p=m.extractPoints(a);
m=p.shape;var t=p.holes;!1===nc.isClockWise(m)&&(m=m.reverse());p=0;for(var q=t.length;p<q;p++){var v=t[p];!0===nc.isClockWise(v)&&(t[p]=v.reverse())}p=nc.triangulateShape(m,t);q=0;for(v=t.length;q<v;q++)m=m.concat(t[q]);t=0;for(q=m.length;t<q;t++)v=m[t],e.push(v.x,v.y,0),f.push(0,0,1),g.push(v.x,v.y);m=0;for(t=p.length;m<t;m++)q=p[m],d.push(q[0]+n,q[1]+n,q[2]+n),k+=3}ka.call(this);this.type="ShapeBufferGeometry";this.parameters={shapes:c,curveSegments:a};a=a||12;var d=[],e=[],f=[],g=[],h=0,k=0;if(!1===
Array.isArray(c))b(c);else for(var l=0;l<c.length;l++)b(c[l]),this.addGroup(h,k,l),h+=k,k=0;this.setIndex(d);this.setAttribute("position",new ea(e,3));this.setAttribute("normal",new ea(f,3));this.setAttribute("uv",new ea(g,2))}function ij(c,a){a.shapes=[];if(Array.isArray(c))for(var b=0,d=c.length;b<d;b++)a.shapes.push(c[b].uuid);else a.shapes.push(c.uuid);return a}function be(c,a){ka.call(this);this.type="EdgesGeometry";this.parameters={thresholdAngle:a};var b=[];a=Math.cos(xa.DEG2RAD*(void 0!==
a?a:1));var d=[0,0],e={},f=["a","b","c"];if(c.isBufferGeometry){var g=new sa;g.fromBufferGeometry(c)}else g=c.clone();g.mergeVertices();g.computeFaceNormals();c=g.vertices;g=g.faces;for(var h=0,k=g.length;h<k;h++)for(var l=g[h],m=0;3>m;m++){var n=l[f[m]];var p=l[f[(m+1)%3]];d[0]=Math.min(n,p);d[1]=Math.max(n,p);n=d[0]+","+d[1];void 0===e[n]?e[n]={index1:d[0],index2:d[1],face1:h,face2:void 0}:e[n].face2=h}for(n in e)if(d=e[n],void 0===d.face2||g[d.face1].normal.dot(g[d.face2].normal)<=a)f=c[d.index1],
b.push(f.x,f.y,f.z),f=c[d.index2],b.push(f.x,f.y,f.z);this.setAttribute("position",new ea(b,3))}function ld(c,a,b,d,e,f,g,h){sa.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:c,radiusBottom:a,height:b,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};this.fromBufferGeometry(new oc(c,a,b,d,e,f,g,h));this.mergeVertices()}function oc(c,a,b,d,e,f,g,h){function k(B){for(var D=q,G=new L,I=new w,E=0,H=!0===B?c:a,M=!0===B?1:-1,F=1;F<=d;F++)n.push(0,u*M,0),p.push(0,
M,0),t.push(.5,.5),q++;F=q;for(var K=0;K<=d;K++){var P=K/d*h+g,V=Math.cos(P);P=Math.sin(P);I.x=H*P;I.y=u*M;I.z=H*V;n.push(I.x,I.y,I.z);p.push(0,M,0);G.x=.5*V+.5;G.y=.5*P*M+.5;t.push(G.x,G.y);q++}for(G=0;G<d;G++)I=D+G,H=F+G,!0===B?m.push(H,H+1,I):m.push(H+1,H,I),E+=3;l.addGroup(A,E,!0===B?1:2);A+=E}ka.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:c,radiusBottom:a,height:b,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};var l=this;c=void 0!==c?c:
1;a=void 0!==a?a:1;b=b||1;d=Math.floor(d)||8;e=Math.floor(e)||1;f=void 0!==f?f:!1;g=void 0!==g?g:0;h=void 0!==h?h:2*Math.PI;var m=[],n=[],p=[],t=[],q=0,v=[],u=b/2,A=0;(function(){for(var B=new w,D=new w,G=0,I=(a-c)/b,E=0;E<=e;E++){for(var H=[],M=E/e,F=M*(a-c)+c,K=0;K<=d;K++){var P=K/d,V=P*h+g,ia=Math.sin(V);V=Math.cos(V);D.x=F*ia;D.y=-M*b+u;D.z=F*V;n.push(D.x,D.y,D.z);B.set(ia,I,V).normalize();p.push(B.x,B.y,B.z);t.push(P,1-M);H.push(q++)}v.push(H)}for(B=0;B<d;B++)for(D=0;D<e;D++)I=v[D+1][B],E=v[D+
1][B+1],H=v[D][B+1],m.push(v[D][B],I,H),m.push(I,E,H),G+=6;l.addGroup(A,G,0);A+=G})();!1===f&&(0<c&&k(!0),0<a&&k(!1));this.setIndex(m);this.setAttribute("position",new ea(n,3));this.setAttribute("normal",new ea(p,3));this.setAttribute("uv",new ea(t,2))}function lf(c,a,b,d,e,f,g){ld.call(this,0,c,a,b,d,e,f,g);this.type="ConeGeometry";this.parameters={radius:c,height:a,radialSegments:b,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function mf(c,a,b,d,e,f,g){oc.call(this,0,c,a,b,d,e,f,g);
this.type="ConeBufferGeometry";this.parameters={radius:c,height:a,radialSegments:b,heightSegments:d,openEnded:e,thetaStart:f,thetaLength:g}}function nf(c,a,b,d){sa.call(this);this.type="CircleGeometry";this.parameters={radius:c,segments:a,thetaStart:b,thetaLength:d};this.fromBufferGeometry(new ce(c,a,b,d));this.mergeVertices()}function ce(c,a,b,d){ka.call(this);this.type="CircleBufferGeometry";this.parameters={radius:c,segments:a,thetaStart:b,thetaLength:d};c=c||1;a=void 0!==a?Math.max(3,a):8;b=void 0!==
b?b:0;d=void 0!==d?d:2*Math.PI;var e=[],f=[],g=[],h=[],k=new w,l=new L;f.push(0,0,0);g.push(0,0,1);h.push(.5,.5);for(var m=0,n=3;m<=a;m++,n+=3){var p=b+m/a*d;k.x=c*Math.cos(p);k.y=c*Math.sin(p);f.push(k.x,k.y,k.z);g.push(0,0,1);l.x=(f[n]/c+1)/2;l.y=(f[n+1]/c+1)/2;h.push(l.x,l.y)}for(c=1;c<=a;c++)e.push(c,c+1,0);this.setIndex(e);this.setAttribute("position",new ea(f,3));this.setAttribute("normal",new ea(g,3));this.setAttribute("uv",new ea(h,2))}function md(c){ra.call(this);this.type="ShadowMaterial";
this.color=new S(0);this.transparent=!0;this.setValues(c)}function pc(c){sb.call(this,c);this.type="RawShaderMaterial"}function cc(c){ra.call(this);this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new S(16777215);this.roughness=1;this.metalness=0;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new S(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;
this.normalScale=new L(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexTangents=this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(c)}function Nc(c){cc.call(this);this.defines={STANDARD:"",PHYSICAL:""};this.type="MeshPhysicalMaterial";
this.clearcoat=0;this.clearcoatMap=null;this.clearcoatRoughness=0;this.clearcoatRoughnessMap=null;this.clearcoatNormalScale=new L(1,1);this.clearcoatNormalMap=null;this.reflectivity=.5;this.sheen=null;this.transmission=0;this.transmissionMap=null;this.setValues(c)}function Oc(c){ra.call(this);this.type="MeshPhongMaterial";this.color=new S(16777215);this.specular=new S(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=
new S(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new L(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(c)}
function nd(c){ra.call(this);this.defines={TOON:""};this.type="MeshToonMaterial";this.color=new S(16777215);this.lightMap=this.gradientMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new S(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new L(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.alphaMap=null;this.wireframe=!1;this.wireframeLinewidth=
1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(c)}function od(c){ra.call(this);this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new L(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=this.morphTargets=this.skinning=this.fog=!1;this.setValues(c)}function pd(c){ra.call(this);
this.type="MeshLambertMaterial";this.color=new S(16777215);this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new S(0);this.emissiveIntensity=1;this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(c)}function qd(c){ra.call(this);
this.defines={MATCAP:""};this.type="MeshMatcapMaterial";this.color=new S(16777215);this.bumpMap=this.map=this.matcap=null;this.bumpScale=1;this.normalMap=null;this.normalMapType=0;this.normalScale=new L(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.alphaMap=null;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(c)}function rd(c){Ya.call(this);this.type="LineDashedMaterial";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(c)}function Hb(c,
a,b,d){this.parameterPositions=c;this._cachedIndex=0;this.resultBuffer=void 0!==d?d:new a.constructor(b);this.sampleValues=a;this.valueSize=b}function dg(c,a,b,d){Hb.call(this,c,a,b,d);this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function of(c,a,b,d){Hb.call(this,c,a,b,d)}function eg(c,a,b,d){Hb.call(this,c,a,b,d)}function lb(c,a,b,d){if(void 0===c)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===a||0===a.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+
c);this.name=c;this.times=Va.convertArray(a,this.TimeBufferType);this.values=Va.convertArray(b,this.ValueBufferType);this.setInterpolation(d||this.DefaultInterpolation)}function fg(c,a,b){lb.call(this,c,a,b)}function gg(c,a,b,d){lb.call(this,c,a,b,d)}function de(c,a,b,d){lb.call(this,c,a,b,d)}function hg(c,a,b,d){Hb.call(this,c,a,b,d)}function pf(c,a,b,d){lb.call(this,c,a,b,d)}function ig(c,a,b,d){lb.call(this,c,a,b,d)}function ee(c,a,b,d){lb.call(this,c,a,b,d)}function Mb(c,a,b,d){this.name=c;this.tracks=
b;this.duration=void 0!==a?a:-1;this.blendMode=void 0!==d?d:2500;this.uuid=xa.generateUUID();0>this.duration&&this.resetDuration()}function Kl(c){switch(c.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return de;case "vector":case "vector2":case "vector3":case "vector4":return ee;case "color":return gg;case "quaternion":return pf;case "bool":case "boolean":return fg;case "string":return ig}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+c);}function Ll(c){if(void 0===
c.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var a=Kl(c.type);if(void 0===c.times){var b=[],d=[];Va.flattenJSON(c.keys,b,d,"value");c.times=b;c.values=d}return void 0!==a.parse?a.parse(c):new a(c.name,c.times,c.values,c.interpolation)}function Ah(c,a,b){var d=this,e=!1,f=0,g=0,h=void 0,k=[];this.onStart=void 0;this.onLoad=c;this.onProgress=a;this.onError=b;this.itemStart=function(l){g++;if(!1===e&&void 0!==d.onStart)d.onStart(l,f,g);e=!0};this.itemEnd=function(l){f++;
if(void 0!==d.onProgress)d.onProgress(l,f,g);if(f===g&&(e=!1,void 0!==d.onLoad))d.onLoad()};this.itemError=function(l){if(void 0!==d.onError)d.onError(l)};this.resolveURL=function(l){return h?h(l):l};this.setURLModifier=function(l){h=l;return this};this.addHandler=function(l,m){k.push(l,m);return this};this.removeHandler=function(l){l=k.indexOf(l);-1!==l&&k.splice(l,2);return this};this.getHandler=function(l){for(var m=0,n=k.length;m<n;m+=2){var p=k[m],t=k[m+1];p.global&&(p.lastIndex=0);if(p.test(l))return t}return null}}
function Ma(c){this.manager=void 0!==c?c:jj;this.crossOrigin="anonymous";this.resourcePath=this.path="";this.requestHeader={}}function Nb(c){Ma.call(this,c)}function Bh(c){Ma.call(this,c)}function Ch(c){Ma.call(this,c)}function fe(c){Ma.call(this,c)}function jg(c){Ma.call(this,c)}function kg(c){Ma.call(this,c)}function lg(c){Ma.call(this,c)}function oa(){this.type="Curve";this.arcLengthDivisions=200}function Ib(c,a,b,d,e,f,g,h){oa.call(this);this.type="EllipseCurve";this.aX=c||0;this.aY=a||0;this.xRadius=
b||1;this.yRadius=d||1;this.aStartAngle=e||0;this.aEndAngle=f||2*Math.PI;this.aClockwise=g||!1;this.aRotation=h||0}function ge(c,a,b,d,e,f){Ib.call(this,c,a,b,b,d,e,f);this.type="ArcCurve"}function Dh(){var c=0,a=0,b=0,d=0;return{initCatmullRom:function(e,f,g,h,k){e=k*(g-e);h=k*(h-f);c=f;a=e;b=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},initNonuniformCatmullRom:function(e,f,g,h,k,l,m){e=((f-e)/k-(g-e)/(k+l)+(g-f)/l)*l;h=((g-f)/l-(h-f)/(l+m)+(h-g)/m)*l;c=f;a=e;b=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},calc:function(e){var f=
e*e;return c+a*e+b*f+d*f*e}}}function ob(c,a,b,d){oa.call(this);this.type="CatmullRomCurve3";this.points=c||[];this.closed=a||!1;this.curveType=b||"centripetal";this.tension=void 0!==d?d:.5}function kj(c,a,b,d,e){a=.5*(d-a);e=.5*(e-b);var f=c*c;return(2*b-2*d+a+e)*c*f+(-3*b+3*d-2*a-e)*f+a*c+b}function qf(c,a,b,d){var e=1-c;return e*e*a+2*(1-c)*c*b+c*c*d}function rf(c,a,b,d,e){var f=1-c,g=1-c;return f*f*f*a+3*g*g*c*b+3*(1-c)*c*c*d+c*c*c*e}function Sb(c,a,b,d){oa.call(this);this.type="CubicBezierCurve";
this.v0=c||new L;this.v1=a||new L;this.v2=b||new L;this.v3=d||new L}function dc(c,a,b,d){oa.call(this);this.type="CubicBezierCurve3";this.v0=c||new w;this.v1=a||new w;this.v2=b||new w;this.v3=d||new w}function Ab(c,a){oa.call(this);this.type="LineCurve";this.v1=c||new L;this.v2=a||new L}function Tb(c,a){oa.call(this);this.type="LineCurve3";this.v1=c||new w;this.v2=a||new w}function Ub(c,a,b){oa.call(this);this.type="QuadraticBezierCurve";this.v0=c||new L;this.v1=a||new L;this.v2=b||new L}function ec(c,
a,b){oa.call(this);this.type="QuadraticBezierCurve3";this.v0=c||new w;this.v1=a||new w;this.v2=b||new w}function Vb(c){oa.call(this);this.type="SplineCurve";this.points=c||[]}function qc(){oa.call(this);this.type="CurvePath";this.curves=[];this.autoClose=!1}function Wb(c){qc.call(this);this.type="Path";this.currentPoint=new L;c&&this.setFromPoints(c)}function Pc(c){Wb.call(this,c);this.uuid=xa.generateUUID();this.type="Shape";this.holes=[]}function Sa(c,a){ha.call(this);this.type="Light";this.color=
new S(c);this.intensity=void 0!==a?a:1;this.receiveShadow=void 0}function mg(c,a,b){Sa.call(this,c,b);this.type="HemisphereLight";this.castShadow=void 0;this.position.copy(ha.DefaultUp);this.updateMatrix();this.groundColor=new S(a)}function fc(c){this.camera=c;this.normalBias=this.bias=0;this.radius=1;this.mapSize=new L(512,512);this.mapPass=this.map=null;this.matrix=new da;this.autoUpdate=!0;this.needsUpdate=!1;this._frustum=new xb;this._frameExtents=new L(1,1);this._viewportCount=1;this._viewports=
[new ca(0,0,1,1)]}function Eh(){fc.call(this,new eb(50,1,.5,500))}function ng(c,a,b,d,e,f){Sa.call(this,c,a);this.type="SpotLight";this.position.copy(ha.DefaultUp);this.updateMatrix();this.target=new ha;Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(g){this.intensity=g/Math.PI}});this.distance=void 0!==b?b:0;this.angle=void 0!==d?d:Math.PI/3;this.penumbra=void 0!==e?e:0;this.decay=void 0!==f?f:1;this.shadow=new Eh}function Fh(){fc.call(this,new eb(90,
1,.5,500));this._frameExtents=new L(4,2);this._viewportCount=6;this._viewports=[new ca(2,1,1,1),new ca(0,1,1,1),new ca(3,1,1,1),new ca(1,1,1,1),new ca(3,0,1,1),new ca(1,0,1,1)];this._cubeDirections=[new w(1,0,0),new w(-1,0,0),new w(0,0,1),new w(0,0,-1),new w(0,1,0),new w(0,-1,0)];this._cubeUps=[new w(0,1,0),new w(0,1,0),new w(0,1,0),new w(0,1,0),new w(0,0,1),new w(0,0,-1)]}function og(c,a,b,d){Sa.call(this,c,a);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*
Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}});this.distance=void 0!==b?b:0;this.decay=void 0!==d?d:1;this.shadow=new Fh}function he(c,a,b,d,e,f){ac.call(this);this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=void 0!==c?c:-1;this.right=void 0!==a?a:1;this.top=void 0!==b?b:1;this.bottom=void 0!==d?d:-1;this.near=void 0!==e?e:.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()}function Gh(){fc.call(this,new he(-5,5,5,-5,.5,500))}function pg(c,a){Sa.call(this,c,a);
this.type="DirectionalLight";this.position.copy(ha.DefaultUp);this.updateMatrix();this.target=new ha;this.shadow=new Gh}function qg(c,a){Sa.call(this,c,a);this.type="AmbientLight";this.castShadow=void 0}function rg(c,a,b,d){Sa.call(this,c,a);this.type="RectAreaLight";this.width=void 0!==b?b:10;this.height=void 0!==d?d:10}function Ob(c,a){Sa.call(this,void 0,a);this.type="LightProbe";this.sh=void 0!==c?c:new pb}function sg(c){Ma.call(this,c);this.textures={}}function sf(){ka.call(this);this.type="InstancedBufferGeometry";
this.instanceCount=Infinity}function tg(c,a,b,d){"number"===typeof b&&(d=b,b=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument."));pa.call(this,c,a,b);this.meshPerAttribute=d||1}function ug(c){Ma.call(this,c)}function vg(c){Ma.call(this,c)}function Hh(c){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");
Ma.call(this,c);this.options={premultiplyAlpha:"none"}}function Ih(){this.type="ShapePath";this.color=new S;this.subPaths=[];this.currentPath=null}function Jh(c){this.type="Font";this.data=c}function Kh(c){Ma.call(this,c)}function wg(c){Ma.call(this,c)}function Lh(c,a,b){Ob.call(this,void 0,b);c=(new S).set(c);b=(new S).set(a);a=new w(c.r,c.g,c.b);c=new w(b.r,b.g,b.b);b=Math.sqrt(Math.PI);var d=b*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(c).multiplyScalar(b);this.sh.coefficients[1].copy(a).sub(c).multiplyScalar(d)}
function Mh(c,a){Ob.call(this,void 0,a);c=(new S).set(c);this.sh.coefficients[0].set(c.r,c.g,c.b).multiplyScalar(2*Math.sqrt(Math.PI))}function lj(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new eb;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new eb;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1;this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function Xb(){ha.call(this);this.type="AudioListener";
this.context=Nh.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null;this.timeDelta=0;this._clock=new ie}function Ja(c){ha.call(this);this.type="Audio";this.listener=c;this.context=c.context;this.gain=this.context.createGain();this.gain.connect(c.getInput());this.autoplay=!1;this.buffer=null;this.detune=0;this.loop=!1;this.offset=this.loopEnd=this.loopStart=0;this.duration=void 0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=
!0;this.source=null;this.sourceType="empty";this._progress=this._startedAt=0;this._connected=!1;this.filters=[]}function tb(c){Ja.call(this,c);this.panner=this.context.createPanner();this.panner.panningModel="HRTF";this.panner.connect(this.gain)}function Oh(c,a,b){this.binding=c;this.valueSize=b;switch(a){case "quaternion":c=this._slerp;a=this._slerpAdditive;var d=this._setAdditiveIdentityQuaternion;this.buffer=new Float64Array(6*b);this._workIndex=5;break;case "string":case "bool":a=c=this._select;
d=this._setAdditiveIdentityOther;this.buffer=Array(5*b);break;default:c=this._lerp,a=this._lerpAdditive,d=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*b)}this._mixBufferRegion=c;this._mixBufferRegionAdditive=a;this._setIdentity=d;this._origIndex=3;this._addIndex=4;this.referenceCount=this.useCount=this.cumulativeWeightAdditive=this.cumulativeWeight=0}function mj(c,a,b){b=b||qb.parseTrackName(a);this._targetGroup=c;this._bindings=c.subscribe_(a,b)}function qb(c,a,b){this.path=a;
this.parsedPath=b||qb.parseTrackName(a);this.node=qb.findNode(c,this.parsedPath.nodeName)||c;this.rootNode=c}function nj(){this.uuid=xa.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var c={};this._indicesByUUID=c;for(var a=0,b=arguments.length;a!==b;++a)c[arguments[a].uuid]=a;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var d=this;this.stats={objects:{get total(){return d._objects.length},get inUse(){return this.total-
d.nCachedObjects_}},get bindingsPerObject(){return d._bindings.length}}}function Ph(c){this._root=c;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1}function Qh(c,a,b){Gb.call(this,c,a);this.meshPerAttribute=b||1}function Rh(c,a,b,d,e){this.buffer=c;this.type=a;this.itemSize=b;this.elementSize=d;this.count=e;this.version=0}function Sh(c,a,b,d){this.ray=new Ta(c,a);this.near=b||0;this.far=d||Infinity;this.camera=null;this.layers=new $b;this.params={Mesh:{},Line:{threshold:1},
LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})}function oj(c,a){return c.distance-a.distance}function Th(c,a,b,d){c.layers.test(a.layers)&&c.raycast(a,b);if(!0===d){c=c.children;d=0;for(var e=c.length;d<e;d++)Th(c[d],a,b,!0)}}function tf(c){ha.call(this);this.material=c;this.render=function(){};this.hasUvs=this.hasColors=this.hasNormals=
this.hasPositions=!1;this.uvArray=this.colorArray=this.normalArray=this.positionArray=null;this.count=0}function je(c,a){ha.call(this);this.light=c;this.light.updateMatrixWorld();this.matrix=c.matrixWorld;this.matrixAutoUpdate=!1;this.color=a;c=new ka;a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var b=0,d=1;32>b;b++,d++){var e=b/32*Math.PI*2,f=d/32*Math.PI*2;a.push(Math.cos(e),Math.sin(e),1,Math.cos(f),Math.sin(f),1)}c.setAttribute("position",new ea(a,3));a=new Ya({fog:!1,
toneMapped:!1});this.cone=new Za(c,a);this.add(this.cone);this.update()}function ke(c){for(var a=pj(c),b=new ka,d=[],e=[],f=new S(0,0,1),g=new S(0,1,0),h=0;h<a.length;h++){var k=a[h];k.parent&&k.parent.isBone&&(d.push(0,0,0),d.push(0,0,0),e.push(f.r,f.g,f.b),e.push(g.r,g.g,g.b))}b.setAttribute("position",new ea(d,3));b.setAttribute("color",new ea(e,3));d=new Ya({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});Za.call(this,b,d);this.type="SkeletonHelper";this.isSkeletonHelper=
!0;this.root=c;this.bones=a;this.matrix=c.matrixWorld;this.matrixAutoUpdate=!1}function pj(c){var a=[];c&&c.isBone&&a.push(c);for(var b=0;b<c.children.length;b++)a.push.apply(a,pj(c.children[b]));return a}function le(c,a,b){a=new id(a,4,2);var d=new Kb({wireframe:!0,fog:!1,toneMapped:!1});Qa.call(this,a,d);this.light=c;this.light.updateMatrixWorld();this.color=b;this.type="PointLightHelper";this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=!1;this.update()}function me(c,a,b){ha.call(this);
this.light=c;this.light.updateMatrixWorld();this.matrix=c.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;c=new fd(a);c.rotateY(.5*Math.PI);this.material=new Kb({wireframe:!0,fog:!1,toneMapped:!1});void 0===this.color&&(this.material.vertexColors=!0);a=c.getAttribute("position");a=new Float32Array(3*a.count);c.setAttribute("color",new pa(a,3));this.add(new Qa(c,this.material));this.update()}function uf(c,a,b,d){c=c||10;a=a||10;b=new S(void 0!==b?b:4473924);d=new S(void 0!==d?d:8947848);var e=a/
2,f=c/a,g=c/2;c=[];for(var h=[],k=0,l=0,m=-g;k<=a;k++,m+=f){c.push(-g,0,m,g,0,m);c.push(m,0,-g,m,0,g);var n=k===e?b:d;n.toArray(h,l);l+=3;n.toArray(h,l);l+=3;n.toArray(h,l);l+=3;n.toArray(h,l);l+=3}a=new ka;a.setAttribute("position",new ea(c,3));a.setAttribute("color",new ea(h,3));b=new Ya({vertexColors:!0,toneMapped:!1});Za.call(this,a,b);this.type="GridHelper"}function xg(c,a,b,d,e,f){c=c||10;a=a||16;b=b||8;d=d||64;e=new S(void 0!==e?e:4473924);f=new S(void 0!==f?f:8947848);for(var g=[],h=[],k=
0;k<=a;k++){var l=k/a*2*Math.PI,m=Math.sin(l)*c;l=Math.cos(l)*c;g.push(0,0,0);g.push(m,0,l);m=k&1?e:f;h.push(m.r,m.g,m.b);h.push(m.r,m.g,m.b)}for(a=0;a<=b;a++)for(k=a&1?e:f,m=c-c/b*a,l=0;l<d;l++){var n=l/d*2*Math.PI,p=Math.sin(n)*m;n=Math.cos(n)*m;g.push(p,0,n);h.push(k.r,k.g,k.b);n=(l+1)/d*2*Math.PI;p=Math.sin(n)*m;n=Math.cos(n)*m;g.push(p,0,n);h.push(k.r,k.g,k.b)}c=new ka;c.setAttribute("position",new ea(g,3));c.setAttribute("color",new ea(h,3));g=new Ya({vertexColors:!0,toneMapped:!1});Za.call(this,
c,g);this.type="PolarGridHelper"}function ne(c,a,b){ha.call(this);this.light=c;this.light.updateMatrixWorld();this.matrix=c.matrixWorld;this.matrixAutoUpdate=!1;this.color=b;void 0===a&&(a=1);c=new ka;c.setAttribute("position",new ea([-a,a,0,a,a,0,a,-a,0,-a,-a,0,-a,a,0],3));a=new Ya({fog:!1,toneMapped:!1});this.lightPlane=new yb(c,a);this.add(this.lightPlane);c=new ka;c.setAttribute("position",new ea([0,0,0,0,0,1],3));this.targetLine=new yb(c,a);this.add(this.targetLine);this.update()}function vf(c){function a(t,
q,v){b(t,v);b(q,v)}function b(t,q){f.push(0,0,0);g.push(q.r,q.g,q.b);void 0===h[t]&&(h[t]=[]);h[t].push(f.length/3-1)}var d=new ka,e=new Ya({color:16777215,vertexColors:!0,toneMapped:!1}),f=[],g=[],h={},k=new S(16755200),l=new S(16711680),m=new S(43775),n=new S(16777215),p=new S(3355443);a("n1","n2",k);a("n2","n4",k);a("n4","n3",k);a("n3","n1",k);a("f1","f2",k);a("f2","f4",k);a("f4","f3",k);a("f3","f1",k);a("n1","f1",k);a("n2","f2",k);a("n3","f3",k);a("n4","f4",k);a("p","n1",l);a("p","n2",l);a("p",
"n3",l);a("p","n4",l);a("u1","u2",m);a("u2","u3",m);a("u3","u1",m);a("c","t",n);a("p","c",p);a("cn1","cn2",p);a("cn3","cn4",p);a("cf1","cf2",p);a("cf3","cf4",p);d.setAttribute("position",new ea(f,3));d.setAttribute("color",new ea(g,3));Za.call(this,d,e);this.type="CameraHelper";this.camera=c;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();this.matrix=c.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=h;this.update()}function db(c,a,b,d,e,f,g){yg.set(e,f,g).unproject(d);
c=a[c];if(void 0!==c)for(b=b.getAttribute("position"),a=0,d=c.length;a<d;a++)b.setXYZ(c[a],yg.x,yg.y,yg.z)}function Qc(c,a){void 0===a&&(a=16776960);var b=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),d=new Float32Array(24),e=new ka;e.setIndex(new pa(b,1));e.setAttribute("position",new pa(d,3));Za.call(this,e,new Ya({color:a,toneMapped:!1}));this.object=c;this.type="BoxHelper";this.matrixAutoUpdate=!1;this.update()}function wf(c,a){void 0===a&&(a=16776960);var b=new Uint16Array([0,
1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),d=new ka;d.setIndex(new pa(b,1));d.setAttribute("position",new ea([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));Za.call(this,d,new Ya({color:a,toneMapped:!1}));this.box=c;this.type="Box3Helper";this.geometry.computeBoundingSphere()}function xf(c,a,b){b=void 0!==b?b:16776960;var d=new ka;d.setAttribute("position",new ea([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));d.computeBoundingSphere();yb.call(this,
d,new Ya({color:b,toneMapped:!1}));this.type="PlaneHelper";this.plane=c;this.size=void 0===a?1:a;c=new ka;c.setAttribute("position",new ea([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));c.computeBoundingSphere();this.add(new Qa(c,new Kb({color:b,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}function Rc(c,a,b,d,e,f){ha.call(this);this.type="ArrowHelper";void 0===c&&(c=new w(0,0,1));void 0===a&&(a=new w(0,0,0));void 0===b&&(b=1);void 0===d&&(d=16776960);void 0===e&&(e=.2*b);void 0===f&&
(f=.2*e);void 0===zg&&(zg=new ka,zg.setAttribute("position",new ea([0,0,0,0,1,0],3)),Uh=new oc(0,.5,1,5,1),Uh.translate(0,-.5,0));this.position.copy(a);this.line=new yb(zg,new Ya({color:d,toneMapped:!1}));this.line.matrixAutoUpdate=!1;this.add(this.line);this.cone=new Qa(Uh,new Kb({color:d,toneMapped:!1}));this.cone.matrixAutoUpdate=!1;this.add(this.cone);this.setDirection(c);this.setLength(b,e,f)}function yf(c){void 0===c&&(c=1);var a=[0,0,0,c,0,0,0,0,0,0,c,0,0,0,0,0,0,c];c=new ka;c.setAttribute("position",
new ea(a,3));c.setAttribute("color",new ea([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));a=new Ya({vertexColors:!0,toneMapped:!1});Za.call(this,c,a);this.type="AxesHelper"}function qj(c){c=new Db(3*gc,3*gc,c);c.texture.mapping=306;c.texture.name="PMREM.cubeUv";c.scissorTest=!0;return c}function Ag(c,a,b,d,e){c.viewport.set(a,b,d,e);c.scissor.set(a,b,d,e)}function rj(){var c=new L(1,1);return new pc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:c},inputEncoding:{value:hc[3E3]},
outputEncoding:{value:hc[3E3]}},vertexShader:Vh(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t"+Wh()+"\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}function sj(){return new pc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:hc[3E3]},outputEncoding:{value:hc[3E3]}},vertexShader:Vh(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t"+Wh()+"\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1})}function Vh(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}
function Wh(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}
function tj(c){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");ob.call(this,c);this.type="catmullrom";this.closed=!0}function uj(c){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");ob.call(this,c);this.type="catmullrom"}function Xh(c){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");ob.call(this,c);this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,
-52));void 0===Number.isInteger&&(Number.isInteger=function(c){return"number"===typeof c&&isFinite(c)&&Math.floor(c)===c});void 0===Math.sign&&(Math.sign=function(c){return 0>c?-1:0<c?1:+c});!1==="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});void 0===Object.assign&&(Object.assign=function(c){if(void 0===c||null===c)throw new TypeError("Cannot convert undefined or null to object");for(var a=
Object(c),b=1;b<arguments.length;b++){var d=arguments[b];if(void 0!==d&&null!==d)for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(a[e]=d[e])}return a});Object.assign(wb.prototype,{addEventListener:function(c,a){void 0===this._listeners&&(this._listeners={});var b=this._listeners;void 0===b[c]&&(b[c]=[]);-1===b[c].indexOf(a)&&b[c].push(a)},hasEventListener:function(c,a){if(void 0===this._listeners)return!1;var b=this._listeners;return void 0!==b[c]&&-1!==b[c].indexOf(a)},removeEventListener:function(c,
a){void 0!==this._listeners&&(c=this._listeners[c],void 0!==c&&(a=c.indexOf(a),-1!==a&&c.splice(a,1)))},dispatchEvent:function(c){if(void 0!==this._listeners){var a=this._listeners[c.type];if(void 0!==a){c.target=this;a=a.slice(0);for(var b=0,d=a.length;b<d;b++)a[b].call(this,c)}}}});for(var mb=[],zf=0;256>zf;zf++)mb[zf]=(16>zf?"0":"")+zf.toString(16);var Bg=1234567,xa={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var c=4294967295*Math.random()|0,a=4294967295*Math.random()|0,b=
4294967295*Math.random()|0,d=4294967295*Math.random()|0;return(mb[c&255]+mb[c>>8&255]+mb[c>>16&255]+mb[c>>24&255]+"-"+mb[a&255]+mb[a>>8&255]+"-"+mb[a>>16&15|64]+mb[a>>24&255]+"-"+mb[b&63|128]+mb[b>>8&255]+"-"+mb[b>>16&255]+mb[b>>24&255]+mb[d&255]+mb[d>>8&255]+mb[d>>16&255]+mb[d>>24&255]).toUpperCase()},clamp:function(c,a,b){return Math.max(a,Math.min(b,c))},euclideanModulo:function(c,a){return(c%a+a)%a},mapLinear:function(c,a,b,d,e){return d+(c-a)*(e-d)/(b-a)},lerp:function(c,a,b){return(1-b)*c+b*
a},smoothstep:function(c,a,b){if(c<=a)return 0;if(c>=b)return 1;c=(c-a)/(b-a);return c*c*(3-2*c)},smootherstep:function(c,a,b){if(c<=a)return 0;if(c>=b)return 1;c=(c-a)/(b-a);return c*c*c*(c*(6*c-15)+10)},randInt:function(c,a){return c+Math.floor(Math.random()*(a-c+1))},randFloat:function(c,a){return c+Math.random()*(a-c)},randFloatSpread:function(c){return c*(.5-Math.random())},seededRandom:function(c){void 0!==c&&(Bg=c%2147483647);Bg=16807*Bg%2147483647;return(Bg-1)/2147483646},degToRad:function(c){return c*
xa.DEG2RAD},radToDeg:function(c){return c*xa.RAD2DEG},isPowerOfTwo:function(c){return 0===(c&c-1)&&0!==c},ceilPowerOfTwo:function(c){return Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},floorPowerOfTwo:function(c){return Math.pow(2,Math.floor(Math.log(c)/Math.LN2))},setQuaternionFromProperEuler:function(c,a,b,d,e){var f=Math.cos,g=Math.sin,h=f(b/2);b=g(b/2);var k=f((a+d)/2),l=g((a+d)/2),m=f((a-d)/2),n=g((a-d)/2);f=f((d-a)/2);a=g((d-a)/2);switch(e){case "XYX":c.set(h*l,b*m,b*n,h*k);break;case "YZY":c.set(b*
n,h*l,b*m,h*k);break;case "ZXZ":c.set(b*m,b*n,h*l,h*k);break;case "XZX":c.set(h*l,b*a,b*f,h*k);break;case "YXY":c.set(b*f,h*l,b*a,h*k);break;case "ZYZ":c.set(b*a,b*f,h*l,h*k);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+e)}}},L=function(c,a){void 0===c&&(c=0);void 0===a&&(a=0);Object.defineProperty(this,"isVector2",{value:!0});this.x=c;this.y=a},Af={width:{configurable:!0},height:{configurable:!0}};Af.width.get=function(){return this.x};
Af.width.set=function(c){this.x=c};Af.height.get=function(){return this.y};Af.height.set=function(c){this.y=c};L.prototype.set=function(c,a){this.x=c;this.y=a;return this};L.prototype.setScalar=function(c){this.y=this.x=c;return this};L.prototype.setX=function(c){this.x=c;return this};L.prototype.setY=function(c){this.y=c;return this};L.prototype.setComponent=function(c,a){switch(c){case 0:this.x=a;break;case 1:this.y=a;break;default:throw Error("index is out of range: "+c);}return this};L.prototype.getComponent=
function(c){switch(c){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+c);}};L.prototype.clone=function(){return new this.constructor(this.x,this.y)};L.prototype.copy=function(c){this.x=c.x;this.y=c.y;return this};L.prototype.add=function(c,a){if(void 0!==a)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(c,a);this.x+=c.x;this.y+=c.y;return this};L.prototype.addScalar=function(c){this.x+=
c;this.y+=c;return this};L.prototype.addVectors=function(c,a){this.x=c.x+a.x;this.y=c.y+a.y;return this};L.prototype.addScaledVector=function(c,a){this.x+=c.x*a;this.y+=c.y*a;return this};L.prototype.sub=function(c,a){if(void 0!==a)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(c,a);this.x-=c.x;this.y-=c.y;return this};L.prototype.subScalar=function(c){this.x-=c;this.y-=c;return this};L.prototype.subVectors=function(c,a){this.x=
c.x-a.x;this.y=c.y-a.y;return this};L.prototype.multiply=function(c){this.x*=c.x;this.y*=c.y;return this};L.prototype.multiplyScalar=function(c){this.x*=c;this.y*=c;return this};L.prototype.divide=function(c){this.x/=c.x;this.y/=c.y;return this};L.prototype.divideScalar=function(c){return this.multiplyScalar(1/c)};L.prototype.applyMatrix3=function(c){var a=this.x,b=this.y;c=c.elements;this.x=c[0]*a+c[3]*b+c[6];this.y=c[1]*a+c[4]*b+c[7];return this};L.prototype.min=function(c){this.x=Math.min(this.x,
c.x);this.y=Math.min(this.y,c.y);return this};L.prototype.max=function(c){this.x=Math.max(this.x,c.x);this.y=Math.max(this.y,c.y);return this};L.prototype.clamp=function(c,a){this.x=Math.max(c.x,Math.min(a.x,this.x));this.y=Math.max(c.y,Math.min(a.y,this.y));return this};L.prototype.clampScalar=function(c,a){this.x=Math.max(c,Math.min(a,this.x));this.y=Math.max(c,Math.min(a,this.y));return this};L.prototype.clampLength=function(c,a){var b=this.length();return this.divideScalar(b||1).multiplyScalar(Math.max(c,
Math.min(a,b)))};L.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};L.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};L.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};L.prototype.roundToZero=function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this};L.prototype.negate=function(){this.x=-this.x;this.y=
-this.y;return this};L.prototype.dot=function(c){return this.x*c.x+this.y*c.y};L.prototype.cross=function(c){return this.x*c.y-this.y*c.x};L.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y};L.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};L.prototype.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)};L.prototype.normalize=function(){return this.divideScalar(this.length()||1)};L.prototype.angle=function(){return Math.atan2(-this.y,-this.x)+
Math.PI};L.prototype.distanceTo=function(c){return Math.sqrt(this.distanceToSquared(c))};L.prototype.distanceToSquared=function(c){var a=this.x-c.x;c=this.y-c.y;return a*a+c*c};L.prototype.manhattanDistanceTo=function(c){return Math.abs(this.x-c.x)+Math.abs(this.y-c.y)};L.prototype.setLength=function(c){return this.normalize().multiplyScalar(c)};L.prototype.lerp=function(c,a){this.x+=(c.x-this.x)*a;this.y+=(c.y-this.y)*a;return this};L.prototype.lerpVectors=function(c,a,b){this.x=c.x+(a.x-c.x)*b;
this.y=c.y+(a.y-c.y)*b;return this};L.prototype.equals=function(c){return c.x===this.x&&c.y===this.y};L.prototype.fromArray=function(c,a){void 0===a&&(a=0);this.x=c[a];this.y=c[a+1];return this};L.prototype.toArray=function(c,a){void 0===c&&(c=[]);void 0===a&&(a=0);c[a]=this.x;c[a+1]=this.y;return c};L.prototype.fromBufferAttribute=function(c,a,b){void 0!==b&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");this.x=c.getX(a);this.y=c.getY(a);return this};L.prototype.rotateAround=
function(c,a){var b=Math.cos(a);a=Math.sin(a);var d=this.x-c.x,e=this.y-c.y;this.x=d*b-e*a+c.x;this.y=d*a+e*b+c.y;return this};L.prototype.random=function(){this.x=Math.random();this.y=Math.random();return this};Object.defineProperties(L.prototype,Af);var Da=function(){Object.defineProperty(this,"isMatrix3",{value:!0});this.elements=[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")};Da.prototype.set=function(c,a,
b,d,e,f,g,h,k){var l=this.elements;l[0]=c;l[1]=d;l[2]=g;l[3]=a;l[4]=e;l[5]=h;l[6]=b;l[7]=f;l[8]=k;return this};Da.prototype.identity=function(){this.set(1,0,0,0,1,0,0,0,1);return this};Da.prototype.clone=function(){return(new this.constructor).fromArray(this.elements)};Da.prototype.copy=function(c){var a=this.elements;c=c.elements;a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];return this};Da.prototype.extractBasis=function(c,a,b){c.setFromMatrix3Column(this,
0);a.setFromMatrix3Column(this,1);b.setFromMatrix3Column(this,2);return this};Da.prototype.setFromMatrix4=function(c){c=c.elements;this.set(c[0],c[4],c[8],c[1],c[5],c[9],c[2],c[6],c[10]);return this};Da.prototype.multiply=function(c){return this.multiplyMatrices(this,c)};Da.prototype.premultiply=function(c){return this.multiplyMatrices(c,this)};Da.prototype.multiplyMatrices=function(c,a){var b=c.elements,d=a.elements;a=this.elements;c=b[0];var e=b[3],f=b[6],g=b[1],h=b[4],k=b[7],l=b[2],m=b[5];b=b[8];
var n=d[0],p=d[3],t=d[6],q=d[1],v=d[4],u=d[7],A=d[2],B=d[5];d=d[8];a[0]=c*n+e*q+f*A;a[3]=c*p+e*v+f*B;a[6]=c*t+e*u+f*d;a[1]=g*n+h*q+k*A;a[4]=g*p+h*v+k*B;a[7]=g*t+h*u+k*d;a[2]=l*n+m*q+b*A;a[5]=l*p+m*v+b*B;a[8]=l*t+m*u+b*d;return this};Da.prototype.multiplyScalar=function(c){var a=this.elements;a[0]*=c;a[3]*=c;a[6]*=c;a[1]*=c;a[4]*=c;a[7]*=c;a[2]*=c;a[5]*=c;a[8]*=c;return this};Da.prototype.determinant=function(){var c=this.elements,a=c[0],b=c[1],d=c[2],e=c[3],f=c[4],g=c[5],h=c[6],k=c[7];c=c[8];return a*
f*c-a*g*k-b*e*c+b*g*h+d*e*k-d*f*h};Da.prototype.getInverse=function(c,a){void 0!==a&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var b=c.elements;c=this.elements;a=b[0];var d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=b[6],l=b[7];b=b[8];var m=b*g-h*l,n=h*k-b*f,p=l*f-g*k,t=a*m+d*n+e*p;if(0===t)return this.set(0,0,0,0,0,0,0,0,0);t=1/t;c[0]=m*t;c[1]=(e*l-b*d)*t;c[2]=(h*d-e*g)*t;c[3]=n*t;c[4]=(b*a-e*k)*t;c[5]=(e*f-h*a)*t;c[6]=p*t;c[7]=(d*k-l*a)*t;c[8]=(g*a-
d*f)*t;return this};Da.prototype.transpose=function(){var c=this.elements;var a=c[1];c[1]=c[3];c[3]=a;a=c[2];c[2]=c[6];c[6]=a;a=c[5];c[5]=c[7];c[7]=a;return this};Da.prototype.getNormalMatrix=function(c){return this.setFromMatrix4(c).getInverse(this).transpose()};Da.prototype.transposeIntoArray=function(c){var a=this.elements;c[0]=a[0];c[1]=a[3];c[2]=a[6];c[3]=a[1];c[4]=a[4];c[5]=a[7];c[6]=a[2];c[7]=a[5];c[8]=a[8];return this};Da.prototype.setUvTransform=function(c,a,b,d,e,f,g){var h=Math.cos(e);
e=Math.sin(e);this.set(b*h,b*e,-b*(h*f+e*g)+f+c,-d*e,d*h,-d*(-e*f+h*g)+g+a,0,0,1)};Da.prototype.scale=function(c,a){var b=this.elements;b[0]*=c;b[3]*=c;b[6]*=c;b[1]*=a;b[4]*=a;b[7]*=a;return this};Da.prototype.rotate=function(c){var a=Math.cos(c);c=Math.sin(c);var b=this.elements,d=b[0],e=b[3],f=b[6],g=b[1],h=b[4],k=b[7];b[0]=a*d+c*g;b[3]=a*e+c*h;b[6]=a*f+c*k;b[1]=-c*d+a*g;b[4]=-c*e+a*h;b[7]=-c*f+a*k;return this};Da.prototype.translate=function(c,a){var b=this.elements;b[0]+=c*b[2];b[3]+=c*b[5];b[6]+=
c*b[8];b[1]+=a*b[2];b[4]+=a*b[5];b[7]+=a*b[8];return this};Da.prototype.equals=function(c){var a=this.elements;c=c.elements;for(var b=0;9>b;b++)if(a[b]!==c[b])return!1;return!0};Da.prototype.fromArray=function(c,a){void 0===a&&(a=0);for(var b=0;9>b;b++)this.elements[b]=c[b+a];return this};Da.prototype.toArray=function(c,a){void 0===c&&(c=[]);void 0===a&&(a=0);var b=this.elements;c[a]=b[0];c[a+1]=b[1];c[a+2]=b[2];c[a+3]=b[3];c[a+4]=b[4];c[a+5]=b[5];c[a+6]=b[6];c[a+7]=b[7];c[a+8]=b[8];return c};var oe,
Sc={getDataURL:function(c){if(/^data:/i.test(c.src)||"undefined"==typeof HTMLCanvasElement)return c.src;if(!(c instanceof HTMLCanvasElement)){void 0===oe&&(oe=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"));oe.width=c.width;oe.height=c.height;var a=oe.getContext("2d");c instanceof ImageData?a.putImageData(c,0,0):a.drawImage(c,0,0,c.width,c.height);c=oe}return 2048<c.width||2048<c.height?c.toDataURL("image/jpeg",.6):c.toDataURL("image/png")}},hk=0;Oa.DEFAULT_IMAGE=void 0;Oa.DEFAULT_MAPPING=
300;Oa.prototype=Object.assign(Object.create(wb.prototype),{constructor:Oa,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(c){this.name=c.name;this.image=c.image;this.mipmaps=c.mipmaps.slice(0);this.mapping=c.mapping;this.wrapS=c.wrapS;this.wrapT=c.wrapT;this.magFilter=c.magFilter;this.minFilter=c.minFilter;this.anisotropy=
c.anisotropy;this.format=c.format;this.internalFormat=c.internalFormat;this.type=c.type;this.offset.copy(c.offset);this.repeat.copy(c.repeat);this.center.copy(c.center);this.rotation=c.rotation;this.matrixAutoUpdate=c.matrixAutoUpdate;this.matrix.copy(c.matrix);this.generateMipmaps=c.generateMipmaps;this.premultiplyAlpha=c.premultiplyAlpha;this.flipY=c.flipY;this.unpackAlignment=c.unpackAlignment;this.encoding=c.encoding;return this},toJSON:function(c){var a=void 0===c||"string"===typeof c;if(!a&&
void 0!==c.textures[this.uuid])return c.textures[this.uuid];var b={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,
unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var d=this.image;void 0===d.uuid&&(d.uuid=xa.generateUUID());if(!a&&void 0===c.images[d.uuid]){if(Array.isArray(d)){var e=[];for(var f=0,g=d.length;f<g;f++)e.push(Sc.getDataURL(d[f]))}else e=Sc.getDataURL(d);c.images[d.uuid]={uuid:d.uuid,url:e}}b.image=d.uuid}a||(c.textures[this.uuid]=b);return b},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(c){if(300!==this.mapping)return c;c.applyMatrix3(this.matrix);
if(0>c.x||1<c.x)switch(this.wrapS){case 1E3:c.x-=Math.floor(c.x);break;case 1001:c.x=0>c.x?0:1;break;case 1002:c.x=1===Math.abs(Math.floor(c.x)%2)?Math.ceil(c.x)-c.x:c.x-Math.floor(c.x)}if(0>c.y||1<c.y)switch(this.wrapT){case 1E3:c.y-=Math.floor(c.y);break;case 1001:c.y=0>c.y?0:1;break;case 1002:c.y=1===Math.abs(Math.floor(c.y)%2)?Math.ceil(c.y)-c.y:c.y-Math.floor(c.y)}this.flipY&&(c.y=1-c.y);return c}});Object.defineProperty(Oa.prototype,"needsUpdate",{set:function(c){!0===c&&this.version++}});var ca=
function(c,a,b,d){void 0===c&&(c=0);void 0===a&&(a=0);void 0===b&&(b=0);void 0===d&&(d=1);Object.defineProperty(this,"isVector4",{value:!0});this.x=c;this.y=a;this.z=b;this.w=d},Bf={width:{configurable:!0},height:{configurable:!0}};Bf.width.get=function(){return this.z};Bf.width.set=function(c){this.z=c};Bf.height.get=function(){return this.w};Bf.height.set=function(c){this.w=c};ca.prototype.set=function(c,a,b,d){this.x=c;this.y=a;this.z=b;this.w=d;return this};ca.prototype.setScalar=function(c){this.w=
this.z=this.y=this.x=c;return this};ca.prototype.setX=function(c){this.x=c;return this};ca.prototype.setY=function(c){this.y=c;return this};ca.prototype.setZ=function(c){this.z=c;return this};ca.prototype.setW=function(c){this.w=c;return this};ca.prototype.setComponent=function(c,a){switch(c){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;case 3:this.w=a;break;default:throw Error("index is out of range: "+c);}return this};ca.prototype.getComponent=function(c){switch(c){case 0:return this.x;
case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+c);}};ca.prototype.clone=function(){return new this.constructor(this.x,this.y,this.z,this.w)};ca.prototype.copy=function(c){this.x=c.x;this.y=c.y;this.z=c.z;this.w=void 0!==c.w?c.w:1;return this};ca.prototype.add=function(c,a){if(void 0!==a)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(c,a);this.x+=c.x;this.y+=c.y;
this.z+=c.z;this.w+=c.w;return this};ca.prototype.addScalar=function(c){this.x+=c;this.y+=c;this.z+=c;this.w+=c;return this};ca.prototype.addVectors=function(c,a){this.x=c.x+a.x;this.y=c.y+a.y;this.z=c.z+a.z;this.w=c.w+a.w;return this};ca.prototype.addScaledVector=function(c,a){this.x+=c.x*a;this.y+=c.y*a;this.z+=c.z*a;this.w+=c.w*a;return this};ca.prototype.sub=function(c,a){if(void 0!==a)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(c,a);this.x-=c.x;this.y-=c.y;this.z-=c.z;this.w-=c.w;return this};ca.prototype.subScalar=function(c){this.x-=c;this.y-=c;this.z-=c;this.w-=c;return this};ca.prototype.subVectors=function(c,a){this.x=c.x-a.x;this.y=c.y-a.y;this.z=c.z-a.z;this.w=c.w-a.w;return this};ca.prototype.multiplyScalar=function(c){this.x*=c;this.y*=c;this.z*=c;this.w*=c;return this};ca.prototype.applyMatrix4=function(c){var a=this.x,b=this.y,d=this.z,e=this.w;c=c.elements;this.x=c[0]*a+c[4]*b+c[8]*d+c[12]*e;
this.y=c[1]*a+c[5]*b+c[9]*d+c[13]*e;this.z=c[2]*a+c[6]*b+c[10]*d+c[14]*e;this.w=c[3]*a+c[7]*b+c[11]*d+c[15]*e;return this};ca.prototype.divideScalar=function(c){return this.multiplyScalar(1/c)};ca.prototype.setAxisAngleFromQuaternion=function(c){this.w=2*Math.acos(c.w);var a=Math.sqrt(1-c.w*c.w);1E-4>a?(this.x=1,this.z=this.y=0):(this.x=c.x/a,this.y=c.y/a,this.z=c.z/a);return this};ca.prototype.setAxisAngleFromRotationMatrix=function(c){c=c.elements;var a=c[0];var b=c[4];var d=c[8],e=c[1],f=c[5],
g=c[9];var h=c[2];var k=c[6];var l=c[10];if(.01>Math.abs(b-e)&&.01>Math.abs(d-h)&&.01>Math.abs(g-k)){if(.1>Math.abs(b+e)&&.1>Math.abs(d+h)&&.1>Math.abs(g+k)&&.1>Math.abs(a+f+l-3))return this.set(1,0,0,0),this;c=Math.PI;a=(a+1)/2;f=(f+1)/2;l=(l+1)/2;b=(b+e)/4;d=(d+h)/4;g=(g+k)/4;a>f&&a>l?.01>a?(k=0,b=h=.707106781):(k=Math.sqrt(a),h=b/k,b=d/k):f>l?.01>f?(k=.707106781,h=0,b=.707106781):(h=Math.sqrt(f),k=b/h,b=g/h):.01>l?(h=k=.707106781,b=0):(b=Math.sqrt(l),k=d/b,h=g/b);this.set(k,h,b,c);return this}c=
Math.sqrt((k-g)*(k-g)+(d-h)*(d-h)+(e-b)*(e-b));.001>Math.abs(c)&&(c=1);this.x=(k-g)/c;this.y=(d-h)/c;this.z=(e-b)/c;this.w=Math.acos((a+f+l-1)/2);return this};ca.prototype.min=function(c){this.x=Math.min(this.x,c.x);this.y=Math.min(this.y,c.y);this.z=Math.min(this.z,c.z);this.w=Math.min(this.w,c.w);return this};ca.prototype.max=function(c){this.x=Math.max(this.x,c.x);this.y=Math.max(this.y,c.y);this.z=Math.max(this.z,c.z);this.w=Math.max(this.w,c.w);return this};ca.prototype.clamp=function(c,a){this.x=
Math.max(c.x,Math.min(a.x,this.x));this.y=Math.max(c.y,Math.min(a.y,this.y));this.z=Math.max(c.z,Math.min(a.z,this.z));this.w=Math.max(c.w,Math.min(a.w,this.w));return this};ca.prototype.clampScalar=function(c,a){this.x=Math.max(c,Math.min(a,this.x));this.y=Math.max(c,Math.min(a,this.y));this.z=Math.max(c,Math.min(a,this.z));this.w=Math.max(c,Math.min(a,this.w));return this};ca.prototype.clampLength=function(c,a){var b=this.length();return this.divideScalar(b||1).multiplyScalar(Math.max(c,Math.min(a,
b)))};ca.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this};ca.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this};ca.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this};ca.prototype.roundToZero=function(){this.x=0>this.x?Math.ceil(this.x):
Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this};ca.prototype.negate=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this};ca.prototype.dot=function(c){return this.x*c.x+this.y*c.y+this.z*c.z+this.w*c.w};ca.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w};ca.prototype.length=function(){return Math.sqrt(this.x*
this.x+this.y*this.y+this.z*this.z+this.w*this.w)};ca.prototype.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)};ca.prototype.normalize=function(){return this.divideScalar(this.length()||1)};ca.prototype.setLength=function(c){return this.normalize().multiplyScalar(c)};ca.prototype.lerp=function(c,a){this.x+=(c.x-this.x)*a;this.y+=(c.y-this.y)*a;this.z+=(c.z-this.z)*a;this.w+=(c.w-this.w)*a;return this};ca.prototype.lerpVectors=function(c,a,b){this.x=
c.x+(a.x-c.x)*b;this.y=c.y+(a.y-c.y)*b;this.z=c.z+(a.z-c.z)*b;this.w=c.w+(a.w-c.w)*b;return this};ca.prototype.equals=function(c){return c.x===this.x&&c.y===this.y&&c.z===this.z&&c.w===this.w};ca.prototype.fromArray=function(c,a){void 0===a&&(a=0);this.x=c[a];this.y=c[a+1];this.z=c[a+2];this.w=c[a+3];return this};ca.prototype.toArray=function(c,a){void 0===c&&(c=[]);void 0===a&&(a=0);c[a]=this.x;c[a+1]=this.y;c[a+2]=this.z;c[a+3]=this.w;return c};ca.prototype.fromBufferAttribute=function(c,a,b){void 0!==
b&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");this.x=c.getX(a);this.y=c.getY(a);this.z=c.getZ(a);this.w=c.getW(a);return this};ca.prototype.random=function(){this.x=Math.random();this.y=Math.random();this.z=Math.random();this.w=Math.random();return this};Object.defineProperties(ca.prototype,Bf);Db.prototype=Object.assign(Object.create(wb.prototype),{constructor:Db,isWebGLRenderTarget:!0,setSize:function(c,a){if(this.width!==c||this.height!==a)this.width=c,
this.height=a,this.texture.image.width=c,this.texture.image.height=a,this.dispose();this.viewport.set(0,0,c,a);this.scissor.set(0,0,c,a)},clone:function(){return(new this.constructor).copy(this)},copy:function(c){this.width=c.width;this.height=c.height;this.viewport.copy(c.viewport);this.texture=c.texture.clone();this.depthBuffer=c.depthBuffer;this.stencilBuffer=c.stencilBuffer;this.depthTexture=c.depthTexture;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});dh.prototype=Object.assign(Object.create(Db.prototype),
{constructor:dh,isWebGLMultisampleRenderTarget:!0,copy:function(c){Db.prototype.copy.call(this,c);this.samples=c.samples;return this}});var ua=function(c,a,b,d){void 0===c&&(c=0);void 0===a&&(a=0);void 0===b&&(b=0);void 0===d&&(d=1);Object.defineProperty(this,"isQuaternion",{value:!0});this._x=c;this._y=a;this._z=b;this._w=d},rc={x:{configurable:!0},y:{configurable:!0},z:{configurable:!0},w:{configurable:!0}};ua.slerp=function(c,a,b,d){return b.copy(c).slerp(a,d)};ua.slerpFlat=function(c,a,b,d,e,
f,g){var h=b[d+0],k=b[d+1],l=b[d+2];b=b[d+3];d=e[f+0];var m=e[f+1],n=e[f+2];e=e[f+3];if(b!==e||h!==d||k!==m||l!==n){f=1-g;var p=h*d+k*m+l*n+b*e,t=0<=p?1:-1,q=1-p*p;q>Number.EPSILON&&(q=Math.sqrt(q),p=Math.atan2(q,p*t),f=Math.sin(f*p)/q,g=Math.sin(g*p)/q);t*=g;h=h*f+d*t;k=k*f+m*t;l=l*f+n*t;b=b*f+e*t;f===1-g&&(g=1/Math.sqrt(h*h+k*k+l*l+b*b),h*=g,k*=g,l*=g,b*=g)}c[a]=h;c[a+1]=k;c[a+2]=l;c[a+3]=b};ua.multiplyQuaternionsFlat=function(c,a,b,d,e,f){var g=b[d],h=b[d+1],k=b[d+2];b=b[d+3];d=e[f];var l=e[f+
1],m=e[f+2];e=e[f+3];c[a]=g*e+b*d+h*m-k*l;c[a+1]=h*e+b*l+k*d-g*m;c[a+2]=k*e+b*m+g*l-h*d;c[a+3]=b*e-g*d-h*l-k*m;return c};rc.x.get=function(){return this._x};rc.x.set=function(c){this._x=c;this._onChangeCallback()};rc.y.get=function(){return this._y};rc.y.set=function(c){this._y=c;this._onChangeCallback()};rc.z.get=function(){return this._z};rc.z.set=function(c){this._z=c;this._onChangeCallback()};rc.w.get=function(){return this._w};rc.w.set=function(c){this._w=c;this._onChangeCallback()};ua.prototype.set=
function(c,a,b,d){this._x=c;this._y=a;this._z=b;this._w=d;this._onChangeCallback();return this};ua.prototype.clone=function(){return new this.constructor(this._x,this._y,this._z,this._w)};ua.prototype.copy=function(c){this._x=c.x;this._y=c.y;this._z=c.z;this._w=c.w;this._onChangeCallback();return this};ua.prototype.setFromEuler=function(c,a){if(!c||!c.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var b=c._x,d=c._y,e=c._z;c=
c._order;var f=Math.cos,g=Math.sin,h=f(b/2),k=f(d/2);f=f(e/2);b=g(b/2);d=g(d/2);e=g(e/2);switch(c){case "XYZ":this._x=b*k*f+h*d*e;this._y=h*d*f-b*k*e;this._z=h*k*e+b*d*f;this._w=h*k*f-b*d*e;break;case "YXZ":this._x=b*k*f+h*d*e;this._y=h*d*f-b*k*e;this._z=h*k*e-b*d*f;this._w=h*k*f+b*d*e;break;case "ZXY":this._x=b*k*f-h*d*e;this._y=h*d*f+b*k*e;this._z=h*k*e+b*d*f;this._w=h*k*f-b*d*e;break;case "ZYX":this._x=b*k*f-h*d*e;this._y=h*d*f+b*k*e;this._z=h*k*e-b*d*f;this._w=h*k*f+b*d*e;break;case "YZX":this._x=
b*k*f+h*d*e;this._y=h*d*f+b*k*e;this._z=h*k*e-b*d*f;this._w=h*k*f-b*d*e;break;case "XZY":this._x=b*k*f-h*d*e;this._y=h*d*f-b*k*e;this._z=h*k*e+b*d*f;this._w=h*k*f+b*d*e;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+c)}!1!==a&&this._onChangeCallback();return this};ua.prototype.setFromAxisAngle=function(c,a){a/=2;var b=Math.sin(a);this._x=c.x*b;this._y=c.y*b;this._z=c.z*b;this._w=Math.cos(a);this._onChangeCallback();return this};ua.prototype.setFromRotationMatrix=
function(c){var a=c.elements,b=a[0];c=a[4];var d=a[8],e=a[1],f=a[5],g=a[9],h=a[2],k=a[6];a=a[10];var l=b+f+a;0<l?(b=.5/Math.sqrt(l+1),this._w=.25/b,this._x=(k-g)*b,this._y=(d-h)*b,this._z=(e-c)*b):b>f&&b>a?(b=2*Math.sqrt(1+b-f-a),this._w=(k-g)/b,this._x=.25*b,this._y=(c+e)/b,this._z=(d+h)/b):f>a?(b=2*Math.sqrt(1+f-b-a),this._w=(d-h)/b,this._x=(c+e)/b,this._y=.25*b,this._z=(g+k)/b):(b=2*Math.sqrt(1+a-b-f),this._w=(e-c)/b,this._x=(d+h)/b,this._y=(g+k)/b,this._z=.25*b);this._onChangeCallback();return this};
ua.prototype.setFromUnitVectors=function(c,a){var b=c.dot(a)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?(this._x=-c.y,this._y=c.x,this._z=0):(this._x=0,this._y=-c.z,this._z=c.y)):(this._x=c.y*a.z-c.z*a.y,this._y=c.z*a.x-c.x*a.z,this._z=c.x*a.y-c.y*a.x);this._w=b;return this.normalize()};ua.prototype.angleTo=function(c){return 2*Math.acos(Math.abs(xa.clamp(this.dot(c),-1,1)))};ua.prototype.rotateTowards=function(c,a){var b=this.angleTo(c);if(0===b)return this;this.slerp(c,Math.min(1,a/b));return this};
ua.prototype.identity=function(){return this.set(0,0,0,1)};ua.prototype.inverse=function(){return this.conjugate()};ua.prototype.conjugate=function(){this._x*=-1;this._y*=-1;this._z*=-1;this._onChangeCallback();return this};ua.prototype.dot=function(c){return this._x*c._x+this._y*c._y+this._z*c._z+this._w*c._w};ua.prototype.lengthSq=function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w};ua.prototype.length=function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*
this._z+this._w*this._w)};ua.prototype.normalize=function(){var c=this.length();0===c?(this._z=this._y=this._x=0,this._w=1):(c=1/c,this._x*=c,this._y*=c,this._z*=c,this._w*=c);this._onChangeCallback();return this};ua.prototype.multiply=function(c,a){return void 0!==a?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(c,a)):this.multiplyQuaternions(this,c)};ua.prototype.premultiply=function(c){return this.multiplyQuaternions(c,
this)};ua.prototype.multiplyQuaternions=function(c,a){var b=c._x,d=c._y,e=c._z;c=c._w;var f=a._x,g=a._y,h=a._z;a=a._w;this._x=b*a+c*f+d*h-e*g;this._y=d*a+c*g+e*f-b*h;this._z=e*a+c*h+b*g-d*f;this._w=c*a-b*f-d*g-e*h;this._onChangeCallback();return this};ua.prototype.slerp=function(c,a){if(0===a)return this;if(1===a)return this.copy(c);var b=this._x,d=this._y,e=this._z,f=this._w,g=f*c._w+b*c._x+d*c._y+e*c._z;0>g?(this._w=-c._w,this._x=-c._x,this._y=-c._y,this._z=-c._z,g=-g):this.copy(c);if(1<=g)return this._w=
f,this._x=b,this._y=d,this._z=e,this;c=1-g*g;if(c<=Number.EPSILON)return g=1-a,this._w=g*f+a*this._w,this._x=g*b+a*this._x,this._y=g*d+a*this._y,this._z=g*e+a*this._z,this.normalize(),this._onChangeCallback(),this;c=Math.sqrt(c);var h=Math.atan2(c,g);g=Math.sin((1-a)*h)/c;a=Math.sin(a*h)/c;this._w=f*g+this._w*a;this._x=b*g+this._x*a;this._y=d*g+this._y*a;this._z=e*g+this._z*a;this._onChangeCallback();return this};ua.prototype.equals=function(c){return c._x===this._x&&c._y===this._y&&c._z===this._z&&
c._w===this._w};ua.prototype.fromArray=function(c,a){void 0===a&&(a=0);this._x=c[a];this._y=c[a+1];this._z=c[a+2];this._w=c[a+3];this._onChangeCallback();return this};ua.prototype.toArray=function(c,a){void 0===c&&(c=[]);void 0===a&&(a=0);c[a]=this._x;c[a+1]=this._y;c[a+2]=this._z;c[a+3]=this._w;return c};ua.prototype.fromBufferAttribute=function(c,a){this._x=c.getX(a);this._y=c.getY(a);this._z=c.getZ(a);this._w=c.getW(a);return this};ua.prototype._onChange=function(c){this._onChangeCallback=c;return this};
ua.prototype._onChangeCallback=function(){};Object.defineProperties(ua.prototype,rc);var w=function(c,a,b){void 0===c&&(c=0);void 0===a&&(a=0);void 0===b&&(b=0);Object.defineProperty(this,"isVector3",{value:!0});this.x=c;this.y=a;this.z=b};w.prototype.set=function(c,a,b){void 0===b&&(b=this.z);this.x=c;this.y=a;this.z=b;return this};w.prototype.setScalar=function(c){this.z=this.y=this.x=c;return this};w.prototype.setX=function(c){this.x=c;return this};w.prototype.setY=function(c){this.y=c;return this};
w.prototype.setZ=function(c){this.z=c;return this};w.prototype.setComponent=function(c,a){switch(c){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;default:throw Error("index is out of range: "+c);}return this};w.prototype.getComponent=function(c){switch(c){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+c);}};w.prototype.clone=function(){return new this.constructor(this.x,this.y,this.z)};w.prototype.copy=function(c){this.x=
c.x;this.y=c.y;this.z=c.z;return this};w.prototype.add=function(c,a){if(void 0!==a)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(c,a);this.x+=c.x;this.y+=c.y;this.z+=c.z;return this};w.prototype.addScalar=function(c){this.x+=c;this.y+=c;this.z+=c;return this};w.prototype.addVectors=function(c,a){this.x=c.x+a.x;this.y=c.y+a.y;this.z=c.z+a.z;return this};w.prototype.addScaledVector=function(c,a){this.x+=c.x*a;this.y+=c.y*
a;this.z+=c.z*a;return this};w.prototype.sub=function(c,a){if(void 0!==a)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(c,a);this.x-=c.x;this.y-=c.y;this.z-=c.z;return this};w.prototype.subScalar=function(c){this.x-=c;this.y-=c;this.z-=c;return this};w.prototype.subVectors=function(c,a){this.x=c.x-a.x;this.y=c.y-a.y;this.z=c.z-a.z;return this};w.prototype.multiply=function(c,a){if(void 0!==a)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),
this.multiplyVectors(c,a);this.x*=c.x;this.y*=c.y;this.z*=c.z;return this};w.prototype.multiplyScalar=function(c){this.x*=c;this.y*=c;this.z*=c;return this};w.prototype.multiplyVectors=function(c,a){this.x=c.x*a.x;this.y=c.y*a.y;this.z=c.z*a.z;return this};w.prototype.applyEuler=function(c){c&&c.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");return this.applyQuaternion(vj.setFromEuler(c))};w.prototype.applyAxisAngle=function(c,
a){return this.applyQuaternion(vj.setFromAxisAngle(c,a))};w.prototype.applyMatrix3=function(c){var a=this.x,b=this.y,d=this.z;c=c.elements;this.x=c[0]*a+c[3]*b+c[6]*d;this.y=c[1]*a+c[4]*b+c[7]*d;this.z=c[2]*a+c[5]*b+c[8]*d;return this};w.prototype.applyNormalMatrix=function(c){return this.applyMatrix3(c).normalize()};w.prototype.applyMatrix4=function(c){var a=this.x,b=this.y,d=this.z;c=c.elements;var e=1/(c[3]*a+c[7]*b+c[11]*d+c[15]);this.x=(c[0]*a+c[4]*b+c[8]*d+c[12])*e;this.y=(c[1]*a+c[5]*b+c[9]*
d+c[13])*e;this.z=(c[2]*a+c[6]*b+c[10]*d+c[14])*e;return this};w.prototype.applyQuaternion=function(c){var a=this.x,b=this.y,d=this.z,e=c.x,f=c.y,g=c.z;c=c.w;var h=c*a+f*d-g*b,k=c*b+g*a-e*d,l=c*d+e*b-f*a;a=-e*a-f*b-g*d;this.x=h*c+a*-e+k*-g-l*-f;this.y=k*c+a*-f+l*-e-h*-g;this.z=l*c+a*-g+h*-f-k*-e;return this};w.prototype.project=function(c){return this.applyMatrix4(c.matrixWorldInverse).applyMatrix4(c.projectionMatrix)};w.prototype.unproject=function(c){return this.applyMatrix4(c.projectionMatrixInverse).applyMatrix4(c.matrixWorld)};
w.prototype.transformDirection=function(c){var a=this.x,b=this.y,d=this.z;c=c.elements;this.x=c[0]*a+c[4]*b+c[8]*d;this.y=c[1]*a+c[5]*b+c[9]*d;this.z=c[2]*a+c[6]*b+c[10]*d;return this.normalize()};w.prototype.divide=function(c){this.x/=c.x;this.y/=c.y;this.z/=c.z;return this};w.prototype.divideScalar=function(c){return this.multiplyScalar(1/c)};w.prototype.min=function(c){this.x=Math.min(this.x,c.x);this.y=Math.min(this.y,c.y);this.z=Math.min(this.z,c.z);return this};w.prototype.max=function(c){this.x=
Math.max(this.x,c.x);this.y=Math.max(this.y,c.y);this.z=Math.max(this.z,c.z);return this};w.prototype.clamp=function(c,a){this.x=Math.max(c.x,Math.min(a.x,this.x));this.y=Math.max(c.y,Math.min(a.y,this.y));this.z=Math.max(c.z,Math.min(a.z,this.z));return this};w.prototype.clampScalar=function(c,a){this.x=Math.max(c,Math.min(a,this.x));this.y=Math.max(c,Math.min(a,this.y));this.z=Math.max(c,Math.min(a,this.z));return this};w.prototype.clampLength=function(c,a){var b=this.length();return this.divideScalar(b||
1).multiplyScalar(Math.max(c,Math.min(a,b)))};w.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this};w.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this};w.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this};w.prototype.roundToZero=function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?
Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this};w.prototype.negate=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};w.prototype.dot=function(c){return this.x*c.x+this.y*c.y+this.z*c.z};w.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z};w.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};w.prototype.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)+
Math.abs(this.z)};w.prototype.normalize=function(){return this.divideScalar(this.length()||1)};w.prototype.setLength=function(c){return this.normalize().multiplyScalar(c)};w.prototype.lerp=function(c,a){this.x+=(c.x-this.x)*a;this.y+=(c.y-this.y)*a;this.z+=(c.z-this.z)*a;return this};w.prototype.lerpVectors=function(c,a,b){this.x=c.x+(a.x-c.x)*b;this.y=c.y+(a.y-c.y)*b;this.z=c.z+(a.z-c.z)*b;return this};w.prototype.cross=function(c,a){return void 0!==a?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),
this.crossVectors(c,a)):this.crossVectors(this,c)};w.prototype.crossVectors=function(c,a){var b=c.x,d=c.y;c=c.z;var e=a.x,f=a.y;a=a.z;this.x=d*a-c*f;this.y=c*e-b*a;this.z=b*f-d*e;return this};w.prototype.projectOnVector=function(c){var a=c.lengthSq();if(0===a)return this.set(0,0,0);a=c.dot(this)/a;return this.copy(c).multiplyScalar(a)};w.prototype.projectOnPlane=function(c){Yh.copy(this).projectOnVector(c);return this.sub(Yh)};w.prototype.reflect=function(c){return this.sub(Yh.copy(c).multiplyScalar(2*
this.dot(c)))};w.prototype.angleTo=function(c){var a=Math.sqrt(this.lengthSq()*c.lengthSq());if(0===a)return Math.PI/2;c=this.dot(c)/a;return Math.acos(xa.clamp(c,-1,1))};w.prototype.distanceTo=function(c){return Math.sqrt(this.distanceToSquared(c))};w.prototype.distanceToSquared=function(c){var a=this.x-c.x,b=this.y-c.y;c=this.z-c.z;return a*a+b*b+c*c};w.prototype.manhattanDistanceTo=function(c){return Math.abs(this.x-c.x)+Math.abs(this.y-c.y)+Math.abs(this.z-c.z)};w.prototype.setFromSpherical=function(c){return this.setFromSphericalCoords(c.radius,
c.phi,c.theta)};w.prototype.setFromSphericalCoords=function(c,a,b){var d=Math.sin(a)*c;this.x=d*Math.sin(b);this.y=Math.cos(a)*c;this.z=d*Math.cos(b);return this};w.prototype.setFromCylindrical=function(c){return this.setFromCylindricalCoords(c.radius,c.theta,c.y)};w.prototype.setFromCylindricalCoords=function(c,a,b){this.x=c*Math.sin(a);this.y=b;this.z=c*Math.cos(a);return this};w.prototype.setFromMatrixPosition=function(c){c=c.elements;this.x=c[12];this.y=c[13];this.z=c[14];return this};w.prototype.setFromMatrixScale=
function(c){var a=this.setFromMatrixColumn(c,0).length(),b=this.setFromMatrixColumn(c,1).length();c=this.setFromMatrixColumn(c,2).length();this.x=a;this.y=b;this.z=c;return this};w.prototype.setFromMatrixColumn=function(c,a){return this.fromArray(c.elements,4*a)};w.prototype.setFromMatrix3Column=function(c,a){return this.fromArray(c.elements,3*a)};w.prototype.equals=function(c){return c.x===this.x&&c.y===this.y&&c.z===this.z};w.prototype.fromArray=function(c,a){void 0===a&&(a=0);this.x=c[a];this.y=
c[a+1];this.z=c[a+2];return this};w.prototype.toArray=function(c,a){void 0===c&&(c=[]);void 0===a&&(a=0);c[a]=this.x;c[a+1]=this.y;c[a+2]=this.z;return c};w.prototype.fromBufferAttribute=function(c,a,b){void 0!==b&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");this.x=c.getX(a);this.y=c.getY(a);this.z=c.getZ(a);return this};w.prototype.random=function(){this.x=Math.random();this.y=Math.random();this.z=Math.random();return this};var Yh=new w,vj=new ua,za=function(c,
a){Object.defineProperty(this,"isBox3",{value:!0});this.min=void 0!==c?c:new w(Infinity,Infinity,Infinity);this.max=void 0!==a?a:new w(-Infinity,-Infinity,-Infinity)};za.prototype.set=function(c,a){this.min.copy(c);this.max.copy(a);return this};za.prototype.setFromArray=function(c){for(var a=Infinity,b=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,k=c.length;h<k;h+=3){var l=c[h],m=c[h+1],n=c[h+2];l<a&&(a=l);m<b&&(b=m);n<d&&(d=n);l>e&&(e=l);m>f&&(f=m);n>g&&(g=n)}this.min.set(a,b,d);this.max.set(e,
f,g);return this};za.prototype.setFromBufferAttribute=function(c){for(var a=Infinity,b=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,k=c.count;h<k;h++){var l=c.getX(h),m=c.getY(h),n=c.getZ(h);l<a&&(a=l);m<b&&(b=m);n<d&&(d=n);l>e&&(e=l);m>f&&(f=m);n>g&&(g=n)}this.min.set(a,b,d);this.max.set(e,f,g);return this};za.prototype.setFromPoints=function(c){this.makeEmpty();for(var a=0,b=c.length;a<b;a++)this.expandByPoint(c[a]);return this};za.prototype.setFromCenterAndSize=function(c,a){a=Cf.copy(a).multiplyScalar(.5);
this.min.copy(c).sub(a);this.max.copy(c).add(a);return this};za.prototype.setFromObject=function(c){this.makeEmpty();return this.expandByObject(c)};za.prototype.clone=function(){return(new this.constructor).copy(this)};za.prototype.copy=function(c){this.min.copy(c.min);this.max.copy(c.max);return this};za.prototype.makeEmpty=function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this};za.prototype.isEmpty=function(){return this.max.x<this.min.x||this.max.y<
this.min.y||this.max.z<this.min.z};za.prototype.getCenter=function(c){void 0===c&&(console.warn("THREE.Box3: .getCenter() target is now required"),c=new w);return this.isEmpty()?c.set(0,0,0):c.addVectors(this.min,this.max).multiplyScalar(.5)};za.prototype.getSize=function(c){void 0===c&&(console.warn("THREE.Box3: .getSize() target is now required"),c=new w);return this.isEmpty()?c.set(0,0,0):c.subVectors(this.max,this.min)};za.prototype.expandByPoint=function(c){this.min.min(c);this.max.max(c);return this};
za.prototype.expandByVector=function(c){this.min.sub(c);this.max.add(c);return this};za.prototype.expandByScalar=function(c){this.min.addScalar(-c);this.max.addScalar(c);return this};za.prototype.expandByObject=function(c){c.updateWorldMatrix(!1,!1);var a=c.geometry;void 0!==a&&(null===a.boundingBox&&a.computeBoundingBox(),Zh.copy(a.boundingBox),Zh.applyMatrix4(c.matrixWorld),this.union(Zh));c=c.children;a=0;for(var b=c.length;a<b;a++)this.expandByObject(c[a]);return this};za.prototype.containsPoint=
function(c){return c.x<this.min.x||c.x>this.max.x||c.y<this.min.y||c.y>this.max.y||c.z<this.min.z||c.z>this.max.z?!1:!0};za.prototype.containsBox=function(c){return this.min.x<=c.min.x&&c.max.x<=this.max.x&&this.min.y<=c.min.y&&c.max.y<=this.max.y&&this.min.z<=c.min.z&&c.max.z<=this.max.z};za.prototype.getParameter=function(c,a){void 0===a&&(console.warn("THREE.Box3: .getParameter() target is now required"),a=new w);return a.set((c.x-this.min.x)/(this.max.x-this.min.x),(c.y-this.min.y)/(this.max.y-
this.min.y),(c.z-this.min.z)/(this.max.z-this.min.z))};za.prototype.intersectsBox=function(c){return c.max.x<this.min.x||c.min.x>this.max.x||c.max.y<this.min.y||c.min.y>this.max.y||c.max.z<this.min.z||c.min.z>this.max.z?!1:!0};za.prototype.intersectsSphere=function(c){this.clampPoint(c.center,Cf);return Cf.distanceToSquared(c.center)<=c.radius*c.radius};za.prototype.intersectsPlane=function(c){if(0<c.normal.x){var a=c.normal.x*this.min.x;var b=c.normal.x*this.max.x}else a=c.normal.x*this.max.x,b=
c.normal.x*this.min.x;0<c.normal.y?(a+=c.normal.y*this.min.y,b+=c.normal.y*this.max.y):(a+=c.normal.y*this.max.y,b+=c.normal.y*this.min.y);0<c.normal.z?(a+=c.normal.z*this.min.z,b+=c.normal.z*this.max.z):(a+=c.normal.z*this.max.z,b+=c.normal.z*this.min.z);return a<=-c.constant&&b>=-c.constant};za.prototype.intersectsTriangle=function(c){if(this.isEmpty())return!1;this.getCenter(Df);Cg.subVectors(this.max,Df);pe.subVectors(c.a,Df);qe.subVectors(c.b,Df);re.subVectors(c.c,Df);Tc.subVectors(qe,pe);Uc.subVectors(re,
qe);sd.subVectors(pe,re);c=[0,-Tc.z,Tc.y,0,-Uc.z,Uc.y,0,-sd.z,sd.y,Tc.z,0,-Tc.x,Uc.z,0,-Uc.x,sd.z,0,-sd.x,-Tc.y,Tc.x,0,-Uc.y,Uc.x,0,-sd.y,sd.x,0];if(!eh(c,pe,qe,re,Cg))return!1;c=[1,0,0,0,1,0,0,0,1];if(!eh(c,pe,qe,re,Cg))return!1;Dg.crossVectors(Tc,Uc);c=[Dg.x,Dg.y,Dg.z];return eh(c,pe,qe,re,Cg)};za.prototype.clampPoint=function(c,a){void 0===a&&(console.warn("THREE.Box3: .clampPoint() target is now required"),a=new w);return a.copy(c).clamp(this.min,this.max)};za.prototype.distanceToPoint=function(c){return Cf.copy(c).clamp(this.min,
this.max).sub(c).length()};za.prototype.getBoundingSphere=function(c){void 0===c&&console.error("THREE.Box3: .getBoundingSphere() target is now required");this.getCenter(c.center);c.radius=.5*this.getSize(Cf).length();return c};za.prototype.intersect=function(c){this.min.max(c.min);this.max.min(c.max);this.isEmpty()&&this.makeEmpty();return this};za.prototype.union=function(c){this.min.min(c.min);this.max.max(c.max);return this};za.prototype.applyMatrix4=function(c){if(this.isEmpty())return this;
sc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(c);sc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(c);sc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(c);sc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(c);sc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(c);sc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(c);sc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(c);sc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(c);this.setFromPoints(sc);
return this};za.prototype.translate=function(c){this.min.add(c);this.max.add(c);return this};za.prototype.equals=function(c){return c.min.equals(this.min)&&c.max.equals(this.max)};var sc=[new w,new w,new w,new w,new w,new w,new w,new w],Cf=new w,Zh=new za,pe=new w,qe=new w,re=new w,Tc=new w,Uc=new w,sd=new w,Df=new w,Cg=new w,Dg=new w,Yc=new w,Ml=new za,Wa=function(c,a){this.center=void 0!==c?c:new w;this.radius=void 0!==a?a:-1};Wa.prototype.set=function(c,a){this.center.copy(c);this.radius=a;return this};
Wa.prototype.setFromPoints=function(c,a){var b=this.center;void 0!==a?b.copy(a):Ml.setFromPoints(c).getCenter(b);for(var d=a=0,e=c.length;d<e;d++)a=Math.max(a,b.distanceToSquared(c[d]));this.radius=Math.sqrt(a);return this};Wa.prototype.clone=function(){return(new this.constructor).copy(this)};Wa.prototype.copy=function(c){this.center.copy(c.center);this.radius=c.radius;return this};Wa.prototype.isEmpty=function(){return 0>this.radius};Wa.prototype.makeEmpty=function(){this.center.set(0,0,0);this.radius=
-1;return this};Wa.prototype.containsPoint=function(c){return c.distanceToSquared(this.center)<=this.radius*this.radius};Wa.prototype.distanceToPoint=function(c){return c.distanceTo(this.center)-this.radius};Wa.prototype.intersectsSphere=function(c){var a=this.radius+c.radius;return c.center.distanceToSquared(this.center)<=a*a};Wa.prototype.intersectsBox=function(c){return c.intersectsSphere(this)};Wa.prototype.intersectsPlane=function(c){return Math.abs(c.distanceToPoint(this.center))<=this.radius};
Wa.prototype.clampPoint=function(c,a){var b=this.center.distanceToSquared(c);void 0===a&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),a=new w);a.copy(c);b>this.radius*this.radius&&(a.sub(this.center).normalize(),a.multiplyScalar(this.radius).add(this.center));return a};Wa.prototype.getBoundingBox=function(c){void 0===c&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),c=new za);if(this.isEmpty())return c.makeEmpty(),c;c.set(this.center,this.center);c.expandByScalar(this.radius);
return c};Wa.prototype.applyMatrix4=function(c){this.center.applyMatrix4(c);this.radius*=c.getMaxScaleOnAxis();return this};Wa.prototype.translate=function(c){this.center.add(c);return this};Wa.prototype.equals=function(c){return c.center.equals(this.center)&&c.radius===this.radius};var tc=new w,$h=new w,Eg=new w,Vc=new w,ai=new w,Fg=new w,bi=new w,Ta=function(c,a){this.origin=void 0!==c?c:new w;this.direction=void 0!==a?a:new w(0,0,-1)};Ta.prototype.set=function(c,a){this.origin.copy(c);this.direction.copy(a);
return this};Ta.prototype.clone=function(){return(new this.constructor).copy(this)};Ta.prototype.copy=function(c){this.origin.copy(c.origin);this.direction.copy(c.direction);return this};Ta.prototype.at=function(c,a){void 0===a&&(console.warn("THREE.Ray: .at() target is now required"),a=new w);return a.copy(this.direction).multiplyScalar(c).add(this.origin)};Ta.prototype.lookAt=function(c){this.direction.copy(c).sub(this.origin).normalize();return this};Ta.prototype.recast=function(c){this.origin.copy(this.at(c,
tc));return this};Ta.prototype.closestPointToPoint=function(c,a){void 0===a&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),a=new w);a.subVectors(c,this.origin);c=a.dot(this.direction);return 0>c?a.copy(this.origin):a.copy(this.direction).multiplyScalar(c).add(this.origin)};Ta.prototype.distanceToPoint=function(c){return Math.sqrt(this.distanceSqToPoint(c))};Ta.prototype.distanceSqToPoint=function(c){var a=tc.subVectors(c,this.origin).dot(this.direction);if(0>a)return this.origin.distanceToSquared(c);
tc.copy(this.direction).multiplyScalar(a).add(this.origin);return tc.distanceToSquared(c)};Ta.prototype.distanceSqToSegment=function(c,a,b,d){$h.copy(c).add(a).multiplyScalar(.5);Eg.copy(a).sub(c).normalize();Vc.copy(this.origin).sub($h);var e=.5*c.distanceTo(a),f=-this.direction.dot(Eg),g=Vc.dot(this.direction),h=-Vc.dot(Eg),k=Vc.lengthSq(),l=Math.abs(1-f*f);if(0<l){c=f*h-g;a=f*g-h;var m=e*l;0<=c?a>=-m?a<=m?(e=1/l,c*=e,a*=e,f=c*(c+f*a+2*g)+a*(f*c+a+2*h)+k):(a=e,c=Math.max(0,-(f*a+g)),f=-c*c+a*(a+
2*h)+k):(a=-e,c=Math.max(0,-(f*a+g)),f=-c*c+a*(a+2*h)+k):a<=-m?(c=Math.max(0,-(-f*e+g)),a=0<c?-e:Math.min(Math.max(-e,-h),e),f=-c*c+a*(a+2*h)+k):a<=m?(c=0,a=Math.min(Math.max(-e,-h),e),f=a*(a+2*h)+k):(c=Math.max(0,-(f*e+g)),a=0<c?e:Math.min(Math.max(-e,-h),e),f=-c*c+a*(a+2*h)+k)}else a=0<f?-e:e,c=Math.max(0,-(f*a+g)),f=-c*c+a*(a+2*h)+k;b&&b.copy(this.direction).multiplyScalar(c).add(this.origin);d&&d.copy(Eg).multiplyScalar(a).add($h);return f};Ta.prototype.intersectSphere=function(c,a){tc.subVectors(c.center,
this.origin);var b=tc.dot(this.direction),d=tc.dot(tc)-b*b;c=c.radius*c.radius;if(d>c)return null;c=Math.sqrt(c-d);d=b-c;b+=c;return 0>d&&0>b?null:0>d?this.at(b,a):this.at(d,a)};Ta.prototype.intersectsSphere=function(c){return this.distanceSqToPoint(c.center)<=c.radius*c.radius};Ta.prototype.distanceToPlane=function(c){var a=c.normal.dot(this.direction);if(0===a)return 0===c.distanceToPoint(this.origin)?0:null;c=-(this.origin.dot(c.normal)+c.constant)/a;return 0<=c?c:null};Ta.prototype.intersectPlane=
function(c,a){c=this.distanceToPlane(c);return null===c?null:this.at(c,a)};Ta.prototype.intersectsPlane=function(c){var a=c.distanceToPoint(this.origin);return 0===a||0>c.normal.dot(this.direction)*a?!0:!1};Ta.prototype.intersectBox=function(c,a){var b=1/this.direction.x;var d=1/this.direction.y;var e=1/this.direction.z,f=this.origin;if(0<=b){var g=(c.min.x-f.x)*b;b*=c.max.x-f.x}else g=(c.max.x-f.x)*b,b*=c.min.x-f.x;if(0<=d){var h=(c.min.y-f.y)*d;d*=c.max.y-f.y}else h=(c.max.y-f.y)*d,d*=c.min.y-f.y;
if(g>d||h>b)return null;if(h>g||g!==g)g=h;if(d<b||b!==b)b=d;0<=e?(h=(c.min.z-f.z)*e,c=(c.max.z-f.z)*e):(h=(c.max.z-f.z)*e,c=(c.min.z-f.z)*e);if(g>c||h>b)return null;if(h>g||g!==g)g=h;if(c<b||b!==b)b=c;return 0>b?null:this.at(0<=g?g:b,a)};Ta.prototype.intersectsBox=function(c){return null!==this.intersectBox(c,tc)};Ta.prototype.intersectTriangle=function(c,a,b,d,e){ai.subVectors(a,c);Fg.subVectors(b,c);bi.crossVectors(ai,Fg);a=this.direction.dot(bi);if(0<a){if(d)return null;d=1}else if(0>a)d=-1,a=
-a;else return null;Vc.subVectors(this.origin,c);c=d*this.direction.dot(Fg.crossVectors(Vc,Fg));if(0>c)return null;b=d*this.direction.dot(ai.cross(Vc));if(0>b||c+b>a)return null;c=-d*Vc.dot(bi);return 0>c?null:this.at(c/a,e)};Ta.prototype.applyMatrix4=function(c){this.origin.applyMatrix4(c);this.direction.transformDirection(c);return this};Ta.prototype.equals=function(c){return c.origin.equals(this.origin)&&c.direction.equals(this.direction)};var da=function(){Object.defineProperty(this,"isMatrix4",
{value:!0});this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")};da.prototype.set=function(c,a,b,d,e,f,g,h,k,l,m,n,p,t,q,v){var u=this.elements;u[0]=c;u[4]=a;u[8]=b;u[12]=d;u[1]=e;u[5]=f;u[9]=g;u[13]=h;u[2]=k;u[6]=l;u[10]=m;u[14]=n;u[3]=p;u[7]=t;u[11]=q;u[15]=v;return this};da.prototype.identity=function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this};da.prototype.clone=function(){return(new da).fromArray(this.elements)};
da.prototype.copy=function(c){var a=this.elements;c=c.elements;a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return this};da.prototype.copyPosition=function(c){var a=this.elements;c=c.elements;a[12]=c[12];a[13]=c[13];a[14]=c[14];return this};da.prototype.extractBasis=function(c,a,b){c.setFromMatrixColumn(this,0);a.setFromMatrixColumn(this,1);b.setFromMatrixColumn(this,2);return this};
da.prototype.makeBasis=function(c,a,b){this.set(c.x,a.x,b.x,0,c.y,a.y,b.y,0,c.z,a.z,b.z,0,0,0,0,1);return this};da.prototype.extractRotation=function(c){var a=this.elements,b=c.elements,d=1/se.setFromMatrixColumn(c,0).length(),e=1/se.setFromMatrixColumn(c,1).length();c=1/se.setFromMatrixColumn(c,2).length();a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=0;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=0;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return this};da.prototype.makeRotationFromEuler=
function(c){c&&c.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var a=this.elements,b=c.x,d=c.y,e=c.z,f=Math.cos(b);b=Math.sin(b);var g=Math.cos(d);d=Math.sin(d);var h=Math.cos(e);e=Math.sin(e);if("XYZ"===c.order){c=f*h;var k=f*e,l=b*h,m=b*e;a[0]=g*h;a[4]=-g*e;a[8]=d;a[1]=k+l*d;a[5]=c-m*d;a[9]=-b*g;a[2]=m-c*d;a[6]=l+k*d;a[10]=f*g}else"YXZ"===c.order?(c=g*h,k=g*e,l=d*h,m=d*e,a[0]=c+m*b,a[4]=l*b-k,a[8]=f*d,a[1]=f*e,a[5]=
f*h,a[9]=-b,a[2]=k*b-l,a[6]=m+c*b,a[10]=f*g):"ZXY"===c.order?(c=g*h,k=g*e,l=d*h,m=d*e,a[0]=c-m*b,a[4]=-f*e,a[8]=l+k*b,a[1]=k+l*b,a[5]=f*h,a[9]=m-c*b,a[2]=-f*d,a[6]=b,a[10]=f*g):"ZYX"===c.order?(c=f*h,k=f*e,l=b*h,m=b*e,a[0]=g*h,a[4]=l*d-k,a[8]=c*d+m,a[1]=g*e,a[5]=m*d+c,a[9]=k*d-l,a[2]=-d,a[6]=b*g,a[10]=f*g):"YZX"===c.order?(c=f*g,k=f*d,l=b*g,m=b*d,a[0]=g*h,a[4]=m-c*e,a[8]=l*e+k,a[1]=e,a[5]=f*h,a[9]=-b*h,a[2]=-d*h,a[6]=k*e+l,a[10]=c-m*e):"XZY"===c.order&&(c=f*g,k=f*d,l=b*g,m=b*d,a[0]=g*h,a[4]=-e,a[8]=
d*h,a[1]=c*e+m,a[5]=f*h,a[9]=k*e-l,a[2]=l*e-k,a[6]=b*h,a[10]=m*e+c);a[3]=0;a[7]=0;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return this};da.prototype.makeRotationFromQuaternion=function(c){return this.compose(Nl,c,Ol)};da.prototype.lookAt=function(c,a,b){var d=this.elements;ub.subVectors(c,a);0===ub.lengthSq()&&(ub.z=1);ub.normalize();Wc.crossVectors(b,ub);0===Wc.lengthSq()&&(1===Math.abs(b.z)?ub.x+=1E-4:ub.z+=1E-4,ub.normalize(),Wc.crossVectors(b,ub));Wc.normalize();Gg.crossVectors(ub,Wc);d[0]=Wc.x;
d[4]=Gg.x;d[8]=ub.x;d[1]=Wc.y;d[5]=Gg.y;d[9]=ub.y;d[2]=Wc.z;d[6]=Gg.z;d[10]=ub.z;return this};da.prototype.multiply=function(c,a){return void 0!==a?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(c,a)):this.multiplyMatrices(this,c)};da.prototype.premultiply=function(c){return this.multiplyMatrices(c,this)};da.prototype.multiplyMatrices=function(c,a){var b=c.elements,d=a.elements;a=this.elements;c=b[0];var e=b[4],
f=b[8],g=b[12],h=b[1],k=b[5],l=b[9],m=b[13],n=b[2],p=b[6],t=b[10],q=b[14],v=b[3],u=b[7],A=b[11];b=b[15];var B=d[0],D=d[4],G=d[8],I=d[12],E=d[1],H=d[5],M=d[9],F=d[13],K=d[2],P=d[6],V=d[10],ia=d[14],W=d[3],aa=d[7],Z=d[11];d=d[15];a[0]=c*B+e*E+f*K+g*W;a[4]=c*D+e*H+f*P+g*aa;a[8]=c*G+e*M+f*V+g*Z;a[12]=c*I+e*F+f*ia+g*d;a[1]=h*B+k*E+l*K+m*W;a[5]=h*D+k*H+l*P+m*aa;a[9]=h*G+k*M+l*V+m*Z;a[13]=h*I+k*F+l*ia+m*d;a[2]=n*B+p*E+t*K+q*W;a[6]=n*D+p*H+t*P+q*aa;a[10]=n*G+p*M+t*V+q*Z;a[14]=n*I+p*F+t*ia+q*d;a[3]=v*B+u*
E+A*K+b*W;a[7]=v*D+u*H+A*P+b*aa;a[11]=v*G+u*M+A*V+b*Z;a[15]=v*I+u*F+A*ia+b*d;return this};da.prototype.multiplyScalar=function(c){var a=this.elements;a[0]*=c;a[4]*=c;a[8]*=c;a[12]*=c;a[1]*=c;a[5]*=c;a[9]*=c;a[13]*=c;a[2]*=c;a[6]*=c;a[10]*=c;a[14]*=c;a[3]*=c;a[7]*=c;a[11]*=c;a[15]*=c;return this};da.prototype.determinant=function(){var c=this.elements,a=c[0],b=c[4],d=c[8],e=c[12],f=c[1],g=c[5],h=c[9],k=c[13],l=c[2],m=c[6],n=c[10],p=c[14];return c[3]*(+e*h*m-d*k*m-e*g*n+b*k*n+d*g*p-b*h*p)+c[7]*(+a*
h*p-a*k*n+e*f*n-d*f*p+d*k*l-e*h*l)+c[11]*(+a*k*m-a*g*p-e*f*m+b*f*p+e*g*l-b*k*l)+c[15]*(-d*g*l-a*h*m+a*g*n+d*f*m-b*f*n+b*h*l)};da.prototype.transpose=function(){var c=this.elements;var a=c[1];c[1]=c[4];c[4]=a;a=c[2];c[2]=c[8];c[8]=a;a=c[6];c[6]=c[9];c[9]=a;a=c[3];c[3]=c[12];c[12]=a;a=c[7];c[7]=c[13];c[13]=a;a=c[11];c[11]=c[14];c[14]=a;return this};da.prototype.setPosition=function(c,a,b){var d=this.elements;c.isVector3?(d[12]=c.x,d[13]=c.y,d[14]=c.z):(d[12]=c,d[13]=a,d[14]=b);return this};da.prototype.getInverse=
function(c,a){void 0!==a&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");a=this.elements;var b=c.elements;c=b[0];var d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=b[6],l=b[7],m=b[8],n=b[9],p=b[10],t=b[11],q=b[12],v=b[13],u=b[14];b=b[15];var A=n*u*l-v*p*l+v*k*t-h*u*t-n*k*b+h*p*b,B=q*p*l-m*u*l-q*k*t+g*u*t+m*k*b-g*p*b,D=m*v*l-q*n*l+q*h*t-g*v*t-m*h*b+g*n*b,G=q*n*k-m*v*k-q*h*p+g*v*p+m*h*u-g*n*u,I=c*A+d*B+e*D+f*G;if(0===I)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0);I=1/I;a[0]=A*I;a[1]=(v*p*f-n*u*f-v*e*t+d*u*t+n*e*b-d*p*b)*I;a[2]=(h*u*f-v*k*f+v*e*l-d*u*l-h*e*b+d*k*b)*I;a[3]=(n*k*f-h*p*f-n*e*l+d*p*l+h*e*t-d*k*t)*I;a[4]=B*I;a[5]=(m*u*f-q*p*f+q*e*t-c*u*t-m*e*b+c*p*b)*I;a[6]=(q*k*f-g*u*f-q*e*l+c*u*l+g*e*b-c*k*b)*I;a[7]=(g*p*f-m*k*f+m*e*l-c*p*l-g*e*t+c*k*t)*I;a[8]=D*I;a[9]=(q*n*f-m*v*f-q*d*t+c*v*t+m*d*b-c*n*b)*I;a[10]=(g*v*f-q*h*f+q*d*l-c*v*l-g*d*b+c*h*b)*I;a[11]=(m*h*f-g*n*f-m*d*l+c*n*l+g*d*t-c*h*t)*I;a[12]=G*I;a[13]=(m*v*e-q*n*e+q*d*p-c*v*p-m*d*u+c*n*u)*
I;a[14]=(q*h*e-g*v*e-q*d*k+c*v*k+g*d*u-c*h*u)*I;a[15]=(g*n*e-m*h*e+m*d*k-c*n*k-g*d*p+c*h*p)*I;return this};da.prototype.scale=function(c){var a=this.elements,b=c.x,d=c.y;c=c.z;a[0]*=b;a[4]*=d;a[8]*=c;a[1]*=b;a[5]*=d;a[9]*=c;a[2]*=b;a[6]*=d;a[10]*=c;a[3]*=b;a[7]*=d;a[11]*=c;return this};da.prototype.getMaxScaleOnAxis=function(){var c=this.elements;return Math.sqrt(Math.max(c[0]*c[0]+c[1]*c[1]+c[2]*c[2],c[4]*c[4]+c[5]*c[5]+c[6]*c[6],c[8]*c[8]+c[9]*c[9]+c[10]*c[10]))};da.prototype.makeTranslation=function(c,
a,b){this.set(1,0,0,c,0,1,0,a,0,0,1,b,0,0,0,1);return this};da.prototype.makeRotationX=function(c){var a=Math.cos(c);c=Math.sin(c);this.set(1,0,0,0,0,a,-c,0,0,c,a,0,0,0,0,1);return this};da.prototype.makeRotationY=function(c){var a=Math.cos(c);c=Math.sin(c);this.set(a,0,c,0,0,1,0,0,-c,0,a,0,0,0,0,1);return this};da.prototype.makeRotationZ=function(c){var a=Math.cos(c);c=Math.sin(c);this.set(a,-c,0,0,c,a,0,0,0,0,1,0,0,0,0,1);return this};da.prototype.makeRotationAxis=function(c,a){var b=Math.cos(a);
a=Math.sin(a);var d=1-b,e=c.x,f=c.y;c=c.z;var g=d*e,h=d*f;this.set(g*e+b,g*f-a*c,g*c+a*f,0,g*f+a*c,h*f+b,h*c-a*e,0,g*c-a*f,h*c+a*e,d*c*c+b,0,0,0,0,1);return this};da.prototype.makeScale=function(c,a,b){this.set(c,0,0,0,0,a,0,0,0,0,b,0,0,0,0,1);return this};da.prototype.makeShear=function(c,a,b){this.set(1,a,b,0,c,1,b,0,c,a,1,0,0,0,0,1);return this};da.prototype.compose=function(c,a,b){var d=this.elements,e=a._x,f=a._y,g=a._z,h=a._w,k=e+e,l=f+f,m=g+g;a=e*k;var n=e*l;e*=m;var p=f*l;f*=m;g*=m;k*=h;l*=
h;h*=m;m=b.x;var t=b.y;b=b.z;d[0]=(1-(p+g))*m;d[1]=(n+h)*m;d[2]=(e-l)*m;d[3]=0;d[4]=(n-h)*t;d[5]=(1-(a+g))*t;d[6]=(f+k)*t;d[7]=0;d[8]=(e+l)*b;d[9]=(f-k)*b;d[10]=(1-(a+p))*b;d[11]=0;d[12]=c.x;d[13]=c.y;d[14]=c.z;d[15]=1;return this};da.prototype.decompose=function(c,a,b){var d=this.elements,e=se.set(d[0],d[1],d[2]).length(),f=se.set(d[4],d[5],d[6]).length(),g=se.set(d[8],d[9],d[10]).length();0>this.determinant()&&(e=-e);c.x=d[12];c.y=d[13];c.z=d[14];gb.copy(this);c=1/e;d=1/f;var h=1/g;gb.elements[0]*=
c;gb.elements[1]*=c;gb.elements[2]*=c;gb.elements[4]*=d;gb.elements[5]*=d;gb.elements[6]*=d;gb.elements[8]*=h;gb.elements[9]*=h;gb.elements[10]*=h;a.setFromRotationMatrix(gb);b.x=e;b.y=f;b.z=g;return this};da.prototype.makePerspective=function(c,a,b,d,e,f){void 0===f&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var g=this.elements;g[0]=2*e/(a-c);g[4]=0;g[8]=(a+c)/(a-c);g[12]=0;g[1]=0;g[5]=2*e/(b-d);g[9]=(b+d)/(b-d);g[13]=0;g[2]=
0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this};da.prototype.makeOrthographic=function(c,a,b,d,e,f){var g=this.elements,h=1/(a-c),k=1/(b-d),l=1/(f-e);g[0]=2*h;g[4]=0;g[8]=0;g[12]=-((a+c)*h);g[1]=0;g[5]=2*k;g[9]=0;g[13]=-((b+d)*k);g[2]=0;g[6]=0;g[10]=-2*l;g[14]=-((f+e)*l);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this};da.prototype.equals=function(c){var a=this.elements;c=c.elements;for(var b=0;16>b;b++)if(a[b]!==c[b])return!1;return!0};da.prototype.fromArray=
function(c,a){void 0===a&&(a=0);for(var b=0;16>b;b++)this.elements[b]=c[b+a];return this};da.prototype.toArray=function(c,a){void 0===c&&(c=[]);void 0===a&&(a=0);var b=this.elements;c[a]=b[0];c[a+1]=b[1];c[a+2]=b[2];c[a+3]=b[3];c[a+4]=b[4];c[a+5]=b[5];c[a+6]=b[6];c[a+7]=b[7];c[a+8]=b[8];c[a+9]=b[9];c[a+10]=b[10];c[a+11]=b[11];c[a+12]=b[12];c[a+13]=b[13];c[a+14]=b[14];c[a+15]=b[15];return c};var se=new w,gb=new da,Nl=new w(0,0,0),Ol=new w(1,1,1),Wc=new w,Gg=new w,ub=new w,hb=function f(a,b,d,e){void 0===
a&&(a=0);void 0===b&&(b=0);void 0===d&&(d=0);void 0===e&&(e=f.DefaultOrder);Object.defineProperty(this,"isEuler",{value:!0});this._x=a;this._y=b;this._z=d;this._order=e},uc={x:{configurable:!0},y:{configurable:!0},z:{configurable:!0},order:{configurable:!0}};uc.x.get=function(){return this._x};uc.x.set=function(a){this._x=a;this._onChangeCallback()};uc.y.get=function(){return this._y};uc.y.set=function(a){this._y=a;this._onChangeCallback()};uc.z.get=function(){return this._z};uc.z.set=function(a){this._z=
a;this._onChangeCallback()};uc.order.get=function(){return this._order};uc.order.set=function(a){this._order=a;this._onChangeCallback()};hb.prototype.set=function(a,b,d,e){this._x=a;this._y=b;this._z=d;this._order=e||this._order;this._onChangeCallback();return this};hb.prototype.clone=function(){return new this.constructor(this._x,this._y,this._z,this._order)};hb.prototype.copy=function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this._onChangeCallback();return this};hb.prototype.setFromRotationMatrix=
function(a,b,d){var e=xa.clamp,f=a.elements;a=f[0];var g=f[4],h=f[8],k=f[1],l=f[5],m=f[9],n=f[2],p=f[6];f=f[10];b=b||this._order;switch(b){case "XYZ":this._y=Math.asin(e(h,-1,1));.9999999>Math.abs(h)?(this._x=Math.atan2(-m,f),this._z=Math.atan2(-g,a)):(this._x=Math.atan2(p,l),this._z=0);break;case "YXZ":this._x=Math.asin(-e(m,-1,1));.9999999>Math.abs(m)?(this._y=Math.atan2(h,f),this._z=Math.atan2(k,l)):(this._y=Math.atan2(-n,a),this._z=0);break;case "ZXY":this._x=Math.asin(e(p,-1,1));.9999999>Math.abs(p)?
(this._y=Math.atan2(-n,f),this._z=Math.atan2(-g,l)):(this._y=0,this._z=Math.atan2(k,a));break;case "ZYX":this._y=Math.asin(-e(n,-1,1));.9999999>Math.abs(n)?(this._x=Math.atan2(p,f),this._z=Math.atan2(k,a)):(this._x=0,this._z=Math.atan2(-g,l));break;case "YZX":this._z=Math.asin(e(k,-1,1));.9999999>Math.abs(k)?(this._x=Math.atan2(-m,l),this._y=Math.atan2(-n,a)):(this._x=0,this._y=Math.atan2(h,f));break;case "XZY":this._z=Math.asin(-e(g,-1,1));.9999999>Math.abs(g)?(this._x=Math.atan2(p,l),this._y=Math.atan2(h,
a)):(this._x=Math.atan2(-m,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+b)}this._order=b;!1!==d&&this._onChangeCallback();return this};hb.prototype.setFromQuaternion=function(a,b,d){wj.makeRotationFromQuaternion(a);return this.setFromRotationMatrix(wj,b,d)};hb.prototype.setFromVector3=function(a,b){return this.set(a.x,a.y,a.z,b||this._order)};hb.prototype.reorder=function(a){xj.setFromEuler(this);return this.setFromQuaternion(xj,a)};
hb.prototype.equals=function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order};hb.prototype.fromArray=function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this._onChangeCallback();return this};hb.prototype.toArray=function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a};hb.prototype.toVector3=function(a){return a?a.set(this._x,this._y,this._z):new w(this._x,this._y,this._z)};
hb.prototype._onChange=function(a){this._onChangeCallback=a;return this};hb.prototype._onChangeCallback=function(){};Object.defineProperties(hb.prototype,uc);hb.DefaultOrder="XYZ";hb.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");var wj=new da,xj=new ua,$b=function(){this.mask=1};$b.prototype.set=function(a){this.mask=1<<a|0};$b.prototype.enable=function(a){this.mask=this.mask|1<<a|0};$b.prototype.enableAll=function(){this.mask=-1};$b.prototype.toggle=function(a){this.mask^=1<<a|0};$b.prototype.disable=
function(a){this.mask&=~(1<<a|0)};$b.prototype.disableAll=function(){this.mask=0};$b.prototype.test=function(a){return 0!==(this.mask&a.mask)};var ik=0,yj=new w,te=new ua,vc=new da,Hg=new w,Ef=new w,Pl=new w,Ql=new ua,zj=new w(1,0,0),Aj=new w(0,1,0),Bj=new w(0,0,1),Rl={type:"added"},Sl={type:"removed"};ha.DefaultUp=new w(0,1,0);ha.DefaultMatrixAutoUpdate=!0;ha.prototype=Object.assign(Object.create(wb.prototype),{constructor:ha,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(a){this.matrixAutoUpdate&&
this.updateMatrix();this.matrix.premultiply(a);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(a){this.quaternion.premultiply(a);return this},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(a,b){te.setFromAxisAngle(a,
b);this.quaternion.multiply(te);return this},rotateOnWorldAxis:function(a,b){te.setFromAxisAngle(a,b);this.quaternion.premultiply(te);return this},rotateX:function(a){return this.rotateOnAxis(zj,a)},rotateY:function(a){return this.rotateOnAxis(Aj,a)},rotateZ:function(a){return this.rotateOnAxis(Bj,a)},translateOnAxis:function(a,b){yj.copy(a).applyQuaternion(this.quaternion);this.position.add(yj.multiplyScalar(b));return this},translateX:function(a){return this.translateOnAxis(zj,a)},translateY:function(a){return this.translateOnAxis(Aj,
a)},translateZ:function(a){return this.translateOnAxis(Bj,a)},localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(a){return a.applyMatrix4(vc.getInverse(this.matrixWorld))},lookAt:function(a,b,d){a.isVector3?Hg.copy(a):Hg.set(a,b,d);a=this.parent;this.updateWorldMatrix(!0,!1);Ef.setFromMatrixPosition(this.matrixWorld);this.isCamera||this.isLight?vc.lookAt(Ef,Hg,this.up):vc.lookAt(Hg,Ef,this.up);this.quaternion.setFromRotationMatrix(vc);a&&(vc.extractRotation(a.matrixWorld),
te.setFromRotationMatrix(vc),this.quaternion.premultiply(te.inverse()))},add:function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this;a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,this.children.push(a),a.dispatchEvent(Rl)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a);return this},remove:function(a){if(1<
arguments.length){for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);return this}b=this.children.indexOf(a);-1!==b&&(a.parent=null,this.children.splice(b,1),a.dispatchEvent(Sl));return this},attach:function(a){this.updateWorldMatrix(!0,!1);vc.getInverse(this.matrixWorld);null!==a.parent&&(a.parent.updateWorldMatrix(!0,!1),vc.multiply(a.parent.matrixWorld));a.applyMatrix4(vc);a.updateWorldMatrix(!1,!1);this.add(a);return this},getObjectById:function(a){return this.getObjectByProperty("id",
a)},getObjectByName:function(a){return this.getObjectByProperty("name",a)},getObjectByProperty:function(a,b){if(this[a]===b)return this;for(var d=0,e=this.children.length;d<e;d++){var f=this.children[d].getObjectByProperty(a,b);if(void 0!==f)return f}},getWorldPosition:function(a){void 0===a&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),a=new w);this.updateMatrixWorld(!0);return a.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(a){void 0===a&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),
a=new ua);this.updateMatrixWorld(!0);this.matrixWorld.decompose(Ef,a,Pl);return a},getWorldScale:function(a){void 0===a&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),a=new w);this.updateMatrixWorld(!0);this.matrixWorld.decompose(Ef,Ql,a);return a},getWorldDirection:function(a){void 0===a&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),a=new w);this.updateMatrixWorld(!0);var b=this.matrixWorld.elements;return a.set(b[8],b[9],b[10]).normalize()},
raycast:function(){},traverse:function(a){a(this);for(var b=this.children,d=0,e=b.length;d<e;d++)b[d].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var b=this.children,d=0,e=b.length;d<e;d++)b[d].traverseVisible(a)}},traverseAncestors:function(a){var b=this.parent;null!==b&&(a(b),b.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){this.matrixAutoUpdate&&
this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=this.children,d=0,e=b.length;d<e;d++)b[d].updateMatrixWorld(a)},updateWorldMatrix:function(a,b){var d=this.parent;!0===a&&null!==d&&d.updateWorldMatrix(!0,!1);this.matrixAutoUpdate&&this.updateMatrix();null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,
this.matrix);if(!0===b)for(a=this.children,b=0,d=a.length;b<d;b++)a[b].updateWorldMatrix(!1,!0)},toJSON:function(a){function b(n,p){void 0===n[p.uuid]&&(n[p.uuid]=p.toJSON(a));return p.uuid}function d(n){var p=[],t;for(t in n){var q=n[t];delete q.metadata;p.push(q)}return p}var e=void 0===a||"string"===typeof a,f={};e&&(a={geometries:{},materials:{},textures:{},images:{},shapes:{}},f.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var g={};g.uuid=this.uuid;g.type=this.type;""!==
this.name&&(g.name=this.name);!0===this.castShadow&&(g.castShadow=!0);!0===this.receiveShadow&&(g.receiveShadow=!0);!1===this.visible&&(g.visible=!1);!1===this.frustumCulled&&(g.frustumCulled=!1);0!==this.renderOrder&&(g.renderOrder=this.renderOrder);"{}"!==JSON.stringify(this.userData)&&(g.userData=this.userData);g.layers=this.layers.mask;g.matrix=this.matrix.toArray();!1===this.matrixAutoUpdate&&(g.matrixAutoUpdate=!1);this.isInstancedMesh&&(g.type="InstancedMesh",g.count=this.count,g.instanceMatrix=
this.instanceMatrix.toJSON());if(this.isMesh||this.isLine||this.isPoints){g.geometry=b(a.geometries,this.geometry);var h=this.geometry.parameters;if(void 0!==h&&void 0!==h.shapes)if(h=h.shapes,Array.isArray(h))for(var k=0,l=h.length;k<l;k++)b(a.shapes,h[k]);else b(a.shapes,h)}if(void 0!==this.material)if(Array.isArray(this.material)){h=[];k=0;for(l=this.material.length;k<l;k++)h.push(b(a.materials,this.material[k]));g.material=h}else g.material=b(a.materials,this.material);if(0<this.children.length)for(g.children=
[],h=0;h<this.children.length;h++)g.children.push(this.children[h].toJSON(a).object);if(e){e=d(a.geometries);h=d(a.materials);k=d(a.textures);l=d(a.images);var m=d(a.shapes);0<e.length&&(f.geometries=e);0<h.length&&(f.materials=h);0<k.length&&(f.textures=k);0<l.length&&(f.images=l);0<m.length&&(f.shapes=m)}f.object=g;return f},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,b){void 0===b&&(b=!0);this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.rotation.order=
a.rotation.order;this.quaternion.copy(a.quaternion);this.scale.copy(a.scale);this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.layers.mask=a.layers.mask;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(b=0;b<a.children.length;b++)this.add(a.children[b].clone());
return this}});var ci=new w,Tl=new w,Ul=new Da,Na=function(a,b){Object.defineProperty(this,"isPlane",{value:!0});this.normal=void 0!==a?a:new w(1,0,0);this.constant=void 0!==b?b:0};Na.prototype.set=function(a,b){this.normal.copy(a);this.constant=b;return this};Na.prototype.setComponents=function(a,b,d,e){this.normal.set(a,b,d);this.constant=e;return this};Na.prototype.setFromNormalAndCoplanarPoint=function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this};Na.prototype.setFromCoplanarPoints=
function(a,b,d){b=ci.subVectors(d,b).cross(Tl.subVectors(a,b)).normalize();this.setFromNormalAndCoplanarPoint(b,a);return this};Na.prototype.clone=function(){return(new this.constructor).copy(this)};Na.prototype.copy=function(a){this.normal.copy(a.normal);this.constant=a.constant;return this};Na.prototype.normalize=function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this};Na.prototype.negate=function(){this.constant*=-1;this.normal.negate();return this};Na.prototype.distanceToPoint=
function(a){return this.normal.dot(a)+this.constant};Na.prototype.distanceToSphere=function(a){return this.distanceToPoint(a.center)-a.radius};Na.prototype.projectPoint=function(a,b){void 0===b&&(console.warn("THREE.Plane: .projectPoint() target is now required"),b=new w);return b.copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)};Na.prototype.intersectLine=function(a,b){void 0===b&&(console.warn("THREE.Plane: .intersectLine() target is now required"),b=new w);var d=a.delta(ci),e=
this.normal.dot(d);if(0===e){if(0===this.distanceToPoint(a.start))return b.copy(a.start)}else if(e=-(a.start.dot(this.normal)+this.constant)/e,!(0>e||1<e))return b.copy(d).multiplyScalar(e).add(a.start)};Na.prototype.intersectsLine=function(a){var b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b};Na.prototype.intersectsBox=function(a){return a.intersectsPlane(this)};Na.prototype.intersectsSphere=function(a){return a.intersectsPlane(this)};Na.prototype.coplanarPoint=
function(a){void 0===a&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),a=new w);return a.copy(this.normal).multiplyScalar(-this.constant)};Na.prototype.applyMatrix4=function(a,b){b=b||Ul.getNormalMatrix(a);a=this.coplanarPoint(ci).applyMatrix4(a);b=this.normal.applyMatrix3(b).normalize();this.constant=-a.dot(b);return this};Na.prototype.translate=function(a){this.constant-=a.dot(this.normal);return this};Na.prototype.equals=function(a){return a.normal.equals(this.normal)&&a.constant===
this.constant};var Yb=new w,wc=new w,di=new w,xc=new w,ue=new w,ve=new w,Cj=new w,ei=new w,fi=new w,gi=new w,Ga=function(a,b,d){this.a=void 0!==a?a:new w;this.b=void 0!==b?b:new w;this.c=void 0!==d?d:new w};Ga.getNormal=function(a,b,d,e){void 0===e&&(console.warn("THREE.Triangle: .getNormal() target is now required"),e=new w);e.subVectors(d,b);Yb.subVectors(a,b);e.cross(Yb);a=e.lengthSq();return 0<a?e.multiplyScalar(1/Math.sqrt(a)):e.set(0,0,0)};Ga.getBarycoord=function(a,b,d,e,f){Yb.subVectors(e,
b);wc.subVectors(d,b);di.subVectors(a,b);a=Yb.dot(Yb);b=Yb.dot(wc);d=Yb.dot(di);var g=wc.dot(wc);e=wc.dot(di);var h=a*g-b*b;void 0===f&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),f=new w);if(0===h)return f.set(-2,-1,-1);h=1/h;g=(g*d-b*e)*h;a=(a*e-b*d)*h;return f.set(1-g-a,a,g)};Ga.containsPoint=function(a,b,d,e){this.getBarycoord(a,b,d,e,xc);return 0<=xc.x&&0<=xc.y&&1>=xc.x+xc.y};Ga.getUV=function(a,b,d,e,f,g,h,k){this.getBarycoord(a,b,d,e,xc);k.set(0,0);k.addScaledVector(f,
xc.x);k.addScaledVector(g,xc.y);k.addScaledVector(h,xc.z);return k};Ga.isFrontFacing=function(a,b,d,e){Yb.subVectors(d,b);wc.subVectors(a,b);return 0>Yb.cross(wc).dot(e)?!0:!1};Ga.prototype.set=function(a,b,d){this.a.copy(a);this.b.copy(b);this.c.copy(d);return this};Ga.prototype.setFromPointsAndIndices=function(a,b,d,e){this.a.copy(a[b]);this.b.copy(a[d]);this.c.copy(a[e]);return this};Ga.prototype.clone=function(){return(new this.constructor).copy(this)};Ga.prototype.copy=function(a){this.a.copy(a.a);
this.b.copy(a.b);this.c.copy(a.c);return this};Ga.prototype.getArea=function(){Yb.subVectors(this.c,this.b);wc.subVectors(this.a,this.b);return.5*Yb.cross(wc).length()};Ga.prototype.getMidpoint=function(a){void 0===a&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),a=new w);return a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)};Ga.prototype.getNormal=function(a){return Ga.getNormal(this.a,this.b,this.c,a)};Ga.prototype.getPlane=function(a){void 0===a&&(console.warn("THREE.Triangle: .getPlane() target is now required"),
a=new Na);return a.setFromCoplanarPoints(this.a,this.b,this.c)};Ga.prototype.getBarycoord=function(a,b){return Ga.getBarycoord(a,this.a,this.b,this.c,b)};Ga.prototype.getUV=function(a,b,d,e,f){return Ga.getUV(a,this.a,this.b,this.c,b,d,e,f)};Ga.prototype.containsPoint=function(a){return Ga.containsPoint(a,this.a,this.b,this.c)};Ga.prototype.isFrontFacing=function(a){return Ga.isFrontFacing(this.a,this.b,this.c,a)};Ga.prototype.intersectsBox=function(a){return a.intersectsTriangle(this)};Ga.prototype.closestPointToPoint=
function(a,b){void 0===b&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),b=new w);var d=this.a,e=this.b,f=this.c;ue.subVectors(e,d);ve.subVectors(f,d);ei.subVectors(a,d);var g=ue.dot(ei),h=ve.dot(ei);if(0>=g&&0>=h)return b.copy(d);fi.subVectors(a,e);var k=ue.dot(fi),l=ve.dot(fi);if(0<=k&&l<=k)return b.copy(e);var m=g*l-k*h;if(0>=m&&0<=g&&0>=k)return e=g/(g-k),b.copy(d).addScaledVector(ue,e);gi.subVectors(a,f);a=ue.dot(gi);var n=ve.dot(gi);if(0<=n&&a<=n)return b.copy(f);
g=a*h-g*n;if(0>=g&&0<=h&&0>=n)return m=h/(h-n),b.copy(d).addScaledVector(ve,m);h=k*n-a*l;if(0>=h&&0<=l-k&&0<=a-n)return Cj.subVectors(f,e),m=(l-k)/(l-k+(a-n)),b.copy(e).addScaledVector(Cj,m);f=1/(h+g+m);e=g*f;m*=f;return b.copy(d).addScaledVector(ue,e).addScaledVector(ve,m)};Ga.prototype.equals=function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)};var Dj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,
blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,
darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,
lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,
mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,
purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},
Bb={h:0,s:0,l:0},Ig={h:0,s:0,l:0},S=function(a,b,d){Object.defineProperty(this,"isColor",{value:!0});return void 0===b&&void 0===d?this.set(a):this.setRGB(a,b,d)};S.prototype.set=function(a){a&&a.isColor?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this};S.prototype.setScalar=function(a){this.b=this.g=this.r=a;return this};S.prototype.setHex=function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this};S.prototype.setRGB=
function(a,b,d){this.r=a;this.g=b;this.b=d;return this};S.prototype.setHSL=function(a,b,d){a=xa.euclideanModulo(a,1);b=xa.clamp(b,0,1);d=xa.clamp(d,0,1);0===b?this.r=this.g=this.b=d:(b=.5>=d?d*(1+b):d+b-d*b,d=2*d-b,this.r=fh(d,b,a+1/3),this.g=fh(d,b,a),this.b=fh(d,b,a-1/3));return this};S.prototype.setStyle=function(a){function b(h){void 0!==h&&1>parseFloat(h)&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var d;if(d=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var e=d[2];switch(d[1]){case "rgb":case "rgba":if(d=
/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(e))return this.r=Math.min(255,parseInt(d[1],10))/255,this.g=Math.min(255,parseInt(d[2],10))/255,this.b=Math.min(255,parseInt(d[3],10))/255,b(d[5]),this;if(d=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(e))return this.r=Math.min(100,parseInt(d[1],10))/100,this.g=Math.min(100,parseInt(d[2],10))/100,this.b=Math.min(100,parseInt(d[3],10))/100,b(d[5]),this;break;case "hsl":case "hsla":if(d=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(e)){e=
parseFloat(d[1])/360;var f=parseInt(d[2],10)/100,g=parseInt(d[3],10)/100;b(d[5]);return this.setHSL(e,f,g)}}}else if(d=/^#([A-Fa-f0-9]+)$/.exec(a)){d=d[1];e=d.length;if(3===e)return this.r=parseInt(d.charAt(0)+d.charAt(0),16)/255,this.g=parseInt(d.charAt(1)+d.charAt(1),16)/255,this.b=parseInt(d.charAt(2)+d.charAt(2),16)/255,this;if(6===e)return this.r=parseInt(d.charAt(0)+d.charAt(1),16)/255,this.g=parseInt(d.charAt(2)+d.charAt(3),16)/255,this.b=parseInt(d.charAt(4)+d.charAt(5),16)/255,this}return a&&
0<a.length?this.setColorName(a):this};S.prototype.setColorName=function(a){var b=Dj[a];void 0!==b?this.setHex(b):console.warn("THREE.Color: Unknown color "+a);return this};S.prototype.clone=function(){return new this.constructor(this.r,this.g,this.b)};S.prototype.copy=function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this};S.prototype.copyGammaToLinear=function(a,b){void 0===b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this};S.prototype.copyLinearToGamma=
function(a,b){void 0===b&&(b=2);b=0<b?1/b:1;this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this};S.prototype.convertGammaToLinear=function(a){this.copyGammaToLinear(this,a);return this};S.prototype.convertLinearToGamma=function(a){this.copyLinearToGamma(this,a);return this};S.prototype.copySRGBToLinear=function(a){this.r=gh(a.r);this.g=gh(a.g);this.b=gh(a.b);return this};S.prototype.copyLinearToSRGB=function(a){this.r=hh(a.r);this.g=hh(a.g);this.b=hh(a.b);return this};
S.prototype.convertSRGBToLinear=function(){this.copySRGBToLinear(this);return this};S.prototype.convertLinearToSRGB=function(){this.copyLinearToSRGB(this);return this};S.prototype.getHex=function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0};S.prototype.getHexString=function(){return("000000"+this.getHex().toString(16)).slice(-6)};S.prototype.getHSL=function(a){void 0===a&&(console.warn("THREE.Color: .getHSL() target is now required"),a={h:0,s:0,l:0});var b=this.r,d=this.g,e=this.b,f=Math.max(b,
d,e),g=Math.min(b,d,e),h,k=(g+f)/2;if(g===f)g=h=0;else{var l=f-g;g=.5>=k?l/(f+g):l/(2-f-g);switch(f){case b:h=(d-e)/l+(d<e?6:0);break;case d:h=(e-b)/l+2;break;case e:h=(b-d)/l+4}h/=6}a.h=h;a.s=g;a.l=k;return a};S.prototype.getStyle=function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"};S.prototype.offsetHSL=function(a,b,d){this.getHSL(Bb);Bb.h+=a;Bb.s+=b;Bb.l+=d;this.setHSL(Bb.h,Bb.s,Bb.l);return this};S.prototype.add=function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this};
S.prototype.addColors=function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this};S.prototype.addScalar=function(a){this.r+=a;this.g+=a;this.b+=a;return this};S.prototype.sub=function(a){this.r=Math.max(0,this.r-a.r);this.g=Math.max(0,this.g-a.g);this.b=Math.max(0,this.b-a.b);return this};S.prototype.multiply=function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this};S.prototype.multiplyScalar=function(a){this.r*=a;this.g*=a;this.b*=a;return this};S.prototype.lerp=function(a,b){this.r+=
(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this};S.prototype.lerpHSL=function(a,b){this.getHSL(Bb);a.getHSL(Ig);a=xa.lerp(Bb.h,Ig.h,b);var d=xa.lerp(Bb.s,Ig.s,b);b=xa.lerp(Bb.l,Ig.l,b);this.setHSL(a,d,b);return this};S.prototype.equals=function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b};S.prototype.fromArray=function(a,b){void 0===b&&(b=0);this.r=a[b];this.g=a[b+1];this.b=a[b+2];return this};S.prototype.toArray=function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=
this.r;a[b+1]=this.g;a[b+2]=this.b;return a};S.prototype.fromBufferAttribute=function(a,b){this.r=a.getX(b);this.g=a.getY(b);this.b=a.getZ(b);!0===a.normalized&&(this.r/=255,this.g/=255,this.b/=255);return this};S.prototype.toJSON=function(){return this.getHex()};S.NAMES=Dj;S.prototype.r=1;S.prototype.g=1;S.prototype.b=1;var ad=function(a,b,d,e,f,g){this.a=a;this.b=b;this.c=d;this.normal=e&&e.isVector3?e:new w;this.vertexNormals=Array.isArray(e)?e:[];this.color=f&&f.isColor?f:new S;this.vertexColors=
Array.isArray(f)?f:[];this.materialIndex=void 0!==g?g:0};ad.prototype.clone=function(){return(new this.constructor).copy(this)};ad.prototype.copy=function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var b=0,d=a.vertexNormals.length;b<d;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();b=0;for(d=a.vertexColors.length;b<d;b++)this.vertexColors[b]=a.vertexColors[b].clone();return this};var jk=0;ra.prototype=Object.assign(Object.create(wb.prototype),
{constructor:ra,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(a){if(void 0!==a)for(var b in a){var d=a[b];if(void 0===d)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else if("shading"===b)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===d?!0:!1;else{var e=this[b];void 0===e?console.warn("THREE."+this.type+": '"+b+"' is not a property of this material."):
e&&e.isColor?e.set(d):e&&e.isVector3&&d&&d.isVector3?e.copy(d):this[b]=d}}},toJSON:function(a){function b(f){var g=[],h;for(h in f){var k=f[h];delete k.metadata;g.push(k)}return g}var d=void 0===a||"string"===typeof a;d&&(a={textures:{},images:{}});var e={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);this.color&&this.color.isColor&&(e.color=this.color.getHex());void 0!==this.roughness&&(e.roughness=this.roughness);
void 0!==this.metalness&&(e.metalness=this.metalness);this.sheen&&this.sheen.isColor&&(e.sheen=this.sheen.getHex());this.emissive&&this.emissive.isColor&&(e.emissive=this.emissive.getHex());this.emissiveIntensity&&1!==this.emissiveIntensity&&(e.emissiveIntensity=this.emissiveIntensity);this.specular&&this.specular.isColor&&(e.specular=this.specular.getHex());void 0!==this.shininess&&(e.shininess=this.shininess);void 0!==this.clearcoat&&(e.clearcoat=this.clearcoat);void 0!==this.clearcoatRoughness&&
(e.clearcoatRoughness=this.clearcoatRoughness);this.clearcoatMap&&this.clearcoatMap.isTexture&&(e.clearcoatMap=this.clearcoatMap.toJSON(a).uuid);this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(e.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(a).uuid);this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(e.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(a).uuid,e.clearcoatNormalScale=this.clearcoatNormalScale.toArray());this.map&&this.map.isTexture&&(e.map=this.map.toJSON(a).uuid);
this.matcap&&this.matcap.isTexture&&(e.matcap=this.matcap.toJSON(a).uuid);this.alphaMap&&this.alphaMap.isTexture&&(e.alphaMap=this.alphaMap.toJSON(a).uuid);this.lightMap&&this.lightMap.isTexture&&(e.lightMap=this.lightMap.toJSON(a).uuid);this.aoMap&&this.aoMap.isTexture&&(e.aoMap=this.aoMap.toJSON(a).uuid,e.aoMapIntensity=this.aoMapIntensity);this.bumpMap&&this.bumpMap.isTexture&&(e.bumpMap=this.bumpMap.toJSON(a).uuid,e.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(e.normalMap=
this.normalMap.toJSON(a).uuid,e.normalMapType=this.normalMapType,e.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(e.displacementMap=this.displacementMap.toJSON(a).uuid,e.displacementScale=this.displacementScale,e.displacementBias=this.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&(e.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(e.metalnessMap=this.metalnessMap.toJSON(a).uuid);this.emissiveMap&&
this.emissiveMap.isTexture&&(e.emissiveMap=this.emissiveMap.toJSON(a).uuid);this.specularMap&&this.specularMap.isTexture&&(e.specularMap=this.specularMap.toJSON(a).uuid);this.envMap&&this.envMap.isTexture&&(e.envMap=this.envMap.toJSON(a).uuid,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,void 0!==this.combine&&(e.combine=this.combine),void 0!==this.envMapIntensity&&(e.envMapIntensity=this.envMapIntensity));this.gradientMap&&this.gradientMap.isTexture&&(e.gradientMap=this.gradientMap.toJSON(a).uuid);
void 0!==this.size&&(e.size=this.size);void 0!==this.sizeAttenuation&&(e.sizeAttenuation=this.sizeAttenuation);1!==this.blending&&(e.blending=this.blending);!0===this.flatShading&&(e.flatShading=this.flatShading);0!==this.side&&(e.side=this.side);this.vertexColors&&(e.vertexColors=!0);1>this.opacity&&(e.opacity=this.opacity);!0===this.transparent&&(e.transparent=this.transparent);e.depthFunc=this.depthFunc;e.depthTest=this.depthTest;e.depthWrite=this.depthWrite;e.stencilWrite=this.stencilWrite;e.stencilWriteMask=
this.stencilWriteMask;e.stencilFunc=this.stencilFunc;e.stencilRef=this.stencilRef;e.stencilFuncMask=this.stencilFuncMask;e.stencilFail=this.stencilFail;e.stencilZFail=this.stencilZFail;e.stencilZPass=this.stencilZPass;this.rotation&&0!==this.rotation&&(e.rotation=this.rotation);!0===this.polygonOffset&&(e.polygonOffset=!0);0!==this.polygonOffsetFactor&&(e.polygonOffsetFactor=this.polygonOffsetFactor);0!==this.polygonOffsetUnits&&(e.polygonOffsetUnits=this.polygonOffsetUnits);this.linewidth&&1!==this.linewidth&&
(e.linewidth=this.linewidth);void 0!==this.dashSize&&(e.dashSize=this.dashSize);void 0!==this.gapSize&&(e.gapSize=this.gapSize);void 0!==this.scale&&(e.scale=this.scale);!0===this.dithering&&(e.dithering=!0);0<this.alphaTest&&(e.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(e.premultipliedAlpha=this.premultipliedAlpha);!0===this.wireframe&&(e.wireframe=this.wireframe);1<this.wireframeLinewidth&&(e.wireframeLinewidth=this.wireframeLinewidth);"round"!==this.wireframeLinecap&&(e.wireframeLinecap=
this.wireframeLinecap);"round"!==this.wireframeLinejoin&&(e.wireframeLinejoin=this.wireframeLinejoin);!0===this.morphTargets&&(e.morphTargets=!0);!0===this.morphNormals&&(e.morphNormals=!0);!0===this.skinning&&(e.skinning=!0);!1===this.visible&&(e.visible=!1);!1===this.toneMapped&&(e.toneMapped=!1);"{}"!==JSON.stringify(this.userData)&&(e.userData=this.userData);d&&(d=b(a.textures),a=b(a.images),0<d.length&&(e.textures=d),0<a.length&&(e.images=a));return e},clone:function(){return(new this.constructor).copy(this)},
copy:function(a){this.name=a.name;this.fog=a.fog;this.blending=a.blending;this.side=a.side;this.flatShading=a.flatShading;this.vertexColors=a.vertexColors;this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=a.blendDstAlpha;this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.stencilWriteMask=
a.stencilWriteMask;this.stencilFunc=a.stencilFunc;this.stencilRef=a.stencilRef;this.stencilFuncMask=a.stencilFuncMask;this.stencilFail=a.stencilFail;this.stencilZFail=a.stencilZFail;this.stencilZPass=a.stencilZPass;this.stencilWrite=a.stencilWrite;var b=a.clippingPlanes,d=null;if(null!==b){var e=b.length;d=Array(e);for(var f=0;f!==e;++f)d[f]=b[f].clone()}this.clippingPlanes=d;this.clipIntersection=a.clipIntersection;this.clipShadows=a.clipShadows;this.shadowSide=a.shadowSide;this.colorWrite=a.colorWrite;
this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.dithering=a.dithering;this.alphaTest=a.alphaTest;this.premultipliedAlpha=a.premultipliedAlpha;this.visible=a.visible;this.toneMapped=a.toneMapped;this.userData=JSON.parse(JSON.stringify(a.userData));return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(ra.prototype,"needsUpdate",{set:function(a){!0===
a&&this.version++}});Kb.prototype=Object.create(ra.prototype);Kb.prototype.constructor=Kb;Kb.prototype.isMeshBasicMaterial=!0;Kb.prototype.copy=function(a){ra.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=
a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;return this};var Ua=new w,Jg=new L;Object.defineProperty(pa.prototype,"needsUpdate",{set:function(a){!0===a&&this.version++}});Object.assign(pa.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(a){this.usage=a;return this},copy:function(a){this.name=
a.name;this.array=new a.array.constructor(a.array);this.itemSize=a.itemSize;this.count=a.count;this.normalized=a.normalized;this.usage=a.usage;return this},copyAt:function(a,b,d){a*=this.itemSize;d*=b.itemSize;for(var e=0,f=this.itemSize;e<f;e++)this.array[a+e]=b.array[d+e];return this},copyArray:function(a){this.array.set(a);return this},copyColorsArray:function(a){for(var b=this.array,d=0,e=0,f=a.length;e<f;e++){var g=a[e];void 0===g&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",
e),g=new S);b[d++]=g.r;b[d++]=g.g;b[d++]=g.b}return this},copyVector2sArray:function(a){for(var b=this.array,d=0,e=0,f=a.length;e<f;e++){var g=a[e];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",e),g=new L);b[d++]=g.x;b[d++]=g.y}return this},copyVector3sArray:function(a){for(var b=this.array,d=0,e=0,f=a.length;e<f;e++){var g=a[e];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",e),g=new w);b[d++]=g.x;b[d++]=g.y;
b[d++]=g.z}return this},copyVector4sArray:function(a){for(var b=this.array,d=0,e=0,f=a.length;e<f;e++){var g=a[e];void 0===g&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",e),g=new ca);b[d++]=g.x;b[d++]=g.y;b[d++]=g.z;b[d++]=g.w}return this},applyMatrix3:function(a){if(2===this.itemSize)for(var b=0,d=this.count;b<d;b++)Jg.fromBufferAttribute(this,b),Jg.applyMatrix3(a),this.setXY(b,Jg.x,Jg.y);else if(3===this.itemSize)for(b=0,d=this.count;b<d;b++)Ua.fromBufferAttribute(this,
b),Ua.applyMatrix3(a),this.setXYZ(b,Ua.x,Ua.y,Ua.z);return this},applyMatrix4:function(a){for(var b=0,d=this.count;b<d;b++)Ua.x=this.getX(b),Ua.y=this.getY(b),Ua.z=this.getZ(b),Ua.applyMatrix4(a),this.setXYZ(b,Ua.x,Ua.y,Ua.z);return this},applyNormalMatrix:function(a){for(var b=0,d=this.count;b<d;b++)Ua.x=this.getX(b),Ua.y=this.getY(b),Ua.z=this.getZ(b),Ua.applyNormalMatrix(a),this.setXYZ(b,Ua.x,Ua.y,Ua.z);return this},transformDirection:function(a){for(var b=0,d=this.count;b<d;b++)Ua.x=this.getX(b),
Ua.y=this.getY(b),Ua.z=this.getZ(b),Ua.transformDirection(a),this.setXYZ(b,Ua.x,Ua.y,Ua.z);return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},getX:function(a){return this.array[a*this.itemSize]},setX:function(a,b){this.array[a*this.itemSize]=b;return this},getY:function(a){return this.array[a*this.itemSize+1]},setY:function(a,b){this.array[a*this.itemSize+1]=b;return this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,b){this.array[a*this.itemSize+
2]=b;return this},getW:function(a){return this.array[a*this.itemSize+3]},setW:function(a,b){this.array[a*this.itemSize+3]=b;return this},setXY:function(a,b,d){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=d;return this},setXYZ:function(a,b,d,e){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=d;this.array[a+2]=e;return this},setXYZW:function(a,b,d,e,f){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=d;this.array[a+2]=e;this.array[a+3]=f;return this},onUpload:function(a){this.onUploadCallback=
a;return this},clone:function(){return(new this.constructor(this.array,this.itemSize)).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});Ce.prototype=Object.create(pa.prototype);Ce.prototype.constructor=Ce;De.prototype=Object.create(pa.prototype);De.prototype.constructor=De;Ee.prototype=Object.create(pa.prototype);Ee.prototype.constructor=Ee;Fe.prototype=Object.create(pa.prototype);
Fe.prototype.constructor=Fe;Zc.prototype=Object.create(pa.prototype);Zc.prototype.constructor=Zc;Ge.prototype=Object.create(pa.prototype);Ge.prototype.constructor=Ge;$c.prototype=Object.create(pa.prototype);$c.prototype.constructor=$c;ea.prototype=Object.create(pa.prototype);ea.prototype.constructor=ea;He.prototype=Object.create(pa.prototype);He.prototype.constructor=He;var hi=function(){this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=
[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1};hi.prototype.computeGroups=function(a){var b=[],d=void 0,e=a.faces;for(a=0;a<e.length;a++){var f=e[a];if(f.materialIndex!==d){d=f.materialIndex;void 0!==g&&(g.count=3*a-g.start,b.push(g));var g={start:3*a,materialIndex:d}}}void 0!==g&&(g.count=3*a-g.start,b.push(g));this.groups=b};hi.prototype.fromGeometry=function(a){var b=
a.faces,d=a.vertices,e=a.faceVertexUvs,f=e[0]&&0<e[0].length,g=e[1]&&0<e[1].length,h=a.morphTargets,k=h.length;if(0<k){var l=[];for(var m=0;m<k;m++)l[m]={name:h[m].name,data:[]};this.morphTargets.position=l}m=a.morphNormals;var n=m.length;if(0<n){var p=[];for(var t=0;t<n;t++)p[t]={name:m[t].name,data:[]};this.morphTargets.normal=p}t=a.skinIndices;var q=a.skinWeights,v=t.length===d.length,u=q.length===d.length;0<d.length&&0===b.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");
for(var A=0;A<b.length;A++){var B=b[A];this.vertices.push(d[B.a],d[B.b],d[B.c]);var D=B.vertexNormals;3===D.length?this.normals.push(D[0],D[1],D[2]):(D=B.normal,this.normals.push(D,D,D));D=B.vertexColors;3===D.length?this.colors.push(D[0],D[1],D[2]):(D=B.color,this.colors.push(D,D,D));!0===f&&(D=e[0][A],void 0!==D?this.uvs.push(D[0],D[1],D[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",A),this.uvs.push(new L,new L,new L)));!0===g&&(D=e[1][A],void 0!==D?this.uvs2.push(D[0],
D[1],D[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",A),this.uvs2.push(new L,new L,new L)));for(D=0;D<k;D++){var G=h[D].vertices;l[D].data.push(G[B.a],G[B.b],G[B.c])}for(D=0;D<n;D++)G=m[D].vertexNormals[A],p[D].data.push(G.a,G.b,G.c);v&&this.skinIndices.push(t[B.a],t[B.b],t[B.c]);u&&this.skinWeights.push(q[B.a],q[B.b],q[B.c])}this.computeGroups(a);this.verticesNeedUpdate=a.verticesNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;
this.uvsNeedUpdate=a.uvsNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return this};var kk=1,ic=new da,ii=new ha,we=new w,Jb=new za,Ff=new za,jb=new w;ka.prototype=Object.assign(Object.create(wb.prototype),{constructor:ka,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(a){Array.isArray(a)?this.index=new (65535<vi(a)?$c:Zc)(a,1):this.index=
a},getAttribute:function(a){return this.attributes[a]},setAttribute:function(a,b){this.attributes[a]=b;return this},deleteAttribute:function(a){delete this.attributes[a];return this},addGroup:function(a,b,d){this.groups.push({start:a,count:b,materialIndex:void 0!==d?d:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,b){this.drawRange.start=a;this.drawRange.count=b},applyMatrix4:function(a){var b=this.attributes.position;void 0!==b&&(b.applyMatrix4(a),b.needsUpdate=!0);b=this.attributes.normal;
if(void 0!==b){var d=(new Da).getNormalMatrix(a);b.applyNormalMatrix(d);b.needsUpdate=!0}b=this.attributes.tangent;void 0!==b&&(b.transformDirection(a),b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this},rotateX:function(a){ic.makeRotationX(a);this.applyMatrix4(ic);return this},rotateY:function(a){ic.makeRotationY(a);this.applyMatrix4(ic);return this},rotateZ:function(a){ic.makeRotationZ(a);this.applyMatrix4(ic);
return this},translate:function(a,b,d){ic.makeTranslation(a,b,d);this.applyMatrix4(ic);return this},scale:function(a,b,d){ic.makeScale(a,b,d);this.applyMatrix4(ic);return this},lookAt:function(a){ii.lookAt(a);ii.updateMatrix();this.applyMatrix4(ii.matrix);return this},center:function(){this.computeBoundingBox();this.boundingBox.getCenter(we).negate();this.translate(we.x,we.y,we.z);return this},setFromObject:function(a){var b=a.geometry;if(a.isPoints||a.isLine){a=new ea(3*b.vertices.length,3);var d=
new ea(3*b.colors.length,3);this.setAttribute("position",a.copyVector3sArray(b.vertices));this.setAttribute("color",d.copyColorsArray(b.colors));b.lineDistances&&b.lineDistances.length===b.vertices.length&&(a=new ea(b.lineDistances.length,1),this.setAttribute("lineDistance",a.copyArray(b.lineDistances)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else a.isMesh&&b&&b.isGeometry&&this.fromGeometry(b);return this},
setFromPoints:function(a){for(var b=[],d=0,e=a.length;d<e;d++){var f=a[d];b.push(f.x,f.y,f.z||0)}this.setAttribute("position",new ea(b,3));return this},updateFromObject:function(a){var b=a.geometry;if(a.isMesh){var d=b.__directGeometry;!0===b.elementsNeedUpdate&&(d=void 0,b.elementsNeedUpdate=!1);if(void 0===d)return this.fromGeometry(b);d.verticesNeedUpdate=b.verticesNeedUpdate;d.normalsNeedUpdate=b.normalsNeedUpdate;d.colorsNeedUpdate=b.colorsNeedUpdate;d.uvsNeedUpdate=b.uvsNeedUpdate;d.groupsNeedUpdate=
b.groupsNeedUpdate;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=d}!0===b.verticesNeedUpdate&&(d=this.attributes.position,void 0!==d&&(d.copyVector3sArray(b.vertices),d.needsUpdate=!0),b.verticesNeedUpdate=!1);!0===b.normalsNeedUpdate&&(d=this.attributes.normal,void 0!==d&&(d.copyVector3sArray(b.normals),d.needsUpdate=!0),b.normalsNeedUpdate=!1);!0===b.colorsNeedUpdate&&(d=this.attributes.color,void 0!==d&&(d.copyColorsArray(b.colors),
d.needsUpdate=!0),b.colorsNeedUpdate=!1);b.uvsNeedUpdate&&(d=this.attributes.uv,void 0!==d&&(d.copyVector2sArray(b.uvs),d.needsUpdate=!0),b.uvsNeedUpdate=!1);b.lineDistancesNeedUpdate&&(d=this.attributes.lineDistance,void 0!==d&&(d.copyArray(b.lineDistances),d.needsUpdate=!0),b.lineDistancesNeedUpdate=!1);b.groupsNeedUpdate&&(b.computeGroups(a.geometry),this.groups=b.groups,b.groupsNeedUpdate=!1);return this},fromGeometry:function(a){a.__directGeometry=(new hi).fromGeometry(a);return this.fromDirectGeometry(a.__directGeometry)},
fromDirectGeometry:function(a){var b=new Float32Array(3*a.vertices.length);this.setAttribute("position",(new pa(b,3)).copyVector3sArray(a.vertices));0<a.normals.length&&(b=new Float32Array(3*a.normals.length),this.setAttribute("normal",(new pa(b,3)).copyVector3sArray(a.normals)));0<a.colors.length&&(b=new Float32Array(3*a.colors.length),this.setAttribute("color",(new pa(b,3)).copyColorsArray(a.colors)));0<a.uvs.length&&(b=new Float32Array(2*a.uvs.length),this.setAttribute("uv",(new pa(b,2)).copyVector2sArray(a.uvs)));
0<a.uvs2.length&&(b=new Float32Array(2*a.uvs2.length),this.setAttribute("uv2",(new pa(b,2)).copyVector2sArray(a.uvs2)));this.groups=a.groups;for(var d in a.morphTargets){b=[];for(var e=a.morphTargets[d],f=0,g=e.length;f<g;f++){var h=e[f],k=new ea(3*h.data.length,3);k.name=h.name;b.push(k.copyVector3sArray(h.data))}this.morphAttributes[d]=b}0<a.skinIndices.length&&(d=new ea(4*a.skinIndices.length,4),this.setAttribute("skinIndex",d.copyVector4sArray(a.skinIndices)));0<a.skinWeights.length&&(d=new ea(4*
a.skinWeights.length,4),this.setAttribute("skinWeight",d.copyVector4sArray(a.skinWeights)));null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new za);var a=this.attributes.position,b=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',
this),this.boundingBox.set(new w(-Infinity,-Infinity,-Infinity),new w(Infinity,Infinity,Infinity));else{if(void 0!==a){if(this.boundingBox.setFromBufferAttribute(a),b){a=0;for(var d=b.length;a<d;a++)Jb.setFromBufferAttribute(b[a]),this.morphTargetsRelative?(jb.addVectors(this.boundingBox.min,Jb.min),this.boundingBox.expandByPoint(jb),jb.addVectors(this.boundingBox.max,Jb.max),this.boundingBox.expandByPoint(jb)):(this.boundingBox.expandByPoint(Jb.min),this.boundingBox.expandByPoint(Jb.max))}}else this.boundingBox.makeEmpty();
(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Wa);var a=this.attributes.position,b=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',
this),this.boundingSphere.set(new w,Infinity);else if(a){var d=this.boundingSphere.center;Jb.setFromBufferAttribute(a);if(b)for(var e=0,f=b.length;e<f;e++)Ff.setFromBufferAttribute(b[e]),this.morphTargetsRelative?(jb.addVectors(Jb.min,Ff.min),Jb.expandByPoint(jb),jb.addVectors(Jb.max,Ff.max),Jb.expandByPoint(jb)):(Jb.expandByPoint(Ff.min),Jb.expandByPoint(Ff.max));Jb.getCenter(d);f=e=0;for(var g=a.count;f<g;f++)jb.fromBufferAttribute(a,f),e=Math.max(e,d.distanceToSquared(jb));if(b)for(f=0,g=b.length;f<
g;f++)for(var h=b[f],k=this.morphTargetsRelative,l=0,m=h.count;l<m;l++)jb.fromBufferAttribute(h,l),k&&(we.fromBufferAttribute(a,l),jb.add(we)),e=Math.max(e,d.distanceToSquared(jb));this.boundingSphere.radius=Math.sqrt(e);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.index,b=this.getAttribute("position");
if(void 0!==b){var d=this.getAttribute("normal");if(void 0===d)d=new pa(new Float32Array(3*b.count),3),this.setAttribute("normal",d);else for(var e=0,f=d.count;e<f;e++)d.setXYZ(e,0,0,0);e=new w;f=new w;var g=new w,h=new w,k=new w,l=new w,m=new w,n=new w;if(a)for(var p=0,t=a.count;p<t;p+=3){var q=a.getX(p+0),v=a.getX(p+1),u=a.getX(p+2);e.fromBufferAttribute(b,q);f.fromBufferAttribute(b,v);g.fromBufferAttribute(b,u);m.subVectors(g,f);n.subVectors(e,f);m.cross(n);h.fromBufferAttribute(d,q);k.fromBufferAttribute(d,
v);l.fromBufferAttribute(d,u);h.add(m);k.add(m);l.add(m);d.setXYZ(q,h.x,h.y,h.z);d.setXYZ(v,k.x,k.y,k.z);d.setXYZ(u,l.x,l.y,l.z)}else for(a=0,h=b.count;a<h;a+=3)e.fromBufferAttribute(b,a+0),f.fromBufferAttribute(b,a+1),g.fromBufferAttribute(b,a+2),m.subVectors(g,f),n.subVectors(e,f),m.cross(n),d.setXYZ(a+0,m.x,m.y,m.z),d.setXYZ(a+1,m.x,m.y,m.z),d.setXYZ(a+2,m.x,m.y,m.z);this.normalizeNormals();d.needsUpdate=!0}},merge:function(a,b){if(a&&a.isBufferGeometry){void 0===b&&(b=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));
var d=this.attributes,e;for(e in d)if(void 0!==a.attributes[e]){var f=d[e].array,g=a.attributes[e],h=g.array,k=g.itemSize*b;g=Math.min(h.length,f.length-k);for(var l=0;l<g;l++,k++)f[k]=h[l]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a)},normalizeNormals:function(){for(var a=this.attributes.normal,b=0,d=a.count;b<d;b++)jb.fromBufferAttribute(a,b),jb.normalize(),a.setXYZ(b,jb.x,jb.y,jb.z)},toNonIndexed:function(){function a(n,p){var t=
n.array,q=n.itemSize;n=n.normalized;for(var v=new t.constructor(p.length*q),u,A=0,B=0,D=p.length;B<D;B++){u=p[B]*q;for(var G=0;G<q;G++)v[A++]=t[u++]}return new pa(v,q,n)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var b=new ka,d=this.index.array,e=this.attributes;for(h in e){var f=a(e[h],d);b.setAttribute(h,f)}e=this.morphAttributes;for(var g in e){var h=[];f=e[g];for(var k=0,l=f.length;k<l;k++){var m=a(f[k],d);h.push(m)}b.morphAttributes[g]=
h}b.morphTargetsRelative=this.morphTargetsRelative;d=this.groups;g=0;for(e=d.length;g<e;g++)h=d[g],b.addGroup(h.start,h.count,h.materialIndex);return b},toJSON:function(){var a={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};a.uuid=this.uuid;a.type=this.type;""!==this.name&&(a.name=this.name);0<Object.keys(this.userData).length&&(a.userData=this.userData);if(void 0!==this.parameters){var b=this.parameters;for(d in b)void 0!==b[d]&&(a[d]=b[d]);return a}a.data={attributes:{}};
var d=this.index;null!==d&&(a.data.index={type:d.array.constructor.name,array:Array.prototype.slice.call(d.array)});d=this.attributes;for(var e in d){var f=d[e],g=f.toJSON(a.data);""!==f.name&&(g.name=f.name);a.data.attributes[e]=g}e={};d=!1;for(b in this.morphAttributes){f=this.morphAttributes[b];g=[];for(var h=0,k=f.length;h<k;h++){var l=f[h],m=l.toJSON(a.data);""!==l.name&&(m.name=l.name);g.push(m)}0<g.length&&(e[b]=g,d=!0)}d&&(a.data.morphAttributes=e,a.data.morphTargetsRelative=this.morphTargetsRelative);
b=this.groups;0<b.length&&(a.data.groups=JSON.parse(JSON.stringify(b)));b=this.boundingSphere;null!==b&&(a.data.boundingSphere={center:b.center.toArray(),radius:b.radius});return a},clone:function(){return(new ka).copy(this)},copy:function(a){this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;var b={};this.name=a.name;var d=a.index;null!==d&&this.setIndex(d.clone(b));d=a.attributes;for(var e in d)this.setAttribute(e,d[e].clone(b));e=
a.morphAttributes;for(var f in e){d=[];for(var g=e[f],h=0,k=g.length;h<k;h++)d.push(g[h].clone(b));this.morphAttributes[f]=d}this.morphTargetsRelative=a.morphTargetsRelative;b=a.groups;f=0;for(e=b.length;f<e;f++)d=b[f],this.addGroup(d.start,d.count,d.materialIndex);b=a.boundingBox;null!==b&&(this.boundingBox=b.clone());b=a.boundingSphere;null!==b&&(this.boundingSphere=b.clone());this.drawRange.start=a.drawRange.start;this.drawRange.count=a.drawRange.count;this.userData=a.userData;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});
var Ej=new da,td=new Ta,ji=new Wa,yc=new w,zc=new w,Ac=new w,ih=new w,jh=new w,kh=new w,Qf=new w,Rf=new w,Sf=new w,Cd=new L,Dd=new L,Ed=new L,Ie=new w,Of=new w;Qa.prototype=Object.assign(Object.create(ha.prototype),{constructor:Qa,isMesh:!0,copy:function(a){ha.prototype.copy.call(this,a);void 0!==a.morphTargetInfluences&&(this.morphTargetInfluences=a.morphTargetInfluences.slice());void 0!==a.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},a.morphTargetDictionary));this.material=
a.material;this.geometry=a.geometry;return this},updateMorphTargets:function(){var a=this.geometry;if(a.isBufferGeometry){a=a.morphAttributes;var b=Object.keys(a);if(0<b.length&&(a=a[b[0]],void 0!==a)){this.morphTargetInfluences=[];this.morphTargetDictionary={};b=0;for(var d=a.length;b<d;b++){var e=a[b].name||String(b);this.morphTargetInfluences.push(0);this.morphTargetDictionary[e]=b}}}else a=a.morphTargets,void 0!==a&&0<a.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},
raycast:function(a,b){var d=this.geometry,e=this.material,f=this.matrixWorld;if(void 0!==e&&(null===d.boundingSphere&&d.computeBoundingSphere(),ji.copy(d.boundingSphere),ji.applyMatrix4(f),!1!==a.ray.intersectsSphere(ji)&&(Ej.getInverse(f),td.copy(a.ray).applyMatrix4(Ej),null===d.boundingBox||!1!==td.intersectsBox(d.boundingBox))))if(d.isBufferGeometry){var g=d.index,h=d.attributes.position;f=d.morphAttributes.position;var k=d.morphTargetsRelative,l=d.attributes.uv,m=d.attributes.uv2,n=d.groups,p=
d.drawRange;if(null!==g)if(Array.isArray(e))for(var t=0,q=n.length;t<q;t++)for(var v=n[t],u=e[v.materialIndex],A=Math.max(v.start,p.start),B=Math.min(v.start+v.count,p.start+p.count);A<B;A+=3){d=g.getX(A);var D=g.getX(A+1),G=g.getX(A+2);if(d=Pf(this,u,a,td,h,f,k,l,m,d,D,G))d.faceIndex=Math.floor(A/3),d.face.materialIndex=v.materialIndex,b.push(d)}else for(n=Math.max(0,p.start),p=Math.min(g.count,p.start+p.count);n<p;n+=3){if(d=g.getX(n),t=g.getX(n+1),q=g.getX(n+2),d=Pf(this,e,a,td,h,f,k,l,m,d,t,q))d.faceIndex=
Math.floor(n/3),b.push(d)}else if(void 0!==h)if(Array.isArray(e))for(g=0,t=n.length;g<t;g++)for(q=n[g],v=e[q.materialIndex],u=Math.max(q.start,p.start),A=Math.min(q.start+q.count,p.start+p.count);u<A;u+=3){if(d=Pf(this,v,a,td,h,f,k,l,m,u,u+1,u+2))d.faceIndex=Math.floor(u/3),d.face.materialIndex=q.materialIndex,b.push(d)}else for(n=Math.max(0,p.start),p=Math.min(h.count,p.start+p.count);n<p;n+=3)if(d=Pf(this,e,a,td,h,f,k,l,m,n,n+1,n+2))d.faceIndex=Math.floor(n/3),b.push(d)}else if(d.isGeometry)for(f=
Array.isArray(e),k=d.vertices,l=d.faces,d=d.faceVertexUvs[0],0<d.length&&(h=d),m=0,p=l.length;m<p;m++)if(n=l[m],d=f?e[n.materialIndex]:e,void 0!==d&&(g=k[n.a],t=k[n.b],q=k[n.c],d=wi(this,d,a,td,g,t,q,Ie)))h&&h[m]&&(v=h[m],Cd.copy(v[0]),Dd.copy(v[1]),Ed.copy(v[2]),d.uv=Ga.getUV(Ie,g,t,q,Cd,Dd,Ed,new L)),d.face=n,d.faceIndex=m,b.push(d)}});var lk=0,jc=new da,ki=new ha,Kg=new w;sa.prototype=Object.assign(Object.create(wb.prototype),{constructor:sa,isGeometry:!0,applyMatrix4:function(a){for(var b=(new Da).getNormalMatrix(a),
d=0,e=this.vertices.length;d<e;d++)this.vertices[d].applyMatrix4(a);a=0;for(d=this.faces.length;a<d;a++){e=this.faces[a];e.normal.applyMatrix3(b).normalize();for(var f=0,g=e.vertexNormals.length;f<g;f++)e.vertexNormals[f].applyMatrix3(b).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=!0;return this},rotateX:function(a){jc.makeRotationX(a);this.applyMatrix4(jc);return this},rotateY:function(a){jc.makeRotationY(a);
this.applyMatrix4(jc);return this},rotateZ:function(a){jc.makeRotationZ(a);this.applyMatrix4(jc);return this},translate:function(a,b,d){jc.makeTranslation(a,b,d);this.applyMatrix4(jc);return this},scale:function(a,b,d){jc.makeScale(a,b,d);this.applyMatrix4(jc);return this},lookAt:function(a){ki.lookAt(a);ki.updateMatrix();this.applyMatrix4(ki.matrix);return this},fromBufferGeometry:function(a){function b(q,v,u,A){var B=void 0===k?[]:[d.colors[q].clone(),d.colors[v].clone(),d.colors[u].clone()],D=
void 0===h?[]:[(new w).fromBufferAttribute(h,q),(new w).fromBufferAttribute(h,v),(new w).fromBufferAttribute(h,u)];A=new ad(q,v,u,D,B,A);d.faces.push(A);void 0!==l&&d.faceVertexUvs[0].push([(new L).fromBufferAttribute(l,q),(new L).fromBufferAttribute(l,v),(new L).fromBufferAttribute(l,u)]);void 0!==m&&d.faceVertexUvs[1].push([(new L).fromBufferAttribute(m,q),(new L).fromBufferAttribute(m,v),(new L).fromBufferAttribute(m,u)])}var d=this,e=null!==a.index?a.index:void 0,f=a.attributes;if(void 0===f.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),
this;var g=f.position,h=f.normal,k=f.color,l=f.uv,m=f.uv2;void 0!==m&&(this.faceVertexUvs[1]=[]);for(f=0;f<g.count;f++)d.vertices.push((new w).fromBufferAttribute(g,f)),void 0!==k&&d.colors.push((new S).fromBufferAttribute(k,f));f=a.groups;if(0<f.length)for(g=0;g<f.length;g++){var n=f[g],p=n.start,t=p;for(p+=n.count;t<p;t+=3)void 0!==e?b(e.getX(t),e.getX(t+1),e.getX(t+2),n.materialIndex):b(t,t+1,t+2,n.materialIndex)}else if(void 0!==e)for(f=0;f<e.count;f+=3)b(e.getX(f),e.getX(f+1),e.getX(f+2));else for(e=
0;e<g.count;e+=3)b(e,e+1,e+2);this.computeFaceNormals();null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return this},center:function(){this.computeBoundingBox();this.boundingBox.getCenter(Kg).negate();this.translate(Kg.x,Kg.y,Kg.z);return this},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,b=this.boundingSphere.radius;b=0===b?1:1/b;var d=new da;d.set(b,0,0,-b*a.x,0,b,0,-b*a.y,
0,0,b,-b*a.z,0,0,0,1);this.applyMatrix4(d);return this},computeFaceNormals:function(){for(var a=new w,b=new w,d=0,e=this.faces.length;d<e;d++){var f=this.faces[d],g=this.vertices[f.a],h=this.vertices[f.b];a.subVectors(this.vertices[f.c],h);b.subVectors(g,h);a.cross(b);a.normalize();f.normal.copy(a)}},computeVertexNormals:function(a){void 0===a&&(a=!0);for(var b=Array(this.vertices.length),d=0,e=this.vertices.length;d<e;d++)b[d]=new w;if(a){a=new w;d=new w;e=0;for(var f=this.faces.length;e<f;e++){var g=
this.faces[e],h=this.vertices[g.a],k=this.vertices[g.b];a.subVectors(this.vertices[g.c],k);d.subVectors(h,k);a.cross(d);b[g.a].add(a);b[g.b].add(a);b[g.c].add(a)}}else for(this.computeFaceNormals(),a=0,d=this.faces.length;a<d;a++)e=this.faces[a],b[e.a].add(e.normal),b[e.b].add(e.normal),b[e.c].add(e.normal);a=0;for(d=this.vertices.length;a<d;a++)b[a].normalize();a=0;for(d=this.faces.length;a<d;a++)e=this.faces[a],f=e.vertexNormals,3===f.length?(f[0].copy(b[e.a]),f[1].copy(b[e.b]),f[2].copy(b[e.c])):
(f[0]=b[e.a].clone(),f[1]=b[e.b].clone(),f[2]=b[e.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(var a=0,b=this.faces.length;a<b;a++){var d=this.faces[a],e=d.vertexNormals;3===e.length?(e[0].copy(d.normal),e[1].copy(d.normal),e[2].copy(d.normal)):(e[0]=d.normal.clone(),e[1]=d.normal.clone(),e[2]=d.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(var a=0,b=this.faces.length;a<
b;a++){var d=this.faces[a];d.__originalFaceNormal?d.__originalFaceNormal.copy(d.normal):d.__originalFaceNormal=d.normal.clone();d.__originalVertexNormals||(d.__originalVertexNormals=[]);for(var e=0,f=d.vertexNormals.length;e<f;e++)d.__originalVertexNormals[e]?d.__originalVertexNormals[e].copy(d.vertexNormals[e]):d.__originalVertexNormals[e]=d.vertexNormals[e].clone()}a=new sa;a.faces=this.faces;b=0;for(d=this.morphTargets.length;b<d;b++){if(!this.morphNormals[b]){this.morphNormals[b]={};this.morphNormals[b].faceNormals=
[];this.morphNormals[b].vertexNormals=[];e=this.morphNormals[b].faceNormals;f=this.morphNormals[b].vertexNormals;for(var g=0,h=this.faces.length;g<h;g++){var k=new w,l={a:new w,b:new w,c:new w};e.push(k);f.push(l)}}e=this.morphNormals[b];a.vertices=this.morphTargets[b].vertices;a.computeFaceNormals();a.computeVertexNormals();f=0;for(g=this.faces.length;f<g;f++)h=this.faces[f],k=e.vertexNormals[f],e.faceNormals[f].copy(h.normal),k.a.copy(h.vertexNormals[0]),k.b.copy(h.vertexNormals[1]),k.c.copy(h.vertexNormals[2])}a=
0;for(b=this.faces.length;a<b;a++)d=this.faces[a],d.normal=d.__originalFaceNormal,d.vertexNormals=d.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new za);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Wa);this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,b,d){if(a&&a.isGeometry){var e,f=this.vertices.length,g=this.vertices,h=a.vertices,k=this.faces,
l=a.faces,m=this.colors,n=a.colors;void 0===d&&(d=0);void 0!==b&&(e=(new Da).getNormalMatrix(b));for(var p=0,t=h.length;p<t;p++){var q=h[p].clone();void 0!==b&&q.applyMatrix4(b);g.push(q)}b=0;for(g=n.length;b<g;b++)m.push(n[b].clone());m=0;for(n=l.length;m<n;m++){b=l[m];t=b.vertexNormals;g=b.vertexColors;h=new ad(b.a+f,b.b+f,b.c+f);h.normal.copy(b.normal);void 0!==e&&h.normal.applyMatrix3(e).normalize();q=0;for(var v=t.length;q<v;q++)p=t[q].clone(),void 0!==e&&p.applyMatrix3(e).normalize(),h.vertexNormals.push(p);
h.color.copy(b.color);t=0;for(q=g.length;t<q;t++)p=g[t],h.vertexColors.push(p.clone());h.materialIndex=b.materialIndex+d;k.push(h)}d=0;for(e=a.faceVertexUvs.length;d<e;d++)for(f=a.faceVertexUvs[d],void 0===this.faceVertexUvs[d]&&(this.faceVertexUvs[d]=[]),k=0,l=f.length;k<l;k++){m=f[k];n=[];b=0;for(g=m.length;b<g;b++)n.push(m[b].clone());this.faceVertexUvs[d].push(n)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",a)},mergeMesh:function(a){a&&a.isMesh?(a.matrixAutoUpdate&&
a.updateMatrix(),this.merge(a.geometry,a.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a)},mergeVertices:function(){for(var a={},b=[],d=[],e=Math.pow(10,4),f=0,g=this.vertices.length;f<g;f++){var h=this.vertices[f];h=Math.round(h.x*e)+"_"+Math.round(h.y*e)+"_"+Math.round(h.z*e);void 0===a[h]?(a[h]=f,b.push(this.vertices[f]),d[f]=b.length-1):d[f]=d[a[h]]}a=[];e=0;for(f=this.faces.length;e<f;e++)for(g=this.faces[e],g.a=d[g.a],g.b=d[g.b],g.c=d[g.c],g=[g.a,g.b,
g.c],h=0;3>h;h++)if(g[h]===g[(h+1)%3]){a.push(e);break}for(d=a.length-1;0<=d;d--)for(e=a[d],this.faces.splice(e,1),f=0,g=this.faceVertexUvs.length;f<g;f++)this.faceVertexUvs[f].splice(e,1);d=this.vertices.length-b.length;this.vertices=b;return d},setFromPoints:function(a){this.vertices=[];for(var b=0,d=a.length;b<d;b++){var e=a[b];this.vertices.push(new w(e.x,e.y,e.z||0))}return this},sortFacesByMaterialIndex:function(){for(var a=this.faces,b=a.length,d=0;d<b;d++)a[d]._id=d;a.sort(function(l,m){return l.materialIndex-
m.materialIndex});d=this.faceVertexUvs[0];var e=this.faceVertexUvs[1],f,g;d&&d.length===b&&(f=[]);e&&e.length===b&&(g=[]);for(var h=0;h<b;h++){var k=a[h]._id;f&&f.push(d[k]);g&&g.push(e[k])}f&&(this.faceVertexUvs[0]=f);g&&(this.faceVertexUvs[1]=g)},toJSON:function(){function a(E,H,M){return M?E|1<<H:E&~(1<<H)}function b(E){var H=E.x.toString()+E.y.toString()+E.z.toString();if(void 0!==m[H])return m[H];m[H]=l.length/3;l.push(E.x,E.y,E.z);return m[H]}function d(E){var H=E.r.toString()+E.g.toString()+
E.b.toString();if(void 0!==p[H])return p[H];p[H]=n.length;n.push(E.getHex());return p[H]}function e(E){var H=E.x.toString()+E.y.toString();if(void 0!==q[H])return q[H];q[H]=t.length/2;t.push(E.x,E.y);return q[H]}var f={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};f.uuid=this.uuid;f.type=this.type;""!==this.name&&(f.name=this.name);if(void 0!==this.parameters){var g=this.parameters,h;for(h in g)void 0!==g[h]&&(f[h]=g[h]);return f}g=[];for(h=0;h<this.vertices.length;h++){var k=
this.vertices[h];g.push(k.x,k.y,k.z)}h=[];var l=[],m={},n=[],p={},t=[],q={};for(k=0;k<this.faces.length;k++){var v=this.faces[k],u=void 0!==this.faceVertexUvs[0][k],A=0<v.normal.length(),B=0<v.vertexNormals.length,D=1!==v.color.r||1!==v.color.g||1!==v.color.b,G=0<v.vertexColors.length,I=0;I=a(I,0,0);I=a(I,1,!0);I=a(I,2,!1);I=a(I,3,u);I=a(I,4,A);I=a(I,5,B);I=a(I,6,D);I=a(I,7,G);h.push(I);h.push(v.a,v.b,v.c);h.push(v.materialIndex);u&&(u=this.faceVertexUvs[0][k],h.push(e(u[0]),e(u[1]),e(u[2])));A&&
h.push(b(v.normal));B&&(A=v.vertexNormals,h.push(b(A[0]),b(A[1]),b(A[2])));D&&h.push(d(v.color));G&&(v=v.vertexColors,h.push(d(v[0]),d(v[1]),d(v[2])))}f.data={};f.data.vertices=g;f.data.normals=l;0<n.length&&(f.data.colors=n);0<t.length&&(f.data.uvs=[t]);f.data.faces=h;return f},clone:function(){return(new sa).copy(this)},copy:function(a){this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=
[];this.boundingSphere=this.boundingBox=null;this.name=a.name;for(var b=a.vertices,d=0,e=b.length;d<e;d++)this.vertices.push(b[d].clone());b=a.colors;d=0;for(e=b.length;d<e;d++)this.colors.push(b[d].clone());b=a.faces;d=0;for(e=b.length;d<e;d++)this.faces.push(b[d].clone());b=0;for(d=a.faceVertexUvs.length;b<d;b++){e=a.faceVertexUvs[b];void 0===this.faceVertexUvs[b]&&(this.faceVertexUvs[b]=[]);for(var f=0,g=e.length;f<g;f++){for(var h=e[f],k=[],l=0,m=h.length;l<m;l++)k.push(h[l].clone());this.faceVertexUvs[b].push(k)}}b=
a.morphTargets;d=0;for(e=b.length;d<e;d++){f={};f.name=b[d].name;if(void 0!==b[d].vertices)for(f.vertices=[],g=0,h=b[d].vertices.length;g<h;g++)f.vertices.push(b[d].vertices[g].clone());if(void 0!==b[d].normals)for(f.normals=[],g=0,h=b[d].normals.length;g<h;g++)f.normals.push(b[d].normals[g].clone());this.morphTargets.push(f)}b=a.morphNormals;d=0;for(e=b.length;d<e;d++){f={};if(void 0!==b[d].vertexNormals)for(f.vertexNormals=[],g=0,h=b[d].vertexNormals.length;g<h;g++)k=b[d].vertexNormals[g],l={},
l.a=k.a.clone(),l.b=k.b.clone(),l.c=k.c.clone(),f.vertexNormals.push(l);if(void 0!==b[d].faceNormals)for(f.faceNormals=[],g=0,h=b[d].faceNormals.length;g<h;g++)f.faceNormals.push(b[d].faceNormals[g].clone());this.morphNormals.push(f)}b=a.skinWeights;d=0;for(e=b.length;d<e;d++)this.skinWeights.push(b[d].clone());b=a.skinIndices;d=0;for(e=b.length;d<e;d++)this.skinIndices.push(b[d].clone());b=a.lineDistances;d=0;for(e=b.length;d<e;d++)this.lineDistances.push(b[d]);b=a.boundingBox;null!==b&&(this.boundingBox=
b.clone());b=a.boundingSphere;null!==b&&(this.boundingSphere=b.clone());this.elementsNeedUpdate=a.elementsNeedUpdate;this.verticesNeedUpdate=a.verticesNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.lineDistancesNeedUpdate=a.lineDistancesNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Fd.prototype=Object.create(sa.prototype);Fd.prototype.constructor=
Fd;Bc.prototype=Object.create(ka.prototype);Bc.prototype.constructor=Bc;var Ri={clone:Gd,merge:nb};sb.prototype=Object.create(ra.prototype);sb.prototype.constructor=sb;sb.prototype.isShaderMaterial=!0;sb.prototype.copy=function(a){ra.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=Gd(a.uniforms);this.defines=Object.assign({},a.defines);this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.lights=a.lights;this.clipping=
a.clipping;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;this.extensions=Object.assign({},a.extensions);this.glslVersion=a.glslVersion;return this};sb.prototype.toJSON=function(a){var b=ra.prototype.toJSON.call(this,a);b.glslVersion=this.glslVersion;b.uniforms={};for(var d in this.uniforms){var e=this.uniforms[d].value;b.uniforms[d]=e&&e.isTexture?{type:"t",value:e.toJSON(a).uuid}:e&&e.isColor?{type:"c",value:e.getHex()}:e&&e.isVector2?{type:"v2",value:e.toArray()}:
e&&e.isVector3?{type:"v3",value:e.toArray()}:e&&e.isVector4?{type:"v4",value:e.toArray()}:e&&e.isMatrix3?{type:"m3",value:e.toArray()}:e&&e.isMatrix4?{type:"m4",value:e.toArray()}:{value:e}}0<Object.keys(this.defines).length&&(b.defines=this.defines);b.vertexShader=this.vertexShader;b.fragmentShader=this.fragmentShader;a={};for(var f in this.extensions)!0===this.extensions[f]&&(a[f]=!0);0<Object.keys(a).length&&(b.extensions=a);return b};ac.prototype=Object.assign(Object.create(ha.prototype),{constructor:ac,
isCamera:!0,copy:function(a,b){ha.prototype.copy.call(this,a,b);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);this.projectionMatrixInverse.copy(a.projectionMatrixInverse);return this},getWorldDirection:function(a){void 0===a&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),a=new w);this.updateMatrixWorld(!0);var b=this.matrixWorld.elements;return a.set(-b[8],-b[9],-b[10]).normalize()},updateMatrixWorld:function(a){ha.prototype.updateMatrixWorld.call(this,
a);this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(a,b){ha.prototype.updateWorldMatrix.call(this,a,b);this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}});eb.prototype=Object.assign(Object.create(ac.prototype),{constructor:eb,isPerspectiveCamera:!0,copy:function(a,b){ac.prototype.copy.call(this,a,b);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=
null===a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return this},setFocalLength:function(a){a=.5*this.getFilmHeight()/a;this.fov=2*xa.RAD2DEG*Math.atan(a);this.updateProjectionMatrix()},getFocalLength:function(){var a=Math.tan(.5*xa.DEG2RAD*this.fov);return.5*this.getFilmHeight()/a},getEffectiveFOV:function(){return 2*xa.RAD2DEG*Math.atan(Math.tan(.5*xa.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,
1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(a,b,d,e,f,g){this.aspect=a/b;null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=d;this.view.offsetY=e;this.view.width=f;this.view.height=g;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},
updateProjectionMatrix:function(){var a=this.near,b=a*Math.tan(.5*xa.DEG2RAD*this.fov)/this.zoom,d=2*b,e=this.aspect*d,f=-.5*e,g=this.view;if(null!==this.view&&this.view.enabled){var h=g.fullWidth,k=g.fullHeight;f+=g.offsetX*e/h;b-=g.offsetY*d/k;e*=g.width/h;d*=g.height/k}g=this.filmOffset;0!==g&&(f+=a*g/this.getFilmWidth());this.projectionMatrix.makePerspective(f,f+e,b,b-d,a,this.far);this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(a){a=ha.prototype.toJSON.call(this,
a);a.object.fov=this.fov;a.object.zoom=this.zoom;a.object.near=this.near;a.object.far=this.far;a.object.focus=this.focus;a.object.aspect=this.aspect;null!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return a}});Hd.prototype=Object.create(ha.prototype);Hd.prototype.constructor=Hd;Cc.prototype=Object.create(Db.prototype);Cc.prototype.constructor=Cc;Cc.prototype.isWebGLCubeRenderTarget=!0;Cc.prototype.fromEquirectangularTexture=
function(a,b){this.texture.type=b.type;this.texture.format=1023;this.texture.encoding=b.encoding;this.texture.generateMipmaps=b.generateMipmaps;this.texture.minFilter=b.minFilter;this.texture.magFilter=b.magFilter;var d=new Bc(5,5,5),e=new sb({name:"CubemapFromEquirect",uniforms:Gd({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",
fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t",side:1,blending:0});e.uniforms.tEquirect.value=b;d=new Qa(d,e);e=b.minFilter;1008===b.minFilter&&(b.minFilter=1006);(new Hd(1,10,this)).update(a,d);b.minFilter=e;d.geometry.dispose();
d.material.dispose();return this};bd.prototype=Object.create(Oa.prototype);bd.prototype.constructor=bd;bd.prototype.isDataTexture=!0;var xe=new Wa,Lg=new w,xb=function(a,b,d,e,f,g){this.planes=[void 0!==a?a:new Na,void 0!==b?b:new Na,void 0!==d?d:new Na,void 0!==e?e:new Na,void 0!==f?f:new Na,void 0!==g?g:new Na]};xb.prototype.set=function(a,b,d,e,f,g){var h=this.planes;h[0].copy(a);h[1].copy(b);h[2].copy(d);h[3].copy(e);h[4].copy(f);h[5].copy(g);return this};xb.prototype.clone=function(){return(new this.constructor).copy(this)};
xb.prototype.copy=function(a){for(var b=this.planes,d=0;6>d;d++)b[d].copy(a.planes[d]);return this};xb.prototype.setFromProjectionMatrix=function(a){var b=this.planes,d=a.elements;a=d[0];var e=d[1],f=d[2],g=d[3],h=d[4],k=d[5],l=d[6],m=d[7],n=d[8],p=d[9],t=d[10],q=d[11],v=d[12],u=d[13],A=d[14];d=d[15];b[0].setComponents(g-a,m-h,q-n,d-v).normalize();b[1].setComponents(g+a,m+h,q+n,d+v).normalize();b[2].setComponents(g+e,m+k,q+p,d+u).normalize();b[3].setComponents(g-e,m-k,q-p,d-u).normalize();b[4].setComponents(g-
f,m-l,q-t,d-A).normalize();b[5].setComponents(g+f,m+l,q+t,d+A).normalize();return this};xb.prototype.intersectsObject=function(a){var b=a.geometry;null===b.boundingSphere&&b.computeBoundingSphere();xe.copy(b.boundingSphere).applyMatrix4(a.matrixWorld);return this.intersectsSphere(xe)};xb.prototype.intersectsSprite=function(a){xe.center.set(0,0,0);xe.radius=.7071067811865476;xe.applyMatrix4(a.matrixWorld);return this.intersectsSphere(xe)};xb.prototype.intersectsSphere=function(a){var b=this.planes,
d=a.center;a=-a.radius;for(var e=0;6>e;e++)if(b[e].distanceToPoint(d)<a)return!1;return!0};xb.prototype.intersectsBox=function(a){for(var b=this.planes,d=0;6>d;d++){var e=b[d];Lg.x=0<e.normal.x?a.max.x:a.min.x;Lg.y=0<e.normal.y?a.max.y:a.min.y;Lg.z=0<e.normal.z?a.max.z:a.min.z;if(0>e.distanceToPoint(Lg))return!1}return!0};xb.prototype.containsPoint=function(a){for(var b=this.planes,d=0;6>d;d++)if(0>b[d].distanceToPoint(a))return!1;return!0};Je.prototype=Object.create(sa.prototype);Je.prototype.constructor=
Je;cd.prototype=Object.create(ka.prototype);cd.prototype.constructor=cd;var Ba={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",
aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",
bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",
clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",
clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",
color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",
cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",
defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",
displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",
emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",
envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",
envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",
envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",
envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",
fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",
gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",
lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",
lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",
lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",
lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",
lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",
lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",
lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",
lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",
lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",
logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",
map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",
map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",
morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",
morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",
normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",
normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",
clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",
packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",
premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",
roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",
shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",
shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",
shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",
skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",
skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",
specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",
transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",
uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",
background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",
cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",
depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",
distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",
distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",
equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",
linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",
meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",
meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",
meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",
normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",
points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",
shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",
sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},
fa={common:{diffuse:{value:new S(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Da},uv2Transform:{value:new Da},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},
bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new L(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5E-4},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new S(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},
color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},
position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new S(15658734)},opacity:{value:1},size:{value:1},
scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Da}},sprite:{diffuse:{value:new S(15658734)},opacity:{value:1},center:{value:new L(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Da}}},Pb={basic:{uniforms:nb([fa.common,fa.specularmap,fa.envmap,fa.aomap,fa.lightmap,fa.fog]),vertexShader:Ba.meshbasic_vert,fragmentShader:Ba.meshbasic_frag},lambert:{uniforms:nb([fa.common,fa.specularmap,fa.envmap,fa.aomap,fa.lightmap,fa.emissivemap,
fa.fog,fa.lights,{emissive:{value:new S(0)}}]),vertexShader:Ba.meshlambert_vert,fragmentShader:Ba.meshlambert_frag},phong:{uniforms:nb([fa.common,fa.specularmap,fa.envmap,fa.aomap,fa.lightmap,fa.emissivemap,fa.bumpmap,fa.normalmap,fa.displacementmap,fa.fog,fa.lights,{emissive:{value:new S(0)},specular:{value:new S(1118481)},shininess:{value:30}}]),vertexShader:Ba.meshphong_vert,fragmentShader:Ba.meshphong_frag},standard:{uniforms:nb([fa.common,fa.envmap,fa.aomap,fa.lightmap,fa.emissivemap,fa.bumpmap,
fa.normalmap,fa.displacementmap,fa.roughnessmap,fa.metalnessmap,fa.fog,fa.lights,{emissive:{value:new S(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ba.meshphysical_vert,fragmentShader:Ba.meshphysical_frag},toon:{uniforms:nb([fa.common,fa.aomap,fa.lightmap,fa.emissivemap,fa.bumpmap,fa.normalmap,fa.displacementmap,fa.gradientmap,fa.fog,fa.lights,{emissive:{value:new S(0)}}]),vertexShader:Ba.meshtoon_vert,fragmentShader:Ba.meshtoon_frag},matcap:{uniforms:nb([fa.common,
fa.bumpmap,fa.normalmap,fa.displacementmap,fa.fog,{matcap:{value:null}}]),vertexShader:Ba.meshmatcap_vert,fragmentShader:Ba.meshmatcap_frag},points:{uniforms:nb([fa.points,fa.fog]),vertexShader:Ba.points_vert,fragmentShader:Ba.points_frag},dashed:{uniforms:nb([fa.common,fa.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ba.linedashed_vert,fragmentShader:Ba.linedashed_frag},depth:{uniforms:nb([fa.common,fa.displacementmap]),vertexShader:Ba.depth_vert,fragmentShader:Ba.depth_frag},
normal:{uniforms:nb([fa.common,fa.bumpmap,fa.normalmap,fa.displacementmap,{opacity:{value:1}}]),vertexShader:Ba.normal_vert,fragmentShader:Ba.normal_frag},sprite:{uniforms:nb([fa.sprite,fa.fog]),vertexShader:Ba.sprite_vert,fragmentShader:Ba.sprite_frag},background:{uniforms:{uvTransform:{value:new Da},t2D:{value:null}},vertexShader:Ba.background_vert,fragmentShader:Ba.background_frag},cube:{uniforms:nb([fa.envmap,{opacity:{value:1}}]),vertexShader:Ba.cube_vert,fragmentShader:Ba.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},
vertexShader:Ba.equirect_vert,fragmentShader:Ba.equirect_frag},distanceRGBA:{uniforms:nb([fa.common,fa.displacementmap,{referencePosition:{value:new w},nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:Ba.distanceRGBA_vert,fragmentShader:Ba.distanceRGBA_frag},shadow:{uniforms:nb([fa.lights,fa.fog,{color:{value:new S(0)},opacity:{value:1}}]),vertexShader:Ba.shadow_vert,fragmentShader:Ba.shadow_frag}};Pb.physical={uniforms:nb([Pb.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},
clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new L(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new S(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Ba.meshphysical_vert,fragmentShader:Ba.meshphysical_frag};kc.prototype=Object.create(Oa.prototype);kc.prototype.constructor=kc;kc.prototype.isCubeTexture=!0;Object.defineProperty(kc.prototype,"images",{get:function(){return this.image},set:function(a){this.image=a}});Id.prototype=
Object.create(Oa.prototype);Id.prototype.constructor=Id;Id.prototype.isDataTexture2DArray=!0;Jd.prototype=Object.create(Oa.prototype);Jd.prototype.constructor=Jd;Jd.prototype.isDataTexture3D=!0;var Ei=new Oa,Kk=new Id,Mk=new Jd,Fi=new kc,yi=[],Ai=[],Di=new Float32Array(16),Ci=new Float32Array(9),Bi=new Float32Array(4);Gi.prototype.updateCache=function(a){var b=this.cache;a instanceof Float32Array&&b.length!==a.length&&(this.cache=new Float32Array(a.length));Eb(b,a)};Hi.prototype.setValue=function(a,
b,d){for(var e=this.seq,f=0,g=e.length;f!==g;++f){var h=e[f];h.setValue(a,b[h.id],d)}};var lh=/([\w\d_]+)(\])?(\[|\.)?/g;Dc.prototype.setValue=function(a,b,d,e){b=this.map[b];void 0!==b&&b.setValue(a,d,e)};Dc.prototype.setOptional=function(a,b,d){b=b[d];void 0!==b&&this.setValue(a,d,b)};Dc.upload=function(a,b,d,e){for(var f=0,g=b.length;f!==g;++f){var h=b[f],k=d[h.id];!1!==k.needsUpdate&&h.setValue(a,k.value,e)}};Dc.seqWithValue=function(a,b){for(var d=[],e=0,f=a.length;e!==f;++e){var g=a[e];g.id in
b&&d.push(g)}return d};var ql=0,nh=/^[ \t]*#include +<([\w\d./]+)>/gm,Qi=/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Pi=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g,Al=0;Ec.prototype=Object.create(ra.prototype);Ec.prototype.constructor=Ec;Ec.prototype.isMeshDepthMaterial=!0;Ec.prototype.copy=function(a){ra.prototype.copy.call(this,a);this.depthPacking=a.depthPacking;
this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};Fc.prototype=Object.create(ra.prototype);Fc.prototype.constructor=Fc;Fc.prototype.isMeshDistanceMaterial=!0;Fc.prototype.copy=function(a){ra.prototype.copy.call(this,a);this.referencePosition.copy(a.referencePosition);
this.nearDistance=a.nearDistance;this.farDistance=a.farDistance;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;return this};Tf.prototype=Object.assign(Object.create(eb.prototype),{constructor:Tf,isArrayCamera:!0});Gc.prototype=Object.assign(Object.create(ha.prototype),{constructor:Gc,isGroup:!0});Object.assign(Me.prototype,{constructor:Me,
getHandSpace:function(){if(null===this._hand&&(this._hand=new Gc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(var a=0;a<=window.XRHand.LITTLE_PHALANX_TIP;a++){var b=new Gc;b.matrixAutoUpdate=!1;b.visible=!1;this._hand.joints.push(b);this._hand.add(b)}return this._hand},getTargetRaySpace:function(){null===this._targetRay&&(this._targetRay=new Gc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1);return this._targetRay},
getGripSpace:function(){null===this._grip&&(this._grip=new Gc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1);return this._grip},dispatchEvent:function(a){null!==this._targetRay&&this._targetRay.dispatchEvent(a);null!==this._grip&&this._grip.dispatchEvent(a);null!==this._hand&&this._hand.dispatchEvent(a);return this},disconnect:function(a){this.dispatchEvent({type:"disconnected",data:a});null!==this._targetRay&&(this._targetRay.visible=!1);null!==this._grip&&(this._grip.visible=!1);null!==this._hand&&
(this._hand.visible=!1);return this},update:function(a,b,d){var e=null,f=null,g=null,h=this._targetRay,k=this._grip,l=this._hand;if(a)if(l&&a.hand){g=!0;for(var m=0;m<=window.XRHand.LITTLE_PHALANX_TIP;m++)if(a.hand[m]){var n=b.getJointPose(a.hand[m],d),p=l.joints[m];null!==n&&(p.matrix.fromArray(n.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.jointRadius=n.radius);p.visible=null!==n;n=l.joints[window.XRHand.INDEX_PHALANX_TIP].position.distanceTo(l.joints[window.XRHand.THUMB_PHALANX_TIP].position);
l.inputState.pinching&&.025<n?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:a.handedness,target:this})):!l.inputState.pinching&&.015>=n&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:a.handedness,target:this}))}}else null!==h&&(e=b.getPose(a.targetRaySpace,d),null!==e&&(h.matrix.fromArray(e.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale))),null!==k&&a.gripSpace&&(f=b.getPose(a.gripSpace,d),null!==f&&(k.matrix.fromArray(f.transform.matrix),
k.matrix.decompose(k.position,k.rotation,k.scale)));null!==h&&(h.visible=null!==e);null!==k&&(k.visible=null!==f);null!==l&&(l.visible=null!==g);return this}});Object.assign(Wi.prototype,wb.prototype);th.prototype=Object.assign(Object.create(Ne.prototype),{constructor:th,isWebGL1Renderer:!0});var Gf=function(a,b){Object.defineProperty(this,"isFogExp2",{value:!0});this.name="";this.color=new S(a);this.density=void 0!==b?b:2.5E-4};Gf.prototype.clone=function(){return new Gf(this.color,this.density)};
Gf.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};var Hf=function(a,b,d){Object.defineProperty(this,"isFog",{value:!0});this.name="";this.color=new S(a);this.near=void 0!==b?b:1;this.far=void 0!==d?d:1E3};Hf.prototype.clone=function(){return new Hf(this.color,this.near,this.far)};Hf.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}};Jc.prototype=Object.create(ha.prototype);Jc.prototype.constructor=
Jc;Jc.prototype.copy=function(a,b){ha.prototype.copy.call(this,a,b);null!==a.background&&(this.background=a.background.clone());null!==a.environment&&(this.environment=a.environment.clone());null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return this};Jc.prototype.toJSON=function(a){var b=ha.prototype.toJSON.call(this,a);null!==this.background&&(b.object.background=
this.background.toJSON(a));null!==this.environment&&(b.object.environment=this.environment.toJSON(a));null!==this.fog&&(b.object.fog=this.fog.toJSON());return b};Object.defineProperty(Gb.prototype,"needsUpdate",{set:function(a){!0===a&&this.version++}});Object.assign(Gb.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(a){this.usage=a;return this},copy:function(a){this.array=new a.array.constructor(a.array);this.count=a.count;this.stride=a.stride;this.usage=a.usage;
return this},copyAt:function(a,b,d){a*=this.stride;d*=b.stride;for(var e=0,f=this.stride;e<f;e++)this.array[a+e]=b.array[d+e];return this},set:function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this},clone:function(a){void 0===a.arrayBuffers&&(a.arrayBuffers={});void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=xa.generateUUID());void 0===a.arrayBuffers[this.array.buffer._uuid]&&(a.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);a=new this.array.constructor(a.arrayBuffers[this.array.buffer._uuid]);
a=new Gb(a,this.stride);a.setUsage(this.usage);return a},onUpload:function(a){this.onUploadCallback=a;return this},toJSON:function(a){void 0===a.arrayBuffers&&(a.arrayBuffers={});void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=xa.generateUUID());void 0===a.arrayBuffers[this.array.buffer._uuid]&&(a.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer)));return{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});
var ud=new w;Object.defineProperties(Kc.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(a){this.data.needsUpdate=a}}});Object.assign(Kc.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(a){for(var b=0,d=this.data.count;b<d;b++)ud.x=this.getX(b),ud.y=this.getY(b),ud.z=this.getZ(b),ud.applyMatrix4(a),this.setXYZ(b,ud.x,ud.y,ud.z);return this},setX:function(a,b){this.data.array[a*this.data.stride+this.offset]=
b;return this},setY:function(a,b){this.data.array[a*this.data.stride+this.offset+1]=b;return this},setZ:function(a,b){this.data.array[a*this.data.stride+this.offset+2]=b;return this},setW:function(a,b){this.data.array[a*this.data.stride+this.offset+3]=b;return this},getX:function(a){return this.data.array[a*this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*
this.data.stride+this.offset+3]},setXY:function(a,b,d){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=d;return this},setXYZ:function(a,b,d,e){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=d;this.data.array[a+2]=e;return this},setXYZW:function(a,b,d,e,f){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=d;this.data.array[a+2]=e;this.data.array[a+3]=f;return this},clone:function(a){if(void 0===a){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");
a=[];for(var b=0;b<this.count;b++)for(var d=b*this.data.stride+this.offset,e=0;e<this.itemSize;e++)a.push(this.data.array[d+e]);return new pa(new this.array.constructor(a),this.itemSize,this.normalized)}void 0===a.interleavedBuffers&&(a.interleavedBuffers={});void 0===a.interleavedBuffers[this.data.uuid]&&(a.interleavedBuffers[this.data.uuid]=this.data.clone(a));return new Kc(a.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(a){if(void 0===a){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");
a=[];for(var b=0;b<this.count;b++)for(var d=b*this.data.stride+this.offset,e=0;e<this.itemSize;e++)a.push(this.data.array[d+e]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:a,normalized:this.normalized}}void 0===a.interleavedBuffers&&(a.interleavedBuffers={});void 0===a.interleavedBuffers[this.data.uuid]&&(a.interleavedBuffers[this.data.uuid]=this.data.toJSON(a));return{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});
Lc.prototype=Object.create(ra.prototype);Lc.prototype.constructor=Lc;Lc.prototype.isSpriteMaterial=!0;Lc.prototype.copy=function(a){ra.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.alphaMap=a.alphaMap;this.rotation=a.rotation;this.sizeAttenuation=a.sizeAttenuation;return this};var Nd,If=new w,ye=new w,ze=new w,Od=new L,Re=new L,aj=new da,Mg=new w,Jf=new w,Ng=new w,Fj=new L,li=new L,Gj=new L;Qe.prototype=Object.assign(Object.create(ha.prototype),{constructor:Qe,isSprite:!0,
raycast:function(a,b){null===a.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.');ye.setFromMatrixScale(this.matrixWorld);aj.copy(a.camera.matrixWorld);this.modelViewMatrix.multiplyMatrices(a.camera.matrixWorldInverse,this.matrixWorld);ze.setFromMatrixPosition(this.modelViewMatrix);a.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&ye.multiplyScalar(-ze.z);var d=this.material.rotation;if(0!==d){var e=Math.cos(d);var f=Math.sin(d)}d=
this.center;Wf(Mg.set(-.5,-.5,0),ze,d,ye,f,e);Wf(Jf.set(.5,-.5,0),ze,d,ye,f,e);Wf(Ng.set(.5,.5,0),ze,d,ye,f,e);Fj.set(0,0);li.set(1,0);Gj.set(1,1);var g=a.ray.intersectTriangle(Mg,Jf,Ng,!1,If);if(null===g&&(Wf(Jf.set(-.5,.5,0),ze,d,ye,f,e),li.set(0,1),g=a.ray.intersectTriangle(Mg,Ng,Jf,!1,If),null===g))return;f=a.ray.origin.distanceTo(If);f<a.near||f>a.far||b.push({distance:f,point:If.clone(),uv:Ga.getUV(If,Mg,Jf,Ng,Fj,li,Gj,new L),face:null,object:this})},copy:function(a){ha.prototype.copy.call(this,
a);void 0!==a.center&&this.center.copy(a.center);this.material=a.material;return this}});var Og=new w,Hj=new w;Se.prototype=Object.assign(Object.create(ha.prototype),{constructor:Se,isLOD:!0,copy:function(a){ha.prototype.copy.call(this,a,!1);for(var b=a.levels,d=0,e=b.length;d<e;d++){var f=b[d];this.addLevel(f.object.clone(),f.distance)}this.autoUpdate=a.autoUpdate;return this},addLevel:function(a,b){void 0===b&&(b=0);b=Math.abs(b);var d=this.levels,e;for(e=0;e<d.length&&!(b<d[e].distance);e++);d.splice(e,
0,{distance:b,object:a});this.add(a);return this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(a){var b=this.levels;if(0<b.length){var d;var e=1;for(d=b.length;e<d&&!(a<b[e].distance);e++);return b[e-1].object}return null},raycast:function(a,b){if(0<this.levels.length){Og.setFromMatrixPosition(this.matrixWorld);var d=a.ray.origin.distanceTo(Og);this.getObjectForDistance(d).raycast(a,b)}},update:function(a){var b=this.levels;if(1<b.length){Og.setFromMatrixPosition(a.matrixWorld);
Hj.setFromMatrixPosition(this.matrixWorld);a=Og.distanceTo(Hj)/a.zoom;b[0].object.visible=!0;var d;var e=1;for(d=b.length;e<d;e++)if(a>=b[e].distance)b[e-1].object.visible=!1,b[e].object.visible=!0;else break;for(this._currentLevel=e-1;e<d;e++)b[e].object.visible=!1}},toJSON:function(a){a=ha.prototype.toJSON.call(this,a);!1===this.autoUpdate&&(a.object.autoUpdate=!1);a.object.levels=[];for(var b=this.levels,d=0,e=b.length;d<e;d++){var f=b[d];a.object.levels.push({object:f.object.uuid,distance:f.distance})}return a}});
Xf.prototype=Object.assign(Object.create(Qa.prototype),{constructor:Xf,isSkinnedMesh:!0,copy:function(a){Qa.prototype.copy.call(this,a);this.bindMode=a.bindMode;this.bindMatrix.copy(a.bindMatrix);this.bindMatrixInverse.copy(a.bindMatrixInverse);this.skeleton=a.skeleton;return this},bind:function(a,b){this.skeleton=a;void 0===b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),b=this.matrixWorld);this.bindMatrix.copy(b);this.bindMatrixInverse.getInverse(b)},pose:function(){this.skeleton.pose()},
normalizeSkinWeights:function(){for(var a=new ca,b=this.geometry.attributes.skinWeight,d=0,e=b.count;d<e;d++){a.x=b.getX(d);a.y=b.getY(d);a.z=b.getZ(d);a.w=b.getW(d);var f=1/a.manhattanLength();Infinity!==f?a.multiplyScalar(f):a.set(1,0,0,0);b.setXYZW(d,a.x,a.y,a.z,a.w)}},updateMatrixWorld:function(a){Qa.prototype.updateMatrixWorld.call(this,a);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):
console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){var a=new w,b=new ca,d=new ca,e=new w,f=new da;return function(g,h){var k=this.skeleton,l=this.geometry;b.fromBufferAttribute(l.attributes.skinIndex,g);d.fromBufferAttribute(l.attributes.skinWeight,g);a.fromBufferAttribute(l.attributes.position,g).applyMatrix4(this.bindMatrix);h.set(0,0,0);for(g=0;4>g;g++)if(l=d.getComponent(g),0!==l){var m=b.getComponent(g);f.multiplyMatrices(k.bones[m].matrixWorld,
k.boneInverses[m]);h.addScaledVector(e.copy(a).applyMatrix4(f),l)}return h.applyMatrix4(this.bindMatrixInverse)}}()});var Ij=new da,Vl=new da;Object.assign(Yf.prototype,{calculateInverses:function(){this.boneInverses=[];for(var a=0,b=this.bones.length;a<b;a++){var d=new da;this.bones[a]&&d.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(d)}},pose:function(){for(var a=0,b=this.bones.length;a<b;a++){var d=this.bones[a];d&&d.matrixWorld.getInverse(this.boneInverses[a])}a=0;for(b=this.bones.length;a<
b;a++)if(d=this.bones[a])d.parent&&d.parent.isBone?(d.matrix.getInverse(d.parent.matrixWorld),d.matrix.multiply(d.matrixWorld)):d.matrix.copy(d.matrixWorld),d.matrix.decompose(d.position,d.quaternion,d.scale)},update:function(){for(var a=this.bones,b=this.boneInverses,d=this.boneMatrices,e=this.boneTexture,f=0,g=a.length;f<g;f++)Ij.multiplyMatrices(a[f]?a[f].matrixWorld:Vl,b[f]),Ij.toArray(d,16*f);void 0!==e&&(e.needsUpdate=!0)},clone:function(){return new Yf(this.bones,this.boneInverses)},getBoneByName:function(a){for(var b=
0,d=this.bones.length;b<d;b++){var e=this.bones[b];if(e.name===a)return e}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});uh.prototype=Object.assign(Object.create(ha.prototype),{constructor:uh,isBone:!0});var Jj=new da,Kj=new da,Pg=[],Kf=new Qa;Zf.prototype=Object.assign(Object.create(Qa.prototype),{constructor:Zf,isInstancedMesh:!0,copy:function(a){Qa.prototype.copy.call(this,a);this.instanceMatrix.copy(a.instanceMatrix);this.count=a.count;return this},
setColorAt:function(a,b){null===this.instanceColor&&(this.instanceColor=new pa(new Float32Array(3*this.count),3));b.toArray(this.instanceColor.array,3*a)},getMatrixAt:function(a,b){b.fromArray(this.instanceMatrix.array,16*a)},raycast:function(a,b){var d=this.matrixWorld,e=this.count;Kf.geometry=this.geometry;Kf.material=this.material;if(void 0!==Kf.material)for(var f=0;f<e;f++){this.getMatrixAt(f,Jj);Kj.multiplyMatrices(d,Jj);Kf.matrixWorld=Kj;Kf.raycast(a,Pg);for(var g=0,h=Pg.length;g<h;g++){var k=
Pg[g];k.instanceId=f;k.object=this;b.push(k)}Pg.length=0}},setMatrixAt:function(a,b){b.toArray(this.instanceMatrix.array,16*a)},updateMorphTargets:function(){}});Ya.prototype=Object.create(ra.prototype);Ya.prototype.constructor=Ya;Ya.prototype.isLineBasicMaterial=!0;Ya.prototype.copy=function(a){ra.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;this.morphTargets=a.morphTargets;return this};var Lj=new w,Mj=new w,Nj=new da,
Qg=new Ta,Lf=new Wa;yb.prototype=Object.assign(Object.create(ha.prototype),{constructor:yb,isLine:!0,copy:function(a){ha.prototype.copy.call(this,a);this.material=a.material;this.geometry=a.geometry;return this},computeLineDistances:function(){var a=this.geometry;if(a.isBufferGeometry)if(null===a.index){for(var b=a.attributes.position,d=[0],e=1,f=b.count;e<f;e++)Lj.fromBufferAttribute(b,e-1),Mj.fromBufferAttribute(b,e),d[e]=d[e-1],d[e]+=Lj.distanceTo(Mj);a.setAttribute("lineDistance",new ea(d,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
else if(a.isGeometry)for(b=a.vertices,a=a.lineDistances,a[0]=0,d=1,e=b.length;d<e;d++)a[d]=a[d-1],a[d]+=b[d-1].distanceTo(b[d]);return this},raycast:function(a,b){var d=this.geometry,e=this.matrixWorld,f=a.params.Line.threshold;null===d.boundingSphere&&d.computeBoundingSphere();Lf.copy(d.boundingSphere);Lf.applyMatrix4(e);Lf.radius+=f;if(!1!==a.ray.intersectsSphere(Lf)){Nj.getInverse(e);Qg.copy(a.ray).applyMatrix4(Nj);e=f/((this.scale.x+this.scale.y+this.scale.z)/3);e*=e;var g=new w,h=new w;f=new w;
var k=new w,l=this&&this.isLineSegments?2:1;if(d.isBufferGeometry){var m=d.index;d=d.attributes.position.array;if(null!==m){m=m.array;for(var n=0,p=m.length-1;n<p;n+=l){var t=m[n+1];g.fromArray(d,3*m[n]);h.fromArray(d,3*t);Qg.distanceSqToSegment(g,h,k,f)>e||(k.applyMatrix4(this.matrixWorld),t=a.ray.origin.distanceTo(k),t<a.near||t>a.far||b.push({distance:t,point:f.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}}else for(m=0,n=d.length/3-1;m<n;m+=l)g.fromArray(d,
3*m),h.fromArray(d,3*m+3),Qg.distanceSqToSegment(g,h,k,f)>e||(k.applyMatrix4(this.matrixWorld),p=a.ray.origin.distanceTo(k),p<a.near||p>a.far||b.push({distance:p,point:f.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}))}else if(d.isGeometry)for(g=d.vertices,h=g.length,d=0;d<h-1;d+=l)Qg.distanceSqToSegment(g[d],g[d+1],k,f)>e||(k.applyMatrix4(this.matrixWorld),m=a.ray.origin.distanceTo(k),m<a.near||m>a.far||b.push({distance:m,point:f.clone().applyMatrix4(this.matrixWorld),
index:d,face:null,faceIndex:null,object:this}))}},updateMorphTargets:function(){var a=this.geometry;if(a.isBufferGeometry){a=a.morphAttributes;var b=Object.keys(a);if(0<b.length&&(a=a[b[0]],void 0!==a)){this.morphTargetInfluences=[];this.morphTargetDictionary={};b=0;for(var d=a.length;b<d;b++){var e=a[b].name||String(b);this.morphTargetInfluences.push(0);this.morphTargetDictionary[e]=b}}}else a=a.morphTargets,void 0!==a&&0<a.length&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}});
var Rg=new w,Sg=new w;Za.prototype=Object.assign(Object.create(yb.prototype),{constructor:Za,isLineSegments:!0,computeLineDistances:function(){var a=this.geometry;if(a.isBufferGeometry)if(null===a.index){for(var b=a.attributes.position,d=[],e=0,f=b.count;e<f;e+=2)Rg.fromBufferAttribute(b,e),Sg.fromBufferAttribute(b,e+1),d[e]=0===e?0:d[e-1],d[e+1]=d[e]+Rg.distanceTo(Sg);a.setAttribute("lineDistance",new ea(d,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
else if(a.isGeometry)for(b=a.vertices,a=a.lineDistances,d=0,e=b.length;d<e;d+=2)Rg.copy(b[d]),Sg.copy(b[d+1]),a[d]=0===d?0:a[d-1],a[d+1]=a[d]+Rg.distanceTo(Sg);return this}});$f.prototype=Object.assign(Object.create(yb.prototype),{constructor:$f,isLineLoop:!0});Rb.prototype=Object.create(ra.prototype);Rb.prototype.constructor=Rb;Rb.prototype.isPointsMaterial=!0;Rb.prototype.copy=function(a){ra.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.alphaMap=a.alphaMap;this.size=a.size;
this.sizeAttenuation=a.sizeAttenuation;this.morphTargets=a.morphTargets;return this};var Oj=new da,wh=new Ta,Mf=new Wa,Tg=new w;Pd.prototype=Object.assign(Object.create(ha.prototype),{constructor:Pd,isPoints:!0,copy:function(a){ha.prototype.copy.call(this,a);this.material=a.material;this.geometry=a.geometry;return this},raycast:function(a,b){var d=this.geometry,e=this.matrixWorld,f=a.params.Points.threshold;null===d.boundingSphere&&d.computeBoundingSphere();Mf.copy(d.boundingSphere);Mf.applyMatrix4(e);
Mf.radius+=f;if(!1!==a.ray.intersectsSphere(Mf))if(Oj.getInverse(e),wh.copy(a.ray).applyMatrix4(Oj),f/=(this.scale.x+this.scale.y+this.scale.z)/3,f*=f,d.isBufferGeometry){var g=d.index;d=d.attributes.position.array;if(null!==g){g=g.array;for(var h=0,k=g.length;h<k;h++){var l=g[h];Tg.fromArray(d,3*l);vh(Tg,l,f,e,a,b,this)}}else for(g=0,h=d.length/3;g<h;g++)Tg.fromArray(d,3*g),vh(Tg,g,f,e,a,b,this)}else for(d=d.vertices,g=0,h=d.length;g<h;g++)vh(d[g],g,f,e,a,b,this)},updateMorphTargets:function(){var a=
this.geometry;if(a.isBufferGeometry){a=a.morphAttributes;var b=Object.keys(a);if(0<b.length&&(a=a[b[0]],void 0!==a)){this.morphTargetInfluences=[];this.morphTargetDictionary={};b=0;for(var d=a.length;b<d;b++){var e=a[b].name||String(b);this.morphTargetInfluences.push(0);this.morphTargetDictionary[e]=b}}}else a=a.morphTargets,void 0!==a&&0<a.length&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}});xh.prototype=Object.assign(Object.create(Oa.prototype),
{constructor:xh,isVideoTexture:!0,update:function(){var a=this.image;!1==="requestVideoFrameCallback"in a&&a.readyState>=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});Qd.prototype=Object.create(Oa.prototype);Qd.prototype.constructor=Qd;Qd.prototype.isCompressedTexture=!0;Te.prototype=Object.create(Oa.prototype);Te.prototype.constructor=Te;Te.prototype.isCanvasTexture=!0;Ue.prototype=Object.create(Oa.prototype);Ue.prototype.constructor=Ue;Ue.prototype.isDepthTexture=!0;Rd.prototype=Object.create(ka.prototype);
Rd.prototype.constructor=Rd;Ve.prototype=Object.create(sa.prototype);Ve.prototype.constructor=Ve;Sd.prototype=Object.create(ka.prototype);Sd.prototype.constructor=Sd;We.prototype=Object.create(sa.prototype);We.prototype.constructor=We;zb.prototype=Object.create(ka.prototype);zb.prototype.constructor=zb;Xe.prototype=Object.create(sa.prototype);Xe.prototype.constructor=Xe;Td.prototype=Object.create(zb.prototype);Td.prototype.constructor=Td;Ye.prototype=Object.create(sa.prototype);Ye.prototype.constructor=
Ye;fd.prototype=Object.create(zb.prototype);fd.prototype.constructor=fd;Ze.prototype=Object.create(sa.prototype);Ze.prototype.constructor=Ze;Ud.prototype=Object.create(zb.prototype);Ud.prototype.constructor=Ud;$e.prototype=Object.create(sa.prototype);$e.prototype.constructor=$e;Vd.prototype=Object.create(zb.prototype);Vd.prototype.constructor=Vd;af.prototype=Object.create(sa.prototype);af.prototype.constructor=af;gd.prototype=Object.create(ka.prototype);gd.prototype.constructor=gd;gd.prototype.toJSON=
function(){var a=ka.prototype.toJSON.call(this);a.path=this.parameters.path.toJSON();return a};bf.prototype=Object.create(sa.prototype);bf.prototype.constructor=bf;Wd.prototype=Object.create(ka.prototype);Wd.prototype.constructor=Wd;cf.prototype=Object.create(sa.prototype);cf.prototype.constructor=cf;Xd.prototype=Object.create(ka.prototype);Xd.prototype.constructor=Xd;var Wl={triangulate:function(a,b,d){d=d||2;var e=b&&b.length,f=e?b[0]*d:a.length,g=bj(a,0,f,d,!0),h=[];if(!g||g.next===g.prev)return h;
var k;if(e){var l=d;e=[];var m;var n=0;for(m=b.length;n<m;n++){var p=b[n]*l;var t=n<m-1?b[n+1]*l:a.length;p=bj(a,p,t,l,!1);p===p.next&&(p.steiner=!0);e.push(Il(p))}e.sort(Gl);for(n=0;n<e.length;n++){l=e[n];b=g;if(b=Hl(l,b))l=ej(b,l),Mc(b,b.next),Mc(l,l.next);g=Mc(g,g.next)}}if(a.length>80*d){var q=k=a[0];var v=e=a[1];for(l=d;l<f;l+=d)n=a[l],b=a[l+1],n<q&&(q=n),b<v&&(v=b),n>k&&(k=n),b>e&&(e=b);k=Math.max(k-q,e-v);k=0!==k?1/k:0}ef(g,h,d,q,v,k);return h}},nc={area:function(a){for(var b=a.length,d=0,
e=b-1,f=0;f<b;e=f++)d+=a[e].x*a[f].y-a[f].x*a[e].y;return.5*d},isClockWise:function(a){return 0>nc.area(a)},triangulateShape:function(a,b){var d=[],e=[],f=[];fj(a);gj(d,a);a=a.length;b.forEach(fj);for(var g=0;g<b.length;g++)e.push(a),a+=b[g].length,gj(d,b[g]);b=Wl.triangulate(d,e);for(d=0;d<b.length;d+=3)f.push(b.slice(d,d+3));return f}};hd.prototype=Object.create(sa.prototype);hd.prototype.constructor=hd;hd.prototype.toJSON=function(){var a=sa.prototype.toJSON.call(this);return hj(this.parameters.shapes,
this.parameters.options,a)};bc.prototype=Object.create(ka.prototype);bc.prototype.constructor=bc;bc.prototype.toJSON=function(){var a=ka.prototype.toJSON.call(this);return hj(this.parameters.shapes,this.parameters.options,a)};var Jl={generateTopUV:function(a,b,d,e,f){a=b[3*e];e=b[3*e+1];var g=b[3*f];f=b[3*f+1];return[new L(b[3*d],b[3*d+1]),new L(a,e),new L(g,f)]},generateSideWallUV:function(a,b,d,e,f,g){a=b[3*d];var h=b[3*d+1];d=b[3*d+2];var k=b[3*e],l=b[3*e+1];e=b[3*e+2];var m=b[3*f],n=b[3*f+1];
f=b[3*f+2];var p=b[3*g],t=b[3*g+1];b=b[3*g+2];return.01>Math.abs(h-l)?[new L(a,1-d),new L(k,1-e),new L(m,1-f),new L(p,1-b)]:[new L(h,1-d),new L(l,1-e),new L(n,1-f),new L(t,1-b)]}};gf.prototype=Object.create(sa.prototype);gf.prototype.constructor=gf;Zd.prototype=Object.create(bc.prototype);Zd.prototype.constructor=Zd;hf.prototype=Object.create(sa.prototype);hf.prototype.constructor=hf;id.prototype=Object.create(ka.prototype);id.prototype.constructor=id;jf.prototype=Object.create(sa.prototype);jf.prototype.constructor=
jf;$d.prototype=Object.create(ka.prototype);$d.prototype.constructor=$d;kf.prototype=Object.create(sa.prototype);kf.prototype.constructor=kf;ae.prototype=Object.create(ka.prototype);ae.prototype.constructor=ae;jd.prototype=Object.create(sa.prototype);jd.prototype.constructor=jd;jd.prototype.toJSON=function(){var a=sa.prototype.toJSON.call(this);return ij(this.parameters.shapes,a)};kd.prototype=Object.create(ka.prototype);kd.prototype.constructor=kd;kd.prototype.toJSON=function(){var a=ka.prototype.toJSON.call(this);
return ij(this.parameters.shapes,a)};be.prototype=Object.create(ka.prototype);be.prototype.constructor=be;ld.prototype=Object.create(sa.prototype);ld.prototype.constructor=ld;oc.prototype=Object.create(ka.prototype);oc.prototype.constructor=oc;lf.prototype=Object.create(ld.prototype);lf.prototype.constructor=lf;mf.prototype=Object.create(oc.prototype);mf.prototype.constructor=mf;nf.prototype=Object.create(sa.prototype);nf.prototype.constructor=nf;ce.prototype=Object.create(ka.prototype);ce.prototype.constructor=
ce;var vb=Object.freeze({__proto__:null,WireframeGeometry:Rd,ParametricGeometry:Ve,ParametricBufferGeometry:Sd,TetrahedronGeometry:Xe,TetrahedronBufferGeometry:Td,OctahedronGeometry:Ye,OctahedronBufferGeometry:fd,IcosahedronGeometry:Ze,IcosahedronBufferGeometry:Ud,DodecahedronGeometry:$e,DodecahedronBufferGeometry:Vd,PolyhedronGeometry:We,PolyhedronBufferGeometry:zb,TubeGeometry:af,TubeBufferGeometry:gd,TorusKnotGeometry:bf,TorusKnotBufferGeometry:Wd,TorusGeometry:cf,TorusBufferGeometry:Xd,TextGeometry:gf,
TextBufferGeometry:Zd,SphereGeometry:hf,SphereBufferGeometry:id,RingGeometry:jf,RingBufferGeometry:$d,PlaneGeometry:Je,PlaneBufferGeometry:cd,LatheGeometry:kf,LatheBufferGeometry:ae,ShapeGeometry:jd,ShapeBufferGeometry:kd,ExtrudeGeometry:hd,ExtrudeBufferGeometry:bc,EdgesGeometry:be,ConeGeometry:lf,ConeBufferGeometry:mf,CylinderGeometry:ld,CylinderBufferGeometry:oc,CircleGeometry:nf,CircleBufferGeometry:ce,BoxGeometry:Fd,BoxBufferGeometry:Bc});md.prototype=Object.create(ra.prototype);md.prototype.constructor=
md;md.prototype.isShadowMaterial=!0;md.prototype.copy=function(a){ra.prototype.copy.call(this,a);this.color.copy(a.color);return this};pc.prototype=Object.create(sb.prototype);pc.prototype.constructor=pc;pc.prototype.isRawShaderMaterial=!0;cc.prototype=Object.create(ra.prototype);cc.prototype.constructor=cc;cc.prototype.isMeshStandardMaterial=!0;cc.prototype.copy=function(a){ra.prototype.copy.call(this,a);this.defines={STANDARD:""};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=
a.metalness;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=
a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=a.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;this.vertexTangents=a.vertexTangents;return this};
Nc.prototype=Object.create(cc.prototype);Nc.prototype.constructor=Nc;Nc.prototype.isMeshPhysicalMaterial=!0;Nc.prototype.copy=function(a){cc.prototype.copy.call(this,a);this.defines={STANDARD:"",PHYSICAL:""};this.clearcoat=a.clearcoat;this.clearcoatMap=a.clearcoatMap;this.clearcoatRoughness=a.clearcoatRoughness;this.clearcoatRoughnessMap=a.clearcoatRoughnessMap;this.clearcoatNormalMap=a.clearcoatNormalMap;this.clearcoatNormalScale.copy(a.clearcoatNormalScale);this.reflectivity=a.reflectivity;this.sheen=
a.sheen?(this.sheen||new S).copy(a.sheen):null;this.transmission=a.transmission;this.transmissionMap=a.transmissionMap;return this};Oc.prototype=Object.create(ra.prototype);Oc.prototype.constructor=Oc;Oc.prototype.isMeshPhongMaterial=!0;Oc.prototype.copy=function(a){ra.prototype.copy.call(this,a);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=
a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=
a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};nd.prototype=Object.create(ra.prototype);nd.prototype.constructor=nd;nd.prototype.isMeshToonMaterial=!0;nd.prototype.copy=function(a){ra.prototype.copy.call(this,a);this.color.copy(a.color);
this.map=a.map;this.gradientMap=a.gradientMap;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;
this.displacementBias=a.displacementBias;this.alphaMap=a.alphaMap;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};od.prototype=Object.create(ra.prototype);od.prototype.constructor=od;od.prototype.isMeshNormalMaterial=!0;od.prototype.copy=function(a){ra.prototype.copy.call(this,a);this.bumpMap=
a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};pd.prototype=Object.create(ra.prototype);pd.prototype.constructor=
pd;pd.prototype.isMeshLambertMaterial=!0;pd.prototype.copy=function(a){ra.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;
this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};qd.prototype=Object.create(ra.prototype);qd.prototype.constructor=qd;qd.prototype.isMeshMatcapMaterial=!0;qd.prototype.copy=function(a){ra.prototype.copy.call(this,a);this.defines={MATCAP:""};this.color.copy(a.color);
this.matcap=a.matcap;this.map=a.map;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalMapType=a.normalMapType;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.alphaMap=a.alphaMap;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};rd.prototype=Object.create(Ya.prototype);rd.prototype.constructor=
rd;rd.prototype.isLineDashedMaterial=!0;rd.prototype.copy=function(a){Ya.prototype.copy.call(this,a);this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this};var Xl=Object.freeze({__proto__:null,ShadowMaterial:md,SpriteMaterial:Lc,RawShaderMaterial:pc,ShaderMaterial:sb,PointsMaterial:Rb,MeshPhysicalMaterial:Nc,MeshStandardMaterial:cc,MeshPhongMaterial:Oc,MeshToonMaterial:nd,MeshNormalMaterial:od,MeshLambertMaterial:pd,MeshDepthMaterial:Ec,MeshDistanceMaterial:Fc,MeshBasicMaterial:Kb,
MeshMatcapMaterial:qd,LineDashedMaterial:rd,LineBasicMaterial:Ya,Material:ra}),Va={arraySlice:function(a,b,d){return Va.isTypedArray(a)?new a.constructor(a.subarray(b,void 0!==d?d:a.length)):a.slice(b,d)},convertArray:function(a,b,d){return!a||!d&&a.constructor===b?a:"number"===typeof b.BYTES_PER_ELEMENT?new b(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){for(var b=a.length,d=Array(b),e=0;e!==b;++e)d[e]=
e;d.sort(function(f,g){return a[f]-a[g]});return d},sortedArray:function(a,b,d){for(var e=a.length,f=new a.constructor(e),g=0,h=0;h!==e;++g)for(var k=d[g]*b,l=0;l!==b;++l)f[h++]=a[k+l];return f},flattenJSON:function(a,b,d,e){for(var f=1,g=a[0];void 0!==g&&void 0===g[e];)g=a[f++];if(void 0!==g){var h=g[e];if(void 0!==h)if(Array.isArray(h)){do h=g[e],void 0!==h&&(b.push(g.time),d.push.apply(d,h)),g=a[f++];while(void 0!==g)}else if(void 0!==h.toArray){do h=g[e],void 0!==h&&(b.push(g.time),h.toArray(d,
d.length)),g=a[f++];while(void 0!==g)}else{do h=g[e],void 0!==h&&(b.push(g.time),d.push(h)),g=a[f++];while(void 0!==g)}}},subclip:function(a,b,d,e,f){f=f||30;a=a.clone();a.name=b;b=[];for(var g=0;g<a.tracks.length;++g){for(var h=a.tracks[g],k=h.getValueSize(),l=[],m=[],n=0;n<h.times.length;++n){var p=h.times[n]*f;if(!(p<d||p>=e))for(l.push(h.times[n]),p=0;p<k;++p)m.push(h.values[n*k+p])}0!==l.length&&(h.times=Va.convertArray(l,h.times.constructor),h.values=Va.convertArray(m,h.values.constructor),
b.push(h))}a.tracks=b;d=Infinity;for(e=0;e<a.tracks.length;++e)d>a.tracks[e].times[0]&&(d=a.tracks[e].times[0]);for(e=0;e<a.tracks.length;++e)a.tracks[e].shift(-1*d);a.resetDuration();return a},makeClipAdditive:function(a,b,d,e){void 0===b&&(b=0);void 0===d&&(d=a);if(void 0===e||0>=e)e=30;var f=a.tracks.length,g=b/e;b=function(h){var k=d.tracks[h],l=k.ValueTypeName;if("bool"!==l&&"string"!==l&&(h=a.tracks.find(function(B){return B.name===k.name&&B.ValueTypeName===l}),void 0!==h)){var m=0,n=k.getValueSize();
k.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=n/3);var p=0,t=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=t/3);var q=k.times.length-1,v=void 0;g<=k.times[0]?v=Va.arraySlice(k.values,m,n-m):g>=k.times[q]?(v=q*n+m,v=Va.arraySlice(k.values,v,v+n-m)):(v=k.createInterpolant(),q=m,m=n-m,v.evaluate(g),v=Va.arraySlice(v.resultBuffer,q,m));"quaternion"===l&&(new ua).fromArray(v).normalize().conjugate().toArray(v);m=h.times.length;for(n=0;n<m;++n)if(q=
n*t+p,"quaternion"===l)ua.multiplyQuaternionsFlat(h.values,q,v,0,h.values,q);else for(var u=t-2*p,A=0;A<u;++A)h.values[q+A]-=v[A]}};for(e=0;e<f;++e)b(e);a.blendMode=2501;return a}};Object.assign(Hb.prototype,{evaluate:function(a){var b=this.parameterPositions,d=this._cachedIndex,e=b[d],f=b[d-1];a:{b:{c:{d:if(!(a<e)){for(var g=d+2;;){if(void 0===e){if(a<f)break d;this._cachedIndex=d=b.length;return this.afterEnd_(d-1,a,f)}if(d===g)break;f=e;e=b[++d];if(a<e)break b}e=b.length;break c}if(a>=f)break a;
else{g=b[1];a<g&&(d=2,f=g);for(g=d-2;;){if(void 0===f)return this._cachedIndex=0,this.beforeStart_(0,a,e);if(d===g)break;e=f;f=b[--d-1];if(a>=f)break b}e=d;d=0}}for(;d<e;)f=d+e>>>1,a<b[f]?e=f:d=f+1;e=b[d];f=b[d-1];if(void 0===f)return this._cachedIndex=0,this.beforeStart_(0,a,e);if(void 0===e)return this._cachedIndex=d=b.length,this.afterEnd_(d-1,f,a)}this._cachedIndex=d;this.intervalChanged_(d,f,e)}return this.interpolate_(d,f,a,e)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||
this.DefaultSettings_},copySampleValue_:function(a){var b=this.resultBuffer,d=this.sampleValues,e=this.valueSize;a*=e;for(var f=0;f!==e;++f)b[f]=d[a+f];return b},interpolate_:function(){throw Error("call to abstract method");},intervalChanged_:function(){}});Object.assign(Hb.prototype,{beforeStart_:Hb.prototype.copySampleValue_,afterEnd_:Hb.prototype.copySampleValue_});dg.prototype=Object.assign(Object.create(Hb.prototype),{constructor:dg,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(a,
b,d){var e=this.parameterPositions,f=a-2,g=a+1,h=e[f],k=e[g];if(void 0===h)switch(this.getSettings_().endingStart){case 2401:f=a;h=2*b-d;break;case 2402:f=e.length-2;h=b+e[f]-e[f+1];break;default:f=a,h=d}if(void 0===k)switch(this.getSettings_().endingEnd){case 2401:g=a;k=2*d-b;break;case 2402:g=1;k=d+e[1]-e[0];break;default:g=a-1,k=b}a=.5*(d-b);e=this.valueSize;this._weightPrev=a/(b-h);this._weightNext=a/(k-d);this._offsetPrev=f*e;this._offsetNext=g*e},interpolate_:function(a,b,d,e){var f=this.resultBuffer,
g=this.sampleValues,h=this.valueSize;a*=h;var k=a-h,l=this._offsetPrev,m=this._offsetNext,n=this._weightPrev,p=this._weightNext,t=(d-b)/(e-b);d=t*t;e=d*t;b=-n*e+2*n*d-n*t;n=(1+n)*e+(-1.5-2*n)*d+(-.5+n)*t+1;t=(-1-p)*e+(1.5+p)*d+.5*t;p=p*e-p*d;for(d=0;d!==h;++d)f[d]=b*g[l+d]+n*g[k+d]+t*g[a+d]+p*g[m+d];return f}});of.prototype=Object.assign(Object.create(Hb.prototype),{constructor:of,interpolate_:function(a,b,d,e){var f=this.resultBuffer,g=this.sampleValues,h=this.valueSize;a*=h;var k=a-h;b=(d-b)/(e-
b);d=1-b;for(e=0;e!==h;++e)f[e]=g[k+e]*d+g[a+e]*b;return f}});eg.prototype=Object.assign(Object.create(Hb.prototype),{constructor:eg,interpolate_:function(a){return this.copySampleValue_(a-1)}});Object.assign(lb,{toJSON:function(a){var b=a.constructor;if(void 0!==b.toJSON)b=b.toJSON(a);else{b={name:a.name,times:Va.convertArray(a.times,Array),values:Va.convertArray(a.values,Array)};var d=a.getInterpolation();d!==a.DefaultInterpolation&&(b.interpolation=d)}b.type=a.ValueTypeName;return b}});Object.assign(lb.prototype,
{constructor:lb,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(a){return new eg(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodLinear:function(a){return new of(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:function(a){return new dg(this.times,this.values,this.getValueSize(),a)},setInterpolation:function(a){switch(a){case 2300:var b=this.InterpolantFactoryMethodDiscrete;
break;case 2301:b=this.InterpolantFactoryMethodLinear;break;case 2302:b=this.InterpolantFactoryMethodSmooth}if(void 0===b){b="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(a!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(b);console.warn("THREE.KeyframeTrack:",b);return this}this.createInterpolant=b;return this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;
case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(a){if(0!==a)for(var b=this.times,d=0,e=b.length;d!==e;++d)b[d]+=a;return this},scale:function(a){if(1!==a)for(var b=this.times,d=0,e=b.length;d!==e;++d)b[d]*=a;return this},trim:function(a,b){for(var d=this.times,e=d.length,f=0,g=e-1;f!==e&&d[f]<a;)++f;for(;-1!==g&&d[g]>b;)--g;++g;if(0!==f||g!==e)f>=g&&(g=Math.max(g,
1),f=g-1),a=this.getValueSize(),this.times=Va.arraySlice(d,f,g),this.values=Va.arraySlice(this.values,f*a,g*a);return this},validate:function(){var a=!0,b=this.getValueSize();0!==b-Math.floor(b)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),a=!1);var d=this.times;b=this.values;var e=d.length;0===e&&(console.error("THREE.KeyframeTrack: Track is empty.",this),a=!1);for(var f=null,g=0;g!==e;g++){var h=d[g];if("number"===typeof h&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",
this,g,h);a=!1;break}if(null!==f&&f>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,g,h,f);a=!1;break}f=h}if(void 0!==b&&Va.isTypedArray(b))for(d=0,e=b.length;d!==e;++d)if(f=b[d],isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,d,f);a=!1;break}return a},optimize:function(){for(var a=Va.arraySlice(this.times),b=Va.arraySlice(this.values),d=this.getValueSize(),e=2302===this.getInterpolation(),f=a.length-1,g=1,h=1;h<f;++h){var k=!1,l=a[h];if(l!==a[h+1]&&
(1!==h||l!==l[0]))if(e)k=!0;else{l=h*d;for(var m=l-d,n=l+d,p=0;p!==d;++p){var t=b[l+p];if(t!==b[m+p]||t!==b[n+p]){k=!0;break}}}if(k){if(h!==g)for(a[g]=a[h],k=h*d,l=g*d,m=0;m!==d;++m)b[l+m]=b[k+m];++g}}if(0<f){a[g]=a[f];e=f*d;f=g*d;for(h=0;h!==d;++h)b[f+h]=b[e+h];++g}g!==a.length?(this.times=Va.arraySlice(a,0,g),this.values=Va.arraySlice(b,0,g*d)):(this.times=a,this.values=b);return this},clone:function(){var a=Va.arraySlice(this.times,0),b=Va.arraySlice(this.values,0);a=new this.constructor(this.name,
a,b);a.createInterpolant=this.createInterpolant;return a}});fg.prototype=Object.assign(Object.create(lb.prototype),{constructor:fg,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});gg.prototype=Object.assign(Object.create(lb.prototype),{constructor:gg,ValueTypeName:"color"});de.prototype=Object.assign(Object.create(lb.prototype),{constructor:de,ValueTypeName:"number"});hg.prototype=Object.assign(Object.create(Hb.prototype),
{constructor:hg,interpolate_:function(a,b,d,e){var f=this.resultBuffer,g=this.sampleValues,h=this.valueSize;b=(d-b)/(e-b);a*=h;for(d=a+h;a!==d;a+=4)ua.slerpFlat(f,0,g,a-h,g,a,b);return f}});pf.prototype=Object.assign(Object.create(lb.prototype),{constructor:pf,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(a){return new hg(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:void 0});ig.prototype=Object.assign(Object.create(lb.prototype),
{constructor:ig,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});ee.prototype=Object.assign(Object.create(lb.prototype),{constructor:ee,ValueTypeName:"vector"});Object.assign(Mb,{parse:function(a){for(var b=[],d=a.tracks,e=1/(a.fps||1),f=0,g=d.length;f!==g;++f)b.push(Ll(d[f]).scale(e));return new Mb(a.name,a.duration,b,a.blendMode)},toJSON:function(a){var b=[],d=a.tracks;a={name:a.name,duration:a.duration,
tracks:b,uuid:a.uuid,blendMode:a.blendMode};for(var e=0,f=d.length;e!==f;++e)b.push(lb.toJSON(d[e]));return a},CreateFromMorphTargetSequence:function(a,b,d,e){for(var f=b.length,g=[],h=0;h<f;h++){var k=[],l=[];k.push((h+f-1)%f,h,(h+1)%f);l.push(0,1,0);var m=Va.getKeyframeOrder(k);k=Va.sortedArray(k,1,m);l=Va.sortedArray(l,1,m);e||0!==k[0]||(k.push(f),l.push(l[0]));g.push((new de(".morphTargetInfluences["+b[h].name+"]",k,l)).scale(1/d))}return new Mb(a,-1,g)},findByName:function(a,b){var d=a;Array.isArray(a)||
(d=a.geometry&&a.geometry.animations||a.animations);for(a=0;a<d.length;a++)if(d[a].name===b)return d[a];return null},CreateClipsFromMorphTargetSequences:function(a,b,d){for(var e={},f=/^([\w-]*?)([\d]+)$/,g=0,h=a.length;g<h;g++){var k=a[g],l=k.name.match(f);if(l&&1<l.length){l=l[1];var m=e[l];m||(e[l]=m=[]);m.push(k)}}a=[];for(var n in e)a.push(Mb.CreateFromMorphTargetSequence(n,e[n],b,d));return a},parseAnimation:function(a,b){if(!a)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),
null;var d=function(A,B,D,G,I){if(0!==D.length){var E=[],H=[];Va.flattenJSON(D,E,H,G);0!==E.length&&I.push(new A(B,E,H))}},e=[],f=a.name||"default",g=a.fps||30,h=a.blendMode,k=a.length||-1;a=a.hierarchy||[];for(var l=0;l<a.length;l++){var m=a[l].keys;if(m&&0!==m.length)if(m[0].morphTargets){k={};var n=void 0;for(n=0;n<m.length;n++)if(m[n].morphTargets)for(var p=0;p<m[n].morphTargets.length;p++)k[m[n].morphTargets[p]]=-1;for(var t in k){p=[];for(var q=[],v=0;v!==m[n].morphTargets.length;++v){var u=
m[n];p.push(u.time);q.push(u.morphTarget===t?1:0)}e.push(new de(".morphTargetInfluence["+t+"]",p,q))}k=k.length*(g||1)}else n=".bones["+b[l].name+"]",d(ee,n+".position",m,"pos",e),d(pf,n+".quaternion",m,"rot",e),d(ee,n+".scale",m,"scl",e)}return 0===e.length?null:new Mb(f,k,e,h)}});Object.assign(Mb.prototype,{resetDuration:function(){for(var a=0,b=0,d=this.tracks.length;b!==d;++b){var e=this.tracks[b];a=Math.max(a,e.times[e.times.length-1])}this.duration=a;return this},trim:function(){for(var a=0;a<
this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this},validate:function(){for(var a=!0,b=0;b<this.tracks.length;b++)a=a&&this.tracks[b].validate();return a},optimize:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this},clone:function(){for(var a=[],b=0;b<this.tracks.length;b++)a.push(this.tracks[b].clone());return new Mb(this.name,this.duration,a,this.blendMode)}});var vd={enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=
b)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}},jj=new Ah;Object.assign(Ma.prototype,{load:function(){},loadAsync:function(a,b){var d=this;return new Promise(function(e,f){d.load(a,e,b,f)})},parse:function(){},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this},setResourcePath:function(a){this.resourcePath=a;return this},setRequestHeader:function(a){this.requestHeader=
a;return this}});var Zb={};Nb.prototype=Object.assign(Object.create(Ma.prototype),{constructor:Nb,load:function(a,b,d,e){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var f=this,g=vd.get(a);if(void 0!==g)return f.manager.itemStart(a),setTimeout(function(){b&&b(g);f.manager.itemEnd(a)},0),g;if(void 0!==Zb[a])Zb[a].push({onLoad:b,onProgress:d,onError:e});else{var h=a.match(/^data:(.*?)(;base64)?,(.*)$/);if(h){d=h[1];var k=!!h[2];h=h[3];h=decodeURIComponent(h);k&&
(h=atob(h));try{var l=(this.responseType||"").toLowerCase();switch(l){case "arraybuffer":case "blob":var m=new Uint8Array(h.length);for(k=0;k<h.length;k++)m[k]=h.charCodeAt(k);var n="blob"===l?new Blob([m.buffer],{type:d}):m.buffer;break;case "document":n=(new DOMParser).parseFromString(h,d);break;case "json":n=JSON.parse(h);break;default:n=h}setTimeout(function(){b&&b(n);f.manager.itemEnd(a)},0)}catch(t){setTimeout(function(){e&&e(t);f.manager.itemError(a);f.manager.itemEnd(a)},0)}}else{Zb[a]=[];
Zb[a].push({onLoad:b,onProgress:d,onError:e});var p=new XMLHttpRequest;p.open("GET",a,!0);p.addEventListener("load",function(t){var q=this.response,v=Zb[a];delete Zb[a];if(200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");vd.add(a,q);t=0;for(var u=v.length;t<u;t++){var A=v[t];if(A.onLoad)A.onLoad(q)}}else{q=0;for(u=v.length;q<u;q++)if(A=v[q],A.onError)A.onError(t);f.manager.itemError(a)}f.manager.itemEnd(a)},!1);p.addEventListener("progress",
function(t){for(var q=Zb[a],v=0,u=q.length;v<u;v++){var A=q[v];if(A.onProgress)A.onProgress(t)}},!1);p.addEventListener("error",function(t){var q=Zb[a];delete Zb[a];for(var v=0,u=q.length;v<u;v++){var A=q[v];if(A.onError)A.onError(t)}f.manager.itemError(a);f.manager.itemEnd(a)},!1);p.addEventListener("abort",function(t){var q=Zb[a];delete Zb[a];for(var v=0,u=q.length;v<u;v++){var A=q[v];if(A.onError)A.onError(t)}f.manager.itemError(a);f.manager.itemEnd(a)},!1);void 0!==this.responseType&&(p.responseType=
this.responseType);void 0!==this.withCredentials&&(p.withCredentials=this.withCredentials);p.overrideMimeType&&p.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(k in this.requestHeader)p.setRequestHeader(k,this.requestHeader[k]);p.send(null)}f.manager.itemStart(a);return p}},setResponseType:function(a){this.responseType=a;return this},setWithCredentials:function(a){this.withCredentials=a;return this},setMimeType:function(a){this.mimeType=a;return this}});Bh.prototype=Object.assign(Object.create(Ma.prototype),
{constructor:Bh,load:function(a,b,d,e){var f=this,g=new Nb(f.manager);g.setPath(f.path);g.setRequestHeader(f.requestHeader);g.load(a,function(h){try{b(f.parse(JSON.parse(h)))}catch(k){e?e(k):console.error(k),f.manager.itemError(a)}},d,e)},parse:function(a){for(var b=[],d=0;d<a.length;d++){var e=Mb.parse(a[d]);b.push(e)}return b}});Ch.prototype=Object.assign(Object.create(Ma.prototype),{constructor:Ch,load:function(a,b,d,e){function f(t){l.load(a[t],function(q){q=g.parse(q,!0);h[t]={width:q.width,
height:q.height,format:q.format,mipmaps:q.mipmaps};m+=1;6===m&&(1===q.mipmapCount&&(k.minFilter=1006),k.format=q.format,k.needsUpdate=!0,b&&b(k))},d,e)}var g=this,h=[],k=new Qd;k.image=h;var l=new Nb(this.manager);l.setPath(this.path);l.setResponseType("arraybuffer");l.setRequestHeader(this.requestHeader);var m=0;if(Array.isArray(a))for(var n=0,p=a.length;n<p;++n)f(n);else l.load(a,function(t){t=g.parse(t,!0);if(t.isCubemap)for(var q=t.mipmaps.length/t.mipmapCount,v=0;v<q;v++){h[v]={mipmaps:[]};for(var u=
0;u<t.mipmapCount;u++)h[v].mipmaps.push(t.mipmaps[v*t.mipmapCount+u]),h[v].format=t.format,h[v].width=t.width,h[v].height=t.height}else k.image.width=t.width,k.image.height=t.height,k.mipmaps=t.mipmaps;1===t.mipmapCount&&(k.minFilter=1006);k.format=t.format;k.needsUpdate=!0;b&&b(k)},d,e);return k}});fe.prototype=Object.assign(Object.create(Ma.prototype),{constructor:fe,load:function(a,b,d,e){function f(){l.removeEventListener("load",f,!1);l.removeEventListener("error",g,!1);vd.add(a,this);b&&b(this);
h.manager.itemEnd(a)}function g(m){l.removeEventListener("load",f,!1);l.removeEventListener("error",g,!1);e&&e(m);h.manager.itemError(a);h.manager.itemEnd(a)}void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var h=this,k=vd.get(a);if(void 0!==k)return h.manager.itemStart(a),setTimeout(function(){b&&b(k);h.manager.itemEnd(a)},0),k;var l=document.createElementNS("http://www.w3.org/1999/xhtml","img");l.addEventListener("load",f,!1);l.addEventListener("error",g,!1);"data:"!==a.substr(0,
5)&&void 0!==this.crossOrigin&&(l.crossOrigin=this.crossOrigin);h.manager.itemStart(a);l.src=a;return l}});jg.prototype=Object.assign(Object.create(Ma.prototype),{constructor:jg,load:function(a,b,d,e){function f(l){h.load(a[l],function(m){g.images[l]=m;k++;6===k&&(g.needsUpdate=!0,b&&b(g))},void 0,e)}var g=new kc,h=new fe(this.manager);h.setCrossOrigin(this.crossOrigin);h.setPath(this.path);var k=0;for(d=0;d<a.length;++d)f(d);return g}});kg.prototype=Object.assign(Object.create(Ma.prototype),{constructor:kg,
load:function(a,b,d,e){var f=this,g=new bd,h=new Nb(this.manager);h.setResponseType("arraybuffer");h.setRequestHeader(this.requestHeader);h.setPath(this.path);h.load(a,function(k){if(k=f.parse(k))void 0!==k.image?g.image=k.image:void 0!==k.data&&(g.image.width=k.width,g.image.height=k.height,g.image.data=k.data),g.wrapS=void 0!==k.wrapS?k.wrapS:1001,g.wrapT=void 0!==k.wrapT?k.wrapT:1001,g.magFilter=void 0!==k.magFilter?k.magFilter:1006,g.minFilter=void 0!==k.minFilter?k.minFilter:1006,g.anisotropy=
void 0!==k.anisotropy?k.anisotropy:1,void 0!==k.format&&(g.format=k.format),void 0!==k.type&&(g.type=k.type),void 0!==k.mipmaps&&(g.mipmaps=k.mipmaps,g.minFilter=1008),1===k.mipmapCount&&(g.minFilter=1006),g.needsUpdate=!0,b&&b(g,k)},d,e);return g}});lg.prototype=Object.assign(Object.create(Ma.prototype),{constructor:lg,load:function(a,b,d,e){var f=new Oa,g=new fe(this.manager);g.setCrossOrigin(this.crossOrigin);g.setPath(this.path);g.load(a,function(h){f.image=h;h=0<a.search(/\.jpe?g($|\?)/i)||0===
a.search(/^data:image\/jpeg/);f.format=h?1022:1023;f.needsUpdate=!0;void 0!==b&&b(f)},d,e);return f}});Object.assign(oa.prototype,{getPoint:function(){console.warn("THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function(a,b){a=this.getUtoTmapping(a);return this.getPoint(a,b)},getPoints:function(a){void 0===a&&(a=5);for(var b=[],d=0;d<=a;d++)b.push(this.getPoint(d/a));return b},getSpacedPoints:function(a){void 0===a&&(a=5);for(var b=[],d=0;d<=a;d++)b.push(this.getPointAt(d/a));
return b},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){void 0===a&&(a=this.arcLengthDivisions);if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b=[],d=this.getPoint(0),e=0;b.push(0);for(var f=1;f<=a;f++){var g=this.getPoint(f/a);e+=g.distanceTo(d);b.push(e);d=g}return this.cacheArcLengths=b},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(a,
b){var d=this.getLengths(),e=d.length;b=b?b:a*d[e-1];for(var f=0,g=e-1,h;f<=g;)if(a=Math.floor(f+(g-f)/2),h=d[a]-b,0>h)f=a+1;else if(0<h)g=a-1;else{g=a;break}a=g;if(d[a]===b)return a/(e-1);f=d[a];return(a+(b-f)/(d[a+1]-f))/(e-1)},getTangent:function(a,b){var d=a-1E-4;a+=1E-4;0>d&&(d=0);1<a&&(a=1);d=this.getPoint(d);a=this.getPoint(a);b=b||(d.isVector2?new L:new w);b.copy(a).sub(d).normalize();return b},getTangentAt:function(a,b){a=this.getUtoTmapping(a);return this.getTangent(a,b)},computeFrenetFrames:function(a,
b){for(var d=new w,e=[],f=[],g=[],h=new w,k=new da,l=0;l<=a;l++)e[l]=this.getTangentAt(l/a,new w),e[l].normalize();f[0]=new w;g[0]=new w;l=Number.MAX_VALUE;var m=Math.abs(e[0].x),n=Math.abs(e[0].y),p=Math.abs(e[0].z);m<=l&&(l=m,d.set(1,0,0));n<=l&&(l=n,d.set(0,1,0));p<=l&&d.set(0,0,1);h.crossVectors(e[0],d).normalize();f[0].crossVectors(e[0],h);g[0].crossVectors(e[0],f[0]);for(d=1;d<=a;d++)f[d]=f[d-1].clone(),g[d]=g[d-1].clone(),h.crossVectors(e[d-1],e[d]),h.length()>Number.EPSILON&&(h.normalize(),
l=Math.acos(xa.clamp(e[d-1].dot(e[d]),-1,1)),f[d].applyMatrix4(k.makeRotationAxis(h,l))),g[d].crossVectors(e[d],f[d]);if(!0===b)for(b=Math.acos(xa.clamp(f[0].dot(f[a]),-1,1)),b/=a,0<e[0].dot(h.crossVectors(f[0],f[a]))&&(b=-b),h=1;h<=a;h++)f[h].applyMatrix4(k.makeRotationAxis(e[h],b*h)),g[h].crossVectors(e[h],f[h]);return{tangents:e,normals:f,binormals:g}},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.arcLengthDivisions=a.arcLengthDivisions;return this},toJSON:function(){var a=
{metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};a.arcLengthDivisions=this.arcLengthDivisions;a.type=this.type;return a},fromJSON:function(a){this.arcLengthDivisions=a.arcLengthDivisions;return this}});Ib.prototype=Object.create(oa.prototype);Ib.prototype.constructor=Ib;Ib.prototype.isEllipseCurve=!0;Ib.prototype.getPoint=function(a,b){b=b||new L;for(var d=2*Math.PI,e=this.aEndAngle-this.aStartAngle,f=Math.abs(e)<Number.EPSILON;0>e;)e+=d;for(;e>d;)e-=d;e<Number.EPSILON&&(e=f?0:d);!0!==
this.aClockwise||f||(e=e===d?-d:e-d);d=this.aStartAngle+a*e;a=this.aX+this.xRadius*Math.cos(d);var g=this.aY+this.yRadius*Math.sin(d);0!==this.aRotation&&(d=Math.cos(this.aRotation),e=Math.sin(this.aRotation),f=a-this.aX,g-=this.aY,a=f*d-g*e+this.aX,g=f*e+g*d+this.aY);return b.set(a,g)};Ib.prototype.copy=function(a){oa.prototype.copy.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;
this.aRotation=a.aRotation;return this};Ib.prototype.toJSON=function(){var a=oa.prototype.toJSON.call(this);a.aX=this.aX;a.aY=this.aY;a.xRadius=this.xRadius;a.yRadius=this.yRadius;a.aStartAngle=this.aStartAngle;a.aEndAngle=this.aEndAngle;a.aClockwise=this.aClockwise;a.aRotation=this.aRotation;return a};Ib.prototype.fromJSON=function(a){oa.prototype.fromJSON.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;
this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this};ge.prototype=Object.create(Ib.prototype);ge.prototype.constructor=ge;ge.prototype.isArcCurve=!0;var Ug=new w,mi=new Dh,ni=new Dh,oi=new Dh;ob.prototype=Object.create(oa.prototype);ob.prototype.constructor=ob;ob.prototype.isCatmullRomCurve3=!0;ob.prototype.getPoint=function(a,b){b=b||new w;var d=this.points,e=d.length;a*=e-(this.closed?0:1);var f=Math.floor(a);a-=f;this.closed?f+=0<f?0:(Math.floor(Math.abs(f)/e)+1)*e:0===a&&f===e-
1&&(f=e-2,a=1);if(this.closed||0<f)var g=d[(f-1)%e];else Ug.subVectors(d[0],d[1]).add(d[0]),g=Ug;var h=d[f%e],k=d[(f+1)%e];this.closed||f+2<e?d=d[(f+2)%e]:(Ug.subVectors(d[e-1],d[e-2]).add(d[e-1]),d=Ug);if("centripetal"===this.curveType||"chordal"===this.curveType){var l="chordal"===this.curveType?.5:.25;e=Math.pow(g.distanceToSquared(h),l);f=Math.pow(h.distanceToSquared(k),l);l=Math.pow(k.distanceToSquared(d),l);1E-4>f&&(f=1);1E-4>e&&(e=f);1E-4>l&&(l=f);mi.initNonuniformCatmullRom(g.x,h.x,k.x,d.x,
e,f,l);ni.initNonuniformCatmullRom(g.y,h.y,k.y,d.y,e,f,l);oi.initNonuniformCatmullRom(g.z,h.z,k.z,d.z,e,f,l)}else"catmullrom"===this.curveType&&(mi.initCatmullRom(g.x,h.x,k.x,d.x,this.tension),ni.initCatmullRom(g.y,h.y,k.y,d.y,this.tension),oi.initCatmullRom(g.z,h.z,k.z,d.z,this.tension));b.set(mi.calc(a),ni.calc(a),oi.calc(a));return b};ob.prototype.copy=function(a){oa.prototype.copy.call(this,a);this.points=[];for(var b=0,d=a.points.length;b<d;b++)this.points.push(a.points[b].clone());this.closed=
a.closed;this.curveType=a.curveType;this.tension=a.tension;return this};ob.prototype.toJSON=function(){var a=oa.prototype.toJSON.call(this);a.points=[];for(var b=0,d=this.points.length;b<d;b++)a.points.push(this.points[b].toArray());a.closed=this.closed;a.curveType=this.curveType;a.tension=this.tension;return a};ob.prototype.fromJSON=function(a){oa.prototype.fromJSON.call(this,a);this.points=[];for(var b=0,d=a.points.length;b<d;b++){var e=a.points[b];this.points.push((new w).fromArray(e))}this.closed=
a.closed;this.curveType=a.curveType;this.tension=a.tension;return this};Sb.prototype=Object.create(oa.prototype);Sb.prototype.constructor=Sb;Sb.prototype.isCubicBezierCurve=!0;Sb.prototype.getPoint=function(a,b){b=b||new L;var d=this.v0,e=this.v1,f=this.v2,g=this.v3;b.set(rf(a,d.x,e.x,f.x,g.x),rf(a,d.y,e.y,f.y,g.y));return b};Sb.prototype.copy=function(a){oa.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this};Sb.prototype.toJSON=function(){var a=
oa.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return a};Sb.prototype.fromJSON=function(a){oa.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this};dc.prototype=Object.create(oa.prototype);dc.prototype.constructor=dc;dc.prototype.isCubicBezierCurve3=!0;dc.prototype.getPoint=function(a,b){b=b||new w;var d=this.v0,e=this.v1,f=this.v2,g=this.v3;
b.set(rf(a,d.x,e.x,f.x,g.x),rf(a,d.y,e.y,f.y,g.y),rf(a,d.z,e.z,f.z,g.z));return b};dc.prototype.copy=function(a){oa.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this};dc.prototype.toJSON=function(){var a=oa.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return a};dc.prototype.fromJSON=function(a){oa.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);
this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this};Ab.prototype=Object.create(oa.prototype);Ab.prototype.constructor=Ab;Ab.prototype.isLineCurve=!0;Ab.prototype.getPoint=function(a,b){b=b||new L;1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),b.multiplyScalar(a).add(this.v1));return b};Ab.prototype.getPointAt=function(a,b){return this.getPoint(a,b)};Ab.prototype.getTangent=function(a,b){a=b||new L;a.copy(this.v2).sub(this.v1).normalize();return a};Ab.prototype.copy=function(a){oa.prototype.copy.call(this,
a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};Ab.prototype.toJSON=function(){var a=oa.prototype.toJSON.call(this);a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};Ab.prototype.fromJSON=function(a){oa.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Tb.prototype=Object.create(oa.prototype);Tb.prototype.constructor=Tb;Tb.prototype.isLineCurve3=!0;Tb.prototype.getPoint=function(a,b){b=b||new w;1===a?b.copy(this.v2):(b.copy(this.v2).sub(this.v1),
b.multiplyScalar(a).add(this.v1));return b};Tb.prototype.getPointAt=function(a,b){return this.getPoint(a,b)};Tb.prototype.copy=function(a){oa.prototype.copy.call(this,a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};Tb.prototype.toJSON=function(){var a=oa.prototype.toJSON.call(this);a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};Tb.prototype.fromJSON=function(a){oa.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Ub.prototype=Object.create(oa.prototype);
Ub.prototype.constructor=Ub;Ub.prototype.isQuadraticBezierCurve=!0;Ub.prototype.getPoint=function(a,b){b=b||new L;var d=this.v0,e=this.v1,f=this.v2;b.set(qf(a,d.x,e.x,f.x),qf(a,d.y,e.y,f.y));return b};Ub.prototype.copy=function(a){oa.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};Ub.prototype.toJSON=function(){var a=oa.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};Ub.prototype.fromJSON=
function(a){oa.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};ec.prototype=Object.create(oa.prototype);ec.prototype.constructor=ec;ec.prototype.isQuadraticBezierCurve3=!0;ec.prototype.getPoint=function(a,b){b=b||new w;var d=this.v0,e=this.v1,f=this.v2;b.set(qf(a,d.x,e.x,f.x),qf(a,d.y,e.y,f.y),qf(a,d.z,e.z,f.z));return b};ec.prototype.copy=function(a){oa.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);
return this};ec.prototype.toJSON=function(){var a=oa.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};ec.prototype.fromJSON=function(a){oa.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};Vb.prototype=Object.create(oa.prototype);Vb.prototype.constructor=Vb;Vb.prototype.isSplineCurve=!0;Vb.prototype.getPoint=function(a,b){b=b||new L;var d=this.points,e=(d.length-1)*a;a=Math.floor(e);
e-=a;var f=d[0===a?a:a-1],g=d[a],h=d[a>d.length-2?d.length-1:a+1];d=d[a>d.length-3?d.length-1:a+2];b.set(kj(e,f.x,g.x,h.x,d.x),kj(e,f.y,g.y,h.y,d.y));return b};Vb.prototype.copy=function(a){oa.prototype.copy.call(this,a);this.points=[];for(var b=0,d=a.points.length;b<d;b++)this.points.push(a.points[b].clone());return this};Vb.prototype.toJSON=function(){var a=oa.prototype.toJSON.call(this);a.points=[];for(var b=0,d=this.points.length;b<d;b++)a.points.push(this.points[b].toArray());return a};Vb.prototype.fromJSON=
function(a){oa.prototype.fromJSON.call(this,a);this.points=[];for(var b=0,d=a.points.length;b<d;b++){var e=a.points[b];this.points.push((new L).fromArray(e))}return this};var pi=Object.freeze({__proto__:null,ArcCurve:ge,CatmullRomCurve3:ob,CubicBezierCurve:Sb,CubicBezierCurve3:dc,EllipseCurve:Ib,LineCurve:Ab,LineCurve3:Tb,QuadraticBezierCurve:Ub,QuadraticBezierCurve3:ec,SplineCurve:Vb});qc.prototype=Object.assign(Object.create(oa.prototype),{constructor:qc,add:function(a){this.curves.push(a)},closePath:function(){var a=
this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new Ab(b,a))},getPoint:function(a){var b=a*this.getLength(),d=this.getCurveLengths();for(a=0;a<d.length;){if(d[a]>=b)return b=d[a]-b,a=this.curves[a],d=a.getLength(),a.getPointAt(0===d?0:1-b/d);a++}return null},getLength:function(){var a=this.getCurveLengths();return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&
this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],b=0,d=0,e=this.curves.length;d<e;d++)b+=this.curves[d].getLength(),a.push(b);return this.cacheLengths=a},getSpacedPoints:function(a){void 0===a&&(a=40);for(var b=[],d=0;d<=a;d++)b.push(this.getPoint(d/a));this.autoClose&&b.push(b[0]);return b},getPoints:function(a){a=a||12;for(var b=[],d,e=0,f=this.curves;e<f.length;e++){var g=f[e];g=g.getPoints(g&&g.isEllipseCurve?2*a:g&&(g.isLineCurve||g.isLineCurve3)?1:g&&g.isSplineCurve?
a*g.points.length:a);for(var h=0;h<g.length;h++){var k=g[h];d&&d.equals(k)||(b.push(k),d=k)}}this.autoClose&&1<b.length&&!b[b.length-1].equals(b[0])&&b.push(b[0]);return b},copy:function(a){oa.prototype.copy.call(this,a);this.curves=[];for(var b=0,d=a.curves.length;b<d;b++)this.curves.push(a.curves[b].clone());this.autoClose=a.autoClose;return this},toJSON:function(){var a=oa.prototype.toJSON.call(this);a.autoClose=this.autoClose;a.curves=[];for(var b=0,d=this.curves.length;b<d;b++)a.curves.push(this.curves[b].toJSON());
return a},fromJSON:function(a){oa.prototype.fromJSON.call(this,a);this.autoClose=a.autoClose;this.curves=[];for(var b=0,d=a.curves.length;b<d;b++){var e=a.curves[b];this.curves.push((new pi[e.type]).fromJSON(e))}return this}});Wb.prototype=Object.assign(Object.create(qc.prototype),{constructor:Wb,setFromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,d=a.length;b<d;b++)this.lineTo(a[b].x,a[b].y);return this},moveTo:function(a,b){this.currentPoint.set(a,b);return this},lineTo:function(a,
b){var d=new Ab(this.currentPoint.clone(),new L(a,b));this.curves.push(d);this.currentPoint.set(a,b);return this},quadraticCurveTo:function(a,b,d,e){a=new Ub(this.currentPoint.clone(),new L(a,b),new L(d,e));this.curves.push(a);this.currentPoint.set(d,e);return this},bezierCurveTo:function(a,b,d,e,f,g){a=new Sb(this.currentPoint.clone(),new L(a,b),new L(d,e),new L(f,g));this.curves.push(a);this.currentPoint.set(f,g);return this},splineThru:function(a){var b=[this.currentPoint.clone()].concat(a);b=
new Vb(b);this.curves.push(b);this.currentPoint.copy(a[a.length-1]);return this},arc:function(a,b,d,e,f,g){this.absarc(a+this.currentPoint.x,b+this.currentPoint.y,d,e,f,g);return this},absarc:function(a,b,d,e,f,g){this.absellipse(a,b,d,d,e,f,g);return this},ellipse:function(a,b,d,e,f,g,h,k){this.absellipse(a+this.currentPoint.x,b+this.currentPoint.y,d,e,f,g,h,k);return this},absellipse:function(a,b,d,e,f,g,h,k){a=new Ib(a,b,d,e,f,g,h,k);0<this.curves.length&&(b=a.getPoint(0),b.equals(this.currentPoint)||
this.lineTo(b.x,b.y));this.curves.push(a);a=a.getPoint(1);this.currentPoint.copy(a);return this},copy:function(a){qc.prototype.copy.call(this,a);this.currentPoint.copy(a.currentPoint);return this},toJSON:function(){var a=qc.prototype.toJSON.call(this);a.currentPoint=this.currentPoint.toArray();return a},fromJSON:function(a){qc.prototype.fromJSON.call(this,a);this.currentPoint.fromArray(a.currentPoint);return this}});Pc.prototype=Object.assign(Object.create(Wb.prototype),{constructor:Pc,getPointsHoles:function(a){for(var b=
[],d=0,e=this.holes.length;d<e;d++)b[d]=this.holes[d].getPoints(a);return b},extractPoints:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}},copy:function(a){Wb.prototype.copy.call(this,a);this.holes=[];for(var b=0,d=a.holes.length;b<d;b++)this.holes.push(a.holes[b].clone());return this},toJSON:function(){var a=Wb.prototype.toJSON.call(this);a.uuid=this.uuid;a.holes=[];for(var b=0,d=this.holes.length;b<d;b++)a.holes.push(this.holes[b].toJSON());return a},fromJSON:function(a){Wb.prototype.fromJSON.call(this,
a);this.uuid=a.uuid;this.holes=[];for(var b=0,d=a.holes.length;b<d;b++){var e=a.holes[b];this.holes.push((new Wb).fromJSON(e))}return this}});Sa.prototype=Object.assign(Object.create(ha.prototype),{constructor:Sa,isLight:!0,copy:function(a){ha.prototype.copy.call(this,a);this.color.copy(a.color);this.intensity=a.intensity;return this},toJSON:function(a){a=ha.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.intensity=this.intensity;void 0!==this.groundColor&&(a.object.groundColor=
this.groundColor.getHex());void 0!==this.distance&&(a.object.distance=this.distance);void 0!==this.angle&&(a.object.angle=this.angle);void 0!==this.decay&&(a.object.decay=this.decay);void 0!==this.penumbra&&(a.object.penumbra=this.penumbra);void 0!==this.shadow&&(a.object.shadow=this.shadow.toJSON());return a}});mg.prototype=Object.assign(Object.create(Sa.prototype),{constructor:mg,isHemisphereLight:!0,copy:function(a){Sa.prototype.copy.call(this,a);this.groundColor.copy(a.groundColor);return this}});
Object.assign(fc.prototype,{_projScreenMatrix:new da,_lightPositionWorld:new w,_lookTarget:new w,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(a){var b=this.camera,d=this.matrix,e=this._projScreenMatrix,f=this._lookTarget,g=this._lightPositionWorld;g.setFromMatrixPosition(a.matrixWorld);b.position.copy(g);f.setFromMatrixPosition(a.target.matrixWorld);b.lookAt(f);b.updateMatrixWorld();e.multiplyMatrices(b.projectionMatrix,
b.matrixWorldInverse);this._frustum.setFromProjectionMatrix(e);d.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);d.multiply(b.projectionMatrix);d.multiply(b.matrixWorldInverse)},getViewport:function(a){return this._viewports[a]},getFrameExtents:function(){return this._frameExtents},copy:function(a){this.camera=a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var a={};0!==this.bias&&
(a.bias=this.bias);0!==this.normalBias&&(a.normalBias=this.normalBias);1!==this.radius&&(a.radius=this.radius);if(512!==this.mapSize.x||512!==this.mapSize.y)a.mapSize=this.mapSize.toArray();a.camera=this.camera.toJSON(!1).object;delete a.camera.matrix;return a}});Eh.prototype=Object.assign(Object.create(fc.prototype),{constructor:Eh,isSpotLightShadow:!0,updateMatrices:function(a){var b=this.camera,d=2*xa.RAD2DEG*a.angle,e=this.mapSize.width/this.mapSize.height,f=a.distance||b.far;if(d!==b.fov||e!==
b.aspect||f!==b.far)b.fov=d,b.aspect=e,b.far=f,b.updateProjectionMatrix();fc.prototype.updateMatrices.call(this,a)}});ng.prototype=Object.assign(Object.create(Sa.prototype),{constructor:ng,isSpotLight:!0,copy:function(a){Sa.prototype.copy.call(this,a);this.distance=a.distance;this.angle=a.angle;this.penumbra=a.penumbra;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});Fh.prototype=Object.assign(Object.create(fc.prototype),{constructor:Fh,isPointLightShadow:!0,
updateMatrices:function(a,b){void 0===b&&(b=0);var d=this.camera,e=this.matrix,f=this._lightPositionWorld,g=this._lookTarget,h=this._projScreenMatrix;f.setFromMatrixPosition(a.matrixWorld);d.position.copy(f);g.copy(d.position);g.add(this._cubeDirections[b]);d.up.copy(this._cubeUps[b]);d.lookAt(g);d.updateMatrixWorld();e.makeTranslation(-f.x,-f.y,-f.z);h.multiplyMatrices(d.projectionMatrix,d.matrixWorldInverse);this._frustum.setFromProjectionMatrix(h)}});og.prototype=Object.assign(Object.create(Sa.prototype),
{constructor:og,isPointLight:!0,copy:function(a){Sa.prototype.copy.call(this,a);this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return this}});he.prototype=Object.assign(Object.create(ac.prototype),{constructor:he,isOrthographicCamera:!0,copy:function(a,b){ac.prototype.copy.call(this,a,b);this.left=a.left;this.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=null===a.view?null:Object.assign({},a.view);return this},
setViewOffset:function(a,b,d,e,f,g){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=b;this.view.offsetX=d;this.view.offsetY=e;this.view.width=f;this.view.height=g;this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=(this.right-this.left)/(2*this.zoom),b=(this.top-
this.bottom)/(2*this.zoom),d=(this.right+this.left)/2,e=(this.top+this.bottom)/2,f=d-a;d+=a;a=e+b;b=e-b;null!==this.view&&this.view.enabled&&(e=(this.right-this.left)/this.view.fullWidth/this.zoom,b=(this.top-this.bottom)/this.view.fullHeight/this.zoom,f+=e*this.view.offsetX,d=f+e*this.view.width,a-=b*this.view.offsetY,b=a-b*this.view.height);this.projectionMatrix.makeOrthographic(f,d,a,b,this.near,this.far);this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(a){a=ha.prototype.toJSON.call(this,
a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return a}});Gh.prototype=Object.assign(Object.create(fc.prototype),{constructor:Gh,isDirectionalLightShadow:!0,updateMatrices:function(a){fc.prototype.updateMatrices.call(this,a)}});pg.prototype=Object.assign(Object.create(Sa.prototype),{constructor:pg,isDirectionalLight:!0,
copy:function(a){Sa.prototype.copy.call(this,a);this.target=a.target.clone();this.shadow=a.shadow.clone();return this}});qg.prototype=Object.assign(Object.create(Sa.prototype),{constructor:qg,isAmbientLight:!0});rg.prototype=Object.assign(Object.create(Sa.prototype),{constructor:rg,isRectAreaLight:!0,copy:function(a){Sa.prototype.copy.call(this,a);this.width=a.width;this.height=a.height;return this},toJSON:function(a){a=Sa.prototype.toJSON.call(this,a);a.object.width=this.width;a.object.height=this.height;
return a}});var pb=function(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0});this.coefficients=[];for(var a=0;9>a;a++)this.coefficients.push(new w)};pb.prototype.set=function(a){for(var b=0;9>b;b++)this.coefficients[b].copy(a[b]);return this};pb.prototype.zero=function(){for(var a=0;9>a;a++)this.coefficients[a].set(0,0,0);return this};pb.prototype.getAt=function(a,b){var d=a.x,e=a.y;a=a.z;var f=this.coefficients;b.copy(f[0]).multiplyScalar(.282095);b.addScaledVector(f[1],.488603*e);
b.addScaledVector(f[2],.488603*a);b.addScaledVector(f[3],.488603*d);b.addScaledVector(f[4],1.092548*d*e);b.addScaledVector(f[5],1.092548*e*a);b.addScaledVector(f[6],.315392*(3*a*a-1));b.addScaledVector(f[7],1.092548*d*a);b.addScaledVector(f[8],.546274*(d*d-e*e));return b};pb.prototype.getIrradianceAt=function(a,b){var d=a.x,e=a.y;a=a.z;var f=this.coefficients;b.copy(f[0]).multiplyScalar(.886227);b.addScaledVector(f[1],1.023328*e);b.addScaledVector(f[2],1.023328*a);b.addScaledVector(f[3],1.023328*
d);b.addScaledVector(f[4],.858086*d*e);b.addScaledVector(f[5],.858086*e*a);b.addScaledVector(f[6],.743125*a*a-.247708);b.addScaledVector(f[7],.858086*d*a);b.addScaledVector(f[8],.429043*(d*d-e*e));return b};pb.prototype.add=function(a){for(var b=0;9>b;b++)this.coefficients[b].add(a.coefficients[b]);return this};pb.prototype.addScaledSH=function(a,b){for(var d=0;9>d;d++)this.coefficients[d].addScaledVector(a.coefficients[d],b);return this};pb.prototype.scale=function(a){for(var b=0;9>b;b++)this.coefficients[b].multiplyScalar(a);
return this};pb.prototype.lerp=function(a,b){for(var d=0;9>d;d++)this.coefficients[d].lerp(a.coefficients[d],b);return this};pb.prototype.equals=function(a){for(var b=0;9>b;b++)if(!this.coefficients[b].equals(a.coefficients[b]))return!1;return!0};pb.prototype.copy=function(a){return this.set(a.coefficients)};pb.prototype.clone=function(){return(new this.constructor).copy(this)};pb.prototype.fromArray=function(a,b){void 0===b&&(b=0);for(var d=this.coefficients,e=0;9>e;e++)d[e].fromArray(a,b+3*e);return this};
pb.prototype.toArray=function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);for(var d=this.coefficients,e=0;9>e;e++)d[e].toArray(a,b+3*e);return a};pb.getBasisAt=function(a,b){var d=a.x,e=a.y;a=a.z;b[0]=.282095;b[1]=.488603*e;b[2]=.488603*a;b[3]=.488603*d;b[4]=1.092548*d*e;b[5]=1.092548*e*a;b[6]=.315392*(3*a*a-1);b[7]=1.092548*d*a;b[8]=.546274*(d*d-e*e)};Ob.prototype=Object.assign(Object.create(Sa.prototype),{constructor:Ob,isLightProbe:!0,copy:function(a){Sa.prototype.copy.call(this,a);this.sh.copy(a.sh);
return this},fromJSON:function(a){this.intensity=a.intensity;this.sh.fromArray(a.sh);return this},toJSON:function(a){a=Sa.prototype.toJSON.call(this,a);a.object.sh=this.sh.toArray();return a}});sg.prototype=Object.assign(Object.create(Ma.prototype),{constructor:sg,load:function(a,b,d,e){var f=this,g=new Nb(f.manager);g.setPath(f.path);g.setRequestHeader(f.requestHeader);g.load(a,function(h){try{b(f.parse(JSON.parse(h)))}catch(k){e?e(k):console.error(k),f.manager.itemError(a)}},d,e)},parse:function(a){function b(k){void 0===
d[k]&&console.warn("THREE.MaterialLoader: Undefined texture",k);return d[k]}var d=this.textures,e=new Xl[a.type];void 0!==a.uuid&&(e.uuid=a.uuid);void 0!==a.name&&(e.name=a.name);void 0!==a.color&&e.color.setHex(a.color);void 0!==a.roughness&&(e.roughness=a.roughness);void 0!==a.metalness&&(e.metalness=a.metalness);void 0!==a.sheen&&(e.sheen=(new S).setHex(a.sheen));void 0!==a.emissive&&e.emissive.setHex(a.emissive);void 0!==a.specular&&e.specular.setHex(a.specular);void 0!==a.shininess&&(e.shininess=
a.shininess);void 0!==a.clearcoat&&(e.clearcoat=a.clearcoat);void 0!==a.clearcoatRoughness&&(e.clearcoatRoughness=a.clearcoatRoughness);void 0!==a.fog&&(e.fog=a.fog);void 0!==a.flatShading&&(e.flatShading=a.flatShading);void 0!==a.blending&&(e.blending=a.blending);void 0!==a.combine&&(e.combine=a.combine);void 0!==a.side&&(e.side=a.side);void 0!==a.opacity&&(e.opacity=a.opacity);void 0!==a.transparent&&(e.transparent=a.transparent);void 0!==a.alphaTest&&(e.alphaTest=a.alphaTest);void 0!==a.depthTest&&
(e.depthTest=a.depthTest);void 0!==a.depthWrite&&(e.depthWrite=a.depthWrite);void 0!==a.colorWrite&&(e.colorWrite=a.colorWrite);void 0!==a.stencilWrite&&(e.stencilWrite=a.stencilWrite);void 0!==a.stencilWriteMask&&(e.stencilWriteMask=a.stencilWriteMask);void 0!==a.stencilFunc&&(e.stencilFunc=a.stencilFunc);void 0!==a.stencilRef&&(e.stencilRef=a.stencilRef);void 0!==a.stencilFuncMask&&(e.stencilFuncMask=a.stencilFuncMask);void 0!==a.stencilFail&&(e.stencilFail=a.stencilFail);void 0!==a.stencilZFail&&
(e.stencilZFail=a.stencilZFail);void 0!==a.stencilZPass&&(e.stencilZPass=a.stencilZPass);void 0!==a.wireframe&&(e.wireframe=a.wireframe);void 0!==a.wireframeLinewidth&&(e.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.wireframeLinecap&&(e.wireframeLinecap=a.wireframeLinecap);void 0!==a.wireframeLinejoin&&(e.wireframeLinejoin=a.wireframeLinejoin);void 0!==a.rotation&&(e.rotation=a.rotation);1!==a.linewidth&&(e.linewidth=a.linewidth);void 0!==a.dashSize&&(e.dashSize=a.dashSize);void 0!==a.gapSize&&
(e.gapSize=a.gapSize);void 0!==a.scale&&(e.scale=a.scale);void 0!==a.polygonOffset&&(e.polygonOffset=a.polygonOffset);void 0!==a.polygonOffsetFactor&&(e.polygonOffsetFactor=a.polygonOffsetFactor);void 0!==a.polygonOffsetUnits&&(e.polygonOffsetUnits=a.polygonOffsetUnits);void 0!==a.skinning&&(e.skinning=a.skinning);void 0!==a.morphTargets&&(e.morphTargets=a.morphTargets);void 0!==a.morphNormals&&(e.morphNormals=a.morphNormals);void 0!==a.dithering&&(e.dithering=a.dithering);void 0!==a.vertexTangents&&
(e.vertexTangents=a.vertexTangents);void 0!==a.visible&&(e.visible=a.visible);void 0!==a.toneMapped&&(e.toneMapped=a.toneMapped);void 0!==a.userData&&(e.userData=a.userData);void 0!==a.vertexColors&&(e.vertexColors="number"===typeof a.vertexColors?0<a.vertexColors?!0:!1:a.vertexColors);if(void 0!==a.uniforms)for(var f in a.uniforms){var g=a.uniforms[f];e.uniforms[f]={};switch(g.type){case "t":e.uniforms[f].value=b(g.value);break;case "c":e.uniforms[f].value=(new S).setHex(g.value);break;case "v2":e.uniforms[f].value=
(new L).fromArray(g.value);break;case "v3":e.uniforms[f].value=(new w).fromArray(g.value);break;case "v4":e.uniforms[f].value=(new ca).fromArray(g.value);break;case "m3":e.uniforms[f].value=(new Da).fromArray(g.value);break;case "m4":e.uniforms[f].value=(new da).fromArray(g.value);break;default:e.uniforms[f].value=g.value}}void 0!==a.defines&&(e.defines=a.defines);void 0!==a.vertexShader&&(e.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(e.fragmentShader=a.fragmentShader);if(void 0!==a.extensions)for(var h in a.extensions)e.extensions[h]=
a.extensions[h];void 0!==a.shading&&(e.flatShading=1===a.shading);void 0!==a.size&&(e.size=a.size);void 0!==a.sizeAttenuation&&(e.sizeAttenuation=a.sizeAttenuation);void 0!==a.map&&(e.map=b(a.map));void 0!==a.matcap&&(e.matcap=b(a.matcap));void 0!==a.alphaMap&&(e.alphaMap=b(a.alphaMap));void 0!==a.bumpMap&&(e.bumpMap=b(a.bumpMap));void 0!==a.bumpScale&&(e.bumpScale=a.bumpScale);void 0!==a.normalMap&&(e.normalMap=b(a.normalMap));void 0!==a.normalMapType&&(e.normalMapType=a.normalMapType);void 0!==
a.normalScale&&(f=a.normalScale,!1===Array.isArray(f)&&(f=[f,f]),e.normalScale=(new L).fromArray(f));void 0!==a.displacementMap&&(e.displacementMap=b(a.displacementMap));void 0!==a.displacementScale&&(e.displacementScale=a.displacementScale);void 0!==a.displacementBias&&(e.displacementBias=a.displacementBias);void 0!==a.roughnessMap&&(e.roughnessMap=b(a.roughnessMap));void 0!==a.metalnessMap&&(e.metalnessMap=b(a.metalnessMap));void 0!==a.emissiveMap&&(e.emissiveMap=b(a.emissiveMap));void 0!==a.emissiveIntensity&&
(e.emissiveIntensity=a.emissiveIntensity);void 0!==a.specularMap&&(e.specularMap=b(a.specularMap));void 0!==a.envMap&&(e.envMap=b(a.envMap));void 0!==a.envMapIntensity&&(e.envMapIntensity=a.envMapIntensity);void 0!==a.reflectivity&&(e.reflectivity=a.reflectivity);void 0!==a.refractionRatio&&(e.refractionRatio=a.refractionRatio);void 0!==a.lightMap&&(e.lightMap=b(a.lightMap));void 0!==a.lightMapIntensity&&(e.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(e.aoMap=b(a.aoMap));void 0!==a.aoMapIntensity&&
(e.aoMapIntensity=a.aoMapIntensity);void 0!==a.gradientMap&&(e.gradientMap=b(a.gradientMap));void 0!==a.clearcoatMap&&(e.clearcoatMap=b(a.clearcoatMap));void 0!==a.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap=b(a.clearcoatRoughnessMap));void 0!==a.clearcoatNormalMap&&(e.clearcoatNormalMap=b(a.clearcoatNormalMap));void 0!==a.clearcoatNormalScale&&(e.clearcoatNormalScale=(new L).fromArray(a.clearcoatNormalScale));void 0!==a.transmission&&(e.transmission=a.transmission);void 0!==a.transmissionMap&&
(e.transmissionMap=b(a.transmissionMap));return e},setTextures:function(a){this.textures=a;return this}});var qi={decodeText:function(a){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(a);for(var b="",d=0,e=a.length;d<e;d++)b+=String.fromCharCode(a[d]);try{return decodeURIComponent(escape(b))}catch(f){return b}},extractUrlBase:function(a){var b=a.lastIndexOf("/");return-1===b?"./":a.substr(0,b+1)}};sf.prototype=Object.assign(Object.create(ka.prototype),{constructor:sf,isInstancedBufferGeometry:!0,
copy:function(a){ka.prototype.copy.call(this,a);this.instanceCount=a.instanceCount;return this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var a=ka.prototype.toJSON.call(this);a.instanceCount=this.instanceCount;a.isInstancedBufferGeometry=!0;return a}});tg.prototype=Object.assign(Object.create(pa.prototype),{constructor:tg,isInstancedBufferAttribute:!0,copy:function(a){pa.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this},toJSON:function(){var a=
pa.prototype.toJSON.call(this);a.meshPerAttribute=this.meshPerAttribute;a.isInstancedBufferAttribute=!0;return a}});ug.prototype=Object.assign(Object.create(Ma.prototype),{constructor:ug,load:function(a,b,d,e){var f=this,g=new Nb(f.manager);g.setPath(f.path);g.setRequestHeader(f.requestHeader);g.load(a,function(h){try{b(f.parse(JSON.parse(h)))}catch(k){e?e(k):console.error(k),f.manager.itemError(a)}},d,e)},parse:function(a){function b(q,v){if(void 0!==d[v])return d[v];var u=q.interleavedBuffers[v];
var A=u.buffer;void 0!==e[A]?A=e[A]:(q=(new Uint32Array(q.arrayBuffers[A])).buffer,A=e[A]=q);A=new Vg[u.type](A);A=new Gb(A,u.stride);A.uuid=u.uuid;return d[v]=A}var d={},e={},f=a.isInstancedBufferGeometry?new sf:new ka,g=a.data.index;void 0!==g&&(g=new Vg[g.type](g.array),f.setIndex(new pa(g,1)));g=a.data.attributes;for(var h in g){var k=g[h],l=void 0;k.isInterleavedBufferAttribute?(l=b(a.data,k.data),l=new Kc(l,k.itemSize,k.offset,k.normalized)):(l=new Vg[k.type](k.array),l=new (k.isInstancedBufferAttribute?
tg:pa)(l,k.itemSize,k.normalized));void 0!==k.name&&(l.name=k.name);f.setAttribute(h,l)}if(h=a.data.morphAttributes)for(var m in h){g=h[m];k=[];l=0;for(var n=g.length;l<n;l++){var p=g[l],t=void 0;p.isInterleavedBufferAttribute?(t=b(a.data,p.data),t=new Kc(t,p.itemSize,p.offset,p.normalized)):(t=new Vg[p.type](p.array),t=new pa(t,p.itemSize,p.normalized));void 0!==p.name&&(t.name=p.name);k.push(t)}f.morphAttributes[m]=k}a.data.morphTargetsRelative&&(f.morphTargetsRelative=!0);m=a.data.groups||a.data.drawcalls||
a.data.offsets;if(void 0!==m)for(h=0,g=m.length;h!==g;++h)k=m[h],f.addGroup(k.start,k.count,k.materialIndex);m=a.data.boundingSphere;void 0!==m&&(h=new w,void 0!==m.center&&h.fromArray(m.center),f.boundingSphere=new Wa(h,m.radius));a.name&&(f.name=a.name);a.userData&&(f.userData=a.userData);return f}});var Vg={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,
Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};vg.prototype=Object.assign(Object.create(Ma.prototype),{constructor:vg,load:function(a,b,d,e){var f=this,g=""===this.path?qi.extractUrlBase(a):this.path;this.resourcePath=this.resourcePath||g;g=new Nb(f.manager);g.setPath(this.path);g.setRequestHeader(this.requestHeader);g.load(a,function(h){var k=null;try{k=JSON.parse(h)}catch(l){void 0!==e&&e(l);console.error("THREE:ObjectLoader: Can't parse "+a+".",l.message);return}h=
k.metadata;void 0===h||void 0===h.type||"geometry"===h.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+a):f.parse(k,b)},d,e)},parse:function(a,b){var d=this.parseShape(a.shapes);d=this.parseGeometries(a.geometries,d);var e=this.parseImages(a.images,function(){void 0!==b&&b(f)});e=this.parseTextures(a.textures,e);e=this.parseMaterials(a.materials,e);var f=this.parseObject(a.object,d,e);a.animations&&(f.animations=this.parseAnimations(a.animations));void 0!==a.images&&0!==a.images.length||
void 0===b||b(f);return f},parseShape:function(a){var b={};if(void 0!==a)for(var d=0,e=a.length;d<e;d++){var f=(new Pc).fromJSON(a[d]);b[f.uuid]=f}return b},parseGeometries:function(a,b){var d={};if(void 0!==a)for(var e=new ug,f=0,g=a.length;f<g;f++){var h=void 0;var k=a[f];switch(k.type){case "PlaneGeometry":case "PlaneBufferGeometry":h=new vb[k.type](k.width,k.height,k.widthSegments,k.heightSegments);break;case "BoxGeometry":case "BoxBufferGeometry":case "CubeGeometry":h=new vb[k.type](k.width,
k.height,k.depth,k.widthSegments,k.heightSegments,k.depthSegments);break;case "CircleGeometry":case "CircleBufferGeometry":h=new vb[k.type](k.radius,k.segments,k.thetaStart,k.thetaLength);break;case "CylinderGeometry":case "CylinderBufferGeometry":h=new vb[k.type](k.radiusTop,k.radiusBottom,k.height,k.radialSegments,k.heightSegments,k.openEnded,k.thetaStart,k.thetaLength);break;case "ConeGeometry":case "ConeBufferGeometry":h=new vb[k.type](k.radius,k.height,k.radialSegments,k.heightSegments,k.openEnded,
k.thetaStart,k.thetaLength);break;case "SphereGeometry":case "SphereBufferGeometry":h=new vb[k.type](k.radius,k.widthSegments,k.heightSegments,k.phiStart,k.phiLength,k.thetaStart,k.thetaLength);break;case "DodecahedronGeometry":case "DodecahedronBufferGeometry":case "IcosahedronGeometry":case "IcosahedronBufferGeometry":case "OctahedronGeometry":case "OctahedronBufferGeometry":case "TetrahedronGeometry":case "TetrahedronBufferGeometry":h=new vb[k.type](k.radius,k.detail);break;case "RingGeometry":case "RingBufferGeometry":h=
new vb[k.type](k.innerRadius,k.outerRadius,k.thetaSegments,k.phiSegments,k.thetaStart,k.thetaLength);break;case "TorusGeometry":case "TorusBufferGeometry":h=new vb[k.type](k.radius,k.tube,k.radialSegments,k.tubularSegments,k.arc);break;case "TorusKnotGeometry":case "TorusKnotBufferGeometry":h=new vb[k.type](k.radius,k.tube,k.tubularSegments,k.radialSegments,k.p,k.q);break;case "TubeGeometry":case "TubeBufferGeometry":h=new vb[k.type]((new pi[k.path.type]).fromJSON(k.path),k.tubularSegments,k.radius,
k.radialSegments,k.closed);break;case "LatheGeometry":case "LatheBufferGeometry":h=new vb[k.type](k.points,k.segments,k.phiStart,k.phiLength);break;case "PolyhedronGeometry":case "PolyhedronBufferGeometry":h=new vb[k.type](k.vertices,k.indices,k.radius,k.details);break;case "ShapeGeometry":case "ShapeBufferGeometry":h=[];for(var l=0,m=k.shapes.length;l<m;l++)h.push(b[k.shapes[l]]);h=new vb[k.type](h,k.curveSegments);break;case "ExtrudeGeometry":case "ExtrudeBufferGeometry":h=[];l=0;for(m=k.shapes.length;l<
m;l++)h.push(b[k.shapes[l]]);l=k.options.extrudePath;void 0!==l&&(k.options.extrudePath=(new pi[l.type]).fromJSON(l));h=new vb[k.type](h,k.options);break;case "BufferGeometry":case "InstancedBufferGeometry":h=e.parse(k);break;case "Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+k.type+'"');continue}h.uuid=k.uuid;void 0!==k.name&&(h.name=k.name);!0===h.isBufferGeometry&&void 0!==
k.userData&&(h.userData=k.userData);d[k.uuid]=h}return d},parseMaterials:function(a,b){var d={},e={};if(void 0!==a){var f=new sg;f.setTextures(b);b=0;for(var g=a.length;b<g;b++){var h=a[b];if("MultiMaterial"===h.type){for(var k=[],l=0;l<h.materials.length;l++){var m=h.materials[l];void 0===d[m.uuid]&&(d[m.uuid]=f.parse(m));k.push(d[m.uuid])}e[h.uuid]=k}else void 0===d[h.uuid]&&(d[h.uuid]=f.parse(h)),e[h.uuid]=d[h.uuid]}}return e},parseAnimations:function(a){for(var b=[],d=0;d<a.length;d++){var e=
a[d],f=Mb.parse(e);void 0!==e.uuid&&(f.uuid=e.uuid);b.push(f)}return b},parseImages:function(a,b){function d(t){e.manager.itemStart(t);return g.load(t,function(){e.manager.itemEnd(t)},void 0,function(){e.manager.itemError(t);e.manager.itemEnd(t)})}var e=this,f={};if(void 0!==a&&0<a.length){b=new Ah(b);var g=new fe(b);g.setCrossOrigin(this.crossOrigin);b=0;for(var h=a.length;b<h;b++){var k=a[b],l=k.url;if(Array.isArray(l)){f[k.uuid]=[];for(var m=0,n=l.length;m<n;m++){var p=l[m];p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?
p:e.resourcePath+p;f[k.uuid].push(d(p))}}else l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(k.url)?k.url:e.resourcePath+k.url,f[k.uuid]=d(l)}}return f},parseTextures:function(a,b){function d(l,m){if("number"===typeof l)return l;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",l);return m[l]}var e={};if(void 0!==a)for(var f=0,g=a.length;f<g;f++){var h=a[f];void 0===h.image&&console.warn('THREE.ObjectLoader: No "image" specified for',h.uuid);void 0===b[h.image]&&console.warn("THREE.ObjectLoader: Undefined image",
h.image);var k=void 0;k=Array.isArray(b[h.image])?new kc(b[h.image]):new Oa(b[h.image]);k.needsUpdate=!0;k.uuid=h.uuid;void 0!==h.name&&(k.name=h.name);void 0!==h.mapping&&(k.mapping=d(h.mapping,Yl));void 0!==h.offset&&k.offset.fromArray(h.offset);void 0!==h.repeat&&k.repeat.fromArray(h.repeat);void 0!==h.center&&k.center.fromArray(h.center);void 0!==h.rotation&&(k.rotation=h.rotation);void 0!==h.wrap&&(k.wrapS=d(h.wrap[0],Pj),k.wrapT=d(h.wrap[1],Pj));void 0!==h.format&&(k.format=h.format);void 0!==
h.type&&(k.type=h.type);void 0!==h.encoding&&(k.encoding=h.encoding);void 0!==h.minFilter&&(k.minFilter=d(h.minFilter,Qj));void 0!==h.magFilter&&(k.magFilter=d(h.magFilter,Qj));void 0!==h.anisotropy&&(k.anisotropy=h.anisotropy);void 0!==h.flipY&&(k.flipY=h.flipY);void 0!==h.premultiplyAlpha&&(k.premultiplyAlpha=h.premultiplyAlpha);void 0!==h.unpackAlignment&&(k.unpackAlignment=h.unpackAlignment);e[h.uuid]=k}return e},parseObject:function(a,b,d){function e(m){void 0===b[m]&&console.warn("THREE.ObjectLoader: Undefined geometry",
m);return b[m]}function f(m){if(void 0!==m){if(Array.isArray(m)){for(var n=[],p=0,t=m.length;p<t;p++){var q=m[p];void 0===d[q]&&console.warn("THREE.ObjectLoader: Undefined material",q);n.push(d[q])}return n}void 0===d[m]&&console.warn("THREE.ObjectLoader: Undefined material",m);return d[m]}}switch(a.type){case "Scene":var g=new Jc;void 0!==a.background&&Number.isInteger(a.background)&&(g.background=new S(a.background));void 0!==a.fog&&("Fog"===a.fog.type?g.fog=new Hf(a.fog.color,a.fog.near,a.fog.far):
"FogExp2"===a.fog.type&&(g.fog=new Gf(a.fog.color,a.fog.density)));break;case "PerspectiveCamera":g=new eb(a.fov,a.aspect,a.near,a.far);void 0!==a.focus&&(g.focus=a.focus);void 0!==a.zoom&&(g.zoom=a.zoom);void 0!==a.filmGauge&&(g.filmGauge=a.filmGauge);void 0!==a.filmOffset&&(g.filmOffset=a.filmOffset);void 0!==a.view&&(g.view=Object.assign({},a.view));break;case "OrthographicCamera":g=new he(a.left,a.right,a.top,a.bottom,a.near,a.far);void 0!==a.zoom&&(g.zoom=a.zoom);void 0!==a.view&&(g.view=Object.assign({},
a.view));break;case "AmbientLight":g=new qg(a.color,a.intensity);break;case "DirectionalLight":g=new pg(a.color,a.intensity);break;case "PointLight":g=new og(a.color,a.intensity,a.distance,a.decay);break;case "RectAreaLight":g=new rg(a.color,a.intensity,a.width,a.height);break;case "SpotLight":g=new ng(a.color,a.intensity,a.distance,a.angle,a.penumbra,a.decay);break;case "HemisphereLight":g=new mg(a.color,a.groundColor,a.intensity);break;case "LightProbe":g=(new Ob).fromJSON(a);break;case "SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");
case "Mesh":g=e(a.geometry);var h=f(a.material);g=new Qa(g,h);break;case "InstancedMesh":g=e(a.geometry);h=f(a.material);var k=a.instanceMatrix;g=new Zf(g,h,a.count);g.instanceMatrix=new pa(new Float32Array(k.array),16);break;case "LOD":g=new Se;break;case "Line":g=new yb(e(a.geometry),f(a.material),a.mode);break;case "LineLoop":g=new $f(e(a.geometry),f(a.material));break;case "LineSegments":g=new Za(e(a.geometry),f(a.material));break;case "PointCloud":case "Points":g=new Pd(e(a.geometry),f(a.material));
break;case "Sprite":g=new Qe(f(a.material));break;case "Group":g=new Gc;break;default:g=new ha}g.uuid=a.uuid;void 0!==a.name&&(g.name=a.name);void 0!==a.matrix?(g.matrix.fromArray(a.matrix),void 0!==a.matrixAutoUpdate&&(g.matrixAutoUpdate=a.matrixAutoUpdate),g.matrixAutoUpdate&&g.matrix.decompose(g.position,g.quaternion,g.scale)):(void 0!==a.position&&g.position.fromArray(a.position),void 0!==a.rotation&&g.rotation.fromArray(a.rotation),void 0!==a.quaternion&&g.quaternion.fromArray(a.quaternion),
void 0!==a.scale&&g.scale.fromArray(a.scale));void 0!==a.castShadow&&(g.castShadow=a.castShadow);void 0!==a.receiveShadow&&(g.receiveShadow=a.receiveShadow);a.shadow&&(void 0!==a.shadow.bias&&(g.shadow.bias=a.shadow.bias),void 0!==a.shadow.normalBias&&(g.shadow.normalBias=a.shadow.normalBias),void 0!==a.shadow.radius&&(g.shadow.radius=a.shadow.radius),void 0!==a.shadow.mapSize&&g.shadow.mapSize.fromArray(a.shadow.mapSize),void 0!==a.shadow.camera&&(g.shadow.camera=this.parseObject(a.shadow.camera)));
void 0!==a.visible&&(g.visible=a.visible);void 0!==a.frustumCulled&&(g.frustumCulled=a.frustumCulled);void 0!==a.renderOrder&&(g.renderOrder=a.renderOrder);void 0!==a.userData&&(g.userData=a.userData);void 0!==a.layers&&(g.layers.mask=a.layers);if(void 0!==a.children)for(k=a.children,h=0;h<k.length;h++)g.add(this.parseObject(k[h],b,d));if("LOD"===a.type)for(void 0!==a.autoUpdate&&(g.autoUpdate=a.autoUpdate),a=a.levels,k=0;k<a.length;k++){h=a[k];var l=g.getObjectByProperty("uuid",h.object);void 0!==
l&&g.addLevel(l,h.distance)}return g}});var Yl={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Pj={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Qj={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};Hh.prototype=
Object.assign(Object.create(Ma.prototype),{constructor:Hh,isImageBitmapLoader:!0,setOptions:function(a){this.options=a;return this},load:function(a,b,d,e){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var f=this,g=vd.get(a);if(void 0!==g)return f.manager.itemStart(a),setTimeout(function(){b&&b(g);f.manager.itemEnd(a)},0),g;fetch(a).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,f.options)}).then(function(h){vd.add(a,h);b&&b(h);
f.manager.itemEnd(a)}).catch(function(h){e&&e(h);f.manager.itemError(a);f.manager.itemEnd(a)});f.manager.itemStart(a)}});Object.assign(Ih.prototype,{moveTo:function(a,b){this.currentPath=new Wb;this.subPaths.push(this.currentPath);this.currentPath.moveTo(a,b);return this},lineTo:function(a,b){this.currentPath.lineTo(a,b);return this},quadraticCurveTo:function(a,b,d,e){this.currentPath.quadraticCurveTo(a,b,d,e);return this},bezierCurveTo:function(a,b,d,e,f,g){this.currentPath.bezierCurveTo(a,b,d,e,
f,g);return this},splineThru:function(a){this.currentPath.splineThru(a);return this},toShapes:function(a,b){function d(A){for(var B=[],D=0,G=A.length;D<G;D++){var I=A[D],E=new Pc;E.curves=I.curves;B.push(E)}return B}function e(A,B){for(var D=B.length,G=!1,I=D-1,E=0;E<D;I=E++){var H=B[I],M=B[E],F=M.x-H.x,K=M.y-H.y;if(Math.abs(K)>Number.EPSILON){if(0>K&&(H=B[E],F=-F,M=B[I],K=-K),!(A.y<H.y||A.y>M.y))if(A.y===H.y){if(A.x===H.x)return!0}else{I=K*(A.x-H.x)-F*(A.y-H.y);if(0===I)return!0;0>I||(G=!G)}}else if(A.y===
H.y&&(M.x<=A.x&&A.x<=H.x||H.x<=A.x&&A.x<=M.x))return!0}return G}var f=nc.isClockWise,g=this.subPaths;if(0===g.length)return[];if(!0===b)return d(g);b=[];if(1===g.length){var h=g[0];var k=new Pc;k.curves=h.curves;b.push(k);return b}var l=!f(g[0].getPoints());l=a?!l:l;k=[];var m=[],n=[],p=0;m[p]=void 0;n[p]=[];for(var t=0,q=g.length;t<q;t++){h=g[t];var v=h.getPoints();var u=f(v);(u=a?!u:u)?(!l&&m[p]&&p++,m[p]={s:new Pc,p:v},m[p].s.curves=h.curves,l&&p++,n[p]=[]):n[p].push({h:h,p:v[0]})}if(!m[0])return d(g);
if(1<m.length){a=!1;f=[];g=0;for(h=m.length;g<h;g++)k[g]=[];g=0;for(h=m.length;g<h;g++)for(u=n[g],l=0;l<u.length;l++){p=u[l];v=!0;for(t=0;t<m.length;t++)e(p.p,m[t].p)&&(g!==t&&f.push({froms:g,tos:t,hole:l}),v?(v=!1,k[t].push(p)):a=!0);v&&k[g].push(p)}0<f.length&&(a||(n=k))}f=0;for(g=m.length;f<g;f++)for(k=m[f].s,b.push(k),a=n[f],h=0,u=a.length;h<u;h++)k.holes.push(a[h].h);return b}});Object.assign(Jh.prototype,{isFont:!0,generateShapes:function(a,b){void 0===b&&(b=100);var d=[],e=b;b=this.data;var f=
Array.from?Array.from(a):String(a).split("");e/=b.resolution;var g=(b.boundingBox.yMax-b.boundingBox.yMin+b.underlineThickness)*e;a=[];for(var h=0,k=0,l=0;l<f.length;l++){var m=f[l];if("\n"===m)h=0,k-=g;else{var n=m;m=e;var p=h,t=k,q=b,v=q.glyphs[n]||q.glyphs["?"];if(v){n=new Ih;if(v.o){q=v._cachedOutline||(v._cachedOutline=v.o.split(" "));for(var u=0,A=q.length;u<A;)switch(q[u++]){case "m":var B=q[u++]*m+p;var D=q[u++]*m+t;n.moveTo(B,D);break;case "l":B=q[u++]*m+p;D=q[u++]*m+t;n.lineTo(B,D);break;
case "q":var G=q[u++]*m+p;var I=q[u++]*m+t;var E=q[u++]*m+p;var H=q[u++]*m+t;n.quadraticCurveTo(E,H,G,I);break;case "b":G=q[u++]*m+p,I=q[u++]*m+t,E=q[u++]*m+p,H=q[u++]*m+t,B=q[u++]*m+p,D=q[u++]*m+t,n.bezierCurveTo(E,H,B,D,G,I)}}m={offsetX:v.ha*m,path:n}}else console.error('THREE.Font: character "'+n+'" does not exists in font family '+q.familyName+"."),m=void 0;h+=m.offsetX;a.push(m.path)}}b=0;for(f=a.length;b<f;b++)Array.prototype.push.apply(d,a[b].toShapes());return d}});Kh.prototype=Object.assign(Object.create(Ma.prototype),
{constructor:Kh,load:function(a,b,d,e){var f=this,g=new Nb(this.manager);g.setPath(this.path);g.setRequestHeader(this.requestHeader);g.load(a,function(h){try{var k=JSON.parse(h)}catch(l){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),k=JSON.parse(h.substring(65,h.length-2))}h=f.parse(k);b&&b(h)},d,e)},parse:function(a){return new Jh(a)}});var Wg,Nh={getContext:function(){void 0===Wg&&(Wg=new (window.AudioContext||window.webkitAudioContext));return Wg},
setContext:function(a){Wg=a}};wg.prototype=Object.assign(Object.create(Ma.prototype),{constructor:wg,load:function(a,b,d,e){var f=this,g=new Nb(f.manager);g.setResponseType("arraybuffer");g.setPath(f.path);g.setRequestHeader(f.requestHeader);g.load(a,function(h){try{var k=h.slice(0);Nh.getContext().decodeAudioData(k,function(l){b(l)})}catch(l){e?e(l):console.error(l),f.manager.itemError(a)}},d,e)}});Lh.prototype=Object.assign(Object.create(Ob.prototype),{constructor:Lh,isHemisphereLightProbe:!0,copy:function(a){Ob.prototype.copy.call(this,
a);return this},toJSON:function(a){return Ob.prototype.toJSON.call(this,a)}});Mh.prototype=Object.assign(Object.create(Ob.prototype),{constructor:Mh,isAmbientLightProbe:!0,copy:function(a){Ob.prototype.copy.call(this,a);return this},toJSON:function(a){return Ob.prototype.toJSON.call(this,a)}});var Rj=new da,Sj=new da;Object.assign(lj.prototype,{update:function(a){var b=this._cache;if(b.focus!==a.focus||b.fov!==a.fov||b.aspect!==a.aspect*this.aspect||b.near!==a.near||b.far!==a.far||b.zoom!==a.zoom||
b.eyeSep!==this.eyeSep){b.focus=a.focus;b.fov=a.fov;b.aspect=a.aspect*this.aspect;b.near=a.near;b.far=a.far;b.zoom=a.zoom;b.eyeSep=this.eyeSep;var d=a.projectionMatrix.clone(),e=b.eyeSep/2,f=e*b.near/b.focus,g=b.near*Math.tan(xa.DEG2RAD*b.fov*.5)/b.zoom;Sj.elements[12]=-e;Rj.elements[12]=e;e=-g*b.aspect+f;var h=g*b.aspect+f;d.elements[0]=2*b.near/(h-e);d.elements[8]=(h+e)/(h-e);this.cameraL.projectionMatrix.copy(d);e=-g*b.aspect-f;h=g*b.aspect-f;d.elements[0]=2*b.near/(h-e);d.elements[8]=(h+e)/(h-
e);this.cameraR.projectionMatrix.copy(d)}this.cameraL.matrixWorld.copy(a.matrixWorld).multiply(Sj);this.cameraR.matrixWorld.copy(a.matrixWorld).multiply(Rj)}});var ie=function(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1};ie.prototype.start=function(){this.oldTime=this.startTime=("undefined"===typeof performance?Date:performance).now();this.elapsedTime=0;this.running=!0};ie.prototype.stop=function(){this.getElapsedTime();this.autoStart=this.running=
!1};ie.prototype.getElapsedTime=function(){this.getDelta();return this.elapsedTime};ie.prototype.getDelta=function(){var a=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var b=("undefined"===typeof performance?Date:performance).now();a=(b-this.oldTime)/1E3;this.oldTime=b;this.elapsedTime+=a}return a};var wd=new w,Tj=new ua,Zl=new w,xd=new w;Xb.prototype=Object.create(ha.prototype);Xb.prototype.constructor=Xb;Xb.prototype.getInput=function(){return this.gain};Xb.prototype.removeFilter=
function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null);return this};Xb.prototype.getFilter=function(){return this.filter};Xb.prototype.setFilter=function(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=a;this.gain.connect(this.filter);this.filter.connect(this.context.destination);
return this};Xb.prototype.getMasterVolume=function(){return this.gain.gain.value};Xb.prototype.setMasterVolume=function(a){this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01);return this};Xb.prototype.updateMatrixWorld=function(a){ha.prototype.updateMatrixWorld.call(this,a);a=this.context.listener;var b=this.up;this.timeDelta=this._clock.getDelta();this.matrixWorld.decompose(wd,Tj,Zl);xd.set(0,0,-1).applyQuaternion(Tj);if(a.positionX){var d=this.context.currentTime+this.timeDelta;a.positionX.linearRampToValueAtTime(wd.x,
d);a.positionY.linearRampToValueAtTime(wd.y,d);a.positionZ.linearRampToValueAtTime(wd.z,d);a.forwardX.linearRampToValueAtTime(xd.x,d);a.forwardY.linearRampToValueAtTime(xd.y,d);a.forwardZ.linearRampToValueAtTime(xd.z,d);a.upX.linearRampToValueAtTime(b.x,d);a.upY.linearRampToValueAtTime(b.y,d);a.upZ.linearRampToValueAtTime(b.z,d)}else a.setPosition(wd.x,wd.y,wd.z),a.setOrientation(xd.x,xd.y,xd.z,b.x,b.y,b.z)};Ja.prototype=Object.create(ha.prototype);Ja.prototype.constructor=Ja;Ja.prototype.getOutput=
function(){return this.gain};Ja.prototype.setNodeSource=function(a){this.hasPlaybackControl=!1;this.sourceType="audioNode";this.source=a;this.connect();return this};Ja.prototype.setMediaElementSource=function(a){this.hasPlaybackControl=!1;this.sourceType="mediaNode";this.source=this.context.createMediaElementSource(a);this.connect();return this};Ja.prototype.setMediaStreamSource=function(a){this.hasPlaybackControl=!1;this.sourceType="mediaStreamNode";this.source=this.context.createMediaStreamSource(a);
this.connect();return this};Ja.prototype.setBuffer=function(a){this.buffer=a;this.sourceType="buffer";this.autoplay&&this.play();return this};Ja.prototype.play=function(a){void 0===a&&(a=0);if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this._startedAt=this.context.currentTime+a,a=this.context.createBufferSource(),a.buffer=this.buffer,a.loop=this.loop,a.loopStart=
this.loopStart,a.loopEnd=this.loopEnd,a.onended=this.onEnded.bind(this),a.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=a,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()};Ja.prototype.pause=function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,
!0===this.loop&&(this._progress%=this.duration||this.buffer.duration),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this};Ja.prototype.stop=function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this};Ja.prototype.connect=function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-
1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());this._connected=!0;return this};Ja.prototype.disconnect=function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var a=1,b=this.filters.length;a<b;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());this._connected=!1;return this};Ja.prototype.getFilters=
function(){return this.filters};Ja.prototype.setFilters=function(a){a||(a=[]);!0===this._connected?(this.disconnect(),this.filters=a,this.connect()):this.filters=a;return this};Ja.prototype.setDetune=function(a){this.detune=a;if(void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this};Ja.prototype.getDetune=function(){return this.detune};Ja.prototype.getFilter=function(){return this.getFilters()[0]};Ja.prototype.setFilter=
function(a){return this.setFilters(a?[a]:[])};Ja.prototype.setPlaybackRate=function(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this};Ja.prototype.getPlaybackRate=function(){return this.playbackRate};Ja.prototype.onEnded=function(){this.isPlaying=!1};Ja.prototype.getLoop=function(){return!1===this.hasPlaybackControl?
(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop};Ja.prototype.setLoop=function(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.loop=a,!0===this.isPlaying&&(this.source.loop=this.loop),this};Ja.prototype.setLoopStart=function(a){this.loopStart=a;return this};Ja.prototype.setLoopEnd=function(a){this.loopEnd=a;return this};Ja.prototype.getVolume=function(){return this.gain.gain.value};Ja.prototype.setVolume=
function(a){this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01);return this};var yd=new w,Uj=new ua,$l=new w,zd=new w;tb.prototype=Object.create(Ja.prototype);tb.prototype.constructor=tb;tb.prototype.getOutput=function(){return this.panner};tb.prototype.getRefDistance=function(){return this.panner.refDistance};tb.prototype.setRefDistance=function(a){this.panner.refDistance=a;return this};tb.prototype.getRolloffFactor=function(){return this.panner.rolloffFactor};tb.prototype.setRolloffFactor=
function(a){this.panner.rolloffFactor=a;return this};tb.prototype.getDistanceModel=function(){return this.panner.distanceModel};tb.prototype.setDistanceModel=function(a){this.panner.distanceModel=a;return this};tb.prototype.getMaxDistance=function(){return this.panner.maxDistance};tb.prototype.setMaxDistance=function(a){this.panner.maxDistance=a;return this};tb.prototype.setDirectionalCone=function(a,b,d){this.panner.coneInnerAngle=a;this.panner.coneOuterAngle=b;this.panner.coneOuterGain=d;return this};
tb.prototype.updateMatrixWorld=function(a){Ja.prototype.updateMatrixWorld.call(this,a);if(!0!==this.hasPlaybackControl||!1!==this.isPlaying)if(this.matrixWorld.decompose(yd,Uj,$l),zd.set(0,0,1).applyQuaternion(Uj),a=this.panner,a.positionX){var b=this.context.currentTime+this.listener.timeDelta;a.positionX.linearRampToValueAtTime(yd.x,b);a.positionY.linearRampToValueAtTime(yd.y,b);a.positionZ.linearRampToValueAtTime(yd.z,b);a.orientationX.linearRampToValueAtTime(zd.x,b);a.orientationY.linearRampToValueAtTime(zd.y,
b);a.orientationZ.linearRampToValueAtTime(zd.z,b)}else a.setPosition(yd.x,yd.y,yd.z),a.setOrientation(zd.x,zd.y,zd.z)};var Xg=function(a,b){this.analyser=a.context.createAnalyser();this.analyser.fftSize=void 0!==b?b:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)};Xg.prototype.getFrequencyData=function(){this.analyser.getByteFrequencyData(this.data);return this.data};Xg.prototype.getAverageFrequency=function(){for(var a=0,b=this.getFrequencyData(),
d=0;d<b.length;d++)a+=b[d];return a/b.length};Object.assign(Oh.prototype,{accumulate:function(a,b){var d=this.buffer,e=this.valueSize;a=a*e+e;var f=this.cumulativeWeight;if(0===f){for(f=0;f!==e;++f)d[a+f]=d[f];f=b}else f+=b,this._mixBufferRegion(d,a,0,b/f,e);this.cumulativeWeight=f},accumulateAdditive:function(a){var b=this.buffer,d=this.valueSize,e=d*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity();this._mixBufferRegionAdditive(b,e,0,a,d);this.cumulativeWeightAdditive+=a},apply:function(a){var b=
this.valueSize,d=this.buffer;a=a*b+b;var e=this.cumulativeWeight,f=this.cumulativeWeightAdditive,g=this.binding;this.cumulativeWeightAdditive=this.cumulativeWeight=0;1>e&&this._mixBufferRegion(d,a,b*this._origIndex,1-e,b);0<f&&this._mixBufferRegionAdditive(d,a,this._addIndex*b,1,b);e=b;for(f=b+b;e!==f;++e)if(d[e]!==d[e+b]){g.setValue(d,a);break}},saveOriginalState:function(){var a=this.buffer,b=this.valueSize,d=b*this._origIndex;this.binding.getValue(a,d);for(var e=b;e!==d;++e)a[e]=a[d+e%b];this._setIdentity();
this.cumulativeWeightAdditive=this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_setAdditiveIdentityNumeric:function(){for(var a=this._addIndex*this.valueSize,b=a+this.valueSize;a<b;a++)this.buffer[a]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric();this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){for(var a=this._origIndex*this.valueSize,b=this._addIndex*this.valueSize,d=
0;d<this.valueSize;d++)this.buffer[b+d]=this.buffer[a+d]},_select:function(a,b,d,e,f){if(.5<=e)for(e=0;e!==f;++e)a[b+e]=a[d+e]},_slerp:function(a,b,d,e){ua.slerpFlat(a,b,a,b,a,d,e)},_slerpAdditive:function(a,b,d,e,f){f*=this._workIndex;ua.multiplyQuaternionsFlat(a,f,a,b,a,d);ua.slerpFlat(a,b,a,b,a,f,e)},_lerp:function(a,b,d,e,f){for(var g=1-e,h=0;h!==f;++h){var k=b+h;a[k]=a[k]*g+a[d+h]*e}},_lerpAdditive:function(a,b,d,e,f){for(var g=0;g!==f;++g){var h=b+g;a[h]+=a[d+g]*e}}});var am=/[\[\]\.:\/]/g,
bm="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",cm=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),dm=/(WCOD+)?/.source.replace("WCOD",bm),em=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),fm=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),gm=new RegExp("^"+cm+dm+em+fm+"$"),hm=["material","materials","bones"];Object.assign(mj.prototype,{getValue:function(a,b){this.bind();var d=this._bindings[this._targetGroup.nCachedObjects_];void 0!==d&&d.getValue(a,b)},
setValue:function(a,b){for(var d=this._bindings,e=this._targetGroup.nCachedObjects_,f=d.length;e!==f;++e)d[e].setValue(a,b)},bind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,d=a.length;b!==d;++b)a[b].bind()},unbind:function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,d=a.length;b!==d;++b)a[b].unbind()}});Object.assign(qb,{Composite:mj,create:function(a,b,d){return a&&a.isAnimationObjectGroup?new qb.Composite(a,b,d):new qb(a,b,d)},sanitizeNodeName:function(a){return a.replace(/\s/g,
"_").replace(am,"")},parseTrackName:function(a){var b=gm.exec(a);if(!b)throw Error("PropertyBinding: Cannot parse trackName: "+a);b={nodeName:b[2],objectName:b[3],objectIndex:b[4],propertyName:b[5],propertyIndex:b[6]};var d=b.nodeName&&b.nodeName.lastIndexOf(".");if(void 0!==d&&-1!==d){var e=b.nodeName.substring(d+1);-1!==hm.indexOf(e)&&(b.nodeName=b.nodeName.substring(0,d),b.objectName=e)}if(null===b.propertyName||0===b.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+
a);return b},findNode:function(a,b){if(!b||""===b||"."===b||-1===b||b===a.name||b===a.uuid)return a;if(a.skeleton){var d=a.skeleton.getBoneByName(b);if(void 0!==d)return d}if(a.children){var e=function(f){for(var g=0;g<f.length;g++){var h=f[g];if(h.name===b||h.uuid===b||(h=e(h.children)))return h}return null};if(a=e(a.children))return a}return null}});Object.assign(qb.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,
HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(a,b){a[b]=this.node[this.propertyName]},function(a,b){for(var d=this.resolvedProperty,e=0,f=d.length;e!==f;++e)a[b++]=d[e]},function(a,b){a[b]=this.resolvedProperty[this.propertyIndex]},function(a,b){this.resolvedProperty.toArray(a,b)}],SetterByBindingTypeAndVersioning:[[function(a,b){this.targetObject[this.propertyName]=a[b]},function(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.needsUpdate=
!0},function(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){for(var d=this.resolvedProperty,e=0,f=d.length;e!==f;++e)d[e]=a[b++]},function(a,b){for(var d=this.resolvedProperty,e=0,f=d.length;e!==f;++e)d[e]=a[b++];this.targetObject.needsUpdate=!0},function(a,b){for(var d=this.resolvedProperty,e=0,f=d.length;e!==f;++e)d[e]=a[b++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty[this.propertyIndex]=a[b]},function(a,
b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty.fromArray(a,b)},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(a,b){this.bind();this.getValue(a,b)},setValue:function(a,
b){this.bind();this.setValue(a,b)},bind:function(){var a=this.node,b=this.parsedPath,d=b.objectName,e=b.propertyName,f=b.propertyIndex;a||(this.node=a=qb.findNode(this.rootNode,b.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(a){if(d){var g=b.objectIndex;switch(d){case "materials":if(!a.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!a.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",
this);return}a=a.material.materials;break;case "bones":if(!a.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}a=a.skeleton.bones;for(d=0;d<a.length;d++)if(a[d].name===g){g=d;break}break;default:if(void 0===a[d]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}a=a[d]}if(void 0!==g){if(void 0===a[g]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",
this,a);return}a=a[g]}}g=a[e];if(void 0===g)console.error("THREE.PropertyBinding: Trying to update property for track: "+b.nodeName+"."+e+" but it wasn't found.",a);else{b=this.Versioning.None;this.targetObject=a;void 0!==a.needsUpdate?b=this.Versioning.NeedsUpdate:void 0!==a.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate);d=this.BindingType.Direct;if(void 0!==f){if("morphTargetInfluences"===e){if(!a.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",
this);return}if(a.geometry.isBufferGeometry){if(!a.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}void 0!==a.morphTargetDictionary[f]&&(f=a.morphTargetDictionary[f])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}d=this.BindingType.ArrayElement;this.resolvedProperty=g;this.propertyIndex=
f}else void 0!==g.fromArray&&void 0!==g.toArray?(d=this.BindingType.HasFromToArray,this.resolvedProperty=g):Array.isArray(g)?(d=this.BindingType.EntireArray,this.resolvedProperty=g):this.propertyName=e;this.getValue=this.GetterByBindingType[d];this.setValue=this.SetterByBindingTypeAndVersioning[d][b]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=
this._setValue_unbound}});Object.assign(qb.prototype,{_getValue_unbound:qb.prototype.getValue,_setValue_unbound:qb.prototype.setValue});Object.assign(nj.prototype,{isAnimationObjectGroup:!0,add:function(){for(var a=this._objects,b=this._indicesByUUID,d=this._paths,e=this._parsedPaths,f=this._bindings,g=f.length,h=void 0,k=a.length,l=this.nCachedObjects_,m=0,n=arguments.length;m!==n;++m){var p=arguments[m],t=p.uuid,q=b[t];if(void 0===q){q=k++;b[t]=q;a.push(p);q=0;for(var v=g;q!==v;++q)f[q].push(new qb(p,
d[q],e[q]))}else if(q<l){h=a[q];v=--l;var u=a[v];b[u.uuid]=q;a[q]=u;b[t]=v;a[v]=p;t=0;for(u=g;t!==u;++t){var A=f[t],B=A[q];A[q]=A[v];void 0===B&&(B=new qb(p,d[t],e[t]));A[v]=B}}else a[q]!==h&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){for(var a=this._objects,b=this._indicesByUUID,d=this._bindings,e=d.length,f=this.nCachedObjects_,g=0,h=
arguments.length;g!==h;++g){var k=arguments[g],l=k.uuid,m=b[l];if(void 0!==m&&m>=f){var n=f++,p=a[n];b[p.uuid]=m;a[m]=p;b[l]=n;a[n]=k;k=0;for(l=e;k!==l;++k){p=d[k];var t=p[m];p[m]=p[n];p[n]=t}}}this.nCachedObjects_=f},uncache:function(){for(var a=this._objects,b=this._indicesByUUID,d=this._bindings,e=d.length,f=this.nCachedObjects_,g=a.length,h=0,k=arguments.length;h!==k;++h){var l=arguments[h].uuid,m=b[l];if(void 0!==m)if(delete b[l],m<f){l=--f;var n=a[l],p=--g,t=a[p];b[n.uuid]=m;a[m]=n;b[t.uuid]=
l;a[l]=t;a.pop();n=0;for(t=e;n!==t;++n){var q=d[n],v=q[p];q[m]=q[l];q[l]=v;q.pop()}}else for(l=--g,p=a[l],b[p.uuid]=m,a[m]=p,a.pop(),p=0,n=e;p!==n;++p)t=d[p],t[m]=t[l],t.pop()}this.nCachedObjects_=f},subscribe_:function(a,b){var d=this._bindingsIndicesByPath,e=d[a],f=this._bindings;if(void 0!==e)return f[e];var g=this._paths,h=this._parsedPaths,k=this._objects,l=this.nCachedObjects_,m=Array(k.length);e=f.length;d[a]=e;g.push(a);h.push(b);f.push(m);d=l;for(e=k.length;d!==e;++d)m[d]=new qb(k[d],a,b);
return m},unsubscribe_:function(a){var b=this._bindingsIndicesByPath,d=b[a];if(void 0!==d){var e=this._paths,f=this._parsedPaths,g=this._bindings,h=g.length-1,k=g[h];b[a[h]]=d;g[d]=k;g.pop();f[d]=f[h];f.pop();e[d]=e[h];e.pop()}}});var La=function(a,b,d,e){this._mixer=a;this._clip=b;this._localRoot=d||null;this.blendMode=e||b.blendMode;a=b.tracks;b=a.length;d=Array(b);e={endingStart:2400,endingEnd:2400};for(var f=0;f!==b;++f){var g=a[f].createInterpolant(null);d[f]=g;g.settings=e}this._interpolantSettings=
e;this._interpolants=d;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0};La.prototype.play=function(){this._mixer._activateAction(this);return this};La.prototype.stop=
function(){this._mixer._deactivateAction(this);return this.reset()};La.prototype.reset=function(){this.paused=!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()};La.prototype.isRunning=function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)};La.prototype.isScheduled=function(){return this._mixer._isActiveAction(this)};La.prototype.startAt=function(a){this._startTime=a;return this};
La.prototype.setLoop=function(a,b){this.loop=a;this.repetitions=b;return this};La.prototype.setEffectiveWeight=function(a){this.weight=a;this._effectiveWeight=this.enabled?a:0;return this.stopFading()};La.prototype.getEffectiveWeight=function(){return this._effectiveWeight};La.prototype.fadeIn=function(a){return this._scheduleFading(a,0,1)};La.prototype.fadeOut=function(a){return this._scheduleFading(a,1,0)};La.prototype.crossFadeFrom=function(a,b,d){a.fadeOut(b);this.fadeIn(b);if(d){d=this._clip.duration;
var e=a._clip.duration,f=d/e;a.warp(1,e/d,b);this.warp(f,1,b)}return this};La.prototype.crossFadeTo=function(a,b,d){return a.crossFadeFrom(this,b,d)};La.prototype.stopFading=function(){var a=this._weightInterpolant;null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this};La.prototype.setEffectiveTimeScale=function(a){this.timeScale=a;this._effectiveTimeScale=this.paused?0:a;return this.stopWarping()};La.prototype.getEffectiveTimeScale=function(){return this._effectiveTimeScale};
La.prototype.setDuration=function(a){this.timeScale=this._clip.duration/a;return this.stopWarping()};La.prototype.syncWith=function(a){this.time=a.time;this.timeScale=a.timeScale;return this.stopWarping()};La.prototype.halt=function(a){return this.warp(this._effectiveTimeScale,0,a)};La.prototype.warp=function(a,b,d){var e=this._mixer,f=e.time,g=this.timeScale,h=this._timeScaleInterpolant;null===h&&(this._timeScaleInterpolant=h=e._lendControlInterpolant());e=h.parameterPositions;h=h.sampleValues;e[0]=
f;e[1]=f+d;h[0]=a/g;h[1]=b/g;return this};La.prototype.stopWarping=function(){var a=this._timeScaleInterpolant;null!==a&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this};La.prototype.getMixer=function(){return this._mixer};La.prototype.getClip=function(){return this._clip};La.prototype.getRoot=function(){return this._localRoot||this._mixer._root};La.prototype._update=function(a,b,d,e){if(this.enabled){var f=this._startTime;if(null!==f){b=(a-f)*d;if(0>b||0===
d)return;this._startTime=null;b*=d}b*=this._updateTimeScale(a);d=this._updateTime(b);a=this._updateWeight(a);if(0<a)switch(b=this._interpolants,f=this._propertyBindings,this.blendMode){case 2501:e=0;for(var g=b.length;e!==g;++e)b[e].evaluate(d),f[e].accumulateAdditive(a);break;default:g=0;for(var h=b.length;g!==h;++g)b[g].evaluate(d),f[g].accumulate(e,a)}}else this._updateWeight(a)};La.prototype._updateWeight=function(a){var b=0;if(this.enabled){b=this.weight;var d=this._weightInterpolant;if(null!==
d){var e=d.evaluate(a)[0];b*=e;a>d.parameterPositions[1]&&(this.stopFading(),0===e&&(this.enabled=!1))}}return this._effectiveWeight=b};La.prototype._updateTimeScale=function(a){var b=0;if(!this.paused){b=this.timeScale;var d=this._timeScaleInterpolant;if(null!==d){var e=d.evaluate(a)[0];b*=e;a>d.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:this.timeScale=b)}}return this._effectiveTimeScale=b};La.prototype._updateTime=function(a){var b=this._clip.duration,d=this.loop,e=this.time+
a,f=this._loopCount,g=2202===d;if(0===a)return-1===f?e:g&&1===(f&1)?b-e:e;if(2200===d)a:{if(-1===f&&(this._loopCount=0,this._setEndings(!0,!0,!1)),e>=b)e=b;else if(0>e)e=0;else{this.time=e;break a}this.clampWhenFinished?this.paused=!0:this.enabled=!1;this.time=e;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>a?-1:1})}else{-1===f&&(0<=a?(f=0,this._setEndings(!0,0===this.repetitions,g)):this._setEndings(0===this.repetitions,!0,g));if(e>=b||0>e){d=Math.floor(e/b);e-=b*d;f+=Math.abs(d);
var h=this.repetitions-f;0>=h?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e=0<a?b:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<a?1:-1})):(1===h?(a=0>a,this._setEndings(a,!a,g)):this._setEndings(!1,!1,g),this._loopCount=f,this.time=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:d}))}else this.time=e;if(g&&1===(f&1))return b-e}return e};La.prototype._setEndings=function(a,b,d){var e=this._interpolantSettings;d?(e.endingStart=2401,e.endingEnd=
2401):(e.endingStart=a?this.zeroSlopeAtStart?2401:2400:2402,e.endingEnd=b?this.zeroSlopeAtEnd?2401:2400:2402)};La.prototype._scheduleFading=function(a,b,d){var e=this._mixer,f=e.time,g=this._weightInterpolant;null===g&&(this._weightInterpolant=g=e._lendControlInterpolant());e=g.parameterPositions;g=g.sampleValues;e[0]=f;g[0]=b;e[1]=f+a;g[1]=d;return this};Ph.prototype=Object.assign(Object.create(wb.prototype),{constructor:Ph,_bindAction:function(a,b){var d=a._localRoot||this._root,e=a._clip.tracks,
f=e.length,g=a._propertyBindings;a=a._interpolants;var h=d.uuid,k=this._bindingsByRootAndName,l=k[h];void 0===l&&(l={},k[h]=l);for(k=0;k!==f;++k){var m=e[k],n=m.name,p=l[n];if(void 0===p){p=g[k];if(void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,h,n));continue}p=new Oh(qb.create(d,n,b&&b._propertyBindings[k].binding.parsedPath),m.ValueTypeName,m.getValueSize());++p.referenceCount;this._addInactiveBinding(p,h,n)}g[k]=p;a[k].resultBuffer=p.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===
a._cacheIndex){var b=(a._localRoot||this._root).uuid,d=a._clip.uuid,e=this._actionsByClip[d];this._bindAction(a,e&&e.knownActions[0]);this._addInactiveAction(a,d,b)}b=a._propertyBindings;d=0;for(e=b.length;d!==e;++d){var f=b[d];0===f.useCount++&&(this._lendBinding(f),f.saveOriginalState())}this._lendAction(a)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var b=a._propertyBindings,d=0,e=b.length;d!==e;++d){var f=b[d];0===--f.useCount&&(f.restoreOriginalState(),this._takeBackBinding(f))}this._takeBackAction(a)}},
_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},
_isActiveAction:function(a){a=a._cacheIndex;return null!==a&&a<this._nActiveActions},_addInactiveAction:function(a,b,d){var e=this._actions,f=this._actionsByClip,g=f[b];void 0===g?(g={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,f[b]=g):(b=g.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=e.length;e.push(a);g.actionByRoot[d]=a},_removeInactiveAction:function(a){var b=this._actions,d=b[b.length-1],e=a._cacheIndex;d._cacheIndex=e;b[e]=d;b.pop();a._cacheIndex=null;b=a._clip.uuid;
d=this._actionsByClip;e=d[b];var f=e.knownActions,g=f[f.length-1],h=a._byClipCacheIndex;g._byClipCacheIndex=h;f[h]=g;f.pop();a._byClipCacheIndex=null;delete e.actionByRoot[(a._localRoot||this._root).uuid];0===f.length&&delete d[b];this._removeInactiveBindingsForAction(a)},_removeInactiveBindingsForAction:function(a){a=a._propertyBindings;for(var b=0,d=a.length;b!==d;++b){var e=a[b];0===--e.referenceCount&&this._removeInactiveBinding(e)}},_lendAction:function(a){var b=this._actions,d=a._cacheIndex,
e=this._nActiveActions++,f=b[e];a._cacheIndex=e;b[e]=a;f._cacheIndex=d;b[d]=f},_takeBackAction:function(a){var b=this._actions,d=a._cacheIndex,e=--this._nActiveActions,f=b[e];a._cacheIndex=e;b[e]=a;f._cacheIndex=d;b[d]=f},_addInactiveBinding:function(a,b,d){var e=this._bindingsByRootAndName,f=this._bindings,g=e[b];void 0===g&&(g={},e[b]=g);g[d]=a;a._cacheIndex=f.length;f.push(a)},_removeInactiveBinding:function(a){var b=this._bindings,d=a.binding,e=d.rootNode.uuid;d=d.path;var f=this._bindingsByRootAndName,
g=f[e],h=b[b.length-1];a=a._cacheIndex;h._cacheIndex=a;b[a]=h;b.pop();delete g[d];0===Object.keys(g).length&&delete f[e]},_lendBinding:function(a){var b=this._bindings,d=a._cacheIndex,e=this._nActiveBindings++,f=b[e];a._cacheIndex=e;b[e]=a;f._cacheIndex=d;b[d]=f},_takeBackBinding:function(a){var b=this._bindings,d=a._cacheIndex,e=--this._nActiveBindings,f=b[e];a._cacheIndex=e;b[e]=a;f._cacheIndex=d;b[d]=f},_lendControlInterpolant:function(){var a=this._controlInterpolants,b=this._nActiveControlInterpolants++,
d=a[b];void 0===d&&(d=new of(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),d.__cacheIndex=b,a[b]=d);return d},_takeBackControlInterpolant:function(a){var b=this._controlInterpolants,d=a.__cacheIndex,e=--this._nActiveControlInterpolants,f=b[e];a.__cacheIndex=e;b[e]=a;f.__cacheIndex=d;b[d]=f},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(a,b,d){var e=b||this._root,f=e.uuid;e="string"===typeof a?Mb.findByName(e,a):a;a=null!==e?e.uuid:a;var g=
this._actionsByClip[a],h=null;void 0===d&&(d=null!==e?e.blendMode:2500);if(void 0!==g){h=g.actionByRoot[f];if(void 0!==h&&h.blendMode===d)return h;h=g.knownActions[0];null===e&&(e=h._clip)}if(null===e)return null;b=new La(this,e,b,d);this._bindAction(b,h);this._addInactiveAction(b,a,f);return b},existingAction:function(a,b){var d=b||this._root;b=d.uuid;d="string"===typeof a?Mb.findByName(d,a):a;a=this._actionsByClip[d?d.uuid:a];return void 0!==a?a.actionByRoot[b]||null:null},stopAllAction:function(){for(var a=
this._actions,b=this._nActiveActions-1;0<=b;--b)a[b].stop();return this},update:function(a){a*=this.timeScale;for(var b=this._actions,d=this._nActiveActions,e=this.time+=a,f=Math.sign(a),g=this._accuIndex^=1,h=0;h!==d;++h)b[h]._update(e,a,f,g);a=this._bindings;b=this._nActiveBindings;for(d=0;d!==b;++d)a[d].apply(g);return this},setTime:function(a){for(var b=this.time=0;b<this._actions.length;b++)this._actions[b].time=0;return this.update(a)},getRoot:function(){return this._root},uncacheClip:function(a){var b=
this._actions;a=a.uuid;var d=this._actionsByClip,e=d[a];if(void 0!==e){e=e.knownActions;for(var f=0,g=e.length;f!==g;++f){var h=e[f];this._deactivateAction(h);var k=h._cacheIndex,l=b[b.length-1];h._cacheIndex=null;h._byClipCacheIndex=null;l._cacheIndex=k;b[k]=l;b.pop();this._removeInactiveBindingsForAction(h)}delete d[a]}},uncacheRoot:function(a){a=a.uuid;var b=this._actionsByClip;for(e in b){var d=b[e].actionByRoot[a];void 0!==d&&(this._deactivateAction(d),this._removeInactiveAction(d))}var e=this._bindingsByRootAndName[a];
if(void 0!==e)for(var f in e)a=e[f],a.restoreOriginalState(),this._removeInactiveBinding(a)},uncacheAction:function(a,b){a=this.existingAction(a,b);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}});var Yg=function(a,b){"string"===typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=b);this.value=a};Yg.prototype.clone=function(){return new Yg(void 0===this.value.clone?this.value:this.value.clone())};Qh.prototype=Object.assign(Object.create(Gb.prototype),
{constructor:Qh,isInstancedInterleavedBuffer:!0,copy:function(a){Gb.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this},clone:function(a){a=Gb.prototype.clone.call(this,a);a.meshPerAttribute=this.meshPerAttribute;return a},toJSON:function(a){a=Gb.prototype.toJSON.call(this,a);a.isInstancedInterleavedBuffer=!0;a.meshPerAttribute=this.meshPerAttribute;return a}});Object.defineProperty(Rh.prototype,"needsUpdate",{set:function(a){!0===a&&this.version++}});Object.assign(Rh.prototype,
{isGLBufferAttribute:!0,setBuffer:function(a){this.buffer=a;return this},setType:function(a,b){this.type=a;this.elementSize=b;return this},setItemSize:function(a){this.itemSize=a;return this},setCount:function(a){this.count=a;return this}});Object.assign(Sh.prototype,{set:function(a,b){this.ray.set(a,b)},setFromCamera:function(a,b){b&&b.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(b.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(b).sub(this.ray.origin).normalize(),this.camera=
b):b&&b.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(b.near+b.far)/(b.near-b.far)).unproject(b),this.ray.direction.set(0,0,-1).transformDirection(b.matrixWorld),this.camera=b):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(a,b,d){d=d||[];Th(a,this,d,b);d.sort(oj);return d},intersectObjects:function(a,b,d){d=d||[];if(!1===Array.isArray(a))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),d;for(var e=0,f=a.length;e<f;e++)Th(a[e],
this,d,b);d.sort(oj);return d}});var Ad=function(a,b,d){void 0===a&&(a=1);void 0===b&&(b=0);void 0===d&&(d=0);this.radius=a;this.phi=b;this.theta=d;return this};Ad.prototype.set=function(a,b,d){this.radius=a;this.phi=b;this.theta=d;return this};Ad.prototype.clone=function(){return(new this.constructor).copy(this)};Ad.prototype.copy=function(a){this.radius=a.radius;this.phi=a.phi;this.theta=a.theta;return this};Ad.prototype.makeSafe=function(){this.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,this.phi));
return this};Ad.prototype.setFromVector3=function(a){return this.setFromCartesianCoords(a.x,a.y,a.z)};Ad.prototype.setFromCartesianCoords=function(a,b,d){this.radius=Math.sqrt(a*a+b*b+d*d);0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(a,d),this.phi=Math.acos(xa.clamp(b/this.radius,-1,1)));return this};var Ae=function(a,b,d){this.radius=void 0!==a?a:1;this.theta=void 0!==b?b:0;this.y=void 0!==d?d:0;return this};Ae.prototype.set=function(a,b,d){this.radius=a;this.theta=b;this.y=d;return this};
Ae.prototype.clone=function(){return(new this.constructor).copy(this)};Ae.prototype.copy=function(a){this.radius=a.radius;this.theta=a.theta;this.y=a.y;return this};Ae.prototype.setFromVector3=function(a){return this.setFromCartesianCoords(a.x,a.y,a.z)};Ae.prototype.setFromCartesianCoords=function(a,b,d){this.radius=Math.sqrt(a*a+d*d);this.theta=Math.atan2(a,d);this.y=b;return this};var Vj=new L,$a=function(a,b){Object.defineProperty(this,"isBox2",{value:!0});this.min=void 0!==a?a:new L(Infinity,
Infinity);this.max=void 0!==b?b:new L(-Infinity,-Infinity)};$a.prototype.set=function(a,b){this.min.copy(a);this.max.copy(b);return this};$a.prototype.setFromPoints=function(a){this.makeEmpty();for(var b=0,d=a.length;b<d;b++)this.expandByPoint(a[b]);return this};$a.prototype.setFromCenterAndSize=function(a,b){b=Vj.copy(b).multiplyScalar(.5);this.min.copy(a).sub(b);this.max.copy(a).add(b);return this};$a.prototype.clone=function(){return(new this.constructor).copy(this)};$a.prototype.copy=function(a){this.min.copy(a.min);
this.max.copy(a.max);return this};$a.prototype.makeEmpty=function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this};$a.prototype.isEmpty=function(){return this.max.x<this.min.x||this.max.y<this.min.y};$a.prototype.getCenter=function(a){void 0===a&&(console.warn("THREE.Box2: .getCenter() target is now required"),a=new L);return this.isEmpty()?a.set(0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)};$a.prototype.getSize=function(a){void 0===a&&(console.warn("THREE.Box2: .getSize() target is now required"),
a=new L);return this.isEmpty()?a.set(0,0):a.subVectors(this.max,this.min)};$a.prototype.expandByPoint=function(a){this.min.min(a);this.max.max(a);return this};$a.prototype.expandByVector=function(a){this.min.sub(a);this.max.add(a);return this};$a.prototype.expandByScalar=function(a){this.min.addScalar(-a);this.max.addScalar(a);return this};$a.prototype.containsPoint=function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0};$a.prototype.containsBox=function(a){return this.min.x<=
a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y};$a.prototype.getParameter=function(a,b){void 0===b&&(console.warn("THREE.Box2: .getParameter() target is now required"),b=new L);return b.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))};$a.prototype.intersectsBox=function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0};$a.prototype.clampPoint=function(a,b){void 0===b&&(console.warn("THREE.Box2: .clampPoint() target is now required"),
b=new L);return b.copy(a).clamp(this.min,this.max)};$a.prototype.distanceToPoint=function(a){return Vj.copy(a).clamp(this.min,this.max).sub(a).length()};$a.prototype.intersect=function(a){this.min.max(a.min);this.max.min(a.max);return this};$a.prototype.union=function(a){this.min.min(a.min);this.max.max(a.max);return this};$a.prototype.translate=function(a){this.min.add(a);this.max.add(a);return this};$a.prototype.equals=function(a){return a.min.equals(this.min)&&a.max.equals(this.max)};var Wj=new w,
Zg=new w,Cb=function(a,b){this.start=void 0!==a?a:new w;this.end=void 0!==b?b:new w};Cb.prototype.set=function(a,b){this.start.copy(a);this.end.copy(b);return this};Cb.prototype.clone=function(){return(new this.constructor).copy(this)};Cb.prototype.copy=function(a){this.start.copy(a.start);this.end.copy(a.end);return this};Cb.prototype.getCenter=function(a){void 0===a&&(console.warn("THREE.Line3: .getCenter() target is now required"),a=new w);return a.addVectors(this.start,this.end).multiplyScalar(.5)};
Cb.prototype.delta=function(a){void 0===a&&(console.warn("THREE.Line3: .delta() target is now required"),a=new w);return a.subVectors(this.end,this.start)};Cb.prototype.distanceSq=function(){return this.start.distanceToSquared(this.end)};Cb.prototype.distance=function(){return this.start.distanceTo(this.end)};Cb.prototype.at=function(a,b){void 0===b&&(console.warn("THREE.Line3: .at() target is now required"),b=new w);return this.delta(b).multiplyScalar(a).add(this.start)};Cb.prototype.closestPointToPointParameter=
function(a,b){Wj.subVectors(a,this.start);Zg.subVectors(this.end,this.start);a=Zg.dot(Zg);a=Zg.dot(Wj)/a;b&&(a=xa.clamp(a,0,1));return a};Cb.prototype.closestPointToPoint=function(a,b,d){a=this.closestPointToPointParameter(a,b);void 0===d&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),d=new w);return this.delta(d).multiplyScalar(a).add(this.start)};Cb.prototype.applyMatrix4=function(a){this.start.applyMatrix4(a);this.end.applyMatrix4(a);return this};Cb.prototype.equals=
function(a){return a.start.equals(this.start)&&a.end.equals(this.end)};tf.prototype=Object.create(ha.prototype);tf.prototype.constructor=tf;tf.prototype.isImmediateRenderObject=!0;var Xj=new w;je.prototype=Object.create(ha.prototype);je.prototype.constructor=je;je.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};je.prototype.update=function(){this.light.updateMatrixWorld();var a=this.light.distance?this.light.distance:1E3,b=a*Math.tan(this.light.angle);this.cone.scale.set(b,
b,a);Xj.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(Xj);void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var Xc=new w,$g=new da,ri=new da;ke.prototype=Object.create(Za.prototype);ke.prototype.constructor=ke;ke.prototype.updateMatrixWorld=function(a){var b=this.bones,d=this.geometry,e=d.getAttribute("position");ri.getInverse(this.root.matrixWorld);for(var f=0,g=0;f<b.length;f++){var h=b[f];h.parent&&h.parent.isBone&&
($g.multiplyMatrices(ri,h.matrixWorld),Xc.setFromMatrixPosition($g),e.setXYZ(g,Xc.x,Xc.y,Xc.z),$g.multiplyMatrices(ri,h.parent.matrixWorld),Xc.setFromMatrixPosition($g),e.setXYZ(g+1,Xc.x,Xc.y,Xc.z),g+=2)}d.getAttribute("position").needsUpdate=!0;Za.prototype.updateMatrixWorld.call(this,a)};le.prototype=Object.create(Qa.prototype);le.prototype.constructor=le;le.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};le.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):
this.material.color.copy(this.light.color)};var im=new w,Yj=new S,Zj=new S;me.prototype=Object.create(ha.prototype);me.prototype.constructor=me;me.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};me.prototype.update=function(){var a=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var b=a.geometry.getAttribute("color");Yj.copy(this.light.color);Zj.copy(this.light.groundColor);for(var d=0,e=b.count;d<e;d++){var f=
d<e/2?Yj:Zj;b.setXYZ(d,f.r,f.g,f.b)}b.needsUpdate=!0}a.lookAt(im.setFromMatrixPosition(this.light.matrixWorld).negate())};uf.prototype=Object.create(Za.prototype);uf.prototype.constructor=uf;xg.prototype=Object.create(Za.prototype);xg.prototype.constructor=xg;var ak=new w,ah=new w,bk=new w;ne.prototype=Object.create(ha.prototype);ne.prototype.constructor=ne;ne.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};
ne.prototype.update=function(){ak.setFromMatrixPosition(this.light.matrixWorld);ah.setFromMatrixPosition(this.light.target.matrixWorld);bk.subVectors(ah,ak);this.lightPlane.lookAt(ah);void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color));this.targetLine.lookAt(ah);this.targetLine.scale.z=bk.length()};var yg=new w,cb=new ac;vf.prototype=
Object.create(Za.prototype);vf.prototype.constructor=vf;vf.prototype.update=function(){var a=this.geometry,b=this.pointMap;cb.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);db("c",b,a,cb,0,0,-1);db("t",b,a,cb,0,0,1);db("n1",b,a,cb,-1,-1,-1);db("n2",b,a,cb,1,-1,-1);db("n3",b,a,cb,-1,1,-1);db("n4",b,a,cb,1,1,-1);db("f1",b,a,cb,-1,-1,1);db("f2",b,a,cb,1,-1,1);db("f3",b,a,cb,-1,1,1);db("f4",b,a,cb,1,1,1);db("u1",b,a,cb,.7,1.1,-1);db("u2",b,a,cb,-.7,1.1,-1);db("u3",b,a,cb,0,2,-1);db("cf1",
b,a,cb,-1,0,1);db("cf2",b,a,cb,1,0,1);db("cf3",b,a,cb,0,-1,1);db("cf4",b,a,cb,0,1,1);db("cn1",b,a,cb,-1,0,-1);db("cn2",b,a,cb,1,0,-1);db("cn3",b,a,cb,0,-1,-1);db("cn4",b,a,cb,0,1,-1);a.getAttribute("position").needsUpdate=!0};var bh=new za;Qc.prototype=Object.create(Za.prototype);Qc.prototype.constructor=Qc;Qc.prototype.update=function(a){void 0!==a&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");void 0!==this.object&&bh.setFromObject(this.object);if(!bh.isEmpty()){a=bh.min;var b=
bh.max,d=this.geometry.attributes.position,e=d.array;e[0]=b.x;e[1]=b.y;e[2]=b.z;e[3]=a.x;e[4]=b.y;e[5]=b.z;e[6]=a.x;e[7]=a.y;e[8]=b.z;e[9]=b.x;e[10]=a.y;e[11]=b.z;e[12]=b.x;e[13]=b.y;e[14]=a.z;e[15]=a.x;e[16]=b.y;e[17]=a.z;e[18]=a.x;e[19]=a.y;e[20]=a.z;e[21]=b.x;e[22]=a.y;e[23]=a.z;d.needsUpdate=!0;this.geometry.computeBoundingSphere()}};Qc.prototype.setFromObject=function(a){this.object=a;this.update();return this};Qc.prototype.copy=function(a){Za.prototype.copy.call(this,a);this.object=a.object;
return this};wf.prototype=Object.create(Za.prototype);wf.prototype.constructor=wf;wf.prototype.updateMatrixWorld=function(a){var b=this.box;b.isEmpty()||(b.getCenter(this.position),b.getSize(this.scale),this.scale.multiplyScalar(.5),Za.prototype.updateMatrixWorld.call(this,a))};xf.prototype=Object.create(yb.prototype);xf.prototype.constructor=xf;xf.prototype.updateMatrixWorld=function(a){var b=-this.plane.constant;1E-8>Math.abs(b)&&(b=1E-8);this.scale.set(.5*this.size,.5*this.size,b);this.children[0].material.side=
0>b?1:0;this.lookAt(this.plane.normal);yb.prototype.updateMatrixWorld.call(this,a)};var ck=new w,zg,Uh;Rc.prototype=Object.create(ha.prototype);Rc.prototype.constructor=Rc;Rc.prototype.setDirection=function(a){.99999<a.y?this.quaternion.set(0,0,0,1):-.99999>a.y?this.quaternion.set(1,0,0,0):(ck.set(a.z,0,-a.x).normalize(),this.quaternion.setFromAxisAngle(ck,Math.acos(a.y)))};Rc.prototype.setLength=function(a,b,d){void 0===b&&(b=.2*a);void 0===d&&(d=.2*b);this.line.scale.set(1,Math.max(1E-4,a-b),1);
this.line.updateMatrix();this.cone.scale.set(d,b,d);this.cone.position.y=a;this.cone.updateMatrix()};Rc.prototype.setColor=function(a){this.line.material.color.set(a);this.cone.material.color.set(a)};Rc.prototype.copy=function(a){ha.prototype.copy.call(this,a,!1);this.line.copy(a.line);this.cone.copy(a.cone);return this};yf.prototype=Object.create(Za.prototype);yf.prototype.constructor=yf;var gc=Math.pow(2,8),dk=[.125,.215,.35,.446,.526,.582],ek=5+dk.length,hc={3E3:0,3001:1,3002:2,3004:3,3005:4,3006:5,
3007:6},si=new he,ti=function(){for(var a=[],b=[],d=[],e=8,f=0;f<ek;f++){var g=Math.pow(2,e);b.push(g);var h=1/g;4<f?h=dk[f-8+4-1]:0==f&&(h=0);d.push(h);h=1/(g-1);g=-h/2;h=1+h/2;var k=[g,g,h,g,h,h,g,g,h,h,g,h];g=new Float32Array(108);h=new Float32Array(72);for(var l=new Float32Array(36),m=0;6>m;m++){var n=m%3*2/3-1,p=2<m?0:-1;g.set([n,p,0,n+2/3,p,0,n+2/3,p+1,0,n,p,0,n+2/3,p+1,0,n,p+1,0],18*m);h.set(k,12*m);l.set([m,m,m,m,m,m],6*m)}k=new ka;k.setAttribute("position",new pa(g,3));k.setAttribute("uv",
new pa(h,2));k.setAttribute("faceIndex",new pa(l,1));a.push(k);4<e&&e--}return{_lodPlanes:a,_sizeLods:b,_sigmas:d}}(),Nf=ti._lodPlanes,fk=ti._sizeLods,ch=ti._sigmas,ui=null,Bd=(1+Math.sqrt(5))/2,Be=1/Bd,gk=[new w(1,1,1),new w(-1,1,1),new w(1,1,-1),new w(-1,1,-1),new w(0,Bd,Be),new w(0,Bd,-Be),new w(Be,0,Bd),new w(-Be,0,Bd),new w(Bd,Be,0),new w(-Bd,Be,0)],rb=function(a){this._renderer=a;this._pingPongRenderTarget=null;a=new Float32Array(20);var b=new w(0,1,0);this._blurMaterial=new pc({name:"SphericalGaussianBlur",
defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:a},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:b},inputEncoding:{value:hc[3E3]},outputEncoding:{value:hc[3E3]}},vertexShader:Vh(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t"+
Wh()+"\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",
blending:0,depthTest:!1,depthWrite:!1});this._cubemapShader=this._equirectShader=null;this._compileMaterial(this._blurMaterial)};rb.prototype.fromScene=function(a,b,d,e){void 0===b&&(b=0);void 0===d&&(d=.1);void 0===e&&(e=100);ui=this._renderer.getRenderTarget();var f=this._allocateTargets();this._sceneToCubeUV(a,d,e,f);0<b&&this._blur(f,0,0,b);this._applyPMREM(f);this._cleanup(f);return f};rb.prototype.fromEquirectangular=function(a){return this._fromTexture(a)};rb.prototype.fromCubemap=function(a){return this._fromTexture(a)};
rb.prototype.compileCubemapShader=function(){null===this._cubemapShader&&(this._cubemapShader=sj(),this._compileMaterial(this._cubemapShader))};rb.prototype.compileEquirectangularShader=function(){null===this._equirectShader&&(this._equirectShader=rj(),this._compileMaterial(this._equirectShader))};rb.prototype.dispose=function(){this._blurMaterial.dispose();null!==this._cubemapShader&&this._cubemapShader.dispose();null!==this._equirectShader&&this._equirectShader.dispose();for(var a=0;a<Nf.length;a++)Nf[a].dispose()};
rb.prototype._cleanup=function(a){this._pingPongRenderTarget.dispose();this._renderer.setRenderTarget(ui);a.scissorTest=!1;Ag(a,0,0,a.width,a.height)};rb.prototype._fromTexture=function(a){ui=this._renderer.getRenderTarget();var b=this._allocateTargets(a);this._textureToCubeUV(a,b);this._applyPMREM(b);this._cleanup(b);return b};rb.prototype._allocateTargets=function(a){var b=void 0===a||1009!==a.type?!1:3E3===a.encoding||3001===a.encoding||3007===a.encoding;b={magFilter:1003,minFilter:1003,generateMipmaps:!1,
type:1009,format:1023,encoding:b?a.encoding:3002,depthBuffer:!1};var d=qj(b);d.depthBuffer=a?!1:!0;this._pingPongRenderTarget=qj(b);return d};rb.prototype._compileMaterial=function(a){a=new Qa(Nf[0],a);this._renderer.compile(a,si)};rb.prototype._sceneToCubeUV=function(a,b,d,e){b=new eb(90,1,b,d);d=[1,-1,1,1,1,1];var f=[1,1,1,-1,-1,-1],g=this._renderer,h=g.outputEncoding,k=g.toneMapping,l=g.getClearColor(),m=g.getClearAlpha();g.toneMapping=0;g.outputEncoding=3E3;var n=a.background;if(n&&n.isColor){n.convertSRGBToLinear();
var p=Math.min(Math.max(Math.ceil(Math.log2(Math.max(n.r,n.g,n.b))),-128),127);n=n.multiplyScalar(Math.pow(2,-p));g.setClearColor(n,(p+128)/255);a.background=null}for(n=0;6>n;n++)p=n%3,0==p?(b.up.set(0,d[n],0),b.lookAt(f[n],0,0)):1==p?(b.up.set(0,0,d[n]),b.lookAt(0,f[n],0)):(b.up.set(0,d[n],0),b.lookAt(0,0,f[n])),Ag(e,p*gc,2<n?gc:0,gc,gc),g.setRenderTarget(e),g.render(a,b);g.toneMapping=k;g.outputEncoding=h;g.setClearColor(l,m)};rb.prototype._textureToCubeUV=function(a,b){var d=this._renderer;a.isCubeTexture?
null==this._cubemapShader&&(this._cubemapShader=sj()):null==this._equirectShader&&(this._equirectShader=rj());var e=a.isCubeTexture?this._cubemapShader:this._equirectShader,f=new Qa(Nf[0],e);e=e.uniforms;e.envMap.value=a;a.isCubeTexture||e.texelSize.value.set(1/a.image.width,1/a.image.height);e.inputEncoding.value=hc[a.encoding];e.outputEncoding.value=hc[b.texture.encoding];Ag(b,0,0,3*gc,2*gc);d.setRenderTarget(b);d.render(f,si)};rb.prototype._applyPMREM=function(a){var b=this._renderer,d=b.autoClear;
b.autoClear=!1;for(var e=1;e<ek;e++)this._blur(a,e-1,e,Math.sqrt(ch[e]*ch[e]-ch[e-1]*ch[e-1]),gk[(e-1)%gk.length]);b.autoClear=d};rb.prototype._blur=function(a,b,d,e,f){var g=this._pingPongRenderTarget;this._halfBlur(a,g,b,d,e,"latitudinal",f);this._halfBlur(g,a,d,d,e,"longitudinal",f)};rb.prototype._halfBlur=function(a,b,d,e,f,g,h){var k=this._renderer,l=this._blurMaterial;"latitudinal"!==g&&"longitudinal"!==g&&console.error("blur direction must be either latitudinal or longitudinal!");var m=new Qa(Nf[e],
l);l=l.uniforms;var n=fk[d]-1;n=isFinite(f)?Math.PI/(2*n):2*Math.PI/39;var p=f/n,t=isFinite(f)?1+Math.floor(3*p):20;20<t&&console.warn("sigmaRadians, "+f+", is too large and will clip, as it requested "+t+" samples when the maximum is set to 20");f=[];for(var q=0,v=0;20>v;++v){var u=v/p;u=Math.exp(-u*u/2);f.push(u);0==v?q+=u:v<t&&(q+=2*u)}for(p=0;p<f.length;p++)f[p]/=q;l.envMap.value=a.texture;l.samples.value=t;l.weights.value=f;l.latitudinal.value="latitudinal"===g;h&&(l.poleAxis.value=h);l.dTheta.value=
n;l.mipInt.value=8-d;l.inputEncoding.value=hc[a.texture.encoding];l.outputEncoding.value=hc[a.texture.encoding];a=fk[e];Ag(b,3*Math.max(0,gc-2*a),(0===e?0:2*gc)+2*a*(4<e?e-8+4:0),3*a,2*a);k.setRenderTarget(b);k.render(m,si)};oa.create=function(a,b){console.log("THREE.Curve.create() has been deprecated");a.prototype=Object.create(oa.prototype);a.prototype.constructor=a;a.prototype.getPoint=b;return a};Object.assign(qc.prototype,{createPointsGeometry:function(a){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");
a=this.getPoints(a);return this.createGeometry(a)},createSpacedPointsGeometry:function(a){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");a=this.getSpacedPoints(a);return this.createGeometry(a)},createGeometry:function(a){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var b=new sa,d=0,e=a.length;d<e;d++){var f=a[d];b.vertices.push(new w(f.x,
f.y,f.z||0))}return b}});Object.assign(Wb.prototype,{fromPoints:function(a){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints().");return this.setFromPoints(a)}});tj.prototype=Object.create(ob.prototype);uj.prototype=Object.create(ob.prototype);Xh.prototype=Object.create(ob.prototype);Object.assign(Xh.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},
reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});uf.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};ke.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(Ma.prototype,{extractUrlBase:function(a){console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.");
return qi.extractUrlBase(a)}});Ma.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Object.assign(vg.prototype,{setTexturePath:function(a){console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().");return this.setResourcePath(a)}});Object.assign($a.prototype,{center:function(a){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");
return this.getCenter(a)},empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(a){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},size:function(a){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(a)}});Object.assign(za.prototype,{center:function(a){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");
return this.getCenter(a)},empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(a){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},isIntersectionSphere:function(a){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(a)},size:function(a){console.warn("THREE.Box3: .size() has been renamed to .getSize().");
return this.getSize(a)}});Object.assign(Wa.prototype,{empty:function(){console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty().");return this.isEmpty()}});xb.prototype.setFromMatrix=function(a){console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().");return this.setFromProjectionMatrix(a)};Cb.prototype.center=function(a){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");return this.getCenter(a)};Object.assign(xa,{random16:function(){console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead.");
return Math.random()},nearestPowerOfTwo:function(a){console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().");return xa.floorPowerOfTwo(a)},nextPowerOfTwo:function(a){console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().");return xa.ceilPowerOfTwo(a)}});Object.assign(Da.prototype,{flattenToArrayOffset:function(a,b){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(a,b)},
multiplyVector3:function(a){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(a){console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});
Object.assign(da.prototype,{extractPosition:function(a){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(a)},flattenToArrayOffset:function(a,b){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(a,b)},getPosition:function(){console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return(new w).setFromMatrixColumn(this,
3)},setRotationFromQuaternion:function(a){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(a)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(a){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector4:function(a){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");
return a.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");a.transformDirection(this)},crossVector:function(a){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},
rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(a){console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},
applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(a,b,d,e,f,g){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(a,b,e,d,f,g)}});Na.prototype.isIntersectionLine=function(a){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(a)};ua.prototype.multiplyVector3=
function(a){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return a.applyQuaternion(this)};Object.assign(Ta.prototype,{isIntersectionBox:function(a){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},isIntersectionPlane:function(a){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(a)},isIntersectionSphere:function(a){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");
return this.intersectsSphere(a)}});Object.assign(Ga.prototype,{area:function(){console.warn("THREE.Triangle: .area() has been renamed to .getArea().");return this.getArea()},barycoordFromPoint:function(a,b){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return this.getBarycoord(a,b)},midpoint:function(a){console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint().");return this.getMidpoint(a)},normal:function(a){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");
return this.getNormal(a)},plane:function(a){console.warn("THREE.Triangle: .plane() has been renamed to .getPlane().");return this.getPlane(a)}});Object.assign(Ga,{barycoordFromPoint:function(a,b,d,e,f){console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().");return Ga.getBarycoord(a,b,d,e,f)},normal:function(a,b,d,e){console.warn("THREE.Triangle: .normal() has been renamed to .getNormal().");return Ga.getNormal(a,b,d,e)}});Object.assign(Pc.prototype,{extractAllPoints:function(a){console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");
return this.extractPoints(a)},extrude:function(a){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new hd(this,a)},makeGeometry:function(a){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new jd(this,a)}});Object.assign(L.prototype,{fromAttribute:function(a,b,d){console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(a,b,d)},distanceToManhattan:function(a){console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");
return this.manhattanDistanceTo(a)},lengthManhattan:function(){console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(w.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},
getPositionFromMatrix:function(a){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(b,
a)},applyProjection:function(a){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(a)},fromAttribute:function(a,b,d){console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(a,b,d)},distanceToManhattan:function(a){console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(a)},lengthManhattan:function(){console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");
return this.manhattanLength()}});Object.assign(ca.prototype,{fromAttribute:function(a,b,d){console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(a,b,d)},lengthManhattan:function(){console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(sa.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},
applyMatrix:function(a){console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(a)}});Object.assign(ha.prototype,{getChildByName:function(a){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(a)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(a,b){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");
return this.translateOnAxis(b,a)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(a){console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(a)}});Object.defineProperties(ha.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(a){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");
this.rotation.order=a}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(Qa.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});
Object.defineProperties(Qa.prototype,{drawMode:{get:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.");return 0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(Se.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");
return this.levels}}});Object.defineProperty(Yf.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});Xf.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(oa.prototype,"__arcLengthDivisions",{get:function(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");return this.arcLengthDivisions},
set:function(a){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");this.arcLengthDivisions=a}});eb.prototype.setLens=function(a,b){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==b&&(this.filmGauge=b);this.setFocalLength(a)};Object.defineProperties(Sa.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(a){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");
this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");
this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");this.shadow.camera.far=a}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(a){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");
this.shadow.bias=a}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(a){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=a}}});Object.defineProperties(pa.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");
return this.array.length}},dynamic:{get:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.");return 35048===this.usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.");this.setUsage(35048)}}});Object.assign(pa.prototype,{setDynamic:function(a){console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.");this.setUsage(!0===a?35048:35044);return this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},
setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(ka.prototype,{addIndex:function(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(a)},addAttribute:function(a,b,d){console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().");return b&&b.isBufferAttribute||b&&b.isInterleavedBufferAttribute?"index"===
a?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(b),this):this.setAttribute(a,b):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(a,new pa(b,d)))},addDrawCall:function(a,b,d){void 0!==d&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(a,b)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");
this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(a){console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().");return this.deleteAttribute(a)},applyMatrix:function(a){console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().");return this.applyMatrix4(a)}});
Object.defineProperties(ka.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});Object.defineProperties(sf.prototype,{maxInstancedCount:{get:function(){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.");return this.instanceCount},set:function(a){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.");
this.instanceCount=a}}});Object.defineProperties(Sh.prototype,{linePrecision:{get:function(){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.");return this.params.Line.threshold},set:function(a){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.");this.params.Line.threshold=a}}});Object.defineProperties(Gb.prototype,{dynamic:{get:function(){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.");
return 35048===this.usage},set:function(a){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.");this.setUsage(a)}}});Object.assign(Gb.prototype,{setDynamic:function(a){console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.");this.setUsage(!0===a?35048:35044);return this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});
Object.assign(bc.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.assign(Jc.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}});Object.defineProperties(Yg.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},
onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this}}});Object.defineProperties(ra.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},
wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new S}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(a){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=1===a}},stencilMask:{get:function(){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead.");return this.stencilFuncMask},
set:function(a){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead.");this.stencilFuncMask=a}}});Object.defineProperties(Oc.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(Nc.prototype,{transparency:{get:function(){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.");
return this.transmission},set:function(a){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.");this.transmission=a}}});Object.defineProperties(sb.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(a){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=a}}});Object.assign(Ne.prototype,
{clearTarget:function(a,b,d,e){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.");this.setRenderTarget(a);this.clear(b,d,e)},animate:function(a){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop().");this.setAnimationLoop(a)},getCurrentRenderTarget:function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");
return this.capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return this.capabilities.precision},resetGLState:function(){console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset().");return this.state.reset()},supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},
supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");
return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");
return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(a){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(a)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},
addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},
setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().");return this.getActiveMipmapLevel()}});Object.defineProperties(Ne.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},
set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=a}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.");return this.getContext()}},
vr:{get:function(){console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr");return this.xr}},gammaInput:{get:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.");return!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.");
return!1},set:function(a){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.");this.outputEncoding=!0===a?3001:3E3}},toneMappingWhitePoint:{get:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.");return 1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(Ui.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},
set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},
set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Db.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=a}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},
set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=a}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=a}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},
set:function(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=a}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},set:function(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=a}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},
set:function(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=a}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=a}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");
this.texture.format=a}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set:function(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=a}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");
this.texture.generateMipmaps=a}}});Object.defineProperties(Ja.prototype,{load:{value:function(a){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var b=this;(new wg).load(a,function(d){b.setBuffer(d)});return this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});Xg.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};Hd.prototype.updateCubeMap=
function(a,b){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(a,b)};Sc.crossOrigin=void 0;Sc.loadTexture=function(a,b,d,e){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var f=new lg;f.setCrossOrigin(this.crossOrigin);a=f.load(a,d,void 0,e);b&&(a.mapping=b);return a};Sc.loadTextureCube=function(a,b,d,e){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");
var f=new jg;f.setCrossOrigin(this.crossOrigin);a=f.load(a,d,void 0,e);b&&(a.mapping=b);return a};Sc.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Sc.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"120"}}));
r.ACESFilmicToneMapping=4;r.AddEquation=100;r.AddOperation=2;r.AdditiveAnimationBlendMode=2501;r.AdditiveBlending=2;r.AlphaFormat=1021;r.AlwaysDepth=1;r.AlwaysStencilFunc=519;r.AmbientLight=qg;r.AmbientLightProbe=Mh;r.AnimationClip=Mb;r.AnimationLoader=Bh;r.AnimationMixer=Ph;r.AnimationObjectGroup=nj;r.AnimationUtils=Va;r.ArcCurve=ge;r.ArrayCamera=Tf;r.ArrowHelper=Rc;r.Audio=Ja;r.AudioAnalyser=Xg;r.AudioContext=Nh;r.AudioListener=Xb;r.AudioLoader=wg;r.AxesHelper=yf;r.AxisHelper=function(a){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");
return new yf(a)};r.BackSide=1;r.BasicDepthPacking=3200;r.BasicShadowMap=0;r.BinaryTextureLoader=function(a){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new kg(a)};r.Bone=uh;r.BooleanKeyframeTrack=fg;r.BoundingBoxHelper=function(a,b){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");return new Qc(a,b)};r.Box2=$a;r.Box3=za;r.Box3Helper=wf;r.BoxBufferGeometry=Bc;r.BoxGeometry=Fd;r.BoxHelper=Qc;r.BufferAttribute=
pa;r.BufferGeometry=ka;r.BufferGeometryLoader=ug;r.ByteType=1010;r.Cache=vd;r.Camera=ac;r.CameraHelper=vf;r.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")};r.CanvasTexture=Te;r.CatmullRomCurve3=ob;r.CineonToneMapping=3;r.CircleBufferGeometry=ce;r.CircleGeometry=nf;r.ClampToEdgeWrapping=1001;r.Clock=ie;r.ClosedSplineCurve3=tj;r.Color=S;r.ColorKeyframeTrack=gg;r.CompressedTexture=Qd;r.CompressedTextureLoader=Ch;r.ConeBufferGeometry=mf;r.ConeGeometry=lf;r.CubeCamera=
Hd;r.CubeGeometry=Fd;r.CubeReflectionMapping=301;r.CubeRefractionMapping=302;r.CubeTexture=kc;r.CubeTextureLoader=jg;r.CubeUVReflectionMapping=306;r.CubeUVRefractionMapping=307;r.CubicBezierCurve=Sb;r.CubicBezierCurve3=dc;r.CubicInterpolant=dg;r.CullFaceBack=1;r.CullFaceFront=2;r.CullFaceFrontBack=3;r.CullFaceNone=0;r.Curve=oa;r.CurvePath=qc;r.CustomBlending=5;r.CustomToneMapping=5;r.CylinderBufferGeometry=oc;r.CylinderGeometry=ld;r.Cylindrical=Ae;r.DataTexture=bd;r.DataTexture2DArray=Id;r.DataTexture3D=
Jd;r.DataTextureLoader=kg;r.DecrementStencilOp=7683;r.DecrementWrapStencilOp=34056;r.DefaultLoadingManager=jj;r.DepthFormat=1026;r.DepthStencilFormat=1027;r.DepthTexture=Ue;r.DirectionalLight=pg;r.DirectionalLightHelper=ne;r.DiscreteInterpolant=eg;r.DodecahedronBufferGeometry=Vd;r.DodecahedronGeometry=$e;r.DoubleSide=2;r.DstAlphaFactor=206;r.DstColorFactor=208;r.DynamicBufferAttribute=function(a,b){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead.");
return(new pa(a,b)).setUsage(35048)};r.DynamicCopyUsage=35050;r.DynamicDrawUsage=35048;r.DynamicReadUsage=35049;r.EdgesGeometry=be;r.EdgesHelper=function(a,b){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new Za(new be(a.geometry),new Ya({color:void 0!==b?b:16777215}))};r.EllipseCurve=Ib;r.EqualDepth=4;r.EqualStencilFunc=514;r.EquirectangularReflectionMapping=303;r.EquirectangularRefractionMapping=304;r.Euler=hb;r.EventDispatcher=wb;r.ExtrudeBufferGeometry=
bc;r.ExtrudeGeometry=hd;r.Face3=ad;r.Face4=function(a,b,d,e,f,g,h){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new ad(a,b,d,f,g,h)};r.FaceColors=1;r.FileLoader=Nb;r.FlatShading=1;r.Float32Attribute=function(a,b){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");return new ea(a,b)};r.Float32BufferAttribute=ea;r.Float64Attribute=function(a,b){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");
return new He(a,b)};r.Float64BufferAttribute=He;r.FloatType=1015;r.Fog=Hf;r.FogExp2=Gf;r.Font=Jh;r.FontLoader=Kh;r.FrontSide=0;r.Frustum=xb;r.GLBufferAttribute=Rh;r.GLSL1="100";r.GLSL3="300 es";r.GammaEncoding=3007;r.Geometry=sa;r.GeometryUtils={merge:function(a,b,d){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");if(b.isMesh){b.matrixAutoUpdate&&b.updateMatrix();var e=b.matrix;b=b.geometry}a.merge(b,e,
d)},center:function(a){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return a.center()}};r.GreaterDepth=6;r.GreaterEqualDepth=5;r.GreaterEqualStencilFunc=518;r.GreaterStencilFunc=516;r.GridHelper=uf;r.Group=Gc;r.HalfFloatType=1016;r.HemisphereLight=mg;r.HemisphereLightHelper=me;r.HemisphereLightProbe=Lh;r.IcosahedronBufferGeometry=Ud;r.IcosahedronGeometry=Ze;r.ImageBitmapLoader=Hh;r.ImageLoader=fe;r.ImageUtils=Sc;r.ImmediateRenderObject=
tf;r.IncrementStencilOp=7682;r.IncrementWrapStencilOp=34055;r.InstancedBufferAttribute=tg;r.InstancedBufferGeometry=sf;r.InstancedInterleavedBuffer=Qh;r.InstancedMesh=Zf;r.Int16Attribute=function(a,b){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new Fe(a,b)};r.Int16BufferAttribute=Fe;r.Int32Attribute=function(a,b){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new Ge(a,b)};r.Int32BufferAttribute=
Ge;r.Int8Attribute=function(a,b){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new Ce(a,b)};r.Int8BufferAttribute=Ce;r.IntType=1013;r.InterleavedBuffer=Gb;r.InterleavedBufferAttribute=Kc;r.Interpolant=Hb;r.InterpolateDiscrete=2300;r.InterpolateLinear=2301;r.InterpolateSmooth=2302;r.InvertStencilOp=5386;r.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")};r.KeepStencilOp=7680;r.KeyframeTrack=lb;r.LOD=Se;r.LatheBufferGeometry=
ae;r.LatheGeometry=kf;r.Layers=$b;r.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")};r.LessDepth=2;r.LessEqualDepth=3;r.LessEqualStencilFunc=515;r.LessStencilFunc=513;r.Light=Sa;r.LightProbe=Ob;r.LightShadow=fc;r.Line=yb;r.Line3=Cb;r.LineBasicMaterial=Ya;r.LineCurve=Ab;r.LineCurve3=Tb;r.LineDashedMaterial=rd;r.LineLoop=$f;r.LinePieces=1;r.LineSegments=Za;r.LineStrip=0;r.LinearEncoding=3E3;r.LinearFilter=1006;r.LinearInterpolant=of;r.LinearMipMapLinearFilter=
1008;r.LinearMipMapNearestFilter=1007;r.LinearMipmapLinearFilter=1008;r.LinearMipmapNearestFilter=1007;r.LinearToneMapping=1;r.Loader=Ma;r.LoaderUtils=qi;r.LoadingManager=Ah;r.LogLuvEncoding=3003;r.LoopOnce=2200;r.LoopPingPong=2202;r.LoopRepeat=2201;r.LuminanceAlphaFormat=1025;r.LuminanceFormat=1024;r.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2};r.Material=ra;r.MaterialLoader=sg;r.Math=xa;r.MathUtils=xa;r.Matrix3=Da;r.Matrix4=da;r.MaxEquation=104;r.Mesh=Qa;r.MeshBasicMaterial=Kb;r.MeshDepthMaterial=
Ec;r.MeshDistanceMaterial=Fc;r.MeshFaceMaterial=function(a){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");return a};r.MeshLambertMaterial=pd;r.MeshMatcapMaterial=qd;r.MeshNormalMaterial=od;r.MeshPhongMaterial=Oc;r.MeshPhysicalMaterial=Nc;r.MeshStandardMaterial=cc;r.MeshToonMaterial=nd;r.MinEquation=103;r.MirroredRepeatWrapping=1002;r.MixOperation=1;r.MultiMaterial=function(a){void 0===a&&(a=[]);console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");
a.isMultiMaterial=!0;a.materials=a;a.clone=function(){return a.slice()};return a};r.MultiplyBlending=4;r.MultiplyOperation=0;r.NearestFilter=1003;r.NearestMipMapLinearFilter=1005;r.NearestMipMapNearestFilter=1004;r.NearestMipmapLinearFilter=1005;r.NearestMipmapNearestFilter=1004;r.NeverDepth=0;r.NeverStencilFunc=512;r.NoBlending=0;r.NoColors=0;r.NoToneMapping=0;r.NormalAnimationBlendMode=2500;r.NormalBlending=1;r.NotEqualDepth=7;r.NotEqualStencilFunc=517;r.NumberKeyframeTrack=de;r.Object3D=ha;r.ObjectLoader=
vg;r.ObjectSpaceNormalMap=1;r.OctahedronBufferGeometry=fd;r.OctahedronGeometry=Ye;r.OneFactor=201;r.OneMinusDstAlphaFactor=207;r.OneMinusDstColorFactor=209;r.OneMinusSrcAlphaFactor=205;r.OneMinusSrcColorFactor=203;r.OrthographicCamera=he;r.PCFShadowMap=1;r.PCFSoftShadowMap=2;r.PMREMGenerator=rb;r.ParametricBufferGeometry=Sd;r.ParametricGeometry=Ve;r.Particle=function(a){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new Qe(a)};r.ParticleBasicMaterial=function(a){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");
return new Rb(a)};r.ParticleSystem=function(a,b){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new Pd(a,b)};r.ParticleSystemMaterial=function(a){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new Rb(a)};r.Path=Wb;r.PerspectiveCamera=eb;r.Plane=Na;r.PlaneBufferGeometry=cd;r.PlaneGeometry=Je;r.PlaneHelper=xf;r.PointCloud=function(a,b){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new Pd(a,b)};
r.PointCloudMaterial=function(a){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new Rb(a)};r.PointLight=og;r.PointLightHelper=le;r.Points=Pd;r.PointsMaterial=Rb;r.PolarGridHelper=xg;r.PolyhedronBufferGeometry=zb;r.PolyhedronGeometry=We;r.PositionalAudio=tb;r.PropertyBinding=qb;r.PropertyMixer=Oh;r.QuadraticBezierCurve=Ub;r.QuadraticBezierCurve3=ec;r.Quaternion=ua;r.QuaternionKeyframeTrack=pf;r.QuaternionLinearInterpolant=hg;r.REVISION="120";r.RGBADepthPacking=
3201;r.RGBAFormat=1023;r.RGBAIntegerFormat=1033;r.RGBA_ASTC_10x10_Format=37819;r.RGBA_ASTC_10x5_Format=37816;r.RGBA_ASTC_10x6_Format=37817;r.RGBA_ASTC_10x8_Format=37818;r.RGBA_ASTC_12x10_Format=37820;r.RGBA_ASTC_12x12_Format=37821;r.RGBA_ASTC_4x4_Format=37808;r.RGBA_ASTC_5x4_Format=37809;r.RGBA_ASTC_5x5_Format=37810;r.RGBA_ASTC_6x5_Format=37811;r.RGBA_ASTC_6x6_Format=37812;r.RGBA_ASTC_8x5_Format=37813;r.RGBA_ASTC_8x6_Format=37814;r.RGBA_ASTC_8x8_Format=37815;r.RGBA_BPTC_Format=36492;r.RGBA_ETC2_EAC_Format=
37496;r.RGBA_PVRTC_2BPPV1_Format=35843;r.RGBA_PVRTC_4BPPV1_Format=35842;r.RGBA_S3TC_DXT1_Format=33777;r.RGBA_S3TC_DXT3_Format=33778;r.RGBA_S3TC_DXT5_Format=33779;r.RGBDEncoding=3006;r.RGBEEncoding=3002;r.RGBEFormat=1023;r.RGBFormat=1022;r.RGBIntegerFormat=1032;r.RGBM16Encoding=3005;r.RGBM7Encoding=3004;r.RGB_ETC1_Format=36196;r.RGB_ETC2_Format=37492;r.RGB_PVRTC_2BPPV1_Format=35841;r.RGB_PVRTC_4BPPV1_Format=35840;r.RGB_S3TC_DXT1_Format=33776;r.RGFormat=1030;r.RGIntegerFormat=1031;r.RawShaderMaterial=
pc;r.Ray=Ta;r.Raycaster=Sh;r.RectAreaLight=rg;r.RedFormat=1028;r.RedIntegerFormat=1029;r.ReinhardToneMapping=2;r.RepeatWrapping=1E3;r.ReplaceStencilOp=7681;r.ReverseSubtractEquation=102;r.RingBufferGeometry=$d;r.RingGeometry=jf;r.SRGB8_ALPHA8_ASTC_10x10_Format=37851;r.SRGB8_ALPHA8_ASTC_10x5_Format=37848;r.SRGB8_ALPHA8_ASTC_10x6_Format=37849;r.SRGB8_ALPHA8_ASTC_10x8_Format=37850;r.SRGB8_ALPHA8_ASTC_12x10_Format=37852;r.SRGB8_ALPHA8_ASTC_12x12_Format=37853;r.SRGB8_ALPHA8_ASTC_4x4_Format=37840;r.SRGB8_ALPHA8_ASTC_5x4_Format=
37841;r.SRGB8_ALPHA8_ASTC_5x5_Format=37842;r.SRGB8_ALPHA8_ASTC_6x5_Format=37843;r.SRGB8_ALPHA8_ASTC_6x6_Format=37844;r.SRGB8_ALPHA8_ASTC_8x5_Format=37845;r.SRGB8_ALPHA8_ASTC_8x6_Format=37846;r.SRGB8_ALPHA8_ASTC_8x8_Format=37847;r.Scene=Jc;r.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};
r.ShaderChunk=Ba;r.ShaderLib=Pb;r.ShaderMaterial=sb;r.ShadowMaterial=md;r.Shape=Pc;r.ShapeBufferGeometry=kd;r.ShapeGeometry=jd;r.ShapePath=Ih;r.ShapeUtils=nc;r.ShortType=1011;r.Skeleton=Yf;r.SkeletonHelper=ke;r.SkinnedMesh=Xf;r.SmoothShading=2;r.Sphere=Wa;r.SphereBufferGeometry=id;r.SphereGeometry=hf;r.Spherical=Ad;r.SphericalHarmonics3=pb;r.Spline=Xh;r.SplineCurve=Vb;r.SplineCurve3=uj;r.SpotLight=ng;r.SpotLightHelper=je;r.Sprite=Qe;r.SpriteMaterial=Lc;r.SrcAlphaFactor=204;r.SrcAlphaSaturateFactor=
210;r.SrcColorFactor=202;r.StaticCopyUsage=35046;r.StaticDrawUsage=35044;r.StaticReadUsage=35045;r.StereoCamera=lj;r.StreamCopyUsage=35042;r.StreamDrawUsage=35040;r.StreamReadUsage=35041;r.StringKeyframeTrack=ig;r.SubtractEquation=101;r.SubtractiveBlending=3;r.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};r.TangentSpaceNormalMap=0;r.TetrahedronBufferGeometry=Td;r.TetrahedronGeometry=Xe;r.TextBufferGeometry=Zd;r.TextGeometry=gf;r.Texture=Oa;r.TextureLoader=lg;r.TorusBufferGeometry=Xd;r.TorusGeometry=
cf;r.TorusKnotBufferGeometry=Wd;r.TorusKnotGeometry=bf;r.Triangle=Ga;r.TriangleFanDrawMode=2;r.TriangleStripDrawMode=1;r.TrianglesDrawMode=0;r.TubeBufferGeometry=gd;r.TubeGeometry=af;r.UVMapping=300;r.Uint16Attribute=function(a,b){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new Zc(a,b)};r.Uint16BufferAttribute=Zc;r.Uint32Attribute=function(a,b){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");
return new $c(a,b)};r.Uint32BufferAttribute=$c;r.Uint8Attribute=function(a,b){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new De(a,b)};r.Uint8BufferAttribute=De;r.Uint8ClampedAttribute=function(a,b){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new Ee(a,b)};r.Uint8ClampedBufferAttribute=Ee;r.Uniform=Yg;r.UniformsLib=fa;r.UniformsUtils=Ri;r.UnsignedByteType=1009;
r.UnsignedInt248Type=1020;r.UnsignedIntType=1014;r.UnsignedShort4444Type=1017;r.UnsignedShort5551Type=1018;r.UnsignedShort565Type=1019;r.UnsignedShortType=1012;r.VSMShadowMap=3;r.Vector2=L;r.Vector3=w;r.Vector4=ca;r.VectorKeyframeTrack=ee;r.Vertex=function(a,b,d){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new w(a,b,d)};r.VertexColors=2;r.VideoTexture=xh;r.WebGL1Renderer=th;r.WebGLCubeRenderTarget=Cc;r.WebGLMultisampleRenderTarget=dh;r.WebGLRenderTarget=Db;r.WebGLRenderTargetCube=
function(a,b,d){console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options ).");return new Cc(a,d)};r.WebGLRenderer=Ne;r.WebGLUtils=Vi;r.WireframeGeometry=Rd;r.WireframeHelper=function(a,b){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new Za(new Rd(a.geometry),new Ya({color:void 0!==b?b:16777215}))};r.WrapAroundEnding=2402;r.XHRLoader=function(a){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");
return new Nb(a)};r.ZeroCurvatureEnding=2400;r.ZeroFactor=200;r.ZeroSlopeEnding=2401;r.ZeroStencilOp=0;r.sRGBEncoding=3001;Object.defineProperty(r,"__esModule",{value:!0})});
/**
 * @license Copyright (c) 2015-2020 Radiant Media Player 
 * Radiant Media Player 5.10.2 | https://www.radiantmediaplayer.com
 * Terms of service: https://www.radiantmediaplayer.com/terms-of-service.html
 * Contact information: https://www.radiantmediaplayer.com/contact.html
 */
/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
(function(){var innerGlobal=typeof window!="undefined"?window:global;var exportTo={};(function(window,global,module){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var p;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}var ba="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
function da(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var ea=da(this);function fa(a,b){if(b){for(var c=ea,d=a.split("."),e=0;e<d.length-1;e++){var f=d[e];f in c||(c[f]={});c=c[f]}d=d[d.length-1];e=c[d];f=b(e);f!=e&&null!=f&&ba(c,d,{configurable:!0,writable:!0,value:f})}}
fa("Symbol",function(a){function b(e){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new c("jscomp_symbol_"+(e||"")+"_"+d++,e)}function c(e,f){this.a=e;ba(this,"description",{configurable:!0,writable:!0,value:f})}if(a)return a;c.prototype.toString=function(){return this.a};var d=0;return b});
fa("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=ea[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&ba(d.prototype,a,{configurable:!0,writable:!0,value:function(){return ha(aa(this))}})}return a});function ha(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}
function r(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function ia(a){if(!(a instanceof Array)){a=r(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}var ja="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ka;
if("function"==typeof Object.setPrototypeOf)ka=Object.setPrototypeOf;else{var la;a:{var ma={Kd:!0},na={};try{na.__proto__=ma;la=na.Kd;break a}catch(a){}la=!1}ka=la?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var oa=ka;
function pa(a,b){a.prototype=ja(b.prototype);a.prototype.constructor=a;if(oa)oa(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c]}function qa(){this.j=!1;this.g=null;this.b=void 0;this.a=1;this.f=this.i=0;this.v=this.c=null}function ta(a){if(a.j)throw new TypeError("Generator is already running");a.j=!0}qa.prototype.s=function(a){this.b=a};function ua(a,b){a.c={kd:b,pd:!0};a.a=a.i||a.f}
qa.prototype["return"]=function(a){this.c={"return":a};this.a=this.f};function t(a,b,c){a.a=c;return{value:b}}qa.prototype.o=function(a){this.a=a};function w(a){a.a=0}function x(a,b,c){a.i=b;void 0!=c&&(a.f=c)}function wa(a){a.i=0;a.f=2}function C(a,b){a.a=b;a.i=0}function J(a){a.i=0;var b=a.c.kd;a.c=null;return b}function xa(a){a.v=[a.c];a.i=0;a.f=0}function ya(a,b){var c=a.v.splice(0)[0];(c=a.c=a.c||c)?c.pd?a.a=a.i||a.f:void 0!=c.o&&a.f<c.o?(a.a=c.o,a.c=null):a.a=a.f:a.a=b}
function Aa(a){this.a=new qa;this.b=a}function Ba(a,b){ta(a.a);var c=a.a.g;if(c)return Ca(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.a["return"]);a.a["return"](b);return Da(a)}function Ca(a,b,c,d){try{var e=b.call(a.a.g,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.a.j=!1,e;var f=e.value}catch(g){return a.a.g=null,ua(a.a,g),Da(a)}a.a.g=null;d.call(a.a,f);return Da(a)}
function Da(a){for(;a.a.a;)try{var b=a.b(a.a);if(b)return a.a.j=!1,{value:b.value,done:!1}}catch(c){a.a.b=void 0,ua(a.a,c)}a.a.j=!1;if(a.a.c){b=a.a.c;a.a.c=null;if(b.pd)throw b.kd;return{value:b["return"],done:!0}}return{value:void 0,done:!0}}
function Ea(a){this.next=function(b){ta(a.a);a.a.g?b=Ca(a,a.a.g.next,b,a.a.s):(a.a.s(b),b=Da(a));return b};this["throw"]=function(b){ta(a.a);a.a.g?b=Ca(a,a.a.g["throw"],b,a.a.s):(ua(a.a,b),b=Da(a));return b};this["return"]=function(b){return Ba(a,b)};this[Symbol.iterator]=function(){return this}}function Ia(a,b){var c=new Ea(new Aa(b));oa&&oa(c,a.prototype);return c}
fa("Promise",function(a){function b(g){this.b=0;this.g=void 0;this.a=[];var h=this.c();try{g(h.resolve,h.reject)}catch(k){h.reject(k)}}function c(){this.a=null}function d(g){return g instanceof b?g:new b(function(h){h(g)})}if(a)return a;c.prototype.b=function(g){if(null==this.a){this.a=[];var h=this;this.c(function(){h.g()})}this.a.push(g)};var e=ea.setTimeout;c.prototype.c=function(g){e(g,0)};c.prototype.g=function(){for(;this.a&&this.a.length;){var g=this.a;this.a=[];for(var h=0;h<g.length;++h){var k=
g[h];g[h]=null;try{k()}catch(l){this.f(l)}}}this.a=null};c.prototype.f=function(g){this.c(function(){throw g;})};b.prototype.c=function(){function g(l){return function(m){k||(k=!0,l.call(h,m))}}var h=this,k=!1;return{resolve:g(this.A),reject:g(this.f)}};b.prototype.A=function(g){if(g===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof b)this.F(g);else{a:switch(typeof g){case "object":var h=null!=g;break a;case "function":h=!0;break a;default:h=!1}h?this.v(g):this.i(g)}};
b.prototype.v=function(g){var h=void 0;try{h=g.then}catch(k){this.f(k);return}"function"==typeof h?this.I(h,g):this.i(g)};b.prototype.f=function(g){this.j(2,g)};b.prototype.i=function(g){this.j(1,g)};b.prototype.j=function(g,h){if(0!=this.b)throw Error("Cannot settle("+g+", "+h+"): Promise already settled in state"+this.b);this.b=g;this.g=h;this.s()};b.prototype.s=function(){if(null!=this.a){for(var g=0;g<this.a.length;++g)f.b(this.a[g]);this.a=null}};var f=new c;b.prototype.F=function(g){var h=this.c();
g.Ub(h.resolve,h.reject)};b.prototype.I=function(g,h){var k=this.c();try{g.call(h,k.resolve,k.reject)}catch(l){k.reject(l)}};b.prototype.then=function(g,h){function k(q,u){return"function"==typeof q?function(v){try{l(q(v))}catch(y){m(y)}}:u}var l,m,n=new b(function(q,u){l=q;m=u});this.Ub(k(g,l),k(h,m));return n};b.prototype["catch"]=function(g){return this.then(void 0,g)};b.prototype.Ub=function(g,h){function k(){switch(l.b){case 1:g(l.g);break;case 2:h(l.g);break;default:throw Error("Unexpected state: "+
l.b);}}var l=this;null==this.a?f.b(k):this.a.push(k)};b.resolve=d;b.reject=function(g){return new b(function(h,k){k(g)})};b.race=function(g){return new b(function(h,k){for(var l=r(g),m=l.next();!m.done;m=l.next())d(m.value).Ub(h,k)})};b.all=function(g){var h=r(g),k=h.next();return k.done?d([]):new b(function(l,m){function n(v){return function(y){q[v]=y;u--;0==u&&l(q)}}var q=[],u=0;do q.push(void 0),u++,d(k.value).Ub(n(q.length-1),m),k=h.next();while(!k.done)})};return b});
function Ja(a){function b(d){return a.next(d)}function c(d){return a["throw"](d)}return new Promise(function(d,e){function f(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(f,e)}f(a.next())})}function K(a){return Ja(new Ea(new Aa(a)))}function Ka(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
fa("WeakMap",function(a){function b(k){this.a=(h+=Math.random()+1).toString();if(k){k=r(k);for(var l;!(l=k.next()).done;)l=l.value,this.set(l[0],l[1])}}function c(){}function d(k){var l=typeof k;return"object"===l&&null!==k||"function"===l}function e(k){if(!Ka(k,g)){var l=new c;ba(k,g,{value:l})}}function f(k){var l=Object[k];l&&(Object[k]=function(m){if(m instanceof c)return m;e(m);return l(m)})}if(function(){if(!a||!Object.seal)return!1;try{var k=Object.seal({}),l=Object.seal({}),m=new a([[k,2],
[l,3]]);if(2!=m.get(k)||3!=m.get(l))return!1;m["delete"](k);m.set(l,4);return!m.has(k)&&4==m.get(l)}catch(n){return!1}}())return a;var g="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var h=0;b.prototype.set=function(k,l){if(!d(k))throw Error("Invalid WeakMap key");e(k);if(!Ka(k,g))throw Error("WeakMap key fail: "+k);k[g][this.a]=l;return this};b.prototype.get=function(k){return d(k)&&Ka(k,g)?k[g][this.a]:void 0};b.prototype.has=function(k){return d(k)&&Ka(k,g)&&Ka(k[g],
this.a)};b.prototype["delete"]=function(k){return d(k)&&Ka(k,g)&&Ka(k[g],this.a)?delete k[g][this.a]:!1};return b});
fa("Map",function(a){function b(){var h={};return h.Ea=h.next=h.head=h}function c(h,k){var l=h.a;return ha(function(){if(l){for(;l.head!=h.a;)l=l.Ea;for(;l.next!=l.head;)return l=l.next,{done:!1,value:k(l)};l=null}return{done:!0,value:void 0}})}function d(h,k){var l=k&&typeof k;"object"==l||"function"==l?f.has(k)?l=f.get(k):(l=""+ ++g,f.set(k,l)):l="p_"+k;var m=h.b[l];if(m&&Ka(h.b,l))for(var n=0;n<m.length;n++){var q=m[n];if(k!==k&&q.key!==q.key||k===q.key)return{id:l,list:m,index:n,U:q}}return{id:l,
list:m,index:-1,U:void 0}}function e(h){this.b={};this.a=b();this.size=0;if(h){h=r(h);for(var k;!(k=h.next()).done;)k=k.value,this.set(k[0],k[1])}}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var h=Object.seal({x:4}),k=new a(r([[h,"s"]]));if("s"!=k.get(h)||1!=k.size||k.get({x:4})||k.set({x:4},"t")!=k||2!=k.size)return!1;var l=k.entries(),m=l.next();if(m.done||m.value[0]!=h||"s"!=m.value[1])return!1;m=l.next();return m.done||4!=m.value[0].x||
"t"!=m.value[1]||!l.next().done?!1:!0}catch(n){return!1}}())return a;var f=new WeakMap;e.prototype.set=function(h,k){h=0===h?0:h;var l=d(this,h);l.list||(l.list=this.b[l.id]=[]);l.U?l.U.value=k:(l.U={next:this.a,Ea:this.a.Ea,head:this.a,key:h,value:k},l.list.push(l.U),this.a.Ea.next=l.U,this.a.Ea=l.U,this.size++);return this};e.prototype["delete"]=function(h){h=d(this,h);return h.U&&h.list?(h.list.splice(h.index,1),h.list.length||delete this.b[h.id],h.U.Ea.next=h.U.next,h.U.next.Ea=h.U.Ea,h.U.head=
null,this.size--,!0):!1};e.prototype.clear=function(){this.b={};this.a=this.a.Ea=b();this.size=0};e.prototype.has=function(h){return!!d(this,h).U};e.prototype.get=function(h){return(h=d(this,h).U)&&h.value};e.prototype.entries=function(){return c(this,function(h){return[h.key,h.value]})};e.prototype.keys=function(){return c(this,function(h){return h.key})};e.prototype.values=function(){return c(this,function(h){return h.value})};e.prototype.forEach=function(h,k){for(var l=this.entries(),m;!(m=l.next()).done;)m=
m.value,h.call(k,m[1],m[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var g=0;return e});
fa("Set",function(a){function b(c){this.a=new Map;if(c){c=r(c);for(var d;!(d=c.next()).done;)this.add(d.value)}this.size=this.a.size}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),d=new a(r([c]));if(!d.has(c)||1!=d.size||d.add(c)!=d||1!=d.size||d.add({x:4})!=d||2!=d.size)return!1;var e=d.entries(),f=e.next();if(f.done||f.value[0]!=c||f.value[1]!=c)return!1;f=e.next();return f.done||f.value[0]==c||4!=f.value[0].x||
f.value[1]!=f.value[0]?!1:e.next().done}catch(g){return!1}}())return a;b.prototype.add=function(c){c=0===c?0:c;this.a.set(c,c);this.size=this.a.size;return this};b.prototype["delete"]=function(c){c=this.a["delete"](c);this.size=this.a.size;return c};b.prototype.clear=function(){this.a.clear();this.size=0};b.prototype.has=function(c){return this.a.has(c)};b.prototype.entries=function(){return this.a.entries()};b.prototype.values=function(){return this.a.values()};b.prototype.keys=b.prototype.values;
b.prototype[Symbol.iterator]=b.prototype.values;b.prototype.forEach=function(c,d){var e=this;this.a.forEach(function(f){return c.call(d,f,f,e)})};return b});function La(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{V:e,Hd:f}}return{V:-1,Hd:void 0}}fa("Array.prototype.findIndex",function(a){return a?a:function(b,c){return La(this,b,c).V}});
fa("Promise.prototype.finally",function(a){return a?a:function(b){return this.then(function(c){return Promise.resolve(b()).then(function(){return c})},function(c){return Promise.resolve(b()).then(function(){throw c;})})}});fa("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}});
fa("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length,f=c||0;for(0>f&&(f=Math.max(f+e,0));f<e;f++){var g=d[f];if(g===b||Object.is(g,b))return!0}return!1}});function Ma(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""}
fa("String.prototype.includes",function(a){return a?a:function(b,c){return-1!==Ma(this,b,"includes").indexOf(b,c||0)}});fa("Array.from",function(a){return a?a:function(b,c,d){c=null!=c?c:function(h){return h};var e=[],f="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof f){b=f.call(b);for(var g=0;!(f=b.next()).done;)e.push(c.call(d,f.value,g++))}else for(f=b.length,g=0;g<f;g++)e.push(c.call(d,b[g],g));return e}});
fa("Array.prototype.find",function(a){return a?a:function(b,c){return La(this,b,c).Hd}});fa("Math.log2",function(a){return a?a:function(b){return Math.log(b)/Math.LN2}});var Na="function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)Ka(d,e)&&(a[e]=d[e])}return a};fa("Object.assign",function(a){return a||Na});fa("Object.values",function(a){return a?a:function(b){var c=[],d;for(d in b)Ka(b,d)&&c.push(b[d]);return c}});
fa("String.prototype.startsWith",function(a){return a?a:function(b,c){for(var d=Ma(this,b,"startsWith"),e=d.length,f=b.length,g=Math.max(0,Math.min(c|0,d.length)),h=0;h<f&&g<e;)if(d[g++]!=b[h++])return!1;return h>=f}});var Oa=this||self;function M(a,b){var c=a.split("."),d=Oa;c[0]in d||"undefined"==typeof d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d[e]&&d[e]!==Object.prototype[e]?d=d[e]:d=d[e]={}:d[e]=b};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function Pa(a){this.c=Math.exp(Math.log(.5)/a);this.b=this.a=0}function Qa(a,b,c){var d=Math.pow(a.c,b);c=c*(1-d)+d*a.a;isNaN(c)||(a.a=c,a.b+=b)}function Ra(a){return a.a/(1-Math.pow(a.c,a.b))};function Sa(){this.b=new Pa(2);this.c=new Pa(5);this.a=0}Sa.prototype.getBandwidthEstimate=function(a){return 128E3>this.a?a:Math.min(Ra(this.b),Ra(this.c))};function Ta(){}function Ua(){}function Va(){}function Wa(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];Xa.has(a)||(Xa.add(a),Va.apply(Ta,ia(c)))}function Ya(){}var Xa=new Set;if(window.console&&window.console.log.bind){var Za={},$a=(Za[1]=console.error.bind(console),Za[2]=console.warn.bind(console),Za[3]=console.info.bind(console),Za[4]=console.log.bind(console),Za[5]=console.debug.bind(console),Za[6]=console.debug.bind(console),Za);Va=$a[2];Ua=$a[1]};function ab(a,b){for(var c=[],d=r(a),e=d.next();!e.done;e=d.next())c.push(b(e.value));return c}function bb(a,b){for(var c=r(a),d=c.next();!d.done;d=c.next())if(!b(d.value))return!1;return!0}
var db=function cb(a){var c;return Ia(cb,function(d){1==d.a&&(c=0);if(3!=d.a)return c<a?t(d,c,3):d.o(0);c++;return d.o(2)})},fb=function eb(a){var c,d,e,f,g,h;return Ia(eb,function(k){1==k.a&&(c=-1,e=d=void 0,f=r(a),g=f.next());if(5!=k.a){if(g.done)return-1==c?k.o(0):t(k,{V:c,se:d,item:e,next:void 0},0);h=g.value;return 0<=c?t(k,{V:c,item:e,se:d,next:h},5):k.o(5)}c++;d=e;e=h;g=f.next();return k.o(2)})};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/
var gb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/
function hb(a){var b;a instanceof hb?(ib(this,a.ra),this.Xa=a.Xa,this.qa=a.qa,jb(this,a.lb),this.ga=a.ga,kb(this,a.a.clone()),this.Oa=a.Oa):a&&(b=String(a).match(gb))?(ib(this,b[1]||"",!0),this.Xa=lb(b[2]||""),this.qa=lb(b[3]||"",!0),jb(this,b[4]),this.ga=lb(b[5]||"",!0),kb(this,b[6]||"",!0),this.Oa=lb(b[7]||"")):this.a=new mb(null)}p=hb.prototype;p.ra="";p.Xa="";p.qa="";p.lb=null;p.ga="";p.Oa="";
p.toString=function(){var a=[],b=this.ra;b&&a.push(nb(b,ob,!0),":");if(b=this.qa){a.push("//");var c=this.Xa;c&&a.push(nb(c,ob,!0),"@");a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));b=this.lb;null!=b&&a.push(":",String(b))}if(b=this.ga)this.qa&&"/"!=b.charAt(0)&&a.push("/"),a.push(nb(b,"/"==b.charAt(0)?pb:qb,!0));(b=this.a.toString())&&a.push("?",b);(b=this.Oa)&&a.push("#",nb(b,rb));return a.join("")};
p.resolve=function(a){var b=this.clone();"data"===b.ra&&(b=new hb);var c=!!a.ra;c?ib(b,a.ra):c=!!a.Xa;c?b.Xa=a.Xa:c=!!a.qa;c?b.qa=a.qa:c=null!=a.lb;var d=a.ga;if(c)jb(b,a.lb);else if(c=!!a.ga){if("/"!=d.charAt(0))if(this.qa&&!this.ga)d="/"+d;else{var e=b.ga.lastIndexOf("/");-1!=e&&(d=b.ga.substr(0,e+1)+d)}if(".."==d||"."==d)d="";else if(-1!=d.indexOf("./")||-1!=d.indexOf("/.")){e=0==d.lastIndexOf("/",0);d=d.split("/");for(var f=[],g=0;g<d.length;){var h=d[g++];"."==h?e&&g==d.length&&f.push(""):".."==
h?((1<f.length||1==f.length&&""!=f[0])&&f.pop(),e&&g==d.length&&f.push("")):(f.push(h),e=!0)}d=f.join("/")}}c?b.ga=d:c=""!==a.a.toString();c?kb(b,a.a.clone()):c=!!a.Oa;c&&(b.Oa=a.Oa);return b};p.clone=function(){return new hb(this)};function ib(a,b,c){a.ra=c?lb(b,!0):b;a.ra&&(a.ra=a.ra.replace(/:$/,""))}function jb(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.lb=b}else a.lb=null}function kb(a,b,c){b instanceof mb?a.a=b:(c||(b=nb(b,sb)),a.a=new mb(b))}
function lb(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""}function nb(a,b,c){return null!=a?(a=encodeURI(a).replace(b,tb),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function tb(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var ob=/[#\/\?@]/g,qb=/[#\?:]/g,pb=/[#\?]/g,sb=/[#\?@]/g,rb=/#/g;function mb(a){this.a=a||null}p=mb.prototype;p.fa=null;p.Wb=null;
p.add=function(a,b){if(!this.fa&&(this.fa={},this.Wb=0,this.a))for(var c=this.a.split("&"),d=0;d<c.length;d++){var e=c[d].indexOf("="),f=null;if(0<=e){var g=c[d].substring(0,e);f=c[d].substring(e+1)}else g=c[d];g=decodeURIComponent(g.replace(/\+/g," "));f=f||"";this.add(g,decodeURIComponent(f.replace(/\+/g," ")))}this.a=null;(c=this.fa.hasOwnProperty(a)&&this.fa[a])||(this.fa[a]=c=[]);c.push(b);this.Wb++;return this};
p.toString=function(){if(this.a)return this.a;if(!this.fa)return"";var a=[],b;for(b in this.fa)for(var c=encodeURIComponent(b),d=this.fa[b],e=0;e<d.length;e++){var f=c;""!==d[e]&&(f+="="+encodeURIComponent(d[e]));a.push(f)}return this.a=a.join("&")};p.clone=function(){var a=new mb;a.a=this.a;if(this.fa){var b={},c;for(c in this.fa)b[c]=this.fa[c].concat();a.fa=b;a.Wb=this.Wb}return a};function O(a,b,c,d){for(var e=[],f=3;f<arguments.length;++f)e[f-3]=arguments[f];this.severity=a;this.category=b;this.code=c;this.data=e;this.handled=!1}O.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")};M("shaka.util.Error",O);O.Severity={RECOVERABLE:1,CRITICAL:2};O.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10};
O.Code={UNSUPPORTED_SCHEME:1E3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,INVALID_TEXT_HEADER:2E3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3E3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,
EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,
UNABLE_TO_GUESS_MANIFEST_TYPE:4E3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,
HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,
INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6E3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,
SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7E3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CAST_API_UNAVAILABLE:8E3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9E3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,
NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,CS_IMA_SDK_MISSING:1E4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};function ub(a){this.b=a;this.a=null}ub.prototype.P=function(a){var b=this;this.stop();var c=!0,d=null;this.a=function(){window.clearTimeout(d);c=!1};d=window.setTimeout(function(){c&&b.b()},1E3*a);return this};ub.prototype.stop=function(){this.a&&(this.a(),this.a=null)};function P(a){this.b=a;this.a=null}P.prototype.Ed=function(){this.stop();this.b();return this};P.prototype.P=function(a){var b=this;this.stop();this.a=(new ub(function(){b.b()})).P(a);return this};P.prototype.na=function(a){var b=this;this.stop();this.a=(new ub(function(){b.a.P(a);b.b()})).P(a);return this};P.prototype.stop=function(){this.a&&(this.a.stop(),this.a=null)};M("shaka.util.Timer",P);P.prototype.stop=P.prototype.stop;P.prototype.tickEvery=P.prototype.na;P.prototype.tickAfter=P.prototype.P;
P.prototype.tickNow=P.prototype.Ed;function vb(a,b){var c=wb();this.j=null==a.maxAttempts?c.maxAttempts:a.maxAttempts;this.f=null==a.baseDelay?c.baseDelay:a.baseDelay;this.i=null==a.fuzzFactor?c.fuzzFactor:a.fuzzFactor;this.g=null==a.backoffFactor?c.backoffFactor:a.backoffFactor;this.a=0;this.b=this.f;if(this.c=void 0===b?!1:b)this.a=1}
function xb(a){var b,c;return K(function(d){if(1==d.a){if(a.a>=a.j)if(a.c)a.a=1,a.b=a.f;else throw new O(2,7,1010);b=a.a;a.a++;if(0==b)return d["return"]();c=a.b*(1+(2*Math.random()-1)*a.i);return t(d,new Promise(function(e){(new P(e)).P(c/1E3)}),2)}a.b*=a.g;w(d)})}function wb(){return{maxAttempts:2,baseDelay:1E3,backoffFactor:2,fuzzFactor:.5,timeout:0}};function yb(){var a,b,c=new Promise(function(d,e){a=d;b=e});c.resolve=a;c.reject=b;return c}yb.prototype.resolve=function(){};yb.prototype.reject=function(){};function Q(a,b){this.promise=a;this.c=b;this.a=!1}function zb(a){return new Q(Promise.reject(a),function(){return Promise.resolve()})}function Ab(){var a=Promise.reject(new O(2,7,7001));a["catch"](function(){});return new Q(a,function(){return Promise.resolve()})}function Bb(a){return new Q(Promise.resolve(a),function(){return Promise.resolve()})}function Cb(a){return new Q(a,function(){return a["catch"](function(){})})}Q.prototype.abort=function(){this.a=!0;return this.c()};
function Db(a){return new Q(Promise.all(a.map(function(b){return b.promise})),function(){return Promise.all(a.map(function(b){return b.abort()}))})}Q.prototype["finally"]=function(a){this.promise.then(function(){return a(!0)},function(){return a(!1)});return this};
Q.prototype.S=function(a,b){function c(h){return function(k){if(e.a&&h)f.reject(g);else{var l=h?a:b;l?d=Eb(l,k,f):(h?f.resolve:f.reject)(k)}}}function d(){f.reject(g);return e.abort()}var e=this,f=new yb,g=new O(2,7,7001);this.promise.then(c(!0),c(!1));return new Q(f,function(){return d()})};
function Eb(a,b,c){try{var d=a(b);if(d&&d.promise&&d.abort)return c.resolve(d.promise),function(){return d.abort()};c.resolve(d);return function(){return Promise.resolve(d).then(function(){},function(){})}}catch(e){return c.reject(e),function(){return Promise.resolve()}}}M("shaka.util.AbortableOperation",Q);Q.prototype.chain=Q.prototype.S;Q.prototype["finally"]=Q.prototype["finally"];Q.all=Db;Q.prototype.abort=Q.prototype.abort;Q.notAbortable=Cb;Q.completed=Bb;Q.aborted=Ab;Q.failed=zb;function Gb(){}function Hb(a,b){if(!a&&!b)return!0;if(!a||!b||a.byteLength!=b.byteLength)return!1;if(Ib(a)==Ib(b)&&(a.byteOffset||0)==(b.byteOffset||0))return!0;for(var c=R(a),d=R(b),e=r(db(a.byteLength)),f=e.next();!f.done;f=e.next())if(f=f.value,c[f]!=d[f])return!1;return!0}function Ib(a){return a instanceof ArrayBuffer?a:a.buffer}function Jb(a){return a instanceof ArrayBuffer?a:0==a.byteOffset&&a.byteLength==a.buffer.byteLength?a.buffer:(new Uint8Array(a)).buffer}
function R(a,b,c){c=void 0===c?Infinity:c;return Kb(a,void 0===b?0:b,c,Uint8Array)}function Lb(a,b,c){c=void 0===c?Infinity:c;return Kb(a,void 0===b?0:b,c,DataView)}function Kb(a,b,c,d){var e=(a.byteOffset||0)+a.byteLength;b=Math.max(0,Math.min((a.byteOffset||0)+b,e));return new d(Ib(a),b,Math.min(b+Math.max(c,0),e)-b)}M("shaka.util.BufferUtils",Gb);Gb.toDataView=Lb;Gb.toUint8=R;Gb.toArrayBuffer=Jb;Gb.equal=Hb;function Mb(a,b){b=void 0===b?{}:b;for(var c in b)Object.defineProperty(this,c,{value:b[c],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1;this.timeStamp=window.performance&&window.performance.now?window.performance.now():Date.now();this.type=a;this.isTrusted=!1;this.target=this.currentTarget=null;this.a=!1}Mb.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)};Mb.prototype.stopImmediatePropagation=function(){this.a=!0};
Mb.prototype.stopPropagation=function(){};function Nb(){this.a={}}Nb.prototype.push=function(a,b){this.a.hasOwnProperty(a)?this.a[a].push(b):this.a[a]=[b]};Nb.prototype.get=function(a){return(a=this.a[a])?a.slice():null};Nb.prototype.remove=function(a,b){a in this.a&&(this.a[a]=this.a[a].filter(function(c){return c!=b}))};function Ob(a,b){for(var c in a.a)b(c,a.a[c])};function Pb(){this.zc=new Nb;this.dd=this}Pb.prototype.addEventListener=function(a,b){this.zc.push(a,b)};Pb.prototype.removeEventListener=function(a,b){this.zc.remove(a,b)};Pb.prototype.dispatchEvent=function(a){var b=this.zc.get(a.type)||[];b=r(b);for(var c=b.next();!c.done;c=b.next()){c=c.value;a.target=this.dd;a.currentTarget=this.dd;try{c.handleEvent?c.handleEvent(a):c.call(this,a)}catch(d){}if(a.a)break}return a.defaultPrevented};function Qb(a){function b(d){switch(typeof d){case "undefined":case "boolean":case "number":case "string":case "symbol":case "function":return d;default:if(!d||d.buffer&&d.buffer.constructor==ArrayBuffer)return d;if(c.has(d))return null;var e=d.constructor==Array;if(d.constructor!=Object&&!e)return null;c.add(d);var f=e?[]:{},g;for(g in d)f[g]=b(d[g]);e&&(f.length=d.length);return f}}var c=new Set;return b(a)}function Rb(a){var b={},c;for(c in a)b[c]=a[c];return b};function Sb(a,b){return"number"===typeof a&&"number"===typeof b&&isNaN(a)&&isNaN(b)?!0:a===b}function Tb(a,b){var c=a.indexOf(b);-1<c&&a.splice(c,1)}function Ub(a,b,c){c||(c=Sb);if(a.length!=b.length)return!1;b=b.slice();var d={};a=r(a);for(var e=a.next();!e.done;d={oc:d.oc},e=a.next()){d.oc=e.value;e=b.findIndex(function(f){return function(g){return c(f.oc,g)}}(d));if(-1==e)return!1;b[e]=b[b.length-1];b.pop()}return 0==b.length};function Vb(){this.a=[]}function Wb(a,b){a.a.push(b["finally"](function(){Tb(a.a,b)}))}Vb.prototype.destroy=function(){for(var a=[],b=r(this.a),c=b.next();!c.done;c=b.next())c=c.value,c.promise["catch"](function(){}),a.push(c.abort());this.a=[];return Promise.all(a)};function S(a){Pb.call(this);this.f=!1;this.g=new Vb;this.a=new Set;this.b=new Set;this.c=a||null}pa(S,Pb);function Xb(a,b,c){c=c||Yb;var d=Zb[a];if(!d||c>=d.priority)Zb[a]={priority:c,re:b}}p=S.prototype;p.te=function(a){this.a.add(a)};p.Je=function(a){this.a["delete"](a)};p.Od=function(){this.a.clear()};p.ue=function(a){this.b.add(a)};p.Ke=function(a){this.b["delete"](a)};p.Pd=function(){this.b.clear()};
function $b(a,b){return{uris:a,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:b,licenseRequestType:null,sessionId:null}}p.destroy=function(){this.f=!0;this.a.clear();this.b.clear();return this.g.destroy()};
p.request=function(a,b){var c=this,d=new ac;if(this.f){var e=Promise.reject(new O(2,7,7001));e["catch"](function(){});return new bc(e,function(){return Promise.resolve()},d)}b.method=b.method||"GET";b.headers=b.headers||{};b.retryParameters=b.retryParameters?Qb(b.retryParameters):wb();b.uris=Qb(b.uris);e=cc(this,a,b);var f=e.S(function(){return dc(c,a,b,new vb(b.retryParameters,!1),0,null,d)}),g=f.S(function(n){return ec(c,a,n)}),h=Date.now(),k=0;e.promise.then(function(){k=Date.now()-h},function(){});
var l=0;f.promise.then(function(){l=Date.now()},function(){});var m=g.S(function(n){var q=Date.now()-l,u=n.response;u.timeMs+=k;u.timeMs+=q;n.le||!c.c||u.fromCache||a!=fc||c.c(u.timeMs,u.data.byteLength);return u},function(n){n&&(n.severity=2);throw n;});e=new bc(m.promise,function(){return m.abort()},d);Wb(this.g,e);return e};
function cc(a,b,c){var d=Bb(void 0),e={};a=r(a.a);for(var f=a.next();!f.done;e={rc:e.rc},f=a.next())e.rc=f.value,d=d.S(function(g){return function(){c.body&&(c.body=Jb(c.body));return g.rc(b,c)}}(e));return d.S(void 0,function(g){if(g instanceof O&&7001==g.code)throw g;throw new O(2,1,1006,g);})}
function dc(a,b,c,d,e,f,g){var h=new hb(c.uris[e]),k=h.ra,l=!1;k||(k=location.protocol,k=k.slice(0,-1),ib(h,k),c.uris[e]=h.toString());k=k.toLowerCase();var m=(k=Zb[k])?k.re:null;if(!m)return zb(new O(2,1,1E3,h));var n;return Cb(xb(d)).S(function(){if(a.f)return Ab();n=Date.now();return m(c.uris[e],c,b,function(q,u,v){a.c&&b==fc&&(a.c(q,u),l=!0,g.a=v)})}).S(function(q){void 0==q.timeMs&&(q.timeMs=Date.now()-n);return{response:q,le:l}},function(q){if(a.f)return Ab();if(q instanceof O){if(7001==q.code)throw q;
if(1010==q.code)throw f;if(1==q.severity){var u=new Mb("retry",{error:q});a.dispatchEvent(u);e=(e+1)%c.uris.length;return dc(a,b,c,d,e,q,g)}}throw q;})}
function ec(a,b,c){var d=Bb(void 0),e={};a=r(a.b);for(var f=a.next();!f.done;e={sc:e.sc},f=a.next())e.sc=f.value,d=d.S(function(g){return function(){var h=c.response;h.data&&(h.data=Jb(h.data));return g.sc(b,h)}}(e));return d.S(function(){return c},function(g){var h=2;if(g instanceof O){if(7001==g.code)throw g;h=g.severity}throw new O(h,1,1007,g);})}M("shaka.net.NetworkingEngine",S);S.prototype.request=S.prototype.request;S.prototype.destroy=S.prototype.destroy;S.makeRequest=$b;
S.defaultRetryParameters=function(){return wb()};S.prototype.clearAllResponseFilters=S.prototype.Pd;S.prototype.unregisterResponseFilter=S.prototype.Ke;S.prototype.registerResponseFilter=S.prototype.ue;S.prototype.clearAllRequestFilters=S.prototype.Od;S.prototype.unregisterRequestFilter=S.prototype.Je;S.prototype.registerRequestFilter=S.prototype.te;S.unregisterScheme=function(a){delete Zb[a]};S.registerScheme=Xb;function ac(){this.a=0}S.NumBytesRemainingClass=ac;
function bc(a,b,c){Q.call(this,a,b);this.b=c}pa(bc,Q);S.PendingRequest=bc;var fc=1;S.RequestType={MANIFEST:0,SEGMENT:fc,LICENSE:2,APP:3,TIMING:4};var Yb=3;S.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Yb};var Zb={};function gc(a){this.a=!1;this.b=new yb;this.c=a}gc.prototype.destroy=function(){var a=this;if(this.a)return this.b;this.a=!0;return this.c().then(function(){a.b.resolve()},function(){a.b.resolve()})};function hc(a,b){if(a.a){if(b instanceof O&&7003==b.code)throw b;throw new O(2,7,7003,b);}};function ic(){this.a=new Nb}p=ic.prototype;p.release=function(){this.Gb();this.a=null};p.D=function(a,b,c,d){this.a&&(a=new jc(a,b,c,d),this.a.push(b,a))};p.la=function(a,b,c,d){function e(g){f.oa(a,b,e);c(g)}var f=this;this.D(a,b,e,d)};p.oa=function(a,b,c){if(this.a){var d=this.a.get(b)||[];d=r(d);for(var e=d.next();!e.done;e=d.next())e=e.value,e.target!=a||c!=e.listener&&c||(e.oa(),this.a.remove(b,e))}};
p.Gb=function(){if(this.a){var a=this.a,b=[],c;for(c in a.a)b.push.apply(b,ia(a.a[c]));a=r(b);for(b=a.next();!b.done;b=a.next())b.value.oa();this.a.a={}}};M("shaka.util.EventManager",ic);ic.prototype.removeAll=ic.prototype.Gb;ic.prototype.unlisten=ic.prototype.oa;ic.prototype.listenOnce=ic.prototype.la;ic.prototype.listen=ic.prototype.D;ic.prototype.release=ic.prototype.release;function jc(a,b,c,d){this.target=a;this.type=b;this.listener=c;this.a=kc(a,d);this.target.addEventListener(b,c,this.a)}
jc.prototype.oa=function(){this.target.removeEventListener(this.type,this.listener,this.a);this.listener=this.target=null;this.a=!1};function kc(a,b){if(void 0==b)return!1;if("boolean"==typeof b)return b;var c=new Set(["passive","capture"]);Object.keys(b).filter(function(d){return!c.has(d)});return lc(a)?b:b.capture||!1}
function lc(a){var b=mc;if(void 0==b){b=!1;try{var c={},d={get:function(){b=!0;return!1}};Object.defineProperty(c,"passive",d);Object.defineProperty(c,"capture",d);d=function(){};a.addEventListener("test",d,c);a.removeEventListener("test",d,c)}catch(e){b=!1}mc=b}return b||!1}var mc=void 0;function nc(a){this.b=a;this.a=void 0}nc.prototype.value=function(){void 0==this.a&&(this.a=this.b());return this.a};function oc(){}function pc(a){if(!a)return"";a=R(a);239==a[0]&&187==a[1]&&191==a[2]&&(a=a.subarray(3));a=qc(a);a=escape(a);try{return decodeURIComponent(a)}catch(b){throw new O(2,2,2004);}}function rc(a,b,c){if(!a)return"";if(!c&&0!=a.byteLength%2)throw new O(2,2,2004);var d=Math.floor(a.byteLength/2);c=new Uint16Array(d);a=Lb(a);d=r(db(d));for(var e=d.next();!e.done;e=d.next())e=e.value,c[e]=a.getUint16(2*e,b);return qc(c)}
function sc(a){function b(d){return c.byteLength<=d||32<=c[d]&&126>=c[d]}if(!a)return"";var c=R(a);if(239==c[0]&&187==c[1]&&191==c[2])return pc(c);if(254==c[0]&&255==c[1])return rc(c.subarray(2),!1);if(255==c[0]&&254==c[1])return rc(c.subarray(2),!0);if(0==c[0]&&0==c[2])return rc(a,!1);if(0==c[1]&&0==c[3])return rc(a,!0);if(b(0)&&b(1)&&b(2)&&b(3))return pc(a);throw new O(2,2,2003);}
function tc(a){a=encodeURIComponent(a);var b=unescape(a);a=new Uint8Array(b.length);b=r(fb(b));for(var c=b.next();!c.done;c=b.next())c=c.value,a[c.V]=c.item.charCodeAt(0);return Jb(a)}function uc(a,b){for(var c=new ArrayBuffer(2*a.length),d=new DataView(c),e=r(fb(a)),f=e.next();!f.done;f=e.next())f=f.value,d.setUint16(2*f.V,f.item.charCodeAt(0),b);return c}function qc(a){return vc.value()(a)}M("shaka.util.StringUtils",oc);oc.resetFromCharCode=function(){vc.a=void 0};oc.toUTF16=uc;oc.toUTF8=tc;
oc.fromBytesAutoDetect=sc;oc.fromUTF16=rc;oc.fromUTF8=pc;var vc=new nc(function(){function a(c){try{var d=new Uint8Array(c);return 0<String.fromCharCode.apply(null,d).length}catch(e){return!1}}for(var b={Ha:65536};0<b.Ha;b={Ha:b.Ha},b.Ha/=2)if(a(b.Ha))return function(c){return function(d){for(var e="",f=0;f<d.length;f+=c.Ha)e+=String.fromCharCode.apply(null,d.subarray(f,f+c.Ha));return e}}(b);return null});function wc(){}function xc(a){a=sc(a);return(new hb(a)).qa}function yc(a,b,c){function d(h){Lb(f).setUint32(g,h.byteLength,!0);g+=4;f.set(R(h),g);g+=h.byteLength}if(!c||!c.byteLength)throw new O(2,6,6015);var e;"string"==typeof b?e=uc(b,!0):e=b;a=sc(a);a=uc(a,!0);var f=new Uint8Array(12+a.byteLength+e.byteLength+c.byteLength),g=0;d(a);d(e);d(c);return f}M("shaka.util.FairPlayUtils",wc);wc.initDataTransform=yc;wc.defaultGetContentId=xc;function zc(a,b){this.a=a;this.b=b}zc.prototype.toString=function(){return"v"+this.a+"."+this.b};function Ac(a,b){var c=new zc(4,0),d=Bc,e=d.a,f=c.b-e.b;(0<(c.a-e.a||f)?d.c:d.b)(d.a,c,a,b)}function Cc(a,b,c,d){Va([c,"has been deprecated and will be removed in",b,". We are currently at version",a,". Additional information:",d].join(" "))}function Dc(a,b,c,d){Ua([c,"has been deprecated and has been removed in",b,". We are now at version",a,". Additional information:",d].join(""))}var Bc=null;function Ec(a,b){return a.concat(b)}function Fc(){}function Gc(a){return null!=a}function Hc(a){var b=Object.create(a.prototype||Object.prototype);a=a.call(b);a||(Ac("Factories requiring new","Factories should be plain functions"),a=b);return a};function Ic(a,b){if(0==b.length)return a;var c=b.map(function(d){return new hb(d)});return a.map(function(d){return new hb(d)}).map(function(d){return c.map(function(e){return d.resolve(e)})}).reduce(Ec,[]).map(function(d){return d.toString()})}function Jc(a,b){return{keySystem:a,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:b||[],keyIds:new Set}}
var Kc={Aa:"video",bb:"audio",$:"text",Pe:"image",Ne:"application"};function Lc(a){for(var b=new Map,c=r(Object.keys(a)),d=c.next();!d.done;d=c.next())d=d.value,b.set(d,a[d]);return b}function Mc(a){var b={};a.forEach(function(c,d){b[d]=c});return b}function Nc(a,b){if(a||b){if(a&&!b||b&&!a)return!1}else return!0;if(a.size!=b.size)return!1;for(var c=r(a),d=c.next();!d.done;d=c.next()){var e=r(d.value);d=e.next().value;e=e.next().value;if(!b.has(d))return!1;d=b.get(d);if(d!=e||void 0==d)return!1}return!0};function Oc(a,b){var c=a;b&&(c+='; codecs="'+b+'"');return c}function Pc(a){var b=[a.mimeType];Qc.forEach(function(c,d){var e=a[d];e&&b.push(c+'="'+e+'"')});return b.join(";")}function Rc(a){a=a.split(".");var b=a[0];a.pop();return[b,a.join(".")]}var Qc=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function Sc(){return window.MediaSource&&MediaSource.isTypeSupported?!0:!1}function Tc(a){return""!=Uc().canPlayType(a)}function Vc(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Wc("Tizen")}function Xc(){if(!Vc())return null;var a=navigator.userAgent.match(/Version\/(\d+)/);return a?parseInt(a[1],10):(a=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(a[1],10):null}function Wc(a){return(navigator.userAgent||"").includes(a)}
function Uc(){if(Yc)return Yc;Zc||(Zc=new P(function(){Yc=null}));(Yc=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Yc=document.createElement("video"));Zc.P(1);return Yc}var Zc=null,Yc=null;function $c(){}function ad(a){a=qc(R(a));return btoa(a)}function bd(a,b){b=void 0==b?!0:b;var c=ad(a).replace(/\+/g,"-").replace(/\//g,"_");return b?c:c.replace(/[=]*$/,"")}function cd(a){var b=window.atob(a.replace(/-/g,"+").replace(/_/g,"/"));a=new Uint8Array(b.length);b=r(fb(b));for(var c=b.next();!c.done;c=b.next())c=c.value,a[c.V]=c.item.charCodeAt(0);return a}
function dd(a){var b=a.length/2,c=new Uint8Array(b);b=r(db(b));for(var d=b.next();!d.done;d=b.next())d=d.value,c[d]=window.parseInt(a.substr(2*d,2),16);return c}function ed(a){var b=R(a);a="";b=r(b);for(var c=b.next();!c.done;c=b.next())c=c.value,c=c.toString(16),1==c.length&&(c="0"+c),a+=c;return a}
function fd(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];var d=0,e=r(b);for(c=e.next();!c.done;c=e.next())d+=c.value.byteLength;d=new Uint8Array(d);e=0;b=r(b);for(c=b.next();!c.done;c=b.next())c=c.value,d.set(R(c),e),e+=c.byteLength;return d}M("shaka.util.Uint8ArrayUtils",$c);$c.concat=fd;$c.toHex=ed;$c.fromHex=dd;$c.fromBase64=cd;$c.toBase64=bd;$c.toStandardBase64=ad;
$c.equal=function(a,b){Ac("shaka.util.Uint8ArrayUtils.equal","Please use shaka.util.BufferUtils.equal instead.");return Hb(a,b)};function gd(a,b){var c=this;b=void 0===b?1:b;this.m=a;this.v=new Set;this.a=this.i=null;this.R=!1;this.I=0;this.c=null;this.b=new ic;this.f=new Map;this.s=[];this.j=new yb;this.h=null;this.g=function(d){c.j.reject(d);a.onError(d)};this.ca=new Map;this.Y=new Map;this.O=new P(function(){return hd(c)});this.A=!1;this.F=[];this.N=!1;this.Z=(new P(function(){id(c)})).na(b);this.j["catch"](function(){});this.B=new gc(function(){return jd(c)})}gd.prototype.destroy=function(){return this.B.destroy()};
function jd(a){return K(function(b){switch(b.a){case 1:return a.b.release(),a.b=null,a.j.reject(),a.Z.stop(),a.Z=null,a.O.stop(),a.O=null,t(b,kd(a),2);case 2:if(!a.a){b.o(3);break}x(b,4);return t(b,a.a.setMediaKeys(null),6);case 6:C(b,5);break;case 4:J(b);case 5:a.a=null;case 3:a.c=null,a.v.clear(),a.i=null,a.s=[],a.h=null,a.g=function(){},a.m=null,w(b)}})}gd.prototype.configure=function(a){this.h=a};function ld(a,b,c){a.s=[];a.A=c;return md(a,b)}
function nd(a,b,c){a.s=c;a.A=0<c.length;return md(a,b)}function od(a,b,c,d,e,f){var g=new Map;e={audioCapabilities:e,videoCapabilities:f,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:b};e.drmInfos=[{keySystem:b,licenseServerUri:c,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:d,initData:null,keyIds:null}];g.set(b,e);return pd(a,g)}
function md(a,b){var c=qd(a);if(c)for(var d=r(b),e=d.next();!e.done;e=d.next())e=e.value,e.video&&e.video.encrypted&&(e.video.drmInfos=[c]),e.audio&&e.audio.encrypted&&(e.audio.drmInfos=[c]);c=b.some(function(g){return g.video&&g.video.drmInfos.length||g.audio&&g.audio.drmInfos.length?!0:!1});c||(d=Lc(a.h.servers),rd(b,d));d=r(b);for(e=d.next();!e.done;e=d.next()){e=e.value;e=r((e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]));for(var f=e.next();!f.done;f=e.next())sd(f.value,Lc(a.h.servers),
Lc(a.h.advanced||{}))}d=td(a,b);if(!d.size)return a.R=!0,Promise.resolve();d=pd(a,d);return c?d:d["catch"](function(){})}
gd.prototype.ub=function(a){var b=this,c,d,e;return K(function(f){if(1==f.a){if(!b.i)return b.b.la(a,"encrypted",function(){b.g(new O(2,6,6010))}),f["return"]();b.a=a;b.b.la(b.a,"play",function(){for(var g=r(b.F),h=g.next();!h.done;h=g.next())ud(b,h.value);b.N=!0;b.F=[]});"webkitCurrentPlaybackTargetIsWireless"in b.a&&b.b.D(b.a,"webkitcurrentplaybacktargetiswirelesschanged",function(){return kd(b)});c=b.a.setMediaKeys(b.i);c=c["catch"](function(g){return Promise.reject(new O(2,6,6003,g.message))});
d=vd(b);return t(f,Promise.all([c,d]),2)}hc(b.B);wd(b);b.c.initData.length||b.s.length||(e=function(g){return xd(b,g.initDataType,R(g.initData))},b.b.D(b.a,"encrypted",e));w(f)})};function vd(a){var b;return K(function(c){if(1==c.a){if(!(a.i&&a.c&&a.c.serverCertificate&&a.c.serverCertificate.length))return c.o(0);x(c,3);return t(c,a.i.setServerCertificate(a.c.serverCertificate),5)}if(3!=c.a)return C(c,0);b=J(c);throw new O(2,6,6004,b.message);})}
function yd(a,b){var c,d,e;return K(function(f){if(1==f.a)return t(f,zd(a,b),2);c=f.b;if(!c)return f["return"]();d=[];if(e=a.f.get(c))e.xa=new yb,d.push(e.xa);d.push(c.remove());return t(f,Promise.all(d),0)})}function wd(a){for(var b=(a.c?a.c.initData:[])||[],c=r(b),d=c.next();!d.done;d=c.next())d=d.value,xd(a,d.initDataType,d.initData);c=r(a.s);for(d=c.next();!d.done;d=c.next())zd(a,d.value);b.length||a.s.length||a.j.resolve();return a.j}
function xd(a,b,c){var d=a.f.values();d=r(d);for(var e=d.next();!e.done;e=d.next())if(Hb(c,e.value.initData)&&!Wc("Tizen 2"))return;Ad(a,b,c)}function Bd(a){return a?a.keySystem:""}function Cd(a,b){return Wc("Edge/")?!0:a.v.has(b.toLowerCase())}function Dd(a){a=a.f.keys();a=ab(a,function(b){return b.sessionId});return Array.from(a)}gd.prototype.yb=function(){var a=Infinity,b=this.f.keys();b=r(b);for(var c=b.next();!c.done;c=b.next())c=c.value,isNaN(c.expiration)||(a=Math.min(a,c.expiration));return a};
function td(a,b){for(var c=new Set,d=r(b),e=d.next();!e.done;e=d.next()){e=e.value;var f=r((e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]));for(e=f.next();!e.done;e=f.next())c.add(e.value)}d=r(c);for(e=d.next();!e.done;e=d.next())sd(e.value,Lc(a.h.servers),Lc(a.h.advanced||{}));f=a.A?"required":"optional";var g=a.A?["persistent-license"]:["temporary"];d=new Map;c=r(c);for(e=c.next();!e.done;e=c.next())e=e.value,d.set(e.keySystem,{audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",
persistentState:f,sessionTypes:g,label:e.keySystem,drmInfos:[]});c=r(b);for(e=c.next();!e.done;e=c.next())for(e=e.value,f=r([e.audio,e.video]),e=f.next();!e.done;e=f.next())if(g=e.value){var h=Oc(g.mimeType,g.codecs),k=r(g.drmInfos);for(e=k.next();!e.done;e=k.next()){var l=e.value;e=d.get(l.keySystem);e.drmInfos.push(l);l.distinctiveIdentifierRequired&&(e.distinctiveIdentifier="required");l.persistentStateRequired&&(e.persistentState="required");l={robustness:("audio"==g.type?l.audioRobustness:l.videoRobustness)||
"",contentType:h};"audio"==g.type?e.audioCapabilities.push(l):e.videoCapabilities.push(l)}}return d}
function pd(a,b){var c,d,e,f,g,h,k,l,m,n,q,u,v,y,z,A,D,B,E,H,G,F;return K(function(I){switch(I.a){case 1:if(1==b.size&&b.has(""))throw new O(2,6,6E3);c=r(b.values());for(d=c.next();!d.done;d=c.next())e=d.value,0==e.audioCapabilities.length&&delete e.audioCapabilities,0==e.videoCapabilities.length&&delete e.videoCapabilities;g=r([!0,!1]);h=g.next();case 2:if(h.done){I.o(4);break}k=h.value;l=r(b.keys());m=l.next();case 5:if(m.done){I.o(7);break}n=m.value;q=b.get(n);u=q.drmInfos.some(function(L){return!!L.licenseServerUri});
if(u!=k){I.o(6);break}x(I,8);return t(I,navigator.requestMediaKeySystemAccess(n,[q]),10);case 10:f=I.b;I.o(7);break;case 8:J(I);case 9:hc(a.B);case 6:m=l.next();I.o(5);break;case 7:if(f){I.o(4);break}h=g.next();I.o(2);break;case 4:if(!f)throw new O(2,6,6001);hc(a.B);x(I,11);a.v.clear();v=f.getConfiguration();y=v.audioCapabilities||[];z=v.videoCapabilities||[];A=r(y);for(D=A.next();!D.done;D=A.next())B=D.value,a.v.add(B.contentType.toLowerCase());E=r(z);for(D=E.next();!D.done;D=E.next())H=D.value,
a.v.add(H.contentType.toLowerCase());a.c=Ed(f.keySystem,b.get(f.keySystem));if(!a.c.licenseServerUri)throw new O(2,6,6012,a.c.keySystem);return t(I,f.createMediaKeys(),13);case 13:G=I.b;hc(a.B);a.i=G;a.R=!0;C(I,0);break;case 11:F=J(I);hc(a.B,F);a.c=null;a.v.clear();if(F instanceof O)throw F;throw new O(2,6,6002,F.message);}})}
function qd(a){a=Lc(a.h.clearKeys);if(0==a.size)return null;var b=[],c=[];a.forEach(function(e,f){var g=dd(f),h=dd(e);g={kty:"oct",kid:bd(g,!1),k:bd(h,!1)};b.push(g);c.push(g.kid)});a=JSON.stringify({keys:b});var d=JSON.stringify({kids:c});d=[{initData:R(tc(d)),initDataType:"keyids"}];return{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+window.btoa(a),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,
initData:d,keyIds:new Set(c)}}
function zd(a,b){var c,d,e,f,g;return K(function(h){switch(h.a){case 1:try{c=a.i.createSession("persistent-license")}catch(k){return d=new O(2,6,6005,k.message),a.g(d),h["return"](Promise.reject(d))}a.b.D(c,"message",function(k){a.a&&a.h.delayLicenseRequestUntilPlayed&&a.a.paused&&!a.N?a.F.push(k):ud(a,k)});a.b.D(c,"keystatuseschange",function(k){return Fd(a,k)});e={initData:null,loaded:!1,Pc:Infinity,xa:null};a.f.set(c,e);x(h,2);return t(h,c.load(b),4);case 4:f=h.b;hc(a.B);if(!f)return a.f["delete"](c),
a.g(new O(2,6,6013)),h["return"](Promise.resolve());e.loaded=!0;Gd(a)&&a.j.resolve();return h["return"](c);case 2:g=J(h),hc(a.B,g),a.f["delete"](c),a.g(new O(2,6,6005,g.message));case 3:return h["return"](Promise.resolve())}})}
function Ad(a,b,c){try{var d=a.A?a.i.createSession("persistent-license"):a.i.createSession()}catch(e){a.g(new O(2,6,6005,e.message));return}a.b.D(d,"message",function(e){a.a&&a.h.delayLicenseRequestUntilPlayed&&a.a.paused&&!a.N?a.F.push(e):ud(a,e)});a.b.D(d,"keystatuseschange",function(e){return Fd(a,e)});a.f.set(d,{initData:c,loaded:!1,Pc:Infinity,xa:null});try{c=a.h.initDataTransform(c,b,a.c)}catch(e){b=e;e instanceof O||(b=new O(2,6,6016,e));a.g(b);return}a.h.logLicenseExchange&&bd(c);d.generateRequest(b,
c)["catch"](function(e){if(!a.B.a){a.f["delete"](d);var f=e.errorCode;if(f&&f.systemCode){var g=f.systemCode;0>g&&(g+=Math.pow(2,32));g="0x"+g.toString(16)}a.g(new O(2,6,6006,e.message,e,g))}})}function Hd(a,b,c){"skd"==b&&(b=c.serverCertificate,c=xc(a),a=yc(a,c,b));return a}
function ud(a,b){var c,d,e,f,g,h,k,l,m,n,q,u,v,y;K(function(z){switch(z.a){case 1:return c=b.target,a.h.logLicenseExchange&&bd(b.message),d=a.f.get(c),e=a.c.licenseServerUri,f=a.h.advanced[a.c.keySystem],"individualization-request"==b.messageType&&f&&f.individualizationServer&&(e=f.individualizationServer),g=$b([e],a.h.retryParameters),g.body=b.message,g.method="POST",g.licenseRequestType=b.messageType,g.sessionId=c.sessionId,"com.microsoft.playready"!=a.c.keySystem&&"com.chromecast.playready"!=a.c.keySystem||
Id(g),h=Date.now(),x(z,2),l=a.m.ib.request(2,g),t(z,l.promise,4);case 4:k=z.b;C(z,3);break;case 2:return m=J(z),n=new O(2,6,6007,m),a.g(n),d&&d.xa&&d.xa.reject(n),z["return"]();case 3:if(a.B.a)return z["return"]();a.I+=(Date.now()-h)/1E3;a.h.logLicenseExchange&&bd(k.data);x(z,5);return t(z,c.update(k.data),7);case 7:C(z,6);break;case 5:return q=J(z),u=new O(2,6,6008,q.message),a.g(u),d&&d.xa&&d.xa.reject(u),z["return"]();case 6:v=new Mb("drmsessionupdate"),a.m.onEvent(v),d&&(d.xa&&d.xa.resolve(),
y=new P(function(){d.loaded=!0;Gd(a)&&a.j.resolve()}),y.P(Jd)),w(z)}})}
function Id(a){var b=rc(a.body,!0,!0);if(b.includes("PlayReadyKeyMessage")){b=(new DOMParser).parseFromString(b,"application/xml");for(var c=r(b.getElementsByTagName("HttpHeader")),d=c.next();!d.done;d=c.next())d=d.value,a.headers[d.getElementsByTagName("name")[0].textContent]=d.getElementsByTagName("value")[0].textContent;a.body=cd(b.getElementsByTagName("Challenge")[0].textContent)}else a.headers["Content-Type"]="text/xml; charset=utf-8"}
function Fd(a,b){var c=b.target,d=a.f.get(c),e=!1;c.keyStatuses.forEach(function(g,h){if("string"==typeof h){var k=h;h=g;g=k}if("com.microsoft.playready"==a.c.keySystem&&16==h.byteLength&&(Wc("Trident/")||Wc("Edge/"))){k=Lb(h);var l=k.getUint32(0,!0),m=k.getUint16(4,!0),n=k.getUint16(6,!0);k.setUint32(0,l,!1);k.setUint16(4,m,!1);k.setUint16(6,n,!1)}"com.microsoft.playready"==a.c.keySystem&&"status-pending"==g&&(g="usable");"status-pending"!=g&&(d.loaded=!0);"expired"==g&&(e=!0);k=ed(h);a.ca.set(k,
g)});var f=c.expiration-Date.now();(0>f||e&&1E3>f)&&d&&!d.xa&&(a.f["delete"](c),c.close()["catch"](function(){}));Gd(a)&&(a.j.resolve(),a.O.P(Kd))}function hd(a){var b=a.ca,c=a.Y;c.clear();b.forEach(function(d,e){return c.set(e,d)});b=Array.from(c.values());b.length&&b.every(function(d){return"expired"==d})&&a.g(new O(2,6,6014));a.m.cc(Mc(c))}
function Ld(){var a,b,c,d,e,f,g,h;return K(function(k){return 1==k.a?(a="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),b=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],c={videoCapabilities:b},d={videoCapabilities:b,persistentState:"required",sessionTypes:["persistent-license"]},e=[d,c],f=new Map,g=function(l){var m,n,q;return K(function(u){switch(u.a){case 1:return x(u,
2),t(u,navigator.requestMediaKeySystemAccess(l,e),4);case 4:return m=u.b,q=(n=m.getConfiguration().sessionTypes)?n.includes("persistent-license"):!1,Wc("Tizen 3")&&(q=!1),f.set(l,{persistentState:q}),t(u,m.createMediaKeys(),5);case 5:C(u,0);break;case 2:J(u),f.set(l,null),w(u)}})},h=a.map(function(l){return g(l)}),t(k,Promise.all(h),2)):k["return"](Mc(f))})}
function Md(a){var b;return K(function(c){if(1==c.a)return b=new Promise(function(d,e){(new P(e)).P(Nd)}),x(c,2),t(c,Promise.race([Promise.all([a.close(),a.closed]),b]),4);if(2!=c.a)return C(c,0);J(c);w(c)})}function kd(a){var b;return K(function(c){b=Array.from(a.f.keys());a.f.clear();return t(c,Promise.all(b.map(function(d){return K(function(e){if(1==e.a)return x(e,2),t(e,Md(d),4);if(2!=e.a)return C(e,0);J(e);w(e)})})),0)})}
function Od(a,b){var c=b.audio,d=b.video;if(c&&c.encrypted&&!Cd(a,Oc(c.mimeType,c.codecs))||d&&d.encrypted&&!Cd(a,Oc(d.mimeType,d.codecs)))return!1;var e=Bd(a.c);c=(d?d.drmInfos:[]).concat(c?c.drmInfos:[]);return 0==c.length||c.some(function(f){return f.keySystem==e})}
function Pd(a,b){if(!a.length)return b;if(!b.length)return a;for(var c=[],d=r(a),e=d.next();!e.done;e=d.next()){e=e.value;for(var f=r(b),g=f.next();!g.done;g=f.next())if(g=g.value,e.keySystem==g.keySystem){f=[];f=f.concat(e.initData||[]);f=f.concat(g.initData||[]);var h=e.keyIds&&g.keyIds?new Set(ia(e.keyIds).concat(ia(g.keyIds))):e.keyIds||g.keyIds;c.push({keySystem:e.keySystem,licenseServerUri:e.licenseServerUri||g.licenseServerUri,distinctiveIdentifierRequired:e.distinctiveIdentifierRequired||
g.distinctiveIdentifierRequired,persistentStateRequired:e.persistentStateRequired||g.persistentStateRequired,videoRobustness:e.videoRobustness||g.videoRobustness,audioRobustness:e.audioRobustness||g.audioRobustness,serverCertificate:e.serverCertificate||g.serverCertificate,initData:f,keyIds:h});break}}return c}function id(a){a.f.forEach(function(b,c){var d=b.Pc,e=c.expiration;isNaN(e)&&(e=Infinity);e!=d&&(a.m.onExpirationUpdated(c.sessionId,e),b.Pc=e)})}
function Gd(a){a=a.f.values();return bb(a,function(b){return b.loaded})}function rd(a,b){var c=[];b.forEach(function(f,g){c.push({keySystem:g,licenseServerUri:f,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:new Set})});for(var d=r(a),e=d.next();!e.done;e=d.next())e=e.value,e.video&&e.video.encrypted&&(e.video.drmInfos=c),e.audio&&e.audio.encrypted&&(e.audio.drmInfos=c)}
function Ed(a,b){var c=[],d=[],e=[],f=new Set;Qd(b.drmInfos,c,d,e,f);return{keySystem:a,licenseServerUri:c[0],distinctiveIdentifierRequired:"required"==b.distinctiveIdentifier,persistentStateRequired:"required"==b.persistentState,audioRobustness:(b.audioCapabilities?b.audioCapabilities[0].robustness:"")||"",videoRobustness:(b.videoCapabilities?b.videoCapabilities[0].robustness:"")||"",serverCertificate:d[0],initData:e,keyIds:f}}
function Qd(a,b,c,d,e){var f={};a=r(a);for(var g=a.next();!g.done;f={ja:f.ja},g=a.next()){f.ja=g.value;b.includes(f.ja.licenseServerUri)||b.push(f.ja.licenseServerUri);f.ja.serverCertificate&&(c.some(function(l){return function(m){return Hb(m,l.ja.serverCertificate)}}(f))||c.push(f.ja.serverCertificate));if(f.ja.initData){g={};for(var h=r(f.ja.initData),k=h.next();!k.done;g={Lb:g.Lb},k=h.next())g.Lb=k.value,d.some(function(l){return function(m){var n=l.Lb;return m.keyId&&m.keyId==n.keyId?!0:m.initDataType==
n.initDataType&&Hb(m.initData,n.initData)}}(g))||d.push(g.Lb)}if(f.ja.keyIds)for(g=r(f.ja.keyIds),h=g.next();!h.done;h=g.next())e.add(h.value)}}
function sd(a,b,c){if(a.keySystem&&("org.w3.clearkey"!=a.keySystem||!a.licenseServerUri)){b.size&&(b=b.get(a.keySystem)||"",a.licenseServerUri=b);a.keyIds||(a.keyIds=new Set);if(c=c.get(a.keySystem))a.distinctiveIdentifierRequired||(a.distinctiveIdentifierRequired=c.distinctiveIdentifierRequired),a.persistentStateRequired||(a.persistentStateRequired=c.persistentStateRequired),a.videoRobustness||(a.videoRobustness=c.videoRobustness),a.audioRobustness||(a.audioRobustness=c.audioRobustness),a.serverCertificate||
(a.serverCertificate=c.serverCertificate);window.cast&&window.cast.__platform__&&"com.microsoft.playready"==a.keySystem&&(a.keySystem="com.chromecast.playready")}}var Nd=1,Jd=5,Kd=.5,Rd=new nc(function(){return Jb(new Uint8Array([0]))});function Sd(){this.a=new muxjs.mp4.CaptionParser;this.g=[];this.f={}}Sd.prototype.init=function(a){var b=muxjs.mp4.probe;a=R(a);this.g=b.videoTrackIds(a);this.f=b.timescale(a);this.a.init()};Sd.prototype.b=function(a,b){var c=R(a);(c=this.a.parse(c,this.g,this.f))&&c.captions&&b(c.captions);this.a.clearParsedCaptions()};Sd.prototype.c=function(){this.a.resetCaptionStream()};function Td(){}Td.prototype.init=function(){};Td.prototype.b=function(){};Td.prototype.c=function(){};function Ud(a){return!a||1==a.length&&1E-6>a.end(0)-a.start(0)?null:a.length?a.end(a.length-1):null}function Vd(a,b,c){c=void 0===c?0:c;return!a||!a.length||1==a.length&&1E-6>a.end(0)-a.start(0)||b>a.end(a.length-1)?!1:b+c>=a.start(0)}function Wd(a,b){if(!a||!a.length||1==a.length&&1E-6>a.end(0)-a.start(0))return 0;for(var c=0,d=r(Xd(a)),e=d.next();!e.done;e=d.next()){var f=e.value;e=f.start;f=f.end;f>b&&(c+=f-Math.max(e,b))}return c}
function Yd(a,b){if(!a||!a.length||1==a.length&&1E-6>a.end(0)-a.start(0))return null;var c=Wc("Edge/")||Wc("Trident/")||Wc("Tizen")||Wc("CrKey")?.5:.1,d=Xd(a).findIndex(function(e,f,g){return e.start>b&&(0==f||g[f-1].end-b<=c)});return 0<=d?d:null}function Xd(a){if(!a)return[];for(var b=[],c=r(db(a.length)),d=c.next();!d.done;d=c.next())d=d.value,b.push({start:a.start(d),end:a.end(d)});return b};function Zd(){var a=this;this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0});this.b=null;this.i=[];this.c=[];this.g=[];this.f=!1;this.a.on("data",function(b){a.c=b.captions;a.g=b.metadata;a.i.push(fd(b.initSegment,b.data))});this.a.on("done",function(){var b={data:fd.apply($c,ia(a.i)),captions:a.c,metadata:a.g};a.b.resolve(b);a.f=!1})}Zd.prototype.destroy=function(){this.a.dispose();this.a=null;return Promise.resolve()};
function $d(a,b){if(!window.muxjs||"mp2t"!=a.toLowerCase().split(";")[0].split("/")[1])return!1;if(b)return MediaSource.isTypeSupported(ae(b,a));var c=ae("audio",a),d=ae("video",a);return MediaSource.isTypeSupported(c)||MediaSource.isTypeSupported(d)}
function ae(a,b){var c=b.replace(/mp2t/i,"mp4");"audio"==a&&(c=c.replace("video","audio"));var d=/avc1\.(66|77|100)\.(\d+)/.exec(c);if(d){var e="avc1.",f=d[1],g=Number(d[2]);e=("66"==f?e+"4200":"77"==f?e+"4d00":e+"6400")+(g>>4).toString(16);e+=(g&15).toString(16);c=c.replace(d[0],e)}return c}function be(a,b){a.f=!0;a.b=new yb;a.i=[];a.c=[];a.g=[];var c=R(b);a.a.push(c);a.a.flush();a.f&&a.b.reject(new O(2,3,3018));return a.b};function ce(a,b,c){this.startTime=a;this.direction=de;this.endTime=b;this.payload=c;this.region=new ee;this.position=null;this.positionAlign=fe;this.size=0;this.textAlign=ge;this.writingMode=he;this.lineInterpretation=ie;this.line=null;this.lineHeight="";this.lineAlign=je;this.displayAlign=ke;this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="";this.fontWeight=le;this.fontStyle=me;this.linePadding=this.letterSpacing=this.fontFamily="";this.opacity=1;this.textDecoration=
[];this.wrapLine=!0;this.id="";this.nestedCues=[];this.spacer=!1;this.cellResolution={columns:32,rows:15}}ce.prototype.clone=function(){var a=new ce(0,0,""),b;for(b in this)a[b]=this[b],a[b]&&a[b].constructor==Array&&(a[b]=a[b].slice());return a};M("shaka.text.Cue",ce);var fe="auto";ce.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:fe};var ge="center",ne={LEFT:"left",RIGHT:"right",CENTER:ge,START:"start",END:"end"};ce.textAlign=ne;
var ke="after",oe={BEFORE:"before",CENTER:"center",AFTER:ke};ce.displayAlign=oe;var de="ltr";ce.direction={HORIZONTAL_LEFT_TO_RIGHT:de,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var he="horizontal-tb";ce.writingMode={HORIZONTAL_TOP_TO_BOTTOM:he,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var ie=0;ce.lineInterpretation={LINE_NUMBER:ie,PERCENTAGE:1};var je="start",pe={CENTER:"center",START:je,END:"end"};ce.lineAlign=pe;var le=400;ce.fontWeight={NORMAL:le,BOLD:700};
var me="normal",qe={NORMAL:me,ITALIC:"italic",OBLIQUE:"oblique"};ce.fontStyle=qe;ce.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function ee(){this.id="";this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0;this.height=this.width=100;this.viewportAnchorUnits=this.widthUnits=this.heightUnits=re;this.scroll=se}M("shaka.text.CueRegion",ee);var re=1;ee.units={PX:0,PERCENTAGE:re,LINES:2};var se="";ee.scrollMode={NONE:se,UP:"up"};function te(a){this.s=null;this.c=a;this.f=this.v=0;this.g=Infinity;this.b=this.a=null;this.j="";this.i=new Map}function ue(a){return ve[a]||window.muxjs&&"application/cea-608"==a?!0:!1}te.prototype.destroy=function(){this.c=this.s=null;this.i.clear();return Promise.resolve()};
function we(a,b,c,d){var e,f,g;return K(function(h){if(1==h.a)return t(h,Promise.resolve(),2);if(!a.s||!a.c)return h["return"]();if(null==c||null==d)return a.s.parseInit(R(b)),h["return"]();e={periodStart:a.v,segmentStart:c,segmentEnd:d};f=a.s.parseMedia(R(b),e);g=f.filter(function(k){return k.startTime>=a.f&&k.startTime<a.g});a.c.append(g);null==a.a&&(a.a=Math.max(c,a.f));a.b=Math.min(d,a.g);w(h)})}
te.prototype.remove=function(a,b){var c=this;return K(function(d){if(1==d.a)return t(d,Promise.resolve(),2);!c.c||!c.c.remove(a,b)||null==c.a||b<=c.a||a>=c.b||(a<=c.a&&b>=c.b?c.a=c.b=null:a<=c.a&&b<c.b?c.a=b:a>c.a&&b>=c.b&&(c.b=a));w(d)})};function xe(a,b,c){a.f=b;a.g=c}function ye(a,b,c){a.j=b;if(b=a.i.get(b))for(var d=r(b.keys()),e=d.next();!e.done;e=d.next())(e=b.get(e.value).filter(function(f){return f.endTime<=c}))&&a.c.append(e)}
function ze(a,b,c,d,e){var f=c+" "+d,g=new Map;b=r(b);for(var h=b.next();!h.done;h=b.next()){var k=h.value;h=k.stream;g.has(h)||g.set(h,new Map);g.get(h).has(f)||g.get(h).set(f,[]);k.startTime+=e;k.endTime+=e;k.startTime>=a.f&&k.startTime<a.g&&(k=new ce(k.startTime,k.endTime,k.text),g.get(h).get(f).push(k),h==a.j&&a.c.append([k]))}e=r(g.keys());for(f=e.next();!f.done;f=e.next())for(f=f.value,a.i.has(f)||a.i.set(f,new Map),b=r(g.get(f).keys()),h=b.next();!h.done;h=b.next())h=h.value,k=g.get(f).get(h),
a.i.get(f).set(h,k);a.a=null==a.a?Math.max(c,a.f):Math.min(a.a,Math.max(c,a.f));a.b=Math.max(a.b,Math.min(d,a.g))}M("shaka.text.TextEngine",te);te.prototype.destroy=te.prototype.destroy;te.unregisterParser=function(a){delete ve[a]};te.registerParser=function(a,b){ve[a]=b};var ve={};function Ae(a,b,c,d){var e=this;this.a=a;this.i=c;this.f={};this.c=null;this.F=d||function(){};this.g={};this.b=new ic;this.s={};this.v=b;this.A=new yb;this.j=Be(this,this.A);this.B=new gc(function(){return Ce(e)})}function Be(a,b){var c=new MediaSource;a.b.la(c,"sourceopen",b.resolve);a.a.src=De(c);return c}function Ee(a){var b=Oc(a.mimeType,a.codecs),c=Pc(a);return ue(b)||MediaSource.isTypeSupported(c)||$d(b,a.type)}p=Ae.prototype;p.destroy=function(){return this.B.destroy()};
function Ce(a){var b,c,d,e,f,g,h,k;return K(function(l){if(1==l.a){b=[];for(c in a.g)for(d=a.g[c],e=d[0],a.g[c]=d.slice(0,1),e&&b.push(e.p["catch"](Fc)),f=r(d.slice(1)),g=f.next();!g.done;g=f.next())h=g.value,h.p.reject(new O(2,7,7003,void 0));a.c&&b.push(a.c.destroy());a.i&&b.push(a.i.destroy());for(k in a.s)b.push(a.s[k].destroy());return t(l,Promise.all(b),2)}a.b&&(a.b.release(),a.b=null);a.a&&(a.a.removeAttribute("src"),a.a.load(),a.a=null);a.j=null;a.c=null;a.i=null;a.f={};a.s={};a.v=null;a.g=
{};w(l)})}
p.init=function(a,b){var c=this,d,e,f,g,h,k,l;return K(function(m){if(1==m.a)return d=Kc,t(m,c.A,2);e={};f=r(a.keys());for(g=f.next();!g.done;e={ia:e.ia},g=f.next())e.ia=g.value,h=a.get(e.ia),k=Oc(h.mimeType,h.codecs),e.ia==d.$?Fe(c,k):(!b&&MediaSource.isTypeSupported(k)||!$d(k,e.ia)||(c.s[e.ia]=new Zd,k=ae(e.ia,k)),l=c.j.addSourceBuffer(k),c.b.D(l,"error",function(n){return function(){c.g[n.ia][0].p.reject(new O(2,3,3014,c.a.error?c.a.error.code:0))}}(e)),c.b.D(l,"updateend",function(n){return function(){return Ge(c,n.ia)}}(e)),
c.f[e.ia]=l,c.g[e.ia]=[]);w(m)})};function Fe(a,b){a.c||(a.c=new te(a.i));"application/cea-608"!=b&&(a.c.s=Hc(ve[b]))}function He(a){return a.j?"ended"==a.j.readyState:!0}function Ie(a,b){if("text"==b)var c=a.c.a;else c=Je(a,b),c=!c||1==c.length&&1E-6>c.end(0)-c.start(0)?null:1==c.length&&0>c.start(0)?0:c.length?c.start(0):null;return c}function Ke(a,b){return"text"==b?a.c.b:Ud(Je(a,b))}function Le(a,b,c){if("text"==b)return a=a.c,null==a.b||a.b<c?0:a.b-Math.max(c,a.a);a=Je(a,b);return Wd(a,c)}
p.Xb=function(){var a={total:Xd(this.a.buffered),audio:Xd(Je(this,"audio")),video:Xd(Je(this,"video")),text:[]};if(this.c){var b=this.c.a,c=this.c.b;null!=b&&null!=c&&a.text.push({start:b,end:c})}return a};function Je(a,b){try{return a.f[b].buffered}catch(c){return null}}
function Me(a,b,c,d,e,f){var g,h,k,l;return K(function(m){if(1==m.a){g=Kc;if(b==g.$)return t(m,we(a.c,c,d,e),0);if(a.s[b])return t(m,be(a.s[b],c),10);f&&window.muxjs&&(a.c||Fe(a,"text/vtt"),null==d&&null==e?a.v.init(c):a.v.b(c,function(n){n.length&&ze(a.c,n,d,e,a.f[g.Aa].timestampOffset)}));return t(m,Ne(a,b,function(){a.f[b].appendBuffer(c)}),0)}h=m.b;a.c||Fe(a,"text/vtt");h.metadata&&(k=a.f[b].timestampOffset,a.F(h.metadata,k,e));h.captions&&h.captions.length&&(l=a.f[g.Aa].timestampOffset,ze(a.c,
h.captions,d,e,l));return t(m,Ne(a,b,function(){a.f[b].appendBuffer(h.data)}),0)})}function Oe(a,b){var c=Ke(a,"video")||0;ye(a.c,b,c)}p.remove=function(a,b,c){var d=this,e;return K(function(f){e=Kc;return a==e.$?t(f,d.c.remove(b,c),0):t(f,Ne(d,a,function(){c<=b?Ge(d,a):d.f[a].remove(b,c)}),0)})};function Pe(a,b){var c;return K(function(d){c=Kc;return b==c.$?a.c?t(d,a.c.remove(0,Infinity),0):d["return"]():t(d,Ne(a,b,function(){var e=a.j.duration;0>=e?Ge(a,b):a.f[b].remove(0,e)}),0)})}
p.flush=function(a){var b=this,c;return K(function(d){c=Kc;return a==c.$?d["return"]():t(d,Ne(b,a,function(){b.a.currentTime-=.001;Ge(b,a)}),0)})};
function Qe(a,b,c,d,e){var f;return K(function(g){f=Kc;return b==f.$?(a.c.v=c,xe(a.c,d,e),g["return"]()):t(g,Promise.all([Ne(a,b,function(){var h=a.f[b].appendWindowStart,k=a.f[b].appendWindowEnd;a.f[b].abort();a.f[b].appendWindowStart=h;a.f[b].appendWindowEnd=k;Ge(a,b)}),Ne(a,b,function(){var h=c;0>h&&(h+=.001);a.f[b].timestampOffset=h;Ge(a,b)}),Ne(a,b,function(){a.f[b].appendWindowStart=0;a.f[b].appendWindowEnd=e;a.f[b].appendWindowStart=d;Ge(a,b)})]),0)})}
p.endOfStream=function(a){var b=this;return K(function(c){return t(c,Re(b,function(){He(b)||(a?b.j.endOfStream(a):b.j.endOfStream())}),0)})};p.wa=function(a){var b=this;return K(function(c){return t(c,Re(b,function(){b.j.duration=a}),0)})};p.getDuration=function(){return this.j.duration};function Ge(a,b){var c=a.g[b][0];c&&(c.p.resolve(),Se(a,b))}function Ne(a,b,c){hc(a.B);c={start:c,p:new yb};a.g[b].push(c);1==a.g[b].length&&Te(a,b);return c.p}
function Re(a,b){var c,d,e,f,g,h;return K(function(k){switch(k.a){case 1:hc(a.B);c=[];d={};for(e in a.f)d.qb=new yb,f={start:function(l){return function(){return l.qb.resolve()}}(d),p:d.qb},a.g[e].push(f),c.push(d.qb),1==a.g[e].length&&f.start(),d={qb:d.qb};x(k,2);return t(k,Promise.all(c),4);case 4:C(k,3);break;case 2:throw g=J(k),g;case 3:try{b()}catch(l){throw new O(2,3,3015,l);}finally{for(h in a.f)Se(a,h)}w(k)}})}function Se(a,b){a.g[b].shift();Te(a,b)}
function Te(a,b){var c=a.g[b][0];if(c)try{c.start()}catch(d){"QuotaExceededError"==d.name?c.p.reject(new O(2,3,3017,b)):c.p.reject(new O(2,3,3015,d)),Se(a,b)}}var De=window.URL.createObjectURL;function Ue(a,b){a=U(a);b=U(b);return a.split("-")[0]==b.split("-")[0]}function Ve(a,b){a=U(a);b=U(b);var c=a.split("-"),d=b.split("-");return c[0]==d[0]&&1==c.length&&2==d.length}function We(a,b){a=U(a);b=U(b);var c=a.split("-"),d=b.split("-");return 2==c.length&&2==d.length&&c[0]==d[0]}function U(a){var b=a.split("-");a=b[0]||"";b=b[1]||"";a=a.toLowerCase();a=Xe.get(a)||a;return(b=b.toUpperCase())?a+"-"+b:a}function Ye(a,b){a=U(a);b=U(b);return b==a?4:Ve(b,a)?3:We(b,a)?2:Ve(a,b)?1:0}
function Ze(a){return a.language?U(a.language):a.audio&&a.audio.language?U(a.audio.language):a.video&&a.video.language?U(a.video.language):"und"}
function $e(a,b){for(var c=U(a),d=new Set,e=r(b),f=e.next();!f.done;f=e.next())d.add(U(f.value));e=r(d);for(f=e.next();!f.done;f=e.next())if(f=f.value,f==c)return f;e=r(d);for(f=e.next();!f.done;f=e.next())if(f=f.value,Ve(f,c))return f;e=r(d);for(f=e.next();!f.done;f=e.next())if(f=f.value,We(f,c))return f;d=r(d);for(f=d.next();!f.done;f=d.next())if(f=f.value,Ve(c,f))return f;return null}
var Xe=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze",
"cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice",
"is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao",
"mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san",
"sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie",
"vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function af(a,b){function c(l){var m="";l.video&&(m=Rc(l.video.codecs)[0]);var n="";l.audio&&(n=Rc(l.audio.codecs)[0]);return m+"-"+n}var d=bf(a.variants,b),e=new Nb;d=r(d);for(var f=d.next();!f.done;f=d.next()){f=f.value;var g=c(f);e.push(g,f)}var h=null,k=Infinity;Ob(e,function(l,m){for(var n=0,q=0,u=r(m),v=u.next();!v.done;v=u.next())n+=v.value.bandwidth||0,++q;n/=q;n<k&&(h=l,k=n)});a.variants=a.variants.filter(function(l){return c(l)==h?!0:!1})}
function cf(a,b,c){function d(f,g,h){return f>=g&&f<=h}var e=a.video;return e&&e.width&&e.height&&(!d(e.width,b.minWidth,Math.min(b.maxWidth,c.width))||!d(e.height,b.minHeight,Math.min(b.maxHeight,c.height))||!d(e.width*e.height,b.minPixels,b.maxPixels))||a&&a.video&&a.video.frameRate&&!d(a.video.frameRate,b.minFrameRate,b.maxFrameRate)||!d(a.bandwidth,b.minBandwidth,b.maxBandwidth)?!1:!0}
function df(a,b,c){c.variants=c.variants.filter(function(d){if(a&&a.R&&!Od(a,d))return!1;var e=d.audio;d=d.video;return e&&!Ee(e)||d&&!Ee(d)||e&&b&&b.audio&&!ef(e,b.audio)||d&&b&&b.video&&!ef(d,b.video)?!1:!0});c.textStreams=c.textStreams.filter(function(d){return ue(Oc(d.mimeType,d.codecs))})}function ef(a,b){return a.mimeType!=b.mimeType||a.codecs.split(".")[0]!=b.codecs.split(".")[0]?!1:!0}
function ff(a){var b=a.audio,c=a.video,d=b?b.codecs:null,e=c?c.codecs:null,f=[];e&&f.push(e);d&&f.push(d);var g=[];c&&g.push(c.mimeType);b&&g.push(b.mimeType);g=g[0]||null;var h=[];b&&h.push(b.kind);c&&h.push(c.kind);h=h[0]||null;var k=new Set;if(b)for(var l=r(b.roles),m=l.next();!m.done;m=l.next())k.add(m.value);if(c)for(l=r(c.roles),m=l.next();!m.done;m=l.next())k.add(m.value);a={id:a.id,active:!1,type:"variant",bandwidth:a.bandwidth,language:a.language,label:null,kind:h,width:null,height:null,
frameRate:null,pixelAspectRatio:null,mimeType:g,codecs:f.join(", "),audioCodec:d,videoCodec:e,primary:a.primary,roles:Array.from(k),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null};c&&(a.videoId=c.id,a.originalVideoId=c.originalId,a.width=c.width||null,a.height=c.height||null,a.frameRate=c.frameRate||null,a.pixelAspectRatio=c.pixelAspectRatio||null,a.videoBandwidth=
c.bandwidth||null);b&&(a.audioId=b.id,a.originalAudioId=b.originalId,a.channelsCount=b.channelsCount,a.audioSamplingRate=b.audioSamplingRate,a.audioBandwidth=b.bandwidth||null,a.label=b.label,a.audioRoles=b.roles);return a}
function gf(a){return{id:a.id,active:!1,type:"text",bandwidth:0,language:a.language,label:a.label,kind:a.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:a.mimeType,codecs:a.codecs||null,audioCodec:null,videoCodec:null,primary:a.primary,roles:a.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:a.originalId}}
function hf(a){a.__shaka_id||(a.__shaka_id=jf++);return a.__shaka_id}function kf(a){var b=lf(a);b.active=a.enabled;b.type="variant";b.originalAudioId=a.id;"main"==a.kind&&(b.primary=!0);a.kind&&(b.roles=[a.kind],b.audioRoles=[a.kind]);return b}
function lf(a){return{id:hf(a),active:!1,type:"",bandwidth:0,language:U(a.language),label:a.label,kind:a.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}}
function mf(a){return a.allowedByApplication&&a.allowedByKeySystem}function nf(a){return a.filter(function(b){return mf(b)})}
function bf(a,b){var c=a.filter(function(g){return g.audio&&g.audio.channelsCount}),d=new Map;c=r(c);for(var e=c.next();!e.done;e=c.next()){e=e.value;var f=e.audio.channelsCount;d.has(f)||d.set(f,[]);d.get(f).push(e)}c=Array.from(d.keys());if(0==c.length)return a;e=c.filter(function(g){return g<=b});return e.length?d.get(Math.max.apply(Math,ia(e))):d.get(Math.min.apply(Math,ia(c)))}
function of(a,b,c){var d=a,e=a.filter(function(h){return h.primary});e.length&&(d=e);var f=d.length?d[0].language:"";d=d.filter(function(h){return h.language==f});if(b){var g=$e(U(b),a.map(function(h){return h.language}));g&&(d=a.filter(function(h){return U(h.language)==g}))}if(c){if(a=pf(d,c),a.length)return a}else if(a=d.filter(function(h){return 0==h.roles.length}),a.length)return a;a=d.map(function(h){return h.roles}).reduce(Ec,[]);return a.length?pf(d,a[0]):d}
function pf(a,b){return a.filter(function(c){return c.roles.includes(b)})}var jf=0;function qf(){this.i=null;this.c=!1;this.a=new Sa;this.b=[];this.g=1;this.j=!1;this.h=this.f=null}p=qf.prototype;p.stop=function(){this.i=null;this.c=!1;this.b=[];this.g=1;this.f=null};p.init=function(a){this.i=a};
p.chooseVariant=function(){var a=rf(this.h.restrictions,this.b),b=this.a.getBandwidthEstimate(this.h.defaultBandwidthEstimate);this.b.length&&!a.length&&(a=rf(null,this.b),a=[a[0]]);var c=a[0]||null;a=r(fb(a));for(var d=a.next();!d.done;d=a.next()){var e=d.value;d=e.item;var f=isNaN(this.g)?1:Math.abs(this.g);e=f*(e.next||{bandwidth:Infinity}).bandwidth/this.h.bandwidthUpgradeTarget;b>=f*d.bandwidth/this.h.bandwidthDowngradeTarget&&b<=e&&(c=d)}this.f=Date.now();return c};
p.enable=function(){this.c=!0};p.disable=function(){this.c=!1};p.segmentDownloaded=function(a,b){var c=this.a;if(!(16E3>b)){var d=8E3*b/a,e=a/1E3;c.a+=b;Qa(c.b,e,d);Qa(c.c,e,d)}if(null!=this.f&&this.c)a:{if(!this.j){if(!(128E3<=this.a.a))break a;this.j=!0}else if(Date.now()-this.f<1E3*this.h.switchInterval)break a;c=this.chooseVariant();this.a.getBandwidthEstimate(this.h.defaultBandwidthEstimate);c&&this.i(c)}};p.getBandwidthEstimate=function(){return this.a.getBandwidthEstimate(this.h.defaultBandwidthEstimate)};
p.setVariants=function(a){this.b=a};p.playbackRateChanged=function(a){this.g=a};p.configure=function(a){this.h=a};function rf(a,b){a&&(b=b.filter(function(c){return cf(c,a,{width:Infinity,height:Infinity})}));return b.sort(function(c,d){return c.bandwidth-d.bandwidth})}M("shaka.abr.SimpleAbrManager",qf);qf.prototype.configure=qf.prototype.configure;qf.prototype.playbackRateChanged=qf.prototype.playbackRateChanged;qf.prototype.setVariants=qf.prototype.setVariants;
qf.prototype.getBandwidthEstimate=qf.prototype.getBandwidthEstimate;qf.prototype.segmentDownloaded=qf.prototype.segmentDownloaded;qf.prototype.disable=qf.prototype.disable;qf.prototype.enable=qf.prototype.enable;qf.prototype.chooseVariant=qf.prototype.chooseVariant;qf.prototype.init=qf.prototype.init;qf.prototype.stop=qf.prototype.stop;function V(a,b){this.M=Lb(a);this.a=b==sf;this.w=0}p=V.prototype;p.sa=function(){return this.w<this.M.byteLength};p.fe=function(){return this.w};p.Xd=function(){return this.M.byteLength};p.ma=function(){try{var a=this.M.getUint8(this.w);this.w+=1;return a}catch(b){throw tf();}};p.Fb=function(){try{var a=this.M.getUint16(this.w,this.a);this.w+=2;return a}catch(b){throw tf();}};p.G=function(){try{var a=this.M.getUint32(this.w,this.a);this.w+=4;return a}catch(b){throw tf();}};
p.xd=function(){try{var a=this.M.getInt32(this.w,this.a);this.w+=4;return a}catch(b){throw tf();}};p.mb=function(){try{if(this.a){var a=this.M.getUint32(this.w,!0);var b=this.M.getUint32(this.w+4,!0)}else b=this.M.getUint32(this.w,!1),a=this.M.getUint32(this.w+4,!1)}catch(c){throw tf();}if(2097151<b)throw new O(2,3,3001);this.w+=8;return b*Math.pow(2,32)+a};p.Va=function(a){if(this.w+a>this.M.byteLength)throw tf();var b=R(this.M,this.w,a);this.w+=a;return b};
p.skip=function(a){if(this.w+a>this.M.byteLength)throw tf();this.w+=a};p.yd=function(a){if(this.w<a)throw tf();this.w-=a};p.seek=function(a){if(0>a||a>this.M.byteLength)throw tf();this.w=a};p.Sc=function(){for(var a=this.w;this.sa()&&0!=this.M.getUint8(this.w);)this.w+=1;a=R(this.M,a,this.w-a);this.w+=1;return pc(a)};function tf(){return new O(2,3,3E3)}M("shaka.util.DataViewReader",V);V.prototype.readTerminatedString=V.prototype.Sc;V.prototype.seek=V.prototype.seek;V.prototype.rewind=V.prototype.yd;
V.prototype.skip=V.prototype.skip;V.prototype.readBytes=V.prototype.Va;V.prototype.readUint64=V.prototype.mb;V.prototype.readInt32=V.prototype.xd;V.prototype.readUint32=V.prototype.G;V.prototype.readUint16=V.prototype.Fb;V.prototype.readUint8=V.prototype.ma;V.prototype.getLength=V.prototype.Xd;V.prototype.getPosition=V.prototype.fe;V.prototype.hasMoreData=V.prototype.sa;var sf=1;V.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:sf};function W(){this.c=[];this.b=[];this.a=!1}p=W.prototype;p.J=function(a,b){var c=uf(a);this.c[c]=vf;this.b[c]=b;return this};p.ea=function(a,b){var c=uf(a);this.c[c]=yf;this.b[c]=b;return this};p.stop=function(){this.a=!0};p.parse=function(a,b){var c=new V(a,0);for(this.a=!1;c.sa()&&!this.a;)this.ec(0,c,b)};
p.ec=function(a,b,c){var d=b.w,e=b.G(),f=b.G();switch(e){case 0:e=b.M.byteLength-d;break;case 1:e=b.mb()}var g=this.b[f];if(g){var h=null,k=null;this.c[f]==yf&&(k=b.G(),h=k>>>24,k&=16777215);f=d+e;c&&f>b.M.byteLength&&(f=b.M.byteLength);f-=b.w;b=0<f?b.Va(f):new Uint8Array(0);b=new V(b,0);g({parser:this,partialOkay:c||!1,version:h,flags:k,reader:b,size:e,start:d+a})}else b.skip(Math.min(d+e-b.w,b.M.byteLength-b.w))};
function zf(a){for(var b=null!=a.flags?12:8;a.reader.sa()&&!a.parser.a;)a.parser.ec(a.start+b,a.reader,a.partialOkay)}function Af(a){var b=null!=a.flags?12:8,c=a.reader.G();c=r(db(c));for(var d=c.next();!d.done&&(a.parser.ec(a.start+b,a.reader,a.partialOkay),!a.parser.a);d=c.next());}function Bf(a){return function(b){a(b.reader.Va(b.reader.M.byteLength-b.reader.w))}}function uf(a){var b=0;a=r(a);for(var c=a.next();!c.done;c=a.next())b=b<<8|c.value.charCodeAt(0);return b}
function Cf(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255)}M("shaka.util.Mp4Parser",W);W.typeToString=Cf;W.allData=Bf;W.sampleDescription=Af;W.children=zf;W.prototype.parseNext=W.prototype.ec;W.prototype.parse=W.prototype.parse;W.prototype.stop=W.prototype.stop;W.prototype.fullBox=W.prototype.ea;W.prototype.box=W.prototype.J;var vf=0,yf=1;function Df(a){var b=this;this.a=[];this.b=[];this.data=[];(new W).J("moov",zf).ea("pssh",function(c){if(!(1<c.version)){var d=R(c.reader.M,-12,c.size);b.data.push(d);b.a.push(ed(c.reader.Va(16)));if(0<c.version){d=c.reader.G();d=r(db(d));for(var e=d.next();!e.done;e=d.next())e=ed(c.reader.Va(16)),b.b.push(e)}}}).parse(a)}
function Ef(a){if(!a)return a;var b=new Df(a);if(1>=b.data.length)return a;a=[];var c={};b=r(b.data);for(var d=b.next();!d.done;c={Kb:c.Kb},d=b.next())c.Kb=d.value,a.some(function(e){return function(f){return Hb(f,e.Kb)}}(c))||a.push(c.Kb);return fd.apply($c,ia(a))};function Ff(a,b){var c=Gf(a,b);return 1!=c.length?null:c[0]}function Hf(a,b,c){a=If(a,b,c);return 1!=a.length?null:a[0]}function Gf(a,b){return Array.from(a.childNodes).filter(function(c){return c instanceof Element&&c.tagName==b})}function If(a,b,c){return Array.from(a.childNodes).filter(function(d){return d instanceof Element&&d.localName==c&&d.namespaceURI==b})}function Jf(a,b,c){return a.hasAttributeNS(b,c)?a.getAttributeNS(b,c):null}
function Kf(a){return Array.from(a.childNodes).every(function(b){return b.nodeType==Node.TEXT_NODE||b.nodeType==Node.CDATA_SECTION_NODE})?a.textContent.trim():null}function Lf(a,b,c,d){d=void 0===d?null:d;var e=null;a=a.getAttribute(b);null!=a&&(e=c(a));return null==e?d:e}function Mf(a){if(!a)return null;/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(a)&&(a+="Z");a=Date.parse(a);return isNaN(a)?null:Math.floor(a/1E3)}
function Nf(a){if(!a)return null;a=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(a);if(!a)return null;a=31536E3*Number(a[1]||null)+2592E3*Number(a[2]||null)+86400*Number(a[3]||null)+3600*Number(a[4]||null)+60*Number(a[5]||null)+Number(a[6]||null);return isFinite(a)?a:null}function Of(a){var b=/([0-9]+)-([0-9]+)/.exec(a);if(!b)return null;a=Number(b[1]);if(!isFinite(a))return null;b=Number(b[2]);return isFinite(b)?{start:a,end:b}:null}
function Pf(a){a=Number(a);return 0===a%1?a:null}function Qf(a){a=Number(a);return 0===a%1&&0<a?a:null}function Rf(a){a=Number(a);return 0===a%1&&0<=a?a:null}function Sf(a){var b;a=(b=a.match(/^(\d+)\/(\d+)$/))?Number(b[1])/Number(b[2]):Number(a);return isNaN(a)?null:a}function Tf(a,b){var c=new DOMParser,d=null,e=null;try{e=c.parseFromString(a,"text/xml")}catch(f){}e&&e.documentElement.tagName==b&&(d=e.documentElement);return d&&0<d.getElementsByTagName("parsererror").length?null:d}
function Uf(a,b){try{var c=pc(a);return Tf(c,b)}catch(d){return null}};function Vf(a,b){var c=Wf(a),d=null,e=[],f=[],g=new Set(c.map(function(k){return k.keyId}));g["delete"](null);if(1<g.size)throw new O(2,4,4010);b||(f=c.filter(function(k){return"urn:mpeg:dash:mp4protection:2011"==k.zd?(d=k.init||d,!1):!0}),f.length&&(e=Xf(d,f),0==e.length&&(e=[Jc("",d)])));if(c.length&&(b||!f.length))for(e=[],c=r(Yf.values()),f=c.next();!f.done;f=c.next())f=f.value,"org.w3.clearkey"!=f&&e.push(Jc(f,d));if(g=Array.from(g)[0]||null)for(c=r(e),f=c.next();!f.done;f=c.next()){f=r(f.value.initData);
for(var h=f.next();!h.done;h=f.next())h.value.keyId=g}return{hd:g,Qe:d,drmInfos:e,ld:!0}}function Zf(a,b,c){var d=Vf(a,c);if(b.ld){a=1==b.drmInfos.length&&!b.drmInfos[0].keySystem;c=0==d.drmInfos.length;if(0==b.drmInfos.length||a&&!c)b.drmInfos=d.drmInfos;b.ld=!1}else if(0<d.drmInfos.length&&(b.drmInfos=b.drmInfos.filter(function(e){return d.drmInfos.some(function(f){return f.keySystem==e.keySystem})}),0==b.drmInfos.length))throw new O(2,4,4008);return d.hd||b.hd}
function $f(a){var b=0,c=Lb(a),d=c.getUint32(b,!0);if(d!=a.byteLength)return[];a:{a=b+6;for(b=[];a<c.byteLength-1;){d=c.getUint16(a,!0);a+=2;var e=c.getUint16(a,!0);a+=2;if(0!=(e&1)||e+a>c.byteLength){c=[];break a}var f=R(c,a,e);b.push({type:d,value:f});a+=e}c=b}return c}
function ag(a){a=r(a.getElementsByTagName("DATA"));for(var b=a.next();!b.done;b=a.next()){b=r(b.value.childNodes);for(var c=b.next();!c.done;c=b.next())if(c=c.value,c instanceof Element&&"LA_URL"==c.tagName)return c.textContent}return""}
function Xf(a,b){for(var c=[],d=r(b),e=d.next();!e.done;e=d.next()){e=e.value;var f=Yf.get(e.zd);if(f){var g;if(g=Hf(e.node,"urn:microsoft:playready","pro")){g=cd(g.textContent);var h=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),k=g.length,l=h.length+16+k,m=new Uint8Array(l),n=Lb(m),q=0;n.setUint32(q,l);q+=4;n.setUint32(q,1886614376);q+=4;n.setUint32(q,0);q+=4;m.set(h,q);q+=h.length;n.setUint32(q,k);q+=4;m.set(g,q);g=[{initData:m,initDataType:"cenc",keyId:e.keyId}]}else g=
null;g=Jc(f,e.init||a||g);if(f=bg.get(f))g.licenseServerUri=f(e);c.push(g)}}return c}function Wf(a){var b=[];a=r(a);for(var c=a.next();!c.done;c=a.next())(c=cg(c.value))&&b.push(c);return b}
function cg(a){var b=a.getAttribute("schemeIdUri"),c=Jf(a,"urn:mpeg:cenc:2013","default_KID"),d=If(a,"urn:mpeg:cenc:2013","pssh").map(Kf);if(!b)return null;b=b.toLowerCase();if(c&&(c=c.replace(/-/g,"").toLowerCase(),c.includes(" ")))throw new O(2,4,4009);var e=[];try{e=d.map(function(f){return{initDataType:"cenc",initData:cd(f),keyId:null}})}catch(f){throw new O(2,4,4007);}return{node:a,zd:b,keyId:c,init:0<e.length?e:null}}
var Yf=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime"),bg=(new Map).set("com.widevine.alpha",function(a){return(a=Hf(a.node,"urn:microsoft","laurl"))?a.getAttribute("licenseUrl")||
"":""}).set("com.microsoft.playready",function(a){a=Hf(a.node,"urn:microsoft:playready","pro");if(!a)return"";a=cd(a.textContent);a=$f(a).filter(function(b){return 1===b.type})[0];if(!a)return"";a=rc(a.value,!0);return(a=Tf(a,"WRMHEADER"))?ag(a):""});function dg(a,b,c,d,e){var f={RepresentationID:b,Number:c,Bandwidth:d,Time:e};return a.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(g,h,k,l){if("$$"==g)return"$";var m=f[h];if(null==m)return g;"RepresentationID"==h&&k&&(k=void 0);"Time"==h&&(m=Math.round(m));switch(l){case void 0:case "d":case "i":case "u":g=m.toString();break;case "o":g=m.toString(8);break;case "x":g=m.toString(16);break;case "X":g=m.toString(16).toUpperCase();break;default:g=m.toString()}k=
window.parseInt(k,10)||1;return Array(Math.max(0,k-g.length)+1).join("0")+g})}
function eg(a,b){var c=fg(a,b,"timescale"),d=1;c&&(d=Qf(c)||1);c=fg(a,b,"duration");(c=Qf(c||""))&&(c/=d);var e=fg(a,b,"startNumber"),f=Number(fg(a,b,"presentationTimeOffset"))||0,g=Rf(e||"");if(null==e||null==g)g=1;var h=gg(a,b,"SegmentTimeline");e=null;if(h){e=d;var k=a.L.duration||Infinity,l=Gf(h,"S");h=[];var m=-f;l=r(fb(l));for(var n=l.next();!n.done;n=l.next()){n=n.value;var q=n.item,u=n.next,v=Lf(q,"t",Rf);n=Lf(q,"d",Rf);var y=Lf(q,"r",Pf);null!=v&&(v-=f);if(!n)break;q=null!=v?v:m;v=y||0;if(0>
v)if(u){u=Lf(u,"t",Rf);if(null==u)break;else if(q>=u)break;v=Math.ceil((u-q)/n)-1}else{if(Infinity==k)break;else if(q/e>=k)break;v=Math.ceil((k*e-q)/n)-1}0<h.length&&q!=m&&(h[h.length-1].end=q/e);u=r(db(v+1));for(v=u.next();!v.done;v=u.next())m=q+n,h.push({start:q/e,end:m/e,Le:q}),q=m}e=h}return{timescale:d,X:c,nb:g,Fa:f/d||0,cd:f,timeline:e}}function fg(a,b,c){return[b(a.C),b(a.aa),b(a.ha)].filter(Gc).map(function(d){return d.getAttribute(c)}).reduce(function(d,e){return d||e})}
function gg(a,b,c){return[b(a.C),b(a.aa),b(a.ha)].filter(Gc).map(function(d){return Ff(d,c)}).reduce(function(d,e){return d||e})}
function hg(a,b,c,d,e,f){for(var g=Jf(a,"http://www.w3.org/1999/xlink","href"),h=Jf(a,"http://www.w3.org/1999/xlink","actuate")||"onRequest",k=r(Array.from(a.attributes)),l=k.next();!l.done;l=k.next())l=l.value,"http://www.w3.org/1999/xlink"==l.namespaceURI&&a.removeAttributeNS(l.namespaceURI,l.localName);if(5<=f)return zb(new O(2,4,4028));if("onLoad"!=h)return zb(new O(2,4,4027));var m=Ic([d],[g]);return e.request(0,$b(m,b)).S(function(n){n=Uf(n.data,a.tagName);if(!n)return zb(new O(2,4,4001,g));
for(;a.childNodes.length;)a.removeChild(a.childNodes[0]);for(;n.childNodes.length;){var q=n.childNodes[0];n.removeChild(q);a.appendChild(q)}n=r(Array.from(n.attributes));for(q=n.next();!q.done;q=n.next())a.setAttributeNode(q.value.cloneNode(!1));return ig(a,b,c,m[0],e,f+1)})}
function ig(a,b,c,d,e,f){f=void 0===f?0:f;if(Jf(a,"http://www.w3.org/1999/xlink","href")){var g=hg(a,b,c,d,e,f);c&&(g=g.S(void 0,function(){return ig(a,b,c,d,e,f)}));return g}g=[];for(var h=r(Array.from(a.childNodes)),k=h.next();!k.done;k=h.next())k=k.value,k instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Jf(k,"http://www.w3.org/1999/xlink","href")?a.removeChild(k):"SegmentTimeline"!=k.tagName&&g.push(ig(k,b,c,d,e,f)));return Db(g).S(function(){return a})};function jg(a,b,c){this.c=a;this.b=b;this.a=c}jg.prototype.Ec=function(){return this.b};jg.prototype.Dc=function(){return this.a};M("shaka.media.InitSegmentReference",jg);jg.prototype.getEndByte=jg.prototype.Dc;jg.prototype.getStartByte=jg.prototype.Ec;function kg(a,b,c,d,e,f,g,h,k){this.startTime=a;this.endTime=b;this.c=c;this.b=d;this.a=e;this.f=f;this.timestampOffset=g;this.appendWindowStart=h;this.appendWindowEnd=k}kg.prototype.he=function(){return this.startTime};kg.prototype.Wd=function(){return this.endTime};
kg.prototype.Ec=function(){return this.b};kg.prototype.Dc=function(){return this.a};M("shaka.media.SegmentReference",kg);kg.prototype.getEndByte=kg.prototype.Dc;kg.prototype.getStartByte=kg.prototype.Ec;kg.prototype.getEndTime=kg.prototype.Wd;kg.prototype.getStartTime=kg.prototype.he;function lg(a,b,c,d,e,f,g){var h,k=(new W).ea("sidx",function(l){h=mg(b,d,e,f,g,c,l)});a&&k.parse(a);if(h)return h;throw new O(2,3,3004);}
function mg(a,b,c,d,e,f,g){var h=[];g.reader.skip(4);var k=g.reader.G();if(0==k)throw new O(2,3,3005);if(0==g.version){var l=g.reader.G();var m=g.reader.G()}else l=g.reader.mb(),m=g.reader.mb();g.reader.skip(2);var n=g.reader.Fb();a=a+g.size+m;n=r(db(n));for(m=n.next();!m.done;m=n.next()){var q=g.reader.G();m=(q&2147483648)>>>31;q&=2147483647;var u=g.reader.G();g.reader.skip(4);if(1==m)throw new O(2,3,3006);h.push(new kg(l/k+c,(l+u)/k+c,function(){return f},a,a+q-1,b,c,d,e));l+=u;a+=q}g.parser.stop();
return h};function X(a){this.a=a;this.b=null;this.c=0}p=X.prototype;p.destroy=function(){Ac("shaka.media.SegmentIndex","Please use release() instead of destroy().");this.release();return Promise.resolve()};p.release=function(){this.a=[];this.b&&this.b.stop();this.b=null};p.find=function(a){for(var b=this.a.length-1;0<=b;--b){var c=this.a[b];if(a>=c.startTime&&a<c.endTime)return b+this.c}return this.a.length&&a<this.a[0].startTime?this.c:null};
p.get=function(a){if(0==this.a.length)return null;a-=this.c;return 0>a||a>=this.a.length?null:this.a[a]};p.offset=function(a){for(var b=r(this.a),c=b.next();!c.done;c=b.next())c=c.value,c.startTime+=a,c.endTime+=a,c.timestampOffset+=a};p.hb=function(a){var b=this.a[this.a.length-1],c=[];c=this.a.length?a.filter(function(d){return d.startTime>=b.startTime}):a;b&&c.length&&c[0].startTime==b.startTime&&this.a.pop();this.a.push.apply(this.a,ia(c))};
p.Na=function(a){var b=this.a.length;this.a=this.a.filter(function(c){return c.endTime>a});this.c+=b-this.a.length};p.Ia=function(a,b){for(;this.a.length;)if(this.a[this.a.length-1].startTime>=b)this.a.pop();else break;for(;this.a.length;)if(this.a[0].endTime<=a)this.a.shift(),this.c++;else break;if(0!=this.a.length){var c=this.a[this.a.length-1];this.a[this.a.length-1]=new kg(c.startTime,b,c.c,c.b,c.a,c.f,c.timestampOffset,c.appendWindowStart,c.appendWindowEnd)}};
p.ic=function(a,b){var c=this;this.b&&this.b.stop();this.b=new P(function(){var d=b();c.a.push.apply(c.a,ia(d));0==c.a.length&&(c.b.stop(),c.b=null)});this.b.na(a)};X.prototype[Symbol.iterator]=function(){return new ng(this)};function og(a,b,c){return new X([new kg(a,a+b,function(){return c},0,null,null,a,a,a+b)])}M("shaka.media.SegmentIndex",X);X.forSingleSegment=og;X.prototype.updateEvery=X.prototype.ic;X.prototype.fit=X.prototype.Ia;X.prototype.evict=X.prototype.Na;X.prototype.merge=X.prototype.hb;
X.prototype.offset=X.prototype.offset;X.prototype.get=X.prototype.get;X.prototype.find=X.prototype.find;X.prototype.release=X.prototype.release;X.prototype.destroy=X.prototype.destroy;function ng(a){this.b=a;this.a=this.b.find(0)||0}ng.prototype.seek=function(a){a=this.b.find(a);if(null==a)return this.a=Math.pow(2,31),null;this.a=a;return this.b.get(this.a++)};ng.prototype.current=function(){return this.b.get(this.a-1)};ng.prototype.next=function(){var a=this.b.get(this.a++);return{value:a,done:!a}};
M("shaka.media.SegmentIterator",ng);ng.prototype.next=ng.prototype.next;ng.prototype.current=ng.prototype.current;ng.prototype.seek=ng.prototype.seek;function pg(){X.call(this,[]);this.f=[]}pa(pg,X);p=pg.prototype;p.clone=function(){var a=new pg;a.f=this.f.slice();return a};p.release=function(){for(var a=r(this.f),b=a.next();!b.done;b=a.next())b.value.release();this.f=[]};
p.find=function(a){for(var b=0,c=r(this.f),d=c.next();!d.done;d=c.next()){d=d.value;var e=d.find(a);if(null!=e)return e+b;b+=d.c+d.a.length}return null};p.get=function(a){for(var b=0,c=r(this.f),d=c.next();!d.done;d=c.next()){d=d.value;var e=d.get(a-b);if(e)return e;b+=d.c+d.a.length}return null};p.offset=function(){};p.hb=function(){};p.Na=function(){};p.Ia=function(){};p.ic=function(){};M("shaka.media.MetaSegmentIndex",pg);pg.prototype.updateEvery=pg.prototype.ic;pg.prototype.fit=pg.prototype.Ia;
pg.prototype.evict=pg.prototype.Na;pg.prototype.merge=pg.prototype.hb;pg.prototype.offset=pg.prototype.offset;pg.prototype.get=pg.prototype.get;pg.prototype.find=pg.prototype.find;pg.prototype.release=pg.prototype.release;function qg(a){this.b=Lb(a);this.a=new V(this.b,0)}qg.prototype.sa=function(){return this.a.sa()};
function rg(a){var b=sg(a);if(7<b.length)throw new O(2,3,3002);var c=0;b=r(b);for(var d=b.next();!d.done;d=b.next())c=256*c+d.value;b=sg(a);a:{d=r(tg);for(var e=d.next();!e.done;e=d.next())if(Hb(b,new Uint8Array(e.value))){d=!0;break a}d=!1}if(d)b=a.b.byteLength-a.a.w;else{if(8==b.length&&b[1]&224)throw new O(2,3,3001);d=0;e=r(fb(b));for(var f=e.next();!f.done;f=e.next()){f=f.value;var g=f.item;d=0==f.V?g&(1<<8-b.length)-1:256*d+g}b=d}b=a.a.w+b<=a.b.byteLength?b:a.b.byteLength-a.a.w;d=Lb(a.b,a.a.w,
b);a.a.skip(b);return new ug(c,d)}function sg(a){var b=a.a.w,c=a.a.ma();if(0==c)throw new O(2,3,3002);c=8-Math.floor(Math.log2(c));a.a.skip(c-1);return R(a.b,b,c)}var tg=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function ug(a,b){this.id=a;this.a=b}
function vg(a){if(8<a.a.byteLength)throw new O(2,3,3002);if(8==a.a.byteLength&&a.a.getUint8(0)&224)throw new O(2,3,3001);for(var b=0,c=r(db(a.a.byteLength)),d=c.next();!d.done;d=c.next())d=a.a.getUint8(d.value),b=256*b+d;return b};function wg(a,b,c,d,e,f,g,h,k){function l(){return e}var m=[];a=new qg(a.a);for(var n=null,q=null;a.sa();){var u=rg(a);if(187==u.id){var v=xg(u);v&&(u=c*v.Me,v=b+v.ve,null!=n&&m.push(new kg(n+g,u+g,l,q,v-1,f,g,h,k)),n=u,q=v)}}null!=n&&m.push(new kg(n+g,d+g,l,q,null,f,g,h,k));return m}
function xg(a){var b=new qg(a.a);a=rg(b);if(179!=a.id)throw new O(2,3,3013);a=vg(a);b=rg(b);if(183!=b.id)throw new O(2,3,3012);b=new qg(b.a);for(var c=0;b.sa();){var d=rg(b);if(241==d.id){c=vg(d);break}}return{Me:a,ve:c}};function yg(a,b){var c=gg(a,b,"Initialization");if(!c)return null;var d=a.C.ka,e=c.getAttribute("sourceURL");e&&(d=Ic(a.C.ka,[e]));e=0;var f=null;if(c=Lf(c,"range",Of))e=c.start,f=c.end;return new jg(function(){return d},e,f)}
function zg(a,b){var c=Number(fg(a,Ag,"presentationTimeOffset"))||0,d=fg(a,Ag,"timescale"),e=1;d&&(e=Qf(d)||1);var f=c/e||0,g=yg(a,Ag);Bg(a,g);var h=Rb(a);return{eb:function(){var k=gg(h,Ag,"RepresentationIndex"),l=h.C.ka;k&&(k=k.getAttribute("sourceURL"))&&(l=Ic(h.C.ka,[k]));k=Cg(h);return Dg(h,b,g,l,k.start,k.end,f)}}}
function Dg(a,b,c,d,e,f,g){var h,k,l,m,n,q,u,v,y,z,A,D,B,E,H;return K(function(G){var F;if(1==G.a)return h=a.presentationTimeline,k=!a.Ma||!a.L.qd,l=a.L.start,m=a.L.duration,n=a.C.mimeType.split("/")[1],q=b,u=null,v=[q(d,e,f),"webm"==n?q(c.c(),c.b,c.a):null],q=null,t(G,Promise.all(v),2);y=G.b;z=y[0];A=y[1]||null;D=null;B=l-g;E=l;H=m?l+m:Infinity;if("mp4"==n)var I=lg(z,e,d,c,B,E,H);else{I=new qg(A);if(440786851!=rg(I).id)throw new O(2,3,3008);var L=rg(I);if(408125543!=L.id)throw new O(2,3,3009);I=
L.a.byteOffset;L=new qg(L.a);for(F=null;L.sa();){var T=rg(L);if(357149030==T.id){F=T;break}}if(!F)throw new O(2,3,3010);F=new qg(F.a);T=1E6;for(L=null;F.sa();){var N=rg(F);if(2807729==N.id)T=vg(N);else if(17545==N.id)if(4==N.a.byteLength)L=N.a.getFloat32(0);else if(8==N.a.byteLength)L=N.a.getFloat64(0);else throw new O(2,3,3003);}if(null==L)throw new O(2,3,3011);F=T/1E9;F={Fe:F,duration:L*F};L=F.Fe;F=F.duration;T=rg(new qg(z));if(475249515!=T.id)throw new O(2,3,3007);I=wg(T,I,L,F,d,c,B,E,H)}D=I;h.jb(D);
u=new X(D);k&&u.Ia(E,H);return G["return"](u)})}function Ag(a){return a.Hb}function Cg(a){var b=gg(a,Ag,"RepresentationIndex");a=fg(a,Ag,"indexRange");a=Of(a||"");b&&(a=Lf(b,"range",Of,a));return a}function Bg(a,b){Eg(a,b);if(!Cg(a))throw new O(2,4,4002);}function Eg(a,b){var c=a.C.mimeType.split("/")[1];if("text"!=a.C.contentType&&"mp4"!=c&&"webm"!=c)throw new O(2,4,4006);if("webm"==c&&!b)throw new O(2,4,4005);};function Fg(a,b){var c=yg(a,Gg),d=Hg(a);if(!d.X&&!d.timeline&&1<d.gb.length)throw new O(2,4,4002);if(!d.X&&!a.L.duration&&!d.timeline&&1==d.gb.length)throw new O(2,4,4002);if(d.timeline&&0==d.timeline.length)throw new O(2,4,4002);var e=null,f=null;a.ha.id&&a.C.id&&(f=a.ha.id+","+a.C.id,e=b[f]);c=Ig(a.L.start,a.L.duration,a.C.ka,d,c);e?(e.hb(c),e.Na(a.presentationTimeline.Pa())):(a.presentationTimeline.jb(c),e=new X(c),f&&a.Ma&&(b[f]=e));a.Ma&&a.L.qd||e.Ia(a.L.start,a.L.duration?a.L.start+a.L.duration:
Infinity);return{eb:function(){return Promise.resolve(e)}}}function Gg(a){return a.La}function Hg(a){var b=Jg(a);a=eg(a,Gg);var c=a.nb;0==c&&(c=1);var d=0;a.X?d=a.X*(c-1):a.timeline&&0<a.timeline.length&&(d=a.timeline[0].start);return{X:a.X,startTime:d,nb:c,Fa:a.Fa,timeline:a.timeline,gb:b}}
function Ig(a,b,c,d,e){var f=d.gb.length;d.timeline&&d.timeline.length!=d.gb.length&&(f=Math.min(d.timeline.length,d.gb.length));var g=a-d.Fa,h=b?a+b:Infinity,k=[],l=d.startTime,m={};f=r(db(f));for(var n=f.next();!n.done;m={pc:m.pc},n=f.next()){n=n.value;var q=d.gb[n];m.pc=Ic(c,[q.oe]);var u=void 0;u=null!=d.X?l+d.X:d.timeline?d.timeline[n].end:l+b;k.push(new kg(a+l,a+u,function(v){return function(){return v.pc}}(m),q.start,q.end,e,g,a,h));l=u}return k}
function Jg(a){return[a.C.La,a.aa.La,a.ha.La].filter(Gc).map(function(b){return Gf(b,"SegmentURL")}).reduce(function(b,c){return 0<b.length?b:c}).map(function(b){b.getAttribute("indexRange")&&!a.nd&&(a.nd=!0);var c=b.getAttribute("media");b=Lf(b,"mediaRange",Of,{start:0,end:null});return{oe:c,start:b.start,end:b.end}})};function Kg(a,b,c,d,e){var f=Lg(a),g=Mg(a);Ng(g);var h=Rb(a);if(g.Bb)return Eg(a,f),{eb:function(){var u=dg(g.Bb,h.C.id,null,h.bandwidth||null,null);u=Ic(h.C.ka,[u]);return Dg(h,b,f,u,0,null,g.Fa)}};if(g.X)return d||(a.presentationTimeline.Mc(g.X),a.presentationTimeline.Nc(a.L.start)),{eb:function(){return Og(h,g,e,f)}};var k=null;d=null;a.ha.id&&a.C.id&&(d=a.ha.id+","+a.C.id,k=c[d]);var l=Pg(h,g,f),m=a.L.start,n=a.L.duration?a.L.start+a.L.duration:Infinity,q=Infinity!=n;k?(q&&(new X(l)).Ia(m,n),
k.hb(l),k.Na(a.presentationTimeline.Pa())):(a.presentationTimeline.jb(l),k=new X(l),d&&a.Ma&&(c[d]=k));q&&k.Ia(m,n);return{eb:function(){return Promise.resolve(k)}}}function Qg(a){return a.Ib}function Mg(a){var b=eg(a,Qg),c=fg(a,Qg,"media");a=fg(a,Qg,"index");return{X:b.X,timescale:b.timescale,nb:b.nb,Fa:b.Fa,cd:b.cd,timeline:b.timeline,Lc:c,Bb:a}}
function Ng(a){var b=a.Bb?1:0;b+=a.timeline?1:0;b+=a.X?1:0;if(0==b)throw new O(2,4,4002);1!=b&&(a.Bb&&(a.timeline=null),a.X=null);if(!a.Bb&&!a.Lc)throw new O(2,4,4002);}
function Og(a,b,c,d){function e(G){var F=(G-n)*m,I=F+b.Fa;F+=h;return new kg(F,Math.min(F+m,l),function(){var L=dg(u,y,G,v,I*q);return Ic(z,[L])},0,null,d,A,h,l)}function f(){var G=[Math.max(g.Pa(),h),Math.min(g.Ja(),l)].map(function(F){return F-h});return[Math.ceil(G[0]/m),Math.ceil(G[1]/m)-1].map(function(F){return F+n})}var g=a.presentationTimeline,h=a.L.start,k=a.L.duration,l=k?h+k:Infinity,m=b.X,n=b.nb,q=b.timescale,u=b.Lc,v=a.bandwidth||null,y=a.C.id,z=a.C.ka,A=h-b.Fa,D=f();k=D[1];var B=[];
for(a=a.Ma?Math.max(D[0],D[1]-c+1):D[0];a<=k;++a)c=e(a),B.push(c);var E=new X(B);if(g.Ja()<l){var H=k+1;E.ic(m,function(){E.Na(g.Pa());var G=r(f());G.next();G=G.next().value;for(var F=[];H<=G;){var I=e(H);F.push(I);H++}return F})}return Promise.resolve(E)}
function Pg(a,b,c){var d=a.L.start,e=a.L.duration,f=d-b.Fa;e=e?d+e:Infinity;for(var g=[],h={},k=r(fb(b.timeline)),l=k.next();!l.done;h={qc:h.qc,tc:h.tc,nc:h.nc,uc:h.uc},l=k.next()){l=l.value;var m=l.item,n=m.start,q=m.Le;m=m.end;h.tc=l.V+b.nb;h.uc=q+b.cd;h.qc=a.C.id;h.nc=a.bandwidth||null;g.push(new kg(d+n,d+m,function(u){return function(){var v=dg(b.Lc,u.qc,u.tc,u.nc||null,u.uc);return Ic(a.C.ka,[v]).map(function(y){return y.toString()})}}(h),0,null,c,f,d,e))}return g}
function Lg(a){var b=fg(a,Qg,"initialization");if(!b)return null;var c=a.C.id,d=a.bandwidth||null,e=a.C.ka;return new jg(function(){var f=dg(b,c,null,d,null);return Ic(e,[f])},0,null)};function Rg(){}function Sg(a,b,c,d){var e,f,g,h;return K(function(k){if(1==k.a){if(d&&(e=Tg[d.toLowerCase()]))return k["return"](e);if(f=Ug(a))if(g=Vg[f])return k["return"](g);return d?k.o(2):t(k,Wg(a,b,c),3)}if(2!=k.a&&(d=k.b)&&(h=Tg[d]))return k["return"](h);throw new O(2,4,4E3,a);})}
function Wg(a,b,c){var d,e,f;return K(function(g){if(1==g.a)return d=$b([a],c),d.method="HEAD",t(g,b.request(0,d).promise,2);e=g.b;f=e.headers["content-type"];return g["return"](f?f.toLowerCase().split(";").shift():"")})}function Ug(a){a=(new hb(a)).ga.split("/").pop().split(".");return 1==a.length?"":a.pop().toLowerCase()}M("shaka.media.ManifestParser",Rg);Rg.unregisterParserByMime=function(a){delete Tg[a]};Rg.registerParserByMime=function(a,b){Tg[a]=b};
Rg.registerParserByExtension=function(a,b){Vg[a]=b};var Tg={},Vg={};function Y(a,b,c){this.f=a;this.fc=b;this.i=this.g=Infinity;this.a=1;this.b=this.c=null;this.j=0;this.s=!0;this.v=0;this.A=void 0===c?!0:c}p=Y.prototype;p.getDuration=function(){return this.g};p.ae=function(){return this.a};p.wa=function(a){this.g=a};p.ge=function(){return this.f};p.Cd=function(a){this.j=a};p.Jb=function(a){this.s=a};p.Zc=function(a){this.i=a};p.Be=function(a){this.fc=a};p.Vd=function(){return this.fc};
p.jb=function(a){if(0!=a.length){var b=a[a.length-1].endTime;this.Nc(a[0].startTime);this.a=a.reduce(function(c,d){return Math.max(c,d.endTime-d.startTime)},this.a);this.b=Math.max(this.b,b);null!=this.f&&this.A&&(this.f=(Date.now()+this.j)/1E3-this.b-this.a)}};p.Nc=function(a){this.c=null==this.c?a:Math.min(this.c,a)};p.Mc=function(a){this.a=Math.max(this.a,a)};p.offset=function(a){null!=this.c&&(this.c+=a);null!=this.b&&(this.b+=a)};p.W=function(){return Infinity==this.g&&!this.s};
p.Sa=function(){return Infinity!=this.g&&!this.s};p.Pa=function(){return Math.max(this.v,this.Ja()-this.i)};p.Dd=function(a){this.v=a};p.Ja=function(){return this.W()||this.Sa()?Math.min(Math.max(0,(Date.now()+this.j)/1E3-this.a-this.f),this.g):this.g};p.zb=function(a){var b=Math.max(this.c,this.v);return Infinity==this.i?b:Math.max(b,Math.min(this.Ja()-this.i+a,this.Ca()))};p.fb=function(){return this.zb(0)};p.Ca=function(){return Math.max(0,this.Ja()-(this.W()||this.Sa()?this.fc:0))};
p.Gd=function(){return null==this.f||null!=this.b&&this.A?!1:!0};M("shaka.media.PresentationTimeline",Y);Y.prototype.usingPresentationStartTime=Y.prototype.Gd;Y.prototype.getSeekRangeEnd=Y.prototype.Ca;Y.prototype.getSeekRangeStart=Y.prototype.fb;Y.prototype.getSafeSeekRangeStart=Y.prototype.zb;Y.prototype.getSegmentAvailabilityEnd=Y.prototype.Ja;Y.prototype.setUserSeekStart=Y.prototype.Dd;Y.prototype.getSegmentAvailabilityStart=Y.prototype.Pa;Y.prototype.isInProgress=Y.prototype.Sa;
Y.prototype.isLive=Y.prototype.W;Y.prototype.offset=Y.prototype.offset;Y.prototype.notifyMaxSegmentDuration=Y.prototype.Mc;Y.prototype.notifyMinSegmentStartTime=Y.prototype.Nc;Y.prototype.notifySegments=Y.prototype.jb;Y.prototype.getDelay=Y.prototype.Vd;Y.prototype.setDelay=Y.prototype.Be;Y.prototype.setSegmentAvailabilityDuration=Y.prototype.Zc;Y.prototype.setStatic=Y.prototype.Jb;Y.prototype.setClockOffset=Y.prototype.Cd;Y.prototype.getPresentationStartTime=Y.prototype.ge;
Y.prototype.setDuration=Y.prototype.wa;Y.prototype.getMaxSegmentDuration=Y.prototype.ae;Y.prototype.getDuration=Y.prototype.getDuration;function Xg(a,b,c,d){a=$b(a,d);if(0!=b||null!=c)a.headers.Range=c?"bytes="+b+"-"+c:"bytes="+b+"-";return a};function Yg(){this.f=[];this.a=[];this.b=[];this.c=[];this.g=new Set}Yg.prototype.release=function(){for(var a=r(this.a.concat(this.b,this.c)),b=a.next();!b.done;b=a.next())b=b.value,b.segmentIndex&&b.segmentIndex.release();this.a=[];this.b=[];this.c=[];this.f=[]};
function Zg(a,b,c){var d,e,f,g,h,k,l,m,n,q,u,v,y,z,A,D,B,E,H,G,F,I,L,T,N,ca,ra,Fa,va,Ga;return K(function(za){switch(za.a){case 1:d=Kc;$g(b);ah(b);if(!c&&1==b.length){e=b[0];a.a=e.Tb;a.b=e.kc;a.c=e.textStreams;za.o(2);break}f=-1;g=r(fb(b));for(h=g.next();!h.done;h=g.next())l=k=h.value,m=l.V,n=l.item,a.g.has(n.id)||(a.g.add(n.id),-1==f&&(f=m));if(-1==f)return za["return"]();q=b.map(function(sa){return sa.Tb});u=b.map(function(sa){return sa.kc});v=b.map(function(sa){return sa.textStreams});y=r(v);for(z=
y.next();!z.done;z=y.next())A=z.value,A.push(bh());return t(za,ch(a.a,q,f,dh,eh),3);case 3:return t(za,ch(a.b,u,f,dh,eh),4);case 4:return t(za,ch(a.c,v,f,dh,eh),2);case 2:D=0;B=[];if(a.b.length&&a.a.length)for(L=r(a.a),T=L.next();!T.done;T=L.next())for(N=T.value,ca=r(a.b),ra=ca.next();!ra.done;ra=ca.next())Fa=ra.value,va=Pd(N.drmInfos,Fa.drmInfos),N.drmInfos.length&&Fa.drmInfos.length&&!va.length||(Ga=D++,B.push({id:Ga,language:N.language,primary:N.primary,audio:N,video:Fa,bandwidth:(N.bandwidth||
0)+(Fa.bandwidth||0),drmInfos:va,allowedByApplication:!0,allowedByKeySystem:!0}));else for(E=a.b.concat(a.a),H=r(E),G=H.next();!G.done;G=H.next())F=G.value,I=D++,B.push({id:I,language:F.language,primary:F.primary,audio:F.type==d.bb?F:null,video:F.type==d.Aa?F:null,bandwidth:F.bandwidth||0,drmInfos:F.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0});a.f=B;w(za)}})}
function $g(a){a=r(a);for(var b=a.next();!b.done;b=a.next()){b=b.value;for(var c=[],d=r(b.Tb),e=d.next();!e.done;e=d.next()){e=e.value;for(var f=!1,g=r(c),h=g.next();!h.done;h=g.next())h=h.value,e.id!=h.id&&e.channelsCount==h.channelsCount&&e.language==h.language&&e.bandwidth==h.bandwidth&&Ub(e.roles,h.roles)&&e.audioSamplingRate==h.audioSamplingRate&&e.primary==h.primary&&(f=!0);f||c.push(e)}b.Tb=c}}
function ah(a){a=r(a);for(var b=a.next();!b.done;b=a.next()){b=b.value;for(var c=[],d=r(b.kc),e=d.next();!e.done;e=d.next()){e=e.value;for(var f=!1,g=r(c),h=g.next();!h.done;h=g.next())h=h.value,e.id!=h.id&&e.width==h.width&&e.frameRate==h.frameRate&&Ub(e.roles,h.roles)&&Nc(e.closedCaptions,h.closedCaptions)&&e.bandwidth==h.bandwidth&&(f=!0);f||c.push(e)}b.kc=c}}
function fh(a){var b,c,d,e,f,g,h,k,l,m,n,q,u,v,y,z,A,D,B,E,H,G;return K(function(F){switch(F.a){case 1:b=Kc;if(1==a.length)return F["return"](a[0]);c=a.map(function(I){return I.filter(function(L){return L.type==b.bb})});d=a.map(function(I){return I.filter(function(L){return L.type==b.Aa})});e=a.map(function(I){return I.filter(function(L){return L.type==b.$})});f=r(e);for(g=f.next();!g.done;g=f.next())h=g.value,h.push({id:0,originalId:"",primary:!1,type:"text",mimeType:"",codecs:"",language:"",label:null,
width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null});return t(F,ch([],c,0,gh,hh),2);case 2:return k=F.b,t(F,ch([],d,0,gh,hh),3);case 3:return l=F.b,t(F,ch([],e,0,gh,hh),4);case 4:m=F.b;n=0;if(l.length&&k.length)for(z=r(k),A=z.next();!A.done;A=z.next())for(D=A.value,B=r(l),E=B.next();!E.done;E=B.next())H=E.value,G=n++,H.variantIds.push(G),D.variantIds.push(G);else for(q=l.concat(k),u=r(q),v=u.next();!v.done;v=
u.next())y=v.value,y.variantIds=[n++];return F["return"](l.concat(k,m))}})}
function ch(a,b,c,d,e){var f,g,h,k,l,m,n,q,u,v,y,z,A,D,B,E,H,G,F,I,L,T,N;return K(function(ca){switch(ca.a){case 1:f=Kc;g=[];h=r(fb(b));for(k=h.next();!k.done;k=h.next())m=l=k.value,n=m.V,q=m.item,n>=c?g.push(new Set(q)):g.push(new Set);u=r(a);v=u.next();case 2:if(v.done){ca.o(4);break}y=v.value;return t(ca,ih(y,b,c,e,g),5);case 5:z=ca.b;if(!z)throw new O(2,4,4037);v=u.next();ca.o(2);break;case 4:A=r(g),D=A.next();case 6:if(D.done){ca.o(8);break}B=D.value;E=r(B);H=E.next();case 9:if(H.done){D=A.next();
ca.o(6);break}G=H.value;return t(ca,jh(G,b,d,e,g),12);case 12:(F=ca.b)&&a.push(F);H=E.next();ca.o(9);break;case 8:I=r(g);for(D=I.next();!D.done;D=I.next())for(L=D.value,T=r(L),H=T.next();!H.done;H=T.next())if(N=H.value,N.type!=f.$||N.language)throw new O(2,4,4037);return ca["return"](a)}})}function ih(a,b,c,d,e){var f;return K(function(g){if(1==g.a)return(f=kh(b,a))?t(g,Promise.all(f.map(function(h){return h.createSegmentIndex()})),2):g["return"](!1);lh(a,f,c,d,e);return g["return"](!0)})}
function jh(a,b,c,d,e){var f,g;return K(function(h){if(1==h.a)return f=c(a),(g=kh(b,f))?f.createSegmentIndex?t(h,Promise.all(g.map(function(k){return k.createSegmentIndex()})),2):h.o(2):h["return"](null);lh(f,g,0,d,e);return h["return"](f)})}function lh(a,b,c,d,e){b=r(fb(b));for(var f=b.next();!f.done;f=b.next()){var g=f.value;f=g.V;g=g.item;if(f>=c){d(a,g);var h=!0;"audio"==a.type&&0==Ye(a.language,g.language)&&(h=!1);h&&e[f]["delete"](g)}}}
function dh(a){a=Object.assign({},a);a.originalId=null;a.createSegmentIndex=function(){return Promise.resolve()};a.segmentIndex=new pg;a.emsgSchemeIdUris=[];a.keyIds=new Set;a.closedCaptions=null;a.trickModeVideo=null;return a}function gh(a){a=Object.assign({},a);a.keyIds=new Set;a.segments=[];a.variantIds=[];a.closedCaptions=null;return a}
function eh(a,b){a.roles=Array.from(new Set(a.roles.concat(b.roles)));b.emsgSchemeIdUris&&(a.emsgSchemeIdUris=Array.from(new Set(a.emsgSchemeIdUris.concat(b.emsgSchemeIdUris))));var c=b.keyIds;c=new Set(ia(a.keyIds).concat(ia(c)));a.keyIds=c;null==a.originalId?a.originalId=b.originalId:a.originalId+=","+(b.originalId||"");c=Pd(a.drmInfos,b.drmInfos);if(b.drmInfos.length&&a.drmInfos.length&&!c.length)throw new O(2,4,4038);a.drmInfos=c;a.encrypted=a.encrypted||b.encrypted;if(b.closedCaptions){a.closedCaptions||
(a.closedCaptions=new Map);c=r(b.closedCaptions);for(var d=c.next();!d.done;d=c.next()){var e=r(d.value);d=e.next().value;e=e.next().value;a.closedCaptions.set(d,e)}}a.segmentIndex.f.push(b.segmentIndex);b.trickModeVideo?(a.trickModeVideo||(a.trickModeVideo=dh(b.trickModeVideo),a.trickModeVideo.segmentIndex=a.segmentIndex.clone()),eh(a.trickModeVideo,b.trickModeVideo)):a.trickModeVideo&&eh(a.trickModeVideo,b)}
function hh(a,b){a.roles=Array.from(new Set(a.roles.concat(b.roles)));var c=b.keyIds;c=new Set(ia(a.keyIds).concat(ia(c)));a.keyIds=c;a.encrypted=a.encrypted&&b.encrypted;a.segments.push.apply(a.segments,ia(b.segments));if(b.closedCaptions){a.closedCaptions||(a.closedCaptions=new Map);c=r(b.closedCaptions);for(var d=c.next();!d.done;d=c.next()){var e=r(d.value);d=e.next().value;e=e.next().value;a.closedCaptions.set(d,e)}}}
function kh(a,b){for(var c=[],d=r(a),e=d.next();!e.done;e=d.next()){var f=b,g={audio:mh,video:mh,text:nh}[f.type],h={audio:oh,video:ph,text:qh}[f.type],k=null;e=r(e.value);for(var l=e.next();!l.done;l=e.next())l=l.value,!g(f,l)||k&&!h(f,k,l)||(k=l);f=k;if(!f)return null;c.push(f)}return c}function mh(a,b){var c;if(!(c=b.mimeType!=a.mimeType||Rc(b.codecs)[0]!=Rc(a.codecs)[0])&&(c=a.drmInfos)){c=a.drmInfos;var d=b.drmInfos;c=!(c.length&&d.length?0<Pd(c,d).length:1)}return c?!1:!0}
function nh(a,b){return a.language?b.language?0==Ye(a.language,b.language)||b.kind!=a.kind?!1:!0:!0:!1}
function oh(a,b,c){if(a.id==c.id)return!0;var d=Ye(a.language,b.language),e=Ye(a.language,c.language);if(e>d)return!0;if(e<d)return!1;if(!b.primary&&c.primary)return!0;if(b.primary&&!c.primary)return!1;if(a.roles.length)return d=b.roles.filter(function(f){return a.roles.includes(f)}),e=c.roles.filter(function(f){return a.roles.includes(f)}),e.length>d.length?!0:e.length<d.length?!1:c.roles.length<b.roles.length;d=rh(a.channelsCount,b.channelsCount,c.channelsCount);if(d==sh)return!0;if(d==th)return!1;
d=rh(a.audioSamplingRate,b.audioSamplingRate,c.audioSamplingRate);return d==sh?!0:d==th?!1:a.bandwidth&&uh(a.bandwidth,b.bandwidth,c.bandwidth)==sh?!0:!1}function ph(a,b,c){if(a.id==c.id)return!0;var d=rh(a.width*a.height,b.width*b.height,c.width*c.height);if(d==sh)return!0;if(d==th)return!1;if(a.frameRate){d=rh(a.frameRate,b.frameRate,c.frameRate);if(d==sh)return!0;if(d==th)return!1}return a.bandwidth&&uh(a.bandwidth,b.bandwidth,c.bandwidth)==sh?!0:!1}
function qh(a,b,c){if(a.id==c.id)return!0;var d=Ye(a.language,b.language),e=Ye(a.language,c.language);if(e>d)return!0;if(e<d)return!1;if(!b.primary&&c.primary)return!0;if(b.primary&&!c.primary)return!1;if(a.roles.length){d=b.roles.filter(function(f){return a.roles.includes(f)});e=c.roles.filter(function(f){return a.roles.includes(f)});if(e.length>d.length)return!0;if(e.length<d.length)return!1}return c.mimeType!=a.mimeType||c.codecs!=a.codecs||b.mimeType==a.mimeType&&b.codecs==a.codecs?!1:!0}
function bh(){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new X([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null}}
function rh(a,b,c){if(b==a&&a!=c)return th;if(c==a&&a!=b)return sh;if(b>a){if(c<=a||c-a<b-a)return sh;if(c-a>b-a)return th}else{if(c>a)return th;if(a-c<a-b)return sh;if(a-c>a-b)return th}return vh}function uh(a,b,c){b=Math.abs(a-b);a=Math.abs(a-c);return a<b?sh:b<a?th:vh}var sh=1,vh=0,th=-1;function wh(){var a=this;this.m=this.h=null;this.b=[];this.l=null;this.s=1;this.f={};this.a=new Yg;this.i=0;this.j=new Pa(5);this.g=new P(function(){a.Db()});this.c=new Vb}p=wh.prototype;p.configure=function(a){this.h=a};p.start=function(a,b){var c=this,d;return K(function(e){if(1==e.a)return c.b=[a],c.m=b,t(e,xh(c),2);d=e.b;c.m&&yh(c,d);if(!c.m)throw new O(2,7,7001);return e["return"](c.l)})};
p.stop=function(){for(var a=r(Object.values(this.f)),b=a.next();!b.done;b=a.next())b.value.release();this.a&&this.a.release();this.h=this.m=null;this.b=[];this.l=null;this.f={};this.a=null;null!=this.g&&(this.g.stop(),this.g=null);return this.c.destroy()};p.update=function(){var a=this,b;return K(function(c){if(1==c.a)return x(c,2),t(c,xh(a),4);if(2!=c.a)return C(c,0);b=J(c);if(!a.m||!b)return c["return"]();a.m.onError(b);w(c)})};p.onExpirationUpdated=function(){};
function xh(a){var b,c,d,e,f,g,h;return K(function(k){if(1==k.a)return b=$b(a.b,a.h.retryParameters),c=a.m.networkingEngine,d=Date.now(),e=c.request(0,b),Wb(a.c,e),t(k,e.promise,2);if(3!=k.a){f=k.b;if(!a.m)return k["return"](0);f.uri&&!a.b.includes(f.uri)&&a.b.unshift(f.uri);return t(k,zh(a,f.data,f.uri),3)}g=Date.now();h=(g-d)/1E3;Qa(a.j,1,h);return k["return"](h)})}
function zh(a,b,c){var d,e,f,g;return K(function(h){if(1==h.a){d=Uf(b,"MPD");if(!d)throw new O(2,4,4001,c);e=a.h.dash.xlinkFailGracefully;f=ig(d,a.h.retryParameters,e,c,a.m.networkingEngine);Wb(a.c,f);return t(h,f.promise,2)}g=h.b;return h["return"](Ah(a,g,c))})}
function Ah(a,b,c){var d,e,f,g,h,k,l,m,n,q,u,v,y,z,A,D,B,E,H,G,F,I,L;return K(function(T){switch(T.a){case 1:d=[c];e=Gf(b,"Location").map(Kf).filter(Gc);0<e.length&&(f=Ic(d,e),d=a.b=f);g=Gf(b,"BaseURL").map(Kf);h=Ic(d,g);k=a.h.dash.ignoreMinBufferTime;l=0;k||(l=Lf(b,"minBufferTime",Nf)||0);a.i=Lf(b,"minimumUpdatePeriod",Nf,-1);m=Lf(b,"availabilityStartTime",Mf);n=Lf(b,"timeShiftBufferDepth",Nf);q=a.h.dash.ignoreSuggestedPresentationDelay;u=null;q||(u=Lf(b,"suggestedPresentationDelay",Nf));v=Lf(b,
"maxSegmentDuration",Nf);y=b.getAttribute("type")||"static";a.l?z=a.l.presentationTimeline:(A=a.h.defaultPresentationDelay||1.5*l,D=null!=u?u:A,z=new Y(m,D,a.h.dash.autoCorrectDrift));B={Ma:"static"!=y,presentationTimeline:z,ha:null,L:null,aa:null,C:null,bandwidth:0,nd:!1};var N=Lf(b,"mediaPresentationDuration",Nf),ca=[],ra=0,Fa=Gf(b,"Period");Fa=r(fb(Fa));for(var va=Fa.next();!va.done;va=Fa.next()){var Ga=va.value;va=Ga.item;Ga=Ga.next;ra=Lf(va,"start",Nf,ra);var za=Lf(va,"duration",Nf),sa=null;
if(Ga){var Fb=Lf(Ga,"start",Nf);null!=Fb&&(sa=Fb-ra)}else null!=N&&(sa=N-ra);null==sa&&(sa=za);va=Bh(a,B,h,{start:ra,duration:sa,node:va,qd:null==sa||!Ga});ca.push(va);if(null==sa){ra=null;break}ra+=sa}E=null!=N?{periods:ca,duration:N,jd:!1}:{periods:ca,duration:ra,jd:!0};H=E.duration;G=E.periods;z.Jb("static"==y);"static"!=y&&E.jd||z.wa(H||Infinity);(F=z.W())&&!isNaN(a.h.availabilityWindowOverride)&&(n=a.h.availabilityWindowOverride);null==n&&(n=Infinity);z.Zc(n);z.Mc(v||1);return t(T,Zg(a.a,G,B.Ma),
2);case 2:if(a.l){a.l.variants=a.a.f;a.l.textStreams=a.a.c;T.o(3);break}a.l={presentationTimeline:z,variants:a.a.f,textStreams:a.a.c,offlineSessionIds:[],minBufferTime:l||0};if(!z.Gd()){T.o(3);break}I=Gf(b,"UTCTiming");return t(T,Ch(a,h,I),5);case 5:L=T.b;if(!a.m)return T["return"]();z.Cd(L);case 3:return t(T,a.m.filter(a.l),0)}})}
function Bh(a,b,c,d){b.ha=Dh(d.node,null,c);b.L=d;b.ha.id||(b.ha.id="__shaka_period_"+d.start);c=Gf(d.node,"EventStream");c=r(c);for(var e=c.next();!e.done;e=c.next())Eh(a,d.start,d.duration,e.value);c=Gf(d.node,"AdaptationSet").map(function(l){return Fh(a,b,l)}).filter(Gc);if(b.Ma){d=[];e=r(c);for(var f=e.next();!f.done;f=e.next()){f=r(f.value.xe);for(var g=f.next();!g.done;g=f.next())d.push(g.value)}if(d.length!=(new Set(d)).size)throw new O(2,4,4018);}d=c.filter(function(l){return!l.bd});c=c.filter(function(l){return l.bd});
c=r(c);for(e=c.next();!e.done;e=c.next()){f=e.value;e=f.streams[0];f=f.bd;g=r(d);for(var h=g.next();!h.done;h=g.next())if(h=h.value,h.id==f){h=r(h.streams);for(var k=h.next();!k.done;k=h.next())k.value.trickModeVideo=e}}e=a.h.disableAudio?[]:Gh(d,"audio");f=a.h.disableVideo?[]:Gh(d,"video");c=a.h.disableText?[]:Gh(d,"text");if(!f.length&&!e.length)throw new O(2,4,4004);d=[];e=r(e);for(g=e.next();!g.done;g=e.next())d.push.apply(d,ia(g.value.streams));e=[];f=r(f);for(g=f.next();!g.done;g=f.next())e.push.apply(e,
ia(g.value.streams));f=[];c=r(c);for(g=c.next();!g.done;g=c.next())f.push.apply(f,ia(g.value.streams));return{id:b.ha.id,Tb:d,kc:e,textStreams:f}}function Gh(a,b){return a.filter(function(c){return c.contentType==b})}
function Fh(a,b,c){b.aa=Dh(c,b.ha,null);if("image"==b.aa.contentType)return null;var d=!1,e=Gf(c,"Role"),f=e.map(function(B){return B.getAttribute("value")}).filter(Gc),g=void 0,h="text"==b.aa.contentType;h&&(g="subtitle");e=r(e);for(var k=e.next();!k.done;k=e.next()){k=k.value;var l=k.getAttribute("schemeIdUri");if(null==l||"urn:mpeg:dash:role:2011"==l)switch(k=k.getAttribute("value"),k){case "main":d=!0;break;case "caption":case "subtitle":g=k}}l=Gf(c,"EssentialProperty");e=null;k=!1;l=r(l);for(var m=
l.next();!m.done;m=l.next())m=m.value,"http://dashif.org/guidelines/trickmode"==m.getAttribute("schemeIdUri")?e=m.getAttribute("value"):k=!0;l=Gf(c,"Accessibility");var n=new Map;l=r(l);for(m=l.next();!m.done;m=l.next()){var q=m.value;m=q.getAttribute("schemeIdUri");q=q.getAttribute("value");if("urn:scte:dash:cc:cea-608:2015"==m||"urn:scte:dash:cc:cea-708:2015"==m)if(m=1,null!=q){q=r(q.split(";"));for(var u=q.next();!u.done;u=q.next()){var v=u.value,y=u=void 0;v.includes("=")?(v=v.split("="),u=v[0].startsWith("CC")?
v[0]:"CC"+v[0],y=v[1].split(",")[0].split(":").pop()):(u="CC"+m,m+=2,y=v);n.set(u,U(y))}}else n.set("CC1","und");else"urn:mpeg:dash:role:2011"==m&&null!=q&&(f.push(q),"captions"==q&&(g="caption"))}if(k)return null;k=Gf(c,"ContentProtection");var z=Vf(k,a.h.dash.ignoreDrmInfo),A=U(c.getAttribute("lang")||"und"),D=c.getAttribute("label");(k=Gf(c,"Label"))&&k.length&&(k=k[0],k.textContent&&(D=k.textContent));k=Gf(c,"Representation");c=k.map(function(B){return Hh(a,b,z,g,A,D,d,f,n,B)}).filter(function(B){return!!B});
if(0==c.length){if(a.h.dash.ignoreEmptyAdaptationSet||h)return null;throw new O(2,4,4003);}if(!b.aa.contentType||"application"==b.aa.contentType)for(b.aa.contentType=Ih(c[0].mimeType,c[0].codecs),h=r(c),l=h.next();!l.done;l=h.next())l.value.type=b.aa.contentType;h=r(c);for(l=h.next();!l.done;l=h.next())for(l=l.value,m=r(z.drmInfos),q=m.next();!q.done;q=m.next())q=q.value,q.keyIds=q.keyIds&&l.keyIds?new Set(ia(q.keyIds).concat(ia(l.keyIds))):q.keyIds||l.keyIds;h=k.map(function(B){return B.getAttribute("id")}).filter(Gc);
return{id:b.aa.id||"__fake__"+a.s++,contentType:b.aa.contentType,language:A,Re:d,streams:c,drmInfos:z.drmInfos,bd:e,xe:h}}
function Hh(a,b,c,d,e,f,g,h,k,l){b.C=Dh(l,b.aa,null);if(!Jh(b.C))return null;var m=b.L.start;b.bandwidth=Lf(l,"bandwidth",Qf)||0;var n=b.C.contentType;n="text"==n||"application"==n;try{var q=function(A,D,B){return Kh(a,A,D,B)};if(b.C.Hb)var u=zg(b,q);else if(b.C.La)u=Fg(b,a.f);else if(b.C.Ib)u=Kg(b,q,a.f,!!a.l,a.h.dash.initialSegmentLimit);else{var v=b.C.ka,y=b.L.duration||0;u={eb:function(){return Promise.resolve(og(m,y,v))}}}}catch(A){if(n&&4002==A.code)return null;throw A;}n=Gf(l,"ContentProtection");
n=Zf(n,c,a.h.dash.ignoreDrmInfo);n=new Set(n?[n]:[]);Gf(l,"SupplementalProperty").some(function(A){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==A.getAttribute("schemeIdUri")&&"JOC"==A.getAttribute("value")})&&(b.C.mimeType="audio/eac3-joc");var z={id:a.s++,originalId:b.C.id,createSegmentIndex:function(){var A;return K(function(D){if(1==D.a){if(z.segmentIndex)return D.o(0);A=z;return t(D,u.eb(),3)}A.segmentIndex=D.b;w(D)})},segmentIndex:null,mimeType:b.C.mimeType,codecs:b.C.codecs,frameRate:b.C.frameRate,
pixelAspectRatio:b.C.pixelAspectRatio,bandwidth:b.bandwidth,width:b.C.width,height:b.C.height,kind:d,encrypted:0<c.drmInfos.length,drmInfos:c.drmInfos,keyIds:n,language:e,label:f,type:b.aa.contentType,primary:g,trickModeVideo:null,emsgSchemeIdUris:b.C.emsgSchemeIdUris,roles:h,channelsCount:b.C.Oc,audioSamplingRate:b.C.audioSamplingRate,closedCaptions:k};return z}
p.Db=function(){var a=this,b,c;return K(function(d){switch(d.a){case 1:return b=0,x(d,2),t(d,xh(a),4);case 4:b=d.b;C(d,3);break;case 2:c=J(d),a.m&&(c.severity=1,a.m.onError(c));case 3:if(!a.m)return d["return"]();yh(a,b);w(d)}})};function yh(a,b){0>a.i||a.g.P(Math.max(3,a.i-b,Ra(a.j)))}
function Dh(a,b,c){b=b||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Oc:null,audioSamplingRate:null};c=c||b.ka;var d=Gf(a,"BaseURL").map(Kf),e=a.getAttribute("contentType")||b.contentType,f=a.getAttribute("mimeType")||b.mimeType,g=a.getAttribute("codecs")||b.codecs,h=Lf(a,"frameRate",Sf)||b.frameRate,k=a.getAttribute("sar")||b.pixelAspectRatio,l=Gf(a,"InbandEventStream"),m=b.emsgSchemeIdUris.slice();l=r(l);for(var n=l.next();!n.done;n=l.next())n=
n.value.getAttribute("schemeIdUri"),m.includes(n)||m.push(n);l=Gf(a,"AudioChannelConfiguration");l=Lh(l)||b.Oc;n=Lf(a,"audioSamplingRate",Rf)||b.audioSamplingRate;e||(e=Ih(f,g));return{ka:Ic(c,d),Hb:Ff(a,"SegmentBase")||b.Hb,La:Ff(a,"SegmentList")||b.La,Ib:Ff(a,"SegmentTemplate")||b.Ib,width:Lf(a,"width",Rf)||b.width,height:Lf(a,"height",Rf)||b.height,contentType:e,mimeType:f,codecs:g,frameRate:h,pixelAspectRatio:k,emsgSchemeIdUris:m,id:a.getAttribute("id"),Oc:l,audioSamplingRate:n}}
function Lh(a){a=r(a);for(var b=a.next();!b.done;b=a.next()){var c=b.value;if(b=c.getAttribute("schemeIdUri"))if(c=c.getAttribute("value"))switch(b){case "urn:mpeg:dash:outputChannelPositionList:2012":return c.trim().split(/ +/).length;case "urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case "urn:dts:dash:audio_channel_configuration:2012":b=parseInt(c,10);if(!b)continue;return b;case "tag:dolby.com,2014:dash:audio_channel_configuration:2011":case "urn:dolby:dash:audio_channel_configuration:2011":if(b=
parseInt(c,16)){for(a=0;b;)b&1&&++a,b>>=1;return a}}}return null}function Jh(a){var b=a.Hb?1:0;b+=a.La?1:0;b+=a.Ib?1:0;if(0==b)return"text"==a.contentType||"application"==a.contentType?!0:!1;1!=b&&(a.Hb&&(a.La=null),a.Ib=null);return!0}
function Mh(a,b,c,d){var e,f,g,h,k,l;return K(function(m){if(1==m.a)return e=Ic(b,[c]),f=$b(e,a.h.retryParameters),f.method=d,g=a.m.networkingEngine.request(4,f),Wb(a.c,g),t(m,g.promise,2);h=m.b;if("HEAD"==d){if(!h.headers||!h.headers.date)return m["return"](0);k=h.headers.date}else k=pc(h.data);l=Date.parse(k);return isNaN(l)?m["return"](0):m["return"](l-Date.now())})}
function Ch(a,b,c){var d,e,f,g,h,k,l,m;return K(function(n){switch(n.a){case 1:d=c.map(function(q){return{scheme:q.getAttribute("schemeIdUri"),value:q.getAttribute("value")}}),e=a.h.dash.clockSyncUri,!d.length&&e&&d.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:e}),f=r(d),g=f.next();case 2:if(g.done){n.o(4);break}h=g.value;x(n,5);k=h.scheme;l=h.value;switch(k){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":return n.o(7);case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":return n.o(8);
case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":return m=Date.parse(l),n["return"](isNaN(m)?0:m-Date.now());case "urn:mpeg:dash:utc:http-ntp:2014":case "urn:mpeg:dash:utc:ntp:2014":case "urn:mpeg:dash:utc:sntp:2014":Va("NTP UTCTiming scheme is not supported");break;default:Va("Unrecognized scheme in UTCTiming element",k)}n.o(9);break;case 7:return t(n,Mh(a,b,l,"HEAD"),10);case 10:return n["return"](n.b);case 8:return t(n,Mh(a,b,l,"GET"),11);case 11:return n["return"](n.b);
case 9:C(n,3);break;case 5:J(n);case 3:g=f.next();n.o(2);break;case 4:return Va("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),n["return"](0)}})}
function Eh(a,b,c,d){var e=d.getAttribute("schemeIdUri")||"",f=d.getAttribute("value")||"",g=Lf(d,"timescale",Rf)||1;d=r(Gf(d,"Event"));for(var h=d.next();!h.done;h=d.next()){h=h.value;var k=Lf(h,"presentationTime",Rf)||0,l=Lf(h,"duration",Rf)||0;k=k/g+b;l=k+l/g;null!=c&&(k=Math.min(k,b+c),l=Math.min(l,b+c));h={schemeIdUri:e,value:f,startTime:k,endTime:l,id:h.getAttribute("id")||"",eventElement:h};a.m.onTimelineRegionAdded(h)}}
function Kh(a,b,c,d){var e,f,g,h,k;return K(function(l){if(1==l.a)return e=fc,f=Xg(b,c,d,a.h.retryParameters),g=a.m.networkingEngine,h=g.request(e,f),Wb(a.c,h),t(l,h.promise,2);k=l.b;return l["return"](k.data)})}function Ih(a,b){return ue(Oc(a,b))?"text":a.split("/")[0]}M("shaka.dash.DashParser",wh);Vg.mpd=function(){return new wh};Tg["application/dash+xml"]=function(){return new wh};Tg["video/vnd.mpeg.dash.mpd"]=function(){return new wh};function Nh(a,b,c,d){this.a=a;this.type=b;this.T=c;this.segments=d||null}function Oh(a,b,c,d){this.id=a;this.name=b;this.a=c;this.value=void 0===d?null:d}Oh.prototype.toString=function(){function a(d){return d.name+"="+(isNaN(Number(d.value))?'"'+d.value+'"':d.value)}var b="#"+this.name,c=this.a?this.a.map(a):[];this.value&&c.unshift(this.value);0<c.length&&(b+=":"+c.join(","));return b};
Oh.prototype.getAttribute=function(a){var b=this.a.filter(function(c){return c.name==a});return b.length?b[0]:null};function Ph(a,b,c){return(a=a.getAttribute(b))?a.value:c||null}function Qh(a,b){var c=a.getAttribute(b);if(!c)throw new O(2,4,4023,b);return c.value}function Rh(a,b){this.T=b;this.a=a}function Sh(a,b){this.name=a;this.value=b};function Th(a,b){return a.filter(function(c){return c.name==b})}function Uh(a,b){return a.filter(function(c){return Qh(c,"TYPE")==b})}function Vh(a,b){var c=Th(a,b);return c.length?c[0]:null}function Wh(a,b,c){c=void 0===c?0:c;return(a=Vh(a,b))?Number(a.value):c};function Xh(a){this.b=a;this.a=0}function Yh(a){Zh(a,/[ \t]+/gm)}function Zh(a,b){b.lastIndex=a.a;var c=b.exec(a.b);c=null==c?null:{position:c.index,length:c[0].length,results:c};if(a.a==a.b.length||null==c||c.position!=a.a)return null;a.a+=c.length;return c.results}function $h(a){return a.a==a.b.length?null:(a=Zh(a,/[^ \t\n]*/gm))?a[0]:null};function ai(){this.a=0}
function bi(a,b,c){b=pc(b);b=b.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var d=b.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(d[0]))throw new O(2,4,4015);b=0;for(var e=!0,f=r(d),g=f.next();!g.done;g=f.next())if(g=g.value,/^#(?!EXT)/m.test(g)||e)e=!1;else if(g=ci(a.a++,g),--a.a,di.includes(g.name)){b=1;break}else"EXT-X-STREAM-INF"==g.name&&(e=!0);f=[];e=!0;g=r(fb(d));for(var h=g.next();!h.done;h=g.next()){var k=h.value;h=k.V;var l=k.item;k=k.next;if(/^#(?!EXT)/m.test(l)||e)e=!1;else{l=ci(a.a++,
l);if(ei.includes(l.name)){if(1!=b)throw new O(2,4,4017);l=d.splice(h,d.length-h);d=c;e=[];g=[];h=null;l=r(l);for(k=l.next();!k.done;k=l.next())k=k.value,/^(#EXT)/.test(k)?(k=ci(a.a++,k),di.includes(k.name)?f.push(k):"EXT-X-MAP"==k.name?h=k:g.push(k)):/^#(?!EXT)/m.test(k)||(k=Ic([d],[k.trim()])[0],h&&g.push(h),e.push(new Rh(k,g)),g=[]);return new Nh(c,b,f,e)}f.push(l);"EXT-X-STREAM-INF"==l.name&&(l.a.push(new Sh("URI",k)),e=!0)}}return new Nh(c,b,f)}
function ci(a,b){var c=b.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!c)throw new O(2,4,4016,b);var d=c[1],e=c[2];c=[];var f;if(e){e=new Xh(e);var g;(g=Zh(e,/^([^,=]+)(?:,|$)/g))&&(f=g[1]);for(var h=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;g=Zh(e,h);)c.push(new Sh(g[1],g[2]||g[3]))}return new Oh(a,d,c,f)}var di="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),ei="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function fi(){}function gi(a){try{var b=hi(a);return Bb({uri:a,wd:a,data:b.data,headers:{"content-type":b.contentType}})}catch(c){return zb(c)}}function hi(a){var b=a.split(":");if(2>b.length||"data"!=b[0])throw new O(2,1,1004,a);b=b.slice(1).join(":").split(",");if(2>b.length)throw new O(2,1,1004,a);var c=b[0];a=window.decodeURIComponent(b.slice(1).join(","));b=c.split(";");c=b[0];var d=!1;1<b.length&&"base64"==b[b.length-1]&&(d=!0,b.pop());var e;d?e=cd(a):e=tc(a);return{data:e,contentType:c}}
M("shaka.net.DataUriPlugin",fi);fi.parse=gi;Xb("data",gi);function ii(){var a=this;this.h=this.m=null;this.za=1;this.j=new Map;this.g=new Map;this.pa=new Set;this.a=new Map;this.b=null;this.O="";this.I=new ai;this.ca=0;this.i=new P(function(){a.Db()});this.c=ji;this.l=null;this.R=0;this.Y=Infinity;this.s=new Vb;this.Z=[];this.A=new Map;this.ya=!1;this.f=new Map;this.F=null;this.N=new Map;this.v=new Map}p=ii.prototype;p.configure=function(a){this.h=a};
p.start=function(a,b){var c=this,d,e;return K(function(f){if(1==f.a)return c.m=b,t(f,ki(c,$b([a],c.h.retryParameters),0),2);if(3!=f.a)return d=f.b,c.O=d.uri,t(f,li(c,d.data),3);e=c.ca;0<e&&c.i.P(e);return f["return"](c.l)})};p.stop=function(){this.i&&(this.i.stop(),this.i=null);var a=[];this.s&&(a.push(this.s.destroy()),this.s=null);this.h=this.m=null;this.pa.clear();this.l=null;this.a.clear();this.g.clear();this.f.clear();this.j.clear();return Promise.all(a)};
p.update=function(){var a=this,b,c,d;return K(function(e){if(1==e.a){if(a.c==ji)return e["return"]();b=[];a.F=null;c=Array.from(a.a.values());return c.length?t(e,mi(a,c[0]),2):e.o(2)}for(d=1;d<c.length;d++)b.push(mi(a,c[d]));return t(e,Promise.all(b),0)})};
function mi(a,b){var c,d,e,f,g,h,k,l,m,n;return K(function(q){if(1==q.a)return c=ni,d=b.Ld,t(q,ki(a,$b([d],a.h.retryParameters),0),2);if(3!=q.a){e=q.b;f=bi(a.I,e.data,e.uri);if(1!=f.type)throw new O(2,4,4017);g=Th(f.T,"EXT-X-DEFINE");h=oi(a,g);k=b.stream;return t(q,pi(a,b.jc,f,k.mimeType,b.rd,h),3)}l=q.b;k.segmentIndex.hb(l);l.length&&k.segmentIndex.Na(l[0].startTime);m=l[l.length-1];if(n=Vh(f.T,"EXT-X-ENDLIST"))qi(a,c.Jd),a.b.wa(m.endTime);w(q)})}p.onExpirationUpdated=function(){};
function li(a,b){var c,d,e,f,g,h,k,l,m,n,q,u,v,y,z;return K(function(A){switch(A.a){case 1:c=bi(a.I,b,a.O);if(0!=c.type)throw new O(2,4,4022);d=Th(c.T,"EXT-X-DEFINE");for(var D=r(d),B=D.next();!B.done;B=D.next()){var E=B.value;B=Ph(E,"NAME");E=Ph(E,"VALUE");B&&E&&(a.j.has(B)||a.j.set(B,E))}e=Th(c.T,"EXT-X-MEDIA");f=Th(c.T,"EXT-X-STREAM-INF");D=r(f);for(B=D.next();!B.done;B=D.next()){var H=B.value;E=Ph(H,"AUDIO");B=Ph(H,"VIDEO");var G=Ph(H,"SUBTITLES");H=ri(H);if(G){var F=si("text",H);a.f.set(G,F);
Tb(H,F)}E&&(G=ti("audio",H),a.f.set(E,G));B&&(E=ti("video",H),a.f.set(B,E))}return t(A,ui(a,e),2);case 2:D=Uh(e,"CLOSED-CAPTIONS");D=r(D);for(B=D.next();!B.done;B=D.next())G=B.value,B=vi(G),E=Qh(G,"GROUP-ID"),G=Qh(G,"INSTREAM-ID"),a.A.get(E)||a.A.set(E,new Map),a.A.get(E).set(G,B);return t(A,wi(a,f),3);case 3:return g=A.b,t(A,xi(a,e),4);case 4:h=A.b;if(!a.m)throw new O(2,7,7001);if(a.ya&&0==g.length)throw new O(2,4,4034);l=k=Infinity;m=r(a.a.values());for(n=m.next();!n.done;n=m.next())q=n.value,k=
Math.min(k,q.sd),"text"!=q.stream.type&&(l=Math.min(l,q.ne-q.sd));a.c!=ji?(a.b=new Y(0,a.h.defaultPresentationDelay||3*a.R),a.b.Jb(!1)):(a.b=new Y(null,0),a.b.Jb(!0));yi(a);if(a.c!=ji)a.ca=a.Y,u=ni,a.c==u.Id&&(v=a.b.fc,isNaN(a.h.availabilityWindowOverride)||(v=a.h.availabilityWindowOverride),a.b.Zc(v));else for(a.b.wa(l),a.b.offset(-k),y=r(a.a.values()),n=y.next();!n.done;n=y.next())z=n.value,z.stream.segmentIndex.offset(-k),z.stream.segmentIndex.Ia(0,l);a.l={presentationTimeline:a.b,variants:g,textStreams:h,
offlineSessionIds:[],minBufferTime:0};return t(A,a.m.filter(a.l),0)}})}function oi(a,b){for(var c=new Map,d=r(b),e=d.next();!e.done;e=d.next()){var f=e.value;e=Ph(f,"NAME");var g=Ph(f,"VALUE");f=Ph(f,"IMPORT");e&&g&&c.set(e,g);f&&(e=a.j.get(f))&&c.set(f,e)}return c}
function xi(a,b){var c,d,e,f,g,h,k,l,m,n,q,u;return K(function(v){if(1==v.a)return c=Uh(b,"SUBTITLES"),d=c.map(function(y){var z,A,D;return K(function(B){if(1==B.a){if(z=a.h.disableText)return B["return"](null);x(B,2);return t(B,zi(a,y),4)}if(2!=B.a)return A=B.b,B["return"](A.stream);D=J(B);if(a.h.hls.ignoreTextStreamFailures)return B["return"](null);throw D;})}),t(v,Promise.all(d),2);e=v.b;f=r(c);for(g=f.next();!g.done;g=f.next())if(h=g.value,k=Qh(h,"GROUP-ID"),l=a.f.get(k))if(m=a.g.get(k))for(n=
r(m),q=n.next();!q.done;q=n.next())u=q.value,u.stream.codecs=l;return v["return"](e.filter(function(y){return y}))})}function ui(a,b){var c;return K(function(d){if(1==d.a)return b=b.filter(function(e){var f=Ph(e,"URI")||"";return"SUBTITLES"!=Ph(e,"TYPE")&&""!=f}),b.length?t(d,zi(a,b[0]),2):d.o(2);c=b.slice(1).map(function(e){return zi(a,e)});return t(d,Promise.all(c),0)})}
function wi(a,b){var c,d,e;return K(function(f){if(1==f.a)return c=b.map(function(g){var h,k,l,m,n,q,u;return K(function(v){return 1==v.a?(h=Ph(g,"FRAME-RATE"),k=Number(Qh(g,"BANDWIDTH")),l=Ph(g,"RESOLUTION"),m=r(l?l.split("x"):[null,null]),n=m.next().value,q=m.next().value,t(v,Ai(a,g,l,h),2)):(u=v.b)?v["return"](Bi(a,u.audio,u.video,k,n,q,h)):v["return"]([])})}),t(f,Promise.all(c),2);d=f.b;e=d.reduce(Ec,[]);e=e.filter(function(g){return null!=g});return f["return"](e)})}
function Ai(a,b,c,d){var e,f,g,h,k,l,m,n,q,u,v,y,z,A;return K(function(D){if(1==D.a)return e=Kc,f=ri(b),g=Ph(b,"AUDIO"),h=Ph(b,"VIDEO"),l=(k=g||h)&&a.g.has(k)?a.g.get(k):[],m={audio:g?l:[],video:h?l:[]},q=!1,u=Qh(b,"URI"),v=m.audio.find(function(B){return B&&B.jc==u}),y=si(e.Aa,f),z=c||d||y,1!=f.length||z?!l.length&&1<f.length?(n=e.Aa,f=[f.join(",")]):m.audio.length&&v?(n=e.bb,q=!0):n=m.video.length?e.bb:e.Aa:n=e.bb,q?D.o(2):t(D,Hi(a,b,f,n),3);2!=D.a&&(A=D.b);if(A)m[A.stream.type]=[A];else if(null===
A)return D["return"](null);Ii(m);return D["return"](m)})}function ri(a){var b=Ph(a,"CODECS","avc1.42E01E,mp4a.40.2").split(/\s*,\s*/);a=new Set;var c=[];b=r(b);for(var d=b.next();!d.done;d=b.next()){d=d.value;var e=Rc(d)[0];a.has(e)||(c.push(d),a.add(e))}return c}function vi(a){a=Ph(a,"LANGUAGE")||"und";return U(a)}
function Ii(a){a=r(a.audio.concat(a.video));for(var b=a.next();!b.done;b=a.next())if(b=b.value){var c=b.stream.codecs.split(",");c=c.filter(function(d){return"mp4a.40.34"!=d});b.stream.codecs=c.join(",")}}
function Bi(a,b,c,d,e,f,g){for(var h=r(c),k=h.next();!k.done;k=h.next()){k=k.value.stream;var l=f,m=g;k&&(k.width=Number(e)||void 0,k.height=Number(l)||void 0,k.frameRate=Number(m)||void 0)}e=a.h.disableAudio;if(!b.length||e)b=[null];e=a.h.disableVideo;if(!c.length||e)c=[null];e=[];b=r(b);for(f=b.next();!f.done;f=b.next())for(f=f.value,g=r(c),h=g.next();!h.done;h=g.next()){var n=h.value;h=f?f.stream:null;k=n?n.stream:null;l=f?f.stream.drmInfos:null;m=n?n.stream.drmInfos:null;n=(n?n.jc:"")+" - "+(f?
f.jc:"");h&&k&&!(l.length&&m.length?0<Pd(l,m).length:1)||a.pa.has(n)||(h={id:a.za++,language:h?h.language:"und",primary:!!h&&h.primary||!!k&&k.primary,audio:h,video:k,bandwidth:d,allowedByApplication:!0,allowedByKeySystem:!0},e.push(h),a.pa.add(n))}return e}
function zi(a,b){var c,d,e,f,g,h,k,l,m,n,q,u;return K(function(v){if(1==v.a){c=Qh(b,"GROUP-ID");d="";var y=Qh(b,"TYPE").toLowerCase();"subtitles"==y&&(y="text");e=y;"text"!=e&&c&&a.f.has(c)&&(d=a.f.get(c));f=Ji(Qh(b,"URI"),a.j);if(a.a.has(f))return v["return"](a.a.get(f));g=vi(b);h=Ph(b,"NAME");k=b.getAttribute("DEFAULT");l=b.getAttribute("AUTOSELECT");m=!!k||!!l;"audio"==e?y=(y=Ph(b,"CHANNELS"))?parseInt(y.split("/")[0],10):null:y=null;n=y;q=Ph(b,"CHARACTERISTICS");return t(v,Ki(a,f,d,e,g,m,h,n,
null,q),2)}u=v.b;a.g.has(c)?a.g.get(c).push(u):a.g.set(c,[u]);if(null==u)return v["return"](null);if(a.a.has(f))return v["return"](a.a.get(f));a.a.set(f,u);return v["return"](u)})}
function Hi(a,b,c,d){var e,f,g,h;return K(function(k){if(1==k.a){e=Ji(Qh(b,"URI"),a.j);if(a.a.has(e))return k["return"](a.a.get(e));var l=Ph(b,"CLOSED-CAPTIONS");f="video"==d&&l&&"NONE"!=l?a.A.get(l):null;g=ti(d,c);return t(k,Ki(a,e,g,d,"und",!1,null,null,f,null),2)}h=k.b;if(null==h)return k["return"](null);if(a.a.has(e))return k["return"](a.a.get(e));a.a.set(e,h);return k["return"](h)})}
function Ki(a,b,c,d,e,f,g,h,k,l){var m,n,q,u,v,y,z,A,D,B,E,H,G,F,I,L,T,N,ca,ra,Fa,va,Ga,za,sa,Fb,wf,Ci,Di,Ei,Fi,xf,Gi;return K(function(Ha){switch(Ha.a){case 1:return m=Ic([a.O],[b])[0],t(Ha,ki(a,$b([m],a.h.retryParameters),0),2);case 2:n=Ha.b;m=n.uri;q=bi(a.I,n.data,m);if(1!=q.type)throw new O(2,4,4017);u=[];if(q.segments)for(v=r(q.segments),y=v.next();!y.done;y=v.next())z=y.value,A=Th(z.T,"EXT-X-KEY"),u.push.apply(u,ia(A));D=!1;B=[];E=new Set;H=r(u);for(G=H.next();!G.done;G=H.next())if(F=G.value,
I=Qh(F,"METHOD"),"NONE"!=I){D=!0;if("AES-128"==I)return a.ya=!0,Ha["return"](null);L=Qh(F,"KEYFORMAT");if(N=(T=Li[L])?T(F):null){if(N.keyIds)for(ca=r(N.keyIds),ra=ca.next();!ra.done;ra=ca.next())Fa=ra.value,E.add(Fa);B.push(N)}}if(D&&!B.length)throw new O(2,4,4026);va=Th(q.T,"EXT-X-DEFINE");Ga=oi(a,va);Mi(a,q);return t(Ha,Ni(a,d,c,q,Ga),3);case 3:return za=Ha.b,Oi.includes(za)&&(c=""),sa=new Map,x(Ha,4),t(Ha,pi(a,b,q,za,sa,Ga),6);case 6:Fb=Ha.b;C(Ha,5);break;case 4:wf=J(Ha);if(4035==wf.code)return Va("Skipping unsupported HLS stream",
za,b),Ha["return"](null);throw wf;case 5:return Ci=Fb[0].startTime,Di=Fb[Fb.length-1].endTime,Ei=new X(Fb),Fi="text"==d?"subtitle":void 0,xf=[],l&&xf.push(l),Gi={id:a.za++,originalId:g,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ei,mimeType:za,codecs:c,kind:Fi,encrypted:D,drmInfos:B,keyIds:E,language:e,label:g,type:d,primary:f,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:xf,channelsCount:h,
audioSamplingRate:null,closedCaptions:k},Ha["return"]({stream:Gi,jc:b,Ld:m,sd:Ci,ne:Di,rd:sa})}})}function Mi(a,b){var c=Vh(b.T,"EXT-X-PLAYLIST-TYPE"),d=Vh(b.T,"EXT-X-ENDLIST");d=c&&"VOD"==c.value||d;c=c&&"EVENT"==c.value&&!d;c=!d&&!c;d?qi(a,ji):(c?qi(a,Pi):qi(a,Qi),d=Ri(b.T,"EXT-X-TARGETDURATION"),d=Number(d.value),a.R=Math.max(d,a.R),a.Y=Math.min(d,a.Y))}
function Si(a,b,c,d){c=Vh(c,"EXT-X-MAP");if(!c)return null;var e=Qh(c,"URI");d=Ji(Ic([b],[e])[0],d);b=[d,Ph(c,"BYTERANGE","")].join("-");a.N.has(b)||(c=Ti(d,c),a.N.set(b,c));return a.N.get(b)}function Ti(a,b){var c=0,d=null,e=Ph(b,"BYTERANGE");e&&(c=e.split("@"),d=Number(c[0]),c=Number(c[1]),d=c+d-1);return new jg(function(){return[a]},c,d)}
function Ui(a,b,c,d,e,f){var g=c.T,h=Ji(c.a,f);c=Ri(g,"EXTINF").value.split(",");c=d+Number(c[0]);f=0;var k=null;if(g=Vh(g,"EXT-X-BYTERANGE"))f=g.value.split("@"),g=Number(f[0]),f=f[1]?Number(f[1]):b.a+1,k=f+g-1;return new kg(d,c,function(){return[h]},f,k,a,e,0,Infinity)}function yi(a){if(a.b){for(var b=r(a.Z),c=b.next();!c.done;c=b.next())a.b.jb(c.value);a.Z=[]}}
function pi(a,b,c,d,e,f){var g,h,k,l,m,n,q,u,v,y,z,A,D,B,E,H,G,F,I,L,T;return K(function(N){switch(N.a){case 1:g=c.segments;k=Wh(c.T,"EXT-X-MEDIA-SEQUENCE",0);if(a.c!=ji&&e.has(k)){l=e.get(k);N.o(2);break}if(null!=a.F){N.o(3);break}h=Si(a,c.a,g[0].T,f);m=a;return t(N,Vi(a,b,h,d,k,!1,g[0],f),4);case 4:m.F=N.b;case 3:l=a.F;case 2:n=g[0].a,Ya(n.split("/").pop()),q=Wh(c.T,"EXT-X-DISCONTINUITY-SEQUENCE"),u=a.v.get(q)||0,v=[],y=function(ca){return fb(ca)},z=r(y(g)),A=z.next();case 5:if(A.done){N.o(7);break}B=
D=A.value;E=B.V;H=B.item;G=v[v.length-1];F=0==E?l:G.endTime;I=k+E;e.set(I,F);h=Si(a,c.a,H.T,f);L=Vh(H.T,"EXT-X-DISCONTINUITY");if(!L){N.o(8);break}q++;return t(N,Wi(a,q,b,h,d,I,H,f,F),9);case 9:u=N.b;case 8:T=Ui(h,G,H,F,u,f);v.push(T);A=z.next();N.o(5);break;case 7:return a.Z.push(v),yi(a),N["return"](v)}})}
function Wi(a,b,c,d,e,f,g,h,k){var l,m;return K(function(n){if(1==n.a)return l=0,a.v.has(b)?(l=a.v.get(b),n.o(2)):t(n,Vi(a,c,d,e,f,!0,g,h),3);2!=n.a&&(m=n.b,l=k-m,a.v.set(b,l));return n["return"](l)})}
function Xi(a,b){var c,d,e,f,g,h;return K(function(k){switch(k.a){case 1:c=fc;d=Xg(b.c(),b.b,b.a,a.h.retryParameters);if(a.h.hls.useFullSegmentsForStartTime)return k["return"](ki(a,d,c));e=Xg(b.c(),b.b,b.b+2048-1,a.h.retryParameters);x(k,2);return t(k,ki(a,e,c),4);case 4:return f=k.b,k["return"](f);case 2:g=J(k);if(7001==g.code)throw g;Va("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",
e.uris[0]);return t(k,ki(a,d,c),5);case 5:return h=k.b,k["return"](h)}})}
function Vi(a,b,c,d,e,f,g,h){var k,l,m,n,q,u,v,y;return K(function(z){switch(z.a){case 1:k=Ui(c,null,g,0,0,h);if(a.l&&!f&&(l=a.a.get(b),m=l.rd.get(e),void 0!=m))return z["return"](m);d=d.toLowerCase();if(Oi.includes(d))throw Va("Raw formats are not yet supported.  Skipping "+d),new O(1,4,4035);if("video/webm"==d)throw Va("WebM in HLS is not yet supported.  Skipping."),new O(1,4,4035);if("video/mp4"!=d&&"audio/mp4"!=d){z.o(2);break}n=[Xi(a,k)];c&&n.push(Xi(a,c));return t(z,Promise.all(n),3);case 3:return q=
z.b,u=q[0],v=q[1]||q[0],z["return"](Yi(b,u.uri,u.data,v.data));case 2:if("video/mp2t"!=d){z.o(4);break}return t(z,Xi(a,k),5);case 5:return y=z.b,z["return"](Zi(b,y.uri,y.data));case 4:throw new O(2,4,4030,b);}})}
function Yi(a,b,c,d){var e=0;(new W).J("moov",zf).J("trak",zf).J("mdia",zf).ea("mdhd",function(h){h.reader.skip(0==h.version?8:16);e=h.reader.G();h.parser.stop()}).parse(d,!0);if(!e)throw new O(2,4,4030,a,b);var f=0,g=!1;(new W).J("moof",zf).J("traf",zf).ea("tfdt",function(h){f=(0==h.version?h.reader.G():h.reader.mb())/e;g=!0;h.parser.stop()}).parse(c,!0);if(!g)throw new O(2,4,4030,a,b);return f}
function Zi(a,b,c){function d(){f.seek(g+188);h=f.ma();71!=h&&(f.seek(g+192),h=f.ma());71!=h&&(f.seek(g+204),h=f.ma());71!=h&&e();f.yd(1)}function e(){throw new O(2,4,4030,a,b);}for(var f=new V(c,0),g=0,h=0;;)if(g=f.w,h=f.ma(),71!=h&&e(),c=f.Fb(),8191==(c&8191))d();else if(c&16384)if(c=(f.ma()&48)>>4,0!=c&&2!=c||e(),3==c&&(c=f.ma(),f.skip(c)),1!=f.G()>>8)d();else{f.skip(3);c=f.ma()>>6;0!=c&&1!=c||e();0==f.ma()&&e();c=f.ma();var k=f.Fb(),l=f.Fb();return(1073741824*((c&14)>>1)+((k&65534)<<14|(l&65534)>>
1))/9E4}else d()}function ti(a,b){if(1==b.length)return b[0];var c=si(a,b);if(null!=c)return c;throw new O(2,4,4025,b);}function si(a,b){for(var c=r($i[a]),d=c.next();!d.done;d=c.next()){d=d.value;for(var e=r(b),f=e.next();!f.done;f=e.next())if(f=f.value,d.test(f.trim()))return f.trim()}return"text"==a?"":null}
function Ji(a,b){var c=String(a).replace(/%7B/g,"{").replace(/%7D/g,"}"),d=c.match(/{\$\w*}/g);if(d){d=r(d);for(var e=d.next();!e.done;e=d.next()){e=e.value;var f=e.slice(2,e.length-1),g=b.get(f);if(g)c=c.replace(e,g);else throw new O(2,4,4039,f);}}return c}
function Ni(a,b,c,d,e){var f,g,h,k,l,m,n,q,u,v;return K(function(y){if(1==y.a){f=Kc;g=fc;h=Ji(d.segments[0].a,e);k=new hb(h);l=k.ga.split(".").pop();m=aj[b];if(n=m[l])return y["return"](n);if(b==f.$)return c&&"vtt"!=c&&"wvtt"!=c?y["return"]("application/mp4"):y["return"]("text/vtt");q=$b([h],a.h.retryParameters);q.method="HEAD";return t(y,ki(a,q,g),2)}u=y.b;v=u.headers["content-type"];if(!v)throw new O(2,4,4021,l);return y["return"](v.split(";")[0])})}
function Ri(a,b){var c=Vh(a,b);if(!c)throw new O(2,4,4024,b);return c}p.Db=function(){var a=this,b,c;return K(function(d){if(1==d.a){if(!a.m)return d["return"]();x(d,2);return t(d,a.update(),4)}if(2!=d.a)return b=a.ca,a.i.P(b),C(d,0);c=J(d);if(!a.m)return d["return"]();c.severity=1;a.m.onError(c);a.i.P(.1);w(d)})};function qi(a,b){a.c=b;a.b&&a.b.Jb(a.c==ji);a.c!=ji||a.i.stop()}function ki(a,b,c){if(!a.s)throw new O(2,7,7001);b=a.m.networkingEngine.request(c,b);Wb(a.s,b);return b.promise}
M("shaka.hls.HlsParser",ii);
var $i={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},Oi=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"],aj={audio:{mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},video:{mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",
m4s:"application/mp4",m4i:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}},Li={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(a){var b=Qh(a,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(b))return null;b=Qh(a,"URI");b=hi(b);b=R(b.data);b=Jc("com.widevine.alpha",[{initDataType:"cenc",initData:b}]);if(a=Ph(a,"KEYID"))b.keyIds=new Set([a.toLowerCase().substr(2)]);return b}},ji="VOD",Qi="EVENT",Pi="LIVE",ni={Jd:ji,Oe:Qi,Id:Pi};Vg.m3u8=function(){return new ii};
Tg["application/x-mpegurl"]=function(){return new ii};Tg["application/vnd.apple.mpegurl"]=function(){return new ii};function bj(a,b){this.a=a;this.b=new Set([a]);b=b||[];for(var c=r(b),d=c.next();!d.done;d=c.next())this.add(d.value)}bj.prototype.add=function(a){return cj(this.a,a)?(this.b.add(a),!0):!1};function cj(a,b){var c;if(!(c=!!a.audio!=!!b.audio||!!a.video!=!!b.video||a.language!=b.language)&&(c=a.audio&&b.audio)){c=a.audio;var d=b.audio;c=!(c.channelsCount==d.channelsCount&&dj(c,d)&&ej(c.roles,d.roles))}!c&&(c=a.video&&b.video)&&(c=a.video,d=b.video,c=!(dj(c,d)&&ej(c.roles,d.roles)));return c?!1:!0}
bj.prototype.values=function(){return this.b.values()};function dj(a,b){if(a.mimeType!=b.mimeType)return!1;var c=a.codecs.split(",").map(function(g){return Rc(g)[0]}),d=b.codecs.split(",").map(function(g){return Rc(g)[0]});if(c.length!=d.length)return!1;c.sort();d.sort();for(var e=r(db(c.length)),f=e.next();!f.done;f=e.next())if(f=f.value,c[f]!=d[f])return!1;return!0}
function ej(a,b){var c=new Set(a),d=new Set(b);c["delete"]("main");d["delete"]("main");if(c.size!=d.size)return!1;c=r(c);for(var e=c.next();!e.done;e=c.next())if(!d.has(e.value))return!1;return!0};function fj(a){this.a=a;this.b=new gj(a.language,"",a.audio&&a.audio.channelsCount?a.audio.channelsCount:0,"")}fj.prototype.create=function(a){var b=this,c=a.filter(function(d){return cj(b.a,d)});return c.length?new bj(c[0],c):this.b.create(a)};function gj(a,b,c,d,e){this.f=a;this.c=b;this.a=c;this.b=void 0===d?"":d;this.g=void 0===e?"":e}
gj.prototype.create=function(a){var b=[];b=hj(a,this.f);var c=a.filter(function(d){return d.primary});b=b.length?b:c.length?c:a;this.c&&(a=ij(b,this.c,this.g),a.length&&(b=a));this.a&&(a=bf(b,this.a),a.length&&(b=a));this.b&&(a=jj(b,this.b),a.length&&(b=a));a=new bj(b[0]);b=r(b);for(c=b.next();!c.done;c=b.next())c=c.value,cj(a.a,c)&&a.add(c);return a};function hj(a,b){var c=U(b),d=$e(c,a.map(function(e){return Ze(e)}));return d?a.filter(function(e){return d==Ze(e)}):[]}
function ij(a,b,c){return a.filter(function(d){if(c){var e=d[c];return e&&e.roles.includes(b)}e=d.audio;d=d.video;return e&&e.roles.includes(b)||d&&d.roles.includes(b)})}function jj(a,b){return a.filter(function(c){return c.audio?c.audio.label.toLowerCase()==b.toLowerCase():!1})};function kj(){this.a=lj;this.b=(new Map).set(lj,2).set(mj,1)}function nj(a,b,c){a.b.set(lj,c).set(mj,b)}var mj=0,lj=1;function oj(a,b){this.g=a;this.i=pj(a);this.a=a.a.currentTime;this.f=Date.now()/1E3;this.b=!1;this.j=b;this.c=function(){}}oj.prototype.release=function(){this.g=null;this.c=function(){}};function qj(a,b){a.c=b}function rj(a){this.a=a}function pj(a){if(a.a.paused||0==a.a.playbackRate||0==a.a.buffered.length)var b=!1;else a:{b=a.a.currentTime;a=r(Xd(a.a.buffered));for(var c=a.next();!c.done;c=a.next())if(c=c.value,!(b<c.start-.1||b>c.end-.5)){b=!0;break a}b=!1}return b};function sj(a,b,c,d,e){var f=this;this.a=a;this.A=b;this.h=c;this.s=e;this.b=new ic;this.j=!1;this.v=a.readyState;this.f=!1;this.c=d;this.i=!1;this.b.D(a,"waiting",function(){return tj(f)});this.g=(new P(function(){tj(f)})).na(.25)}sj.prototype.release=function(){this.b&&(this.b.release(),this.b=null);null!=this.g&&(this.g.stop(),this.g=null);this.c&&(this.c.release(),this.c=null);this.a=this.A=this.s=null};sj.prototype.Qc=function(){this.i=!0;tj(this)};
function tj(a){if(0!=a.a.readyState){if(a.a.seeking){if(!a.j)return}else a.j=!1;if(!a.a.paused){a.a.readyState!=a.v&&(a.f=!1,a.v=a.a.readyState);var b;if(!(b=!a.c)){b=a.c;var c=b.g,d=pj(c),e=c.a.currentTime,f=Date.now()/1E3;if(b.a!=e||b.i!=d)b.f=f,b.a=e,b.i=d,b.b=!1;e=f-b.f;if(d=e>=b.j&&d&&!b.b)b.c(b.a,e),b.b=!0,b.a=c.a.currentTime;b=!d}if(b){var g=a.h.smallGapLimit;e=a.a.currentTime;b=a.a.buffered;c=Yd(b,e);if(!(null==c||0==c&&!a.i||(d=b.start(c),d>=a.A.Ca()))){f=d-e;g=f<=g;var h=!1;.001>f||(g||
a.f||(a.f=!0,e=new Mb("largegap",{currentTime:e,gapSize:f}),e.cancelable=!0,a.s(e),a.h.jumpLargeGaps&&!e.defaultPrevented&&(h=!0)),!g&&!h)||(0!=c&&b.end(c-1),a.a.currentTime=d)}}}}};function uj(a){var b=this;this.a=a;this.f=!1;this.b=this.a.$b();this.c=new P(function(){b.a.td(.25*b.b)})}uj.prototype.release=function(){this.c&&(this.c.stop(),this.c=null);this.a=null};uj.prototype.set=function(a){this.b=a;vj(this)};function vj(a){a.c.stop();var b=a.f?0:a.b;if(0<=b)try{a.a.$b()!=b&&a.a.Yc(b);return}catch(c){}a.c.na(.25);0!=a.a.$b()&&a.a.Yc(0)};function wj(a,b,c,d){b==HTMLMediaElement.HAVE_NOTHING||a.readyState>=b?d():(b=xj.get(b),c.la(a,b,d))}var xj=new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]]);function yj(a,b,c){var d=this;this.a=a;this.g=b;this.f=c;this.i=!1;this.b=new ic;this.c=new zj(a);wj(this.a,HTMLMediaElement.HAVE_METADATA,this.b,function(){Aj(d,d.f)})}yj.prototype.release=function(){this.b&&(this.b.release(),this.b=null);null!=this.c&&(this.c.release(),this.c=null);this.g=function(){};this.a=null};function Bj(a){return a.i?a.a.currentTime:a.f}function Cj(a,b){0<a.a.readyState?Dj(a.c,b):wj(a.a,HTMLMediaElement.HAVE_METADATA,a.b,function(){Aj(a,a.f)})}
function Aj(a,b){.001>Math.abs(a.a.currentTime-b)?Ej(a):(a.b.la(a.a,"seeking",function(){Ej(a)}),Dj(a.c,0==a.a.currentTime?b:a.a.currentTime))}function Ej(a){a.i=!0;a.b.D(a.a,"seeking",function(){return a.g()})}function zj(a){var b=this;this.b=a;this.i=10;this.g=this.f=this.c=0;this.a=new P(function(){0>=b.c?b.a.stop():b.b.currentTime!=b.f?b.a.stop():(b.b.currentTime=b.g,b.c--)})}zj.prototype.release=function(){this.a&&(this.a.stop(),this.a=null);this.b=null};
function Dj(a,b){a.f=a.b.currentTime;a.g=b;a.c=a.i;a.b.currentTime=b;a.a.na(.1)};function Fj(a){function b(){null==c.c?c.f=!0:(c.b.la(c.a,"seeking",function(){c.f=!0}),c.a.currentTime=Math.max(0,c.a.currentTime+c.c))}var c=this;this.a=a;this.f=!1;this.c=null;this.b=new ic;wj(this.a,HTMLMediaElement.HAVE_CURRENT_DATA,this.b,function(){b()})}Fj.prototype.release=function(){this.b&&(this.b.release(),this.b=null);this.a=null};Fj.prototype.s=function(a){this.c=this.f?this.c:a};Fj.prototype.g=function(){return(this.f?this.a.currentTime:this.c)||0};Fj.prototype.v=function(){};
function Gj(a,b,c,d,e,f){var g=this;this.b=a;this.a=b.presentationTimeline;this.F=b.minBufferTime||0;this.h=c;this.A=e;this.j=null;this.f=new sj(a,b.presentationTimeline,c,Hj(a,c),f);this.c=new yj(a,function(){a:{var h=g.f;h.j=!0;h.i=!1;h.f=!1;var k=Bj(g.c);h=Ij(g,k);if(.001<Math.abs(h-k)&&(k=(new Date).getTime()/1E3,!g.j||g.j<k-1)){g.j=k;Cj(g.c,h);h=void 0;break a}g.A();h=void 0}return h},Jj(this,d));this.i=(new P(function(){if(0!=g.b.readyState&&!g.b.paused){var h=g.b.currentTime,k=g.a.fb(),l=g.a.Ca();
3>l-k&&(k=l-3);h<k&&(h=Ij(g,h),g.b.currentTime=h)}})).na(.25)}Gj.prototype.release=function(){this.c&&(this.c.release(),this.c=null);this.f&&(this.f.release(),this.f=null);this.i&&(this.i.stop(),this.i=null);this.b=this.c=this.a=this.h=null;this.A=function(){}};Gj.prototype.s=function(a){Cj(this.c,a)};Gj.prototype.g=function(){var a=Bj(this.c);return 0<this.b.readyState&&!this.b.paused?Kj(this,a):a};
function Jj(a,b){null==b?b=Infinity>a.a.getDuration()?a.a.fb():a.a.Ca():0>b&&(b=a.a.Ca()+b);return Lj(a,Kj(a,b))}Gj.prototype.v=function(){this.f.Qc()};function Lj(a,b){var c=a.a.getDuration();return b>=c?c-a.h.durationBackoff:b}function Ij(a,b){var c=Math.max(a.F,a.h.rebufferingGoal),d=a.h.safeSeekOffset,e=a.a.fb(),f=a.a.Ca(),g=a.a.getDuration();3>f-e&&(e=f-3);var h=a.a.zb(c),k=a.a.zb(d);c=a.a.zb(c+d);return b>=g?Lj(a,b):b>f?f:b<e?Vd(a.b.buffered,k)?k:c:b>=h||Vd(a.b.buffered,b)?b:c}
function Kj(a,b){var c=a.a.fb();if(b<c)return c;c=a.a.Ca();return b>c?c:b}function Hj(a,b){if(!b.stallEnabled)return null;var c=b.stallSkip,d=new oj(new rj(a),b.stallThreshold);qj(d,function(){c?a.currentTime+=c:(a.pause(),a.play())});return d};function Mj(a){var b=this;this.c=a;this.a=new Set;this.b=(new P(function(){Nj(b,!1)})).na(.25)}Mj.prototype.release=function(){this.b.stop();for(var a=r(this.a),b=a.next();!b.done;b=a.next())b.value.release();this.a.clear()};
function Nj(a,b){for(var c=r(a.a),d=c.next();!d.done;d=c.next()){d=d.value;for(var e=a.c.currentTime,f=b,g=r(d.g.a),h=g.next();!h.done;h=g.next()){h=h.value;var k=d.f.get(h),l=e<h.startTime?Oj:e>h.endTime?Pj:Qj;d.f.set(h,l);for(var m=r(d.i),n=m.next();!n.done;n=m.next())n=n.value,n.Za==k&&n.Ya==l&&n.Ra(h,f)}}};function Rj(a){var b=this;this.b=function(){};this.a=new Set;this.f=a;this.c=(new P(function(){for(var c=b.f(),d=r(b.a),e=d.next();!e.done;e=d.next())e=e.value,e.endTime<c.start&&b.a["delete"](e)})).na(2)}Rj.prototype.release=function(){this.b=function(){};this.a.clear();this.c.stop()};function Sj(a,b){a.b=b};function Tj(a){var b=this;this.g=a;this.f=new Map;this.a=function(){};this.b=function(){};this.c=function(){};this.i=[{Za:null,Ya:Qj,Ra:function(c,d){return b.a(c,d)}},{Za:Oj,Ya:Qj,Ra:function(c,d){return b.a(c,d)}},{Za:Pj,Ya:Qj,Ra:function(c,d){return b.a(c,d)}},{Za:Qj,Ya:Oj,Ra:function(c,d){return b.b(c,d)}},{Za:Qj,Ya:Pj,Ra:function(c,d){return b.b(c,d)}},{Za:Oj,Ya:Pj,Ra:function(c,d){return b.c(c,d)}},{Za:Pj,Ya:Oj,Ra:function(c,d){return b.c(c,d)}}]}
Tj.prototype.release=function(){this.g=null;this.f.clear();this.a=function(){};this.b=function(){};this.c=function(){}};function Uj(a,b,c,d){a.a=b;a.b=c;a.c=d}var Oj=1,Qj=2,Pj=3;function Vj(a,b){var c=this;this.m=b;this.l=a;this.h=null;this.f=1;this.c=this.b=null;this.a=new Map;this.i=!1;this.j=null;this.g=!1;this.B=new gc(function(){return Wj(c)})}Vj.prototype.destroy=function(){return this.B.destroy()};function Wj(a){var b,c,d,e;return K(function(f){if(1==f.a){b=[];c=r(a.a.values());for(d=c.next();!d.done;d=c.next())e=d.value,Xj(e),b.push(Yj(e));return t(f,Promise.all(b),2)}a.a.clear();a.m=null;a.l=null;a.h=null;w(f)})}
Vj.prototype.configure=function(a){this.h=a;this.j=new vb({maxAttempts:Math.max(a.retryParameters.maxAttempts,2),baseDelay:a.retryParameters.baseDelay,backoffFactor:a.retryParameters.backoffFactor,fuzzFactor:a.retryParameters.fuzzFactor,timeout:0},!0)};Vj.prototype.start=function(){var a=this;return K(function(b){if(1==b.a)return t(b,Zj(a),2);hc(a.B);a.i=!0;w(b)})};
function ak(a,b){var c,d,e,f,g,h;K(function(k){switch(k.a){case 1:return c=Kc,x(k,2),t(k,Pe(a.m.H,c.$),4);case 4:C(k,3);break;case 2:if(d=J(k),a.m)a.m.onError(d);case 3:e=Oc(b.mimeType,b.codecs);Fe(a.m.H,e);f=a.m.H.i;if(g=f.isTextVisible()||a.h.alwaysStreamText)h=bk(b),a.a.set(c.$,h),ck(a,h,0);w(k)}})}function dk(a){var b=a.a.get("text");b&&(Xj(b),Yj(b)["catch"](function(){}),a.a["delete"]("text"));a.c=null}
function ek(a,b){var c=a.a.get("video");if(c){var d=c.stream;if(d)if(b){var e=d.trickModeVideo;e&&!c.Wa&&(fk(a,e,!1,0,!1),c.Wa=d)}else if(d=c.Wa)c.Wa=null,fk(a,d,!0,0,!1)}}function gk(a,b,c,d){c=void 0===c?!1:c;d=void 0===d?0:d;a.b=b;a.i&&(b.video&&fk(a,b.video,c,d,!1),b.audio&&fk(a,b.audio,c,d,!1))}function hk(a,b){a.c=b;a.i&&fk(a,b,!0,0,!1)}
function fk(a,b,c,d,e){var f=a.a.get(b.type);f||"text"!=b.type?f&&(f.Wa&&(b.trickModeVideo?(f.Wa=b,b=b.trickModeVideo):f.Wa=null),f.stream!=b||e)&&("text"==b.type&&Fe(a.m.H,Oc(b.mimeType,b.codecs)),f.stream=b,f.stream.segmentIndex?f.va=f.stream.segmentIndex[Symbol.iterator]():f.va=null,c&&(f.vb?f.lc=!0:f.Ua?(f.ob=!0,f.Vb=d,f.lc=!0):(Xj(f),ik(a,f,!0,d)["catch"](function(g){if(a.m)a.m.onError(g)}))),jk(a,f)["catch"](function(g){if(a.m)a.m.onError(g)})):ak(a,b)}
function jk(a,b){var c,d;return K(function(e){if(1==e.a){if(!b.Da)return e["return"]();c=b.stream;d=b.Da;return c.segmentIndex?e.o(2):t(e,c.createSegmentIndex(),2)}if(b.Da!=d||b.stream!=c)return e["return"]();b.va=b.stream.segmentIndex[Symbol.iterator]();var f=a.m.Zb();var g=Ke(a.m.H,b.type),h=kk(a,b,f,g),k=h?h.a?h.a-h.b:null:null;h&&!k&&(k=(h.endTime-h.startTime)*(b.stream.bandwidth||0)/8);k?((h=h.f)&&(k+=(h.a?h.a-h.b:null)||0),h=a.m.getBandwidthEstimate(),f=8*k/h<(g||0)-f-Math.max(a.l.minBufferTime||
0,a.h.rebufferingGoal)||b.Da.b.a>k?!0:!1):f=!1;f&&b.Da.abort();w(e)})}function lk(a,b){b.vb||b.ob||(b.Ua?(b.ob=!0,b.Vb=0):null==Ie(a.m.H,b.type)?null==b.Ga&&ck(a,b,0):(Xj(b),ik(a,b,!1,0)["catch"](function(c){if(a.m)a.m.onError(c)})))}
function Zj(a){var b,c,d,e,f,g,h,k,l,m;return K(function(n){if(1==n.a){b=Kc;if(!a.b)throw new O(2,5,5006);c=new Map;d=new Set;a.b.audio&&(c.set(b.bb,a.b.audio),d.add(a.b.audio));a.b.video&&(c.set(b.Aa,a.b.video),d.add(a.b.video));a.c&&(c.set(b.$,a.c),d.add(a.c));e=a.m.H;f=a.h.forceTransmuxTS;return t(n,e.init(c,f),2)}hc(a.B);var q=a.l.presentationTimeline.getDuration();Infinity>q?a.m.H.wa(q):a.m.H.wa(Math.pow(2,32));g=r(c.keys());for(h=g.next();!h.done;h=g.next())k=h.value,l=c.get(k),a.a.has(k)||
(m=bk(l),a.a.set(k,m),ck(a,m,0));w(n)})}function bk(a){var b=a.segmentIndex?a.segmentIndex[Symbol.iterator]():null;return{stream:a,type:a.type,Cb:null,va:b,Ka:null,Jc:null,Kc:null,Ic:null,Hc:null,Wa:null,endOfStream:!1,Ua:!1,Ga:null,ob:!1,Vb:0,lc:!1,vb:!1,Tc:!1,Ab:!1,Da:null}}
Vj.prototype.Db=function(a){var b=this,c,d,e,f;return K(function(g){switch(g.a){case 1:hc(b.B);if(a.Ua||null==a.Ga||a.vb)return g["return"]();a.Ga=null;if(!a.ob){g.o(2);break}return t(g,ik(b,a,a.lc,a.Vb),3);case 3:return g["return"]();case 2:if(a.stream.segmentIndex){g.o(4);break}c=a.stream;return t(g,a.stream.createSegmentIndex(),5);case 5:if(c!=a.stream)return null==a.Ga&&ck(b,a,0),g["return"]();mk(a)||(a.va=a.stream.segmentIndex[Symbol.iterator]());case 4:try{d=nk(b,a),null!=d&&(ck(b,a,d),a.Ab=
!1)}catch(h){return ok(b,h),g["return"]()}e=Array.from(b.a.values());if(!b.i||!e.every(function(h){return h.endOfStream})){g.o(0);break}return t(g,b.m.H.endOfStream(),7);case 7:hc(b.B),f=b.m.H.getDuration(),0!=f&&f<b.l.presentationTimeline.getDuration()&&b.l.presentationTimeline.wa(f),w(g)}})};
function nk(a,b){if(mk(b))return Oe(a.m.H,b.stream.originalId||""),null;var c=a.m.Zb(),d=b.Cb&&b.Ka?b.Ka.endTime:c,e=Le(a.m.H,b.type,c),f=Math.max(a.l.minBufferTime||0,a.h.rebufferingGoal,a.h.bufferingGoal)*a.f;if(d>=a.l.presentationTimeline.getDuration())return b.endOfStream=!0,"video"==b.type&&(c=a.a.get("text"))&&mk(c)&&(c.endOfStream=!0),null;b.endOfStream=!1;if(e>=f)return.5;e=Ke(a.m.H,b.type);e=kk(a,b,c,e);if(!e||!pk(a,e))return 1;f=Infinity;var g=Array.from(a.a.values());g=r(g);for(var h=g.next();!h.done;h=
g.next())h=h.value,mk(h)||(f=Math.min(f,h.Cb&&h.Ka?h.Ka.endTime:c));if(d>=f+a.l.presentationTimeline.a)return 1;qk(a,b,c,e)["catch"](function(){});return null}function kk(a,b,c,d){if(b.stream==b.Cb)return b.va.current();if(b.Ka)return b.va.seek(b.Ka.endTime);if(d)return b.va.seek(d);(d=b.va.seek(Math.max(c-a.h.inaccurateManifestTolerance,0)))&&pk(a,d)||(d=b.va.seek(c));return d}function pk(a,b){var c=a.l.presentationTimeline,d=c.Ja();return b.endTime<c.Pa()||b.startTime>d?!1:!0}
function qk(a,b,c,d){var e,f,g,h,k,l,m,n;return K(function(q){switch(q.a){case 1:return e=Kc,f=b.stream,b.Ua=!0,g=rk(a,b,d),h=sk(a,b,d),x(q,2),t(q,Promise.all([g,h]),4);case 4:return k=q.b,hc(a.B),a.g?q["return"]():t(q,tk(a,b,c,f,d,k[1]),5);case 5:hc(a.B);if(a.g)return q["return"]();b.Ua=!1;b.Tc=!1;l=a.m.H.Xb();m=l[b.type];JSON.stringify(m);b.ob||a.m.Qc();ck(a,b,0);C(q,0);break;case 2:n=J(q);hc(a.B,n);if(a.g)return q["return"]();b.Ua=!1;b.type==e.$&&a.h.ignoreTextStreamFailures?a.a["delete"](e.$):
7001==n.code?(b.Ua=!1,b.Ga=null,ck(a,b,0)):3017==n.code?uk(a,b,n):(b.Ab=!0,n.severity=2,ok(a,n));w(q)}})}function uk(a,b,c){if(!Array.from(a.a.values()).some(function(e){return e!=b&&e.Tc})){var d=Math.round(100*a.f);if(20<d)a.f-=.2;else if(4<d)a.f-=.04;else{b.Ab=!0;a.g=!0;a.m.onError(c);return}b.Tc=!0}ck(a,b,4)}
function rk(a,b,c){var d,e,f,g,h,k,l;return K(function(m){d=[];e=Math.max(0,c.appendWindowStart-.1);f=c.appendWindowEnd+.01;g=c.timestampOffset;if(g!=b.Kc||e!=b.Ic||f!=b.Hc)h=function(){var n;return K(function(q){if(1==q.a)return x(q,2),b.Ic=e,b.Hc=f,b.Kc=g,t(q,Qe(a.m.H,b.type,g,e,f),4);if(2!=q.a)return C(q,0);n=J(q);b.Ic=null;b.Hc=null;b.Kc=null;throw n;})},d.push(h());c.f!=b.Jc&&(b.Jc=c.f)&&(k=sk(a,b,c.f),l=function(){var n,q,u;return K(function(v){switch(v.a){case 1:return x(v,2),t(v,k,4);case 4:return n=
v.b,hc(a.B),q=b.stream.closedCaptions&&0<b.stream.closedCaptions.size,t(v,Me(a.m.H,b.type,n,null,null,q),5);case 5:C(v,0);break;case 2:throw u=J(v),b.Jc=null,u;}})},d.push(l()));return t(m,Promise.all(d),0)})}
function tk(a,b,c,d,e,f){var g;return K(function(h){if(1==h.a)return g=d.closedCaptions&&0<d.closedCaptions.size,null!=d.emsgSchemeIdUris&&0<d.emsgSchemeIdUris.length&&(new W).ea("emsg",function(k){var l=d.emsgSchemeIdUris,m=k.reader.Sc(),n=k.reader.Sc(),q=k.reader.G(),u=k.reader.G(),v=k.reader.G(),y=k.reader.G();k=k.reader.Va(k.reader.M.byteLength-k.reader.w);var z=e.startTime+u/q;l.includes(m)&&("urn:mpeg:dash:event:2012"==m?a.m.qe():(l=new Mb(vk,{detail:{startTime:z,endTime:z+v/q,schemeIdUri:m,
value:n,timescale:q,presentationTimeDelta:u,eventDuration:v,id:y,messageData:k}}),a.m.onEvent(l)))}).parse(f),t(h,wk(a,b,c),2);if(3!=h.a)return hc(a.B),t(h,Me(a.m.H,b.type,f,e.startTime,e.endTime,g),3);hc(a.B);b.Cb=d;b.Ka=e;b.stream==d&&b.va.next();w(h)})}
function wk(a,b,c){var d,e,f,g;return K(function(h){if(1==h.a){d=Math.max(a.h.bufferBehind,a.l.presentationTimeline.a);e=Ie(a.m.H,b.type);if(null==e)return h["return"]();f=c-e;g=f-d;return 0>=g?h["return"]():t(h,a.m.H.remove(b.type,e,e+g),2)}hc(a.B);w(h)})}function mk(a){return a&&"text"==a.type&&"application/cea-608"==a.stream.mimeType}
function sk(a,b,c){var d,e,f,g;return K(function(h){if(1==h.a)return d=fc,e=Xg(c.c(),c.b,c.a,a.h.retryParameters),f=a.m.ib.request(d,e),b.Da=f,t(h,f.promise,2);g=h.b;b.Da=null;return h["return"](g.data)})}
function ik(a,b,c,d){var e,f;return K(function(g){if(1==g.a)return b.ob=!1,b.lc=!1,b.Vb=0,b.vb=!0,d?(e=a.m.Zb(),f=a.m.H.getDuration(),t(g,a.m.H.remove(b.type,e+d,f),3)):t(g,Pe(a.m.H,b.type),4);if(3!=g.a)return hc(a.B),c?t(g,a.m.H.flush(b.type),3):g.o(3);hc(a.B);b.Cb=null;b.Ka=null;b.vb=!1;b.endOfStream=!1;ck(a,b,0);w(g)})}
function ck(a,b,c){b.Ga=(new ub(function(){var d;return K(function(e){if(1==e.a)return x(e,2),t(e,a.Db(b),4);if(2!=e.a)return C(e,0);d=J(e);if(a.m)a.m.onError(d);w(e)})})).P(c)}function Xj(a){null!=a.Ga&&(a.Ga.stop(),a.Ga=null)}function Yj(a){return K(function(b){return a.Da?t(b,a.Da.abort(),0):b.o(0)})}function ok(a,b){K(function(c){if(1==c.a)return t(c,xb(a.j),2);hc(a.B);a.m.onError(b);b.handled||a.h.failureCallback(b);w(c)})};function xk(a,b,c,d,e,f){if(200<=c&&299>=c&&202!=c)return{uri:e||d,wd:d,data:b,headers:a,fromCache:!!a["x-shaka-from-cache"]};e=null;try{e=sc(b)}catch(g){}throw new O(401==c||403==c?2:1,1,1001,d,c,e,a,f);};function yk(){}function zk(a,b,c,d){var e=new Ak;Lc(b.headers).forEach(function(k,l){e.append(l,k)});var f=new Bk,g={fd:!1,Fd:!1};a=Ck(a,c,{body:b.body||void 0,headers:e,method:b.method,signal:f.signal,credentials:b.allowCrossSiteCredentials?"include":void 0},g,d);a=new Q(a,function(){g.fd=!0;f.abort();return Promise.resolve()});if(b=b.retryParameters.timeout){var h=new P(function(){g.Fd=!0;f.abort()});h.P(b/1E3);a["finally"](function(){h.stop()})}return a}
function Ck(a,b,c,d,e){var f,g,h,k,l,m,n,q,u,v,y,z,A,D;return K(function(B){switch(B.a){case 1:return f=Dk,g=Ek,m=l=0,n=Date.now(),x(B,2),t(B,f(a,c),4);case 4:return h=B.b,q=h.clone().body.getReader(),v=(u=h.headers.get("Content-Length"))?parseInt(u,10):0,y=function(E){function H(){var G,F;return K(function(I){switch(I.a){case 1:return x(I,2),t(I,q.read(),4);case 4:G=I.b;C(I,3);break;case 2:return J(I),I["return"]();case 3:G.done||(l+=G.value.byteLength);F=Date.now();if(100<F-n||G.done)e(F-n,l-m,
v-l),m=l,n=F;G.done?E.close():(E.enqueue(G.value),H());w(I)}})}H()},new g({start:y}),t(B,h.arrayBuffer(),5);case 5:k=B.b;C(B,3);break;case 2:z=J(B);if(d.fd)throw new O(1,1,7001,a,b);if(d.Fd)throw new O(1,1,1003,a,b);throw new O(1,1,1002,a,z,b);case 3:return A={},D=h.headers,D.forEach(function(E,H){A[H.trim()]=E}),B["return"](xk(A,k,h.status,a,h.url,b))}})}
function Fk(){if(window.ReadableStream)try{new ReadableStream({})}catch(a){return!1}else return!1;return!(!window.fetch||!window.AbortController)}M("shaka.net.HttpFetchPlugin",yk);yk.isSupported=Fk;yk.parse=zk;var Dk=window.fetch,Bk=window.AbortController,Ek=window.ReadableStream,Ak=window.Headers;Fk()&&(Xb("http",zk,2),Xb("https",zk,2));function Gk(){}
function Hk(a,b,c,d){var e=new Ik,f=Date.now(),g=0,h=new Promise(function(k,l){e.open(b.method,a,!0);e.responseType="arraybuffer";e.timeout=b.retryParameters.timeout;e.withCredentials=b.allowCrossSiteCredentials;e.onabort=function(){l(new O(1,1,7001,a,c))};e.onload=function(n){n=n.target;var q=n.getAllResponseHeaders().trim().split("\r\n"),u={};q=r(q);for(var v=q.next();!v.done;v=q.next())v=v.value.split(": "),u[v[0].toLowerCase()]=v.slice(1).join(": ");try{var y=xk(u,n.response,n.status,a,n.responseURL,
c);k(y)}catch(z){l(z)}};e.onerror=function(n){l(new O(1,1,1002,a,n,c))};e.ontimeout=function(){l(new O(1,1,1003,a,c))};e.onprogress=function(n){var q=Date.now();if(100<q-f||n.lengthComputable&&n.loaded==n.total)d(q-f,n.loaded-g,n.total-n.loaded),g=n.loaded,f=q};for(var m in b.headers)e.setRequestHeader(m.toLowerCase(),b.headers[m]);e.send(b.body)});return new Q(h,function(){e.abort();return Promise.resolve()})}M("shaka.net.HttpXHRPlugin",Gk);Gk.parse=Hk;var Ik=window.XMLHttpRequest;Xb("http",Hk,1);
Xb("https",Hk,1);function Jk(){this.a=this.f=this.b=0;this.c=new Map;this.g=0}function Kk(a,b){a.b+=b;var c=a.g;a.g++;a.c.set(c,b);return c}Jk.prototype.close=function(a,b){if(this.c.has(a)){var c=this.c.get(a);this.c["delete"](a);this.f+=c;this.a+=b}};function Lk(a){var b=this;this.K=a;this.a=new Map;this.B=new gc(function(){var c=Array.from(b.a.values());return Promise.all(c.map(function(d){return d["catch"](function(){})}))});this.b=[];this.vd=function(){};this.ud=function(){};this.xb=new Jk}Lk.prototype.destroy=function(){return this.B.destroy()};function Mk(a,b,c){a.vd=b;a.ud=c}function Nk(a){var b=a.b.map(function(c){return c()});a.b=[];return Promise.all(b)}
function Ok(a,b,c,d,e,f){hc(a.B);var g=Kk(a.xb,d);d=(a.a.get(b)||Promise.resolve()).then(function(){var h,k,l,m,n,q,u;return K(function(v){if(1==v.a)return t(v,Pk(a,c),2);h=v.b;if(a.B.a)throw new O(2,9,7001);if(e)for(m in k=R(h),l=new Df(k),l.data)n=Number(m),q=l.data[n],u=l.a[n],a.ud(q,u);a.xb.close(g,h.byteLength);var y=a.xb;a.vd(0==y.b?0:y.f/y.b,a.xb.a);return v["return"](f(h))})});a.a.set(b,d);return d}
function Qk(a,b,c){hc(a.B);var d=(a.a.get(b)||Promise.resolve()).then(function(){return K(function(e){return t(e,c(),0)})});a.a.set(b,d)}function Rk(a){return K(function(b){return 1==b.a?t(b,Promise.all(a.a.values()),2):b["return"](a.xb.a)})}function Pk(a,b){var c,d,e,f;return K(function(g){if(1==g.a)return c=fc,d=a.K.request(c,b),e=function(){return d.abort()},a.b.push(e),t(g,d.promise,2);f=g.b;Tb(a.b,e);return g["return"](f.data)})};function Sk(a,b){var c=this;this.c=a;this.b=a.objectStore(b);this.a=new yb;a.onabort=function(d){d.preventDefault();c.a.reject()};a.onerror=function(d){d.preventDefault();c.a.reject()};a.oncomplete=function(){c.a.resolve()}}Sk.prototype.abort=function(){var a=this;return K(function(b){if(1==b.a){try{a.c.abort()}catch(c){}x(b,2);return t(b,a.a,4)}if(2!=b.a)return C(b,0);J(b);w(b)})};
function Tk(a,b){return new Promise(function(c,d){var e=a.b.openCursor();e.onerror=d;e.onsuccess=function(){var f;return K(function(g){if(1==g.a){if(null==e.result)return c(),g["return"]();f=e.result;return t(g,b(f.key,f.value,f),2)}f["continue"]();w(g)})}})}Sk.prototype.store=function(){return this.b};Sk.prototype.promise=function(){return this.a};function Uk(a){this.b=a;this.a=[]}Uk.prototype.destroy=function(){return Promise.all(this.a.map(function(a){return a.abort()}))};function Vk(a,b){return Wk(a,b,"readwrite")}function Wk(a,b,c){c=a.b.transaction([b],c);var d=new Sk(c,b);a.a.push(d);d.promise().then(function(){Tb(a.a,d)},function(){Tb(a.a,d)});return d};function Xk(a,b,c){this.b=new Uk(a);this.c=b;this.a=c}p=Xk.prototype;p.destroy=function(){return this.b.destroy()};p.hasFixedKeySpace=function(){return!0};p.addSegments=function(){return Yk(this.c)};p.removeSegments=function(a,b){return Zk(this,this.c,a,b)};p.getSegments=function(a){var b=this,c;return K(function(d){if(1==d.a)return t(d,$k(b,b.c,a),2);c=d.b;return d["return"](c.map(function(e){return b.gd(e)}))})};p.addManifests=function(){return Yk(this.a)};
p.updateManifestExpiration=function(a,b){var c=Vk(this.b,this.a),d=c.store();d.get(a).onsuccess=function(e){if(e=e.target.result)e.expiration=b,d.put(e,a)};return c.promise()};p.removeManifests=function(a,b){return Zk(this,this.a,a,b)};p.getManifests=function(a){var b=this,c;return K(function(d){if(1==d.a)return t(d,$k(b,b.a,a),2);c=d.b;return d["return"](Promise.all(c.map(function(e){return b.wb(e)})))})};
p.getAllManifests=function(){var a=this,b,c;return K(function(d){return 1==d.a?(b=Wk(a.b,a.a,"readonly"),c=new Map,t(d,Tk(b,function(e,f){var g;return K(function(h){if(1==h.a)return t(h,a.wb(f),2);g=h.b;c.set(e,g);w(h)})}),2)):3!=d.a?t(d,b.promise(),3):d["return"](c)})};p.gd=function(a){return a};p.wb=function(a){return Promise.resolve(a)};function Yk(a){return Promise.reject(new O(2,9,9011,"Cannot add new value to "+a))}
p.add=function(a,b){var c=this,d,e,f,g,h,k,l;return K(function(m){if(1==m.a){d=Vk(c.b,a);e=d.store();f=[];g={};h=r(b);for(k=h.next();!k.done;g={Nb:g.Nb},k=h.next())l=k.value,g.Nb=e.add(l),g.Nb.onsuccess=function(n){return function(){f.push(n.Nb.result)}}(g);return t(m,d.promise(),2)}return m["return"](f)})};
function Zk(a,b,c,d){a=Vk(a.b,b);b=a.store();var e={};c=r(c);for(var f=c.next();!f.done;e={Mb:e.Mb},f=c.next())e.Mb=f.value,b["delete"](e.Mb).onsuccess=function(g){return function(){return d(g.Mb)}}(e);return a.promise()}
function $k(a,b,c){var d,e,f,g,h,k,l;return K(function(m){if(1==m.a){d=Wk(a.b,b,"readonly");e=d.store();f={};g=[];h={};k=r(c);for(l=k.next();!l.done;h={rb:h.rb,pb:h.pb},l=k.next())h.pb=l.value,h.rb=e.get(h.pb),h.rb.onsuccess=function(n){return function(){void 0==n.rb.result&&g.push(n.pb);f[n.pb]=n.rb.result}}(h);return t(m,d.promise(),2)}if(g.length)throw new O(2,9,9012,"Could not find values for "+g);return m["return"](c.map(function(n){return f[n]}))})};function al(a){this.a=new Uk(a)}al.prototype.destroy=function(){return this.a.destroy()};al.prototype.getAll=function(){var a=this,b,c;return K(function(d){return 1==d.a?(b=Wk(a.a,"session-ids","readonly"),c=[],t(d,Tk(b,function(e,f){c.push(f)}),2)):3!=d.a?t(d,b.promise(),3):d["return"](c)})};al.prototype.add=function(a){var b=Vk(this.a,"session-ids"),c=b.store();a=r(a);for(var d=a.next();!d.done;d=a.next())c.add(d.value);return b.promise()};
al.prototype.remove=function(a){var b=this,c;return K(function(d){return 1==d.a?(c=Vk(b.a,"session-ids"),t(d,Tk(c,function(e,f,g){a.includes(f.sessionId)&&g["delete"]()}),2)):t(d,c.promise(),0)})};function bl(){this.a=new Map}bl.prototype.destroy=function(){for(var a=[],b=r(this.a.values()),c=b.next();!c.done;c=b.next())a.push(c.value.destroy());this.a.clear();return Promise.all(a)};bl.prototype.init=function(){var a=this;cl.forEach(function(e,f){var g=e();g&&a.a.set(f,g)});for(var b=[],c=r(this.a.values()),d=c.next();!d.done;d=c.next())b.push(d.value.init());return Promise.all(b)};
function dl(a){var b=null;a.a.forEach(function(c,d){c.getCells().forEach(function(e,f){e.hasFixedKeySpace()||b||(b={path:{ua:d,ba:f},ba:e})})});if(b)return b;throw new O(2,9,9013,"Could not find a cell that supports add-operations");}function el(a,b){a.a.forEach(function(c,d){c.getCells().forEach(function(e,f){b({ua:d,ba:f},e)})})}
function fl(a,b,c){a=a.a.get(b);if(!a)throw new O(2,9,9013,"Could not find mechanism with name "+b);b=a.getCells().get(c);if(!b)throw new O(2,9,9013,"Could not find cell with name "+c);return b}function gl(a,b){a.a.forEach(function(c){b(c.getEmeSessionCell())})}function hl(a){var b=Array.from(a.a.keys());if(!b.length)throw new O(2,9,9E3,"No supported storage mechanisms found");return a.a.get(b[0]).getEmeSessionCell()}
function il(a){var b,c,d;return K(function(e){return 1==e.a?(b=Array.from(a.a.values()),c=0<b.length,c||(d=cl,d.forEach(function(f){(f=f())&&b.push(f)})),t(e,Promise.all(b.map(function(f){return f.erase()})),2)):c?e.o(0):t(e,Promise.all(b.map(function(f){return f.destroy()})),0)})}function jl(a,b){cl.set(a,b)}M("shaka.offline.StorageMuxer",bl);bl.unregister=function(a){cl["delete"](a)};bl.register=jl;bl.prototype.destroy=bl.prototype.destroy;var cl=new Map;function kl(){Xk.apply(this,arguments)}pa(kl,Xk);kl.prototype.updateManifestExpiration=function(a,b){var c=this,d,e,f;return K(function(g){d=Vk(c.b,c.a);e=d.store();f=new yb;e.get(a).onsuccess=function(h){(h=h.target.result)?(h.expiration=b,e.put(h),f.resolve()):f.reject(new O(2,9,9012,"Could not find values for "+a))};return t(g,Promise.all([d.promise(),f]),0)})};
kl.prototype.wb=function(a){var b,c,d,e,f,g;return K(function(h){if(1==h.a){b=[];for(c=0;c<a.periods.length;++c)d=c==a.periods.length-1?a.duration:a.periods[c+1].startTime,e=d-a.periods[c].startTime,f=ll(a.periods[c],e),b.push(f);return t(h,fh(b),2)}g=h.b;return h["return"]({creationTime:0,originalManifestUri:a.originalManifestUri,duration:a.duration,size:a.size,expiration:null==a.expiration?Infinity:a.expiration,streams:g,sessionIds:a.sessionIds,drmInfo:a.drmInfo,appMetadata:a.appMetadata})})};
function ll(a,b){ml(a);for(var c=r(a.streams),d=c.next();!d.done;d=c.next());return a.streams.map(function(e){return nl(e,a.startTime,b)})}
function nl(a,b,c){var d=a.initSegmentUri?ol(a.initSegmentUri):null,e=b+a.presentationTimeOffset,f=b+c;return{id:a.id,originalId:null,primary:a.primary,type:a.contentType,mimeType:a.mimeType,codecs:a.codecs,frameRate:a.frameRate,pixelAspectRatio:void 0,kind:a.kind,language:a.language,label:a.label,width:a.width,height:a.height,initSegmentKey:d,encrypted:a.encrypted,keyIds:new Set([a.keyId]),segments:a.segments.map(function(g){var h=ol(g.uri);return{startTime:b+g.startTime,endTime:b+g.endTime,dataKey:h,
initSegmentKey:d,appendWindowStart:b,appendWindowEnd:f,timestampOffset:e}}),variantIds:a.variantIds,roles:[],audioSamplingRate:null,channelsCount:null,closedCaptions:null}}kl.prototype.gd=function(a){return{data:a.data}};function ol(a){var b;if((b=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(a))||(b=/^offline:segment\/([0-9]+)$/.exec(a)))return Number(b[1]);throw new O(2,9,9004,"Could not parse uri "+a);}
function ml(a){var b=a.streams.filter(function(h){return"audio"==h.contentType});a=a.streams.filter(function(h){return"video"==h.contentType});if(!b.every(function(h){return h.variantIds})||!a.every(function(h){return h.variantIds})){for(var c=r(b),d=c.next();!d.done;d=c.next())d.value.variantIds=[];c=r(a);for(d=c.next();!d.done;d=c.next())d.value.variantIds=[];c=0;if(a.length&&!b.length){var e=c++,f=r(a);for(d=f.next();!d.done;d=f.next())d.value.variantIds.push(e)}if(!a.length&&b.length)for(e=c++,
f=r(b),d=f.next();!d.done;d=f.next())d.value.variantIds.push(e);if(a.length&&b.length)for(b=r(b),d=b.next();!d.done;d=b.next())for(d=d.value,e=r(a),f=e.next();!f.done;f=e.next()){f=f.value;var g=c++;d.variantIds.push(g);f.variantIds.push(g)}}};function pl(){Xk.apply(this,arguments)}pa(pl,Xk);
pl.prototype.wb=function(a){var b,c,d,e,f,g;return K(function(h){if(1==h.a){b=[];for(c=0;c<a.periods.length;++c){d=c==a.periods.length-1?a.duration:a.periods[c+1].startTime;e=d-a.periods[c].startTime;for(var k=a.periods[c],l=[],m=r(k.streams),n=m.next();!n.done;n=m.next())n=n.value,0!=n.variantIds.length&&l.push(ql(n,k.startTime,k.startTime+e));f=l;b.push(f)}return t(h,fh(b),2)}g=h.b;return h["return"]({appMetadata:a.appMetadata,creationTime:0,drmInfo:a.drmInfo,duration:a.duration,expiration:null==
a.expiration?Infinity:a.expiration,originalManifestUri:a.originalManifestUri,sessionIds:a.sessionIds,size:a.size,streams:g})})};
function ql(a,b,c){return{id:a.id,originalId:a.originalId,primary:a.primary,type:a.contentType,mimeType:a.mimeType,codecs:a.codecs,frameRate:a.frameRate,pixelAspectRatio:a.pixelAspectRatio,kind:a.kind,language:a.language,label:a.label,width:a.width,height:a.height,encrypted:a.encrypted,keyIds:new Set([a.keyId]),segments:a.segments.map(function(d){return{startTime:b+d.startTime,endTime:b+d.endTime,initSegmentKey:a.initSegmentKey,appendWindowStart:b,appendWindowEnd:c,timestampOffset:b-a.presentationTimeOffset,
dataKey:d.dataKey}}),variantIds:a.variantIds,roles:[],audioSamplingRate:null,channelsCount:null,closedCaptions:null}};function rl(){Xk.apply(this,arguments)}pa(rl,Xk);rl.prototype.hasFixedKeySpace=function(){return!1};rl.prototype.addSegments=function(a){return this.add(this.c,a)};rl.prototype.addManifests=function(a){return this.add(this.a,a)};rl.prototype.wb=function(a){null==a.expiration&&(a.expiration=Infinity);return Promise.resolve(a)};function sl(){this.i=this.f=this.c=this.b=this.a=this.g=null}p=sl.prototype;
p.init=function(){var a=this,b=new yb,c=window.indexedDB.open("shaka_offline_db",5);c.onsuccess=function(){var d=c.result;a.g=d;var e=d.objectStoreNames;e=e.contains("manifest")&&e.contains("segment")?new kl(d,"segment","manifest"):null;a.a=e;e=d.objectStoreNames;e=e.contains("manifest-v2")&&e.contains("segment-v2")?new pl(d,"segment-v2","manifest-v2"):null;a.b=e;e=d.objectStoreNames;e=e.contains("manifest-v3")&&e.contains("segment-v3")?new pl(d,"segment-v3","manifest-v3"):null;a.c=e;e=d.objectStoreNames;
e=e.contains("manifest-v5")&&e.contains("segment-v5")?new rl(d,"segment-v5","manifest-v5"):null;a.f=e;d=d.objectStoreNames.contains("session-ids")?new al(d):null;a.i=d;b.resolve()};c.onupgradeneeded=function(){for(var d=c.result,e=r(["segment-v5","manifest-v5","session-ids"]),f=e.next();!f.done;f=e.next())f=f.value,d.objectStoreNames.contains(f)||d.createObjectStore(f,{autoIncrement:!0})};c.onerror=function(d){b.reject(new O(2,9,9001,c.error));d.preventDefault()};return b};
p.destroy=function(){var a=this;return K(function(b){switch(b.a){case 1:if(!a.a){b.o(2);break}return t(b,a.a.destroy(),2);case 2:if(!a.b){b.o(4);break}return t(b,a.b.destroy(),4);case 4:if(!a.c){b.o(6);break}return t(b,a.c.destroy(),6);case 6:if(!a.f){b.o(8);break}return t(b,a.f.destroy(),8);case 8:if(!a.i){b.o(10);break}return t(b,a.i.destroy(),10);case 10:a.g&&a.g.close(),w(b)}})};
p.getCells=function(){var a=new Map;this.a&&a.set("v1",this.a);this.b&&a.set("v2",this.b);this.c&&a.set("v3",this.c);this.f&&a.set("v5",this.f);return a};p.getEmeSessionCell=function(){return this.i};
p.erase=function(){var a=this;return K(function(b){switch(b.a){case 1:if(!a.a){b.o(2);break}return t(b,a.a.destroy(),2);case 2:if(!a.b){b.o(4);break}return t(b,a.b.destroy(),4);case 4:if(!a.c){b.o(6);break}return t(b,a.c.destroy(),6);case 6:if(!a.f){b.o(8);break}return t(b,a.f.destroy(),8);case 8:return a.g&&a.g.close(),t(b,tl(),10);case 10:return a.g=null,a.a=null,a.b=null,a.c=null,a.f=null,t(b,a.init(),0)}})};
function tl(){var a=new yb,b=window.indexedDB.deleteDatabase("shaka_offline_db");b.onblocked=function(){};b.onsuccess=function(){a.resolve()};b.onerror=function(c){a.reject(new O(2,9,9001,b.error));c.preventDefault()};return a}jl("idb",function(){return window.indexedDB?new sl:null});function ul(a,b,c,d){this.a=a;this.g=b;this.f=c;this.c=d;this.b=["offline:",a,"/",b,"/",c,"/",d].join("")}ul.prototype.ua=function(){return this.g};ul.prototype.ba=function(){return this.f};ul.prototype.key=function(){return this.c};ul.prototype.toString=function(){return this.b};
function vl(a){a=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(a);if(null==a)return null;var b=a[1];if("manifest"!=b&&"segment"!=b)return null;var c=a[2];if(!c)return null;var d=a[3];return d&&null!=b?new ul(b,c,d,Number(a[4])):null};function wl(a,b){this.b=a;this.a=b}
function xl(a,b){var c=new Y(null,0);c.wa(b.duration);var d=b.streams.filter(function(k){return"audio"==k.type}),e=b.streams.filter(function(k){return"video"==k.type});d=yl(a,d,e,c);e=b.streams.filter(function(k){return"text"==k.type}).map(function(k){return zl(a,k,c)});var f=b.drmInfo?[b.drmInfo]:[];if(b.drmInfo)for(var g=r(d.values()),h=g.next();!h.done;h=g.next())h=h.value,h.audio&&h.audio.encrypted&&(h.audio.drmInfos=f),h.video&&h.video.encrypted&&(h.video.drmInfos=f);return{presentationTimeline:c,
minBufferTime:2,offlineSessionIds:b.sessionIds,variants:Array.from(d.values()),textStreams:e}}
function yl(a,b,c,d){for(var e=new Set,f=r(b),g=f.next();!g.done;g=f.next()){var h=r(g.value.variantIds);for(g=h.next();!g.done;g=h.next())e.add(g.value)}f=r(c);for(g=f.next();!g.done;g=f.next())for(h=r(g.value.variantIds),g=h.next();!g.done;g=h.next())e.add(g.value);f=new Map;e=r(e);for(g=e.next();!g.done;g=e.next())g=g.value,f.set(g,{id:g,language:"",primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0});b=r(b);for(e=b.next();!e.done;e=b.next())for(e=e.value,
g=zl(a,e,d),h=r(e.variantIds),e=h.next();!e.done;e=h.next())e=f.get(e.value),e.language=g.language,e.primary=e.primary||g.primary,e.audio=g;c=r(c);for(b=c.next();!b.done;b=c.next())for(e=b.value,b=zl(a,e,d),g=r(e.variantIds),e=g.next();!e.done;e=g.next())e=f.get(e.value),e.primary=e.primary||b.primary,e.video=b;return f}
function zl(a,b,c){var d=b.segments.map(function(e){return Al(a,e)});c.jb(d);return{id:b.id,originalId:b.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new X(d),mimeType:b.mimeType,codecs:b.codecs,width:b.width||void 0,height:b.height||void 0,frameRate:b.frameRate,pixelAspectRatio:b.pixelAspectRatio,kind:b.kind,encrypted:b.encrypted,drmInfos:[],keyIds:b.keyIds,language:b.language,label:b.label,type:b.type,primary:b.primary,trickModeVideo:null,emsgSchemeIdUris:null,
roles:b.roles,channelsCount:b.channelsCount,audioSamplingRate:b.audioSamplingRate,closedCaptions:b.closedCaptions}}function Al(a,b){var c=new ul("segment",a.b,a.a,b.dataKey);return new kg(b.startTime,b.endTime,function(){return[c.toString()]},0,null,null!=b.initSegmentKey?Bl(a,b.initSegmentKey):null,b.timestampOffset,b.appendWindowStart,b.appendWindowEnd)}function Bl(a,b){var c=new ul("segment",a.b,a.a,b);return new jg(function(){return[c.toString()]},0,null)};function Cl(){this.a=null}p=Cl.prototype;p.configure=function(){};p.start=function(a){var b=this,c,d,e,f,g,h;return K(function(k){switch(k.a){case 1:c=vl(a);b.a=c;if(null==c||"manifest"!=c.a)throw new O(2,1,9004,a);d=new bl;wa(k);return t(k,d.init(),4);case 4:return t(k,fl(d,c.ua(),c.ba()),5);case 5:return e=k.b,t(k,e.getManifests([c.key()]),6);case 6:return f=k.b,g=f[0],h=new wl(c.ua(),c.ba()),k["return"](xl(h,g));case 2:return xa(k),t(k,d.destroy(),7);case 7:ya(k,0)}})};p.stop=function(){return Promise.resolve()};
p.update=function(){};p.onExpirationUpdated=function(a,b){var c=this,d,e,f,g,h,k,l;return K(function(m){switch(m.a){case 1:return d=c.a,e=new bl,x(m,2,3),t(m,e.init(),5);case 5:return t(m,fl(e,d.ua(),d.ba()),6);case 6:return f=m.b,t(m,f.getManifests([d.key()]),7);case 7:g=m.b;h=g[0];k=h.sessionIds.includes(a);l=void 0==h.expiration||h.expiration>b;if(!k||!l){m.o(3);break}return t(m,f.updateManifestExpiration(d.key(),b),3);case 3:return xa(m),t(m,e.destroy(),10);case 10:ya(m,0);break;case 2:J(m),m.o(3)}})};
Tg["application/x-offline-manifest"]=function(){return new Cl};function Dl(){}function El(a){var b=vl(a);b&&"manifest"==b.a?(a={uri:a,wd:a,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},a=Bb(a)):a=b&&"segment"==b.a?Fl(b.key(),b):zb(new O(2,1,9004,a));return a}
function Fl(a,b){var c=new bl;return Bb(void 0).S(function(){return c.init()}).S(function(){return fl(c,b.ua(),b.ba())}).S(function(d){return d.getSegments([b.key()])}).S(function(d){return{uri:b,data:d[0].data,headers:{}}})["finally"](function(){return c.destroy()})}M("shaka.offline.OfflineScheme",Dl);Dl.plugin=El;Xb("offline",El);function Gl(a,b,c){var d,e,f,g,h,k;return K(function(l){switch(l.a){case 1:d=[];for(var m=[],n=r(c),q=n.next();!q.done;q=n.next()){q=q.value;for(var u=!1,v=r(m),y=v.next();!y.done;y=v.next())if(y=y.value,Hl(y.info,q)){y.sessionIds.push(q.sessionId);u=!0;break}u||m.push({info:q,sessionIds:[q.sessionId]})}e=r(m);f=e.next();case 2:if(f.done){l.o(4);break}g=f.value;h=Il(a,b,g);return t(l,h,5);case 5:k=l.b;d=d.concat(k);f=e.next();l.o(2);break;case 4:return l["return"](d)}})}
function Il(a,b,c){var d,e;return K(function(f){switch(f.a){case 1:return d=new gd({ib:b,onError:function(){},cc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),x(f,2),d.configure(a),t(f,od(d,c.info.keySystem,c.info.licenseUri,c.info.serverCertificate,c.info.audioCapabilities,c.info.videoCapabilities),4);case 4:C(f,3);break;case 2:return J(f),t(f,d.destroy(),5);case 5:return f["return"]([]);case 3:return x(f,6),t(f,vd(d),8);case 8:C(f,7);break;case 6:return J(f),t(f,d.destroy(),
9);case 9:return f["return"]([]);case 7:return e=[],t(f,Promise.all(c.sessionIds.map(function(g){return K(function(h){if(1==h.a)return x(h,2),t(h,yd(d,g),4);if(2!=h.a)return e.push(g),C(h,0);J(h);w(h)})})),10);case 10:return t(f,d.destroy(),11);case 11:return f["return"](e)}})}
function Hl(a,b){function c(d,e){return d.robustness==e.robustness&&d.contentType==e.contentType}return a.keySystem==b.keySystem&&a.licenseUri==b.licenseUri&&Ub(a.audioCapabilities,b.audioCapabilities,c)&&Ub(a.videoCapabilities,b.videoCapabilities,c)};function Jl(a,b){var c=Kl(),d=this;this.i=b;this.c=a;this.f=c;this.j=null;this.g=[];this.b=this.a=null;this.s=Promise.resolve().then(function(){return Ll(d)});this.B=new gc(function(){return Ml(d)})}Jl.prototype.destroy=function(){return this.B.destroy()};function Ml(a){var b,c,d;return K(function(e){if(1==e.a)return a.b&&a.b.abort(),Nl(a),t(e,a.s,2);a.a&&a.a.ta.Ta();b=r(a.g);for(c=b.next();!c.done;c=b.next())d=c.value,d.ta.Ta();a.a=null;a.g=[];a.i=null;w(e)})}
function Ol(a,b){var c={kb:function(){},bc:function(){},Ta:function(){},onError:function(){},dc:function(){},Ue:function(){}};a.g.push({create:b,ta:c});a.b&&a.b.abort();Nl(a);return c}
function Ll(a){return K(function(b){if(a.B.a)b=b.o(0);else{if(0==a.g.length||a.a&&!a.a.Qa)var c=!1;else{a.a&&(a.a.ta.Ta(),a.a=null);c=a.g.shift();var d=c.create(a.f);d?(c.ta.kb(),a.a={node:d.node,payload:d.payload,Qa:d.Qa,ta:c.ta}):c.ta.dc();c=!0}c?c=Promise.resolve():a.a?c=Pl(a):(a.i.pe(a.c),a.j=new yb,c=a.j);b=t(b,c,1)}return b})}
function Pl(a){var b,c;return K(function(d){switch(d.a){case 1:return a.c=a.i.ce(a.c,a.f,a.a.node,a.a.payload),x(d,2),a.b=a.i.Qd(a.c,a.f,a.a.payload),t(d,a.b.promise,4);case 4:a.b=null;a.c==a.a.node&&(a.a.ta.bc(),a.a=null);C(d,0);break;case 2:b=J(d);if(7001==b.code)a.a.ta.Ta();else a.a.ta.onError(b);a.a=null;a.b=null;c=a;return t(d,a.i.handleError(a.f,b),5);case 5:c.c=d.b,w(d)}})}function Nl(a){a.j&&(a.j.resolve(),a.j=null)};function Ql(a){this.a=null;for(var b=r(Array.from(a.textTracks)),c=b.next();!c.done;c=b.next())c=c.value,c.mode="disabled","Shaka Player TextTrack"==c.label&&(this.a=c);this.a||(this.a=a.addTextTrack("subtitles","Shaka Player TextTrack"));this.a.mode="hidden"}p=Ql.prototype;p.remove=function(a,b){if(!this.a)return!1;Rl(this.a,function(c){return c.startTime<b&&c.endTime>a});return!0};
p.append=function(a){var b=a.map(function(f){if(f.nestedCues.length){var g=f.nestedCues.map(function(h){return h.spacer?"\n":h.payload+" "}).join("").replace(/ $/m,"");f=f.clone();f.nestedCues=[];f.payload=g;return f}return f}),c=[];a=this.a.cues?Array.from(this.a.cues):[];var d={};b=r(b);for(var e=b.next();!e.done;d={ab:d.ab},e=b.next())d.ab=e.value,a.some(function(f){return function(g){return g.startTime==f.ab.startTime&&g.endTime==f.ab.endTime&&g.text==f.ab.payload?!0:!1}}(d))||(e=Sl(d.ab))&&c.push(e);
a=c.slice().sort(function(f,g){return f.startTime!=g.startTime?f.startTime-g.startTime:f.endTime!=g.endTime?f.endTime-g.startTime:"line"in VTTCue.prototype?c.indexOf(g)-c.indexOf(f):c.indexOf(f)-c.indexOf(g)});a=r(a);for(d=a.next();!d.done;d=a.next())this.a.addCue(d.value)};p.destroy=function(){this.a&&(Rl(this.a,function(){return!0}),this.a.mode="disabled");this.a=null;return Promise.resolve()};p.isTextVisible=function(){return"showing"==this.a.mode};
p.setTextVisibility=function(a){this.a.mode=a?"showing":"hidden"};
function Sl(a){if(a.startTime>=a.endTime)return null;var b=new VTTCue(a.startTime,a.endTime,a.payload);b.lineAlign=a.lineAlign;b.positionAlign=a.positionAlign;a.size&&(b.size=a.size);try{b.align=a.textAlign}catch(c){}"center"==a.textAlign&&"center"!=b.align&&(b.align="middle");"vertical-lr"==a.writingMode?b.vertical="lr":"vertical-rl"==a.writingMode&&(b.vertical="rl");1==a.lineInterpretation&&(b.snapToLines=!1);null!=a.line&&(b.line=a.line);null!=a.position&&(b.position=a.position);return b}
function Rl(a,b){var c=a.mode;a.mode="showing"==c?"showing":"hidden";for(var d=r(Array.from(a.cues)),e=d.next();!e.done;e=d.next())(e=e.value)&&b(e)&&a.removeCue(e);a.mode=c}M("shaka.text.SimpleTextDisplayer",Ql);Ql.prototype.setTextVisibility=Ql.prototype.setTextVisibility;Ql.prototype.isTextVisible=Ql.prototype.isTextVisible;Ql.prototype.destroy=Ql.prototype.destroy;Ql.prototype.append=Ql.prototype.append;Ql.prototype.remove=Ql.prototype.remove;function Tl(){}M("shaka.util.Dom",Tl);Tl.removeAllChildren=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)};function Ul(a,b){var c=this;this.i=!1;this.f=[];this.a=a;this.g=b;this.b=document.createElement("div");this.b.classList.add("shaka-text-container");this.g.appendChild(this.b);this.j=(new P(function(){Vl(c)})).na(.25);this.c=new Map}p=Ul.prototype;
p.append=function(a){var b={};a=r(a);for(var c=a.next();!c.done;b={$a:b.$a},c=a.next())b.$a=c.value,this.f.some(function(d){return function(e){return e.payload==d.$a.payload&&e.startTime==d.$a.startTime&&e.endTime==d.$a.endTime?!0:!1}}(b))||this.f.push(b.$a);Vl(this)};p.destroy=function(){this.g.removeChild(this.b);this.b=null;this.i=!1;this.f=[];this.j&&this.j.stop();this.c.clear()};
p.remove=function(a,b){if(!this.b)return!1;this.f=this.f.filter(function(c){return c.startTime<a||c.endTime>=b});Vl(this);return!0};p.isTextVisible=function(){return this.i};p.setTextVisibility=function(a){this.i=a};
function Vl(a){function b(g){return a.f.includes(g)&&a.i&&g.startTime<=c&&g.endTime>=c}for(var c=a.a.currentTime,d=r(a.c.keys()),e=d.next();!e.done;e=d.next())if(e=e.value,!b(e)){var f=a.c.get(e);a.b.removeChild(f);a.c["delete"](e)}d=new Set(a.c.values());e=r(Array.from(a.b.childNodes));for(f=e.next();!f.done;f=e.next())f=f.value,d.has(f)||a.b.removeChild(f);d=a.f.filter(function(g){return b(g)&&!a.c.has(g)}).sort(function(g,h){return g.startTime!=h.startTime?g.startTime-h.startTime:g.endTime-h.endTime});
d=r(d);for(e=d.next();!e.done;e=d.next())Wl(a,a.b,e.value)}function Xl(a,b,c,d){var e=document.createElement("span");d&&e.classList.add("shaka-nested-cue");c.spacer?e.style.display="block":Yl(a,e,c,!0);b.appendChild(e);return e}function Wl(a,b,c){if(c.nestedCues.length){var d=document.createElement("p");d.style.width="100%";Yl(a,d,c,!1);for(var e=0;e<c.nestedCues.length;e++)Xl(a,d,c.nestedCues[e],!0);b.appendChild(d);a.c.set(c,d)}else a.c.set(c,Xl(a,b,c,!1))}
function Yl(a,b,c,d){var e=b.style;e.whiteSpace="pre-line";b.textContent=c.payload;d&&(e.backgroundColor=c.backgroundColor);e.border=c.border;e.color=c.color;e.direction=c.direction;e.opacity=c.opacity;e.paddingLeft=Zl(c.linePadding,c,a.g);e.paddingRight=Zl(c.linePadding,c,a.g);c.backgroundImage&&(e.backgroundImage="url('"+c.backgroundImage+"')",e.backgroundRepeat="no-repeat",e.backgroundSize="contain",e.backgroundPosition="center",""==c.backgroundColor&&(e.backgroundColor="transparent"));c.backgroundImage&&
c.region&&(b=c.region.widthUnits==re?"%":"px",e.height=c.region.height+(c.region.heightUnits==re?"%":"px"),e.width=c.region.width+b);e.justifyContent="before"==c.displayAlign?"flex-start":"center"==c.displayAlign?"center":"flex-end";c.nestedCues.length&&(e.display="flex",e.flexDirection="row",e.margin="0",e.alignItems=e.justifyContent,e.justifyContent="center");d&&(e.maxWidth="100%");e.fontFamily=c.fontFamily;e.fontWeight=c.fontWeight.toString();e.fontStyle=c.fontStyle;e.letterSpacing=c.letterSpacing;
e.fontSize=Zl(c.fontSize,c,a.g);c.line?1==c.lineInterpretation&&(e.position="absolute",c.writingMode==he?c.lineAlign==je?e.top=c.line+"%":"end"==c.lineAlign&&(e.bottom=c.line+"%"):"vertical-lr"==c.writingMode?c.lineAlign==je?e.left=c.line+"%":"end"==c.lineAlign&&(e.right=c.line+"%"):c.lineAlign==je?e.right=c.line+"%":"end"==c.lineAlign&&(e.left=c.line+"%")):c.region&&c.region.id&&!d&&(a=c.region.widthUnits==re?"%":"px",d=c.region.viewportAnchorUnits==re?"%":"px",e.height=c.region.height+(c.region.heightUnits==
re?"%":"px"),e.width=c.region.width+a,e.position="absolute",e.top=c.region.viewportAnchorY+d,e.left=c.region.viewportAnchorX+d);e.lineHeight=c.lineHeight;c.position&&(c.writingMode==he?e.paddingLeft=c.position:e.paddingTop=c.position);"line-left"==c.positionAlign?e.cssFloat="left":"line-right"==c.positionAlign&&(e.cssFloat="right");e.textAlign=c.textAlign;e.textDecoration=c.textDecoration.join(" ");e.writingMode=c.writingMode;c.size&&(c.writingMode==he?e.width=c.size+"%":e.height=c.size+"%")}
function Zl(a,b,c){var d=(d=(new RegExp(/(\d*\.?\d+)([a-z]+|%+)/)).exec(a))?{value:Number(d[1]),He:d[2]}:null;if(!d)return a;var e=d.value;switch(d.He){case "%":return e/100*c.clientHeight/b.cellResolution.rows+"px";case "c":return c.clientHeight*e/b.cellResolution.rows+"px";default:return a}}M("shaka.text.UITextDisplayer",Ul);Ul.prototype.setTextVisibility=Ul.prototype.setTextVisibility;Ul.prototype.isTextVisible=Ul.prototype.isTextVisible;Ul.prototype.remove=Ul.prototype.remove;
Ul.prototype.destroy=Ul.prototype.destroy;Ul.prototype.append=Ul.prototype.append;function $l(){}
function am(a,b,c,d,e){var f=e in d,g=!0,h;for(h in b){var k=e+"."+h,l=f?d[e]:c[h];f||h in c?void 0===b[h]?void 0===l||f?delete a[h]:a[h]=Qb(l):l.constructor==Object&&b[h]&&b[h].constructor==Object?(a[h]||(a[h]=Qb(l)),k=am(a[h],b[h],l,d,k),g=g&&k):typeof b[h]!=typeof l||null==b[h]||"function"!=typeof b[h]&&b[h].constructor!=l.constructor?(Ua("Invalid config, wrong type for "+k),g=!1):("function"==typeof c[h]&&c[h].length!=b[h].length&&Va("Unexpected number of arguments for "+k),a[h]=b[h]):(Ua("Invalid config, unrecognized key "+
k),g=!1)}return g}function bm(a,b){for(var c={},d=c,e=0,f=0;;){e=a.indexOf(".",e);if(0>e)break;if(0==e||"\\"!=a[e-1])f=a.substring(f,e).replace(/\\\./g,"."),d[f]={},d=d[f],f=e+1;e+=1}d[a.substring(f).replace(/\\\./g,".")]=b;return c}M("shaka.util.ConfigUtils",$l);$l.convertToConfigObject=bm;$l.mergeConfigObjects=am;function cm(){}
function dm(){var a=1E6,b=Infinity;navigator.connection&&(navigator.connection.downlink&&(a=1E6*navigator.connection.downlink),navigator.connection.saveData&&(b=360));var c={retryParameters:wb(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:Hd,logLicenseExchange:!1,updateExpirationTime:1},d={retryParameters:wb(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,defaultPresentationDelay:0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,
ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1E3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1},hls:{ignoreTextStreamFailures:!1,useFullSegmentsForStartTime:!1}},e={retryParameters:wb(),failureCallback:function(h){return[h]},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,
stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2};if(Wc("Web0S")||Wc("Tizen")||Wc("CrKey"))e.stallSkip=0;var f={trackSelectionCallback:function(h){return K(function(k){return k["return"](h)})},progressCallback:function(h,k){return[h,k]},usePersistentLicense:!0},g={drm:c,manifest:d,streaming:e,offline:f,abrFactory:function(){return new qf},abr:{enabled:!0,defaultBandwidthEstimate:a,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:Infinity,
minHeight:0,maxHeight:b,minPixels:0,maxPixels:Infinity,minFrameRate:0,maxFrameRate:Infinity,minBandwidth:0,maxBandwidth:Infinity}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:Infinity,minPixels:0,maxPixels:Infinity,minFrameRate:0,maxFrameRate:Infinity,minBandwidth:0,maxBandwidth:Infinity},playRangeStart:0,playRangeEnd:Infinity,textDisplayFactory:function(){return null}};
f.trackSelectionCallback=function(h){return K(function(k){return k["return"](em(h,g.preferredAudioLanguage))})};return g}function fm(a,b,c){var d={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return am(a,b,c||dm(),d,"")}
function em(a,b){var c=a.filter(function(h){return"variant"==h.type}),d=[],e=$e(b,c.map(function(h){return h.language}));e&&(d=c.filter(function(h){return U(h.language)==e}));0==d.length&&(d=c.filter(function(h){return h.primary}));0==d.length&&(c.map(function(h){return h.language}),d=c);var f=d.filter(function(h){return h.height&&480>=h.height});f.length&&(f.sort(function(h,k){return k.height-h.height}),d=f.filter(function(h){return h.height==f[0].height}));c=[];if(d.length){var g=Math.floor(d.length/
2);d.sort(function(h,k){return h.bandwidth-k.bandwidth});c.push(d[g])}d=r(a);for(g=d.next();!g.done;g=d.next())g=g.value,"text"==g.type&&c.push(g);return c}M("shaka.util.PlayerConfiguration",cm);cm.mergeConfigObjects=fm;function gm(){this.a=null;this.b=[]}function hm(a,b){if(null==a.a)a.a={timestamp:Date.now()/1E3,state:b,duration:0};else{var c=Date.now()/1E3;a.a.duration=c-a.a.timestamp;a.a.state!=b&&(a.b.push(a.a),a.a={timestamp:c,state:b,duration:0})}}function im(a,b){var c=0;a.a&&a.a.state==b&&(c+=a.a.duration);for(var d=r(a.b),e=d.next();!e.done;e=d.next())e=e.value,c+=e.state==b?e.duration:0;return c}
function jm(a){function b(f){return{timestamp:f.timestamp,state:f.state,duration:f.duration}}for(var c=[],d=r(a.b),e=d.next();!e.done;e=d.next())c.push(b(e.value));a.a&&c.push(b(a.a));return c};function km(){this.b=this.c=null;this.a=[]}function lm(a,b,c){a.c!=b&&(a.c=b,a.a.push({timestamp:Date.now()/1E3,id:b.id,type:"variant",fromAdaptation:c,bandwidth:b.bandwidth}))}function mm(a,b,c){a.b!=b&&(a.b=b,a.a.push({timestamp:Date.now()/1E3,id:b.id,type:"text",fromAdaptation:c,bandwidth:null}))};function nm(){this.g=this.i=this.A=this.s=this.F=this.c=this.v=this.f=this.I=this.N=this.O=this.j=this.R=NaN;this.b=new gm;this.a=new km};function Z(a,b){Pb.call(this);var c=this;this.g=om;this.Sb=this.a=null;this.Y=!1;this.b=new ic;this.vc=this.j=this.sb=this.l=this.Qb=this.s=this.c=this.Rb=this.F=this.Ob=this.A=this.ya=this.v=this.I=this.i=this.K=null;this.ed=1E9;this.h=pm(this);this.Bc={width:Infinity,height:Infinity};this.f=null;this.tb=new gj(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount);this.ca=this.h.preferredTextLanguage;this.Pb=this.h.preferredTextRole;this.wc=[];b&&b(this);this.K=
qm(this);this.N=null;rm&&(this.N=Hc(rm));this.b.D(window,"online",function(){c.Uc()});this.da={name:"detach"};this.Ba={name:"attach"};this.R={name:"unload"};this.Cc={name:"manifest-parser"};this.Ac={name:"manifest"};this.pa={name:"media-source"};this.xc={name:"drm-engine"};this.O={name:"load"};this.mc={name:"src-equals-drm-engine"};this.za={name:"src-equals"};var d=new Map;d.set(this.Ba,function(e,f){return Cb(sm(c,e,f))});d.set(this.da,function(e){e.u&&(c.b.oa(e.u,"error"),e.u=null);c.a=null;e=Promise.resolve();
return Cb(e)});d.set(this.R,function(e){return Cb(tm(c,e))});d.set(this.pa,function(e){e=um(c,e);return Cb(e)});d.set(this.Cc,function(e,f){var g=vm(c,e,f);return Cb(g)});d.set(this.Ac,function(e){return wm(c,e)});d.set(this.xc,function(){var e=xm(c);return Cb(e)});d.set(this.O,function(e,f){return Cb(ym(c,e,f))});d.set(this.mc,function(e){e=zm(c,e);return Cb(e)});d.set(this.za,function(e,f){return Am(c,e,f)});this.Z=new Jl(this.da,{ce:function(e,f,g,h){var k=null;e==c.da&&(k=g==c.da?c.da:c.Ba);e==
c.Ba&&(k=g==c.da||f.u!=h.u?c.da:g==c.Ba?c.Ba:g==c.pa||g==c.O?c.pa:g==c.za?c.mc:null);e==c.pa&&(k=g==c.O&&f.u==h.u?c.Cc:c.R);e==c.Cc&&(k=Bm(c.O,c.Ac,c.R,g,f,h));e==c.Ac&&(k=Bm(c.O,c.xc,c.R,g,f,h));e==c.xc&&(k=Bm(c.O,c.O,c.R,g,f,h));e==c.mc&&(k=g==c.za&&f.u==h.u?c.za:c.R);if(e==c.O||e==c.za)k=c.R;e==c.R&&(k=h.u&&f.u==h.u?c.Ba:c.da);return k},Qd:function(e,f,g){c.dispatchEvent(Cm(Dm,{state:e.name}));return d.get(e)(f,g)},handleError:function(e){return K(function(f){return 1==f.a?t(f,tm(c,e),2):f["return"](e.u?
c.Ba:c.da)})},pe:function(e){c.dispatchEvent(Cm(Em,{state:e.name}))}});a&&this.ub(a,!0)}pa(Z,Pb);function Cm(a,b){return new Mb(a,b)}p=Z.prototype;
p.destroy=function(){var a=this,b;return K(function(c){switch(c.a){case 1:if(a.g==Fm)return c["return"]();a.g=Fm;b=Ol(a.Z,function(){return{node:a.da,payload:Kl(),Qa:!1}});return t(c,new Promise(function(d){b.kb=function(){};b.bc=function(){d()};b.Ta=function(){d()};b.onError=function(){d()};b.dc=function(){d()}}),2);case 2:return t(c,a.Z.destroy(),3);case 3:a.b&&(a.b.release(),a.b=null);a.vc=null;a.j=null;a.h=null;a.f=null;a.Sb=null;if(!a.K){c.o(0);break}return t(c,a.K.destroy(),5);case 5:a.K=null,
w(c)}})};p.ub=function(a,b){b=void 0===b?!0:b;if(this.g==Fm)return Promise.reject(Gm());var c=Kl();c.u=a;Sc()||(b=!1);var d=b?this.pa:this.Ba,e=Ol(this.Z,function(){return{node:d,payload:c,Qa:!1}});e.kb=function(){};return Hm(e)};p.detach=function(){var a=this;if(this.g==Fm)return Promise.reject(Gm());var b=Ol(this.Z,function(){return{node:a.da,payload:Kl(),Qa:!1}});b.kb=function(){};return Hm(b)};
p.Ie=function(a){var b=this;a=void 0===a?!0:a;if(this.g==Fm)return Promise.reject(Gm());Sc()||(a=!1);var c=Kl(),d=Ol(this.Z,function(e){var f=e.u&&a?b.pa:e.u?b.Ba:b.da;c.u=e.u;return{node:f,payload:c,Qa:!1}});d.kb=function(){};return Hm(d)};
p.load=function(a,b,c){var d=this;if(this.g==Fm)return Promise.reject(Gm());this.dispatchEvent(Cm(Im));var e=Kl();e.uri=a;e.$c=Date.now()/1E3;c&&(e.mimeType=c);void 0!==b&&(e.startTime=b);var f=Jm(this,e)?this.za:this.O,g=Ol(this.Z,function(h){if(null==h.u)return null;e.u=h.u;return{node:f,payload:e,Qa:!0}});this.f=new nm;g.kb=function(){};return new Promise(function(h,k){g.dc=function(){return k(new O(2,7,7002))};g.bc=function(){h();d.dispatchEvent(Cm(Km))};g.Ta=function(){return k(Gm())};g.onError=
function(l){return k(l)}})};
function Jm(a,b){if(!Sc())return!0;var c=b.mimeType,d=b.uri||"";c||(c={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"}[Ug(d)]);return c?""==(b.u||Uc()).canPlayType(c)?!1:Sc()&&(c in Tg||Ug(d)in Vg)?Vc()&&a.h.streaming.useNativeHlsOnSafari:!0:!1}
function sm(a,b,c){null==b.u&&(b.u=c.u,a.b.D(b.u,"error",function(){var d=Lm(a);d&&Mm(a,d)}));a.a=b.u;return Promise.resolve()}
function tm(a,b){var c,d,e,f,g,h,k,l,m;return K(function(n){switch(n.a){case 1:return a.g!=Fm&&(a.g=om),c=a.wc.map(function(q){return q()}),a.wc=[],t(n,Promise.all(c),2);case 2:a.dispatchEvent(Cm(Nm));b.mimeType=null;b.startTime=null;b.uri=null;b.u&&(a.b.oa(b.u,"loadedmetadata"),a.b.oa(b.u,"playing"),a.b.oa(b.u,"pause"),a.b.oa(b.u,"ended"),a.b.oa(b.u,"ratechange"));a.ya&&(a.ya.release(),a.ya=null);a.Ob&&(a.Ob.stop(),a.Ob=null);if(!a.s){n.o(3);break}return t(n,a.s.stop(),4);case 4:a.s=null,a.Qb=null;
case 3:if(!a.j){n.o(5);break}return t(n,a.j.stop(),5);case 5:if(!a.c){n.o(7);break}return t(n,a.c.destroy(),8);case 8:a.c=null;case 7:a.A&&(a.A.release(),a.A=null);a.v&&(a.v.release(),a.v=null);if(!a.I){n.o(9);break}return t(n,a.I.destroy(),10);case 10:a.I=null;case 9:if(a.N)a.N.onAssetUnload();if(!b.u||!b.u.src){n.o(11);break}return t(n,new Promise(function(q){return(new P(q)).P(.1)}),12);case 12:b.u.removeAttribute("src"),b.u.load();case 11:if(!a.i){n.o(13);break}return t(n,a.i.destroy(),14);case 14:a.i=
null;case 13:a.sb=null;a.F=null;if(a.l){d=r(a.l.variants);for(e=d.next();!e.done;e=d.next())for(f=e.value,g=r([f.audio,f.video]),h=g.next();!h.done;h=g.next())(k=h.value)&&k.segmentIndex&&k.segmentIndex.release();l=r(a.l.textStreams);for(h=l.next();!h.done;h=l.next())m=h.value,m.segmentIndex&&m.segmentIndex.release()}a.l=null;a.f=new nm;a.yc=null;Om(a);w(n)}})}
function um(a,b){var c,d,e,f;return K(function(g){if(1==g.a)return c=window.muxjs?new Sd:new Td,d=a.h.textDisplayFactory,e=Hc(d),a.yc=d,f=Pm(b.u,c,e,function(h,k,l){h=r(h);for(var m=h.next();!m.done;m=h.next())if(m=m.value,m.data&&m.cueTime&&m.frames){for(var n=m.cueTime+k,q=l,u=r(m.frames),v=u.next();!v.done;v=u.next())Qm(a,n,q,"ID3",v.value);if(a.N)a.N.onHlsTimedMetadata(m,n)}}),t(g,f.A,2);a.I=f;w(g)})}
function vm(a,b,c){var d,e,f,g;return K(function(h){if(1==h.a)return b.mimeType=c.mimeType,b.uri=c.uri,d=b.uri,e=a.K,a.sb=d,f=a,t(h,Sg(d,e,a.h.manifest.retryParameters,b.mimeType),2);f.Qb=h.b;a.s=Hc(a.Qb);g=Qb(a.h.manifest);c.u&&"AUDIO"===c.u.nodeName&&(g.disableVideo=!0);a.s.configure(g);w(h)})}
function wm(a,b){var c=b.uri,d=a.K;a.Rb=new Rj(function(){return a.Vc()});Sj(a.Rb,function(g){Rm(a,Sm,g);if(a.N)a.N.onDashTimedMetadata(g)});var e={networkingEngine:d,filter:function(g){return K(function(h){return h["return"](a.cb(g))})},onTimelineRegionAdded:function(g){var h=a.Rb;a:{var k=r(h.a);for(var l=k.next();!l.done;l=k.next())if(l=l.value,l.schemeIdUri==g.schemeIdUri&&l.id==g.id&&l.startTime==g.startTime&&l.endTime==g.endTime){k=l;break a}k=null}null==k&&(h.a.add(g),h.b(g))},onEvent:function(g){return a.dispatchEvent(g)},
onError:function(g){return Mm(a,g)}},f=Date.now()/1E3;return new Q(function(){var g,h,k,l;return K(function(m){if(1==m.a)return g=a,t(m,a.s.start(c,e),2);g.l=m.b;h=Cm(Tm);a.dispatchEvent(h);if(0==a.l.variants.length)throw new O(2,4,4036);Um(a.l);k=Date.now()/1E3;l=k-f;a.f.v=l;w(m)})}(),function(){return a.s.stop()})}
function xm(a){var b,c;return K(function(d){if(1==d.a)return b=Date.now()/1E3,c=!0,a.i=Vm(a,{ib:a.K,onError:function(e){Mm(a,e)},cc:function(e){Wm(a,e)},onExpirationUpdated:function(e,f){Xm(a,e,f)},onEvent:function(e){a.dispatchEvent(e);e.type==Ym&&c&&(c=!1,a.f.c=Date.now()/1E3-b)}}),a.i.configure(a.h.drm),t(d,nd(a.i,a.l.variants,a.l.offlineSessionIds),2);a.cb(a.l);w(d)})}
function ym(a,b,c){var d,e,f,g,h,k,l,m,n,q;return K(function(u){switch(u.a){case 1:return b.startTime=c.startTime,d=b.u,e=b.uri,a.sb=e,a.A=new uj({$b:function(){return b.u.playbackRate},Yc:function(v){b.u.playbackRate=v},td:function(v){b.u.currentTime+=v}}),f=function(){return Zm(a)},g=function(){return $m(a)},a.b.D(d,"playing",f),a.b.D(d,"pause",f),a.b.D(d,"ended",f),a.b.D(d,"ratechange",g),h=a.h.abrFactory,a.j&&a.vc==h||(a.vc=h,a.j=Hc(h),"function"!=typeof a.j.playbackRateChanged&&(Ac("AbrManager",
"Please use an AbrManager with playbackRateChanged function."),a.j.playbackRateChanged=function(){}),a.j.configure(a.h.abr)),an(a),a.tb=new gj(a.h.preferredAudioLanguage,a.h.preferredVariantRole,a.h.preferredAudioChannelCount),a.ca=a.h.preferredTextLanguage,bn(a.l.presentationTimeline,a.h.playRangeStart,a.h.playRangeEnd),t(u,a.i.ub(d),2);case 2:a.j.init(function(v,y,z){y=void 0===y?!1:y;z=void 0===z?0:z;a.c&&v!=a.c.b&&(lm(a.f.a,v,!0),gk(a.c,v,y,z),cn(a))});a.v=dn(a,b.startTime);a.ya=en(a);k=Math.max(a.l.minBufferTime,
a.h.streaming.rebufferingGoal);fn(a,k);af(a.l,a.h.preferredAudioChannelCount);a.c=gn(a);a.c.configure(a.h.streaming);a.g=hn;a.dispatchEvent(Cm(jn));l=kn(a)?a.j.chooseVariant():null;lm(a.f.a,l,!0);gk(a.c,l,!1,0);(m=of(a.l.textStreams,a.ca,a.Pb)[0]||null)&&mm(a.f.a,m,!0);m?(l.audio&&ln(a,l.audio,m)&&(a.Y=!0),a.Y&&a.I.i.setTextVisibility(!0),mn(a)):a.Y=!1;m&&(a.h.streaming.alwaysStreamText||a.Gc())&&hk(a.c,m);if(!a.h.streaming.startAtSegmentBoundary){u.o(3);break}n=a.v.g();return t(u,nn(l,n),4);case 4:q=
u.b,a.v.s(q);case 3:return t(u,a.c.start(),5);case 5:a.h.abr.enabled&&(a.j.enable(),on(a)),a.cb(a.l),pn(a),cn(a),kn(a),a.l.variants.some(function(v){return v.primary}),a.b.la(d,"loadedmetadata",function(){a.f.f=Date.now()/1E3-c.$c}),w(u)}})}
function zm(a,b){var c,d,e,f;return K(function(g){return 1==g.a?(c=Kc,d=Date.now()/1E3,e=!0,a.i=Vm(a,{ib:a.K,onError:function(h){Mm(a,h)},cc:function(h){Wm(a,h)},onExpirationUpdated:function(h,k){Xm(a,h,k)},onEvent:function(h){a.dispatchEvent(h);h.type==Ym&&e&&(e=!1,a.f.c=Date.now()/1E3-d)}}),a.i.configure(a.h.drm),f={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"video/mp4",codecs:"",encrypted:!0,
drmInfos:[],keyIds:new Set,language:"und",label:null,type:c.Aa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0},t(g,nd(a.i,[f],[]),2)):t(g,a.i.ub(b.u),0)})}
function Am(a,b,c){function d(){return Zm(a)}b.uri=c.uri;b.startTime=c.startTime;a.sb=b.uri;a.v=new Fj(b.u);null!=b.startTime&&a.v.s(b.startTime);a.A=new uj({$b:function(){return b.u.playbackRate},Yc:function(g){b.u.playbackRate=g},td:function(g){b.u.currentTime+=g}});fn(a,a.h.streaming.rebufferingGoal);a.b.D(b.u,"playing",d);a.b.D(b.u,"pause",d);a.b.D(b.u,"ended",d);a.b.D(b.u,"ratechange",function(){return $m(a)});"none"!=a.a.preload&&a.b.la(a.a,"loadedmetadata",function(){a.f.f=Date.now()/1E3-c.$c});
a.a.audioTracks&&(a.b.D(a.a.audioTracks,"addtrack",function(){return pn(a)}),a.b.D(a.a.audioTracks,"removetrack",function(){return pn(a)}),a.b.D(a.a.audioTracks,"change",function(){return pn(a)}));a.a.textTracks&&(a.b.D(a.a.textTracks,"addtrack",function(g){pn(a);qn(a,g)}),a.b.D(a.a.textTracks,"removetrack",function(){return pn(a)}),a.b.D(a.a.textTracks,"change",function(){return pn(a)}));b.u.src=b.uri;(Wc("Tizen")||Wc("Web0S"))&&b.u.load();a.g=rn;a.dispatchEvent(Cm(jn));var e=new yb;wj(a.a,HTMLMediaElement.HAVE_METADATA,
a.b,function(){e.resolve()});var f=!1;a.wc.push(function(){f=!0});wj(a.a,HTMLMediaElement.HAVE_CURRENT_DATA,a.b,function(){var g;return K(function(h){if(1==h.a){if(f)return h["return"]();sn(a);g=tn(a);return g.find(function(k){return"disabled"!=k.mode})?h.o(2):t(h,new Promise(function(k){a.b.la(a.a.textTracks,"change",k);(new P(k)).P(1)}),2)}if(f)return h["return"]();un(a);w(h)})});a.a.error?e.reject(Lm(a)):"none"==a.a.preload&&(Va('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),
e.resolve());a.b.la(a.a,"error",function(){e.reject(Lm(a))});return new Q(e,function(){e.reject(new O(2,7,7001));return Promise.resolve()})}function sn(a){var b=a.h.preferredAudioLanguage;if(""!=b){a.Wc(b);var c=a.h.preferredVariantRole;""!=c&&a.Wc(b,c)}}function un(a){var b=a.h.preferredTextLanguage;if(""!=b){a.Xc(b);var c=a.h.preferredTextRole;""!=c&&a.Xc(b,c)}}
function qn(a,b){var c=b.track;"metadata"==c.kind&&(c.mode="hidden",a.b.D(c,"cuechange",function(){if(c.activeCues)for(var d=r(c.activeCues),e=d.next();!e.done;e=d.next())if(e=e.value,Qm(a,e.startTime,e.endTime,e.type,e.value),a.N)a.N.onCueMetadataChange(e.value)}),(new P(function(){var d=tn(a);d=r(d);for(var e=d.next();!e.done;e=d.next())e.value.mode="hidden"})).Ed().P(.5))}function Qm(a,b,c,d,e){a.dispatchEvent(Cm(vn,{startTime:b,endTime:c,Se:d,payload:e}))}
function Um(a){function b(c){return c.video&&c.audio||c.video&&c.video.codecs.includes(",")}a.variants.some(b)&&(a.variants=a.variants.filter(b))}function Vm(a,b){return new gd(b,a.h.drm.updateExpirationTime)}function qm(a){return new S(function(b,c){a.j&&a.j.segmentDownloaded(b,c)})}
function dn(a,b){return new Gj(a.a,a.l,a.h.streaming,b,function(){a.ya&&Nj(a.ya,!0);if(a.c)for(var c=a.c,d=c.m.Zb(),e=c.h.smallGapLimit,f=r(c.a.keys()),g=f.next();!g.done;g=f.next()){g=g.value;var h;if(h=null!=Ke(c.m.H,g))h=c.m.H,"text"==g?(h=h.c,h=null==h.a||null==h.b?!1:d>=h.a&&d<h.b):(h=Je(h,g),h=Vd(h,d,e)),h=!h;h&&(lk(c,c.a.get(g)),"text"===g&&c.m.H.v.c())}a.F&&wn(a)},function(c){return a.dispatchEvent(c)})}
function en(a){var b=new Tj(a.Rb);Uj(b,function(d){Rm(a,xn,d)},function(d){Rm(a,yn,d)},function(d,e){e||(Rm(a,xn,d),Rm(a,yn,d))});var c=new Mj(a.a);c.a.add(b);return c}function fn(a,b){a.F=new kj;a.F.a=mj;nj(a.F,b,Math.min(.5,b/2));Om(a);a.Ob=(new P(function(){wn(a)})).na(.25)}
function wn(a){switch(a.g){case rn:if(a.a.ended)var b=!0;else{var c=Ud(a.a.buffered);b=null!=c&&c>=a.a.duration-1}break;case hn:a:if(a.a.ended||He(a.I))b=!0;else{if(a.l.presentationTimeline.W()){c=a.l.presentationTimeline.Ja();var d=Ud(a.a.buffered);if(null!=d&&d>=c){b=!0;break a}}b=!1}break;default:b=!1}d=Wd(a.a.buffered,a.a.currentTime);c=a.F;var e=b,f=c.b.get(c.a);b=c.a;d=e||d>=f?lj:mj;c.a=d;b!=d&&Om(a)}function Pm(a,b,c,d){return new Ae(a,b,c,d)}
function gn(a){return new Vj(a.l,{Zb:function(){return a.v.g()},getBandwidthEstimate:function(){return a.j.getBandwidthEstimate()},H:a.I,ib:a.K,onError:function(b){return Mm(a,b)},onEvent:function(b){return a.dispatchEvent(b)},qe:function(){a.s&&a.s.update&&a.s.update()},Qc:function(){a.v&&a.v.v();wn(a)}})}
p.configure=function(a,b){2==arguments.length&&"string"==typeof a&&(a=bm(a,b));a.manifest&&a.manifest.dash&&"defaultPresentationDelay"in a.manifest.dash&&(Ac("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),a.manifest.defaultPresentationDelay=a.manifest.dash.defaultPresentationDelay,delete a.manifest.dash.defaultPresentationDelay);var c=fm(this.h,a,pm(this));zn(this);return c};
function zn(a){if(a.s){var b=Qb(a.h.manifest);a.a&&"AUDIO"===a.a.nodeName&&(b.disableVideo=!0);a.s.configure(b)}a.i&&a.i.configure(a.h.drm);if(a.c){a.c.configure(a.h.streaming);try{a.cb(a.l)}catch(f){Mm(a,f)}a.j&&kn(a);b=a.c.b;!b||b.allowedByApplication&&b.allowedByKeySystem||An(a)}if(a.I&&(b=a.h.textDisplayFactory,a.yc!=b)){var c=Hc(b),d=a.I,e=d.i;d.i=c;e&&(c.setTextVisibility(e.isTextVisible()),e.destroy());d.c&&(d.c.c=c);a.yc=b;a.c&&(b=a.c,(c=b.a.get("text"))&&fk(b,c.stream,!0,0,!0))}a.j&&(a.j.configure(a.h.abr),
a.h.abr.enabled?a.j.enable():a.j.disable(),on(a));a.F&&(b=a.h.streaming.rebufferingGoal,a.l&&(b=Math.max(b,a.l.minBufferTime)),nj(a.F,b,Math.min(.5,b/2)))}p.getConfiguration=function(){var a=pm(this);fm(a,this.h,pm(this));return a};p.ye=function(){for(var a in this.h)delete this.h[a];fm(this.h,pm(this),pm(this));zn(this)};p.Yd=function(){return this.g};p.be=function(){return this.a};p.Yb=function(){return this.K};p.Sd=function(){return this.sb};
p.Rd=function(){Wa("getAdManager","Shaka Player's ad features are currently in BETA and are NOT yet covered by semantic versioning compatibility guarantees.  The API may change at any time!");return this.N};p.W=function(){return this.l?this.l.presentationTimeline.W():this.a&&this.a.src?Infinity==this.a.duration:!1};p.Sa=function(){return this.l?this.l.presentationTimeline.Sa():!1};
p.me=function(){if(this.l){var a=this.l.variants;return a.length?!a[0].video:!1}return this.a&&this.a.src?this.a.videoTracks?0==this.a.videoTracks.length:0==this.a.videoHeight:!1};p.Vc=function(){if(this.l){var a=this.l.presentationTimeline;return{start:a.fb(),end:a.Ca()}}return this.a&&this.a.src&&(a=this.a.seekable,a.length)?{start:a.start(0),end:a.end(a.length-1)}:{start:0,end:0}};p.keySystem=function(){return Bd(this.drmInfo())};p.drmInfo=function(){return this.i?this.i.c:null};
p.yb=function(){return this.i?this.i.yb():Infinity};p.od=function(){return this.F?this.F.a==mj:!1};p.de=function(){return this.a?this.A?this.A.b:1:0};p.Ge=function(a){0==a?Va("A trick play rate of 0 is unsupported!"):(this.a.paused&&this.a.play(),this.A.set(a),this.g==hn&&(this.j.playbackRateChanged(a),ek(this.c,1<Math.abs(a))))};p.Nd=function(){this.g==rn&&this.A.set(1);this.g==hn&&(this.A.set(1),this.j.playbackRateChanged(1),ek(this.c,!1))};
p.Fc=function(){if(this.l){for(var a=this.c?this.c.b:null,b=[],c=r(this.l.variants),d=c.next();!d.done;d=c.next())if(d=d.value,mf(d)){var e=ff(d);e.active=d==a;b.push(e)}return b}return this.a&&this.a.audioTracks?Array.from(this.a.audioTracks).map(function(f){return kf(f)}):[]};
p.ac=function(){if(this.l){for(var a=this.c?this.c.c:null,b=[],c=r(this.l.textStreams),d=c.next();!d.done;d=c.next()){d=d.value;var e=gf(d);e.active=d==a;b.push(e)}return b}return this.a&&this.a.src&&this.a.textTracks?tn(this).map(function(f){var g=lf(f);g.active="disabled"!=f.mode;g.type="text";g.originalTextId=f.id;"captions"==f.kind&&(g.mimeType="application/cea-608");f.kind&&(g.roles=[f.kind]);return g}):[]};
p.Bd=function(a){if(this.l&&this.c){var b=this.l.textStreams.find(function(d){return d.id==a.id});b&&b!=this.c.c&&(mm(this.f.a,b,!1),hk(this.c,b),Bn(this),this.ca=b.language)}else if(this.a&&this.a.src&&this.a.textTracks){b=tn(this);b=r(b);for(var c=b.next();!c.done;c=b.next())c=c.value,hf(c)==a.id?c.mode=this.Y?"showing":"hidden":c.mode="disabled";Bn(this)}};
p.ze=function(a,b,c){b=void 0===b?!1:b;c=void 0===c?0:c;if(this.l&&this.c){this.h.abr.enabled&&Va("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var d=this.l.variants.find(function(e){return e.id==a.id});d&&mf(d)&&d!=this.c.b&&(lm(this.f.a,d,!1),gk(this.c,d,b,c),Cn(this),this.tb=new fj(d),kn(this))}else if(this.a&&this.a.audioTracks){b=Array.from(this.a.audioTracks);b=r(b);for(c=
b.next();!c.done;c=b.next())c=c.value,hf(c)==a.id&&(c.enabled=!0);Cn(this)}};p.Ud=function(){return Dn(this.Fc())};p.ke=function(){return Dn(this.ac())};p.Td=function(){return Array.from(En(this.Fc()))};p.je=function(){return Array.from(En(this.ac()))};
p.Wc=function(a,b){if(this.l&&this.v)this.tb=new gj(a,b||"",0,"","audio"),An(this);else if(this.a&&this.a.audioTracks){var c=Array.from(this.a.audioTracks),d=U(a);c=r(c);for(var e=c.next();!e.done;e=c.next()){e=e.value;var f=kf(e);U(f.language)!=d||b&&!f.roles.includes(b)||(e.enabled=!0)}Cn(this)}};
p.Xc=function(a,b){if(this.l&&this.v){this.ca=a;this.Pb=b||"";var c=of(this.l.textStreams,this.ca,this.Pb)[0]||null;c&&c!=this.c.c&&(mm(this.f.a,c,!1),this.h.streaming.alwaysStreamText||this.Gc())&&(hk(this.c,c),Bn(this))}else{var d=U(a);(c=this.ac().find(function(e){return U(e.language)==d&&(!b||e.roles.includes(b))}))&&this.Bd(c)}};
p.Ae=function(a){if(this.l&&this.v){for(var b=null,c=r(this.l.variants),d=c.next();!d.done;d=c.next())if(d=d.value,d.audio.label==a){b=d;break}null!=b&&(this.tb=new gj(b.language,"",0,a),An(this))}};p.Gc=function(){var a=this.Y;return this.I?this.I.i.isTextVisible():this.a&&this.a.src&&this.a.textTracks?tn(this).some(function(b){return"showing"==b.mode}):a};function tn(a){return Array.from(a.a.textTracks).filter(function(b){return"metadata"!=b.kind&&"Shaka Player TextTrack"!=b.label})}
p.De=function(a){a=!!a;if(this.Y!=a){this.Y=a;if(this.g==hn)this.I.i.setTextVisibility(a),this.h.streaming.alwaysStreamText||(a?this.c.c||(a=of(this.l.textStreams,this.ca,this.Pb),0<a.length&&(hk(this.c,a[0]),Bn(this))):dk(this.c));else if(this.a&&this.a.src&&this.a.textTracks){var b=tn(this);b=r(b);for(var c=b.next();!c.done;c=b.next())c=c.value,"disabled"!=c.mode&&(c.mode=a?"showing":"hidden")}mn(this)}};
p.ee=function(){if(!this.W())return null;var a=this.Z.f,b=0;if(this.v)b=this.v.g();else if(a){if(null==a.startTime)return new Date;b=a.startTime}return this.l?new Date(1E3*(this.l.presentationTimeline.f+b)):this.a&&this.a.getStartDate?(a=this.a.getStartDate(),isNaN(a.getTime())?null:new Date(a.getTime()+1E3*b)):null};
p.md=function(){if(!this.W())return null;if(this.l)return new Date(1E3*this.l.presentationTimeline.f);if(this.a&&this.a.getStartDate){var a=this.a.getStartDate();return isNaN(a.getTime())?null:a}return null};p.Xb=function(){if(this.g==hn)return this.I.Xb();var a={total:[],audio:[],video:[],text:[]};this.g==rn&&(a.total=Xd(this.a.buffered));return a};
p.getStats=function(){if(this.g!=hn&&this.g!=rn)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};Zm(this);var a=this.a;if(a.getVideoPlaybackQuality){a=a.getVideoPlaybackQuality();var b=this.f,c=Number(a.totalVideoFrames);b.O=Number(a.droppedVideoFrames);
b.N=c;this.f.I=Number(a.corruptedVideoFrames)}this.i?(a=this.i,a=a.I?a.I:NaN):a=NaN;this.f.F=a;if(this.g==hn){if(a=this.c.b)this.f.i=(this.A?this.A.b:1)*a.bandwidth;a&&a.video&&(b=this.f,c=a.video.height||NaN,b.R=a.video.width||NaN,b.j=c);this.W()&&(a=this.md().valueOf()+1E3*this.Vc().end,this.f.s=(Date.now()-a)/1E3);this.l&&this.l.presentationTimeline&&(this.f.A=this.l.presentationTimeline.a);a=this.j.getBandwidthEstimate();this.f.g=a}var d=this.f;a=d.R;b=d.j;c=d.i;var e=d.N,f=d.O,g=d.I,h=d.g,k=
d.f,l=d.v,m=d.c,n=im(d.b,"playing"),q=im(d.b,"paused"),u=im(d.b,"buffering"),v=d.F,y=d.s,z=d.A,A=jm(d.b),D=[];d=r(d.a.a);for(var B=d.next();!B.done;B=d.next())B=B.value,D.push({timestamp:B.timestamp,id:B.id,type:B.type,fromAdaptation:B.fromAdaptation,bandwidth:B.bandwidth});return{width:a,height:b,streamBandwidth:c,decodedFrames:e,droppedFrames:f,corruptedFrames:g,estimatedBandwidth:h,loadLatency:k,manifestTimeSeconds:l,drmTimeSeconds:m,playTime:n,pauseTime:q,bufferingTime:u,licenseTime:v,liveLatency:y,
maxSegmentDuration:z,stateHistory:A,switchHistory:D}};
p.addTextTrack=function(a,b,c,d,e,f){if(this.g==rn)throw Error("State error!");if(this.g!=hn)throw Error("State error!");var g=this.l.presentationTimeline.getDuration();if(Infinity==g)throw new O(1,4,4033);a={id:this.ed++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:og(0,g,[a]),mimeType:d,codecs:e||"",kind:c,encrypted:!1,drmInfos:[],keyIds:new Set,language:b,label:f||null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,
audioSamplingRate:null,closedCaptions:null};this.l.textStreams.push(a);pn(this);return gf(a)};p.Ce=function(a,b){this.Bc.width=a;this.Bc.height=b};p.Uc=function(){if(this.g==hn){var a=this.c;if(a.B.a)a=!1;else if(a.g)a=!1;else{for(var b=r(a.a.values()),c=b.next();!c.done;c=b.next())c=c.value,c.Ab&&(c.Ab=!1,ck(a,c,.1));a=!0}}else a=!1;return a};
p.Zd=function(){Va("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for.");return this.l};p.$d=function(){return this.Qb};
function pm(a){var b=dm();b.streaming.failureCallback=function(c){var d=[1001,1002,1003];a.W()&&d.includes(c.code)&&(c.severity=1,a.Uc())};b.textDisplayFactory=function(){return a.Sb?new Ul(a.a,a.Sb):new Ql(a.a)};return b}p.Ee=function(a){this.Sb=a};
function an(a){for(var b=new Map,c=r(a.l.variants),d=c.next();!d.done;d=c.next())if(d=d.value,d.video&&d.video.closedCaptions){d=d.video;for(var e=r(d.closedCaptions.keys()),f=e.next();!f.done;f=e.next())if(f=f.value,!b.has(f)){var g={id:a.ed++,originalId:f,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"application/cea-608",codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:d.closedCaptions.get(f),label:null,type:"text",primary:!1,trickModeVideo:null,
emsgSchemeIdUris:null,roles:d.roles,channelsCount:null,audioSamplingRate:null,closedCaptions:null};b.set(f,g)}}b=r(b.values());for(c=b.next();!c.done;c=b.next())a.l.textStreams.push(c.value)}
p.cb=function(a){df(this.i,this.c?this.c.b:null,a);if(!a.variants.some(mf))throw new O(2,4,4032);for(var b=this.h.restrictions,c=this.Bc,d=!1,e=r(a.variants),f=e.next();!f.done;f=e.next()){f=f.value;var g=f.allowedByApplication;f.allowedByApplication=cf(f,b,c);g!=f.allowedByApplication&&(d=!0)}d&&this.c&&pn(this);if(b=this.i?this.i.c:null)for(c=r(a.variants),d=c.next();!d.done;d=c.next())for(d=d.value,d=r((d.video?d.video.drmInfos:[]).concat(d.audio?d.audio.drmInfos:[])),e=d.next();!e.done;e=d.next())if(e=
e.value,e.keySystem==b.keySystem)for(e=r(e.initData||[]),f=e.next();!f.done;f=e.next())f=f.value,xd(this.i,f.initDataType,f.initData);Fn(this,a)};
function nn(a,b){var c,d,e,f,g;return K(function(h){if(1==h.a)return c=a.audio,d=a.video,e=function(k,l){var m,n;return K(function(q){if(1==q.a)return k?t(q,k.createSegmentIndex(),2):q["return"](null);m=k.segmentIndex[Symbol.iterator]().seek(l);if(!m)return q["return"](null);n=m.startTime;return q["return"](n)})},t(h,e(c,b),2);if(3!=h.a)return f=h.b,t(h,e(d,b),3);g=h.b;return null!=g&&null!=f?h["return"](Math.max(g,f)):null!=g?h["return"](g):null!=f?h["return"](f):h["return"](b)})}
function Om(a){var b=a.od();if(a.f&&a.F&&a.v){var c=a.A;c.f=b;vj(c);Zm(a)}a.dispatchEvent(Cm(Gn,{buffering:b}))}function $m(a){var b=a.a.playbackRate;0!=b&&(a.A&&a.A.set(b),b=Cm(Hn),a.dispatchEvent(b))}function Zm(a){if(a.f&&a.F){var b=a.f.b;a.F.a==mj?hm(b,"buffering"):a.a.paused?hm(b,"paused"):a.a.ended?hm(b,"ended"):hm(b,"playing")}}
function kn(a){try{Fn(a,a.l)}catch(c){return Mm(a,c),!1}var b=a.l.variants.filter(function(c){return mf(c)});b=a.tb.create(b);a.j.setVariants(Array.from(b.values()));return!0}function An(a){var b;if(b=kn(a)?a.j.chooseVariant():null){if(b==a.c.b)return;lm(a.f.a,b,!0);gk(a.c,b,!0,0);Cn(a)}cn(a)}function ln(a,b,c){a=U(a.h.preferredTextLanguage);b=U(b.language);c=U(c.language);return Ue(c,a)&&!Ue(b,c)}function cn(a){var b=Cm(In);Jn(a,b)}function pn(a){var b=Cm(Kn);Jn(a,b)}
function Cn(a){var b=Cm(Ln);Jn(a,b)}function Bn(a){var b=Cm(Mn);Jn(a,b)}function mn(a){var b=Cm(Nn);Jn(a,b)}function on(a){var b=Cm(On,{Te:a.h.abr.enabled});Jn(a,b)}function Mm(a,b){if(a.g!=Fm){var c=Cm(Pn,{detail:b});a.dispatchEvent(c);c.defaultPrevented&&(b.handled=!0)}}function Rm(a,b,c){a.dispatchEvent(Cm(b,{detail:{schemeIdUri:c.schemeIdUri,value:c.value,startTime:c.startTime,endTime:c.endTime,id:c.id,eventElement:c.eventElement}}))}
function Lm(a){if(!a.a.error)return null;var b=a.a.error.code;if(1==b)return null;var c=a.a.error.msExtendedCode;c&&(0>c&&(c+=Math.pow(2,32)),c=c.toString(16));return new O(2,3,3016,b,c,a.a.error.message)}
function Wm(a,b){if(a.c){var c=Object.keys(b),d=1==c.length&&"00"==c[0],e=!1;if(c.length){c=r(a.l.variants);for(var f=c.next();!f.done;f=c.next()){f=f.value;var g=[];f.audio&&g.push(f.audio);f.video&&g.push(f.video);g=r(g);for(var h=g.next();!h.done;h=g.next()){var k=h.value;h=f.allowedByKeySystem;if(k.keyIds.size){f.allowedByKeySystem=!0;k=r(k.keyIds);for(var l=k.next();!l.done;l=k.next())l=l.value,l=b[d?"00":l],f.allowedByKeySystem=f.allowedByKeySystem&&!!l&&!Qn.includes(l)}h!=f.allowedByKeySystem&&
(e=!0)}}}e&&kn(a);(d=a.c.b)&&!d.allowedByKeySystem&&An(a);e&&pn(a)}}function Xm(a,b,c){if(a.s&&a.s.onExpirationUpdated)a.s.onExpirationUpdated(b,c);b=Cm(Rn);a.dispatchEvent(b)}function bn(a,b,c){0<b&&(a.W()||a.Dd(b));b=a.getDuration();c<b&&(a.W()||a.wa(c))}
function Fn(a,b){var c=a.i?Mc(a.i.Y):{},d=Object.keys(c);d=d.length&&"00"==d[0];for(var e=!1,f=!1,g=new Set,h=new Set,k=r(b.variants),l=k.next();!l.done;l=k.next()){l=l.value;var m=[];l.audio&&m.push(l.audio);l.video&&m.push(l.video);m=r(m);for(var n=m.next();!n.done;n=m.next())if(n=n.value,n.keyIds.size){n=r(n.keyIds);for(var q=n.next();!q.done;q=n.next()){q=q.value;var u=c[d?"00":q];u?Qn.includes(u)&&h.add(u):g.add(q)}}l.allowedByApplication?l.allowedByKeySystem&&(e=!0):f=!0}if(!e)throw c={hasAppRestrictions:f,
missingKeys:Array.from(g),restrictedKeyStatuses:Array.from(h)},new O(2,4,4012,c);}function Jn(a,b){K(function(c){if(1==c.a)return t(c,Promise.resolve(),2);a.g!=Fm&&a.dispatchEvent(b);w(c)})}function En(a){var b=new Set;a=r(a);for(var c=a.next();!c.done;c=a.next())c=c.value,c.language?b.add(U(c.language)):b.add("und");return b}
function Dn(a){var b=new Map;a=r(a);for(var c=a.next();!c.done;c=a.next()){var d=c.value;c="und";var e=[];d.language&&(c=U(d.language));"variant"==d.type?e=d.audioRoles:e=d.roles;e&&e.length||(e=[""]);b.has(c)||b.set(c,new Set);d=r(e);for(e=d.next();!e.done;e=d.next())e=e.value,b.get(c).add(e)}var f=[];b.forEach(function(g,h){for(var k=r(g),l=k.next();!l.done;l=k.next())f.push({language:h,role:l.value})});return f}function Gm(){return new O(2,7,7E3)}
function Bm(a,b,c,d,e,f){return d==a&&e.u==f.u&&e.uri==f.uri&&e.mimeType==f.mimeType?b:c}function Kl(){return{u:null,mimeType:null,startTime:null,$c:NaN,uri:null}}function Hm(a){return new Promise(function(b,c){a.Ta=function(){return c(Gm())};a.bc=function(){return b()};a.onError=function(d){return c(d)};a.dc=function(){return c(Gm())}})}M("shaka.Player",Z);Z.prototype.setVideoContainer=Z.prototype.Ee;Z.prototype.getManifestParserFactory=Z.prototype.$d;Z.prototype.getManifest=Z.prototype.Zd;
Z.prototype.retryStreaming=Z.prototype.Uc;Z.prototype.setMaxHardwareResolution=Z.prototype.Ce;Z.prototype.addTextTrack=Z.prototype.addTextTrack;Z.prototype.getStats=Z.prototype.getStats;Z.prototype.getBufferedInfo=Z.prototype.Xb;Z.prototype.getPresentationStartTimeAsDate=Z.prototype.md;Z.prototype.getPlayheadTimeAsDate=Z.prototype.ee;Z.prototype.setTextTrackVisibility=Z.prototype.De;Z.prototype.isTextTrackVisible=Z.prototype.Gc;Z.prototype.selectVariantsByLabel=Z.prototype.Ae;
Z.prototype.selectTextLanguage=Z.prototype.Xc;Z.prototype.selectAudioLanguage=Z.prototype.Wc;Z.prototype.getTextLanguages=Z.prototype.je;Z.prototype.getAudioLanguages=Z.prototype.Td;Z.prototype.getTextLanguagesAndRoles=Z.prototype.ke;Z.prototype.getAudioLanguagesAndRoles=Z.prototype.Ud;Z.prototype.selectVariantTrack=Z.prototype.ze;Z.prototype.selectTextTrack=Z.prototype.Bd;Z.prototype.getTextTracks=Z.prototype.ac;Z.prototype.getVariantTracks=Z.prototype.Fc;Z.prototype.cancelTrickPlay=Z.prototype.Nd;
Z.prototype.trickPlay=Z.prototype.Ge;Z.prototype.getPlaybackRate=Z.prototype.de;Z.prototype.isBuffering=Z.prototype.od;Z.prototype.getExpiration=Z.prototype.yb;Z.prototype.drmInfo=Z.prototype.drmInfo;Z.prototype.keySystem=Z.prototype.keySystem;Z.prototype.seekRange=Z.prototype.Vc;Z.prototype.isAudioOnly=Z.prototype.me;Z.prototype.isInProgress=Z.prototype.Sa;Z.prototype.isLive=Z.prototype.W;Z.prototype.getAdManager=Z.prototype.Rd;Z.prototype.getAssetUri=Z.prototype.Sd;
Z.prototype.getNetworkingEngine=Z.prototype.Yb;Z.prototype.getMediaElement=Z.prototype.be;Z.prototype.getLoadMode=Z.prototype.Yd;Z.prototype.resetConfiguration=Z.prototype.ye;Z.prototype.getConfiguration=Z.prototype.getConfiguration;Z.prototype.configure=Z.prototype.configure;Z.prototype.load=Z.prototype.load;Z.prototype.unload=Z.prototype.Ie;Z.prototype.detach=Z.prototype.detach;Z.prototype.attach=Z.prototype.ub;
Z.probeSupport=function(){var a,b,c,d,e,f;return K(function(g){if(1==g.a)return t(g,Ld(),2);a=g.b;var h={};if(Sc()){for(var k in Tg)h[k]=!0;for(var l in Vg)h[l]=!0}k={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};l=r(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var m=l.next();!m.done;m=l.next())m=m.value,h[m]=Sc()?!!Tg[m]:Tc(m);for(var n in k)h[n]=Sc()?!!Vg[n]:Tc(k[n]);b=h;h={};n=r('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(","));
for(k=n.next();!k.done;k=n.next())k=k.value,h[k]=Sc()?ue(k)?!0:MediaSource.isTypeSupported(k)||$d(k):Tc(k),l=k.split(";")[0],h[l]=h[l]||h[k];c=h;d={manifest:b,media:c,drm:a};e=Sn;for(f in e)d[f]=e[f]();return g["return"](d)})};
Z.isBrowserSupported=function(){if(!(window.Promise&&window.Uint8Array&&Array.prototype.forEach))return!1;var a=Xc();return a&&12>a||!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)?!1:Sc()?!0:Tc("application/x-mpegurl")};Z.setAdManagerFactory=function(a){rm=a};Z.registerSupportPlugin=function(a,b){Sn[a]=b};Z.prototype.destroy=Z.prototype.destroy;
var On="abrstatuschanged",In="adaptation",Gn="buffering",Ym="drmsessionupdate",vk="emsg",Pn="error",Rn="expirationupdated",Km="loaded",Im="loading",Tm="manifestparsed",vn="metadata",Dm="onstatechange",Em="onstateidle",Hn="ratechange",jn="streaming",Mn="textchanged",Nn="texttrackvisibility",Sm="timelineregionadded",xn="timelineregionenter",yn="timelineregionexit",Kn="trackschanged",Nm="unloading",Ln="variantchanged",Fm=0,om=1,hn=2,rn=3;Z.LoadMode={DESTROYED:Fm,NOT_LOADED:om,MEDIA_SOURCE:hn,SRC_EQUALS:rn};
Z.version="v3.0.4";var Tn=["3","0"];Bc=new function(a){this.a=a;this.c=Cc;this.b=Dc}(new zc(Number(Tn[0]),Number(Tn[1])));var Qn=["output-restricted","internal-error"],Sn={},rm=null;function Un(a,b,c){var d=b.presentationTimeline.getDuration();b=Vn(b);return{offlineUri:null,originalManifestUri:a,duration:d,size:0,expiration:Infinity,tracks:b,appMetadata:c}}function Wn(a,b){var c=xl(new wl(a.ua(),a.ba()),b),d=b.appMetadata||{};c=Vn(c);return{offlineUri:a.toString(),originalManifestUri:b.originalManifestUri,duration:b.duration,size:b.size,expiration:b.expiration,tracks:c,appMetadata:d}}
function Vn(a){var b=[],c=nf(a.variants);c=r(c);for(var d=c.next();!d.done;d=c.next())b.push(ff(d.value));a=r(a.textStreams);for(c=a.next();!c.done;c=a.next())b.push(gf(c.value));return b};function Xn(){this.a={}}function Yn(a,b,c){c=c.endTime-c.startTime;return Zn(a,b)*c}function Zn(a,b){var c=a.a[b];null==c&&(c=0);return c};function $n(a,b,c){a.variants=a.variants.filter(function(d){return cf(d,b,c)})}function ao(a){a.variants=a.variants.filter(function(b){var c=!0;b.audio&&(c=c&&Ee(b.audio));b.video&&(c=c&&Ee(b.video));return c})}function bo(a,b){a.variants=a.variants.filter(function(c){return Od(b,c)})};function co(a){var b=this;if(a&&a.constructor!=Z)throw new O(2,9,9008);this.K=this.h=null;a?(this.h=a.h,this.K=a.Yb()):(this.h=dm(),this.K=new S);this.hc=[];this.Eb=[];this.Rc=[];this.a=new Map;this.a.set(null,Promise.resolve(null));this.b=new Map;var c=!a;this.B=new gc(function(){var d,e,f,g,h;return K(function(k){switch(k.a){case 1:return t(k,Promise.all(b.Rc.map(function(l){return Nk(l)})),2);case 2:d=function(){};e=[];f=r(b.Eb);for(g=f.next();!g.done;g=f.next())h=g.value,e.push(h.then(d,d));return t(k,
Promise.all(e),3);case 3:if(!c){k.o(4);break}return t(k,b.K.destroy(),4);case 4:b.h=null,b.K=null,w(k)}})})}function eo(){if(Sc())a:{var a=r(cl.values());for(var b=a.next();!b.done;b=a.next())if(b=b.value,b=b()){b.destroy();a=!0;break a}a=!1}else a=!1;return a}p=co.prototype;p.destroy=function(){return this.B.destroy()};
p.configure=function(a,b){2==arguments.length&&"string"==typeof a&&(a=bm(a,b));a.manifest&&a.manifest.dash&&"defaultPresentationDelay"in a.manifest.dash&&(Ac("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),a.manifest.defaultPresentationDelay=a.manifest.dash.defaultPresentationDelay,delete a.manifest.dash.defaultPresentationDelay);return fm(this.h,a)};p.getConfiguration=function(){var a=dm();fm(a,this.h,dm());return a};p.Yb=function(){return this.K};
p.store=function(a,b,c){var d=this,e=this.getConfiguration(),f=new Lk(this.K);this.Rc.push(f);b=fo(this,a,b||{},function(){var h;return K(function(k){if(1==k.a)return t(k,Sg(a,d.K,e.manifest.retryParameters,c||null),2);h=k.b;return k["return"](Hc(h))})},e,f);var g=new Q(b,function(){return Nk(f)});g["finally"](function(){Tb(d.Rc,f)});g.then=function(h){Ac("shaka.offline.Storage.store.then","Storage operations now return a shaka.util.AbortableOperation, rather than a promise.  Please update to conform to this new API; you can use the |chain| method instead.");
return g.promise.then(h)};return go(this,g)};p.ie=function(){Ac("shaka.offline.Storage.getStoreInProgress","Multiple concurrent downloads are now supported.");return!1};
function fo(a,b,c,d,e,f){var g,h,k,l,m,n,q,u,v,y,z;return K(function(A){switch(A.a){case 1:return ho(),h=g=null,k=new bl,m=l=null,x(A,2,3),t(A,d(),5);case 5:return g=A.b,t(A,io(a,b,g,e),6);case 6:n=A.b;jo(a);q=!n.presentationTimeline.W()&&!n.presentationTimeline.Sa();if(!q)throw new O(2,9,9005,b);return t(A,ko(a,n,function(D){m=m||D},e),7);case 7:h=A.b;jo(a);if(m)throw m;return t(A,a.cb(n,h,e),8);case 8:return t(A,k.init(),9);case 9:return jo(a),t(A,dl(k),10);case 10:return l=A.b,jo(a),t(A,lo(a,l.ba,
h,n,b,c,e,f),11);case 11:u=A.b;jo(a);if(m)throw m;return t(A,l.ba.addManifests([u]),12);case 12:return v=A.b,jo(a),y=new ul("manifest",l.path.ua,l.path.ba,v[0]),A["return"](Wn(y,u));case 3:return xa(A),a.hc=[],t(A,k.destroy(),13);case 13:if(!g){A.o(14);break}return t(A,g.stop(),14);case 14:if(!h){A.o(16);break}return t(A,h.destroy(),16);case 16:ya(A,0);break;case 2:z=J(A);if(!l){A.o(18);break}return t(A,l.ba.removeSegments(a.hc,function(){}),18);case 18:throw m||z;}})}
p.cb=function(a,b,c){var d,e,f,g,h,k,l,m,n,q,u,v,y,z,A;return K(function(D){if(1==D.a){d={width:Infinity,height:Infinity};$n(a,c.restrictions,d);ao(a);bo(a,b);e=[];f=c.preferredAudioChannelCount;af(a,f);g=r(a.variants);for(h=g.next();!h.done;h=g.next())k=h.value,e.push(ff(k));l=r(a.textStreams);for(m=l.next();!m.done;m=l.next())n=m.value,e.push(gf(n));return t(D,c.offline.trackSelectionCallback(e),2)}q=D.b;u=new Set;v=new Set;y=r(q);for(z=y.next();!z.done;z=y.next())A=z.value,"variant"==A.type&&u.add(A.id),
"text"==A.type&&v.add(A.id);a.variants=a.variants.filter(function(B){return u.has(B.id)});a.textStreams=a.textStreams.filter(function(B){return v.has(B.id)});mo(a);w(D)})};
function lo(a,b,c,d,e,f,g,h){var k,l,m,n,q,u,v,y,z,A,D,B;return K(function(E){switch(E.a){case 1:return k=Un(e,d,f),l=g.offline.progressCallback,m=function(H,G){k.size=G;l(k,H)},n=function(H,G){v&&g.offline.usePersistentLicense&&y==G&&xd(c,"cenc",H)},Mk(h,m,n),q=d.variants.some(function(H){var G=H.audio&&H.audio.encrypted;return H.video&&H.video.encrypted||G}),u=d.variants.some(function(H){return(H.video?H.video.drmInfos:[]).concat(H.audio?H.audio.drmInfos:[]).some(function(G){return G.initData&&
G.initData.length})}),v=q&&!u,y=null,v&&(z=c.c,y=no.get(z.keySystem)),wa(E),D=A=oo(a,h,b,c,d,e,f,g),t(E,Rk(h),4);case 4:D.size=E.b;A.expiration=c.yb();B=Dd(c);A.sessionIds=g.offline.usePersistentLicense?B:[];if(q&&g.offline.usePersistentLicense&&!B.length)throw new O(2,9,9007);return E["return"](A);case 2:return xa(E),t(E,h.destroy(),5);case 5:ya(E,0)}})}p.remove=function(a){return po(this,qo(this,a))};
function qo(a,b){var c,d,e,f,g,h;return K(function(k){switch(k.a){case 1:ho();c=vl(b);if(null==c||"manifest"!=c.a)throw new O(2,9,9004,b);d=c;e=new bl;wa(k);return t(k,e.init(),4);case 4:return t(k,fl(e,d.ua(),d.ba()),5);case 5:return f=k.b,t(k,f.getManifests([d.key()]),6);case 6:return g=k.b,h=g[0],t(k,Promise.all([ro(a,h,e),so(f,d,h)]),2);case 2:return xa(k),t(k,e.destroy(),8);case 8:ya(k,0)}})}
function to(a,b){for(var c=[],d=r(a.streams),e=d.next();!e.done;e=d.next())e=e.value,b&&"video"==e.type?c.push({contentType:Oc(e.mimeType,e.codecs),robustness:a.drmInfo.videoRobustness}):b||"audio"!=e.type||c.push({contentType:Oc(e.mimeType,e.codecs),robustness:a.drmInfo.audioRobustness});return c}function ro(a,b,c){return K(function(d){return t(d,uo(a.K,a.h.drm,c,b),0)})}
function so(a,b,c){function d(){}var e=vo(c);Wn(b,c);return Promise.all([a.removeSegments(e,d),a.removeManifests([b.key()],d)])}p.we=function(){return po(this,wo(this))};
function wo(a){var b,c,d,e,f,g,h,k,l,m;return K(function(n){switch(n.a){case 1:return ho(),b=a.K,c=a.h.drm,d=new bl,e=!1,wa(n),t(n,d.init(),4);case 4:f=[],gl(d,function(q){return f.push(q)}),g=r(f),h=g.next();case 5:if(h.done){n.o(2);break}k=h.value;return t(n,k.getAll(),8);case 8:return l=n.b,t(n,Gl(c,b,l),9);case 9:return m=n.b,t(n,k.remove(m),10);case 10:m.length!=l.length&&(e=!0);h=g.next();n.o(5);break;case 2:return xa(n),t(n,d.destroy(),11);case 11:ya(n,3);break;case 3:return n["return"](!e)}})}
p.list=function(){return po(this,xo())};function xo(){var a,b,c;return K(function(d){switch(d.a){case 1:return ho(),a=[],b=new bl,wa(d),t(d,b.init(),4);case 4:return c=Promise.resolve(),el(b,function(e,f){c=c.then(function(){var g;return K(function(h){if(1==h.a)return t(h,f.getAllManifests(),2);g=h.b;g.forEach(function(k,l){var m=Wn(new ul("manifest",e.ua,e.ba,l),k);a.push(m)});w(h)})})}),t(d,c,2);case 2:return xa(d),t(d,b.destroy(),6);case 6:ya(d,3);break;case 3:return d["return"](a)}})}
function io(a,b,c,d){var e,f,g,h,k;return K(function(l){if(1==l.a)return e=null,f=a.K,g={networkingEngine:f,filter:function(){return Promise.resolve()},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(m){e=m}},c.configure(d.manifest),jo(a),t(l,c.start(b,g),2);if(3!=l.a)return h=l.b,jo(a),k=yo(h),t(l,Promise.all(ab(k,function(m){return m.createSegmentIndex()})),3);jo(a);if(e)throw e;return l["return"](h)})}
function ko(a,b,c,d){var e;return K(function(f){switch(f.a){case 1:return e=new gd({ib:a.K,onError:c,cc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),e.configure(d.drm),t(f,ld(e,b.variants,d.offline.usePersistentLicense),2);case 2:return t(f,vd(e),3);case 3:return t(f,wd(e),4);case 4:return f["return"](e)}})}
function oo(a,b,c,d,e,f,g,h){for(var k=new Xn,l=r(e.variants),m=l.next();!m.done;m=l.next()){var n=k;m=m.value;var q=m.audio,u=m.video;q&&!u&&(n.a[q.id]=q.bandwidth||m.bandwidth);!q&&u&&(n.a[u.id]=u.bandwidth||m.bandwidth);if(q&&u){var v=q.bandwidth||393216,y=u.bandwidth||m.bandwidth-v;0>=y&&(y=m.bandwidth);n.a[q.id]=v;n.a[u.id]=y}}l=r(e.textStreams);for(n=l.next();!n.done;n=l.next())k.a[n.value.id]=52;n=yo(e);l=new Map;n=r(n);for(m=n.next();!m.done;m=n.next())m=m.value,q=zo(a,b,c,k,e,m,h),l.set(m.id,
q);a=r(e.variants);for(m=a.next();!m.done;m=a.next())b=m.value,b.audio&&l.get(b.audio.id).variantIds.push(b.id),b.video&&l.get(b.video.id).variantIds.push(b.id);a=Array.from(l.values());h=h.offline.usePersistentLicense;(b=d.c)&&h&&(b.initData=[]);return{creationTime:Date.now(),originalManifestUri:f,duration:e.presentationTimeline.getDuration(),size:0,expiration:d.yb(),streams:a,sessionIds:h?Dd(d):[],drmInfo:b,appMetadata:g}}
function zo(a,b,c,d,e,f,g){var h={id:f.id,originalId:f.originalId,primary:f.primary,type:f.type,mimeType:f.mimeType,codecs:f.codecs,frameRate:f.frameRate,pixelAspectRatio:f.pixelAspectRatio,kind:f.kind,language:f.language,label:f.label,width:f.width||null,height:f.height||null,encrypted:f.encrypted,keyIds:f.keyIds,segments:[],variantIds:[],roles:f.roles,channelsCount:f.channelsCount,audioSamplingRate:f.audioSamplingRate,closedCaptions:f.closedCaptions},k=f.id;Ao(f,e.presentationTimeline.Pa(),function(l){var m=
Bo(a,b,k,f.id,c,d,l.f,g),n=Co(a,b,k,f.id,c,d,l,g);Qk(b,k,function(){var q,u;return K(function(v){if(1==v.a)return t(v,m,2);if(3!=v.a)return q=v.b,t(v,n,3);u=v.b;h.segments.push({initSegmentKey:q,startTime:l.startTime,endTime:l.endTime,appendWindowStart:l.appendWindowStart,appendWindowEnd:l.appendWindowEnd,timestampOffset:l.timestampOffset,dataKey:u});w(v)})})});return h}
function Bo(a,b,c,d,e,f,g,h){if(a.a.has(g))return a.a.get(g);h=Xg(g.c(),g.b,g.a,h.streaming.retryParameters);b=Ok(b,c,h,.5*Zn(f,d),!0,function(k){var l;return K(function(m){if(1==m.a)return t(m,e.addSegments([{data:k}]),2);l=m.b;a.hc.push(l[0]);return m["return"](l[0])})});a.a.set(g,b);return b}
function Co(a,b,c,d,e,f,g,h){var k=[g.c()[0],g.b,g.a].join("-");if(a.b.has(k))return a.b.get(k);h=Xg(g.c(),g.b,g.a,h.streaming.retryParameters);b=Ok(b,c,h,Yn(f,d,g),!1,function(l){var m;return K(function(n){if(1==n.a)return t(n,e.addSegments([{data:l}]),2);m=n.b;a.hc.push(m[0]);return n["return"](m[0])})});a.b.set(k,b);return b}function Ao(a,b,c){b=a.segmentIndex.find(b);if(null!=b)for(var d=a.segmentIndex.get(b);d;)c(d),d=a.segmentIndex.get(++b)}function jo(a){if(a.B.a)throw new O(2,9,7001);}
function ho(){if(!eo())throw new O(2,9,9E3);}function po(a,b){return K(function(c){if(1==c.a)return a.Eb.push(b),wa(c),t(c,b,4);if(2!=c.a)return c["return"](c.b);xa(c);Tb(a.Eb,b);return ya(c,0)})}function go(a,b){var c=b.promise;a.Eb.push(c);return b["finally"](function(){Tb(a.Eb,c)})}
function vo(a){var b=[];a=r(a.streams);for(var c=a.next();!c.done;c=a.next()){c=r(c.value.segments);for(var d=c.next();!d.done;d=c.next())d=d.value,null!=d.initSegmentKey&&b.push(d.initSegmentKey),b.push(d.dataKey)}return b}
function uo(a,b,c,d){var e,f,g;return K(function(h){if(1==h.a){if(!d.drmInfo)return h["return"]();e=hl(c);f=d.sessionIds.map(function(k){return{sessionId:k,keySystem:d.drmInfo.keySystem,licenseUri:d.drmInfo.licenseServerUri,serverCertificate:d.drmInfo.serverCertificate,audioCapabilities:to(d,!1),videoCapabilities:to(d,!0)}});return t(h,Gl(b,a,f),2)}return 3!=h.a?(g=h.b,t(h,e.remove(g),3)):t(h,e.add(f.filter(function(k){return!g.includes(k.sessionId)})),0)})}
function yo(a){for(var b=new Set,c=r(a.textStreams),d=c.next();!d.done;d=c.next())b.add(d.value);a=r(a.variants);for(c=a.next();!c.done;c=a.next())c=c.value,c.audio&&b.add(c.audio),c.video&&b.add(c.video);return b}
function mo(a){a.variants.map(function(f){return f.video});var b=new Set(a.variants.map(function(f){return f.audio}));a=a.textStreams;for(var c=r(b),d=c.next();!d.done;d=c.next()){d=r(b);for(var e=d.next();!e.done;e=d.next());}b=r(a);for(c=b.next();!c.done;c=b.next())for(c=r(a),d=c.next();!d.done;d=c.next());}M("shaka.offline.Storage",co);co.deleteAll=function(){var a;return K(function(b){return 1==b.a?(a=new bl,wa(b),t(b,il(a),2)):5!=b.a?(xa(b),t(b,a.destroy(),5)):ya(b,0)})};co.prototype.list=co.prototype.list;
co.prototype.removeEmeSessions=co.prototype.we;co.prototype.remove=co.prototype.remove;co.prototype.getStoreInProgress=co.prototype.ie;co.prototype.store=co.prototype.store;co.prototype.getNetworkingEngine=co.prototype.Yb;co.prototype.getConfiguration=co.prototype.getConfiguration;co.prototype.configure=co.prototype.configure;co.prototype.destroy=co.prototype.destroy;co.support=eo;
var no=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");Sn.offline=eo;function Do(){}function Eo(a,b){for(var c={priority:b||0,Md:a},d=r(fb(Fo)),e=d.next();!e.done;e=d.next()){e=e.value;var f=e.V;if(e.item.priority<c.priority){Fo.splice(f,0,c);return}}Fo.push(c)}M("shaka.polyfill",Do);Do.register=Eo;Do.installAll=function(){for(var a=r(Fo),b=a.next();!b.done;b=a.next()){b=b.value;try{b.Md()}catch(c){Va("Error installing polyfill!",c)}}};var Fo=[];Eo(function(){Go()},-1);Eo(function(){var a=!1;if(Wc("CrKey"))a=!0;else try{window.indexedDB&&(a=!1)}catch(b){a=!0}a&&delete window.indexedDB});function Ho(a,b,c){if("input"==a)switch(this.type){case "range":a="change"}HTMLInputElement.prototype.originalAddEventListener.call(this,a,b,c)}Eo(function(){Wc("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=Ho)});Eo(function(){});function Io(){var a=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(b){for(var c=[],d=0;d<arguments.length;++d)c[d]=arguments[d];c=a.apply(this,c);c.abort=function(){};return c}}function Jo(){var a=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(b,c){return a.call(this,b,c-.001)}}function Ko(){var a=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(b){return"mp2t"==b.split(/ *; */)[0].split("/")[1].toLowerCase()?!1:a(b)}}
function Lo(){var a=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(b){return"opus"!=Rc(b)[0]&&a(b)}}function Mo(){var a=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(b){var c=b.split(/ *; */);c.shift();return c.some(function(d){return d.startsWith("codecs=")})?cast.__platform__.canDisplayType(b):a(b)}}
Eo(function(){var a=Xc();window.MediaSource&&(window.cast&&cast.__platform__&&cast.__platform__.canDisplayType?Mo():a?(Ko(),12>=a?(Io(),Jo()):Io()):(Wc("Tizen 2")||Wc("Tizen 3")||Wc("Tizen 4"))&&Lo())});function No(a,b){try{var c=new Oo(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}function Po(a){if(a.initData){var b=document.createEvent("CustomEvent");b.initCustomEvent("encrypted",!1,!1,null);b.initDataType="cenc";b.initData=Jb(Ef(a.initData));this.dispatchEvent(b)}}
function Oo(a,b){this.keySystem=a;for(var c=!1,d=r(b),e=d.next();!e.done;e=d.next()){e=e.value;var f={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:e.initDataTypes,sessionTypes:["temporary"],label:e.label},g=!1;if(e.audioCapabilities)for(var h=r(e.audioCapabilities),k=h.next();!k.done;k=h.next())k=k.value,k.contentType&&(g=!0,MSMediaKeys.isTypeSupported(this.keySystem,k.contentType.split(";")[0])&&(f.audioCapabilities.push(k),c=
!0));if(e.videoCapabilities)for(h=r(e.videoCapabilities),k=h.next();!k.done;k=h.next())k=k.value,k.contentType&&(g=!0,MSMediaKeys.isTypeSupported(this.keySystem,k.contentType.split(";")[0])&&(f.videoCapabilities.push(k),c=!0));g||(c=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));"required"==e.persistentState&&(c=!1);if(c){this.a=f;return}}c=Error("Unsupported keySystem");c.name="NotSupportedError";c.code=DOMException.NOT_SUPPORTED_ERR;throw c;}
Oo.prototype.createMediaKeys=function(){var a=new Qo(this.keySystem);return Promise.resolve(a)};Oo.prototype.getConfiguration=function(){return this.a};function Ro(a){var b=this.mediaKeys;b&&b!=a&&So(b,null);delete this.mediaKeys;return(this.mediaKeys=a)?So(a,this):Promise.resolve()}function Qo(a){this.a=new MSMediaKeys(a);this.b=new ic}
Qo.prototype.createSession=function(a){a=a||"temporary";if("temporary"!=a)throw new TypeError("Session type "+a+" is unsupported on this platform.");return new To(this.a,a)};Qo.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function So(a,b){a.b.Gb();if(!b)return Promise.resolve();a.b.D(b,"msneedkey",Po);try{return wj(b,HTMLMediaElement.HAVE_METADATA,a.b,function(){b.msSetMediaKeys(a.a)}),Promise.resolve()}catch(c){return Promise.reject(c)}}
function To(a){Pb.call(this);this.f=null;this.g=a;this.c=this.a=null;this.b=new ic;this.sessionId="";this.expiration=NaN;this.closed=new yb;this.keyStatuses=new Uo}pa(To,Pb);p=To.prototype;
p.generateRequest=function(a,b){var c=this;this.a=new yb;try{this.f=this.g.createSession("video/mp4",R(b),null),this.b.D(this.f,"mskeymessage",function(d){c.a&&(c.a.resolve(),c.a=null);d=new Mb("message",{messageType:void 0==c.keyStatuses.a?"license-request":"license-renewal",message:Jb(d.message)});c.dispatchEvent(d)}),this.b.D(this.f,"mskeyadded",function(){c.a?(Vo(c,"usable"),c.a.resolve(),c.a=null):c.c&&(Vo(c,"usable"),c.c.resolve(),c.c=null)}),this.b.D(this.f,"mskeyerror",function(){var d=Error("EME PatchedMediaKeysMs key error");
d.errorCode=c.f.error;if(null!=c.a)c.a.reject(d),c.a=null;else if(null!=c.c)c.c.reject(d),c.c=null;else switch(c.f.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:Vo(c,"output-not-allowed");break;default:Vo(c,"internal-error")}}),Vo(this,"status-pending")}catch(d){this.a.reject(d)}return this.a};p.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))};p.update=function(a){this.c=new yb;try{this.f.update(R(a))}catch(b){this.c.reject(b)}return this.c};
p.close=function(){try{this.f.close(),this.closed.resolve(),this.b.Gb()}catch(a){this.closed.reject(a)}return this.closed};p.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function Vo(a,b){var c=a.keyStatuses;c.size=void 0==b?0:1;c.a=b;c=new Mb("keystatuseschange");a.dispatchEvent(c)}function Uo(){this.size=0;this.a=void 0}p=Uo.prototype;p.forEach=function(a){this.a&&a(this.a,Rd.value())};
p.get=function(a){if(this.has(a))return this.a};p.has=function(a){var b=Rd.value();return this.a&&Hb(a,b)?!0:!1};p.entries=function(){};p.keys=function(){};p.values=function(){};
Eo(function(){!window.HTMLVideoElement||!window.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,window.MediaKeys=Qo,window.MediaKeySystemAccess=Oo,navigator.requestMediaKeySystemAccess=No,HTMLMediaElement.prototype.setMediaKeys=Ro)});function Wo(){return Promise.reject(Error("The key system specified is not supported."))}function Xo(a){return null==a?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Yo(){throw new TypeError("Illegal constructor.");}Yo.prototype.createSession=function(){};Yo.prototype.setServerCertificate=function(){};function Zo(){this.keySystem="";throw new TypeError("Illegal constructor.");}Zo.prototype.getConfiguration=function(){};Zo.prototype.createMediaKeys=function(){};
Eo(function(){!window.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=Wo,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Xo,window.MediaKeys=Yo,window.MediaKeySystemAccess=Zo)},-10);function $o(a){var b=ap;return b?b+a.charAt(0).toUpperCase()+a.slice(1):a}function bp(a,b){try{var c=new cp(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}function dp(a){var b=this.mediaKeys;b&&b!=a&&ep(b,null);delete this.mediaKeys;(this.mediaKeys=a)&&ep(a,this);return Promise.resolve()}
function cp(a,b){this.a=this.keySystem=a;var c=!1;"org.w3.clearkey"==a&&(this.a="webkit-org.w3.clearkey",c=!1);var d=!1;var e=document.getElementsByTagName("video");e=e.length?e[0]:document.createElement("video");for(var f=r(b),g=f.next();!g.done;g=f.next()){g=g.value;var h={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:g.initDataTypes,sessionTypes:["temporary"],label:g.label},k=!1;if(g.audioCapabilities)for(var l=r(g.audioCapabilities),
m=l.next();!m.done;m=l.next())m=m.value,m.contentType&&(k=!0,e.canPlayType(m.contentType.split(";")[0],this.a)&&(h.audioCapabilities.push(m),d=!0));if(g.videoCapabilities)for(l=r(g.videoCapabilities),m=l.next();!m.done;m=l.next())m=m.value,m.contentType&&(k=!0,e.canPlayType(m.contentType,this.a)&&(h.videoCapabilities.push(m),d=!0));k||(d=e.canPlayType("video/mp4",this.a)||e.canPlayType("video/webm",this.a));"required"==g.persistentState&&(c?(h.persistentState="required",h.sessionTypes=["persistent-license"]):
d=!1);if(d){this.b=h;return}}c="Unsupported keySystem";if("org.w3.clearkey"==a||"com.widevine.alpha"==a)c="None of the requested configurations were supported.";c=Error(c);c.name="NotSupportedError";c.code=DOMException.NOT_SUPPORTED_ERR;throw c;}cp.prototype.createMediaKeys=function(){var a=new fp(this.a);return Promise.resolve(a)};cp.prototype.getConfiguration=function(){return this.b};function fp(a){this.g=a;this.a=null;this.b=new ic;this.c=[];this.f=new Map}
function ep(a,b){a.a=b;a.b.Gb();var c=ap;b&&(a.b.D(b,c+"needkey",function(d){var e=document.createEvent("CustomEvent");e.initCustomEvent("encrypted",!1,!1,null);e.initDataType="cenc";e.initData=Jb(d.initData);a.a.dispatchEvent(e)}),a.b.D(b,c+"keymessage",function(d){var e=gp(a,d.sessionId);e&&(d=new Mb("message",{messageType:void 0==e.keyStatuses.a?"licenserequest":"licenserenewal",message:d.message}),e.b&&(e.b.resolve(),e.b=null),e.dispatchEvent(d))}),a.b.D(b,c+"keyadded",function(d){if(d=gp(a,d.sessionId))hp(d,
"usable"),d.a&&d.a.resolve(),d.a=null}),a.b.D(b,c+"keyerror",function(d){var e=gp(a,d.sessionId);e&&e.handleError(d)}))}fp.prototype.createSession=function(a){a=a||"temporary";if("temporary"!=a&&"persistent-license"!=a)throw new TypeError("Session type "+a+" is unsupported on this platform.");var b=this.a||document.createElement("video");b.src||(b.src="about:blank");a=new ip(b,this.g,a);this.c.push(a);return a};fp.prototype.setServerCertificate=function(){return Promise.resolve(!1)};
function gp(a,b){var c=a.f.get(b);return c?c:(c=a.c.shift())?(c.sessionId=b,a.f.set(b,c),c):null}function ip(a,b,c){Pb.call(this);this.f=a;this.i=!1;this.a=this.b=null;this.c=b;this.g=c;this.sessionId="";this.expiration=NaN;this.closed=new yb;this.keyStatuses=new jp}pa(ip,Pb);p=ip.prototype;
p.handleError=function(a){var b=Error("EME v0.1b key error"),c=a.errorCode;c.systemCode=a.systemCode;b.errorCode=c;!a.sessionId&&this.b?(45==a.systemCode&&(b.message="Unsupported session type."),this.b.reject(b),this.b=null):a.sessionId&&this.a?(this.a.reject(b),this.a=null):(b=a.systemCode,a.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?hp(this,"output-restricted"):1==b?hp(this,"expired"):hp(this,"internal-error"))};
function kp(a,b,c){if(a.i)return Promise.reject(Error("The session is already initialized."));a.i=!0;try{if("persistent-license"==a.g)if(c)var d=R(tc("LOAD_SESSION|"+c));else{var e=tc("PERSISTENT|");d=fd(e,b)}else d=R(b)}catch(g){return Promise.reject(g)}a.b=new yb;var f=$o("generateKeyRequest");try{a.f[f](a.c,d)}catch(g){if("InvalidStateError"!=g.name)return a.b=null,Promise.reject(g);(new P(function(){try{a.f[f](a.c,d)}catch(h){a.b.reject(h),a.b=null}})).P(.01)}return a.b}
function lp(a,b,c){if(a.a)a.a.then(function(){return lp(a,b,c)})["catch"](function(){return lp(a,b,c)});else{a.a=b;if("webkit-org.w3.clearkey"==a.c){var d=pc(c);var e=JSON.parse(d);"oct"!=e.keys[0].kty&&(a.a.reject(Error("Response is not a valid JSON Web Key Set.")),a.a=null);d=cd(e.keys[0].k);e=cd(e.keys[0].kid)}else d=R(c),e=null;var f=$o("addKey");try{a.f[f](a.c,d,e,a.sessionId)}catch(g){a.a.reject(g),a.a=null}}}
function hp(a,b){var c=a.keyStatuses;c.size=void 0==b?0:1;c.a=b;c=new Mb("keystatuseschange");a.dispatchEvent(c)}p.generateRequest=function(a,b){return kp(this,b,null)};p.load=function(a){return"persistent-license"==this.g?kp(this,null,a):Promise.reject(Error("Not a persistent session."))};p.update=function(a){var b=new yb;lp(this,b,a);return b};
p.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var a=$o("cancelKeyRequest");try{this.f[a](this.c,this.sessionId)}catch(b){}}this.closed.resolve();return this.closed};p.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()};function jp(){this.size=0;this.a=void 0}p=jp.prototype;p.forEach=function(a){this.a&&a(this.a,Rd.value())};p.get=function(a){if(this.has(a))return this.a};
p.has=function(a){var b=Rd.value();return this.a&&Hb(a,b)?!0:!1};p.entries=function(){};p.keys=function(){};p.values=function(){};var ap="";
Eo(function(){if(!(!window.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)ap="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=bp;delete HTMLMediaElement.prototype.mediaKeys;HTMLMediaElement.prototype.mediaKeys=null;HTMLMediaElement.prototype.setMediaKeys=dp;window.MediaKeys=fp;window.MediaKeySystemAccess=cp}});function mp(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Eo(function(){if(window.HTMLVideoElement){var a=HTMLVideoElement.prototype;!a.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in a&&(a.getVideoPlaybackQuality=mp)}});function np(a,b,c){return new window.TextTrackCue(a,b,c)}function op(a,b,c){return new window.TextTrackCue(a+"-"+b+"-"+c,a,b,c)}Eo(function(){if(!window.VTTCue&&window.TextTrackCue){var a=null,b=TextTrackCue.length;if(3==b)a=np;else if(6==b)a=op;else{try{var c=!!np(1,2,"")}catch(d){c=!1}c&&(a=np)}a&&(window.VTTCue=function(d,e,f){return a(d,e,f)})}});function pp(){}pp.prototype.parseInit=function(){};
pp.prototype.parseMedia=function(a,b){var c=pc(a),d=[],e=new DOMParser,f=null;if(""==c)return d;try{f=e.parseFromString(c,"text/xml")}catch(B){throw new O(2,2,2005,"Failed to parse TTML.");}if(f){if(c=f.getElementsByTagName("parsererror")[0])throw new O(2,2,2005,c.textContent);if(e=f.getElementsByTagName("tt")[0]){var g=Jf(e,"http://www.w3.org/ns/ttml#parameter","frameRate");var h=Jf(e,"http://www.w3.org/ns/ttml#parameter","subFrameRate");var k=Jf(e,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier");
var l=Jf(e,"http://www.w3.org/ns/ttml#parameter","tickRate");var m=Jf(e,"http://www.w3.org/ns/ttml#parameter","cellResolution");f=e.getAttribute("xml:space")||"default";c=e.getAttribute("tts:extent")}else throw new O(2,2,2005,"TTML does not contain <tt> tag.");if("default"!=f&&"preserve"!=f)throw new O(2,2,2005,"Invalid xml:space value: "+f);f="default"==f;g=new qp(g,h,k,l);m=m?(m=/^(\d+) (\d+)$/.exec(m))?{columns:parseInt(m[1],10),rows:parseInt(m[2],10)}:null:null;h=rp(e.getElementsByTagName("metadata")[0]);
k=rp(e.getElementsByTagName("styling")[0]);l=rp(e.getElementsByTagName("layout")[0]);for(var n=[],q=r(l),u=q.next();!u.done;u=q.next()){var v=u.value,y=c;u=new ee;var z=v.getAttribute("xml:id");if(z){u.id=z;z=null;y&&(z=sp.exec(y)||tp.exec(y));y=z?Number(z[1]):null;z=z?Number(z[2]):null;var A,D;if(A=up(v,k,"extent"))A=(D=sp.exec(A))||tp.exec(A),null!=A&&(u.width=null!=y?100*Number(A[1])/y:Number(A[1]),u.height=null!=z?100*Number(A[2])/z:Number(A[2]),u.widthUnits=D||null!=y?re:0,u.heightUnits=D||null!=
z?re:0);if(v=up(v,k,"origin"))A=(D=sp.exec(v))||tp.exec(v),null!=A&&(u.viewportAnchorX=null!=z?100*Number(A[1])/z:Number(A[1]),u.viewportAnchorY=null!=y?100*Number(A[2])/y:Number(A[2]),u.viewportAnchorUnits=D||null!=y?re:0)}else u=null;u&&n.push(u)}c=vp(e.getElementsByTagName("body")[0]);c=r(c);for(e=c.next();!e.done;e=c.next())(e=wp(e.value,b.periodStart,g,h,k,l,n,f,!1,m))&&d.push(e)}return d};
function rp(a){var b=[];if(!a)return b;for(var c=r(a.childNodes),d=c.next();!d.done;d=c.next())d=d.value,d.nodeType==Node.ELEMENT_NODE&&"br"!==d.nodeName&&(d=rp(d),b=b.concat(d));b.length||b.push(a);return b}function vp(a){if(!a)return[];var b=[];a=r(a.childNodes);for(var c=a.next();!c.done;c=a.next())c=c.value,c instanceof Element&&(c.hasAttribute("begin")?b.push(c):b=b.concat(vp(c)));return b}
function xp(a,b){for(var c="",d=r(a.childNodes),e=d.next();!e.done;e=d.next())e=e.value,"br"==e.nodeName&&a.childNodes[0]!==e?c+="\n":e.childNodes&&0<e.childNodes.length?c+=xp(e,b):b?(e=e.textContent.trim(),e=e.replace(/\s+/g," "),c+=e):c+=e.textContent;return c}
function wp(a,b,c,d,e,f,g,h,k,l){if(k&&"br"==a.nodeName)return a=new ce(0,0,""),a.spacer=!0,a;var m=/^[\s\n]*$/.test(a.textContent),n=a.nodeType==Node.ELEMENT_NODE&&!a.hasAttribute("begin")&&!a.hasAttribute("end");if(a.nodeType!=Node.ELEMENT_NODE||n&&m||n&&!k)return null;m=yp(a.getAttribute("begin"),c);n=yp(a.getAttribute("end"),c);var q=yp(a.getAttribute("dur"),c);null==n&&null!=q&&(n=m+q);if(!k&&(null==m||null==n))throw new O(2,2,2001);m=k&&null==m?0:m+b;n=k&&null==n?0:n+b;q="";k=[];if(Array.from(a.childNodes).some(function(z){return z.nodeType==
Node.TEXT_NODE&&/\S+/.test(z.textContent)}))q=xp(a,h);else for(var u=r(a.childNodes),v=u.next();!v.done;v=u.next())if(v=wp(v.value,b,c,d,e,f,g,h,!0,l))v.startTime=v.startTime||m,v.endTime=v.endTime||n,k.push(v);b=new ce(m,n,q);b.nestedCues=k;l&&(b.cellResolution=l);if((f=zp(a,"region",f,"")[0])&&f.getAttribute("xml:id")){var y=f.getAttribute("xml:id");b.region=g.filter(function(z){return z.id==y})[0]}d=zp(a,"smpte:backgroundImage",d,"#")[0];Ap(b,a,f,d,e);return b}
function Ap(a,b,c,d,e){"rtl"==Bp(b,c,e,"direction")&&(a.direction="rtl");var f=Bp(b,c,e,"writingMode");"tb"==f||"tblr"==f?a.writingMode="vertical-lr":"tbrl"==f?a.writingMode="vertical-rl":"rltb"==f||"rl"==f?a.direction="rtl":f&&(a.direction=de);(f=Bp(b,c,e,"textAlign"))?(a.positionAlign=Cp[f],a.lineAlign=Dp[f],a.textAlign=ne[f.toUpperCase()]):a.textAlign="start";if(f=Bp(b,c,e,"displayAlign"))a.displayAlign=oe[f.toUpperCase()];if(f=Bp(b,c,e,"color"))a.color=f;if(f=Bp(b,c,e,"backgroundColor"))a.backgroundColor=
f;if(f=Bp(b,c,e,"border"))a.border=f;if(f=Bp(b,c,e,"fontFamily"))a.fontFamily=f;(f=Bp(b,c,e,"fontWeight"))&&"bold"==f&&(a.fontWeight=700);(f=Bp(b,c,e,"wrapOption"))&&"noWrap"==f&&(a.wrapLine=!1);(f=Bp(b,c,e,"lineHeight"))&&f.match(Ep)&&(a.lineHeight=f);(f=Bp(b,c,e,"fontSize"))&&(f.match(Ep)||f.match(Fp))&&(a.fontSize=f);if(f=Bp(b,c,e,"fontStyle"))a.fontStyle=qe[f.toUpperCase()];if(d){f=d.getAttribute("imagetype");var g=d.getAttribute("encoding");d=d.textContent.trim();"PNG"==f&&"Base64"==g&&d&&(a.backgroundImage=
"data:image/png;base64,"+d)}(d=Bp(b,c,e,"letterSpacing"))&&d.match(Ep)&&(a.letterSpacing=d);(d=Bp(b,c,e,"linePadding"))&&d.match(Ep)&&(a.linePadding=d);if(d=Bp(b,c,e,"opacity"))a.opacity=parseFloat(d);(c=up(c,e,"textDecoration"))&&Gp(a,c);(b=Hp(b,e,"textDecoration"))&&Gp(a,b)}
function Gp(a,b){for(var c=r(b.split(" ")),d=c.next();!d.done;d=c.next())switch(d.value){case "underline":a.textDecoration.includes("underline")||a.textDecoration.push("underline");break;case "noUnderline":a.textDecoration.includes("underline")&&Tb(a.textDecoration,"underline");break;case "lineThrough":a.textDecoration.includes("lineThrough")||a.textDecoration.push("lineThrough");break;case "noLineThrough":a.textDecoration.includes("lineThrough")&&Tb(a.textDecoration,"lineThrough");break;case "overline":a.textDecoration.includes("overline")||
a.textDecoration.push("overline");break;case "noOverline":a.textDecoration.includes("overline")&&Tb(a.textDecoration,"overline")}}function Bp(a,b,c,d){return(a=Hp(a,c,d))?a:up(b,c,d)}function up(a,b,c){if(!a)return null;var d=rp(a);d=r(d);for(var e=d.next();!e.done;e=d.next())if(e=Jf(e.value,"http://www.w3.org/ns/ttml#styling",c))return e;return Ip(a,b,c)}function Hp(a,b,c){var d=Jf(a,"http://www.w3.org/ns/ttml#styling",c);return d?d:Ip(a,b,c)}
function Ip(a,b,c){a=zp(a,"style",b,"");for(var d=null,e=0;e<a.length;e++){var f=Jf(a[e],"urn:ebu:tt:style",c);f||(f=Jf(a[e],"http://www.w3.org/ns/ttml#styling",c));f||(f=Hp(a[e],b,c));f&&(d=f)}return d}
function zp(a,b,c,d){var e=[];if(!a||1>c.length)return e;var f=a;for(a=null;f&&!(a=f.getAttribute(b))&&(f=f.parentNode,f instanceof Element););if(b=a)for(b=r(b.split(" ")),a=b.next();!a.done;a=b.next()){a=a.value;f=r(c);for(var g=f.next();!g.done;g=f.next())if(g=g.value,d+g.getAttribute("xml:id")==a){e.push(g);break}}return e}
function yp(a,b){var c=null;if(Jp.test(a)){c=Jp.exec(a);var d=Number(c[1]),e=Number(c[2]),f=Number(c[3]),g=Number(c[4]);g+=(Number(c[5])||0)/b.b;f+=g/b.frameRate;c=f+60*e+3600*d}else Kp.test(a)?c=Lp(Kp,a):Mp.test(a)?c=Lp(Mp,a):Np.test(a)?(c=Np.exec(a),c=Number(c[1])/b.frameRate):Op.test(a)?(c=Op.exec(a),c=Number(c[1])/b.a):Pp.test(a)&&(c=Lp(Pp,a));return c}
function Lp(a,b){var c=a.exec(b);return null==c||""==c[0]?null:(Number(c[4])||0)/1E3+(Number(c[3])||0)+60*(Number(c[2])||0)+3600*(Number(c[1])||0)}M("shaka.text.TtmlTextParser",pp);pp.prototype.parseMedia=pp.prototype.parseMedia;pp.prototype.parseInit=pp.prototype.parseInit;function qp(a,b,c,d){this.frameRate=Number(a)||30;this.b=Number(b)||1;this.a=Number(d);0==this.a&&(this.a=a?this.frameRate*this.b:1);c&&(a=/^(\d+) (\d+)$/g.exec(c))&&(this.frameRate*=Number(a[1])/Number(a[2]))}
var sp=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Fp=/^(\d{1,2}(?:\.\d+)?|100)%$/,Ep=/^(\d+px|\d+em|\d*\.?\d+c)$/,tp=/^(\d+)px (\d+)px$/,Jp=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Kp=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Mp=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Np=/^(\d*(?:\.\d*)?)f$/,Op=/^(\d*(?:\.\d*)?)t$/,Pp=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,Dp={left:je,center:"center",right:"end",start:je,end:"end"},Cp=
{left:"line-left",center:"center",right:"line-right"};ve["application/ttml+xml"]=function(){return new pp};function Qp(){this.s=new pp}Qp.prototype.parseInit=function(a){var b=!1;(new W).J("moov",zf).J("trak",zf).J("mdia",zf).J("minf",zf).J("stbl",zf).ea("stsd",Af).J("stpp",function(c){b=!0;c.parser.stop()}).parse(a);if(!b)throw new O(2,2,2007);};Qp.prototype.parseMedia=function(a,b){var c=this,d=!1,e=[];(new W).J("mdat",Bf(function(f){d=!0;e=e.concat(c.s.parseMedia(f,b))})).parse(a,!1);if(!d)throw new O(2,2,2007);return e};M("shaka.text.Mp4TtmlParser",Qp);Qp.prototype.parseMedia=Qp.prototype.parseMedia;
Qp.prototype.parseInit=Qp.prototype.parseInit;ve['application/mp4; codecs="stpp"']=function(){return new Qp};ve['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Qp};ve['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Qp};function Rp(){}Rp.prototype.parseInit=function(){};
Rp.prototype.parseMedia=function(a,b){var c=pc(a);c=c.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var d=c.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(d[0]))throw new O(2,2,2E3);c=b.periodStart;if(d[0].includes("X-TIMESTAMP-MAP")){var e=d[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),f=d[0].match(/MPEGTS:(\d+)/m);if(e&&f){c=Sp(new Xh(e[1]));if(null==c)throw new O(2,2,2E3);f=Number(f[1]);for(e=b.segmentStart;95443.7176888889<=e;)e-=95443.7176888889,f+=8589934592;c=b.periodStart+f/9E4-c}}f=
[];e=r(d[0].split("\n"));for(var g=e.next();!g.done;g=e.next())if(g=g.value,/^Region:/.test(g)){g=new Xh(g);var h=new ee;$h(g);Yh(g);for(var k=$h(g);k;){var l=h,m=k;(k=/^id=(.*)$/.exec(m))?l.id=k[1]:(k=/^width=(\d{1,2}|100)%$/.exec(m))?l.width=Number(k[1]):(k=/^lines=(\d+)$/.exec(m))?(l.height=Number(k[1]),l.heightUnits=2):(k=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(m))?(l.regionAnchorX=Number(k[1]),l.regionAnchorY=Number(k[2])):(k=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(m))?
(l.viewportAnchorX=Number(k[1]),l.viewportAnchorY=Number(k[2])):/^scroll=up$/.exec(m)&&(l.scroll="up");Yh(g);k=$h(g)}f.push(h)}e=[];d=r(d.slice(1));for(g=d.next();!g.done;g=d.next()){l=g.value.split("\n");k=c;if(1==l.length&&!l[0]||/^NOTE($|[ \t])/.test(l[0])||"STYLE"==l[0])g=null;else{g=null;l[0].includes("--\x3e")||(g=l[0],l.splice(0,1));h=new Xh(l[0]);m=Sp(h);var n=Zh(h,/[ \t]+--\x3e[ \t]+/g),q=Sp(h);if(null==m||null==n||null==q)throw new O(2,2,2001);l=new ce(m+k,q+k,l.slice(1).join("\n").trim());
Yh(h);for(k=$h(h);k;)Tp(l,k,f),Yh(h),k=$h(h);null!=g&&(l.id=g);g=l}g&&e.push(g)}return e};
function Tp(a,b,c){var d;if(d=/^align:(start|middle|center|end|left|right)$/.exec(b))b=d[1],"middle"==b?a.textAlign=ge:a.textAlign=ne[b.toUpperCase()];else if(d=/^vertical:(lr|rl)$/.exec(b))a.writingMode="lr"==d[1]?"vertical-lr":"vertical-rl";else if(d=/^size:([\d.]+)%$/.exec(b))a.size=Number(d[1]);else if(d=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(b))a.position=Number(d[1]),d[2]&&(b=d[2],a.positionAlign="line-left"==b||"start"==b?"line-left":"line-right"==b||"end"==
b?"line-right":"center");else if(d=/^region:(.*)$/.exec(b)){if(b=Up(c,d[1]))a.region=b}else if(c=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(b))a.lineInterpretation=1,a.line=Number(c[1]),c[2]&&(a.lineAlign=pe[c[2].toUpperCase()]);else if(c=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(b))a.lineInterpretation=ie,a.line=Number(c[1]),c[2]&&(a.lineAlign=pe[c[2].toUpperCase()])}function Up(a,b){var c=a.filter(function(d){return d.id==b});return c.length?c[0]:null}
function Sp(a){a=Zh(a,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g);if(null==a)return null;var b=Number(a[2]),c=Number(a[3]);return 59<b||59<c?null:Number(a[4])/1E3+c+60*b+3600*(Number(a[1])||0)}M("shaka.text.VttTextParser",Rp);Rp.prototype.parseMedia=Rp.prototype.parseMedia;Rp.prototype.parseInit=Rp.prototype.parseInit;ve["text/vtt"]=function(){return new Rp};ve['text/vtt; codecs="vtt"']=function(){return new Rp};ve['text/vtt; codecs="wvtt"']=function(){return new Rp};function Vp(){this.a=null}Vp.prototype.parseInit=function(a){var b=this,c=!1;(new W).J("moov",zf).J("trak",zf).J("mdia",zf).ea("mdhd",function(d){0==d.version?(d.reader.skip(4),d.reader.skip(4),b.a=d.reader.G(),d.reader.skip(4)):(d.reader.skip(8),d.reader.skip(8),b.a=d.reader.G(),d.reader.skip(8));d.reader.skip(4)}).J("minf",zf).J("stbl",zf).ea("stsd",Af).J("wvtt",function(){c=!0}).parse(a);if(!this.a)throw new O(2,2,2008);if(!c)throw new O(2,2,2008);};
Vp.prototype.parseMedia=function(a,b){if(!this.a)throw new O(2,2,2008);var c=0,d=[],e,f=[],g=!1,h=!1,k=!1,l=null;(new W).J("moof",zf).J("traf",zf).ea("tfdt",function(E){g=!0;c=0==E.version?E.reader.G():E.reader.mb()}).ea("tfhd",function(E){var H=E.flags;E=E.reader;E.skip(4);H&1&&E.skip(8);H&2&&E.skip(4);l=H&8?E.G():null}).ea("trun",function(E){h=!0;var H=E.version,G=E.flags;E=E.reader;var F=E.G();G&1&&E.skip(4);G&4&&E.skip(4);var I=[];F=r(db(F));for(var L=F.next();!L.done;L=F.next())L={duration:null,
sampleSize:null,ad:null},G&256&&(L.duration=E.G()),G&512&&(L.sampleSize=E.G()),G&1024&&E.skip(4),G&2048&&(L.ad=0==H?E.G():E.xd()),I.push(L);d=I}).J("mdat",Bf(function(E){k=!0;e=E})).parse(a,!1);if(!k&&!g&&!h)throw new O(2,2,2008);for(var m=c,n=new V(e,0),q=r(d),u=q.next();!u.done;u=q.next()){u=u.value;var v=u.duration||l,y=u.ad?c+u.ad:m;m=y+(v||0);var z=0;do{var A=n.G();z+=A;var D=n.G(),B=null;"vttc"==Cf(D)?8<A&&(B=n.Va(A-8)):n.skip(A-8);v&&B&&(A=Wp(B,b.periodStart+y/this.a,b.periodStart+m/this.a),
f.push(A))}while(u.sampleSize&&z<u.sampleSize)}return f.filter(Gc)};function Wp(a,b,c){var d,e,f;(new W).J("payl",Bf(function(g){d=pc(g)})).J("iden",Bf(function(g){e=pc(g)})).J("sttg",Bf(function(g){f=pc(g)})).parse(a);return d?Xp(d,e,f,b,c):null}function Xp(a,b,c,d,e){a=new ce(d,e,a);b&&(a.id=b);if(c)for(b=new Xh(c),c=$h(b);c;)Tp(a,c,[]),Yh(b),c=$h(b);return a}M("shaka.text.Mp4VttParser",Vp);Vp.prototype.parseMedia=Vp.prototype.parseMedia;Vp.prototype.parseInit=Vp.prototype.parseInit;
ve['application/mp4; codecs="wvtt"']=function(){return new Vp};/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function Yp(){}var Zp;function $p(){Zp?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Zp=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=aq):console.debug("EmeEncryptionSchemePolyfill: EME not found")}
function aq(a,b){var c=this,d;return K(function(e){if(1==e.a)return console.assert(c==navigator,'bad "this" for requestMediaKeySystemAccess'),t(e,Zp.call(c,a,b),2);d=e.b;if(bq(d))return console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Zp,e["return"](d);console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");navigator.requestMediaKeySystemAccess=cq;return e["return"](cq.call(c,
a,b))})}
function cq(a,b){var c=this,d,e,f,g,h,k,l,m,n,q;return K(function(u){if(1==u.a){console.assert(c==navigator,'bad "this" for requestMediaKeySystemAccess');d=dq(a);e=[];f=r(b);for(g=f.next();!g.done;g=f.next())h=g.value,k=eq(h.videoCapabilities,d),l=eq(h.audioCapabilities,d),h.videoCapabilities&&h.videoCapabilities.length&&!k.length||h.audioCapabilities&&h.audioCapabilities.length&&!l.length||(m=Object.assign({},h),m.videoCapabilities=k,m.audioCapabilities=l,e.push(m));if(!e.length)throw n=Error("Unsupported keySystem or supportedConfigurations."),
n.name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n;return t(u,Zp.call(c,a,e),2)}q=u.b;return u["return"](new fq(q,d))})}function eq(a,b){return a?a.filter(function(c){return!c.encryptionScheme||c.encryptionScheme==b}):a}M("EmeEncryptionSchemePolyfill",Yp);Yp.install=$p;function gq(){}var hq;
function iq(){navigator.mediaCapabilities?(hq=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=jq):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}
function jq(a){var b=this,c,d;return K(function(e){if(1==e.a)return console.assert(b==navigator.mediaCapabilities,'bad "this" for decodingInfo'),t(e,hq.call(b,a),2);c=e.b;if(!a.keySystemConfiguration)return e["return"](c);d=c.keySystemAccess;if(bq(d))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=hq,e["return"](c);console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");
navigator.mediaCapabilities.decodingInfo=kq;return e["return"](kq.call(b,a))})}
function kq(a){var b=this,c,d,e,f,g,h,k;return K(function(l){if(1==l.a)return console.assert(b==navigator.mediaCapabilities,'bad "this" for decodingInfo'),c=null,a.keySystemConfiguration&&(d=a.keySystemConfiguration,e=d.keySystem,f=d.audio&&d.audio.encryptionScheme,g=d.video&&d.video.encryptionScheme,c=dq(e),h={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:a},f&&f!=c||g&&g!=c)?l["return"](h):t(l,hq.call(b,a),2);k=l.b;k.keySystemAccess&&(k.keySystemAccess=new fq(k.keySystemAccess,
c));return l["return"](k)})}M("McEncryptionSchemePolyfill",gq);gq.install=iq;function fq(a,b){this.b=a;this.a=b;this.keySystem=a.keySystem}fq.prototype.getConfiguration=function(){var a=this.b.getConfiguration();if(a.videoCapabilities)for(var b=r(a.videoCapabilities),c=b.next();!c.done;c=b.next())c.value.encryptionScheme=this.a;if(a.audioCapabilities)for(b=r(a.audioCapabilities),c=b.next();!c.done;c=b.next())c.value.encryptionScheme=this.a;return a};fq.prototype.createMediaKeys=function(){return this.b.createMediaKeys()};
function dq(a){if(a.startsWith("com.widevine")||a.startsWith("com.microsoft")||a.startsWith("com.adobe")||a.startsWith("org.w3"))return"cenc";if(a.startsWith("com.apple"))return"cbcs-1-9";console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",a,"Please contribute!");return null}function bq(a){a=a.getConfiguration();var b=a.audioCapabilities&&a.audioCapabilities[0];return(a=a.videoCapabilities&&a.videoCapabilities[0]||b)&&void 0!==a.encryptionScheme?!0:!1}function lq(){}
function Go(){$p();iq()}M("EncryptionSchemePolyfills",lq);lq.install=Go;"undefined"!==typeof module&&module.exports&&(module.exports=lq);}).call(exportTo,innerGlobal,innerGlobal,undefined);if(typeof exports!="undefined")for(var k in exportTo.shaka)exports[k]=exportTo.shaka[k];else if(typeof define!="undefined"&&define.amd)define(function(){return exportTo.shaka});else innerGlobal.shaka=exportTo.shaka})();

window.fuckAdBlock = false, window.FuckAdBlock = undefined;!function(t,e,i){var n=!1,o="FuckAdBlock",r=function(){var t=this,e={};this.errors={throwError:function(t,e,i){throw'Argument "'+t+'" of method "'+e+'" is not an "'+i+'"'},isObject:function(t,e,i){("object"!=typeof t||Array.isArray(t)===!0||null===t)&&this.throwError(e,i,"object")},isArray:function(t,e,i){Array.isArray(t)===!1&&this.throwError(e,i,"array")},isFunction:function(t,e,i){"function"!=typeof t&&this.throwError(e,i,"function")},isString:function(t,e,i){"string"!=typeof t&&this.throwError(e,i,"string")},isBoolean:function(t,e,i){"boolean"!=typeof t&&this.throwError(e,i,"boolean")}},this.options={set:function(i){t.errors.isObject(i,"optionsList","options.set");for(var n in i)e[n]=i[n],t.debug.log("options.set",'Set "'+n+'" to "'+i[n]+'"');return t},get:function(t){return e[t]}},this.debug={set:function(e){return n=e,t.debug.log("debug.set",'Set debug to "'+n+'"'),t},isEnable:function(){return n},log:function(e,i){n===!0&&(t.errors.isString(e,"method","debug.log"),t.errors.isString(i,"message","debug.log"),console.log("["+o+"]["+e+"] "+i))}},this.versionToInt=function(t){for(var e="",i=0;3>i;i++){var n=t[i]||0;1===(""+n).length&&(n="0"+n),e+=n}return parseInt(e)}},s=function(){r.apply(this);var t=null,e=null;this.setDetected=function(e){return t=e,this},this.callDetected=function(){return null===t?!1:(t(),t=null,!0)},this.setUndetected=function(t){return e=t,this},this.callUndetected=function(){return null===e?!1:(e(),e=null,!0)}},a=function(){r.apply(this),this.options.set({timeout:200});var t=this,e=[4,0,0,"beta",3],i={},n={};this.getVersion=function(t){return t!==!0?e:void this.versionToInt(e)},this.addEvent=function(t,e){return this.errors.isString(t,"name","addEvent"),this.errors.isFunction(e,"callback","addEvent"),void 0===i[t]&&(i[t]=[]),i[t].push(e),this.debug.log("set",'Event "'+t+'" added'),this},this.on=function(t,e){return this.errors.isBoolean(t,"detected","on"),this.errors.isFunction(e,"callback","on"),this.addEvent(t===!0?"detected":"undetected",e)},this.onDetected=function(t){return this.errors.isFunction(t,"callback","onDetected"),this.addEvent("detected",t)},this.onNotDetected=function(t){return this.errors.isFunction(t,"callback","onNotDetected"),this.addEvent("undetected",t)};var s=function(e){var n=i[e];if(t.debug.isEnable()===!0){var o=void 0!==n?n.length:0;t.debug.log("dispatchEvent",'Starts dispatch of events "'+e+'" (0/'+o+")")}if(void 0!==n)for(var r in n)t.debug.isEnable()===!0&&t.debug.log("dispatchEvent",'Dispatch event "'+e+'" ('+(parseInt(r)+1)+"/"+o+")"),n[r]();return this};this.check=function(e,i){e instanceof Array==!1&&void 0===i&&(i=e,e=void 0),void 0===e&&(e=Object.keys(n)),void 0===i&&(i={}),this.errors.isArray(e,"pluginsList","check"),this.errors.isObject(i,"optionsList","check"),this.debug.log("check","Starting check");var o={},r=e.length,a=0,u=function(e,i,n){if(a++,t.debug.log("check",(i===!0?"Positive":"Negative")+'" check of plugin "'+e+'"'),n===!0||i===!0||a===r){clearTimeout(h);for(var u in o)o[u].instance.stop();s(i===!0?"detected":"undetected")}};if(this.debug.log("check","Starting loading plugins (0/"+r+") ("+e.join()+")"),0===r)return u("#NoPlugin",!1,!0),this;for(var l in e){var c=e[l];this.debug.log("check",'Load plugin "'+c+'" ('+(parseInt(l)+1)+"/"+r+")");var d=o[c]={name:c,instance:new n[c],detected:null};void 0!==i[c]&&d.instance.options.set(i[c]),function(t,e){e.instance.setDetected(function(){e.detected=!0,t(e.name,!0)}).setUndetected(function(){e.detected=!1,t(e.name,!1)})}(u,d)}for(var c in o)o[c].instance.start();var h=setTimeout(function(){u("#Timeout",!1,!0)},this.options.get("timeout"));return this},this.registerPlugin=function(t){if(this.errors.isFunction(t,"pluginClass","registerPlugin"),this.errors.isString(t.pluginName,"pluginClass.pluginName","registerPlugin"),this.errors.isArray(t.versionMin,"pluginClass.versionMin","registerPlugin"),3!==t.versionMin.length&&this.errors.throwError("pluginClass.versionMin","registerPlugin","array with 3 values"),void 0===n[t.pluginName]){if(this.versionToInt(e)>=this.versionToInt(t.versionMin))return n[t.pluginName]=t,this.debug.log("registerPlugin",'Plugin "'+t.pluginName+'" registered'),!0;throw'The plugin "'+t.pluginName+'" ('+t.versionMin.join(".")+") is too recent for this version of "+o+" ("+e.join(".")+")"}throw'The plugin "'+t.pluginName+'" is already registered'},this.registerPlugin(u),this.registerPlugin(l)};a.getPluginClass=function(){return s};var u=function(){a.getPluginClass().apply(this,arguments),this.options.set({loopTime:50,baitElement:null,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width:1px!important;height:1px!important;position:absolute!important;left:-10000px!important;top:-1000px!important;",baitParent:null});var e={};this.start=function(){var i=this;if(null===this.options.get("baitElement")){e.bait=this.createBait({"class":this.options.get("baitClass"),style:this.options.get("baitStyle")});var n=this.options.get("baitParent");null===n?t.document.body.appendChild(e.bait):n.appendChild(e.bait)}else e.bait=this.options.get("baitElement");var o=function(){i.checkBait(e.bait,!0)===!0&&i.callDetected()};return e.loopTimeout=setTimeout(o,1),e.loopInterval=setInterval(o,this.options.get("loopTime")),this},this.stop=function(){clearInterval(e.loopTimeout),clearInterval(e.loopInterval);var i=this.options.get("baitParent");return null===i?t.document.body.removeChild(e.bait):i.removeChild(e.bait),this},this.createBait=function(e){var i=t.document.createElement("div");return i.setAttribute("class",e["class"]),i.setAttribute("style",e.style),i.offsetParent,i.offsetHeight,i.offsetLeft,i.offsetTop,i.offsetWidth,i.clientHeight,i.clientWidth,i},this.checkBait=function(e,i){var n=!1;if(i===!0&&null!==t.document.body.getAttribute("abp")||null===e.offsetParent||0==e.offsetHeight||0==e.offsetLeft||0==e.offsetTop||0==e.offsetWidth||0==e.clientHeight||0==e.clientWidth)n=!0;else{var o=t.getComputedStyle(e);("none"==o.getPropertyValue("display")||"hidden"==o.getPropertyValue("visibility"))&&(n=!0)}return n}};u.pluginName="html",u.version=[1,0,0],u.versionMin=[4,0,0];var l=function(){a.getPluginClass().apply(this,arguments),this.options.set({baitMode:"ajax",baitUrl:"/ad/banner/_adsense_/_adserver/_adview_.ad.json?adzone=top&adsize=300x250&advid={RANDOM}"});var e={};this.start=function(){var t=this;e.end=!1;var i=this.options.get("baitUrl").replace(/\{RANDOM\}/g,function(){return parseInt(1e8*Math.random())});return this._urlCheck(i,this.options.get("baitMode"),function(){e.end===!1&&(e.end=!0,t.callDetected())},function(){e.end===!1&&(e.end=!0,t.callUndetected())}),this},this.stop=function(){return e.end=!0,this},this._urlCheck=function(e,i,n,o){var r=!1,s=function(t){r===!1&&(r=!0,t===!0?n():o())};if("ajax"===i){var a=[!1,!1,!1,!1],u=null,l=function(t){if(void 0!==t)s(t);else{if(0===u)return void s(!0);for(var e=0;4>e;e++)if(a[e]===!1)return void s(!0);s(!1)}},c=new XMLHttpRequest;c.onreadystatechange=function(){a[c.readyState-1]=!0;try{u=c.status}catch(t){}4===c.readyState&&l()};try{c.open("GET",e,!0),c.send()}catch(d){"2153644038"==d.result&&l(!0)}}else if("import"===i){var h=document.createElement("script");h.src=e,h.onerror=function(){s(!0),t.document.body.removeChild(h)},h.onload=function(){s(!1),t.document.body.removeChild(h)},t.document.body.appendChild(h)}else s(!1)}};if(l.pluginName="http",u.version=[1,0,0],l.versionMin=[4,0,0],t[i]=a,void 0===t[e]){var c=t[e]=new a;t.addEventListener("load",function(){setTimeout(function(){c.check()},1)},!1)}}(window,"fuckAdBlock","FuckAdBlock");!function e(t,a,i){function s(n,o){if(!a[n]){if(!t[n]){var l="function"==typeof require&&require;if(!o&&l)return l(n,!0);if(r)return r(n,!0);var d=new Error("Cannot find module '"+n+"'");throw d.code="MODULE_NOT_FOUND",d}var c=a[n]={exports:{}};t[n][0].call(c.exports,(function(e){return s(t[n][1][e]||e)}),c,c.exports,e,t,a,i)}return a[n].exports}for(var r="function"==typeof require&&require,n=0;n<i.length;n++)s(i[n]);return s}({1:[function(e,t,a){"use strict";e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;
/**
 * @license Copyright (c) 2015-2019 Radiant Media Player 
 * rmp-connection 0.2.0 | https://github.com/radiantmediaplayer/rmp-connection
 */
const i={};let s=null;i.getBandwidthEstimate=function(){if("undefined"==typeof window)return-1;if(void 0!==navigator.onLine&&!navigator.onLine)return-1;if(void 0===navigator.connection)return-1;if(s="string"==typeof navigator.connection.type&&""!==navigator.connection.type?navigator.connection.type:null,s&&"none"===s)return-1;if("number"==typeof navigator.connection.downlink&&navigator.connection.downlink>0)return navigator.connection.downlink;const e=function(){const e=[.025,.035,.35,1.4];if(s)switch(s){case"bluetooth":case"cellular":e[3]=.7;break;case"ethernet":case"wifi":case"wimax":e[3]=2.1}return e}();if("string"==typeof navigator.connection.effectiveType&&""!==navigator.connection.effectiveType)switch(navigator.connection.effectiveType){case"slow-2g":return e[0];case"2g":return e[1];case"3g":return e[2];case"4g":return e[3]}if(s)switch(s){case"ethernet":case"wifi":case"wimax":return 1.4;case"bluetooth":return.35}return-1};var r=i;a.default=r},{"@babel/runtime-corejs3/core-js-stable/object/define-property":98}],2:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/set-interval")),r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("../fw/fw")),o=i(e("../fw/env")),l=i(e("../core/ui/core-ui")),d=i(e("../core/utils/error")),c=i(e("../core/accessible/accessible"));const u={};u.destroy=function(){this.dom.container&&(this.dom.container.removeEventListener("ready",this.onReadyMain360),this.dom.container.removeEventListener("playing",this.onPlayingUpdate360UI));try{this.requestAnimation360&&window.cancelAnimationFrame(this.requestAnimation360),this.texture360&&this.texture360.dispose(),this.scene360&&this.mesh360&&this.scene360.remove(this.mesh360)}catch(e){n.default.trace(e)}n.default.removeElement(this.canvas360)},u.resize=function(){if(this.renderer360&&this.camera360){let e=-1,t=-1;if(this.isInFullscreen){if(this.hasNativeFullscreenSupport){const a=o.default.getScreenDimension();e=a.width,t=a.height}else if(this.fullscreenFullWindowMode){const a=o.default.getViewportSize();a.width>-1&&a.height>-1&&(e=a.width,t=a.height)}}else e=this.width,t=this.height;e>0&&t>0&&(this.renderer360.setSize(e,t),this.camera360.aspect=e/t,this.camera360.updateProjectionMatrix())}};const h=function(e){if(e){try{e.preventDefault()}catch(t){n.default.trace(t)}this.dragStart.x=n.default.getPosXTouch(e),this.dragStart.y=n.default.getPosYTouch(e),n.default.addClass(this.canvas360,"grabbing"),this.mouseDown=!0}},p=function(e){e&&("mousedown"===e.type?(this.dragStart.x=n.default.getPosX(e),this.dragStart.y=n.default.getPosY(e)):"touchstart"===e.type&&(this.dragStart.x=n.default.getPosXTouch(e),this.dragStart.y=n.default.getPosYTouch(e)),n.default.addClass(this.canvas360,"grabbing"),this.mouseDown=!0)},f=function(){n.default.removeClass(this.canvas360,"grabbing"),this.mouseDown=!1},m=function(e){if(this.progressiveMoveInprogress||!this.mouseDown)return void 0;let t,a,i,s;"mousemove"===e.type?(i=n.default.getPosX(e),s=n.default.getPosY(e)):"touchmove"===e.type&&(i=n.default.getPosXTouch(e),s=n.default.getPosYTouch(e)),t=this.dragStart.x-i,a=this.dragStart.y-s,this.dragStart.x=i,this.dragStart.y=s;const r=this.getPlayerWidth()/this.getPlayerHeight();let o=1;n.default.hasClass(this.dom.container,"rmp-extrasmall")?o=2:n.default.hasClass(this.dom.container,"rmp-small")&&(o=1.5),this.lon+=.1*t*o,this.lat+=.1*a*r*o},g=function(){this.camera360&&(this.fov>this.video360MaxFocalLength?this.fov=this.video360MaxFocalLength:this.fov<this.video360MinFocalLength&&(this.fov=this.video360MinFocalLength),this.camera360.fov=this.fov,this.camera360.updateProjectionMatrix())},b=function(e){e&&(e.stopPropagation(),e.preventDefault()),this.progressiveMoveInprogress||e&&e.wheelDeltaY&&(e.wheelDeltaY>0?this.fov-=10:this.fov+=10,g.call(this))},v=function(){o.default.isMobile?(o.default.isIos[0]?this.dom.content.addEventListener("touchstart",(0,r.default)(h).call(h,this)):this.dom.content.addEventListener("touchstart",(0,r.default)(p).call(p,this),!!o.default.hasPassiveEventListeners&&{passive:!0}),this.dom.content.addEventListener("touchend",(0,r.default)(f).call(f,this)),this.dom.content.addEventListener("touchmove",(0,r.default)(m).call(m,this),!!o.default.hasPassiveEventListeners&&{passive:!0})):(this.dom.content.addEventListener("mousedown",(0,r.default)(p).call(p,this)),this.dom.content.addEventListener("mouseup",(0,r.default)(f).call(f,this)),this.dom.content.addEventListener("mouseleave",(0,r.default)(f).call(f,this)),this.dom.content.addEventListener("mousemove",(0,r.default)(m).call(m,this)),this.dom.content.addEventListener("wheel",(0,r.default)(b).call(b,this)))},y=function(){this.requestAnimation360=window.requestAnimationFrame(this.animate360),this.lat=Math.max(-85,Math.min(85,this.lat));const e=THREE.Math.degToRad(90-this.lat),t=THREE.Math.degToRad(this.lon),a=50*Math.sin(e);this.camera360.position.x=a*Math.cos(t),this.camera360.position.y=50*Math.cos(e),this.camera360.position.z=a*Math.sin(t),this.camera360.lookAt(this.camera360.target),this.renderer360.render(this.scene360,this.camera360)};u.setCamLatLongFov=function(e,t,a,i,r){if(this.progressiveMoveInprogress)return void 0;if(this.progressiveMoveInprogress=!0,r&&(r.stopPropagation(),"touchend"===r.type&&r.preventDefault()),l.default.showChrome.call(this),i)return this.lon=t,this.lat=e,this.fov=a,g.call(this),void(this.progressiveMoveInprogress=!1);0!==t&&(this.lon+=t/20),0!==e&&(this.lat-=e/20),0!==a&&(this.fov-=a/20,g.call(this));let o=1;n.default.clearInterval(this.progressiveInterval),this.progressiveInterval=(0,s.default)(()=>{0!==t&&(this.lon+=t/20),0!==e&&(this.lat-=e/20),0!==a&&(this.fov-=a/20,g.call(this)),o++,20===o&&(this.progressiveMoveInprogress=!1,n.default.clearInterval(this.progressiveInterval))},20)};const k=function(){var e,t,a,i,s,o,l;this.dom.container.removeEventListener("playing",this.onPlayingUpdate360UI),v.call(this);const d=this.dom.container.querySelector(".rmp-360-text");null!==d&&n.default.removeElement(d),n.default.show(this.dom.ui360);const h=n.default.createElement("button","rmp-button rmp-360-nav-button rmp-360-nav-top rmp-i rmp-i-up");n.default.addEvent(["touchend","click"],h,(0,r.default)(e=u.setCamLatLongFov).call(e,this,20,0,0,!1)),this.dom.ui360.appendChild(h);const p=n.default.createElement("button","rmp-button rmp-360-nav-button rmp-360-nav-bottom rmp-i rmp-i-down");n.default.addEvent(["touchend","click"],p,(0,r.default)(t=u.setCamLatLongFov).call(t,this,-20,0,0,!1)),this.dom.ui360.appendChild(p);const f=n.default.createElement("button","rmp-button rmp-360-nav-button rmp-360-nav-left rmp-i rmp-i-left");n.default.addEvent(["touchend","click"],f,(0,r.default)(a=u.setCamLatLongFov).call(a,this,0,-20,0,!1)),this.dom.ui360.appendChild(f);const m=n.default.createElement("button","rmp-button rmp-360-nav-button rmp-360-nav-right rmp-i rmp-i-right");n.default.addEvent(["touchend","click"],m,(0,r.default)(i=u.setCamLatLongFov).call(i,this,0,20,0,!1)),this.dom.ui360.appendChild(m);const g=n.default.createElement("button","rmp-button rmp-360-nav-button rmp-360-nav-minus rmp-i rmp-i-minus-360");n.default.addEvent(["touchend","click"],g,(0,r.default)(s=u.setCamLatLongFov).call(s,this,0,0,-10,!1)),this.dom.ui360.appendChild(g);const b=n.default.createElement("button","rmp-button rmp-360-nav-button rmp-360-nav-reset rmp-i rmp-i-reset-360");n.default.addEvent(["touchend","click"],b,(0,r.default)(o=u.setCamLatLongFov).call(o,this,this.video360InitialLat,this.video360InitialLon,this.video360FocalLength,!0)),this.dom.ui360.appendChild(b);const y=n.default.createElement("button","rmp-button rmp-360-nav-button rmp-360-nav-plus rmp-i rmp-i-plus-360");n.default.addEvent(["touchend","click"],y,(0,r.default)(l=u.setCamLatLongFov).call(l,this,0,0,10,!1)),this.dom.ui360.appendChild(y),c.default.make.call(this,h,"360 "+this.labels.hint.up,!0),c.default.make.call(this,p,"360 "+this.labels.hint.down,!0),c.default.make.call(this,f,"360 "+this.labels.hint.left,!0),c.default.make.call(this,m,"360 "+this.labels.hint.right,!0),c.default.make.call(this,g,"360 "+this.labels.hint.minus,!0),c.default.make.call(this,b,"360 "+this.labels.hint.default,!0),c.default.make.call(this,y,"360 "+this.labels.hint.plus,!0)},w=function(e){e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault()),l.default.showChrome.call(this)},S=function(){this.dom.container.removeEventListener("ready",this.onReadyMain360),this.onPlayingUpdate360UI=(0,r.default)(k).call(k,this),this.dom.container.addEventListener("playing",this.onPlayingUpdate360UI);const e=this.getPlayerWidth(),t=this.getPlayerHeight(),a=e/t;this.lat=this.video360InitialLat,this.lon=this.video360InitialLon,this.fov=this.video360FocalLength,this.camera360=new THREE.PerspectiveCamera(this.video360FocalLength,a,1,1100),this.camera360.target=new THREE.Vector3(0,0,0),this.scene360=new THREE.Scene;const i=2*Math.round(60/a/2),s=new THREE.SphereBufferGeometry(500,60,i);s.scale(-1,1,1),this.texture360=new THREE.VideoTexture(this.dom.video);const l=new THREE.MeshBasicMaterial({map:this.texture360});this.texture360.minFilter=THREE.LinearFilter,this.texture360.format=THREE.RGBFormat,this.mesh360=new THREE.Mesh(s,l),this.scene360.add(this.mesh360),this.renderer360=new THREE.WebGLRenderer,this.renderer360.setPixelRatio(o.default.devicePixelRatio),this.renderer360.setSize(e,t),this.canvas360=this.renderer360.domElement,this.canvas360.className="rmp-canvas-360 rmp-grab",this.dom.content.insertBefore(this.canvas360,this.dom.poster),n.default.hide(this.dom.video),this.dom.ui360=n.default.createElement("div","rmp-360-nav rmp-color-bg"),n.default.addEvent(["touchend","click"],this.dom.ui360,(0,r.default)(w).call(w,this)),this.dom.ui360.addEventListener("dblclick",n.default.stopPropagation),o.default.isMobile||(this.dom.ui360.addEventListener("mouseenter",e=>{e&&e.stopPropagation(),this.forceResetTimer=!0}),this.dom.ui360.addEventListener("mouseleave",e=>{e&&e.stopPropagation(),this.forceResetTimer=!1})),n.default.hide(this.dom.ui360),this.dom.container.appendChild(this.dom.ui360);const d=n.default.createElement("div","rmp-360-text rmp-color-bg",null,this.rtl);n.default.setText(d,"360"),this.dom.container.appendChild(d),this.animate360=(0,r.default)(y).call(y,this),this.animate360()},C=function(){this.onReadyMain360=(0,r.default)(S).call(S,this),this.get5Ready()?this.onReadyMain360():this.dom.container.addEventListener("ready",this.onReadyMain360)};u.load=function(){if("undefined"!=typeof THREE)C.call(this);else{var e;let t=this.pathToRmpFiles+"three/three.min.js";0,n.default.getScript(t,(0,r.default)(C).call(C,this),(0,r.default)(e=d.default.fatal).call(e,this,"failed to load required lib three.js (360 video)",500,null))}};var j=u;a.default=j},{"../core/accessible/accessible":31,"../core/ui/core-ui":52,"../core/utils/error":56,"../fw/env":69,"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/set-interval":103,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],3:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("../fw/fw")),r=i(e("../core/ui/core-ui")),n=i(e("../core/accessible/accessible")),o=i(e("../core/modules/modules"));const l={selectRendition:function(e,t){s.default.stopPrevent(t),r.default.showChrome.call(this),this.setBitrate(e-1)},selectAudioTrack:function(e,t){s.default.stopPrevent(t),r.default.showChrome.call(this),this.setAudioTrack(e)},setUpAbrUI:function(){o.default.append.call(this,"quality"),o.default.appendOverlay.call(this,"quality"),o.default.deferredShow.call(this,"quality"),this.dom.qualityAuto=s.default.createElement("button","rmp-button rmp-overlay-level rmp-color-bg rmp-overlay-level-active rmp-q0",null,this.rtl),n.default.make.call(this,this.dom.qualityAuto,this.labels.bitrates.auto,!0),s.default.setText(this.dom.qualityAuto,this.labels.bitrates.auto),this.dom.qualityOverlayLevelsArea.appendChild(this.dom.qualityAuto)}};var d=l;a.default=d},{"../core/accessible/accessible":31,"../core/modules/modules":39,"../core/ui/core-ui":52,"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],4:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.array-buffer.slice"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.to-locale-string"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/slice")),o=i(e("@babel/runtime-corejs3/core-js-stable/instance/trim")),l=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),d=i(e("@babel/runtime-corejs3/core-js-stable/instance/index-of")),c=i(e("@babel/runtime-corejs3/core-js-stable/number/is-nan")),u=(i(e("../fw/fw")),i(e("../core/utils/error")));const h={};let p;const f=function(e,t,a){a.addEventListener(e,(function(){t(arguments[0])}))};h.filterDrm=function(){if("string"==typeof this.fpsDrm.certificatePath&&""!==this.fpsDrm.certificatePath&&"string"==typeof this.fpsDrm.processSpcPath&&""!==this.fpsDrm.processSpcPath){const e=["blob","json","text","arraybuffer"];let t="text";"string"==typeof this.fpsDrm.licenseResponseType&&(0,d.default)(e).call(e,this.fpsDrm.licenseResponseType)>-1&&(t=this.fpsDrm.licenseResponseType),this.fpsDrm.licenseResponseType=t;let a=[];(0,l.default)(this.fpsDrm.licenseRequestHeaders)&&(a=this.fpsDrm.licenseRequestHeaders),this.fpsDrm.licenseRequestHeaders=a;let i=[{name:"Pragma",value:"Cache-Control: no-cache"},{name:"Cache-Control",value:"max-age=0"}];(0,l.default)(this.fpsDrm.certificateRequestHeaders)&&(i=this.fpsDrm.certificateRequestHeaders),this.fpsDrm.certificateRequestHeaders=i;let s=function(e){const t=function(e){const t=new Uint16Array(e.buffer);return String.fromCharCode.apply(null,t)}(e),a=document.createElement("a");return a.href=t,a.hostname};"function"==typeof this.fpsDrm.extractContentId&&(s=this.fpsDrm.extractContentId),this.fpsDrm.extractContentId=s;let r=function(e,t){return"spc="+function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let a,i,s,r,n,o,l,d="",u=0;for(;u<e.length;)a=e[u++],i=u<e.length?e[u++]:Number.NaN,s=u<e.length?e[u++]:Number.NaN,r=a>>2,n=(3&a)<<4|i>>4,o=(15&i)<<2|s>>6,l=63&s,(0,c.default)(i)?o=l=64:(0,c.default)(s)&&(l=64),d+=t.charAt(r)+t.charAt(n)+t.charAt(o)+t.charAt(l);return d}(e)+"&assetId="+encodeURIComponent(t.contentId)};"function"==typeof this.fpsDrm.licenseRequestMessage&&(r=this.fpsDrm.licenseRequestMessage),this.fpsDrm.licenseRequestMessage=r;let u=function(e){var t;const a=e.target,i=a.session;let s=(0,o.default)(t=a.responseText).call(t);"<ckc>"===s.substr(0,5)&&"</ckc>"===s.substr(-6)&&(s=(0,n.default)(s).call(s,5,-6));const r=function(e){const t=window.atob(e),a=t.length,i=new Uint8Array(new ArrayBuffer(a));for(let s=0;s<a;s++)i[s]=t.charCodeAt(s);return i}(s);i.update(r)};return"function"==typeof this.fpsDrm.licenseRequestLoaded&&(u=this.fpsDrm.licenseRequestLoaded),this.fpsDrm.licenseRequestLoaded=u,!0}return!1};const m=function(e,t,a){"string"==typeof t&&(t=function(e){const t=new ArrayBuffer(2*e.length),a=new Uint16Array(t);for(let i=0,s=e.length;i<s;i++)a[i]=e.charCodeAt(i);return a}(t));let i=0;const s=new ArrayBuffer(e.byteLength+4+t.byteLength+4+a.byteLength),r=new DataView(s);new Uint8Array(s,i,e.byteLength).set(e),i+=e.byteLength,r.setUint32(i,t.byteLength,!0),i+=4;const n=new Uint16Array(s,i,t.length);n.set(t),i+=n.byteLength,r.setUint32(i,a.byteLength,!0),i+=4;return new Uint8Array(s,i,a.byteLength).set(a),new Uint8Array(s,0,s.byteLength)},g=function(e){let t=null;e&&(t=e),u.default.fatal.call(this,"FPS license request failed",604,t)},b=function(e){var t;const a=e.target,i=e.message,s=new XMLHttpRequest;s.responseType=this.fpsDrm.licenseResponseType,s.session=a,s.addEventListener("load",(0,r.default)(t=this.fpsDrm.licenseRequestLoaded).call(t,this),!1),s.addEventListener("error",(0,r.default)(g).call(g,this),!1);const n=this.fpsDrm.licenseRequestMessage(i,a);s.open("POST",this.fpsDrm.processSpcPath,!0);for(let r=0,o=this.fpsDrm.licenseRequestHeaders.length;r<o;r++)"string"==typeof this.fpsDrm.licenseRequestHeaders[r].name&&""!==this.fpsDrm.licenseRequestHeaders[r].name&&"string"==typeof this.fpsDrm.licenseRequestHeaders[r].value&&""!==this.fpsDrm.licenseRequestHeaders[r].value&&s.setRequestHeader(this.fpsDrm.licenseRequestHeaders[r].name,this.fpsDrm.licenseRequestHeaders[r].value);s.send(n)},v=function(e){let t=null;e&&(t=e),u.default.warning.call(this,"FPS decryption key error was encountered",6e3,t)},y=function(e){0},k=function(e){let t=null;e&&(t=e),u.default.warning.call(this,"FPS video playback error occured",6001,t)},w=function(e,t){let a=t.initData;const i=this.fpsDrm.extractContentId(a);if(a=m(a,i,e),this.dom.video.webkitKeys||(!function(){window.WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4")?p="com.apple.fps.1_0":u.default.fatal.call(this,"FPS key System not supported",601,null)}(),this.dom.video.webkitSetMediaKeys(new window.WebKitMediaKeys(p))),!this.dom.video.webkitKeys)return void u.default.fatal.call(this,"FPS could not create MediaKeys",602,null);const s=this.dom.video.webkitKeys.createSession("video/mp4",a);s?(s.contentId=i,f("webkitkeymessage",(0,r.default)(b).call(b,this),s),f("webkitkeyadded",y,s),f("webkitkeyerror",v,s)):u.default.fatal.call(this,"FPS could not create key session",603,null)},S=function(e){const t=e.target,a=new Uint8Array(t.response);this.dom.video.addEventListener("webkitneedkey",(0,r.default)(w).call(w,this,a)),this.dom.video.addEventListener("error",k),this.dom.video.src=this.startingBitratePath},C=function(e){let t=null;e&&(t=e),u.default.fatal.call(this,"FPS failed to retrieve the FPS server certificate",600,t)};h.init=function(){const e=new XMLHttpRequest;e.responseType="arraybuffer",e.addEventListener("load",(0,r.default)(S).call(S,this)),e.addEventListener("error",(0,r.default)(C).call(C,this)),e.open("GET",this.fpsDrm.certificatePath,!0);for(let t=0,a=this.fpsDrm.certificateRequestHeaders.length;t<a;t++)"string"==typeof this.fpsDrm.certificateRequestHeaders[t].name&&""!==this.fpsDrm.certificateRequestHeaders[t].name&&"string"==typeof this.fpsDrm.certificateRequestHeaders[t].value&&""!==this.fpsDrm.certificateRequestHeaders[t].value&&e.setRequestHeader(this.fpsDrm.certificateRequestHeaders[t].name,this.fpsDrm.certificateRequestHeaders[t].value);e.send()};var j=h;a.default=j},{"../core/utils/error":56,"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/index-of":87,"@babel/runtime-corejs3/core-js-stable/instance/slice":89,"@babel/runtime-corejs3/core-js-stable/instance/trim":93,"@babel/runtime-corejs3/core-js-stable/number/is-nan":96,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.array-buffer.constructor":430,"core-js/modules/es.array-buffer.slice":431,"core-js/modules/es.typed-array.to-locale-string":441,"core-js/modules/es.typed-array.uint16-array":442,"core-js/modules/es.typed-array.uint8-array":443}],5:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.regexp.to-string"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/set-timeout")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/index-of")),o=i(e("@babel/runtime-corejs3/core-js-stable/set-interval")),l=i(e("@babel/runtime-corejs3/core-js-stable/instance/find-index")),d=i(e("@babel/runtime-corejs3/core-js-stable/object/keys")),c=i(e("@babel/runtime-corejs3/core-js-stable/parse-int")),u=i(e("@babel/runtime-corejs3/core-js-stable/instance/sort")),h=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),p=i(e("@babel/runtime-corejs3/core-js-stable/instance/splice")),f=i(e("@babel/runtime-corejs3/core-js-stable/instance/filter")),m=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),g=i(e("@babel/runtime-corejs3/core-js-stable/instance/includes")),b=i(e("../fw/fw")),v=i(e("../fw/env")),y=i(e("../core/ui/core-ui")),k=i(e("../core/utils/error")),w=i(e("../core/modules/quality")),S=i(e("../vtt/captions")),C=i(e("../vtt/native-captions")),j=i(e("../abr/abr-shared")),E=i(e("../core/utils/utils")),L=i(e("../core/modules/modules")),A=i(e("../../externals/rmp-connection")),T=i(e("../ads/ima-dai")),P=i(e("../analytics/mux")),M=i(e("../core/accessible/accessible")),I=i(e("../core/dom"));const x={destroy:function(){try{this.hlsManifestData={},this.hlsSessionData=[],this.hlsFragmentData=null,this.hlsFragmentBeingPlayed=null,this.hlsLevelData=null,this.hlsJSLevelDuration=-1,this.hlsJS&&(this.hlsJS.destroy(),this.hlsJS.bufferTimer=void 0,b.default.clearInterval(this.hlsJS.bufferTimer)),this.dom.container.removeEventListener("loadedmetadata",this.hlsJSHandleCCTracks),this.dom.container.removeEventListener("playing",this.hlsOnFirstPlaying),this.dom.container.removeEventListener("pause",this.hlsOnPauseStopLoad),this.dom.container.removeEventListener("play",this.hlsOnPlayStartLoad),this.dom.container.removeEventListener("playing",this.onPlayingCurrentLevelResetTried),b.default.clearInterval(this.hlsJSAbrInterval),b.default.clearTimeout(this.hlsJSErrorRetryTimeout)}catch(e){b.default.trace(e)}}},R=function(){this.hlsJS.off(Hls.Events.AUDIO_TRACKS_UPDATED,this.hlsJSAttachMultiAudio);const e=[];for(let s=0,r=this.hlsJS.audioTracks.length;s<r;s++){const t=this.hlsJS.audioTracks[s];if(0===e.length)e.push(t.lang),this.hlsJSFilteredAudioTracks.push(t);else{if((0,g.default)(e).call(e,t.lang))continue;e.push(t.lang),this.hlsJSFilteredAudioTracks.push(t)}}if((0,m.default)(this.hlsJSFilteredAudioTracks)&&this.hlsJSFilteredAudioTracks.length>1&&!this.hideModule.audio){var t;let e;L.default.append.call(this,"audio"),L.default.appendOverlay.call(this,"audio"),L.default.deferredShow.call(this,"audio");const s=function(e){return!0===e.default};if(1===(0,f.default)(t=this.hlsJSFilteredAudioTracks).call(t,s).length)for(let t=0;t<this.hlsJSFilteredAudioTracks.length;t++){let e;var a;if("AUDIO"===this.hlsJSFilteredAudioTracks[t].type&&!0===this.hlsJSFilteredAudioTracks[t].default&&0!==t)e=(0,p.default)(a=this.hlsJSFilteredAudioTracks).call(a,t,1);e&&e[0]&&this.hlsJSFilteredAudioTracks.unshift(e[0])}for(let t=0;t<this.hlsJSFilteredAudioTracks.length;t++)if("AUDIO"===this.hlsJSFilteredAudioTracks[t].type){var i;let a;a=0===t?"rmp-button rmp-overlay-level rmp-color-bg rmp-overlay-level-active":"rmp-button rmp-overlay-level rmp-color-bg";let s="";s=this.hlsJSUseManifestRenditionName&&"string"==typeof this.hlsJSFilteredAudioTracks[t].name&&""!==this.hlsJSFilteredAudioTracks[t].name?this.hlsJSFilteredAudioTracks[t].name:"string"==typeof this.hlsJSFilteredAudioTracks[t].lang&&""!==this.hlsJSFilteredAudioTracks[t].lang?this.hlsJSFilteredAudioTracks[t].lang:"Audio "+t,e=b.default.createElement("button",a,s,this.rtl),M.default.make.call(this,e,s,!0),b.default.addEvent(["touchend","click"],e,(0,h.default)(i=j.default.selectAudioTrack).call(i,this,t)),this.dom.audioOverlayLevelsArea.appendChild(e)}}},D=function(){const e=this.hlsJS.levels;if(!this.hideModule.quality&&(0,m.default)(e)&&e.length>0&&((0,u.default)(e).call(e,(e,t)=>e.height&&t.height?e.height-t.height:0),j.default.setUpAbrUI.call(this),this.dom.qualityAuto)){var t;b.default.addEvent(["touchend","click"],this.dom.qualityAuto,(0,h.default)(t=j.default.selectRendition).call(t,this,0));for(let t=0,i=e.length;t<i;t++){var a;const i=b.default.createElement("button","rmp-button rmp-overlay-level rmp-color-bg rmp-q"+(t+1),null,this.rtl);M.default.make.call(this,i,this.labels.hint.quality+" "+(t+1),!0);let s="";if(e[t])if(this.hlsJSUseManifestRenditionName&&"string"==typeof e[t].name&&""!==e[t].name)s+=e[t].name,b.default.setText(i,s);else if("number"==typeof e[t].bitrate||"number"==typeof e[t].height){if("number"==typeof e[t].height&&e[t].height>0&&(s="on",i.appendChild(E.default.getHeight.call(this,e[t]))),"number"==typeof e[t].bitrate&&e[t].bitrate>1e4&&("kbps"===this.bitrateDataDisplayed||"mbps"===this.bitrateDataDisplayed))if(s="on","number"==typeof e[t].height&&e[t].height>0){let a=document.createElement("span");a.textContent=" "+this.uiSeparator+" ",i.appendChild(a),i.appendChild(E.default.getBandwidth.call(this,e[t].bitrate))}else i.appendChild(E.default.getBandwidth.call(this,e[t].bitrate));""===s&&"number"==typeof e[t].bitrate&&e[t].bitrate>1e4&&(s="on","none"===this.bitrateDataDisplayed&&(this.bitrateDataDisplayed="kbps"),i.appendChild(E.default.getBandwidth.call(this,e[t].bitrate)))}""===s&&(s+="Level "+(t+1),b.default.setText(i,s)),b.default.addEvent(["touchend","click"],i,(0,h.default)(a=j.default.selectRendition).call(a,this,t+1)),this.dom.qualityOverlayLevelsArea.appendChild(i)}}},O=function(){let e=!1;this.hasExternalCCFiles&&(this.hlsJSEnableCaptions=!1,this.hlsJSrenderTextTracksNatively=!1);let t=A.default.getBandwidthEstimate();t<=0&&(t=v.default.fallbackArbitraryBWEstimate);const a={debug:e,autoStartLoad:!0,emeEnabled:!1,capLevelToPlayerSize:this.hlsJSCapLevelToPlayerSize,capLevelOnFPSDrop:this.hlsJSCapLevelOnFPSDrop,maxBufferLength:this.hlsJSMaxBufferLength,maxBufferSize:this.hlsJSMaxBufferSize,minAutoBitrate:this.hlsJSMinAutoBitrate,maxAudioFramesDrift:this.hlsJSMaxAudioFramesDrift,abrEwmaDefaultEstimate:t,abrBandWidthFactor:this.hlsJSAbrBandWidthFactor,abrBandWidthUpFactor:this.hlsJSAbrBandWidthUpFactor,enableCEA708Captions:this.hlsJSEnableCaptions,enableWebVTT:this.hlsJSEnableCaptions,renderTextTracksNatively:this.hlsJSrenderTextTracksNatively,captionsTextTrack1Label:this.hlsJSCaptionsTextTrack1Label,captionsTextTrack1LanguageCode:"cc1",captionsTextTrack2Label:this.hlsJSCaptionsTextTrack2Label,captionsTextTrack2LanguageCode:"cc2",captionsTextTrack3Label:this.hlsJSCaptionsTextTrack3Label,captionsTextTrack3LanguageCode:"cc3",captionsTextTrack4Label:this.hlsJSCaptionsTextTrack4Label,captionsTextTrack4LanguageCode:"cc4",initialLiveManifestSize:this.hlsJSInitialLiveManifestSize,liveBackBufferLength:this.hlsJSLiveBackBufferLength,liveSyncDurationCount:this.hlsJSLiveSyncDurationCount,liveMaxLatencyDurationCount:this.hlsJSLiveMaxLatencyDurationCount,liveSyncDuration:this.hlsJSLiveSyncDuration,liveMaxLatencyDuration:this.hlsJSLiveMaxLatencyDuration,manifestLoadingTimeOut:this.retryParameters.manifest.timeout,manifestLoadingMaxRetryTimeout:this.retryParameters.manifest.maxTimeout,manifestLoadingMaxRetry:this.retryParameters.manifest.maxAttempts-1,manifestLoadingRetryDelay:this.retryParameters.manifest.delay,levelLoadingTimeOut:this.retryParameters.levels.timeout,levelLoadingMaxRetryTimeout:this.retryParameters.levels.maxTimeout,levelLoadingMaxRetry:this.retryParameters.levels.maxAttempts-1,levelLoadingRetryDelay:this.retryParameters.levels.delay,fragLoadingTimeOut:this.retryParameters.segment.timeout,fragLoadingMaxRetryTimeout:this.retryParameters.segment.maxTimeout,fragLoadingMaxRetry:this.retryParameters.segment.maxAttempts-1,fragLoadingRetryDelay:this.retryParameters.segment.delay};if("mp4a.40.2"!==this.hlsJSDefaultAudioCodec&&"mp4a.40.5"!==this.hlsJSDefaultAudioCodec||(a.defaultAudioCodec=this.hlsJSDefaultAudioCodec),this.hlsJSFetchXhrWithCredentials&&(a.xhrSetup=function(e){e.withCredentials=!0},a.fetchSetup=function(e,t){return t.credentials="include",new Request(e.url,t)}),this.hlsJSAppleAppStoreCompliance&&(a.minAutoBitrate=192001,this.hlsJSStartLevel=-1),a.startLevel=-1,this.hlsJSStartLevel>=0&&(a.startLevel=(0,c.default)(this.hlsJSStartLevel)),!b.default.isEmptyObject(this.hlsJSCustomConfig)){const e=(0,d.default)(this.hlsJSCustomConfig);for(let t=0,i=e.length;t<i;t++){const i=e[t];a[i]=this.hlsJSCustomConfig[i]}0}return a},F=function(){this.hlsJS.loadSource(this.startingBitratePath)},V=function(){if(this.hideModule.captions)b.default.clearInterval(this.hlsTextTracksCheckingInterval);else if(this.dom.video.textTracks.length>0&&(b.default.clearInterval(this.hlsTextTracksCheckingInterval),this.textTracks=b.default.filterTextTracks(this.dom.video.textTracks),this.textTracks.length>0)){for(let e=0,t=this.textTracks.length;e<t;e++){const t=this.textTracks[e];this.loadedCCFiles[e]=[];let a=t.language||t.lang;a||(a="CC"+(e+1)),this.loadedCCFiles[e].push(a),C.default.appendCCContainer.call(this,a,e);let i=t.label||t.name;i||(i=a),this.loadedCCFiles[e].push(i);const s=this.hlsJS.subtitleTracks,r=(0,l.default)(s).call(s,e=>!0===e.default);r>-1&&r===e&&(this.loadedCCFiles[e].push(""),this.loadedCCFiles[e].push("default"))}S.default.appendUI.call(this)}},B=function(){this.dom.container.removeEventListener("loadedmetadata",this.hlsJSHandleCCTracks),this.hlsJS.subtitleTracks.length>0?V.call(this):this.hlsTextTracksCheckingInterval=(0,o.default)((0,h.default)(V).call(V,this),1e3)},q=function(){this.hlsStopLoad()},U=function(){this.hlsStartLoad()},H=function(){this.dom.container.removeEventListener("playing",this.hlsOnFirstPlaying),this.hlsOnPauseStopLoad=(0,h.default)(q).call(q,this),this.dom.container.addEventListener("pause",this.hlsOnPauseStopLoad),this.hlsOnPlayStartLoad=(0,h.default)(U).call(U,this),this.dom.container.addEventListener("play",this.hlsOnPlayStartLoad)},N=function(){this.hlsJS.off(Hls.Events.MANIFEST_PARSED,this.hlsManifestParsed),D.call(this),b.default.createStdEvent("hlsmanifestparsed",this.dom.container)},_=function(){let e=-1;try{e=this.hlsJS.currentLevel}catch(t){b.default.trace(t)}if(e>-1&&this.dom.qualityOverlayLevelsArea){const t=this.dom.qualityOverlayLevelsArea.querySelectorAll(".rmp-overlay-level");if(t.length>0){for(let e=0,a=t.length;e<a;e++)b.default.removeClass(t[e],"rmp-abr-active");b.default.addClass(t[e+1],"rmp-abr-active"),E.default.updateQualityModuleIcon.call(this,t[e+1])}}};x.initFinised=function(){this.initHLSJS=(0,h.default)(F).call(F,this),this.hlsJS.attachMedia(this.dom.video),this.readingHlsHevc?E.default.checkStreams.call(this,this.initHLSJS,this.backupSrc,"hlsHevc"):E.default.checkStreams.call(this,this.initHLSJS,this.backupSrc,"hls"),this.msePreloadCompleted=!0,this.muxData&&!this.muxDataHlsJSMonitored&&P.default.initHlsJS.call(this),b.default.createStdEvent("hlsinstancecreated",this.dom.container)};const W=function(){if("undefined"==typeof Hls)k.default.fatal.call(this,"failed to load required lib hls.js",200,null);else{const e=O.call(this);if(this.hlsJS=new Hls(e),this.hasStreamroot&&"undefined"!=typeof HlsjsDnaWrapper&&(this.streamrootWrapper=new HlsjsDnaWrapper(this.hlsJS,this.streamrootConfig.streamrootKey,this.streamrootConfig.dnaConfig)),this.hlsManifestParsed=(0,h.default)(N).call(N,this),this.hlsJS.on(Hls.Events.MANIFEST_PARSED,this.hlsManifestParsed),this.hlsJSStopDownloadWhilePaused&&(this.hlsOnFirstPlaying=(0,h.default)(H).call(H,this),this.dom.container.addEventListener("playing",this.hlsOnFirstPlaying)),this.hlsJS.on(Hls.Events.FRAG_LOADED,(e,t)=>{t&&void 0!==t.frag&&(this.hlsFragmentData=t.frag,b.default.createStdEvent("hlsfragmentloaded",this.dom.container))}),_.call(this),b.default.clearInterval(this.hlsJSAbrInterval),this.hlsJSAbrInterval=(0,o.default)((0,h.default)(_).call(_,this),1e3),this.hlsJS.on(Hls.Events.LEVEL_SWITCHING,()=>{b.default.createStdEvent("levelswitching",this.dom.container)}),this.hlsJS.on(Hls.Events.LEVEL_SWITCHED,()=>{b.default.createStdEvent("hlslevelswitched",this.dom.container)}),this.hlsJS.on(Hls.Events.LEVEL_LOADED,(e,t)=>{void 0!==t.details&&(this.hlsLevelData=t.details,this.detectLive&&!this.isLiveDvr&&(void 0!==this.hlsLevelData.live&&this.hlsLevelData.live?y.default.setLive.call(this):I.default.appendSeekBar.call(this),this.detectLive=!1),b.default.createStdEvent("hlslevelloaded",this.dom.container))}),this.hlsJS.on(Hls.Events.MANIFEST_LOADED,(e,t)=>{void 0!==t&&(this.hlsManifestData.levels=[],this.hlsManifestData.audioTracks=[],this.hlsManifestData.subtitles=[],this.hlsManifestData.captions=[],(0,m.default)(t.levels)&&(this.hlsManifestData.levels=t.levels),(0,m.default)(t.audioTracks)&&(this.hlsManifestData.audioTracks=t.audioTracks),(0,m.default)(t.subtitles)&&(this.hlsManifestData.subtitles=t.subtitles),(0,m.default)(t.captions)&&(this.hlsManifestData.captions=t.captions),"object"==typeof t.sessionData&&(this.hlsSessionData=t.sessionData)),b.default.createStdEvent("hlsmanifestloaded",this.dom.container)}),this.hlsJS.on(Hls.Events.FRAG_CHANGED,(e,t)=>{t&&void 0!==t.frag&&(this.hlsFragmentBeingPlayed=t.frag,b.default.createStdEvent("hlsfragmentbeingplayedchanged",this.dom.container),"number"==typeof t.frag.programDateTime&&(this.meta.type="program-date-time",this.meta.data={},this.meta.data.programDateTime=t.frag.programDateTime,"number"==typeof t.frag.endProgramDateTime&&(this.meta.data.endProgramDateTime=t.frag.endProgramDateTime),"string"==typeof t.frag.rawProgramDateTime&&(this.meta.data.rawProgramDateTime=t.frag.rawProgramDateTime),"number"==typeof t.frag.start&&(this.meta.data.start=t.frag.start),"number"==typeof t.frag.duration&&"number"==typeof t.frag.start&&(this.meta.data.end=t.frag.duration+t.frag.start),b.default.createStdEvent("meta",this.dom.container,this.meta)))}),this.hlsJSEnableCaptions&&(C.default.init.call(this),this.hlsJSHandleCCTracks=(0,h.default)(B).call(B,this),this.dom.container.addEventListener("loadedmetadata",this.hlsJSHandleCCTracks)),this.hlsJS.on(Hls.Events.FRAG_PARSING_DATA,(e,t)=>{if("video"===t.type&&"number"==typeof t.nb&&"number"==typeof t.endPTS&&"number"==typeof t.startPTS){let e=this.frameRate;this.frameRate=b.default.precisionRound(t.nb/(t.endPTS-t.startPTS),2),e!==this.frameRate&&b.default.createStdEvent("frameratechange",this.dom.container)}}),this.hlsJS.on(Hls.Events.FRAG_PARSING_USERDATA,(e,t)=>{t&&void 0!==t.samples&&(this.meta.type="sei",this.meta.data={},this.meta.data.samples=t.samples,b.default.createStdEvent("meta",this.dom.container,this.meta))}),this.hlsJS.on(Hls.Events.AUDIO_TRACK_SWITCHING,()=>{b.default.createStdEvent("audiotrackswitching",this.dom.container),b.default.createStdEvent("hlsaudiotrackswitching",this.dom.container)}),this.hlsJS.on(Hls.Events.AUDIO_TRACK_SWITCHED,()=>{b.default.createStdEvent("audiotrackswitched",this.dom.container),b.default.createStdEvent("hlsaudiotrackswitched",this.dom.container)}),this.hlsJSAttachMultiAudio=(0,h.default)(R).call(R,this),this.hlsJS.on(Hls.Events.AUDIO_TRACKS_UPDATED,this.hlsJSAttachMultiAudio),this.isLiveDvr&&this.hlsJS.on(Hls.Events.LEVEL_LOADED,(e,t)=>{t&&t.details&&"number"==typeof t.details.totalduration&&(this.hlsJSLevelDuration=t.details.totalduration)}),this.adImaDai)return void T.default.init.call(this);let t=0,a=0,i=0,s=null;const l=[Hls.ErrorDetails.MANIFEST_LOAD_ERROR,Hls.ErrorDetails.MANIFEST_LOAD_TIMEOUT],d=[Hls.ErrorDetails.LEVEL_LOAD_ERROR,Hls.ErrorDetails.LEVEL_LOAD_TIMEOUT,Hls.ErrorDetails.FRAG_LOAD_ERROR,Hls.ErrorDetails.FRAG_LOAD_TIMEOUT];let c=0,u=null,p=!1,f=function(){this.dom.container.removeEventListener("playing",this.onPlayingCurrentLevelResetTried),p=!1};this.onPlayingCurrentLevelResetTried=(0,h.default)(f).call(f,this),this.hlsJS.on(Hls.Events.ERROR,(e,o)=>{if(b.default.isObject(o)&&"boolean"==typeof o.fatal&&o.details&&o.type){const e=o.fatal,f=o.type,m=o.details;if(e)if(f===Hls.ErrorTypes.NETWORK_ERROR){0;const e=(0,n.default)(l).call(l,m)>-1,t=(0,n.default)(d).call(d,m)>-1;if((this.isLive||this.isLiveDvr&&this.dvrLiveMode)&&(e||t))if(c<this.liveRetries){if(null===u&&(u=function(){this.hlsJS.off(Hls.Events.LEVEL_LOADED,this.hlsJSOnLiveRetriesSuccess),this.hlsJS.off(Hls.Events.MANIFEST_LOADED,this.hlsJSOnLiveRetriesSuccess),this.hlsJS.off(Hls.Events.FRAG_LOADED,this.hlsJSOnLiveRetriesSuccess),c=0,u=null},this.hlsJSOnLiveRetriesSuccess=(0,h.default)(u).call(u,this),this.hlsJS.on(Hls.Events.LEVEL_LOADED,this.hlsJSOnLiveRetriesSuccess),this.hlsJS.on(Hls.Events.MANIFEST_LOADED,this.hlsJSOnLiveRetriesSuccess),this.hlsJS.on(Hls.Events.FRAG_LOADED,this.hlsJSOnLiveRetriesSuccess)),e){if(!this.hasLoadedMetadata)return void k.default.fatal.call(this,"hls.js error - cannot recover",201,o);b.default.clearTimeout(this.hlsJSErrorRetryTimeout),this.hlsJSErrorRetryTimeout=(0,r.default)(()=>{this.dom.quality&&w.default.destroy.call(this),this.dom.audio&&L.default.destroy.call(this,"audio"),this.dom.captions&&S.default.destroy.call(this),this.hlsJS.loadSource(this.startingBitratePath)},400)}else b.default.clearTimeout(this.hlsJSErrorRetryTimeout),this.hlsJSErrorRetryTimeout=(0,r.default)(()=>{this.hlsJS.startLoad()},400);c++}else k.default.fatal.call(this,"hls.js error - cannot recover",201,o);else if(e||m===Hls.ErrorDetails.MANIFEST_PARSING_ERROR)k.default.fatal.call(this,"hls.js error - cannot recover",201,o);else if(t){const e=this.getBitrates();if(m===Hls.ErrorDetails.LEVEL_LOAD_ERROR&&1===e.length)i=0,k.default.fatal.call(this,"hls.js error - cannot recover",201,o);else if(i<3){0===i&&null===s&&(s=function(){i>0&&(i=0)},this.hlsJS.on(Hls.Events.LEVEL_LOADED,s)),i++;const t=b.default.getRandomInt(0,e.length);0,this.hlsJS.currentLevel=t}else i=0,k.default.fatal.call(this,"hls.js error - cannot recover",201,o)}else b.default.clearTimeout(this.hlsJSErrorRetryTimeout),this.hlsJSErrorRetryTimeout=(0,r.default)(()=>{this.hlsJS.startLoad()},400)}else if(f===Hls.ErrorTypes.MEDIA_ERROR){if(m===Hls.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR)return void k.default.fatal.call(this,"hls.js error - cannot recover",201,o);const e=b.default.getNow();0===t||e-t>3e3?(t=b.default.getNow(),this.hlsJS.config.capLevelToPlayerSize?(this.hlsJS.config.capLevelToPlayerSize=!1,t=0,this.hlsJS.autoLevelCapping=-1,this.hlsJS.recoverMediaError()):p?(this.dom.container.removeEventListener("playing",this.onPlayingCurrentLevelResetTried),this.hlsJS.recoverMediaError()):(p=!0,this.dom.container.addEventListener("playing",this.onPlayingCurrentLevelResetTried),t=0,this.hlsJS.currentLevel=0,this.hlsJS.recoverMediaError())):0===a||e-a>3e3?(a=b.default.getNow(),this.hlsJS.swapAudioCodec(),this.hlsJS.recoverMediaError()):k.default.fatal.call(this,"hls.js error - cannot recover",201,o)}else k.default.fatal.call(this,"hls.js error - cannot recover",201,o);else k.default.warning.call(this,"hls.js warning",2e3,o)}}),x.initFinised.call(this)}},z=function(){if("undefined"!=typeof Hls)W.call(this);else{var e;let t=this.pathToRmpFiles+"hls/hls.min.js";0,b.default.getScript(t,(0,h.default)(W).call(W,this),(0,h.default)(e=k.default.fatal).call(e,this,"failed to load required lib hls.js",200,null))}};x.init=function(){if(this.msePreloadRequested)this.msePreloadRequested=!1;else if(!b.default.isEmptyObject(this.streamrootConfig)&&this.streamrootConfig.streamrootKey&&"hlsjs"===this.streamrootConfig.type)if(this.hasStreamroot=!0,"undefined"!=typeof HlsjsDnaWrapper)z.call(this);else{let e="https://cdn.streamroot.io/hlsjs-dna-wrapper/1/stable/hlsjs-dna-wrapper.js";b.default.getScript(e,(0,h.default)(z).call(z,this),(0,h.default)(z).call(z,this))}else z.call(this)};var J=x;a.default=J},{"../../externals/rmp-connection":1,"../abr/abr-shared":3,"../ads/ima-dai":11,"../analytics/mux":16,"../core/accessible/accessible":31,"../core/dom":32,"../core/modules/modules":39,"../core/modules/quality":41,"../core/ui/core-ui":52,"../core/utils/error":56,"../core/utils/utils":59,"../fw/env":69,"../fw/fw":70,"../vtt/captions":75,"../vtt/native-captions":76,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/filter":82,"@babel/runtime-corejs3/core-js-stable/instance/find-index":83,"@babel/runtime-corejs3/core-js-stable/instance/includes":86,"@babel/runtime-corejs3/core-js-stable/instance/index-of":87,"@babel/runtime-corejs3/core-js-stable/instance/sort":90,"@babel/runtime-corejs3/core-js-stable/instance/splice":91,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/object/keys":99,"@babel/runtime-corejs3/core-js-stable/parse-int":101,"@babel/runtime-corejs3/core-js-stable/set-interval":103,"@babel/runtime-corejs3/core-js-stable/set-timeout":104,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.regexp.to-string":435}],6:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/set-interval")),r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("@babel/runtime-corejs3/core-js-stable/number/is-finite")),o=i(e("../fw/fw")),l=i(e("../core/modules/modules")),d=i(e("../core/accessible/accessible")),c=i(e("../abr/abr-shared")),u=i(e("../vtt/captions"));const h={},p=function(){"number"==typeof this.dom.video.videoHeight&&(0,n.default)(this.dom.video.videoHeight)&&this.dom.video.videoHeight>0&&o.default.createStdEvent("levelswitching",this.dom.container)},f=function(){this.dom.video.removeEventListener("loadeddata",this.nativeHlsSetUpAudioTracks);const e=this.dom.video.audioTracks;if(e&&e.length>1&&!this.hideModule.audio){let a;0,l.default.append.call(this,"audio"),l.default.appendOverlay.call(this,"audio"),l.default.deferredShow.call(this,"audio");for(let i=0;i<e.length;i++){var t;const s=e[i];let n;n="main"===s.kind?"rmp-button rmp-overlay-level rmp-color-bg rmp-overlay-level-active":"rmp-button rmp-overlay-level rmp-color-bg";let l="";l="string"==typeof s.label&&""!==s.label?s.label:"string"==typeof s.language&&""!==s.language?s.language:"Audio "+i,a=o.default.createElement("button",n,l,this.rtl),d.default.make.call(this,a,l,!0),o.default.addEvent(["touchend","click"],a,(0,r.default)(t=c.default.selectAudioTrack).call(t,this,i)),this.dom.audioOverlayLevelsArea.appendChild(a)}}};h.hideAllCaptions=function(){for(let e=0,t=this.textTracks.length;e<t;e++)this.textTracks[e].mode="hidden"},h.showCaptions=function(e){h.hideAllCaptions.call(this),this.textTracks[e].mode="showing"};const m=function(){if(this.dom.video.textTracks.length>0&&(o.default.clearInterval(this.hlsTextTracksCheckingInterval),this.readingCaptionsFromNativeHls=!0,o.default.addClass(this.dom.container,"rmp-native-hls-captions"),this.textTracks=o.default.filterTextTracks(this.dom.video.textTracks),this.textTracks.length>0)){for(let e=0,t=this.textTracks.length;e<t;e++){const t=this.textTracks[e];this.loadedCCFiles[e]=[];let a=t.language||t.lang;a||(a="CC"+(e+1)),this.loadedCCFiles[e].push(a);let i=t.label||t.name;i||(i=a),this.loadedCCFiles[e].push(i)}u.default.appendUI.call(this)}},g=function(){this.dom.video.removeEventListener("loadeddata",this.nativeHlsSetUpCCTracks),this.hideModule.captions||(this.dom.video.textTracks.length>0?m.call(this):this.hlsTextTracksCheckingInterval=(0,s.default)((0,r.default)(m).call(m,this),1e3))};h.init=function(){this.nativeHlsResizeLevelSwitch=(0,r.default)(p).call(p,this),this.dom.video.addEventListener("resize",this.nativeHlsResizeLevelSwitch),this.nativeHlsSetUpAudioTracks=(0,r.default)(f).call(f,this),this.dom.video.addEventListener("loadeddata",this.nativeHlsSetUpAudioTracks),this.hasExternalCCFiles||(this.nativeHlsSetUpCCTracks=(0,r.default)(g).call(g,this),this.dom.video.addEventListener("loadeddata",this.nativeHlsSetUpCCTracks))};var b=h;a.default=b},{"../abr/abr-shared":3,"../core/accessible/accessible":31,"../core/modules/modules":39,"../fw/fw":70,"../vtt/captions":75,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/number/is-finite":95,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/set-interval":103,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],7:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.regexp.to-string"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("@babel/runtime-corejs3/core-js-stable/object/keys")),o=i(e("@babel/runtime-corejs3/core-js-stable/parse-int")),l=i(e("@babel/runtime-corejs3/core-js-stable/instance/sort")),d=i(e("@babel/runtime-corejs3/core-js-stable/instance/filter")),c=i(e("@babel/runtime-corejs3/core-js-stable/instance/for-each")),u=i(e("@babel/runtime-corejs3/core-js-stable/instance/find")),h=i(e("../fw/fw")),p=i(e("../core/modules/quality")),f=i(e("../vtt/captions")),m=i(e("./shaka/configuration")),g=i(e("../core/ui/core-ui")),b=i(e("../core/dom")),v=i(e("../abr/abr-shared")),y=i(e("../core/utils/utils")),k=i(e("../core/utils/error")),w=i(e("../core/modules/modules")),S=i(e("../api/offline")),C=i(e("../core/accessible/accessible")),j=i(e("../fw/env"));const E={},L=function(){const e=this.shakaPlayer.getVariantTracks(),t=(0,u.default)(e).call(e,e=>!0===e.active);return t?t.language:e[0].language},A=function(){const e=this.shakaPlayer.getVariantTracks();if(e.length>0)for(let t=0,a=e.length;t<a;t++){const a=e[t];if(a.active&&"number"==typeof a.frameRate&&a.frameRate>0){let e=this.frameRate;this.frameRate=h.default.precisionRound(a.frameRate,2),e!==this.frameRate&&h.default.createStdEvent("frameratechange",this.dom.container)}}},T=function(){var e;this.variantsAudioLng=this.shakaPlayer.getAudioLanguages();const t=this.shakaPlayer.getVariantTracks();this.variantsPerLng=[],(0,c.default)(e=this.variantsAudioLng).call(e,e=>{const a=(0,d.default)(t).call(t,t=>t.language===e);(0,l.default)(a).call(a,(e,t)=>e.bandwidth-t.bandwidth);let i={};i[e]=a,this.variantsPerLng.push(i)}),this.hasExternalCCFiles||(this.shakaTextTracks=this.shakaPlayer.getTextTracks())},P=function(){const e=this.shakaPlayer.getVariantTracks();if(e.length>0&&this.dom.qualityOverlayLevelsArea){const t=this.dom.qualityOverlayLevelsArea.querySelectorAll(".rmp-overlay-level");if(t.length>0){for(let e=0,a=t.length;e<a;e++)h.default.removeClass(t[e],"rmp-abr-active");for(let a=0,i=e.length;a<i;a++){const i=e[a];if(i.active){const e=this.shakaCurrentLevel;this.audioOnly?i.audioBandwidth?this.shakaCurrentLevel=i.audioBandwidth:i.bandwidth&&(this.shakaCurrentLevel=i.bandwidth):i.videoBandwidth?this.shakaCurrentLevel=i.videoBandwidth:i.bandwidth&&(this.shakaCurrentLevel=i.bandwidth),null!==e&&this.shakaCurrentLevel===e||h.default.createStdEvent("levelswitching",this.dom.container);for(let a=0,s=t.length;a<s;a++){const e=t[a],s=e.getAttribute("data-track-id");if(s&&(0,o.default)(s)===i.id){h.default.addClass(e,"rmp-abr-active"),y.default.updateQualityModuleIcon.call(this,e);break}}break}}}}};E.setUpVideoRenditions=function(){var e;this.shakaVideoRenditions=[];const t=L.call(this);let a=(0,d.default)(e=this.variantsPerLng).call(e,e=>(0,n.default)(e)[0]===t);a=void 0!==a[0][t]?a[0][t]:[],(0,l.default)(a).call(a,(e,t)=>e.height&&t.height?e.height-t.height:0);for(let s=0,r=a.length;s<r;s++){const e=a[s],t=h.default.createElement("button","rmp-button rmp-overlay-level rmp-color-bg rmp-q"+(s+1),null,this.rtl);C.default.make.call(this,t,this.labels.hint.quality+" "+(s+1),!0),t.setAttribute("data-track-id",e.id),this.shakaVideoRenditions.push(e.id);let i=!1;const r=e.height;if("number"==typeof r&&r>0&&(i=!0,t.appendChild(y.default.getHeight.call(this,e))),"number"==typeof e.bandwidth&&e.bandwidth>10&&("kbps"===this.bitrateDataDisplayed||"mbps"===this.bitrateDataDisplayed))if(i=!0,r){let a=document.createElement("span");a.textContent=" "+this.uiSeparator+" ",t.appendChild(a),t.appendChild(y.default.getBandwidth.call(this,e.bandwidth))}else t.appendChild(y.default.getBandwidth.call(this,e.bandwidth));i||(i+="Level "+(s+1),h.default.setText(t,i)),this.dom.qualityOverlayLevelsArea.appendChild(t)}if(this.dom.qualityOverlayLevelsArea){const e=this.dom.qualityOverlayLevelsArea.querySelectorAll(".rmp-overlay-level");for(let t=0,a=e.length;t<a;t++){var i;h.default.addEvent(["touchend","click"],e[t],(0,r.default)(i=v.default.selectRendition).call(i,this,t))}}P.call(this)};const M=function(){w.default.append.call(this,"audio"),w.default.appendOverlay.call(this,"audio"),w.default.deferredShow.call(this,"audio");const e=L.call(this);for(let a=0;a<this.variantsAudioLng.length;a++){var t;const i=this.variantsAudioLng[a],s=document.createElement("button");s.className=i===e?"rmp-button rmp-overlay-level rmp-color-bg rmp-overlay-level-active":"rmp-button rmp-overlay-level rmp-color-bg";let n="Audio "+a;"und"!==i&&(n=i),h.default.setText(s,n),C.default.make.call(this,s,n,!0),h.default.addEvent(["touchend","click"],s,(0,r.default)(t=v.default.selectAudioTrack).call(t,this,a)),this.dom.audioOverlayLevelsArea.appendChild(s)}},I=function(){if(this.textTracks=h.default.filterTextTracks(this.shakaTextTracks),this.textTracks.length>0){0;for(let e=0,t=this.textTracks.length;e<t;e++){const t=this.textTracks[e];this.loadedCCFiles[e]=[];let a=t.language||t.lang;a||(a="CC"+(e+1)),this.loadedCCFiles[e].push(a);let i=t.label||t.name;i||(i=a),this.loadedCCFiles[e].push(i)}if(j.default.isIos[0]||j.default.isMacosSafari[0]||j.default.isIpadOS){let e=".rmp-chrome video.rmp-video::-webkit-media-text-track-container { top: -20px; bottom: auto; } ";e+=".rmp-no-chrome video.rmp-video::-webkit-media-text-track-container { top: 0; bottom: auto; } ",e+="video.rmp-video::-webkit-media-text-track-container { margin: 0; }",h.default.appendStyle(e)}f.default.appendUI.call(this)}},x=function(){T.call(this),this.variantsPerLng.length>0&&(this.hideModule.quality||(v.default.setUpAbrUI.call(this),E.setUpVideoRenditions.call(this)),this.variantsPerLng.length>1&&!this.hideModule.audio&&M.call(this),!this.hasExternalCCFiles&&this.shakaTextTracks.length>0&&!this.hideModule.captions&&I.call(this))},R=function(){this.dom.quality&&p.default.destroy.call(this),this.dom.audio&&w.default.destroy.call(this,"audio"),this.hasExternalCCFiles||this.dom.captions&&f.default.destroy.call(this),x.call(this),h.default.createStdEvent("shakatrackschanged",this.dom.container)},D=function(){this.shakaPlayer.getConfiguration().abr.enabled&&P.call(this)};let O=0;const F=function(){this.dom.container.removeEventListener("playing",this.shakaOnPlayingResetRetriesCount),O=0},V=function(e){if(e){let t=e;e&&e.detail&&(t=e.detail),t&&"number"==typeof t.severity&&(2===t.severity?k.default.fatal.call(this,"Shaka player error - cannot recover",301,t):1===t.severity&&(1===t.category&&this.isLive&&this.hasLoadedMetadata?O<this.liveRetries?(0===O&&(this.shakaOnPlayingResetRetriesCount=(0,r.default)(F).call(F,this),this.dom.container.addEventListener("playing",this.shakaOnPlayingResetRetriesCount)),O++):(this.dom.container.removeEventListener("playing",this.shakaOnPlayingResetRetriesCount),k.default.fatal.call(this,"Shaka player error - cannot recover",301,t)):k.default.warning.call(this,"Shaka player warning",3e3,t)))}};E.destroy=function(){this.shakaPlayer&&(this.shakaPlayer.removeEventListener("error",this.shakaError),this.shakaPlayer.removeEventListener("adaptation",this.shakaAdaptationChanged),this.shakaPlayer.removeEventListener("trackschanged",this.shakaTracksChanged),this.shakaPlayer.removeEventListener("shakamanifestparsed",this.shakaManifestParsed),this.shakaPlayer.removeEventListener("adaptation",this.shakaFramerateCheck),this.shakaPlayer.removeEventListener("variantchanged",this.shakaFramerateCheck)),this.dom.container&&this.dom.container.removeEventListener("playing",this.shakaOnPlayingResetRetriesCount),this.dom.video&&this.dom.video.removeEventListener("durationchange",this.shakaDurationChange)};const B=function(){if(this.detectLive&&!this.isLiveDvr){const e=this.shakaPlayer.isLive();0,e?g.default.setLive.call(this):b.default.appendSeekBar.call(this),this.detectLive=!1}},q=function(){B.call(this),h.default.createStdEvent("shakamanifestparsed",this.dom.container)},U=function(){let e;this.shakaPlayer=new shaka.Player(this.dom.video),this.hasStreamroot&&"undefined"!=typeof ShakaPlayerDnaWrapper&&(this.streamrootWrapper=new ShakaPlayerDnaWrapper(this.shakaPlayer,this.streamrootConfig.streamrootKey,this.streamrootConfig.dnaConfig)),e=h.default.isEmptyObject(this.shakaCustomConfig)?m.default.initial.call(this):this.shakaCustomConfig,this.shakaPlayer.configure(e),null!==this.shakaCustomRequestFilter?this.shakaPlayer.getNetworkingEngine().registerRequestFilter(this.shakaCustomRequestFilter):h.default.isEmptyObject(this.shakaRequestConfiguration)||m.default.request.call(this),this.shakaError=(0,r.default)(V).call(V,this),this.shakaPlayer.addEventListener("error",this.shakaError),this.shakaAdaptationChanged=(0,r.default)(D).call(D,this),this.shakaPlayer.addEventListener("adaptation",this.shakaAdaptationChanged),this.shakaFramerateCheck=(0,r.default)(A).call(A,this),this.shakaPlayer.addEventListener("adaptation",this.shakaFramerateCheck),this.shakaPlayer.addEventListener("variantchanged",this.shakaFramerateCheck),this.shakaTracksChanged=(0,r.default)(R).call(R,this),this.shakaPlayer.addEventListener("trackschanged",this.shakaTracksChanged),this.shakaManifestParsed=(0,r.default)(q).call(q,this),this.shakaPlayer.addEventListener("manifestparsed",this.shakaManifestParsed),this.shakaDurationChange=(0,r.default)(B).call(B,this),this.dom.video.addEventListener("durationchange",this.shakaDurationChange),this.shakaOffline&&this.isVod&&(this.hasDownloadSupport()?S.default.init.call(this):k.default.warning.call(this,"offline storage is not supported in this environment",3007,null)),this.shakaPlayer.load(this.startingBitratePath).catch(this.shakaError),this.msePreloadCompleted=!0,h.default.createStdEvent("shakainstancecreated",this.dom.container)},H=function(){"undefined"!=typeof shaka?(shaka.polyfill.installAll(),shaka.Player.isBrowserSupported()?this.readingDash?y.default.checkStreams.call(this,(0,r.default)(U).call(U,this),this.backupSrc,"dash"):this.readingHlsShaka&&(this.readingHlsHevc?y.default.checkStreams.call(this,(0,r.default)(U).call(U,this),this.backupSrc,"hlsHevc"):y.default.checkStreams.call(this,(0,r.default)(U).call(U,this),this.backupSrc,"hls")):k.default.fatal.call(this,"shaka.Player.isBrowserSupported returned false - cannot use Shaka player in this environment",302,null)):k.default.fatal.call(this,"failed to load required lib Shaka player",300,null)},N=function(){if("undefined"!=typeof shaka)H.call(this);else{var e;let t=this.pathToRmpFiles+"dash/shaka-player.compiled.js";0,h.default.getScript(t,(0,r.default)(H).call(H,this),(0,r.default)(e=k.default.fatal).call(e,this,"failed to load required lib Shaka player",300,null))}};E.init=function(){if(this.msePreloadRequested)this.msePreloadRequested=!1;else if(!h.default.isEmptyObject(this.streamrootConfig)&&this.streamrootConfig.streamrootKey&&"shakaplayer"===this.streamrootConfig.type)if(this.hasStreamroot=!0,"undefined"!=typeof ShakaPlayerDnaWrapper)N.call(this);else{let e="https://cdn.streamroot.io/shakaplayer-dna-wrapper/1/stable/shakaplayer-dna-wrapper.js";h.default.getScript(e,(0,r.default)(N).call(N,this),(0,r.default)(N).call(N,this))}else N.call(this)};var _=E;a.default=_},{"../abr/abr-shared":3,"../api/offline":24,"../core/accessible/accessible":31,"../core/dom":32,"../core/modules/modules":39,"../core/modules/quality":41,"../core/ui/core-ui":52,"../core/utils/error":56,"../core/utils/utils":59,"../fw/env":69,"../fw/fw":70,"../vtt/captions":75,"./shaka/configuration":8,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/filter":82,"@babel/runtime-corejs3/core-js-stable/instance/find":84,"@babel/runtime-corejs3/core-js-stable/instance/for-each":85,"@babel/runtime-corejs3/core-js-stable/instance/sort":90,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/object/keys":99,"@babel/runtime-corejs3/core-js-stable/parse-int":101,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.regexp.to-string":435}],8:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/object/keys")),r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("../../fw/fw")),o=i(e("../../fw/env")),l=i(e("../../../externals/rmp-connection"));const d={},c=function(e){let t=o.default.devicePixelRatio;t<=1&&!this.getFullscreen()&&(t=1.25);const a=this.getPlayerWidth()*t,i=this.getPlayerHeight()*t;if(a>0&&i>0){const t={maxWidth:a,maxHeight:i};return e?(e.abr.restrictions=t,e):{abr:{restrictions:t}}}return null},u=function(){const e=c.call(this,null);e&&this.shakaPlayer.configure(e)};d.initial=function(){let e={abr:{},drm:{},manifest:{},restrictions:{},streaming:{}},t={},a=this.shakaStartLevel,i=null;if(a<0&&(i=l.default.getBandwidthEstimate(),i>0&&(a=Math.round(1e3*i*1e3))),null===i&&(a=o.default.fallbackArbitraryBWEstimate),e.abr.defaultBandwidthEstimate=a,e.abr.bandwidthDowngradeTarget=this.shakaBandwidthDowngradeTarget,e.abr.bandwidthUpgradeTarget=this.shakaBandwidthUpgradeTarget,e.abr.switchInterval=this.shakaSwitchInterval,this.shakaCapLevelToPlayerSize){const t=c.call(this,e);t&&(e=t),this.configureShakaCapLevelToPlayerSize=(0,r.default)(u).call(u,this,null),this.dom.container.addEventListener("resize",this.configureShakaCapLevelToPlayerSize)}return e.preferredAudioLanguage=this.shakaPreferredAudioLanguage,e.preferredTextLanguage=this.shakaPreferredTextLanguage,e.streaming.bufferBehind=this.shakaStreamingBufferBehind,e.streaming.bufferingGoal=this.shakaStreamingBufferingGoal,e.streaming.durationBackoff=this.shakaDurationBackoff,e.streaming.ignoreTextStreamFailures=this.shakaStreamingIgnoreTextStreamFailures,e.streaming.jumpLargeGaps=this.shakaJumpLargeGaps,e.streaming.rebufferingGoal=this.shakaStreamingRebufferingGoal,e.streaming.smallGapLimit=this.shakaSmallGapLimit,e.streaming.startAtSegmentBoundary=this.shakaStartAtSegmentBoundary,e.streaming.safeSeekOffset=this.shakaSafeSeekOffset,e.manifest.dash={},e.manifest.dash.ignoreMinBufferTime=this.shakaIgnoreMinBufferTime,e.manifest.defaultPresentationDelay=this.shakaManifestDefaultPresentationDelay,e.manifest.retryParameters={timeout:this.retryParameters.manifest.maxTimeout,maxAttempts:this.retryParameters.manifest.maxAttempts,baseDelay:this.retryParameters.manifest.delay,backoffFactor:2,fuzzFactor:1},e.streaming.retryParameters={timeout:this.retryParameters.segment.maxTimeout,maxAttempts:this.retryParameters.segment.maxAttempts,baseDelay:this.retryParameters.segment.delay,backoffFactor:2,fuzzFactor:1},e.drm.retryParameters={timeout:this.retryParameters.drm.maxTimeout,maxAttempts:this.retryParameters.drm.maxAttempts,baseDelay:this.retryParameters.drm.delay,backoffFactor:2,fuzzFactor:1},n.default.isEmptyObject(this.shakaDrm)||(n.default.isObject(this.shakaDrm.servers)&&(e.drm.servers=this.shakaDrm.servers),n.default.isObject(this.shakaDrm.clearKeys)&&(e.drm.clearKeys=this.shakaDrm.clearKeys),n.default.isObject(this.shakaDrm.advanced)&&(e.drm.advanced=this.shakaDrm.advanced)),n.default.isEmptyObject(this.shakaRestrictions)||("number"==typeof this.shakaRestrictions.minWidth&&(t.minWidth=this.shakaRestrictions.minWidth),"number"==typeof this.shakaRestrictions.maxWidth&&(t.maxWidth=this.shakaRestrictions.maxWidth),"number"==typeof this.shakaRestrictions.minHeight&&(t.minHeight=this.shakaRestrictions.minHeight),"number"==typeof this.shakaRestrictions.maxHeight&&(t.maxHeight=this.shakaRestrictions.maxHeight),"number"==typeof this.shakaRestrictions.minPixels&&(t.minPixels=this.shakaRestrictions.minPixels),"number"==typeof this.shakaRestrictions.maxPixels&&(t.maxPixels=this.shakaRestrictions.maxPixels),"number"==typeof this.shakaRestrictions.minAudioBandwidth&&(t.minAudioBandwidth=this.shakaRestrictions.minAudioBandwidth),"number"==typeof this.shakaRestrictions.maxAudioBandwidth&&(t.maxAudioBandwidth=this.shakaRestrictions.maxAudioBandwidth),"number"==typeof this.shakaRestrictions.minVideoBandwidth&&(t.minVideoBandwidth=this.shakaRestrictions.minVideoBandwidth),"number"==typeof this.shakaRestrictions.maxVideoBandwidth&&(t.maxVideoBandwidth=this.shakaRestrictions.maxVideoBandwidth),n.default.isEmptyObject(t)||(e.restrictions=t)),n.default.isEmptyObject(e.drm)&&delete e.drm,n.default.isEmptyObject(e.manifest)&&delete e.manifest,n.default.isEmptyObject(e.restrictions)&&delete e.restrictions,e},d.request=function(){let e={},t=!1,a="";n.default.isObject(this.shakaRequestConfiguration.license)&&(n.default.isObject(this.shakaRequestConfiguration.license.headers)&&(e=this.shakaRequestConfiguration.license.headers),"boolean"==typeof this.shakaRequestConfiguration.license.credentials&&(t=this.shakaRequestConfiguration.license.credentials),"string"==typeof this.shakaRequestConfiguration.license.parameters&&(a=this.shakaRequestConfiguration.license.parameters));let i=!1;n.default.isObject(this.shakaRequestConfiguration.manifest)&&"boolean"==typeof this.shakaRequestConfiguration.manifest.credentials&&(i=this.shakaRequestConfiguration.manifest.credentials);let r=!1;n.default.isObject(this.shakaRequestConfiguration.segment)&&"boolean"==typeof this.shakaRequestConfiguration.segment.credentials&&(r=this.shakaRequestConfiguration.segment.credentials),this.shakaPlayer.getNetworkingEngine().registerRequestFilter((o,l)=>{if(o===shaka.net.NetworkingEngine.RequestType.LICENSE){if(!n.default.isEmptyObject(e)){const t=(0,s.default)(e);for(let a=0,i=t.length;a<i;a++){const i=t[a];l.headers[i]=e[i]}}""!==a&&(l.uris[0]+=a),t&&(l.allowCrossSiteCredentials=!0)}o===shaka.net.NetworkingEngine.RequestType.MANIFEST&&i&&(l.allowCrossSiteCredentials=!0),o===shaka.net.NetworkingEngine.RequestType.SEGMENT&&r&&(l.allowCrossSiteCredentials=!0)})};var h=d;a.default=h},{"../../../externals/rmp-connection":1,"../../fw/env":69,"../../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/object/keys":99,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],9:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.symbol.description"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.iterator"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/instance/for-each")),n=i(e("@babel/runtime-corejs3/core-js-stable/date/now")),o=i(e("@babel/runtime-corejs3/core-js-stable/set-interval")),l=i(e("@babel/runtime-corejs3/core-js-stable/set-timeout")),d=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),c=i(e("../fw/fw")),u=i(e("../fw/env")),h=i(e("../core/ui/core-ui")),p=i(e("./ima-ads")),f=i(e("./rmp-vast")),m=i(e("../core/modules/modules")),g=i(e("../core/accessible/accessible")),b=i(e("../cast/cast")),v=i(e("../core/utils/metadata"));const y={destroy:function(){c.default.removeEvent("ended",this.dom.container,this.onEndedWaitForPlay),c.default.removeEvent("play",this.dom.container,this.onRePlayLoadAdTag),c.default.removeEvent("adloaded",this.dom.container,this.onAdLoadedAfterReload)}},k=function(){this.dom.container.removeEventListener("play",this.onRePlayLoadAdTag),"ima"===this.adParser?this.contentCompleteCalled=!1:this.rmpVast.setContentPlayerCompleted(!1);let e=this.originalAdTagUrl;if(this.adScheduleInput){if(this.adSchedule=this.originalAdSchedule,this.emptyInitAdTagUrl)return void this.dom.container.addEventListener("ended",this.onEndedWaitForPlay);e=this.adSchedule.preroll,this.dom.container.addEventListener("ended",this.adSchedulerEnded)}else this.adTagWaterfall=[...this.originalAdTagWaterfall],e=this.adTagUrl=this.originalAdTagUrl;this.loadAds(e),this.dom.container.addEventListener("ended",this.onEndedWaitForPlay)},w=function(){this.dom.container.removeEventListener("ended",this.onEndedWaitForPlay),this.onRePlayLoadAdTag=(0,d.default)(k).call(k,this),this.dom.container.addEventListener("play",this.onRePlayLoadAdTag)};y.onEndedReloadAdTag=function(){this.onEndedWaitForPlay=(0,d.default)(w).call(w,this),this.dom.container.addEventListener("ended",this.onEndedWaitForPlay)};const S=function(){this.dom.container.removeEventListener("adloaded",this.onAdLoadedAfterReload),u.default.isMobile?(c.default.removeClass(this.dom.centralMobileUIIcon,"rmp-i-replay"),c.default.removeClass(this.dom.centralMobileUI,"rmp-mobile-show-play"),c.default.addClass(this.dom.centralMobileUIIcon,"rmp-i-pause")):(0,l.default)(()=>{c.default.removeClass(this.dom.overlayButtonIcon,"rmp-i-replay"),c.default.addClass(this.dom.overlayButtonIcon,"rmp-i-play")},400)},C=function(e){e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault()),u.default.isMobile?c.default.removeEvent(["touchend","click"],this.dom.centralMobileUI,this.onInteractionReloadAdTag):(c.default.removeEvent(["touchend","click"],this.dom.overlayButton,this.onInteractionReloadAdTag),c.default.removeEvent(["click"],this.dom.container,this.onInteractionReloadAdTag)),this.adTagWaterfall=[...this.originalAdTagWaterfall],this.adTagUrl=this.originalAdTagUrl,this.loadAds(this.adTagUrl),this.onAdLoadedAfterReload=(0,d.default)(S).call(S,this),this.dom.container.addEventListener("adloaded",this.onAdLoadedAfterReload)};y.endedOutStreamUI=function(){this.contentMetadata.endOfVideoPoster.length>0&&(this.endOfVideoPoster=v.default.getPoster(this.contentMetadata.endOfVideoPoster)),""!==this.endOfVideoPoster&&this.setPoster(this.endOfVideoPoster),""!==this.poster&&c.default.show(this.dom.poster),c.default.hide(this.dom.controlBar),c.default.hide(this.dom.volume),h.default.hideLoadingSpin.call(this),this.adTagReloadOnEnded&&!this.adParserLoadError?(this.onInteractionReloadAdTag=(0,d.default)(C).call(C,this),u.default.isMobile?(c.default.removeClass(this.dom.centralMobileUIIcon,"rmp-i-play"),c.default.removeClass(this.dom.centralMobileUIIcon,"rmp-i-pause"),c.default.addClass(this.dom.centralMobileUIIcon,"rmp-i-replay"),c.default.addEvent(["touchend","click"],this.dom.centralMobileUI,this.onInteractionReloadAdTag)):(c.default.removeClass(this.dom.overlayButtonIcon,"rmp-i-play"),c.default.addClass(this.dom.overlayButtonIcon,"rmp-i-replay"),c.default.addEvent(["touchend","click"],this.dom.overlayButton,this.onInteractionReloadAdTag),c.default.addEvent(["click"],this.dom.container,this.onInteractionReloadAdTag)),h.default.showCentralPlay.call(this)):(c.default.removeEvent(["touchend","click"],this.dom.playPause,this.initiatePlayback),u.default.isMobile?c.default.removeEvent(["touchend","click"],this.dom.centralMobileUI,this.initiatePlayback):c.default.removeEvent(["touchend","click"],this.dom.overlayButton,this.initiatePlayback),h.default.hideCentralPlay.call(this),this.adParserLoadError&&(this.playerInitialized=!0))},y.createControlBarAdInfo=function(){this.dom.adInfo=c.default.createElement("div","rmp-ad-info"),c.default.hide(this.dom.adInfo),!u.default.isMobile||"ima"!==this.adParser||"s3"!==this.skin&&"s4"!==this.skin||c.default.addClass(this.dom.adInfo,"rmp-no-display"),this.dom.controlBar.appendChild(this.dom.adInfo),""!==this.labels.ads.controlBarCustomMessage&&(this.dom.adMessage=c.default.createElement("span","rmp-ad-info-message",this.labels.ads.controlBarCustomMessage,this.rtl),this.dom.adInfo.appendChild(this.dom.adMessage))},y.onClickSkipAd=function(e){if(e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault()),this.googleCast&&this.remotePlayer&&this.remotePlayer.whenSkippable&&this.remotePlayer.isPlayingBreak)b.default.skipAd.call(this),c.default.createStdEvent("adskipped",this.dom.container);else{this.getAdCurrentTime()>1e3*this.adSkipOffset&&(c.default.createStdEvent("adskipped",this.dom.container),this.stopAds())}};const j=function(){let e,t=!1;if(this.googleCast&&this.remotePlayer&&this.remotePlayer.isMediaLoaded&&this.remotePlayer.isPlayingBreak&&this.remotePlayer.currentBreakClipTime?(t=!0,e=1e3*this.remotePlayer.currentBreakClipTime):e=this.getAdCurrentTime(),e>1e3*this.adSkipOffset)c.default.clearInterval(this.adSkipInterval),c.default.setStyle(this.dom.adSkipWaiting,{display:"none"}),c.default.setStyle(this.dom.adSkipMessage,{display:"block"}),c.default.setStyle(this.dom.skipIcon,{display:"block"});else if(e>-1){const a=Math.round((1e3*this.adSkipOffset-e)/1e3);a>0&&(t?c.default.setText(this.dom.adSkipWaiting,this.labels.ads.skipMessage):c.default.setText(this.dom.adSkipWaiting,this.labels.ads.skipWaitingMessage+" "+a+"s"))}};y.appendSkipUI=function(){if(!(this.rmpVast&&this.rmpVast.getIsSkippableAd()||this.isVpaidCreative())){var e;if(void 0===this.dom.adSkipButton)if(this.dom.adSkipButton=c.default.createElement("button","rmp-button rmp-ad-skip"),g.default.make.call(this,this.dom.adSkipButton,this.labels.ads.skipMessage,!0),this.dom.adSkipWaiting=c.default.createElement("div","rmp-ad-skip-waiting",null,this.rtl),this.dom.adSkipMessage=c.default.createElement("div","rmp-ad-skip-message",this.labels.ads.skipMessage,this.rtl),this.dom.skipIcon=c.default.createElement("div","rmp-ad-skip-icon"),c.default.addEvent(["touchend","click"],this.dom.adSkipButton,(0,d.default)(e=y.onClickSkipAd).call(e,this)),this.dom.adSkipButton.appendChild(this.dom.adSkipWaiting),this.dom.adSkipButton.appendChild(this.dom.adSkipMessage),this.dom.adSkipButton.appendChild(this.dom.skipIcon),"ima"===this.adParser)this.dom.adContainer.appendChild(this.dom.adSkipButton);else{const e=this.dom.container.querySelector(".rmp-ad-container");null!==e&&e.appendChild(this.dom.adSkipButton)}c.default.setStyle(this.dom.adSkipButton,{display:"block"}),this.adSkipOffset<=0?(c.default.setStyle(this.dom.adSkipWaiting,{display:"none"}),c.default.setStyle(this.dom.adSkipMessage,{display:"block"}),c.default.setStyle(this.dom.skipIcon,{display:"block"})):(c.default.setStyle(this.dom.adSkipWaiting,{display:"block"}),c.default.setStyle(this.dom.adSkipMessage,{display:"none"}),c.default.setStyle(this.dom.skipIcon,{display:"none"})),this.adSkipOffset>0&&(j.call(this),c.default.clearInterval(this.adSkipInterval),this.adSkipInterval=(0,o.default)((0,d.default)(j).call(j,this),250))}};const E=function(){c.default.clearInterval(this.adSkipInterval),c.default.setStyle(this.dom.adSkipButton,{display:"none"})},L=function(){/adsense/i.test(this.adSystem)&&/(text|image\/)/i.test(this.adContentType)&&c.default.addClass(this.dom.container,"rmp-ad-no-ui")};y.setAdUI=function(e){if(e&&!this.hasAdUI){if(c.default.addClass(this.dom.container,"rmp-linear-ad-ui"),!this.adOutStream&&(m.default.closeAll.call(this),this.volumeModuleUI&&c.default.removeClass(this.dom.volume,"rmp-no-display"),c.default.hide([this.dom.seekBar,this.dom.duration,this.dom.timeElapsed]),this.dom.logoImg&&c.default.hide(this.dom.logoImg),this.dom.quickRewind&&c.default.hide(this.dom.quickRewind),this.dom.quickForward&&c.default.hide(this.dom.quickForward),this.hasRelated&&c.default.hide(this.dom.relatedSkip),this.audioOnlyUseVideoLayout&&c.default.removeClass(this.dom.container,"rmp-audio-only-use-video-layout"),this.hasPlaylist&&(c.default.hide(this.dom.playlistLeftArrow),c.default.hide(this.dom.playlistRightArrow),this.playlistAudioOnly&&c.default.removeClass(this.dom.container,"rmp-playlist-audio-only")),this.hasRelated&&this.relatedAudioOnly&&c.default.removeClass(this.dom.container,"rmp-related-audio-only"),this.video360)){const e=this.dom.container.querySelector(".rmp-360-text");null!==e&&c.default.removeElement(e),c.default.hide(this.dom.ui360),c.default.show(this.dom.adContainer)}this.dom.adInfo||y.createControlBarAdInfo.call(this),!1===this.adCountDown&&""===this.labels.ads.controlBarCustomMessage||c.default.show(this.dom.adInfo),this.adSkipButton&&"ima"!==this.adParser&&y.appendSkipUI.call(this),this.isVPAID&&y.setVPAIDUI.call(this,!0),L.call(this),h.default.showChrome.call(this),this.hasAdUI=!0}else!e&&this.hasAdUI&&(c.default.removeClass(this.dom.container,"rmp-linear-ad-ui"),this.adOutStream||(m.default.closeAll.call(this),this.dom.seekBar?c.default.show([this.dom.seekBar,this.dom.duration]):c.default.setText(this.dom.timeElapsedText,this.labels.hint.live),c.default.show(this.dom.timeElapsed),this.dom.quickRewind&&c.default.show(this.dom.quickRewind),this.dom.quickForward&&c.default.show(this.dom.quickForward),this.hasRelated&&c.default.show(this.dom.relatedSkip),this.audioOnlyUseVideoLayout&&c.default.addClass(this.dom.container,"rmp-audio-only-use-video-layout"),this.hasPlaylist&&(c.default.show(this.dom.playlistLeftArrow),c.default.show(this.dom.playlistRightArrow),this.playlistAudioOnly&&c.default.addClass(this.dom.container,"rmp-playlist-audio-only")),this.hasRelated&&this.relatedAudioOnly&&c.default.addClass(this.dom.container,"rmp-related-audio-only"),this.video360&&(c.default.hide(this.dom.adContainer),c.default.show(this.dom.ui360))),c.default.hide(this.dom.adInfo),this.isVPAID&&y.setVPAIDUI.call(this,!1),this.dom.logoImg&&c.default.show(this.dom.logoImg),c.default.removeClass(this.dom.container,"rmp-ad-no-ui"),c.default.clearInterval(this.adCountdownInterval),this.dom.adSkipButton&&E.call(this),this.hasAdUI=!1)},y.updateVPAIDStatus=function(e){const t=this.getAdContentType();/\/javascript/i.test(t)&&(this.isVPAID=!0,e&&y.setVPAIDUI.call(this,!0))},y.setVPAIDUI=function(e){e?this.adVpaidControls?c.default.addClass(this.dom.container,"rmp-ad-vpaid-force-controls"):c.default.addClass(this.dom.container,"rmp-ad-no-ui"):this.adVpaidControls?c.default.removeClass(this.dom.container,"rmp-ad-vpaid-force-controls"):c.default.removeClass(this.dom.container,"rmp-ad-no-ui")},y.udpatePlayPause=function(){this.getAdPaused()?(c.default.addClass(this.dom.playPause,"rmp-i-play"),c.default.removeClass(this.dom.playPause,"rmp-i-pause"),c.default.setText(this.dom.playPauseHint,this.labels.hint.play),m.default.updatePlayPauseUI.call(this,!0),u.default.isMobile&&(c.default.removeClass(this.dom.centralMobileUIIcon,"rmp-i-pause"),c.default.addClass(this.dom.centralMobileUIIcon,"rmp-i-play")),h.default.showCentralPlay.call(this)):(c.default.removeClass(this.dom.playPause,"rmp-i-play"),c.default.addClass(this.dom.playPause,"rmp-i-pause"),c.default.setText(this.dom.playPauseHint,this.labels.hint.pause),m.default.updatePlayPauseUI.call(this,!1),u.default.isMobile&&(c.default.removeClass(this.dom.centralMobileUIIcon,"rmp-i-play"),c.default.addClass(this.dom.centralMobileUIIcon,"rmp-i-pause")),h.default.hideCentralPlay.call(this))},y.playPause=function(){"ima"===this.adParser?this.getAdPaused()?p.default.resumeAds.call(this):p.default.pauseAds.call(this):this.getAdPaused()?f.default.resumeAds.call(this):f.default.pauseAds.call(this)};const A=function(){let e=-1;if("ima"===this.adParser)try{e=this.adsManager.getRemainingTime()}catch(t){c.default.trace(t)}else e=(this.getAdDuration()-this.getAdCurrentTime())/1e3;"number"==typeof e&&e>=0&&(e=c.default.readableTime(Math.round(e)),c.default.setText(this.dom.adCountdown,e))};y.addCountDown=function(){this.dom.adCountdown||(this.dom.adCountdown=c.default.createElement("span","rmp-ad-info-countdown"),this.dom.adInfo.appendChild(this.dom.adCountdown)),A.call(this),c.default.clearInterval(this.adCountdownInterval),this.adCountdownInterval=(0,o.default)((0,d.default)(A).call(A,this),1e3)};const T=function(){const e=c.default.createElement("div","rmp-ad-block-container");e.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation()}));const t=c.default.createElement("div","rmp-ad-block-text",this.labels.ads.adBlockerDetectedMessage,this.rtl);e.appendChild(t),this.dom.container.appendChild(e),c.default.fadeIn(e),c.default.show(this.dom.poster)};y.onAdBlockDetection=function(){c.default.addClass(this.dom.container,"rmp-ad-block-detected"),this.googleCast=!1,this.airplay=!1,this.dom.container.addEventListener("playing",()=>{this.pause(),this.showPoster()}),T.call(this)},y.createMarkers=function(e,t){if(this.dom.timetotal&&this.dom.handle)for(let a=0;a<e.length;a++){let i=c.default.createElement("div","rmp-ad-markers");if(e[a]===1/0)c.default.setStyle(i,{left:"100%",marginLeft:"-5px"}),i.setAttribute("data-marker-timestamp",t),this.dom.timetotal.insertBefore(i,this.dom.handle);else{const s=100*e[a]/t;if(s>=100)return;c.default.setStyle(i,{left:s+"%"}),i.setAttribute("data-marker-timestamp",e[a]),this.dom.timetotal.insertBefore(i,this.dom.handle)}}};const P=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,e=>"%"+e.charCodeAt(0).toString(16))};y.replaceAdTagVar=function(e){let t=e;if(!/__.+__/i.test(t))return t;const a=["__domain__","__player-height__","__player-width__","__random-number__","__page-url__","__timestamp__","__referrer__","__mobile__","__ima__","__item-title__","__item-description__","__item-duration__","__current-time__"],i=[];let s="";window.location&&window.location.hostname&&(s=window.location.hostname.toLowerCase()),i.push(P(s));const o=u.default.getScreenDimension();let l=this.height;this.isInFullscreen&&(l=o.height),("number"!=typeof l||l<=0)&&(l=""),i.push(P(Math.round(l).toString()));let d=this.width;this.isInFullscreen&&(d=o.width),("number"!=typeof d||d<=0)&&(d=""),i.push(P(Math.round(d).toString()));let h="";for(let r=0,n=12;r<n;r++)h+=c.default.getRandomInt(0,9).toString();i.push(P(h));let p="";document.URL&&(p=document.URL),i.push(P(p));let f=(0,n.default)();("number"!=typeof f||f<=0)&&(f=""),i.push(P(f.toString()));let m="";document.referrer&&(m=document.referrer),i.push(P(m));let g="";u.default.isMobile&&(g="mobile"),i.push(P(g));let b="";"ima"===this.adParser&&(b=this.adParser),i.push(P(b));let v="";""!==this.contentMetadata.title&&(v=this.contentMetadata.title),i.push(P(v));let y="";""!==this.contentMetadata.description&&(y=this.contentMetadata.description),i.push(P(y));let k=this.getDuration();k=-1!==k&&this.isVod?Math.round(k/1e3).toString():"",i.push(P(k));let w=this.getCurrentTime();return w=-1!==w&&this.isVod?Math.round(w/1e3).toString():"",i.push(P(w)),(0,r.default)(a).call(a,(e,a)=>{t=t.replace(e,i[a])}),t};var M=y;a.default=M},{"../cast/cast":29,"../core/accessible/accessible":31,"../core/modules/modules":39,"../core/ui/core-ui":52,"../core/utils/metadata":58,"../fw/env":69,"../fw/fw":70,"./ima-ads":10,"./rmp-vast":12,"@babel/runtime-corejs3/core-js-stable/date/now":80,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/for-each":85,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/set-interval":103,"@babel/runtime-corejs3/core-js-stable/set-timeout":104,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.regexp.to-string":435,"core-js/modules/es.string.replace":438,"core-js/modules/es.symbol.description":440,"core-js/modules/web.dom-collections.iterator":444}],10:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),r=i(e("@babel/runtime-corejs3/core-js-stable/set-interval")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/index-of")),o=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),l=i(e("@babel/runtime-corejs3/core-js-stable/set-timeout")),d=i(e("@babel/runtime-corejs3/core-js-stable/instance/trim")),c=i(e("../fw/fw")),u=i(e("../fw/env")),h=i(e("../fw/defaults/language-defaults")),p=i(e("../core/ready")),f=i(e("../core/volume/helpers")),m=i(e("../core/resize/resize")),g=i(e("../core/ui/core-ui")),b=i(e("../core/utils/utils")),v=i(e("./ads-helpers"));const y={},k=function(){if(null!==this.adsManager&&"function"==typeof this.adsManager.destroy)try{this.adsManager.destroy()}catch(e){c.default.trace(e)}};y.contentCompleteAds=function(){if(null!==this.adsLoader&&"function"==typeof this.adsLoader.contentComplete)try{this.adsLoader.contentComplete()}catch(e){c.default.trace(e)}};const w=function(){this.adShowRemainingTime&&(c.default.hide(this.dom.adCurrentTime),c.default.clearInterval(this.adRemainingTimeBarInterval)),this.isVod&&(this.dom.video.removeEventListener("ended",this.ended),this.dom.video.addEventListener("ended",this.ended)),this.readingPDorNative&&(this.dom.video.removeEventListener("error",this.generateError,!0),this.dom.video.addEventListener("error",this.generateError,!0)),v.default.setAdUI.call(this,!1)};y.resetAdsForNewRequest=function(){this.adOnStage=!1,this.adPaused=!1,this.isVPAID=!1,this.getAdOnStage()&&this.getAdLinear()&&w.call(this),k.call(this)},y.requestAds=function(e){if(this.get5Ready()&&this.ads&&this.adParserLoaded&&"string"==typeof e&&null!==this.adsLoader){g.default.showLoadingSpin.call(this);try{const t=(0,d.default)(e).call(e),a=new google.ima.AdsRequest;/^<\?xml.+\?>/i.test(t)?a.adsResponse=t:a.adTagUrl=t,a.linearAdSlotWidth=this.width,a.linearAdSlotHeight=this.height,a.nonLinearAdSlotWidth=this.width,a.nonLinearAdSlotHeight=this.height,a.vastLoadTimeout=this.adLoadVastTimeout,this.adForceNonLinearFullSlot&&(a.forceNonLinearFullSlot=!0),this.adContentDuration>0&&(a.contentDuration=this.adContentDuration),""!==this.adContentKeywords&&(a.contentKeywords=this.adContentKeywords),""!==this.adContentTitle&&(a.contentTitle=this.adContentTitle),this.adLiveStreamPrefetchSeconds>0&&(a.liveStreamPrefetchSeconds=this.adLiveStreamPrefetchSeconds),a.setAdWillAutoPlay(this.autoplay),a.setAdWillPlayMuted(this.muted),"auto"===this.adContinuousPlayback?this.hasPlaylist&&this.playlistUpNextAutoplay||this.hasRelated&&this.relatedUpNextAutoplay?a.setContinuousPlayback(!0):a.setContinuousPlayback(!1):"yes"===this.adContinuousPlayback?a.setContinuousPlayback(!0):a.setContinuousPlayback(!1),this.adsLoader.requestAds(a)}catch(t){c.default.trace(t),this.play()}}else this.play()};const S=function(){this.adErrorCode=-1,this.adErrorMessage="",this.adErrorType="",this.adVastErrorCode=-1},C=function(){let e=this.getCurrentTime();this.offsetStartPosition>0&&0===e&&this.seekTo(this.offsetStartPosition),this.offsetStartPosition=0},j=function(){if(this.adPaused=!1,this.adOnStage=!1,w.call(this),this.adOutStream)return v.default.endedOutStreamUI.call(this),void c.default.createStdEvent("adcontentresumerequested",this.dom.container);this.contentCompleteCalled||(this.firstPreroll&&(this.firstPreroll=!1,C.call(this)),u.default.isIphone&&!this.adDisableCustomPlaybackForIOS10Plus&&200===this.adErrorCode?(0,l.default)(()=>{b.default.playPromise.call(this)},0):b.default.playPromise.call(this)),c.default.createStdEvent("adcontentresumerequested",this.dom.container)},E=function(){(0,o.default)(this.adTagWaterfall)&&"string"==typeof this.adTagWaterfall[0]&&""!==this.adTagWaterfall[0]?(this.adTagUrl=this.adTagWaterfall[0],this.adTagWaterfall.length>0&&this.adTagWaterfall.shift(),this.loadAds(this.adTagUrl),c.default.createStdEvent("adclientsidewaterfallrequested",this.dom.container)):(k.call(this),j.call(this)),S.call(this)},L=[201,202,203,600,601,603,604],A=function(e){const t=e.getError();if(void 0!==t&&(this.adErrorCode=t.getErrorCode(),this.adErrorMessage=t.getMessage(),this.adErrorType=t.getType(),this.adVastErrorCode=t.getVastErrorCode(),(0,n.default)(L).call(L,this.adVastErrorCode)>-1))return c.default.createStdEvent("adlog",this.dom.container),void S.call(this);g.default.hideLoadingSpin.call(this),c.default.createStdEvent("aderror",this.dom.container),E.call(this)},T=function(e){if(this.adPodInfo=e.getAdPodInfo(),c.default.setText(this.dom.adPod,""),this.adPodInfo&&this.dom.adInfo){const e=this.adPodInfo.getTotalAds();if("number"==typeof e&&e>1){this.dom.adPod||(this.dom.adPod=c.default.createElement("span","rmp-ad-info-pod"),this.dom.adCountdown?this.dom.adInfo.insertBefore(this.dom.adPod,this.dom.adCountdown):this.dom.adInfo.appendChild(this.dom.adPod));const t=this.adPodInfo.getAdPosition();"number"==typeof t&&c.default.setText(this.dom.adPod,t+"/"+e)}}},P=function(e){const t=e.getAdData();if(c.default.isObject(t)&&t.adError){const e=t.adError;this.adErrorCode=e.getErrorCode(),this.adErrorMessage=e.getMessage(),this.adErrorType=e.getType(),this.adVastErrorCode=e.getVastErrorCode(),c.default.createStdEvent("adlog",this.dom.container),S.call(this)}},M=function(){this.isLive||c.default.setText(this.dom.timeElapsedText,c.default.readableTime(c.default.getMediaCurrentTime(this.dom.video))),c.default.createStdEvent("adcomplete",this.dom.container)},I=function(){c.default.createStdEvent("adalladscompleted",this.dom.container),this.contentCompleteCalled&&(this.contentCompleteCalled=!1,this.loop||(c.default.show(this.dom.poster),g.default.restorePlayUI.call(this)),!this.adDisableCustomPlaybackForIOS10Plus&&u.default.isIos[0]&&this.dom.video.src!==this.currentiOSSrc&&(this.srcChangeAutoplay=!1,this.setSrc(this.currentiOSSrc))),this.adOutStream&&u.default.isIphone&&j.call(this)},x=function(){!this.adPauseOnClick||this.isVpaidCreative()||this.getAdPaused()||this.pause(),c.default.createStdEvent("adclick",this.dom.container)},R=function(e,t){this.isVPAID=!1,g.default.hideLoadingSpin.call(this),g.default.showChrome.call(this);const a=e.isLinear();if("boolean"==typeof a&&(this.isLinear=a,this.isLinear&&"adloaded"===t))if(this.muted)f.default.setMuteAd.call(this,!0);else{let e=this.getVolume();f.default.setAd.call(this,e)}"adstarted"===t&&(this.adOnStage=!0,m.default.resizeAds.call(this),c.default.removeClass(this.dom.adContainer,"rmp-ad-overlay"),this.adID=e.getAdId(),this.adSystem=e.getAdSystem(),this.adAdvertiserName=e.getAdvertiserName(),this.adApiFramework=e.getApiFramework(),this.adContentType=e.getContentType(),this.adCreativeAdId=e.getCreativeAdId(),this.adCreativeId=e.getCreativeId(),this.adDealId=e.getDealId(),this.adDescription=e.getDescription(),this.adDuration=e.getDuration(),this.adNonLinearHeight=e.getHeight(),this.adMediaUrl=e.getMediaUrl(),this.adMinSuggestedDuration=e.getMinSuggestedDuration(),this.adSkipTimeOffset=e.getSkipTimeOffset(),this.adSurveyUrl=e.getSurveyUrl(),this.adTitle=e.getTitle(),this.adTraffickingParameters=e.getTraffickingParameters(),this.adTraffickingParametersString=e.getTraffickingParametersString(),this.adUIElements=e.getUiElements(),this.adUniversalAdIdRegistry=e.getUniversalAdIdRegistry(),this.adUniversalAdIds=e.getUniversalAdIds(),this.adUniversalAdIdValue=e.getUniversalAdIdValue(),this.adVastMediaBitrate=e.getVastMediaBitrate(),this.adVastMediaHeight=e.getVastMediaHeight(),this.adVastMediaWidth=e.getVastMediaWidth(),this.adNonLinearWidth=e.getWidth(),this.adWrapperAdIds=e.getWrapperAdIds(),this.adWrapperAdSystems=e.getWrapperAdSystems(),this.adWrapperCreativeIds=e.getWrapperCreativeIds(),this.currentAdForCompanion=e)},D=function(e){R.call(this,e,"adloaded"),c.default.createStdEvent("adloaded",this.dom.container)},O=function(e){if(R.call(this,e,"adstarted"),!this.getAdLinear()&&this.offsetStartPosition>0&&C.call(this),this.googleCast&&this.castConnected||this.video360&&!this.isLinear)return this.video360&&c.default.hide(this.dom.adContainer),this.stopAds(),void this.play();v.default.updateVPAIDStatus.call(this,this.isLinear),this.isLinear?(this.adPaused=!1,v.default.udpatePlayPause.call(this),this.adCountDown&&this.dom.adInfo&&v.default.addCountDown.call(this),T.call(this,e),c.default.hide(this.dom.poster)):this.adOutStream?(this.stopAds(),E.call(this)):(w.call(this),this.adNonLinearHeight+40<this.height&&c.default.addClass(this.dom.adContainer,"rmp-ad-overlay"),this.adAutoAlign||c.default.addClass(this.dom.adContainer,"rmp-ad-no-auto-align"),b.default.playPromise.call(this)),c.default.createStdEvent("adstarted",this.dom.container)},F=function(){this.adPaused=!1,v.default.udpatePlayPause.call(this),c.default.createStdEvent("adresumed",this.dom.container)},V=function(){this.adPaused=!0,v.default.udpatePlayPause.call(this),c.default.createStdEvent("adpaused",this.dom.container)},B=function(){c.default.createStdEvent("adlinearchanged",this.dom.container)},q=function(e){if(c.default.isObject(e)){0;const t=e.getAd();if(c.default.isObject(t)&&e.type)switch(e.type){case google.ima.AdEvent.Type.LOADED:D.call(this,t);break;case google.ima.AdEvent.Type.STARTED:O.call(this,t);break;case google.ima.AdEvent.Type.COMPLETE:M.call(this);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:I.call(this);break;case google.ima.AdEvent.Type.RESUMED:F.call(this);break;case google.ima.AdEvent.Type.PAUSED:V.call(this);break;case google.ima.AdEvent.Type.CLICK:x.call(this);break;case google.ima.AdEvent.Type.AD_BREAK_READY:c.default.createStdEvent("adbreakready",this.dom.container);break;case google.ima.AdEvent.Type.AD_METADATA:c.default.createStdEvent("admetadata",this.dom.container);break;case google.ima.AdEvent.Type.DURATION_CHANGE:c.default.createStdEvent("addurationchange",this.dom.container);break;case google.ima.AdEvent.Type.FIRST_QUARTILE:c.default.createStdEvent("adfirstquartile",this.dom.container);break;case google.ima.AdEvent.Type.MIDPOINT:c.default.createStdEvent("admidpoint",this.dom.container);break;case google.ima.AdEvent.Type.THIRD_QUARTILE:c.default.createStdEvent("adthirdquartile",this.dom.container);break;case google.ima.AdEvent.Type.IMPRESSION:c.default.createStdEvent("adimpression",this.dom.container);break;case google.ima.AdEvent.Type.INTERACTION:c.default.createStdEvent("adinteraction",this.dom.container);break;case google.ima.AdEvent.Type.LINEAR_CHANGED:B.call(this);break;case google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED:c.default.createStdEvent("adskippablestatechanged",this.dom.container);break;case google.ima.AdEvent.Type.SKIPPED:c.default.createStdEvent("adskipped",this.dom.container);break;case google.ima.AdEvent.Type.USER_CLOSE:c.default.createStdEvent("aduserclose",this.dom.container);break;case google.ima.AdEvent.Type.VOLUME_CHANGED:c.default.createStdEvent("advolumechanged",this.dom.container);break;case google.ima.AdEvent.Type.VOLUME_MUTED:c.default.createStdEvent("advolumemuted",this.dom.container);break;case google.ima.AdEvent.Type.LOG:P.call(this,e)}}},U=function(){if(this.adsManager){let t=-1,a=-1;try{t=this.adsManager.getRemainingTime(),a=this.getAdDuration()}catch(e){c.default.trace(e)}if(t>0&&a>0){let e=Math.floor(100*(1-1e3*t/a));e<0&&(e=0),c.default.setStyle(this.dom.adCurrentTime,{width:e+"%"})}}},H=function(){!this.adDisableCustomPlaybackForIOS10Plus&&u.default.isIos[0]&&this.dom.video.src&&(this.currentiOSSrc=this.dom.video.src),this.adShowRemainingTime&&(void 0===this.dom.adCurrentTime&&(this.dom.adCurrentTime=c.default.createElement("div","rmp-ad-current-time"),this.dom.controlBar.appendChild(this.dom.adCurrentTime)),c.default.show(this.dom.adCurrentTime),c.default.setStyle(this.dom.adCurrentTime,{width:0}),U.call(this),c.default.clearInterval(this.adRemainingTimeBarInterval),this.adRemainingTimeBarInterval=(0,r.default)((0,s.default)(U).call(U,this),250)),this.isVod&&this.dom.video.removeEventListener("ended",this.ended),this.readingPDorNative&&this.dom.video.removeEventListener("error",this.generateError,!0),v.default.setAdUI.call(this,!0),this.adOutStream||this.dom.video.paused||this.dom.video.pause(),c.default.createStdEvent("adcontentpauserequested",this.dom.container)},N=function(e){const t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0;let a=!0;(u.default.isIos[0]||u.default.isAndroid[0]&&u.default.isAndroid[1]<4)&&(a=!1),this.adEnablePreloading&&a?t.enablePreloading=!0:t.enablePreloading=!1,this.adLoadMediaTimeout>0&&(t.loadVideoTimeout=this.adLoadMediaTimeout),this.adAutoAlign||(t.autoAlign=this.adAutoAlign);const i=this.getBandwidthEstimate();if(i>-1&&(t.bitrate=Math.round(i/1e3)),this.adUseStyledNonLinearAds&&(t.useStyledNonLinearAds=!0),u.default.isMobile&&this.adOutStreamSkin&&(t.uiElements=[]),this.adsManager=e.getAdsManager(this.dom.video,t),c.default.createStdEvent("adadsmanagerloaded",this.dom.container),this.adsManager){const e=[google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED];for(let a=0,i=e.length;a<i;a++)this.adsManager.addEventListener(e[a],(0,s.default)(q).call(q,this));this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(0,s.default)(H).call(H,this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(0,s.default)(j).call(j,this)),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(0,s.default)(A).call(A,this));let t=this.adsManager.getCuePoints();if((0,o.default)(t)&&t.length>0&&this.adShowMarkers&&this.isVod){let e=[];for(let i=0;i<t.length;i++)-1===t[i]?e.push(1/0):e.push(t[i]);0;let a=this.getDuration();a>-1&&(a/=1e3,this.adVmapInput=!0,v.default.createMarkers.call(this,e,a))}try{this.adsManager.init(this.width,this.height,google.ima.ViewMode.NORMAL),this.adsManager.start()}catch(r){c.default.trace(r),this.play()}}},_=function(e){this.hasLoadedMetadata?N.call(this,e):(c.default.clearInterval(this.runAdsManagerInterval),this.runAdsManagerInterval=(0,r.default)(()=>{this.hasLoadedMetadata&&(c.default.clearInterval(this.runAdsManagerInterval),N.call(this,e))},10))},W=function(){if(c.default.clearTimeout(this.imaLoadTimeout),!this.imaLoadCancel){if("undefined"!=typeof google&&void 0!==google.ima){if(this.adImaDai)return this.adParserLoaded=!0,v.default.createControlBarAdInfo.call(this),void p.default.fire.call(this);if(this.adParserLoaded=!0,this.dom.adContainer&&this.dom.video){"auto"===this.adLocale&&(this.adLocale=h.default.codes[this.validatedLanguage][0]),google.ima.settings.setLocale(this.adLocale),google.ima.settings.setNumRedirects(this.adMaxNumRedirects),google.ima.settings.setCookiesEnabled(this.adCookiesEnabled),"enabled"===this.adVpaidMode?google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED):"insecure"===this.adVpaidMode?google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE):google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),u.default.isIphoneIos10Plus&&google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.adDisableCustomPlaybackForIOS10Plus),google.ima.settings.setPlayerType("radiantmediaplayer"),google.ima.settings.setPlayerVersion(this.playerVersion);try{this.adDisplayContainer=new google.ima.AdDisplayContainer(this.dom.adContainer,this.dom.video),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(0,s.default)(_).call(_,this)),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(0,s.default)(A).call(A,this))}catch(e){return c.default.trace(e),void p.default.fire.call(this)}v.default.createControlBarAdInfo.call(this)}}p.default.fire.call(this)}},z=function(){c.default.clearTimeout(this.imaLoadTimeout),this.imaLoadCancel||(this.adParserLoadError=!0,this.ads=!1,c.default.createStdEvent("adloadererror",this.dom.container),p.default.fire.call(this),this.adOutStream&&v.default.endedOutStreamUI.call(this))};y.init=function(){if("undefined"!=typeof google&&void 0!==google.ima)W.call(this);else{let e;e=this.adImaTest?"https://imasdk.googleapis.com/js/sdkloader/ima3_test.js":this.adImaDai?"https://imasdk.googleapis.com/js/sdkloader/ima3_dai.js":"https://imasdk.googleapis.com/js/sdkloader/ima3.js",c.default.getScript(e,(0,s.default)(W).call(W,this),(0,s.default)(z).call(z,this)),c.default.clearTimeout(this.imaLoadTimeout),this.imaLoadTimeout=(0,l.default)(()=>{z.call(this),this.imaLoadCancel=!0},this.ajaxInternalTimeout)}},y.resumeAds=function(){if(this.adsManager){0;try{this.adsManager.resume()}catch(e){c.default.trace(e)}}},y.pauseAds=function(){if(this.adsManager){0;try{this.adsManager.pause()}catch(e){c.default.trace(e)}}};var J=y;a.default=J},{"../core/ready":46,"../core/resize/resize":47,"../core/ui/core-ui":52,"../core/utils/utils":59,"../core/volume/helpers":63,"../fw/defaults/language-defaults":68,"../fw/env":69,"../fw/fw":70,"./ads-helpers":9,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/index-of":87,"@babel/runtime-corejs3/core-js-stable/instance/trim":93,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/set-interval":103,"@babel/runtime-corejs3/core-js-stable/set-timeout":104,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],11:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/instance/for-each")),r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("@babel/runtime-corejs3/core-js-stable/set-timeout")),o=i(e("../fw/fw")),l=i(e("../fw/defaults/language-defaults")),d=i(e("../abr/hls")),c=i(e("./ads-helpers")),u=i(e("../core/utils/error"));const h={},p=function(e,t,a,i,s){let r=new google.ima.dai.api.VODStreamRequest;r.contentSourceId=e,r.videoId=t,a&&(r.apiKey=a),o.default.isEmptyObject(i)||(r.adTagParameters=i),s&&(r.streamActivityMonitorId=s),this.imaDaiStreamManager.requestStream(r)},f=function(e,t,a,i){let s=new google.ima.dai.api.LiveStreamRequest;s.assetKey=e,t&&(s.apiKey=t),o.default.isEmptyObject(a)||(s.adTagParameters=a),i&&(s.streamActivityMonitorId=i),this.imaDaiStreamManager.requestStream(s)},m=function(e){if(e&&"function"==typeof e.getStreamData){let t=e.getStreamData().adProgressData;0;let a=t.adPosition,i=t.totalAds,s=t.currentTime;this.imaDaiAdCurrentTime=s;let r=t.duration,n=Math.floor(r-s);this.adCountDown&&n>=0&&(n=o.default.readableTime(n),o.default.setText(this.dom.adCountdown,n)),"number"==typeof i&&i>1&&(this.dom.adPod||(this.dom.adPod=o.default.createElement("span","rmp-ad-info-pod"),this.dom.adCountdown?this.dom.adInfo.insertBefore(this.dom.adPod,this.dom.adCountdown):this.dom.adInfo.appendChild(this.dom.adPod)),"number"==typeof a&&o.default.setText(this.dom.adPod,a+"/"+i))}},g=function(e){if(e&&(this.adCountDown&&this.dom.adInfo&&(this.dom.adCountdown||(this.dom.adCountdown=o.default.createElement("span","rmp-ad-info-countdown"),this.dom.adInfo.appendChild(this.dom.adCountdown))),"function"==typeof e.getAd)){const t=e.getAd();this.adID=t.getAdId(),this.adPodInfo=t.getAdPodInfo(),this.adSystem=t.getAdSystem(),this.adAdvertiserName=t.getAdvertiserName(),this.adApiFramework=t.getApiFramework(),this.adCreativeAdId=t.getCreativeAdId(),this.adCreativeId=t.getCreativeId(),this.adDealId=t.getDealId(),this.adDescription=t.getDescription(),this.adDuration=t.getDuration(),this.adSkipTimeOffset=t.getSkipTimeOffset(),this.adTitle=t.getTitle(),this.adUniversalAdIdRegistry=t.getUniversalAdIdRegistry(),this.adUniversalAdIds=t.getUniversalAdIds(),this.adUniversalAdIdValue=t.getUniversalAdIdValue(),this.adVastMediaHeight=t.getVastMediaHeight(),this.adVastMediaWidth=t.getVastMediaWidth(),this.adWrapperAdIds=t.getWrapperAdIds(),this.adWrapperAdSystems=t.getWrapperAdSystems(),this.adWrapperCreativeIds=t.getWrapperCreativeIds(),this.imaDaiIsSkippable=t.isSkippable(),this.currentAdForCompanion=t}},b=function(e){if(e&&e.type)switch(e.type){case google.ima.dai.api.StreamEvent.Type.LOADED:0,this.startingBitratePath=e.getStreamData().url,d.default.initFinised.call(this),o.default.createStdEvent("adloaded",this.dom.container);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:this.adOnStage=!0,this.isLinear=!0,c.default.setAdUI.call(this,!0),o.default.setStyle(this.dom.imaDaiClickElement,{display:"block"}),o.default.createStdEvent("adbreakstarted",this.dom.container);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:this.isLinear=!1,this.adOnStage=!1,c.default.setAdUI.call(this,!1),o.default.setStyle(this.dom.imaDaiClickElement,{display:"none"}),o.default.createStdEvent("adbreakended",this.dom.container);break;case google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED:o.default.createStdEvent("adperiodstarted",this.dom.container);break;case google.ima.dai.api.StreamEvent.Type.AD_PERIOD_ENDED:o.default.createStdEvent("adperiodended",this.dom.container);break;case google.ima.dai.api.StreamEvent.Type.AD_PROGRESS:m.call(this,e),o.default.createStdEvent("adprogress",this.dom.container);break;case google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED:o.default.createStdEvent("adcuepointschanged",this.dom.container);break;case google.ima.dai.api.StreamEvent.Type.CLICK:this.adPauseOnClick&&!this.getAdPaused()&&this.pause(),o.default.createStdEvent("adclick",this.dom.container);break;case google.ima.dai.api.StreamEvent.Type.ERROR:0,o.default.createStdEvent("aderror",this.dom.container),this.adImaDaiBackupStream?(this.startingBitratePath=this.adImaDaiBackupStream,d.default.initFinised.call(this)):u.default.fatal.call(this,"IMA DAI backup stream not provided - cannot recover",202,e);break;case google.ima.dai.api.StreamEvent.Type.STARTED:g.call(this,e),o.default.createStdEvent("adstarted",this.dom.container);break;case google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE:o.default.createStdEvent("adfirstquartile",this.dom.container);break;case google.ima.dai.api.StreamEvent.Type.MIDPOINT:o.default.createStdEvent("admidpoint",this.dom.container);break;case google.ima.dai.api.StreamEvent.Type.STREAM_INITIALIZED:o.default.createStdEvent("adstreaminitialized",this.dom.container);break;case google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE:o.default.createStdEvent("adthirdquartile",this.dom.container);break;case google.ima.dai.api.StreamEvent.Type.COMPLETE:o.default.createStdEvent("adcomplete",this.dom.container);break;case google.ima.dai.api.StreamEvent.Type.SKIPPABLE_STATE_CHANGED:o.default.createStdEvent("adskippablestatechanged",this.dom.container);break;case google.ima.dai.api.StreamEvent.Type.SKIPPED:o.default.createStdEvent("adskipped",this.dom.container);break;case google.ima.dai.api.StreamEvent.Type.VIDEO_CLICKED:o.default.createStdEvent("advideoclicked",this.dom.container)}},v=function(){this.adImaDaiBackupStream?(this.startingBitratePath=this.adImaDaiBackupStream,d.default.initFinised.call(this)):u.default.fatal.call(this,"IMA DAI backup stream not provided - cannot recover",202,null)};h.init=function(){if("undefined"==typeof google||void 0===google.ima||void 0===google.ima.dai)return void(0,n.default)(()=>{this.adParserLoadError?v.call(this):h.init.call(this)},100);if(this.adParserLoadError)return void v.call(this);this.dom.imaDaiClickElement=o.default.createElement("div","rmp-ima-dai-click-area"),this.dom.content.appendChild(this.dom.imaDaiClickElement);const e=new google.ima.dai.api.UiSettings;"auto"===this.adLocale&&(this.adLocale=l.default.codes[this.validatedLanguage][0]),e.setLocale(this.adLocale),this.imaDaiStreamManager=new google.ima.dai.api.StreamManager(this.dom.video,this.dom.imaDaiClickElement,e),this.imaDaiStreamManager.addEventListener([google.ima.dai.api.StreamEvent.Type.LOADED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,google.ima.dai.api.StreamEvent.Type.CLICK,google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.STARTED,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,google.ima.dai.api.StreamEvent.Type.MIDPOINT,google.ima.dai.api.StreamEvent.Type.STREAM_INITIALIZED,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,google.ima.dai.api.StreamEvent.Type.COMPLETE,google.ima.dai.api.StreamEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.dai.api.StreamEvent.Type.SKIPPED,google.ima.dai.api.StreamEvent.Type.VIDEO_CLICKED],(0,r.default)(b).call(b,this),!1),this.hlsJS.on(Hls.Events.FRAG_PARSING_METADATA,(e,t)=>{var a;this.imaDaiStreamManager&&t&&(0,s.default)(a=t.samples).call(a,e=>{this.imaDaiStreamManager.processMetadata("ID3",e.data,e.pts)})}),this.imaDaiLive?f.call(this,this.adImaDaiLiveAssetKey,this.adImaDaiApiKey,this.adImaDaiAdTagParameters,this.adImaDaiStreamActivityMonitorId):this.imaDaiVod&&p.call(this,this.adImaDaiVodContentSourceId,this.adImaDaiVodVideoId,this.adImaDaiApiKey,this.adImaDaiAdTagParameters,this.adImaDaiStreamActivityMonitorId)};var y=h;a.default=y},{"../abr/hls":5,"../core/utils/error":56,"../fw/defaults/language-defaults":68,"../fw/fw":70,"./ads-helpers":9,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/for-each":85,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/set-timeout":104,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],12:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/instance/trim")),r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),o=i(e("../fw/fw")),l=i(e("../fw/env")),d=i(e("../core/ready")),c=i(e("../core/volume/helpers")),u=i(e("../core/ui/core-ui")),h=i(e("../core/resize/resize")),p=i(e("../core/utils/error")),f=i(e("./ads-helpers"));const m={},g=function(){this.rmpVast.getIsUsingContentPlayerForAds()||(o.default.removeEvent("adresumed",this.dom.container,this.onRmpVastAdPlayPause),o.default.removeEvent("adpaused",this.dom.container,this.onRmpVastAdPlayPause)),o.default.removeEvent("adstarted",this.dom.container,this.onRmpVastAdStarted),o.default.removeEvent("addestroyed",this.dom.container,this.onRmpVastAdDestroyed),o.default.removeEvent("aderror",this.dom.container,this.onRmpVastAdError),o.default.removeEvent("adinteraction",this.dom.container,this.onRmpVastAdInteraction),o.default.removeEvent("adlinearchange",this.dom.container,this.onRmpVastAdLinearChanged)},b=function(){if(this.adPodInfo=this.rmpVast.getAdPodInfo(),o.default.setText(this.dom.adPod,""),this.adPodInfo&&this.dom.adInfo){const e=this.adPodInfo.adPodLength;if("number"==typeof e&&e>1){0,this.dom.adPod||(this.dom.adPod=o.default.createElement("span","rmp-ad-info-pod"),this.dom.adCountdown?this.dom.adInfo.insertBefore(this.dom.adPod,this.dom.adCountdown):this.dom.adInfo.appendChild(this.dom.adPod));const t=this.adPodInfo.adPodCurrentIndex;"number"==typeof t&&o.default.setText(this.dom.adPod,t+1+"/"+e)}}},v=function(){this.dom.container.removeEventListener("playing",this.onPlayingSeekToOffset),this.seekTo(this.offsetStartPosition),this.offsetStartPosition=0},y=function(){if(o.default.removeEvent("adstarted",this.dom.container,this.onRmpVastAdStarted),u.default.hideLoadingSpin.call(this),this.googleCast&&this.castConnected)return this.stopAds(),void this.play();h.default.resizeAds.call(this);const e=this.dom.container.querySelector(".rmp-ad-container");null!==e&&o.default.removeClass(e,"rmp-ad-overlay");const t=this.getAdLinear();if(f.default.updateVPAIDStatus.call(this,t),t)if(this.isVod&&o.default.removeEvent("ended",this.dom.video,this.ended),f.default.udpatePlayPause.call(this),f.default.setAdUI.call(this,!0),this.adCountDown&&this.dom.adInfo&&f.default.addCountDown.call(this),null===this.adPodInfo&&b.call(this),this.muted)c.default.setMuteAd.call(this,!0);else{let e=this.getVolume();c.default.setAd.call(this,e)}else{const t=this.getAdMediaHeight();t>-1&&t+40<this.height&&e&&o.default.addClass(e,"rmp-ad-overlay");let a=this.getCurrentTime();this.offsetStartPosition>0&&a<100&&(this.seekTo(this.offsetStartPosition),this.offsetStartPosition=0)}};m.restoreContentUI=function(){g.call(this),u.default.hideLoadingSpin.call(this),f.default.setAdUI.call(this,!1),this.isVod&&o.default.addEvent("ended",this.dom.video,this.ended)};const k=function(){if(this.adPodInfo=this.rmpVast.getAdPodInfo(),this.adPodInfo&&this.adPodInfo.adPodCurrentIndex+1!==this.adPodInfo.adPodLength){const e=this.adPodInfo.adPodCurrentIndex,t=this.adPodInfo.adPodLength;return"number"==typeof e&&"number"==typeof t&&o.default.setText(this.dom.adPod,e+2+"/"+t),void o.default.addEvent("adstarted",this.dom.container,this.onRmpVastAdStarted)}if(this.adPodInfo=null,this.adErrorDetected&&(this.adErrorDetected=!1,(0,n.default)(this.adTagWaterfall)&&"string"==typeof this.adTagWaterfall[0]&&""!==this.adTagWaterfall[0]))return this.adTagUrl=this.adTagWaterfall[0],this.adTagWaterfall.length>0&&this.adTagWaterfall.shift(),this.loadAds(this.adTagUrl),void o.default.createStdEvent("adclientsidewaterfallrequested",this.dom.container);if(this.adOutStream)return void f.default.endedOutStreamUI.call(this);this.readingPDorNative&&this.dom.video.addEventListener("error",this.generateError,!0);let e=this.getCurrentTime();this.offsetStartPosition>0&&0===e&&(this.onPlayingSeekToOffset=(0,r.default)(v).call(v,this),this.dom.container.addEventListener("playing",this.onPlayingSeekToOffset)),m.restoreContentUI.call(this)},w=function(){this.adErrorDetected=!0},S=function(){f.default.udpatePlayPause.call(this)},C=function(){o.default.createStdEvent("adinteraction",this.dom.container)},j=function(){o.default.createStdEvent("adlinearchanged",this.dom.container)};m.wireAdEvents=function(){this.rmpVast.getIsUsingContentPlayerForAds()||(this.onRmpVastAdPlayPause=(0,r.default)(S).call(S,this),o.default.addEvent("adresumed",this.dom.container,this.onRmpVastAdPlayPause),o.default.addEvent("adpaused",this.dom.container,this.onRmpVastAdPlayPause)),this.onRmpVastAdStarted=(0,r.default)(y).call(y,this),o.default.addEvent("adstarted",this.dom.container,this.onRmpVastAdStarted),this.onRmpVastAdDestroyed=(0,r.default)(k).call(k,this),o.default.addEvent("addestroyed",this.dom.container,this.onRmpVastAdDestroyed),this.onRmpVastAdError=(0,r.default)(w).call(w,this),o.default.addEvent("aderror",this.dom.container,this.onRmpVastAdError),this.onRmpVastAdInteraction=(0,r.default)(C).call(C,this),o.default.addEvent("adinteraction",this.dom.container,this.onRmpVastAdInteraction),this.onRmpVastAdLinearChanged=(0,r.default)(j).call(j,this),o.default.addEvent("adlinearchange",this.dom.container,this.onRmpVastAdLinearChanged)};const E=function(){this.dom.container.removeEventListener("adtagstartloading",this.onAdTagStartLoading),this.readingPDorNative&&this.dom.video.removeEventListener("error",this.generateError,!0),m.wireAdEvents.call(this)};m.requestAds=function(e){this.isVPAID=!1,u.default.showLoadingSpin.call(this),this.onAdTagStartLoading=(0,r.default)(E).call(E,this),this.dom.container.addEventListener("adtagstartloading",this.onAdTagStartLoading);const t=(0,s.default)(e).call(e);this.rmpVast.loadAds(t)};const L=function(){this.adParserLoaded=!0;const e={ajaxTimeout:this.adLoadVastTimeout,creativeLoadTimeout:this.adLoadMediaTimeout,ajaxWithCredentials:this.adAjaxWithCredentials,maxNumRedirects:this.adMaxNumRedirects,pauseOnClick:this.adPauseOnClick,skipMessage:this.labels.ads.skipMessage,skipWaitingMessage:this.labels.ads.skipWaitingMessage,textForClickUIOnMobile:this.labels.ads.textForClickUIOnMobile,outstream:this.adOutStream};if(this.adRmpVastEnableVpaid){e.enableVpaid=this.adRmpVastEnableVpaid;let t="normal";this.isInFullscreen&&(t="fullscreen");let a=500;l.default.isMobile||(a=750),e.vpaidSettings={width:this.width,height:this.height,viewMode:t,desiredBitrate:a}}this.rmpVast=new RmpVast(this.id,e),f.default.createControlBarAdInfo.call(this),d.default.fire.call(this)};m.init=function(){if(this.loadRmpVast=(0,r.default)(L).call(L,this),"undefined"!=typeof RmpVast)this.loadRmpVast();else{var e;0;let t=this.pathToRmpFiles+"rmp-vast/rmp-vast.min.js";0,o.default.getScript(t,this.loadRmpVast,(0,r.default)(e=p.default.warning).call(e,this,"failed to load rmp-vast external library",5e3,null))}},m.resumeAds=function(){this.rmpVast&&"function"==typeof this.rmpVast.play&&this.rmpVast.play()},m.pauseAds=function(){this.rmpVast&&"function"==typeof this.rmpVast.pause&&this.rmpVast.pause()};var A=m;a.default=A},{"../core/ready":46,"../core/resize/resize":47,"../core/ui/core-ui":52,"../core/utils/error":56,"../core/volume/helpers":63,"../fw/env":69,"../fw/fw":70,"./ads-helpers":9,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/trim":93,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],13:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/set-interval")),r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),o=i(e("../fw/fw"));const l={},d=function(){let e,t,a;if(this.isVod){const t=this.getCurrentTime();t>-1&&(e=Math.round(t/100)/10)}else e=this.liveAdSchedulerCheckerIndex;if((0,n.default)(this.adSchedule.midroll)&&(0,n.default)(this.adSchedule.midroll[0])&&(t=this.adSchedule.midroll[0][0],a=this.adSchedule.midroll[0][1],"number"==typeof t&&"number"==typeof e&&e>t&&"string"==typeof a&&""!==a)){if(this.isVod){var i;let e,t,a;if(this.dom.container.removeEventListener("timeupdate",this.adSchedulerChecker),a=(0,r.default)(i=function(){this.dom.container.removeEventListener("adstarted",a),this.getAdLinear()||this.dom.container.addEventListener("timeupdate",this.adSchedulerChecker)}).call(i,this),this.dom.container.addEventListener("adstarted",a),"ima"===this.adParser){var s,o;e=(0,r.default)(s=function(){this.dom.container.removeEventListener("adstarted",a),this.dom.container.removeEventListener("aderror",t),this.dom.container.removeEventListener("adcontentresumerequested",e),this.dom.container.addEventListener("timeupdate",this.adSchedulerChecker)}).call(s,this),this.dom.container.addEventListener("adcontentresumerequested",e),t=(0,r.default)(o=function(){this.dom.container.removeEventListener("adstarted",a),this.dom.container.removeEventListener("aderror",t),this.dom.container.removeEventListener("adcontentresumerequested",e),this.dom.container.addEventListener("timeupdate",this.adSchedulerChecker)}).call(o,this),this.dom.container.addEventListener("aderror",t)}else{var l;const e=(0,r.default)(l=function(){this.dom.container.removeEventListener("adstarted",a),this.dom.container.removeEventListener("addestroyed",e),this.dom.container.addEventListener("timeupdate",this.adSchedulerChecker)}).call(l,this);this.dom.container.addEventListener("addestroyed",e)}}this.loadAds(a),this.adSchedule.midroll.shift()}},c=function(){o.default.removeEvent("ended",this.dom.container,this.adSchedulerEnded),this.adSchedule.postroll&&this.loadAds(this.adSchedule.postroll)},u=function(){o.default.clearInterval(this.liveAdSchedulerChecker),this.liveAdSchedulerChecker=(0,s.default)(()=>{(!this.getAdOnStage()||this.getAdOnStage()&&!this.getAdLinear())&&(this.liveAdSchedulerCheckerIndex++,d.call(this))},1e3)},h=function(){o.default.clearInterval(this.liveAdSchedulerChecker)};l.destroy=function(){this.dom.container&&(this.isVod&&(this.dom.container.removeEventListener("timeupdate",this.adSchedulerChecker),this.dom.container.removeEventListener("ended",this.adSchedulerEnded)),this.dom.container.removeEventListener("play",this.playScheduler),this.dom.container.removeEventListener("pause",this.pauseScheduler))},l.init=function(){this.adScheduleInput&&this.ads&&(this.adSchedulerChecker=(0,r.default)(d).call(d,this),this.isVod?(this.dom.container.addEventListener("timeupdate",this.adSchedulerChecker),this.adSchedulerEnded=(0,r.default)(c).call(c,this),this.dom.container.addEventListener("ended",this.adSchedulerEnded)):(this.playScheduler=(0,r.default)(u).call(u,this),this.dom.container.addEventListener("play",this.playScheduler),this.pauseScheduler=(0,r.default)(h).call(h,this),this.dom.container.addEventListener("pause",this.pauseScheduler)))};var p=l;a.default=p},{"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/set-interval":103,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],14:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/set-interval")),r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/index-of")),o=i(e("@babel/runtime-corejs3/core-js-stable/instance/for-each")),l=i(e("@babel/runtime-corejs3/core-js-stable/set-timeout")),d=i(e("../fw/fw"));const c={},u=function(){if(this.dom.container.removeEventListener("ready",this.logGaReady),ga(this.gaCommand,"event",this.gaCategory,"ready",this.gaLabel,{nonInteraction:this.gaNonInteractionEvents}),this.gaContext){const e=this.getPlayerMode(),t=this.getStreamType();if(""===e||""===t&&"nosupport"!==e)return;let a=e;"nosupport"!==e&&(a+="-"+t),ga(this.gaCommand,"event",this.gaCategory,a,this.gaLabel,{nonInteraction:this.gaNonInteractionEvents})}},h=function(){this.dom.container.removeEventListener("playing",this.logGaPlayerStart),this.dom.container.removeEventListener("adloaded",this.logGaPlayerStart),ga(this.gaCommand,"event",this.gaCategory,"playerstart",this.gaLabel,{nonInteraction:this.gaNonInteractionEvents})},p=function(){this.dom.container.removeEventListener("playing",this.logGaPlayerStart),this.dom.container.removeEventListener("adloaded",this.logGaPlayerStart),this.dom.container.addEventListener("playing",this.logGaPlayerStart),this.dom.container.addEventListener("adloaded",this.logGaPlayerStart)},f=function(){ga(this.gaCommand,"event",this.gaCategory,"error",this.gaLabel,{nonInteraction:this.gaNonInteractionEvents})},m=function(){ga(this.gaCommand,"event",this.gaCategory,"adimpression",this.gaLabel,{nonInteraction:this.gaNonInteractionEvents})},g=function(){this.dom.container.removeEventListener("adloadererror",this.logGaAdLoaderError),ga(this.gaCommand,"event",this.gaCategory,"adloadererror",this.gaLabel,{nonInteraction:this.gaNonInteractionEvents})},b=function(){ga(this.gaCommand,"event",this.gaCategory,"aderror",this.gaLabel,{nonInteraction:this.gaNonInteractionEvents})},v=function(){ga(this.gaCommand,"event",this.gaCategory,"enterfullscreen",this.gaLabel,{nonInteraction:this.gaNonInteractionEvents})},y=function(){ga(this.gaCommand,"event",this.gaCategory,"ended",this.gaLabel,{nonInteraction:this.gaNonInteractionEvents})},k=function(){this.isVod&&!this.gaSeekingSending&&(this.gaSeekingSending=!0,d.default.clearTimeout(this.logGaSeekingTimeout),this.logGaSeekingTimeout=(0,l.default)(()=>{this.gaSeekingSending=!1},400),ga(this.gaCommand,"event",this.gaCategory,"seeking",this.gaLabel,{nonInteraction:this.gaNonInteractionEvents}))},w=function(){ga(this.gaCommand,"event",this.gaCategory,"adclick",this.gaLabel,{nonInteraction:this.gaNonInteractionEvents})},S=function(){var e,t,a,i,s,l;if("undefined"==typeof ga&&(e=window,t=document,a="script",i="ga",e.GoogleAnalyticsObject=i,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,s=t.createElement(a),l=t.getElementsByTagName(a)[0],s.async=1,s.src="https://www.google-analytics.com/analytics.js",l.parentNode.insertBefore(s,l)),"undefined"!=typeof ga){this.gaAnonymizeIp&&ga("set","anonymizeIp",!0),""!==this.gaNamedTracker?(ga("create",this.gaTrackingId,"auto",this.gaNamedTracker),this.gaCommand=this.gaNamedTracker+".send"):ga("create",this.gaTrackingId,"auto"),0===this.gaEvents.length&&(this.gaEvents=["context","ready","playerstart","error","adimpression","adloadererror","aderror"]);const e=function(e){const t=["context","ready","playerstart","error","adimpression","adloadererror","aderror","enterfullscreen","ended","seeking","adclick"],a=[];return(0,o.default)(e).call(e,e=>{(0,n.default)(t).call(t,e)>-1&&a.push(e)}),a}(this.gaEvents);0,(0,o.default)(e).call(e,e=>{switch(e){case"context":this.gaContext=!0;break;case"ready":this.logGaReady=(0,r.default)(u).call(u,this),this.dom.container.addEventListener("ready",this.logGaReady);break;case"playerstart":this.logGaPlayerStart=(0,r.default)(h).call(h,this),this.dom.container.addEventListener("playing",this.logGaPlayerStart),this.ads&&this.dom.container.addEventListener("adloaded",this.logGaPlayerStart),this.logGaSrcChanged=(0,r.default)(p).call(p,this),this.dom.container.addEventListener("srcchanged",this.logGaSrcChanged);break;case"error":this.logGaError=(0,r.default)(f).call(f,this),this.dom.container.addEventListener("error",this.logGaError);break;case"adimpression":this.ads&&(this.logGaAdImpression=(0,r.default)(m).call(m,this),this.dom.container.addEventListener("adimpression",this.logGaAdImpression));break;case"adloadererror":this.ads&&(this.logGaAdLoaderError=(0,r.default)(g).call(g,this),this.dom.container.addEventListener("adloadererror",this.logGaAdLoaderError));break;case"aderror":this.ads&&(this.logGaAdError=(0,r.default)(b).call(b,this),this.dom.container.addEventListener("aderror",this.logGaAdError));break;case"enterfullscreen":this.logGaFullscreen=(0,r.default)(v).call(v,this),this.dom.container.addEventListener("enterfullscreen",this.logGaFullscreen);break;case"ended":this.isVod&&(this.logGaEnded=(0,r.default)(y).call(y,this),this.dom.container.addEventListener("ended",this.logGaEnded));break;case"seeking":this.isVod&&(this.logGaSeeking=(0,r.default)(k).call(k,this),this.dom.container.addEventListener("seeking",this.logGaSeeking));break;case"adclick":this.ads&&(this.logGaAdClick=(0,r.default)(w).call(w,this),this.dom.container.addEventListener("adclick",this.logGaAdClick))}})}},C=function(){d.default.clearInterval(this.analyticsInterval),this.analyticsInterval=(0,s.default)(()=>{this.changingSrc||this.getAdOnStage()&&this.getAdLinear()||(this.analyticsSecondsPlayed=this.analyticsSecondsPlayed+.25)},250)},j=function(){d.default.clearInterval(this.analyticsInterval)};c.reset=function(){d.default.clearInterval(this.analyticsInterval),this.dom.container&&(this.dom.container.removeEventListener("playing",this.analyticsPlay),this.dom.container.removeEventListener("pause",this.analyticsPause),this.dom.container.removeEventListener("waiting",this.analyticsPause),this.dom.container.removeEventListener("ready",this.logGaReady),this.dom.container.removeEventListener("playing",this.logGaPlayerStart),this.dom.container.removeEventListener("srcchanged",this.logGaSrcChanged),this.dom.container.removeEventListener("error",this.logGaError),this.ads&&(this.dom.container.removeEventListener("adloaded",this.logGaPlayerStart),this.dom.container.removeEventListener("adimpression",this.logGaAdImpression),this.dom.container.removeEventListener("adloadererror",this.logGaAdLoaderError),this.dom.container.removeEventListener("aderror",this.logGaAdError),this.dom.container.removeEventListener("adclick",this.logGaAdClick)),this.dom.container.removeEventListener("enterfullscreen",this.logGaFullscreen),this.isVod&&(this.dom.container.removeEventListener("ended",this.logGaEnded),this.dom.container.removeEventListener("seeking",this.logGaSeeking)))},c.init=function(){this.analyticsPlay=(0,r.default)(C).call(C,this),this.dom.container.addEventListener("playing",this.analyticsPlay),this.analyticsPause=(0,r.default)(j).call(j,this),this.dom.container.addEventListener("pause",this.analyticsPause),this.dom.container.addEventListener("waiting",this.analyticsPause),""!==this.gaTrackingId&&S.call(this)};var E=c;a.default=E},{"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/for-each":85,"@babel/runtime-corejs3/core-js-stable/instance/index-of":87,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/set-interval":103,"@babel/runtime-corejs3/core-js-stable/set-timeout":104,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],15:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("@babel/runtime-corejs3/core-js-stable/set-timeout")),o=i(e("@babel/runtime-corejs3/core-js-stable/json/stringify")),l=i(e("@babel/runtime-corejs3/core-js-stable/parse-int")),d=i(e("@babel/runtime-corejs3/core-js-stable/promise")),c=i(e("../fw/env")),u=i(e("../fw/fw"));const h={},p="https://www.rmp-data.com/ls/increment.php",f=function(e,t,a){return new d.default((i,s)=>{if("undefined"!=typeof XMLHttpRequest){const r=new XMLHttpRequest;r.open("POST",t,!0),r.timeout=a,r.onloadend=function(){"number"==typeof r.status&&r.status>=200&&r.status<300?i():s()},r.ontimeout=function(){s()},r.send(e)}else s()})},m=function(){let e=0;if("plus"===this.licType&&c.default.localStorage(this.allowLocalStorage)){let t=window.localStorage.getItem("rmpBacklog");null!==t&&(t=JSON.parse(t),t.value&&(e=(0,l.default)(t.value)))}return e},g=function(){if(c.default.isOnline()){if(c.default.formData()){0;const e=new FormData;if(e.append("licType",this.licType),e.append("licenseKey",this.licenseKey),"file:"===c.default.getProtocol){let t="app";this.appName&&(t=t+"."+this.appName.replace(/\s/g,"-").toLowerCase()),e.append("hostname",t)}else e.append("hostname",this.ragnarok);e.append("version",this.playerVersion),e.append("cs",function(e){const t=e.split(".");if(3===t.length){const e=(0,l.default)(t[0])+(0,l.default)(t[1])+(0,l.default)(t[2]),a=[89,251,307,523,907,1171,1423],i=Math.floor(Math.random()*a.length);if("number"==typeof a[i]){return e*a[i]}}return 0}(this.playerVersion)),f(e,p,this.ajaxInternalTimeout).then(()=>{0}).catch(()=>{u.default.clearTimeout(this.logRetryTimeout),this.logRetryTimeout=(0,n.default)(()=>{f(e,p,this.ajaxInternalTimeout).then(()=>{0}).catch(()=>{0})},1e4)})}}else{const t=m.call(this);try{window.localStorage.setItem("rmpBacklog",(0,o.default)({value:(t+1).toString()}))}catch(e){u.default.trace(e)}}},b=function(){this.dom.container.removeEventListener("srcchanged",this.runLogsOnSrcChanged),this.dom.container.addEventListener("playing",this.runLogs),this.dom.container.addEventListener("adloaded",this.runLogs)},v=function(){h.destroy.call(this),this.dom.container.addEventListener("srcchanged",this.runLogsOnSrcChanged),this.appendFormDataAndSendLog()};h.destroy=function(){this.dom.container&&(this.dom.container.removeEventListener("srcchanged",this.runLogsOnSrcChanged),this.dom.container.removeEventListener("playing",this.runLogs),this.dom.container.removeEventListener("adloaded",this.runLogs))},h.init=function(){if(this.ragnarok===this.originLocal||this.ragnarok===this.altLocal)return;const e=Math.floor(10*Math.random()+1);if("plus"===this.licType&&(4===e||5===e)||5===e){this.runLogs=(0,r.default)(v).call(v,this),this.runLogsOnSrcChanged=(0,r.default)(b).call(b,this),this.appendFormDataAndSendLog=(0,r.default)(g).call(g,this),this.dom.container.addEventListener("playing",this.runLogs),this.dom.container.addEventListener("adloaded",this.runLogs);const e=m.call(this);if("plus"===this.licType&&e>0&&c.default.isOnline()){for(let t=0;t<e;t++)this.appendFormDataAndSendLog();if(c.default.localStorage(this.allowLocalStorage))try{window.localStorage.setItem("rmpBacklog",(0,o.default)({value:"0"}))}catch(t){u.default.trace(t)}}}};var y=h;a.default=y},{"../fw/env":69,"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/json/stringify":94,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/parse-int":101,"@babel/runtime-corejs3/core-js-stable/promise":102,"@babel/runtime-corejs3/core-js-stable/set-timeout":104,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.regexp.to-string":435,"core-js/modules/es.string.replace":438,"core-js/modules/es.string.split":439}],16:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),r=i(e("@babel/runtime-corejs3/core-js-stable/date/now")),n=i(e("../fw/fw"));const o={destroy:function(){this.dom.container.removeEventListener("error",this.onHlsjsErrorEmitMuxError),window.mux.removeHLSJS("#"+this.id+" .rmp-video")},detect:function(){void 0===window.mux||n.default.isEmptyObject(this.muxDataSettings)||n.default.isEmptyObject(this.muxDataSettings.data)||"string"!=typeof this.muxDataSettings.data.env_key||""===this.muxDataSettings.data.env_key||(this.muxData=!0,this.muxDataSettings.data.player_init_time=(0,r.default)(),this.muxDataSettings.data.player_name="radiantmediaplayer",this.muxDataSettings.data.player_version=this.playerVersion)}},l=function(){window.mux.emit("#"+this.id+" .rmp-video","error",{player_error_code:this.errorData.code,player_error_message:this.errorData.message})};o.initHlsJS=function(){this.muxDataHlsJSMonitored=!0;let e={};e.hlsjs=this.hlsJS,e.Hls=window.Hls,this.onHlsjsErrorEmitMuxError=(0,s.default)(l).call(l,this),this.dom.container.addEventListener("error",this.onHlsjsErrorEmitMuxError),window.mux.addHLSJS("#"+this.id+" .rmp-video",e)},o.initHTML5=function(){window.mux.monitor("#"+this.id+" .rmp-video",this.muxDataSettings)};var d=o;a.default=d},{"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/date/now":80,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],17:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/trim")),o=i(e("../fw/fw")),l=i(e("../fw/env")),d=i(e("../core/ui/core-ui")),c=i(e("../ads/ima-ads")),u=i(e("../ads/rmp-vast")),h=i(e("../ads/ads-helpers"));const p={};p.attach=function(e){e.prototype.getAdLinear=function(){return"ima"===this.adParser?this.isLinear:"rmp-vast"===this.adParser&&this.rmpVast?this.rmpVast.getAdLinear():void 0},e.prototype.getAdSystem=function(){return"ima"===this.adParser&&"string"==typeof this.adSystem?this.adSystem:"rmp-vast"===this.adParser&&this.rmpVast?this.rmpVast.getAdSystem():void 0},e.prototype.getAdContentType=function(){return"ima"===this.adParser&&"string"==typeof this.adContentType?this.adContentType:"rmp-vast"===this.adParser&&this.rmpVast?this.rmpVast.getAdContentType():void 0},e.prototype.getAdTitle=function(){return"ima"===this.adParser&&"string"==typeof this.adTitle?this.adTitle:"rmp-vast"===this.adParser&&this.rmpVast?this.rmpVast.getAdTitle():void 0},e.prototype.getAdDescription=function(){return"ima"===this.adParser&&"string"==typeof this.adDescription?this.adDescription:"rmp-vast"===this.adParser&&this.rmpVast?this.rmpVast.getAdDescription():void 0},e.prototype.getAdMediaUrl=function(){return"ima"===this.adParser&&"string"==typeof this.adMediaUrl?this.adMediaUrl:"rmp-vast"===this.adParser&&this.rmpVast?this.rmpVast.getAdMediaUrl():void 0},e.prototype.getAdMediaHeight=function(){if("ima"===this.adParser){let e;return e=this.isLinear?this.adVastMediaHeight:this.adNonLinearHeight,"number"==typeof e?e:-1}if("rmp-vast"===this.adParser&&this.rmpVast)return this.rmpVast.getAdMediaHeight()},e.prototype.getAdMediaWidth=function(){if(this.getAdOnStage())if("ima"===this.adParser){let e;if(e=this.isLinear?this.adVastMediaWidth:this.adNonLinearWidth,"number"==typeof e)return e}else if("rmp-vast"===this.adParser&&this.rmpVast)return this.rmpVast.getAdMediaWidth();return-1},e.prototype.getAdCurrentTime=function(){if(this.getAdOnStage()&&this.getAdLinear())if("ima"===this.adParser)if(this.adImaDai){if(this.imaDaiAdCurrentTime>=0)return Math.round(1e3*this.imaDaiAdCurrentTime)}else{const e=this.getAdDuration(),t=this.adsManager.getRemainingTime();if(o.default.isNumber(t)&&t>=0&&e>=0)return Math.round(e-1e3*t)}else if("rmp-vast"===this.adParser&&this.rmpVast)return this.rmpVast.getAdCurrentTime();return-1},e.prototype.getAdDuration=function(){if(this.getAdOnStage()&&this.getAdLinear()){if("ima"===this.adParser&&o.default.isNumber(this.adDuration)&&this.adDuration>=0)return 1e3*this.adDuration;if("rmp-vast"===this.adParser&&this.rmpVast)return this.rmpVast.getAdDuration()}return-1},e.prototype.getAdOnStage=function(){if(this.ads&&this.get5Ready()){if("ima"===this.adParser)return this.adOnStage;if("rmp-vast"===this.adParser&&this.rmpVast)return this.rmpVast.getAdOnStage()}return!1},e.prototype.getAdPaused=function(){if(this.getAdOnStage()&&this.getAdLinear()){if("ima"===this.adParser)return this.adImaDai?this.getPaused():this.adPaused;if("rmp-vast"===this.adParser&&this.rmpVast)return this.rmpVast.getAdPaused()}return!1},e.prototype.getAdTagUrl=function(){if(this.ads&&this.get5Ready()){if(this.adScheduleInput&&this.adSchedule.preroll&&!this.getPlayerInitialized())return h.default.replaceAdTagVar.call(this,this.adSchedule.preroll);if(""!==this.adTagUrl)return this.adTagUrl}return""};const t=function(){o.default.show(this.dom.controlBar),o.default.show(this.dom.volume),o.default.addEvent(["touchend","click"],this.dom.playPause,this.initiatePlayback),l.default.isMobile?o.default.addEvent(["touchend","click"],this.dom.centralMobileUI,this.initiatePlayback):o.default.addEvent(["touchend","click"],this.dom.overlayButton,this.initiatePlayback),d.default.showCentralPlay.call(this)},a=function(){"ima"===this.adParser?(this.dom.container.removeEventListener("adcontentresumerequested",this.onAdDestroyLoadAds),c.default.resetAdsForNewRequest.call(this),c.default.requestAds.call(this,this.adTagUrl)):(this.dom.container.removeEventListener("addestroyed",this.onAdDestroyLoadAds),u.default.restoreContentUI.call(this),u.default.requestAds.call(this,this.adTagUrl)),this.adOutStream&&t.call(this)};e.prototype.loadAds=function(e,t){if(this.ads&&this.get5Ready()){var i;if("string"!=typeof e)return void 0;if(this.googleCast&&this.castConnected)return void 0;if(this.videoVR&&this.vrModeOn)return void 0;if(this.adTagUrl=h.default.replaceAdTagVar.call(this,e),this.adTagUrl=(0,n.default)(i=this.adTagUrl).call(i),t)return void("ima"===this.adParser?c.default.requestAds.call(this,this.adTagUrl):u.default.requestAds.call(this,this.adTagUrl));if(this.onAdDestroyLoadAds=(0,r.default)(a).call(a,this),"ima"===this.adParser){if(!this.adDCInitialized)return;this.getAdOnStage()&&this.getAdLinear()?(this.dom.container.addEventListener("adcontentresumerequested",this.onAdDestroyLoadAds),this.stopAds()):this.onAdDestroyLoadAds()}else if("rmp-vast"===this.adParser&&this.rmpVast){if(!this.rmpVast.getInitialized())return;this.getAdOnStage()&&this.getAdLinear()?(this.dom.container.addEventListener("addestroyed",this.onAdDestroyLoadAds),this.stopAds()):this.onAdDestroyLoadAds()}}},e.prototype.stopAds=function(){if(this.ads&&this.get5Ready())if("ima"===this.adParser){if(this.adsManager){this.adOnStage=!1;try{this.adsManager.stop()}catch(e){o.default.trace(e)}}}else"rmp-vast"===this.adParser&&this.rmpVast&&this.rmpVast.stopAds()},e.prototype.skipAd=function(){if(this.ads&&this.get5Ready())if(this.getAdSkippableState())if("ima"===this.adParser){if(this.adsManager)try{this.adsManager.skip()}catch(e){o.default.trace(e)}}else"rmp-vast"===this.adParser&&this.rmpVast&&(this.rmpVast.getIsSkippableAd()||this.isVpaidCreative()?this.rmpVast.skipAd():this.adSkipButton&&this.dom.adSkipMessage&&"block"===this.dom.adSkipMessage.style.display&&h.default.onClickSkipAd.call(this,null));else 0},e.prototype.getAdSkippableState=function(){if(this.ads&&this.get5Ready()&&this.getAdOnStage())if("ima"===this.adParser){if(this.adImaDai)return this.imaDaiIsSkippable;if(this.adsManager)try{return this.adsManager.getAdSkippableState()}catch(e){o.default.trace(e)}}else if("rmp-vast"===this.adParser&&this.rmpVast){if(this.rmpVast.getIsSkippableAd()||this.isVpaidCreative())return this.rmpVast.getAdSkippableState();if(this.adSkipButton&&this.dom.adSkipMessage&&"block"===this.dom.adSkipMessage.style.display)return!0}return!1},e.prototype.getAdUI=function(){return this.hasAdUI},e.prototype.setAdUI=function(e){"boolean"==typeof e&&this.get5Ready()&&h.default.setAdUI.call(this,e)},e.prototype.getAdErrorMessage=function(){if(this.get5Ready()){if("ima"===this.adParser&&this.adErrorMessage)return this.adErrorMessage;if("rmp-vast"===this.adParser&&this.rmpVast)return this.rmpVast.getAdErrorMessage()}return""},e.prototype.getAdVastErrorCode=function(){if(this.get5Ready()){if("ima"===this.adParser&&o.default.isNumber(this.adVastErrorCode))return this.adVastErrorCode;if("rmp-vast"===this.adParser&&this.rmpVast)return this.rmpVast.getAdVastErrorCode()}return-1},e.prototype.getAdErrorType=function(){if(this.get5Ready()){if("ima"===this.adParser&&this.adErrorType)return this.adErrorType;if("rmp-vast"===this.adParser&&this.rmpVast)return this.rmpVast.getAdErrorType()}return""},e.prototype.getAdPodInfo=function(){if(this.getAdOnStage()){if("ima"===this.adParser&&o.default.isObject(this.adPodInfo))return this.adPodInfo;if("rmp-vast"===this.adParser)return this.rmpVast.getAdPodInfo()}return null},e.prototype.getAdsManager=function(){return null!==this.adsManager?this.adsManager:null},e.prototype.getAdID=function(){return"string"==typeof this.adID?this.adID:""},e.prototype.getAdCreativeAdId=function(){return"string"==typeof this.adCreativeAdId?this.adCreativeAdId:""},e.prototype.getAdCreativeId=function(){return"string"==typeof this.adCreativeId?this.adCreativeId:""},e.prototype.getAdDealId=function(){return"string"==typeof this.adDealId?this.adDealId:""},e.prototype.getAdSurveyUrl=function(){return"string"==typeof this.adSurveyUrl?this.adSurveyUrl:""},e.prototype.getAdUniversalAdIdRegistry=function(){return"string"==typeof this.adUniversalAdIdRegistry?this.adUniversalAdIdRegistry:""},e.prototype.getAdUniversalAdIdValue=function(){return"string"==typeof this.adUniversalAdIdValue?this.adUniversalAdIdValue:""},e.prototype.getAdUniversalAdIds=function(){return(0,s.default)(this.adUniversalAdIds)?this.adUniversalAdIds:[]},e.prototype.getAdvertiserName=function(){return"string"==typeof this.adAdvertiserName?this.adAdvertiserName:""},e.prototype.getAdApiFramework=function(){return"string"==typeof this.adApiFramework?this.adApiFramework:""},e.prototype.getAdTraffickingParameters=function(){return o.default.isObject(this.adTraffickingParameters)?this.adTraffickingParameters:null},e.prototype.getAdTraffickingParametersString=function(){return"string"==typeof this.adTraffickingParametersString?this.adTraffickingParametersString:""},e.prototype.getAdWrapperAdIds=function(){return(0,s.default)(this.adWrapperAdIds)?this.adWrapperAdIds:[]},e.prototype.getAdWrapperAdSystems=function(){return(0,s.default)(this.adWrapperAdSystems)?this.adWrapperAdSystems:[]},e.prototype.getAdWrapperCreativeIds=function(){return(0,s.default)(this.adWrapperCreativeIds)?this.adWrapperCreativeIds:[]},e.prototype.getAdErrorCode=function(){return o.default.isNumber(this.adErrorCode)?this.adErrorCode:-1},e.prototype.getAdMinSuggestedDuration=function(){return o.default.isNumber(this.adMinSuggestedDuration)?this.adMinSuggestedDuration:-1},e.prototype.getAdSkipTimeOffset=function(){return o.default.isNumber(this.adSkipTimeOffset)?this.adSkipTimeOffset:-1},e.prototype.getAdUIElements=function(){return(0,s.default)(this.adUIElements)?this.adUIElements:[]},e.prototype.getAdVastMediaBitrate=function(){return o.default.isNumber(this.adVastMediaBitrate)?this.adVastMediaBitrate:0},e.prototype.getAdVastMediaHeight=function(){return o.default.isNumber(this.adVastMediaHeight)?this.adVastMediaHeight:0},e.prototype.getAdVastMediaWidth=function(){return o.default.isNumber(this.adVastMediaWidth)?this.adVastMediaWidth:0},e.prototype.getCompanionAds=function(e,t,a){if(this.ads&&this.get5Ready()){let i=300;"number"==typeof e&&e>0&&(i=e);let r=250;if("number"==typeof t&&t>0&&(r=t),"ima"===this.adParser)if(this.adImaDai){if("function"==typeof this.currentAdForCompanion.getCompanionAds)return this.currentAdForCompanion.getCompanionAds()}else{const e=this.currentAdForCompanion.getCompanionAds(i,r,a);if((0,s.default)(e)&&e.length>0)return e}else if("rmp-vast"===this.adParser&&"function"==typeof this.rmpVast.getCompanionAdsList){const e=this.rmpVast.getCompanionAdsList(i,r);if((0,s.default)(e)&&e.length>0)return e}}return null},e.prototype.getCompanionAd=function(e){return this.ads&&this.get5Ready()&&"rmp-vast"===this.adParser&&"function"==typeof this.rmpVast.getCompanionAd?this.rmpVast.getCompanionAd(e):null},e.prototype.getAdParser=function(){return this.adParser},e.prototype.getAdParserBlocked=function(){return this.adParserLoadError},e.prototype.getAdBlockerDetected=function(){return"boolean"==typeof window.rmpGlobals.adBlockerDetected&&window.rmpGlobals.adBlockerDetected},e.prototype.isVpaidCreative=function(){return this.isVPAID}};var f=p;a.default=f},{"../ads/ads-helpers":9,"../ads/ima-ads":10,"../ads/rmp-vast":12,"../core/ui/core-ui":52,"../fw/env":69,"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/trim":93,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],18:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("../fw/fw"));const r={attach:function(e){e.prototype.getTimeViewed=function(){return this.get5Ready()&&s.default.isNumber(this.analyticsSecondsPlayed)?Math.round(1e3*this.analyticsSecondsPlayed):-1},e.prototype.getPercentViewed=function(){if(this.get5Ready()&&this.isVod&&s.default.isNumber(this.analyticsSecondsPlayed)){const e=this.getDuration();if(e>-1)return Math.round(1e3*this.analyticsSecondsPlayed*100/e)}return-1},e.prototype.getCurrentTimeInPercent=function(){if(this.get5Ready()&&this.isVod){let e=this.getCurrentTime(),t=this.getDuration();if(e>-1&&t>-1)return 100*e/t}return-1},e.prototype.getTimeReady=function(){return this.playerReady&&s.default.isNumber(this.timeReady)&&this.timeReady>0?this.timeReady:-1},e.prototype.getStartUpTime=function(){return this.get5Ready()?this.startUpTime:-1},e.prototype.getGALabel=function(){return"string"==typeof this.gaLabel&&""!==this.gaLabel?this.gaLabel:""},e.prototype.setGALabel=function(e){"string"==typeof e&&""!==e&&(this.gaLabel=e)},e.prototype.getGACategory=function(){return"string"==typeof this.gaCategory&&""!==this.gaCategory?this.gaCategory:""},e.prototype.setGACategory=function(e){"string"==typeof e&&""!==e&&(this.gaCategory=e)},e.prototype.sendGAEvent=function(e){this.get5Ready()&&"undefined"!=typeof ga&&"string"==typeof e&&""!==e&&ga(this.gaCommand,"event",this.gaCategory,e,this.gaLabel,{nonInteraction:this.gaNonInteractionEvents})}}};var n=r;a.default=n},{"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],19:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/instance/index-of")),r=i(e("@babel/runtime-corejs3/core-js-stable/number/is-finite")),n=i(e("@babel/runtime-corejs3/core-js-stable/number/is-nan")),o=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),l=i(e("../fw/fw")),d=i(e("../fw/env")),c=i(e("../fw/defaults/input-defaults")),u=i(e("../core/volume/helpers")),h=i(e("../core/resize/resize")),p=i(e("../ads/ima-ads")),f=i(e("../ads/rmp-vast")),m=i(e("../core/ui/core-ui")),g=i(e("../core/ui/logo")),b=i(e("../core/dvr/dvr")),v=i(e("../core/seek/seek")),y=i(e("../360/360")),k=i(e("../cast/cast")),w=i(e("../cast/cordova-cast")),S=i(e("../vtt/captions")),C=i(e("../vtt/thumbnails")),j=i(e("../core/modules/modules")),E=i(e("../../externals/rmp-connection"));const L={};L.attach=function(e){e.prototype.getReady=function(){return this.playerReady},e.prototype.get5Ready=function(){return this.isHTML5&&this.playerReady},e.prototype.getPlayerInitialized=function(){return this.playerInitialized},e.prototype.getEnvironment=function(){return d.default},e.prototype.getFramework=function(){return l.default},e.prototype.getDefaultPlayerSettings=function(){return c.default},e.prototype.getPlayerSettings=function(){return this.inputSettings},e.prototype.isStandalone=function(){return d.default.isStandalone},e.prototype.isWebView=function(){return d.default.isWebView},e.prototype.getPlayerVersion=function(){return this.playerVersion},e.prototype.getPreload=function(){return this.getReady()?this.preload:""},e.prototype.getPaused=function(){if(this.get5Ready()){if(w.default.isMediaLoaded.call(this))return"PAUSED"===this.castMedia.playerState;if(k.default.isMediaLoaded.call(this))return this.remotePlayer.isPaused;if("boolean"==typeof this.dom.video.paused)return this.dom.video.paused}return!1},e.prototype.getCurrentTime=function(){if(this.isLive)return-1;if(this.isLiveDvr)return this.dvrLiveMode?-1:this.dvrCurrentTime>=0?1e3*this.dvrCurrentTime:-1;if(w.default.isMediaLoaded.call(this))return w.default.getCurrentTime.call(this);if(k.default.isMediaLoaded.call(this))return k.default.getCurrentTime.call(this);if(this.getAdOnStage()&&this.getAdLinear()&&!this.adImaDai&&(d.default.isIos[0]||"rmp-vast"===this.adParser&&(d.default.isMacosSafari[0]||d.default.isIpadOS)))return-1;const e=l.default.getMediaCurrentTime(this.dom.video);return e>=0?Math.round(1e3*e):-1},e.prototype.getCurrentTimeBeforeSeek=function(){return this.currentTimeBeforeSeek},e.prototype.getDuration=function(){if(this.isLive)return-1;if(w.default.isMediaLoaded.call(this))return w.default.getDuration.call(this);if(k.default.isMediaLoaded.call(this))return k.default.getDuration.call(this);if(this.getAdOnStage()&&this.getAdLinear()&&!this.adImaDai&&(d.default.isIos[0]||"rmp-vast"===this.adParser&&(d.default.isMacosSafari[0]||d.default.isIpadOS)))return-1;if(this.isLiveDvr){if(this.readingHlsJS&&this.hlsJSLevelDuration>=0)return Math.round(1e3*this.hlsJSLevelDuration);if(this.shakaPlayer&&this.readingShaka){const e=this.shakaPlayer.seekRange(),t=e.start,a=e.end;if(l.default.isNumber(a)&&l.default.isNumber(t)&&a>0&&t>0){const e=a-t;return Math.round(1e3*e)}}return-1}const e=l.default.getMediaDuration(this.dom.video);return e>=0?Math.round(1e3*e):-1},e.prototype.getPlayerMode=function(){return this.playerReady?this.isHTML5?"html5":"nosupport":""},e.prototype.getStreamType=function(){let e="";return this.get5Ready()&&(this.readingDash?e="dash":this.readingHlsHevc?e="hlsHevc":this.readingHlsJS||this.readingHls||this.readingHlsShaka?e="hls":this.readingMp4Hevc&&this.readingMp4?e="mp4Hevc":this.readingMp4&&!this.readingWebM?e="mp4":this.readingMp4&&this.readingWebM?e="webm":this.readingM4a?e="m4a":this.readingMp3?e="mp3":this.readingOgg?e="ogg":this.readingOutstream&&(e="outstream")),e},e.prototype.getBufferLength=function(e){if("string"!=typeof e||"behind"!==e&&"ahead"!==e)return-1;if(this.get5Ready()){const t=this.getCurrentTime();if(t>-1&&void 0!==this.dom.video.buffered&&"function"==typeof this.dom.video.buffered.start&&"function"==typeof this.dom.video.buffered.end){const a=this.dom.video.buffered;for(let i=0;i<a.length;++i){const s=1e3*a.start(i),r=1e3*a.end(i);if(s<=t&&r>=t)return"behind"===e?Math.round(t-s):Math.round(r-t)}return-1}}return-1},e.prototype.getLoop=function(){return!(!this.get5Ready()||"boolean"!=typeof this.dom.video.loop)&&this.dom.video.loop},e.prototype.setLoop=function(e){!this.isVod||this.ads&&d.default.isIos[0]||"boolean"==typeof e&&this.dom.video&&(this.dom.video.loop=e)},e.prototype.getControls=function(){return!!this.get5Ready()&&this.controls},e.prototype.setControls=function(e){"boolean"==typeof e&&this.get5Ready()&&(e?m.default.protoShowControls.call(this):m.default.protoHideControls.call(this))},e.prototype.getControlsVisible=function(){if(this.get5Ready()&&!this.hideControls){if(l.default.hasClass(this.dom.container,"rmp-chrome"))return!0;if(l.default.hasClass(this.dom.container,"rmp-no-chrome"))return!1}return!1},e.prototype.setControlsVisible=function(e){"boolean"==typeof e&&this.get5Ready()&&!this.hideControls&&(e?m.default.showChrome.call(this):m.default.hideChrome.call(this))},e.prototype.getFullscreen=function(){return!!this.get5Ready()&&this.isInFullscreen},e.prototype.setFullscreen=function(e){if(this.get5Ready()&&"boolean"==typeof e){const t=this.getFullscreen();if(t&&e||!t&&!e)return;h.default.fullscreenInteraction.call(this)}},e.prototype.play=function(){this.get5Ready()&&(w.default.isMediaLoaded.call(this)?this.getPaused()&&this.castMedia.play({}):k.default.isMediaLoaded.call(this)?this.remotePlayer.isPaused&&this.remotePlayerController.playOrPause():this.getAdOnStage()&&this.getAdLinear()&&!this.adImaDai?this.getAdPaused()&&("ima"===this.adParser?p.default.resumeAds.call(this):f.default.resumeAds.call(this)):this.getPaused()&&this.initiatePlayback())},e.prototype.pause=function(){this.get5Ready()&&(w.default.isMediaLoaded.call(this)?this.getPaused()||this.castMedia.pause({}):k.default.isMediaLoaded.call(this)?this.remotePlayer.isPaused||this.remotePlayerController.playOrPause():this.getAdOnStage()&&this.getAdLinear()&&!this.adImaDai?this.getAdPaused()||("ima"===this.adParser?p.default.pauseAds.call(this):f.default.pauseAds.call(this)):this.getPaused()||this.initiatePlayback())};const t=function(){this.ads&&null!==this.postStop&&("ima"===this.adParser?this.dom.container.removeEventListener("adalladscompleted",this.postStop):"rmp-vast"===this.adParser&&this.rmpVast&&this.dom.container.removeEventListener("addestroyed",this.postStop)),this.getPaused()||this.pause(),this.isVod&&this.seekTo(0),this.showPoster(),l.default.createStdEvent("stopcompleted",this.dom.container)};e.prototype.stop=function(){if(this.get5Ready()){if(this.googleCast&&this.castConnected)return this.pause(),this.isVod&&(this.seekTo(0),l.default.setStyle(this.dom.current,{width:0}),l.default.setStyle(this.dom.handle,{left:0}),l.default.setText(this.dom.timeElapsedText,"00:00")),void l.default.createStdEvent("stopcompleted",this.dom.container);null===this.postStop&&(this.postStop=(0,o.default)(t).call(t,this)),this.getAdOnStage()?"ima"===this.adParser?this.getAdLinear()?(this.dom.container.addEventListener("adalladscompleted",this.postStop),this.stopAds()):(this.stopAds(),this.postStop()):"rmp-vast"===this.adParser&&this.rmpVast&&(this.dom.container.addEventListener("addestroyed",this.postStop),this.stopAds()):this.postStop()}},e.prototype.seekTo=function(e){if(this.get5Ready()){if(!l.default.isNumber(e))return void 0;if(this.isLive)return void 0;if(this.isLiveDvr)return void 0;if(this.getAdOnStage()&&this.getAdLinear())return void 0;if(e>=0){const t=l.default.precisionRound(e/1e3,2);if(w.default.isMediaLoaded.call(this)){let e=new chrome.cast.media.SeekRequest;return e.currentTime=t,void this.castMedia.seek(e)}if(k.default.isMediaLoaded.call(this))return this.remotePlayer.currentTime=t,void this.remotePlayerController.seek();l.default.setMediaCurrentTime(this.dom.video,t)}}},e.prototype.dvrSeekTo=function(e){if(this.isLiveDvr&&this.get5Ready()){if(!l.default.isNumber(e))return void 0;if(this.getAdOnStage()&&this.getAdLinear())return void 0;0,e<2e3&&(e=2e3);const t=this.getDuration();if(t>0){const a=e/t;if(a>=1)return;v.default.do.call(this,a)}}},e.prototype.dvrJumpToLive=function(){this.isLiveDvr&&this.get5Ready()&&b.default.setLiveMode.call(this,null)},e.prototype.getStreamMode=function(){if(this.get5Ready()){if(this.isLiveDvr)return this.dvrLiveMode?"livedvr":"voddvr";if(!this.detectLive)return this.isLive?"live":"vod"}return"unresolved"},e.prototype.getLiveCurrentTime=function(){if(this.get5Ready()){if(this.googleCast&&this.castConnected)return this.getCurrentTime();const e=this.getStreamMode();if("live"===e||"livedvr"===e){if(this.getAdOnStage()&&this.getAdLinear()&&!this.adImaDai&&(d.default.isIos[0]||"rmp-vast"===this.adParser&&(d.default.isMacosSafari[0]||d.default.isIpadOS)))return-1;const e=l.default.getMediaCurrentTime(this.dom.video);if(e>=0)return Math.round(1e3*e)}}return-1},e.prototype.getLiveDuration=function(){if(this.get5Ready()){if(w.default.isMediaLoaded.call(this))return this.castMedia.media.duration===Number.POSITIVE_INFINITY||this.castMedia.media.duration===Number.NEGATIVE_INFINITY?Number.POSITIVE_INFINITY:this.getDuration();if(k.default.isMediaLoaded.call(this))return this.remotePlayer.duration===Number.POSITIVE_INFINITY||this.remotePlayer.duration===Number.NEGATIVE_INFINITY?Number.POSITIVE_INFINITY:this.getDuration();const e=this.getStreamMode();if("live"===e||"livedvr"===e){if(this.getAdOnStage()&&this.getAdLinear()&&!this.adImaDai&&(d.default.isIos[0]||"rmp-vast"===this.adParser&&(d.default.isMacosSafari[0]||d.default.isIpadOS)))return-1;if(this.dom.video&&"number"==typeof this.dom.video.duration&&!(0,n.default)(this.dom.video.duration)){if((0,r.default)(this.dom.video.duration))return Math.round(1e3*this.dom.video.duration);if(this.dom.video.duration===Number.POSITIVE_INFINITY||this.dom.video.duration===Number.NEGATIVE_INFINITY)return Number.POSITIVE_INFINITY}}}return-1};const a=function(){return"ima"===this.adParser&&this.adsManager&&"function"==typeof this.adsManager.getVolume?this.adsManager.getVolume():"rmp-vast"===this.adParser&&this.rmpVast&&"function"==typeof this.rmpVast.getVolume?this.rmpVast.getVolume():-2};e.prototype.getVolume=function(){if(this.get5Ready()){let e;if(e=w.default.isMediaLoaded.call(this)?this.castMedia.volume.level:k.default.isMediaLoaded.call(this)?this.remotePlayer.volumeLevel:this.getAdOnStage()&&this.getAdLinear()&&!this.adImaDai?a.call(this):this.dom.video.volume,l.default.isNumber(e)&&-2!==e)return e}return-1},e.prototype.setVolume=function(e){if(l.default.isNumber(e)&&this.get5Ready()){let t;t=e<0?0:e>1?1:e,this.getMute()&&this.setMute(!1);let a=this.getVolume();if(a>=0&&a<=1&&a===t)return void 0;if(w.default.isMediaLoaded.call(this)){let e=new chrome.cast.Volume(t,this.getMute()),a=new chrome.cast.media.VolumeRequest(e);this.castMedia.setVolume(a)}else k.default.isMediaLoaded.call(this)?(this.remotePlayer.volumeLevel=t,this.remotePlayerController.setVolumeLevel()):(this.dom.video.volume=t,this.getAdOnStage()&&this.getAdLinear()&&!this.adImaDai&&u.default.setAd.call(this,t));0}},e.prototype.getMute=function(){return this.muted};const i=function(){if(this.volumeBeforeMute=this.getVolume(),(this.volumeBeforeMute<0||this.volumeBeforeMute>1)&&(this.volumeBeforeMute=.5),this.muted=!0,this.dom.video.muted=!0,w.default.isMediaLoaded.call(this)){let e=new chrome.cast.Volume(this.volumeBeforeMute,!0),t=new chrome.cast.media.VolumeRequest(e);this.castMedia.setVolume(t)}else k.default.isMediaLoaded.call(this)?this.remotePlayer.isMuted||this.remotePlayerController.muteOrUnmute():this.getAdOnStage()&&this.getAdLinear()&&!this.adImaDai&&u.default.setMuteAd.call(this,!0);if(this.volumeModuleUI){const e=this.dom.volume.querySelector(".rmp-i");null!==e&&(l.default.removeClass(e,"rmp-i-volume"),l.default.addClass(e,"rmp-i-off-volume"))}else if(this.audioOnly)l.default.removeClass(this.dom.audioOnlyVolumeIcon,"rmp-i-volume"),l.default.addClass(this.dom.audioOnlyVolumeIcon,"rmp-i-off-volume");else{const e=this.dom.controlBar.querySelector(".rmp-desktop-volume-icon");null!==e&&(l.default.removeClass(e,"rmp-i-volume"),l.default.addClass(e,"rmp-i-off-volume"))}},L=function(){if(!this.permanentMuted){if(this.muted=!1,this.dom.video.muted=!1,w.default.isMediaLoaded.call(this)){let e=new chrome.cast.Volume(this.volumeBeforeMute,!1),t=new chrome.cast.media.VolumeRequest(e);this.castMedia.setVolume(t)}else k.default.isMediaLoaded.call(this)?this.remotePlayer.isMuted&&this.remotePlayerController.muteOrUnmute():this.getAdOnStage()&&this.getAdLinear()&&!this.adImaDai&&u.default.setMuteAd.call(this,!1);if(this.volumeModuleUI){const e=this.dom.volume.querySelector(".rmp-i");null!==e&&(l.default.removeClass(e,"rmp-i-off-volume"),l.default.addClass(e,"rmp-i-volume"))}else this.audioOnly?(l.default.removeClass(this.dom.audioOnlyVolumeIcon,"rmp-i-off-volume"),l.default.addClass(this.dom.audioOnlyVolumeIcon,"rmp-i-volume")):(l.default.removeClass(this.dom.desktopVolumeIcon,"rmp-i-off-volume"),l.default.addClass(this.dom.desktopVolumeIcon,"rmp-i-volume"))}};e.prototype.setMute=function(e){this.get5Ready()&&(e?i.call(this):L.call(this))},e.prototype.getPlaybackRate=function(){return this.dom.video&&"number"==typeof this.dom.video.playbackRate?this.dom.video.playbackRate:-1},e.prototype.setPlaybackRate=function(e){if(this.get5Ready()){if(!l.default.isNumber(e))return void 0;const t=this.getPaused();!t&&d.default.isIos[0]&&this.pause(),this.dom.video.playbackRate=e,!t&&d.default.isIos[0]&&this.play()}},e.prototype.showCaptions=function(e){"string"==typeof e&&this.get5Ready()&&S.default.menuItemInteraction.call(this,e)},e.prototype.hideCaptions=function(){this.get5Ready()&&S.default.menuItemInteraction.call(this,"off")},e.prototype.getCCVisibleLanguage=function(){if(this.get5Ready()&&this.dom.captionsOverlayLevelsArea){const e=this.dom.captionsOverlayLevelsArea.querySelectorAll(".rmp-overlay-level");for(let t=0,a=e.length;t<a;t++){const a=e[t];if(l.default.hasClass(a,"rmp-overlay-level-active"))return a.getAttribute("lang")}}return""},e.prototype.getCaptionsData=function(){return this.get5Ready()?S.default.getData.call(this):null},e.prototype.getCaptionsList=function(){return this.get5Ready()&&this.hasExternalCCFiles&&this.ccFilesReady?this.loadedCCFiles:null},e.prototype.setCaptionsList=function(e){this.get5Ready()&&l.default.isValidTextTracksSet(e)&&(this.ccFiles=e,this.hasExternalCCFiles||(this.hasExternalCCFiles=!0),S.default.destroy.call(this),S.default.init.call(this))},e.prototype.showPoster=function(){this.get5Ready()&&l.default.show(this.dom.poster)},e.prototype.hidePoster=function(){this.get5Ready()&&l.default.hide(this.dom.poster)},e.prototype.resize=function(){this.playerReady&&h.default.resize.call(this)},e.prototype.getPlayerWidth=function(){return l.default.getWidth(this.dom.container)},e.prototype.getPlayerHeight=function(){return l.default.getHeight(this.dom.container)},e.prototype.setPlayerSize=function(e,t){if(!("number"!=typeof e||e<=0||"number"!=typeof t||t<=0)&&(!this.isInFullscreen||this.fullscreenFullWindowMode)&&!this.iframeMode&&!this.autoHeightMode&&this.playerReady){this.width=e,this.height=t,this.audioOnly&&(this.height=40);const a={width:e+"px",height:t+"px"};l.default.setStyle(this.dom.container,a),h.default.auxResize.call(this,e)}},e.prototype.getLogo=function(){if(this.logoAppended){let e="";""!==this.logo&&(e=this.logo);let t="";""!==this.logoLoc&&(t=this.logoLoc);return{img:e,loc:t}}return null},e.prototype.setLogo=function(e){if(!l.default.isEmptyObject(e)&&"string"==typeof e.img){if("string"==typeof e.loc&&(this.logoLoc=e.loc),this.logo=e.img,""===this.logo)return void(this.logoAppended&&l.default.hide(this.dom.logoImg));l.default.show(this.dom.logoImg),this.logoAppended?g.default.update.call(this):(g.default.init.call(this),g.default.append.call(this))}},e.prototype.getThumbnails=function(){return this.seekBarThumbnailsLoc},e.prototype.setThumbnails=function(e){"string"==typeof e&&""!==e&&(C.default.destroy.call(this),this.seekBarThumbnailsLoc=e,C.default.init.call(this))},e.prototype.getWaitingUI=function(){return!!l.default.hasClass(this.dom.container,"rmp-waiting")},e.prototype.setWaitingUI=function(e){this.get5Ready()&&"boolean"==typeof e&&(e&&!this.getWaitingUI()?m.default.showLoadingSpin.call(this):!e&&this.getWaitingUI()&&m.default.hideLoadingSpin.call(this))},e.prototype.getCamLat=function(){return this.lat},e.prototype.getCamLon=function(){return this.lon},e.prototype.getCamFov=function(){return this.fov},e.prototype.setCamLatLongFov=function(e,t,a){this.get5Ready()&&"number"==typeof e&&"number"==typeof t&&"number"==typeof a&&y.default.setCamLatLongFov.call(this,e,t,a,!0)},e.prototype.resetCamLatLongFov=function(){this.get5Ready()&&y.default.setCamLatLongFov.call(this,this.video360InitialLat,this.video360InitialLon,this.video360FocalLength,!0)},e.prototype.getChapters=function(){return this.get5Ready()&&this.chaptersArray.length>0?this.chaptersArray:null},e.prototype.seekToChapter=function(e){if(this.get5Ready()&&this.chaptersArray.length>0&&"number"==typeof e&&e>-1){null!==this.getChapters()&&void 0!==this.chaptersArray[e]&&this.seekTo(this.chaptersArray[e].start)}},e.prototype.getCastMediaLoaded=function(){return this.googleCast&&this.googleCastCordova?this.castConnected:!(!this.googleCast||!this.remotePlayer)&&this.remotePlayer.isMediaLoaded},e.prototype.getCastConnected=function(){return this.castConnected},e.prototype.getCastUrl=function(){return this.castUrl},e.prototype.getBandwidthEstimate=function(){let e=-1;return this.readingHlsJS?this.hlsJS&&!isNaN(this.hlsJS.bandwidthEstimate)&&(e=Math.round(this.hlsJS.bandwidthEstimate)):this.readingShaka?this.shakaPlayer&&"function"==typeof this.shakaPlayer.getStats&&(e=this.shakaPlayer.getStats(),e=e&&l.default.isNumber(e.estimatedBandwidth)?Math.round(e.estimatedBandwidth):-1):(e=E.default.getBandwidthEstimate(),e>-1&&(e=1e3*e*1e3)),e},e.prototype.getMetadata=function(){return l.default.isEmptyObject(this.meta)?null:this.meta},e.prototype.getHlsManifestData=function(){return this.get5Ready()&&this.readingHlsJS?this.hlsManifestData:null},e.prototype.getHlsSessionData=function(){return this.get5Ready()&&this.readingHlsJS?this.hlsSessionData:null},e.prototype.getHlsLevelData=function(){return this.get5Ready()&&this.readingHlsJS?this.hlsLevelData:null},e.prototype.getHlsFragmentData=function(){return this.get5Ready()&&this.readingHlsJS?this.hlsFragmentData:null},e.prototype.getHlsFragmentBeingPlayedData=function(){return this.get5Ready()&&this.readingHlsJS?this.hlsFragmentBeingPlayed:null},e.prototype.hlsStartLoad=function(){null!==this.hlsJS&&this.hlsJS.startLoad()},e.prototype.hlsStopLoad=function(){null!==this.hlsJS&&this.hlsJS.stopLoad()},e.prototype.getHlsJSInstance=function(){return this.hlsJS},e.prototype.getShakaPlayerInstance=function(){return this.shakaPlayer},e.prototype.getHtmlMediaElement=function(){return this.dom.video?this.dom.video:null},e.prototype.getErrorData=function(){return this.errorData},e.prototype.setModuleOverlayVisible=function(e,t){var a;"boolean"==typeof t&&"string"==typeof e&&(0,s.default)(a=j.default.types).call(a,e)>-1&&this.dom[e+"Overlay"]&&(t&&!l.default.isVisible(this.dom[e+"Overlay"])?j.default.open.call(this,e,null):!t&&l.default.isVisible(this.dom[e+"Overlay"])&&j.default.close.call(this,e,400,null))},e.prototype.getModuleOverlayVisible=function(e){var t;return!!("string"==typeof e&&(0,s.default)(t=j.default.types).call(t,e)>-1&&this.dom[e+"Overlay"])&&l.default.isVisible(this.dom[e+"Overlay"])},e.prototype.resetAutoplayCount=function(){d.default.localStorage(this.allowLocalStorage)&&window.localStorage.rmpAutoplayCount&&delete window.localStorage.rmpAutoplayCount},e.prototype.getPlayerVisible=function(){return this.playerVisible},e.prototype.getAutoplayMode=function(){return this.autoplayMode},e.prototype.getRatio=function(){const e={player:-1,media:-1},t=this.getPlayerWidth(),a=this.getPlayerHeight();if(t>0&&a>0&&(e.player=t/a),this.dom.video){const t=this.dom.video.videoWidth,a=this.dom.video.videoHeight;t>0&&a>0&&(e.media=t/a)}return e},e.prototype.getFramerate=function(){return this.frameRate}};var A=L;a.default=A},{"../../externals/rmp-connection":1,"../360/360":2,"../ads/ima-ads":10,"../ads/rmp-vast":12,"../cast/cast":29,"../cast/cordova-cast":30,"../core/dvr/dvr":33,"../core/modules/modules":39,"../core/resize/resize":47,"../core/seek/seek":50,"../core/ui/core-ui":52,"../core/ui/logo":54,"../core/volume/helpers":63,"../fw/defaults/input-defaults":67,"../fw/env":69,"../fw/fw":70,"../vtt/captions":75,"../vtt/thumbnails":77,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/index-of":87,"@babel/runtime-corejs3/core-js-stable/number/is-finite":95,"@babel/runtime-corejs3/core-js-stable/number/is-nan":96,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],20:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/set-timeout")),r=i(e("@babel/runtime-corejs3/core-js-stable/instance/find")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/for-each")),o=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),l=i(e("../fw/fw")),d=i(e("../abr/shaka")),c=i(e("../core/modules/modules")),u=i(e("../cast/cast"));const h={attach:function(e){e.prototype.getAudioTracks=function(){if(!this.get5Ready())return null;const e=[];if(this.readingHls&&this.dom.video.audioTracks&&this.dom.video.audioTracks.length>1)for(let a=0;a<this.dom.video.audioTracks.length;a++){const t=this.dom.video.audioTracks[a];t.enabled?e.push({language:t.language,active:!0,id:a}):e.push({language:t.language,active:!1,id:a})}else if((0,o.default)(this.hlsJSFilteredAudioTracks)&&this.hlsJSFilteredAudioTracks.length>0){var t;const a=this.hlsJS.audioTrack;(0,n.default)(t=this.hlsJSFilteredAudioTracks).call(t,(t,i)=>{t.id===a?e.push({language:t.lang,active:!0,id:i}):e.push({language:t.lang,active:!1,id:i})})}else if(this.readingShaka&&this.shakaPlayer){const t=this.shakaPlayer.getAudioLanguages(),a=this.shakaPlayer.getVariantTracks(),i=(0,r.default)(a).call(a,e=>!0===e.active);if(i){const a=i.language;(0,n.default)(t).call(t,(t,i)=>{t===a?e.push({language:t,active:!0,id:i}):e.push({language:t,active:!1,id:i})})}}return e.length>0?e:null},e.prototype.setAudioTrack=function(e){if(this.get5Ready()&&"number"==typeof e){if(this.googleCast&&u.default.setAudioTrack.call(this,e),this.readingHls&&this.dom.video.audioTracks&&this.dom.video.audioTracks.length>1){for(let t=0;t<this.dom.video.audioTracks.length;t++)this.dom.video.audioTracks[t].enabled=t===e;l.default.createStdEvent("audiotrackswitching",this.dom.container),(0,s.default)(()=>{l.default.createStdEvent("audiotrackswitched",this.dom.container)},0)}else if((0,o.default)(this.hlsJSFilteredAudioTracks)&&this.hlsJSFilteredAudioTracks.length>1&&l.default.isObject(this.hlsJSFilteredAudioTracks[e]))this.hlsJS.audioTrack=e;else if(this.readingShaka&&this.shakaPlayer){const t=this.getAudioTracks(),a=(0,r.default)(t).call(t,t=>t.id===e);if(a){if(this.shakaPlayer.selectAudioLanguage(a.language),this.abrAutoMode=!0,this.shakaPlayer.configure({abr:{enabled:!0}}),this.dom.qualityOverlayLevelsArea){const e=this.dom.qualityOverlayLevelsArea.querySelectorAll(".rmp-overlay-level"),t=[];for(let a=0,i=e.length;a<i;a++){const i=e[a];l.default.hasClass(i,"rmp-q0")?l.default.addClass(i,"rmp-overlay-level-active"):t.push(i)}(0,n.default)(t).call(t,e=>{l.default.removeElement(e)}),this.variantsPerLng.length>0&&!this.hideModule.quality&&d.default.setUpVideoRenditions.call(this)}if(!this.hasExternalCCFiles&&this.shakaTextTracks.length>0&&this.dom.captionsOverlayLevelsArea){this.defaultTrack=0;const e=this.dom.captionsOverlayLevelsArea.querySelectorAll(".rmp-overlay-level");for(let a=0,i=e.length;a<i;a++)l.default.removeClass(e[a],"rmp-overlay-level-active");const t=this.dom.container.querySelector(".captions-off");null!==t&&l.default.addClass(t,"rmp-overlay-level-active"),this.shakaPlayer.setTextTrackVisibility(!1)}l.default.createStdEvent("audiotrackswitching",this.dom.container),l.default.createStdEvent("shakaaudiotrackswitching",this.dom.container),(0,s.default)(()=>{l.default.createStdEvent("audiotrackswitched",this.dom.container)},0)}}c.default.setActiveLevel.call(this,"audio",e)}}}};var p=h;a.default=p},{"../abr/shaka":7,"../cast/cast":29,"../core/modules/modules":39,"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/instance/find":84,"@babel/runtime-corejs3/core-js-stable/instance/for-each":85,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/set-timeout":104,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],21:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/instance/find-index")),r=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/for-each")),o=i(e("@babel/runtime-corejs3/core-js-stable/instance/find")),l=i(e("../fw/fw")),d=i(e("../core/modules/quality")),c=i(e("../core/modules/modules")),u=i(e("../core/utils/utils"));const h={},p=function(e){let t=8;const a=(0,o.default)(e).call(e,e=>!0===e.active);if(a){const e=this.shakaPlayer.getManifest();if(e.periods[0]&&e.periods[0].variants){var i;const s=(0,o.default)(i=e.periods[0].variants).call(i,e=>e.id===a.id);if(s&&(s.audio||s.video)){let e;if(s.video?e=s.video:s.audio&&(e=s.audio),e){const a=e.findSegmentPosition(0);if("number"==typeof a){const i=e.getSegmentReference(a);"number"==typeof i.endTime&&"number"==typeof i.startTime&&(t=i.endTime-i.startTime)}}}}}return t};h.attach=function(e){e.prototype.getBitrates=function(){if(!this.get5Ready())return null;const e=[];if(this.readingShaka&&this.shakaPlayer){const t=this.shakaPlayer.getVariantTracks();return(0,n.default)(t).call(t,t=>{const a={};for(let i=0,s=this.shakaVideoRenditions.length;i<s;i++){const s=this.shakaVideoRenditions[i];if(t.id===s){a.id=i,a.active=!1,t.active&&(a.active=!0),t.bandwidth&&(a.bandwidth=t.bandwidth),t.width&&(a.width=t.width),t.height&&(a.height=t.height),t.videoCodec&&(a.videoCodec=t.videoCodec),t.audioCodec&&(a.audioCodec=t.audioCodec),e.push(a);break}}}),e}if(this.readingHlsJS&&this.hlsJS){if((0,r.default)(this.hlsJS.levels)&&this.hlsJS.levels.length>0){var t;const a=this.hlsJS.currentLevel;return(0,n.default)(t=this.hlsJS.levels).call(t,(t,i)=>{const s={};s.id=i,s.active=!1,i===a&&(s.active=!0),t.bitrate&&(s.bitrate=t.bitrate),t.width&&(s.width=t.width),t.height&&(s.height=t.height),t.videoCodec&&(s.videoCodec=t.videoCodec),t.audioCodec&&(s.audioCodec=t.audioCodec),e.push(s)}),e}}else{if(this.readingMp4){var a;const t=this.getCurrentBitrateIndex();return(0,n.default)(a=this.src.mp4).call(a,(a,i)=>{let s=!1;i===t&&(s=!0),e.push({active:s,id:i})}),e}if(this.readingM4a||this.readingMp3||this.readingOgg)return e.push({active:!0,id:0}),e}return null},e.prototype.setBitrate=function(e){if("number"!=typeof e)return void 0;if(!this.get5Ready())return void 0;if(this.getAdOnStage()&&this.getAdLinear())return void 0;const t=this.getBitrates();if(!(-1!==e&&void 0===t[e]||this.readingMp4&&-1===e))if(this.readingMp4)d.default.setMp4Bitrate.call(this,e);else if(this.readingShaka&&this.shakaPlayer){if(-1===e)this.abrAutoMode=!0,this.shakaPlayer.configure({abr:{enabled:!0}});else{this.abrAutoMode=!1,this.shakaPlayer.configure({abr:{enabled:!1}});const t=this.shakaVideoRenditions[e],a=this.shakaPlayer.getVariantTracks(),i=(0,o.default)(a).call(a,e=>e.id===t);if(i){let e=p.call(this,a);e<10&&(e*=2),"instant"===this.manualSwitchingMode?this.shakaPlayer.selectVariantTrack(i,!0):"smooth"===this.manualSwitchingMode?this.shakaPlayer.selectVariantTrack(i,!0,e):this.shakaPlayer.selectVariantTrack(i,!1),l.default.createStdEvent("levelswitching",this.dom.container)}}if(this.dom.qualityOverlayLevelsArea){const t=this.dom.qualityOverlayLevelsArea.querySelectorAll(".rmp-overlay-level");if(t.length>0&&t[e+1]){for(let e=0,a=t.length;e<a;e++)l.default.removeClass(t[e],"rmp-abr-active");l.default.addClass(t[e+1],"rmp-abr-active"),u.default.updateQualityModuleIcon.call(this,t[e+1])}c.default.setActiveLevel.call(this,"quality",e+1)}}else if(this.readingHlsJS&&this.hlsJS){if(-1===e){this.abrAutoMode=!0;try{"instant"===this.manualSwitchingMode?this.hlsJS.currentLevel=-1:"smooth"===this.manualSwitchingMode?this.hlsJS.nextLevel=-1:this.hlsJS.loadLevel=-1}catch(a){l.default.trace(a)}}else{const t=this.hlsJS.levels;if(t&&t.length&&e>=0&&e<t.length){this.abrAutoMode=!1;try{"instant"===this.manualSwitchingMode?this.hlsJS.currentLevel=e:"smooth"===this.manualSwitchingMode?this.hlsJS.nextLevel=e:this.hlsJS.loadLevel=e}catch(a){l.default.trace(a)}}else 0}c.default.setActiveLevel.call(this,"quality",e+1)}},e.prototype.getAbrAutoMode=function(){return!!this.get5Ready()&&(this.readingMse?this.abrAutoMode:!!this.readingHls||(this.readingMp4||this.readingM4a||this.readingMp3||this.readingOgg,!1))},e.prototype.getCurrentBitrateIndex=function(){if(!this.get5Ready())return-2;if(this.readingMse||this.readingHls){if(this.getAbrAutoMode())return-1;const e=this.getBitrates();if(e){const t=(0,o.default)(e).call(e,e=>!0===e.active);if(t&&"number"==typeof t.id)return t.id}}else{if(this.readingMp4){var e;const t=this.getSrc();let a=(0,s.default)(e=this.src.mp4).call(e,e=>e===t);return-1===a&&(a=0),a}if(this.readingM4a||this.readingMp3||this.readingOgg)return 0}return-2}};var f=h;a.default=f},{"../core/modules/modules":39,"../core/modules/quality":41,"../core/utils/utils":59,"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/instance/find":84,"@babel/runtime-corejs3/core-js-stable/instance/find-index":83,"@babel/runtime-corejs3/core-js-stable/instance/for-each":85,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],22:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/set-interval")),r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("@babel/runtime-corejs3/core-js-stable/set-timeout")),o=i(e("../fw/fw")),l=i(e("../fw/env")),d=i(e("../ads/ima-ads")),c=i(e("../ads/scheduler")),u=i(e("../ads/ads-helpers")),h=i(e("../analytics/logs")),p=i(e("../cast/cast")),f=i(e("../cast/cordova-cast")),m=i(e("../cast/airplay")),g=i(e("../abr/shaka")),b=i(e("../abr/hls")),v=i(e("../core/utils/viewable")),y=i(e("../core/accessible/accessible")),k=i(e("../vtt/captions")),w=i(e("../vtt/thumbnails")),S=i(e("../360/360")),C=i(e("../vr/vr")),j=i(e("../analytics/analytics")),E=i(e("../analytics/mux")),L=i(e("../core/utils/utils")),A=i(e("../core/utils/error")),T=i(e("../core/modules/pip"));const P={};P.attach=function(e){const t=function(){(0,n.default)(()=>{this.destroyRunning=!1,o.default.createStdEvent("destroycompleted",this.dom.container)},0)},a=function(){this.pip?T.default.destroy.call(this).then(()=>{t.call(this)}):t.call(this)},i=function(){this.dom.video.removeEventListener("durationchange",this.durationchangeFn),this.dom.video.removeEventListener("loadedmetadata",this.loadedmetadataFn),this.dom.video.removeEventListener("waiting",this.waitingFn),this.dom.video.removeEventListener("pause",this.pauseFn),this.dom.video.removeEventListener("play",this.playFn),this.dom.video.removeEventListener("timeupdate",this.timeupdateFn),this.dom.video.removeEventListener("webkitbeginfullscreen",this.webkitbeginfullscreenFn),this.dom.video.removeEventListener("webkitendfullscreen",this.webkitendfullscreenFn),this.dom.video.removeEventListener("ended",this.ended),this.dom.video.removeEventListener("volumechange",this.onVolumeChange),this.dom.video.removeEventListener("resize",this.nativeHlsResizeLevelSwitch),this.dom.video.removeEventListener("loadeddata",this.nativeHlsSetUpAudioTracks),this.dom.video.removeEventListener("error",this.generateError,!0),this.dom.video.removeEventListener("playing",this.unstalledBuffer),this.dom.video.removeEventListener("timeupdate",this.unstalledBuffer)},P=function(){this.dom.container.removeEventListener("adcontentresumerequested",this.postImaAdDestroy),d.default.resetAdsForNewRequest.call(this);try{this.adsLoader&&this.adsLoader.destroy(),this.adDisplayContainer&&this.adDisplayContainer.destroy()}catch(e){o.default.trace(e)}this.adsDestroyed=!0},M=function(){u.default.destroy.call(this),this.dom.container.removeEventListener("adcontentresumerequested",this.castInit),this.adScheduleInput&&c.default.destroy.call(this),L.default.clearAdAutoplayEvents.call(this),"ima"===this.adParser&&null===this.postImaAdDestroy&&(this.postImaAdDestroy=(0,r.default)(P).call(P,this)),"ima"===this.adParser?this.getAdOnStage()?this.getAdLinear()?(this.dom.container.addEventListener("adcontentresumerequested",this.postImaAdDestroy),this.stopAds()):(this.stopAds(),this.postImaAdDestroy()):this.postImaAdDestroy():this.getAdOnStage()?this.getAdLinear()?(this.dom.container.addEventListener("addestroyed",()=>{this.adsDestroyed=!0}),this.stopAds()):(this.stopAds(),this.adsDestroyed=!0):this.adsDestroyed=!0},I=function(){if(this.readingShaka){if(null===this.shakaPlayer)return void a.call(this);g.default.destroy.call(this);let e=!0;this.shakaPlayer.destroy().then(()=>{e&&(e=!1,a.call(this))}),(0,n.default)(()=>{e&&(e=!1,a.call(this))},1e3)}else if(this.readingHlsJS){if(null===this.hlsJS)return void a.call(this);b.default.destroy.call(this),a.call(this)}else this.readingPDorNative?(o.default.clearNativeHtml5Buffer(this.dom.video),a.call(this)):this.readingOutstream&&a.call(this)},x=function(){this.dom.container&&(l.default.isMobile&&(this.dom.container.removeEventListener("playing",this.onMobileStartAutoHideCentralUI),this.dom.container.removeEventListener("adloaded",this.onMobileStartAutoHideCentralUI),this.dom.container.removeEventListener("aderror",this.onMobileStartAutoHideCentralUI)),this.dom.container.removeEventListener("enterfullscreen",this.alignControlBarHint),this.dom.container.removeEventListener("exitfullscreen",this.alignControlBarHint),this.dom.container.removeEventListener("srcchanged",this.appendFormDataAndSendLog),this.dom.container.removeEventListener("loadedmetadata",this.afterSrcSwitch),this.dom.container.removeEventListener("contextmenu",o.default.contextMenuInteraction),this.dom.container.removeEventListener("mousemove",this.showChrome),this.dom.container.removeEventListener("touchend",this.containerTouch),this.dom.container.removeEventListener("click",this.containerClick),this.dom.container.removeEventListener("playing",this.setAudioTrackFn),this.dom.container.removeEventListener("resize",this.configureShakaCapLevelToPlayerSize),this.dom.container.removeEventListener("playing",this.onStartSeekToOffset),this.dom.container.removeEventListener("playing",this.onStartSetQuality),this.processInitiatePlayback&&this.dom.container.removeEventListener("loadedmetadata",this.processInitiatePlayback),this.dom.container.removeEventListener("playing",this.startUpLogPlaying),this.dom.container.removeEventListener("adloaded",this.startUpLogPlaying),this.dom.container.removeEventListener("advolumechanged",this.onAdVolumeChanged),this.dom.container.removeEventListener("loadedmetadata",this.afterMp4BitrateSwitch),this.hlsJSStopDownloadWhilePaused&&(this.dom.container.removeEventListener("playing",this.hlsOnFirstPlaying),this.dom.container.removeEventListener("pause",this.hlsOnPauseStopLoad),this.dom.container.removeEventListener("play",this.hlsOnPlayStartLoad)),l.default.isMobile&&this.automaticFullscreenOnLandscape&&this.dom.container.removeEventListener("playing",this.onPlayingAddFSOnOrientationChange),this.hasChapters&&(this.dom.container.removeEventListener("loadedmetadata",this.onLoadedmetadaAddChapters),this.dom.container.removeEventListener("timeupdate",this.updateCurrentChapter)))},R=function(){x.call(this),k.default.destroy.call(this),this.video360&&S.default.destroy.call(this),this.videoVR&&C.default.destroy.call(this),this.dom.video&&i.call(this),I.call(this)},D=function(){o.default.clearTimeout(this.imaLoadTimeout),o.default.clearTimeout(this.throttledResizeTimeout),o.default.clearTimeout(this.cssLinkTimeout),o.default.clearTimeout(this.logRetryTimeout),o.default.clearTimeout(this.logGaSeekingTimeout),o.default.clearTimeout(this.prerollMaskRemovalTimeout),o.default.clearTimeout(this.orientationChangeResizeTimeout),o.default.clearTimeout(this.siteCheckerRetryTimeout),o.default.clearTimeout(this.rmpPlusCheckerRetryTimeout),o.default.clearTimeout(this.hlsJSErrorRetryTimeout),o.default.clearInterval(this.progressiveInterval),o.default.clearInterval(this.hlsTextTracksCheckingInterval),o.default.clearInterval(this.hlsJSAbrInterval),o.default.clearInterval(this.adSkipInterval),o.default.clearInterval(this.adCountdownInterval),o.default.clearInterval(this.adRemainingTimeBarInterval),o.default.clearInterval(this.runAdsManagerInterval),o.default.clearInterval(this.liveAdSchedulerChecker),o.default.clearInterval(this.analyticsInterval),o.default.clearInterval(this.setSrcResetAdInterval),o.default.clearInterval(this.chromeTimer)},O=function(){if(document.removeEventListener("fullscreenchange",this.fullscreenchange),document.removeEventListener("fullscreenerror",this.fullscreenerror),document.removeEventListener("mouseup",this.mouseupDoc),document.removeEventListener("mousemove",this.mousemoveDoc),document.removeEventListener("mouseup",this.volumeMouseup),document.removeEventListener("mousemove",this.volumeMousemove),D.call(this),v.default.destroy.call(this),this.googleCast&&(this.googleCastCordova?f.default.destroy.call(this,!1):p.default.destroy.call(this)),m.default.destroy.call(this),this.offsetStartPosition>0&&this.isVod&&this.dom.container&&this.dom.container.removeEventListener("playing",this.onStartSeekToOffset),this.dummyThumbnailsImg&&w.default.destroy.call(this),this.ads){M.call(this);const e=(0,s.default)(()=>{this.adsDestroyed&&(o.default.clearInterval(e),R.call(this))},10)}else R.call(this)},F=function(){this.exitFSDestroy&&this.dom.container.removeEventListener("exitfullscreen",this.exitFSDestroy),this.proceedDestroy=!0};e.prototype.destroy=function(){if(this.playerReady)if(this.destroyRunning)A.default.warning.call(this,"destroy currently running - wait for completion before invoking",1004,null);else if(this.destroyRunning=!0,this.changingSrc&&(this.changingSrc=!1),o.default.removeEvent("resize",window,this.throttledResize),l.default.hasScreenOrientationAPI?window.screen.orientation.removeEventListener("change",this.throttledResize):void 0!==window.onorientationchange&&window.removeEventListener("orientationchange",this.throttledResize),l.default.hasScreenOrientationAPI?window.screen.orientation.removeEventListener("change",this.manageFSOnOrientationChange):void 0!==window.onorientationchange&&window.removeEventListener("orientationchange",this.manageFSOnOrientationChange),o.default.removeEvent("online",window,this.windowOnline),o.default.removeEvent("offline",window,this.windowOffline),this.disableKeyboardControl||(o.default.removeEvent("keyup",document,this.addTabKeyDetection),o.default.removeEvent("blur",this.dom.container,this.removeFocusToContainer),o.default.removeEvent("keyup",this.dom.container,this.bindKeyboard),o.default.removeEvent("keydown",this.dom.container,y.default.preventKeyDown)),h.default.destroy.call(this),this.isHTML5)if(j.default.reset.call(this),this.muxData&&this.readingHlsJS&&E.default.destroy.call(this),this.getFullscreen()&&(this.proceedDestroy=!1,this.exitFSDestroy=(0,r.default)(F).call(F,this),this.dom.container.addEventListener("exitfullscreen",this.exitFSDestroy),this.setFullscreen(!1)),this.proceedDestroy)O.call(this);else{const e=(0,s.default)(()=>{this.proceedDestroy&&(o.default.clearInterval(e),O.call(this))},10)}else a.call(this)}};var M=P;a.default=M},{"../360/360":2,"../abr/hls":5,"../abr/shaka":7,"../ads/ads-helpers":9,"../ads/ima-ads":10,"../ads/scheduler":13,"../analytics/analytics":14,"../analytics/logs":15,"../analytics/mux":16,"../cast/airplay":28,"../cast/cast":29,"../cast/cordova-cast":30,"../core/accessible/accessible":31,"../core/modules/pip":40,"../core/utils/error":56,"../core/utils/utils":59,"../core/utils/viewable":60,"../fw/env":69,"../fw/fw":70,"../vr/vr":74,"../vtt/captions":75,"../vtt/thumbnails":77,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/set-interval":103,"@babel/runtime-corejs3/core-js-stable/set-timeout":104,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],23:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.symbol.description"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/filter")),o=i(e("../fw/fw")),l=i(e("../fw/env")),d=i(e("../core/utils/metadata"));const c={attach:function(e){e.prototype.getContentMetadata=function(){return o.default.isEmptyObject(this.contentMetadata)?null:this.contentMetadata},e.prototype.setContentMetadata=function(e,t){this.contentMetadata=t?e:(0,n.default)(d.default).call(d.default,e),d.default.assignPoster.call(this),this.setContentTitle(this.contentMetadata.title),this.setContentDescription(this.contentMetadata.description),this.contentMetadata.id=e.id,this.setPoster(this.contentMetadata.poster),void 0!==window.navigator.mediaSession&&(window.navigator.mediaSession.metadata=new MediaMetadata(this.contentMetadata))},e.prototype.getAppName=function(){return this.appName},e.prototype.setContentTitle=function(e){if("string"==typeof e&&(this.contentMetadata.title=e),o.default.updateAriaLabel(this.dom.container,this.contentMetadata.title),this.sharing){const e=this.labels.hint.sharing+" "+this.uiSeparator+" "+this.contentMetadata.title;let t=this.dom.sharingOverlayWrapper.querySelector(".rmp-overlay-title-text");null!==t&&o.default.setText(t,e)}o.default.setText(this.dom.contentTitle,this.contentMetadata.title),(l.default.isIos[0]||l.default.isIpadOS)&&""!==this.contentMetadata.title&&this.dom.video&&this.dom.video.setAttribute("title",this.contentMetadata.title)},e.prototype.setContentDescription=function(e){"string"==typeof e&&(this.contentMetadata.description=e),o.default.setText(this.dom.descriptionLabel,this.contentMetadata.description),o.default.setText(this.dom.description,this.contentMetadata.description)},e.prototype.setPoster=function(e){let t="";t=(0,r.default)(e)&&"string"==typeof e[0]?d.default.getPoster(e):"string"==typeof e?e:o.default.blackFrame,this.dom.posterImg&&(o.default.removeClass(this.dom.poster,"rmp-no-display"),this.dom.posterImg.removeEventListener("load",this.onPosterLoad),this.dom.posterImg.removeEventListener("error",this.onPosterError),this.dom.posterImg.addEventListener("load",this.onPosterLoad),this.dom.posterImg.addEventListener("error",this.onPosterError),this.poster=t,this.dom.posterImg.src=this.poster)}}};var u=c;a.default=u},{"../core/utils/metadata":58,"../fw/env":69,"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/instance/filter":82,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.symbol.description":440}],24:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),r=i(e("@babel/runtime-corejs3/core-js-stable/instance/sort")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/find")),o=i(e("@babel/runtime-corejs3/core-js-stable/instance/filter")),l=i(e("../fw/fw")),d=i(e("../fw/env")),c=i(e("../core/utils/error"));const u={},h=function(e,t){this.shakaOfflineDownloadProgress=t,l.default.createStdEvent("downloadprogress",this.dom.container)},p=function(e){let t;const a=e.length;return t=1===a?e[0]:e[Math.floor(a/2)],t},f=function(e){var t;let a;const i=(0,o.default)(e).call(e,e=>"variant"===e.type);if(0===i.length)return[e[0]];const s=this.shakaPlayer.getVariantTracks(),l=(0,n.default)(s).call(s,e=>!0===e.active);if(!l)return[p(i)];const d=l.language,c=(0,r.default)(t=(0,o.default)(i).call(i,e=>e.language===d)).call(t,(e,t)=>e.bandwidth>t.bandwidth);if(0===c.length)return[p(i)];switch(this.shakaOfflinePreferredTrackQuality){case-3:0,a=c[c.length-1];break;case-2:0,a=c[0];break;case-1:0,a=p(c);break;default:a=this.shakaOfflinePreferredTrackQuality>=0&&c[this.shakaOfflinePreferredTrackQuality]?c[this.shakaOfflinePreferredTrackQuality]:p(c)}return[a]};u.init=function(){window.rmpStorage=new shaka.offline.Storage(this.shakaPlayer);let e=!0;e=this.shakaAutoDetectPersistentLicenseSupport?d.default.canUseOfflinePersistentLicense:this.shakaUsePersistentLicense;const t={offline:{progressCallback:(0,s.default)(h).call(h,this),usePersistentLicense:e}};-4!==this.shakaOfflinePreferredTrackQuality&&(t.offline.trackSelectionCallback=(0,s.default)(f).call(f,this)),this.shakaPlayer.configure(t)},u.attach=function(e){e.prototype.isOnline=function(){return d.default.isOnline()},e.prototype.hasDownloadSupport=function(){return!!("undefined"!=typeof shaka&&shaka.offline&&shaka.offline.Storage&&shaka.offline.Storage.support())},e.prototype.getDownloadedList=function(){return this.hasDownloadSupport()?this.shakaOfflineList:(c.default.warning.call(this,"offline storage is not supported in this environment",3007,null),null)},e.prototype.listDownloadedContent=function(){this.hasDownloadSupport()?window.rmpStorage?window.rmpStorage.list().then(e=>{this.shakaOfflineList=e,l.default.createStdEvent("downloadlistavailable",this.dom.container)}).catch(e=>{c.default.warning.call(this,"could not list offline downloaded content",3003,e)}):c.default.warning.call(this,"storage has not been initialized",3001,null):c.default.warning.call(this,"offline storage is not supported in this environment",3007,null)},e.prototype.download=function(e){if(!this.hasDownloadSupport())return void c.default.warning.call(this,"offline storage is not supported in this environment",3007,null);if(!window.rmpStorage)return void c.default.warning.call(this,"storage has not been initialized",3001,null);let t={};l.default.isObject(e)&&(t=e),this.shakaOfflineDownloadProgress=0,l.default.createStdEvent("downloadstarted",this.dom.container),this.offlineStoreOperation=window.rmpStorage.store(this.startingBitratePath,t),this.offlineStoreOperation.promise.then(()=>{h.call(this,null,1),this.offlineStoreOperation=null,l.default.createStdEvent("downloadcompleted",this.dom.container)}).catch(e=>{h.call(this,null,-1),this.offlineStoreOperation=null,c.default.warning.call(this,"could not download offline content",3002,e)})},e.prototype.abortDownload=function(){this.offlineStoreOperation&&this.offlineStoreOperation.abort().then(()=>{l.default.createStdEvent("abortdownloadcompleted",this.dom.container)}).catch(e=>{c.default.warning.call(this,"could not abort download of offline content",3008,e)})},e.prototype.getDownloadProgress=function(){return this.hasDownloadSupport()?this.shakaOfflineDownloadProgress:(c.default.warning.call(this,"offline storage is not supported in this environment",3007,null),-1)},e.prototype.loadDownload=function(e){this.hasDownloadSupport()?window.rmpStorage?e&&e.offlineUri?this.setSrc(e.offlineUri):c.default.warning.call(this,"could not load offline content - invalid input",3005,null):c.default.warning.call(this,"storage has not been initialized",3001,null):c.default.warning.call(this,"offline storage is not supported in this environment",3007,null)},e.prototype.removeDownload=function(e){this.hasDownloadSupport()?window.rmpStorage?window.rmpStorage.remove(e.offlineUri).then(()=>{l.default.createStdEvent("downloadremoved",this.dom.container)}).catch(e=>{c.default.warning.call(this,"could not remove offline downloaded content",3004,e)}):c.default.warning.call(this,"storage has not been initialized",3001,null):c.default.warning.call(this,"offline storage is not supported in this environment",3007,null)}};var m=u;a.default=m},{"../core/utils/error":56,"../fw/env":69,"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/filter":82,"@babel/runtime-corejs3/core-js-stable/instance/find":84,"@babel/runtime-corejs3/core-js-stable/instance/sort":90,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],25:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),r=i(e("../fw/fw")),n=i(e("../playlist/playlist"));const o={attach:function(e){e.prototype.getCurrentPlaylistItemIndex=function(){return this.currentPlaylistIndex},e.prototype.setPlaylistItem=function(e){this.get5Ready()&&"number"==typeof e&&e>=0&&n.default.loadItem.call(this,e,null)},e.prototype.isPlaylist=function(){return this.hasPlaylist},e.prototype.getPlaylistData=function(){return this.isPlaylist()&&this.playlistList.length>0&&r.default.isObject(this.playlistList[0])?this.playlistList:null},e.prototype.getPlaylistItem=function(e){if(this.isPlaylist()){if(!("number"==typeof e&&e>=0))return this.playlistList[this.currentPlaylistIndex];if(this.playlistList.length>0&&r.default.isObject(this.playlistList[e]))return this.playlistList[e]}return null},e.prototype.setPlaylistItemCallback=function(e){this.isPlaylist()&&"function"==typeof e&&(this.playlistCallback=e)},e.prototype.resetPlaylistItemCallback=function(){this.isPlaylist()&&(this.playlistCallback=null)},e.prototype.setPlaylistData=function(e){this.isPlaylist()&&("string"==typeof e&&""!==e||(0,s.default)(e)&&r.default.isObject(e[0]))&&n.default.setData.call(this,e,!1)}}};var l=o;a.default=l},{"../fw/fw":70,"../playlist/playlist":72,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],26:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),r=i(e("../fw/fw")),n=i(e("../playlist/related"));const o={attach:function(e){e.prototype.getCurrentRelatedItemIndex=function(){return this.currentRelatedIndex},e.prototype.setRelatedItem=function(e){this.get5Ready()&&"number"==typeof e&&e>=0&&n.default.loadItem.call(this,e,null)},e.prototype.isRelated=function(){return this.hasRelated},e.prototype.getRelatedData=function(){return this.isRelated()&&this.relatedList.length>0&&r.default.isObject(this.relatedList[0])?this.relatedList:null},e.prototype.getRelatedItem=function(e){if(this.isRelated()){if(!("number"==typeof e&&e>=0))return this.relatedList[this.currentRelatedIndex];if(this.relatedList.length>0&&r.default.isObject(this.relatedList[e]))return this.relatedList[e]}return null},e.prototype.setRelatedItemCallback=function(e){this.isRelated()&&"function"==typeof e&&(this.relatedCallback=e)},e.prototype.resetRelatedItemCallback=function(){this.isRelated()&&(this.relatedCallback=null)},e.prototype.setRelatedData=function(e){this.isRelated()&&("string"==typeof e&&""!==e||(0,s.default)(e)&&r.default.isObject(e[0]))&&n.default.setData.call(this,e,!1)}}};var l=o;a.default=l},{"../fw/fw":70,"../playlist/related":73,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],27:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/set-interval")),r=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),n=i(e("@babel/runtime-corejs3/core-js-stable/set-timeout")),o=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),l=i(e("../fw/fw")),d=i(e("../abr/shaka")),c=i(e("../abr/hls")),u=i(e("../core/ui/core-ui")),h=i(e("../core/modules/modules")),p=i(e("../core/modules/quality")),f=i(e("../vtt/captions")),m=i(e("../vtt/native-captions")),g=i(e("../ads/ima-ads")),b=i(e("../vtt/thumbnails")),v=i(e("../core/utils/error")),y=i(e("../core/utils/utils"));const k={};k.attach=function(e){const t=function(e){const t=this.getStreamType();let a="",i=!1;if("string"==typeof e)i=!0;else if(!l.default.isObject(e))return a;switch(t){case"hlsHevc":i?a=e:e.hlsHevc&&(a=e.hlsHevc);break;case"hls":i?a=e:e.hls&&(a=e.hls);break;case"dash":i?a=e:e.dash&&(a=e.dash);break;case"mp4":i?a=e:e.mp4&&e.mp4[0]&&(a=e.mp4[0]);break;case"mp4Hevc":i?a=e:e.mp4Hevc&&e.mp4Hevc[0]&&(a=e.mp4Hevc[0]);break;case"webm":i?a=e:e.webm&&e.webm[0]&&(a=e.webm[0]);break;case"m4a":i?a=e:e.m4a&&(a=e.m4a);break;case"mp3":i?a=e:e.mp3&&(a=e.mp3);break;case"ogg":i?a=e:e.ogg&&(a=e.ogg)}return a},a=function(){this.changingSrc=!1,l.default.createStdEvent("srcchanged",this.dom.container)},i=function(e){this.dom.container.removeEventListener("loadedmetadata",this.afterSrcSwitch),this.dom.container.removeEventListener("error",this.afterSrcSwitch),e&&e.type&&("loadedmetadata"===e.type?(this.srcChangeAutoplay?this.play():(u.default.showCentralPlay.call(this),this.showPoster()),this.googleCast&&this.castConnected&&this.loadCastMedia(!0),a.call(this)):"error"===e.type&&(this.changingSrc=!1))},k=function(){this.abrAutoMode||!this.readingMse&&!this.readingHls||(this.abrAutoMode=!0),this.readingMse||(this.dom.video.preload="auto"),this.analyticsSecondsPlayed=0},w=function(){this.hasChapters&&(this.dom.container.removeEventListener("loadedmetadata",this.onLoadedmetadaAddChapters),h.default.destroy.call(this,"chapters"),this.hasChapters=!1,this.chaptersArray=[]),this.hasThumbnails&&b.default.destroy.call(this);const e=this.dom.content.querySelector(".rmp-error");null!==e&&l.default.removeElement(e);const t=this.dom.content.querySelector(".rmp-error-text");null!==t&&l.default.removeElement(t),l.default.removeClass(this.dom.container,"rmp-linear-ad-ui"),l.default.removeClass(this.dom.container,"rmp-module-open-ui"),l.default.removeClass(this.dom.container,"rmp-ad-no-ui"),u.default.showLoadingSpin.call(this),u.default.showChrome.call(this),h.default.closeAll.call(this),this.setSrcPDModule||(this.dom.quality&&p.default.destroy.call(this),this.dom.audio&&h.default.destroy.call(this,"audio"),this.dom.captions&&f.default.destroy.call(this),this.isVod&&(l.default.setStyle(this.dom.current,{width:0}),l.default.setStyle(this.dom.handle,{left:0}),l.default.setText(this.dom.timeElapsedText,"00:00")),this.readingMp4&&this.src.mp4.length>1&&!this.hideModule.quality&&(p.default.setUpMP4UI.call(this),l.default.show(this.dom.quality)))},S=function(){this.dom.container.removeEventListener("adcontentresumerequested",this.setSrcResetIMA),g.default.resetAdsForNewRequest.call(this),this.setSrcAdReset=!0},C=function(){this.dom.container.removeEventListener("addestroyed",this.setSrcResetRmpVast),this.setSrcAdReset=!0},j=function(){"ima"===this.adParser?this.getAdLinear()?(this.setSrcResetIMA=(0,o.default)(S).call(S,this),this.dom.container.addEventListener("adcontentresumerequested",this.setSrcResetIMA),this.stopAds()):(g.default.resetAdsForNewRequest.call(this),this.setSrcAdReset=!0):(this.setSrcResetRmpVast=(0,o.default)(C).call(C,this),this.dom.container.addEventListener("addestroyed",this.setSrcResetRmpVast),this.stopAds())},E=function(){this.dom.video.src=this.startingBitratePath;try{this.dom.video.load()}catch(e){l.default.trace(e)}},L=function(){y.default.checkStreams.call(this,(0,o.default)(E).call(E,this),this.backupSrc,this.getStreamType())},A=function(){if(this.dom.container.addEventListener("loadedmetadata",this.afterSrcSwitch),this.dom.container.addEventListener("error",this.afterSrcSwitch),this.readingHlsJS)m.default.destroy.call(this),c.default.destroy.call(this),c.default.init.call(this);else if(this.readingShaka)if(this.shakaPlayer){d.default.destroy.call(this);let e=!0;this.shakaPlayer.destroy().then(()=>{e&&(e=!1,d.default.init.call(this))}),(0,n.default)(()=>{e&&(e=!1,d.default.init.call(this))},1e3)}else d.default.init.call(this);else L.call(this)};e.prototype.setSrc=function(e,h,p){if(!this.get5Ready())return void 0;if(this.readingFps||this.readingOutstream)return void 0;if(this.changingSrc)return void v.default.warning.call(this,"setSrc currently running - wait for completion before invoking",1005,null);const f=t.call(this,e);if(""===f)return void 0;if(this.readingMse&&this.msePreloadRequested){if(!this.msePreloadCompleted)return void 0;this.msePreloadRequested=!1}let m;if(this.changingSrc=!0,l.default.createStdEvent("srcchanging",this.dom.container),void 0!==h&&(0,r.default)(h)&&(m=h),this.backupSrc=[],m&&(this.backupSrc=h),this.src=e,this.castUrl=f,this.startingBitratePath=f,l.default.removeClass(this.dom.container,"rmp-error-ui"),this.readingMp4&&l.default.isObject(e)&&((0,r.default)(e.webm)&&e.webm.length>0||(0,r.default)(e.mp4)&&e.mp4.length>0)&&((0,r.default)(e.webm)&&this.readingWebM?this.src.mp4=e.webm:(0,r.default)(e.mp4)&&(this.src.mp4=e.mp4),"number"==typeof p&&p>-1?(this.startingBitratePath=this.src.mp4[p],this.castUrl=this.startingBitratePath):(this.initialBitrate=l.default.filterInitialBitrate(this.initialBitrate,this.src.mp4),this.startingBitratePath=this.src.mp4[this.initialBitrate],this.castUrl=this.startingBitratePath)),this.afterSrcSwitch?(this.dom.container.removeEventListener("loadedmetadata",this.afterSrcSwitch),this.dom.container.removeEventListener("error",this.afterSrcSwitch)):this.afterSrcSwitch=(0,o.default)(i).call(i,this),k.call(this),w.call(this),this.getPlayerInitialized())this.ads?("ima"===this.adParser?this.contentCompleteCalled=!1:this.rmpVast.setContentPlayerCompleted(!1),this.getAdOnStage()?(j.call(this),l.default.clearInterval(this.setSrcResetAdInterval),this.setSrcResetAdInterval=(0,s.default)(()=>{this.setSrcAdReset&&(l.default.clearInterval(this.setSrcResetAdInterval),this.setSrcAdReset=!1,A.call(this))},10)):A.call(this)):A.call(this);else{if(this.readingPDorNative)L.call(this),u.default.showCentralPlay.call(this);else if(this.readingHlsJS)this.msePreloadCompleted?(c.default.destroy.call(this),u.default.showCentralPlay.call(this),c.default.init.call(this),this.msePreloadRequested=!0):u.default.showCentralPlay.call(this);else if(this.readingShaka){if(this.msePreloadCompleted){d.default.destroy.call(this);let e=!0;return this.shakaPlayer.destroy().then(()=>{e&&(e=!1,u.default.showCentralPlay.call(this),d.default.init.call(this),this.msePreloadRequested=!0,a.call(this))}),void(0,n.default)(()=>{e&&(e=!1,u.default.showCentralPlay.call(this),d.default.init.call(this),this.msePreloadRequested=!0,a.call(this))},1e3)}u.default.showCentralPlay.call(this)}a.call(this)}},e.prototype.getSrc=function(){return this.startingBitratePath},e.prototype.isChangingSrc=function(){return this.changingSrc},e.prototype.getShakaCustomRequestFilter=function(){return this.shakaCustomRequestFilter},e.prototype.setShakaCustomRequestFilter=function(e){"function"==typeof e&&(this.shakaCustomRequestFilter=e)},e.prototype.getShakaRequestConfiguration=function(){return this.shakaRequestConfiguration},e.prototype.setShakaRequestConfiguration=function(e){l.default.isEmptyObject(e)||(this.shakaRequestConfiguration=e)},e.prototype.getShakaDrm=function(){return this.shakaDrm},e.prototype.setShakaDrm=function(e){l.default.isEmptyObject(e)||(this.shakaDrm=e)}};var w=k;a.default=w},{"../abr/hls":5,"../abr/shaka":7,"../ads/ima-ads":10,"../core/modules/modules":39,"../core/modules/quality":41,"../core/ui/core-ui":52,"../core/utils/error":56,"../core/utils/utils":59,"../fw/fw":70,"../vtt/captions":75,"../vtt/native-captions":76,"../vtt/thumbnails":77,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/set-interval":103,"@babel/runtime-corejs3/core-js-stable/set-timeout":104,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],28:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/set-timeout")),r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("../fw/fw")),o=i(e("../core/modules/modules"));const l={destroy:function(){this.dom.video&&(this.dom.video.removeEventListener("webkitplaybacktargetavailabilitychanged",this.onAirPlayAvailabilityChanged),this.dom.video.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.onAirPlayCurrentPlaybackTargetIsWirelessChanged)),this.dom.airplay&&this.dom.airplay.removeEventListener("click",this.onAirPlayClick),this.dom.container&&(this.dom.container.removeEventListener("loadedmetadata",this.onLoadedmetadataShowAirPlay),this.dom.container.removeEventListener("pause",this.onMediaLoadedForcePlayOnLocalPlayer)),n.default.clearTimeout(this.airplayConnectTimeout)}},d=function(){this.dom.container.removeEventListener("loadedmetadata",this.onLoadedmetadataShowAirPlay),o.default.deferredShow.call(this,"airplay")},c=function(e){e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault());try{this.dom.video.webkitShowPlaybackTargetPicker()}catch(t){n.default.trace(t)}},u=function(e){if(e)switch(e.availability){case"available":0,this.dom.airplay||(o.default.append.call(this,"airplay"),this.onAirPlayClick=(0,r.default)(c).call(c,this),n.default.addEvent(["touchend","click"],this.dom.airplay,this.onAirPlayClick),n.default.addClass(this.dom.container,"rmp-airplay-available"),this.dom.airPlayIcon=this.dom.container.querySelector(".rmp-i-airplay")),this.hasLoadedMetadata?o.default.deferredShow.call(this,"airplay"):(this.onLoadedmetadataShowAirPlay=(0,r.default)(d).call(d,this),this.dom.container.addEventListener("loadedmetadata",this.onLoadedmetadataShowAirPlay));break;default:n.default.hide(this.dom.airplay)}},h=function(){this.dom.container.removeEventListener("pause",this.onMediaLoadedForcePlayOnLocalPlayer),this.play()},p=function(e){e&&(this.airplayUIOn?(this.airplayUIOn=!1,this.dom.desktopVolumeContainer&&n.default.show(this.dom.desktopVolumeContainer),n.default.clearTimeout(this.airplayConnectTimeout),this.dom.container.removeEventListener("pause",this.onMediaLoadedForcePlayOnLocalPlayer),n.default.removeClass(this.dom.airPlayIcon,"rmp-i-airplay-connected"),n.default.createStdEvent("airplaymediaunloaded",this.dom.container)):(this.dom.container.addEventListener("pause",this.onMediaLoadedForcePlayOnLocalPlayer),this.airplayConnectTimeout=(0,s.default)(()=>{this.dom.container.removeEventListener("pause",this.onMediaLoadedForcePlayOnLocalPlayer)},5e3),this.airplayUIOn=!0,this.dom.desktopVolumeContainer&&n.default.hide(this.dom.desktopVolumeContainer),n.default.addClass(this.dom.airPlayIcon,"rmp-i-airplay-connected"),n.default.createStdEvent("airplaymedialoaded",this.dom.container)))};l.init=function(){"undefined"!=typeof WebKitPlaybackTargetAvailabilityEvent&&(this.onAirPlayAvailabilityChanged=(0,r.default)(u).call(u,this),this.dom.video.addEventListener("webkitplaybacktargetavailabilitychanged",this.onAirPlayAvailabilityChanged),this.onMediaLoadedForcePlayOnLocalPlayer=(0,r.default)(h).call(h,this),this.onAirPlayCurrentPlaybackTargetIsWirelessChanged=(0,r.default)(p).call(p,this),this.dom.video.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.onAirPlayCurrentPlaybackTargetIsWirelessChanged))};var f=l;a.default=f},{"../core/modules/modules":39,"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/set-timeout":104,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],29:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.string.replace"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/filter")),o=i(e("../fw/fw")),l=i(e("../core/ui/core-ui")),d=i(e("../core/events")),c=i(e("../core/modules/modules")),u=i(e("../core/utils/error")),h=i(e("../ads/ads-helpers")),p=i(e("../vtt/captions"));const f={};let m,g,b=!1,v=!1,y="",k=!1,w="Media",S=o.default.nullFn,C=o.default.nullFn,j=o.default.nullFn,E=o.default.nullFn,L=o.default.nullFn,A=o.default.nullFn,T=o.default.nullFn,P=o.default.nullFn,M=o.default.nullFn,I=o.default.nullFn,x=o.default.nullFn,R=o.default.nullFn,D=o.default.nullFn,O=o.default.nullFn,F=null,V=[];const B=function(){this.castConnected=!1,this.castMedia=null,this.remotePlayerState="",o.default.removeClass(this.dom.container,"rmp-casting");try{this.castSession.endSession(!0)}catch(e){o.default.catch(e)}};f.destroy=function(){this.castConnected&&B.call(this),this.remotePlayerController&&(this.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED,S),this.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,C),this.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,j),this.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.MEDIA_INFO_CHANGED,E),this.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.ANY_CHANGE,R),this.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED,L),this.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.IS_PLAYING_BREAK_CHANGED,x),this.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.WHEN_SKIPPABLE_CHANGED,D),this.isVod&&(this.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED,T),this.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.DURATION_CHANGED,P))),F&&(F.removeEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,I),F.removeEventListener(cast.framework.CastContextEventType.SESSION_STATE_CHANGED,A)),this.dom.container&&(this.dom.container.removeEventListener("play",O),this.dom.container.removeEventListener("playing",M),this.dom.container.removeEventListener("ready",this.castReady),this.dom.container.removeEventListener("playing",this.onPlayingSetupRemotePlayer))},f.isMediaLoaded=function(){return!!(this.googleCast&&this.remotePlayer&&this.remotePlayer.isMediaLoaded&&this.remotePlayerController&&this.castMedia)},f.setAudioTrack=function(e){if(this.remotePlayer&&this.remotePlayer.isMediaLoaded&&this.castMedia&&V.length>0){let t=(0,n.default)(V).call(V,e=>"AUDIO"===e.type);if(t[e]&&"number"==typeof t[e].trackId){let a=t[e].trackId;0;let i=new chrome.cast.media.EditTracksInfoRequest([a]);this.castMedia.editTracksInfo(i,o.default.log,o.default.trace)}}};const q=function(){p.default.filterGoogleCast.call(this);let e=new chrome.cast.media.TextTrackStyle;return e.foregroundColor="#"+this.googleCastCCForegroundColor,e.backgroundColor="#"+this.googleCastCCBackgroundColor,e.fontScale=this.googleCastCCFontScale,e.fontFamily=this.googleCastCCFontFamily,e.edgeType=this.googleCastTextTrackEdgeType.replace(/\s+/g,"_"),"00000000"!==this.googleCastCCWindowColor&&(e.windowType="NORMAL",e.windowColor="#"+this.googleCastCCWindowColor),e};f.setTextTrack=function(e){if(this.remotePlayer&&this.remotePlayer.isMediaLoaded&&this.castMedia&&V.length>0){let t=(0,n.default)(V).call(V,e=>"TEXT"===e.type);if(t[e]&&"number"==typeof t[e].trackId){let a=t[e].trackId,i=q.call(this);0;let s=new chrome.cast.media.EditTracksInfoRequest([a],i);this.castMedia.editTracksInfo(s,o.default.log,o.default.trace)}}},f.getDuration=function(){let e;return o.default.isNumber(this.remotePlayer.duration)&&this.remotePlayer.duration>=0&&(e=this.remotePlayer.duration),e?Math.round(1e3*e):-1},f.getCurrentTime=function(){return o.default.isNumber(this.remotePlayer.currentTime)&&this.remotePlayer.currentTime>=0?Math.round(1e3*this.remotePlayer.currentTime):-1};const U=function(){let e;this.remotePlayer&&("LOADING"===this.remotePlayerState||"BUFFERING"===this.remotePlayerState?l.default.showLoadingSpin.call(this):"LOADED"!==this.remotePlayerState&&"ENDED"!==this.remotePlayerState&&"IDLE"!==this.remotePlayerState&&"PLAYING"!==this.remotePlayerState&&"PAUSED"!==this.remotePlayerState||l.default.hideLoadingSpin.call(this),e=this.remotePlayerState),e||(e="STANDBY"),m||(m=o.default.createElement("div","rmp-cast-diplay-message rmp-color-bg"),g=o.default.createElement("div","rmp-cast-diplay-message-status rmp-color-bg"),this.dom.container.appendChild(m),this.dom.container.appendChild(g));let t=e;this.castSession&&(t+=" on "+this.castSession.getCastDevice().friendlyName),o.default.setText(m,w),o.default.setText(g,t)};f.skipAd=function(){if(this.castSession){const e=this.castSession.getMediaSession();this.castSession.sendMessage("urn:x-cast:com.google.cast.media",{type:"SKIP_AD",requestId:1,mediaSessionId:e.mediaSessionId})}};const H=function(e){v=!1,this.pauseRequestedByLoadCastMedia=!0,this.pause();let t=this.getVolume(),a=this.getMute(),i=new chrome.cast.media.MediaInfo(this.castUrl,y);i.metadata=new chrome.cast.media.GenericMediaMetadata,"MOVIE"===this.contentMetadata.googleCastType||"TV_SHOW"===this.contentMetadata.googleCastType?i.metadata.metadataType=this.contentMetadata.googleCastType:i.metadata.metadataType=chrome.cast.media.MetadataType.GENERIC,this.contentMetadata.title&&(w=this.contentMetadata.title),i.metadata.title=w;let s=this.poster;this.contentMetadata.poster.length>0&&(s=this.contentMetadata.poster[this.contentMetadata.poster.length-1]),i.metadata.images=[{url:s}],""!==this.contentMetadata.releaseDate&&(i.metadata.subtitle=this.contentMetadata.releaseDate),i.customData={},this.isVod?i.streamType=chrome.cast.media.StreamType.BUFFERED:(i.streamType=chrome.cast.media.StreamType.LIVE,i.customData.isLive=!0);let r=this.getCurrentTime();if(this.ads&&this.adTagUrl&&(i.customData.adTagUrl=this.adTagUrl),this.googleCastAdTagUrl&&(i.customData.adTagUrl=this.googleCastAdTagUrl),this.googleCastVmapAdsRequest&&(i.customData.vmapAdsRequest=this.googleCastVmapAdsRequest,i.customData.adTagUrl=""),o.default.isEmptyObject(this.shakaDrm)||o.default.isObject(this.shakaDrm.servers)&&this.shakaDrm.servers["com.widevine.alpha"]&&(i.customData.licenseUrl=this.shakaDrm.servers["com.widevine.alpha"]),o.default.isEmptyObject(this.shakaRequestConfiguration)||o.default.isObject(this.shakaRequestConfiguration.license)&&(o.default.isObject(this.shakaRequestConfiguration.license.headers)&&(i.customData.licenseHeaders=this.shakaRequestConfiguration.license.headers),"boolean"==typeof this.shakaRequestConfiguration.license.credentials&&(i.customData.credentials=this.shakaRequestConfiguration.license.credentials)),this.hasExternalCCFiles){let e=[];for(let t=0,a=this.ccFiles.length;t<a;t++)e[t]=new chrome.cast.media.Track(t+1,chrome.cast.media.TrackType.TEXT),e[t].trackContentId=this.ccFiles[t][2],e[t].trackContentType="text/vtt",e[t].subtype=chrome.cast.media.TextTrackType.SUBTITLES,e[t].name=this.ccFiles[t][1],e[t].language=this.ccFiles[t][0],e[t].customData=null;i.streamType=chrome.cast.media.StreamType.BUFFERED,i.textTrackStyle=q.call(this),i.duration=null,i.tracks=e}this.remotePlayerState="LOADING",U.call(this);let n=new chrome.cast.media.LoadRequest(i);this.hasExternalCCFiles&&this.defaultTrack>0&&(n.activeTrackIds=[this.defaultTrack]),this.castSession.loadMedia(n).then(()=>{if(this.pauseRequestedByLoadCastMedia=!1,this.remotePlayerState="LOADED",U.call(this),d.default.play.call(this),this.castMedia=this.castSession.getMediaSession(),e&&(r=0),r>0&&this.seekTo(r),V=this.castMedia.media.tracks,this.dom.captions&&this.dom.captionsOverlayLevelsArea){let e=this.dom.captionsOverlayLevelsArea.querySelectorAll(".rmp-overlay-level"),t=0;for(let a=0,i=e.length;a<i;a++)if(o.default.hasClass(e[a],"rmp-overlay-level-active")){t=a;break}t>0&&f.setTextTrack.call(this,t-1),o.default.show(this.dom.captionsOverlayLevelsArea),o.default.hide(this.dom.captionsOverlayFCCSettingsArea),c.default.closeButtonAdjust.call(this,"captions",!1),o.default.hide(this.dom.fccCompliantSettings)}if(this.dom.audio&&this.dom.audioOverlayLevelsArea){let e=this.dom.audioOverlayLevelsArea.querySelectorAll(".rmp-overlay-level"),t=0;for(let a=0,i=e.length;a<i;a++)if(o.default.hasClass(e[a],"rmp-overlay-level-active")){t=a;break}t>0&&f.setAudioTrack.call(this,t)}a?this.remotePlayer.isMuted||this.remotePlayerController.muteOrUnmute():t>=0&&t<=1&&(this.remotePlayer.volumeLevel=t,this.remotePlayerController.setVolumeLevel()),o.default.createStdEvent("castmedialoaded",this.dom.container)}).catch(e=>{B.call(this),v=!0,o.default.createStdEvent("castmediaerror",this.dom.container);let t=null;e&&(t=e),u.default.warning.call(this,"castSession.loadMedia failed on receiving device",7001,t)})},N=function(){this.dom.container.removeEventListener("play",O),this.loadCastMedia()},_=function(){var e;o.default.addClass(this.dom.container,"rmp-casting"),this.castSession=F.getCurrentSession(),this.castSession&&(this.castConnected=!0,O=(0,r.default)(N).call(N,this),this.castSession.addMessageListener("urn:x-cast:com.radiantmediaplayer.cast",(0,r.default)(e=function(e,t){let a=JSON.parse(t);"STATUS"===a.type&&"MEDIA_FINISHED"===a.message&&(this.remotePlayerState="ENDED",U.call(this),d.default.pause.call(this),this.hasRelated||this.hasPlaylist?d.default.endedPlaylistRelated.call(this):this.dom.container.addEventListener("play",O),o.default.createStdEvent("ended",this.dom.container))}).call(e,this)),b?(this.castMedia=this.castSession.getMediaSession(),this.castMedia?this.pause():this.loadCastMedia()):this.loadCastMedia(),b=!1)},W=function(){if(this.dom.container.removeEventListener("play",O),v)this.play();else if(this.remotePlayer){if(this.remotePlayer.savedPlayerState.isPaused||this.play(),this.isVod&&this.remotePlayer&&this.remotePlayer.savedPlayerState&&this.remotePlayer.savedPlayerState.currentTime){let e=this.remotePlayer.savedPlayerState.currentTime;o.default.isNumber(e)&&e>=0&&this.seekTo(1e3*e)}else this.isLiveDvr&&this.dvrJumpToLive();if(this.remotePlayer.isMuted)this.setMute(!0);else{const e=this.remotePlayer.volumeLevel;let t;t=e<=0?0:e>=1?1:e,this.dom.video.volume=t}this.dom.captionsOverlayLevelsArea&&o.default.show(this.dom.fccCompliantSettings)}B.call(this),o.default.createStdEvent("castmediaunloaded",this.dom.container)},z=function(){if(this.remotePlayer&&this.remotePlayer.playerState){switch(this.remotePlayer.playerState){case"BUFFERING":this.remotePlayerState="BUFFERING",o.default.createStdEvent("waiting",this.dom.container);break;case"PLAYING":this.remotePlayerState="PLAYING",o.default.createStdEvent("playing",this.dom.container);break;case"IDLE":this.remotePlayerState="IDLE";break;case"PAUSED":this.remotePlayerState="PAUSED"}U.call(this)}},J=function(){this.dom.container.removeEventListener("playing",this.onPlayingSetupRemotePlayer),_.call(this)},G=function(){this.remotePlayer.isConnected?this.getPlayerInitialized()?_.call(this):(this.initiatePlayback(),this.onPlayingSetupRemotePlayer=(0,r.default)(J).call(J,this),this.dom.container.addEventListener("playing",this.onPlayingSetupRemotePlayer)):W.call(this)},K=function(){0},Q=function(e){0},Y=function(){this.remotePlayer&&(this.remotePlayer.isPaused?d.default.pause.call(this):d.default.play.call(this))},X=function(){d.default.timeupdate.call(this)},$=function(){(this.remotePlayer.duration||this.remotePlayer.mediaInfo&&this.remotePlayer.mediaInfo.duration)&&d.default.durationchange.call(this)},Z=function(e){if(this.remotePlayer){if(this.remotePlayer.isMuted)this.setMute(!0);else{const e=this.remotePlayer.volumeLevel;let t;t=e<=0?0:e>=1?1:e,this.dom.video.volume=t}}},ee=function(){this.remotePlayer.isPlayingBreak?(h.default.setAdUI.call(this,!0),this.adOnStage=!0,o.default.createStdEvent("adstarted",this.dom.container)):(h.default.setAdUI.call(this,!1),this.adOnStage=!1,o.default.createStdEvent("adcomplete",this.dom.container))},te=function(){"number"==typeof this.remotePlayer.whenSkippable&&this.remotePlayer.whenSkippable>0&&(this.adSkipOffset=this.remotePlayer.whenSkippable,h.default.appendSkipUI.call(this))},ae=function(){this.remotePlayer=new cast.framework.RemotePlayer,this.remotePlayerController=new cast.framework.RemotePlayerController(this.remotePlayer),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,C),this.isVod&&(this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED,T),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.DURATION_CHANGED,P)),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED,L),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,j),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED,j),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.MEDIA_INFO_CHANGED,E),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED,S),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_PLAYING_BREAK_CHANGED,x),this.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.WHEN_SKIPPABLE_CHANGED,D)},ie=function(e){e&&e.stopPropagation(),this.getPlayerInitialized()||this.googleCastInit||(this.googleCastInit=!0,this.emptyInitAdTagUrl=!0,this.initiatePlayback()),l.default.showChrome.call(this)},se=function(){o.default.addClass(this.dom.container,"rmp-cast-available"),c.default.append.call(this,"cast"),o.default.addEvent(["touchend","click"],this.dom.cast,(0,r.default)(ie).call(ie,this)),c.default.deferredShow.call(this,"cast"),this.readingDash?y="application/dash+xml":this.readingHls||this.readingHlsJS||this.readingHlsShaka?y="application/vnd.apple.mpegurl":this.readingMp4&&!this.readingWebM?y="video/mp4":this.readingMp4&&this.readingWebM?y="video/webm":(this.audioOnly||this.audioOnlyUseVideoLayout||this.playlistAudioOnly||this.relatedAudioOnly)&&(this.readingM4a?y="audio/mp4":this.readingMp3?y="audio/mp3":this.readingOgg&&(y="audio/ogg")),this.castUrl=this.startingBitratePath,this.loadCastMedia=(0,r.default)(H).call(H,this),S=(0,r.default)(z).call(z,this),C=(0,r.default)(G).call(G,this),j=(0,r.default)(Z).call(Z,this),E=(0,r.default)(K).call(K,this),L=(0,r.default)(Y).call(Y,this),x=(0,r.default)(ee).call(ee,this),R=(0,r.default)(Q).call(Q,this),D=(0,r.default)(te).call(te,this),this.isVod&&(T=(0,r.default)(X).call(X,this),P=(0,r.default)($).call($,this)),ae.call(this)},re=function(e){if(e)switch(e.castState){case cast.framework.CastState.NO_DEVICES_AVAILABLE:0;break;case cast.framework.CastState.NOT_CONNECTED:case cast.framework.CastState.CONNECTED:0,k||(k=!0,se.call(this));break;case cast.framework.CastState.CONNECTING:0}},ne=function(e){if(e)switch(e.sessionState){case cast.framework.SessionState.NO_SESSION:case cast.framework.SessionState.SESSION_STARTING:case cast.framework.SessionState.SESSION_STARTED:0;break;case cast.framework.SessionState.SESSION_START_FAILED:0,B.call(this);break;case cast.framework.SessionState.SESSION_ENDING:case cast.framework.SessionState.SESSION_ENDED:0;break;case cast.framework.SessionState.SESSION_RESUMED:0,b=!0}},oe=function(){if(this.dom.container.removeEventListener("adcontentresumerequested",this.castInit),"undefined"==typeof cast||void 0===cast.framework||void 0===cast.framework.CastContext)return void 0;if(F=cast.framework.CastContext.getInstance(),!F)return void 0;let e=this.googleCastReceiverAppId;"cast-default"===e&&(e=chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID),F.setOptions({receiverApplicationId:e,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED}),I=(0,r.default)(re).call(re,this),F.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,I),A=(0,r.default)(ne).call(ne,this),F.addEventListener(cast.framework.CastContextEventType.SESSION_STATE_CHANGED,A);let t=F.getCastState();t!==cast.framework.CastState.NO_DEVICES_AVAILABLE&&(k=!0,se.call(this)),o.default.createStdEvent("castapiavailable",this.dom.container)};f.ready=function(){if(this.dom.container.removeEventListener("ready",this.castReady),this.googleCast)if(chrome.cast&&chrome.cast.isAvailable)oe.call(this);else{var e,t;let a="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1";window.__onGCastApiAvailable=(0,r.default)(e=function(e){e&&chrome.cast&&(this.castInit=(0,r.default)(oe).call(oe,this),this.getAdOnStage()&&this.getAdLinear()?this.dom.container.addEventListener("adcontentresumerequested",this.castInit):this.castInit(),delete window.__onGCastApiAvailable)}).call(e,this),o.default.getScript(a,(function(){}),(0,r.default)(t=u.default.warning).call(t,this,"failed to load cast_sender.js dependency",7e3,null))}};var le=f;a.default=le},{"../ads/ads-helpers":9,"../core/events":34,"../core/modules/modules":39,"../core/ui/core-ui":52,"../core/utils/error":56,"../fw/fw":70,"../vtt/captions":75,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/filter":82,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.string.replace":438}],30:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/set-interval")),r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("../fw/fw")),o=i(e("../core/modules/modules")),l=i(e("../core/events")),d=i(e("../core/ui/core-ui")),c=i(e("../core/utils/error"));const u={};let h,p="",f="Media",m=0,g=0,b=null;const v=function(){this.castMedia&&this.castMedia.removeUpdateListener(this.castMediaStatusUpdated),this.castMediaStatusUpdated=n.default.nullFn,this.castMediaEnded=!1,this.castSessionStopping=!1,this.castConnected=!1,this.castMedia=null,this.castSession=null,n.default.clearInterval(b)};u.destroy=function(e){this.castSession?(this.castSessionStopping=!0,this.castSession.stop(()=>{v.call(this),e&&(this.play(),this.seekTo(m))},()=>{v.call(this),e&&(this.play(),this.seekTo(m))})):v.call(this)};const y=function(){this.dom.container.removeEventListener("adcontentresumerequested",this.castInit),this.playerReady?this.castReady():this.dom.container.addEventListener("ready",this.castReady)};u.loadDebug=function(){if(chrome.cast&&chrome.cast.isAvailable)y.call(this);else{var e,t;let a="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1";window.__onGCastApiAvailable=(0,r.default)(e=function(e){e&&chrome.cast&&(this.castInit=(0,r.default)(y).call(y,this),this.getAdOnStage()&&this.getAdLinear()?this.dom.container.addEventListener("adcontentresumerequested",this.castInit):this.castInit(),delete window.__onGCastApiAvailable)}).call(e,this),n.default.getScript(a,(function(){}),(0,r.default)(t=c.default.warning).call(t,this,"failed to load cast_sender.js dependency",7e3,null))}},u.getDuration=function(){if(this.castMedia){let e=this.castMedia.media.duration;if(n.default.isNumber(e)&&e>=0)return Math.round(1e3*e)}return-1},u.getCurrentTime=function(){if(this.castMedia){let e=this.castMedia.getEstimatedTime();if(n.default.isNumber(e)&&e>=0)return Math.round(1e3*e)}return-1},u.isMediaLoaded=function(){return!!(this.googleCast&&this.googleCastCordova&&this.castConnected)};const k=function(e){let t;t=e||"STANDBY",h||(h=n.default.createElement("div","rmp-cast-diplay-message rmp-color-bg"),this.dom.container.appendChild(h));let a=f+" "+t;n.default.setText(h,a)},w=function(){k.call(this,"DISCONNECTING"),n.default.removeClass(this.dom.container,"rmp-casting"),n.default.removeClass(this.dom.container,"rmp-casting-cordova");const e=this.dom.cast.querySelector("span.rmp-i");null!==e&&(n.default.removeClass(e,"rmp-i-google-cast-connected"),n.default.addClass(e,"rmp-i-google-cast")),u.destroy.call(this,!0)},S=function(){d.default.hideLoadingSpin.call(this),n.default.addClass(this.dom.container,"rmp-casting"),n.default.addClass(this.dom.container,"rmp-casting-cordova");const e=this.dom.cast.querySelector("span.rmp-i");null!==e&&(n.default.removeClass(e,"rmp-i-google-cast"),n.default.addClass(e,"rmp-i-google-cast-connected"))},C=function(e){e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault()),this.getPlayerInitialized()||this.googleCastInit||(this.googleCastInit=!0,this.emptyInitAdTagUrl=!0,this.initiatePlayback()),d.default.showChrome.call(this),this.castSessionStopping||(this.castConnected?w.call(this):chrome.cast.requestSession(e=>{this.castSession=e,this.loadCastMedia()},e=>{v.call(this);let t=null;e&&(t=e),c.default.warning.call(this,"failed at selecting receiver device",7002,t)}))},j=function(){var e;this.castSession.addMessageListener("urn:x-cast:com.radiantmediaplayer.cast",(0,r.default)(e=function(e,t){let a=JSON.parse(t);"STATUS"===a.type&&"MEDIA_FINISHED"===a.message&&(k.call(this,"ENDED"),l.default.pause.call(this),this.castMediaEnded=!0,(this.hasRelated||this.hasPlaylist)&&l.default.endedPlaylistRelated.call(this),n.default.createStdEvent("ended",this.dom.container))}).call(e,this))},E=function(e){if(!e)return;let t=u.getCurrentTime.call(this);t!==m&&(m=t,l.default.timeupdate.call(this));let a=this.getVolume();a!==g&&(g=a,this.onVolumeChange())},L=function(e){d.default.showLoadingSpin.call(this),k.call(this,"LOADING"),this.pauseRequestedByLoadCastMedia=!0,this.pause();let t=new chrome.cast.media.MediaInfo(this.castUrl,p);t.metadata=new chrome.cast.media.GenericMediaMetadata,"MOVIE"===this.contentMetadata.googleCastType||"TV_SHOW"===this.contentMetadata.googleCastType?t.metadata.metadataType=this.contentMetadata.googleCastType:t.metadata.metadataType=chrome.cast.media.MetadataType.GENERIC,this.contentMetadata.title&&(f=this.contentMetadata.title),t.metadata.title=f;let a=this.poster;this.contentMetadata.poster.length>0&&(a=this.contentMetadata.poster[this.contentMetadata.poster.length-1]),t.metadata.images=[{url:a}],""!==this.contentMetadata.releaseDate&&(t.metadata.subtitle=this.contentMetadata.releaseDate),t.customData={},this.isVod?t.streamType=chrome.cast.media.StreamType.BUFFERED:(t.streamType=chrome.cast.media.StreamType.LIVE,t.customData.isLive=!0),this.ads&&this.adTagUrl&&(t.customData.adTagUrl=this.adTagUrl),this.googleCastAdTagUrl&&(t.customData.adTagUrl=this.googleCastAdTagUrl),this.googleCastVmapAdsRequest&&(t.customData.vmapAdsRequest=this.googleCastVmapAdsRequest,t.customData.adTagUrl=""),n.default.isEmptyObject(this.shakaDrm)||n.default.isObject(this.shakaDrm.servers)&&this.shakaDrm.servers["com.widevine.alpha"]&&(t.customData.licenseUrl=this.shakaDrm.servers["com.widevine.alpha"]),n.default.isEmptyObject(this.shakaRequestConfiguration)||n.default.isObject(this.shakaRequestConfiguration.license)&&(n.default.isObject(this.shakaRequestConfiguration.license.headers)&&(t.customData.licenseHeaders=this.shakaRequestConfiguration.license.headers),"boolean"==typeof this.shakaRequestConfiguration.license.credentials&&(t.customData.credentials=this.shakaRequestConfiguration.license.credentials));let i=new chrome.cast.media.LoadRequest(t),o=this.getCurrentTime();this.castSession.loadMedia(i,t=>{this.pauseRequestedByLoadCastMedia=!1,this.castConnected=!0,l.default.play.call(this),k.call(this,"PLAYING"),this.castMedia=t,this.castMediaStatusUpdated=(0,r.default)(E).call(E,this),this.castMedia.addUpdateListener(this.castMediaStatusUpdated),n.default.clearInterval(b),b=(0,s.default)(()=>{this.castMedia.getStatus()},1e3),S.call(this),j.call(this),e&&(o=0),o>0&&this.seekTo(o),n.default.createStdEvent("castmedialoaded",this.dom.container)},e=>{w.call(this),d.default.hideLoadingSpin.call(this),n.default.createStdEvent("castmediaerror",this.dom.container);let t=null;e&&(t=e),c.default.warning.call(this,"castSession.loadMedia failed on receiving device",7001,t)})},A=function(){n.default.addClass(this.dom.container,"rmp-cast-available"),o.default.append.call(this,"cast"),n.default.addEvent(["touchend","click"],this.dom.cast,(0,r.default)(C).call(C,this)),o.default.deferredShow.call(this,"cast"),this.readingDash?p="application/dash+xml":this.readingHls||this.readingHlsJS||this.readingHlsShaka?p="application/vnd.apple.mpegurl":this.readingMp4&&!this.readingWebM?p="video/mp4":this.readingMp4&&this.readingWebM?p="video/webm":(this.audioOnly||this.audioOnlyUseVideoLayout||this.playlistAudioOnly||this.relatedAudioOnly)&&(this.readingM4a?p="audio/mp4":this.readingMp3?p="audio/mp3":this.readingOgg&&(p="audio/ogg")),this.castUrl=this.startingBitratePath,this.loadCastMedia=(0,r.default)(L).call(L,this)};u.ready=function(){if(this.dom.container.removeEventListener("ready",this.castReady),"undefined"!=typeof chrome&&void 0!==chrome.cast&&"function"==typeof chrome.cast.ApiConfig&&"function"==typeof chrome.cast.initialize){var e;0;let t=this.googleCastReceiverAppId;"cast-default"===t&&(t=chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID);const a=new chrome.cast.ApiConfig(new chrome.cast.SessionRequest(t),(function(e){this.castSession=e}),(0,r.default)(e=function(e){e&&void 0===this.dom.cast&&A.call(this)}).call(e,this));chrome.cast.initialize(a,()=>{0},e=>{let t=null;e&&(t=e),c.default.warning.call(this,"failed at initializing Google Cast Cordova",7003,t)}),n.default.createStdEvent("castapiavailable",this.dom.container)}};var T=u;a.default=T},{"../core/events":34,"../core/modules/modules":39,"../core/ui/core-ui":52,"../core/utils/error":56,"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/set-interval":103,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],31:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.symbol.description"),e("core-js/modules/es.string.match"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("../../fw/fw")),o=i(e("../ui/core-ui")),l=i(e("../resize/resize")),d=i(e("../utils/utils"));const c={},u=function(e){e&&(e.id===this.id||n.default.hasClass(e,"rmp-related-item")?n.default.addClass(e,"rmp-alt-focus"):(n.default.addClass(e,"rmp-focus"),this.dom.desktopVolumeContainer&&e===this.dom.desktopVolumeContainer&&n.default.setStyle(e,{opacity:1}))),this.forceResetTimer||(this.forceResetTimer=!0)},h=function(e){e&&(e.id===this.id||n.default.hasClass(e,"rmp-related-item")?n.default.removeClass(e,"rmp-alt-focus"):(n.default.removeClass(e,"rmp-focus"),this.dom.desktopVolumeContainer&&e===this.dom.desktopVolumeContainer&&e.style.removeProperty("opacity"))),this.forceResetTimer&&(this.forceResetTimer=!1)},p=function(e){if(!e||"string"!=typeof e.key||""===e.key)return;const t=this.getCurrentTime(),a=this.getDuration(),i=this.getVolume();let s;switch(o.default.showChrome.call(this),e.key){case" ":d.default.playOrPause.call(this);break;case"f":this.hideFullscreen||this.castConnected||this.audioOnly||l.default.fullscreenInteraction.call(this);break;case"c":if(this.dom.captionsOverlayLevelsArea){const e=this.dom.captionsOverlayLevelsArea.querySelectorAll(".rmp-overlay-level");if(e.length>0){let t=0;for(let a=0,i=e.length;a<i;a++){const i=e[a];if(n.default.hasClass(i,"rmp-overlay-level-active")){t=a===e.length-1?0:a+1;break}}n.default.createStdEvent("click",e[t])}}break;case"ArrowLeft":if(this.hasAdUI)break;if(this.isVod&&!this.hideSeekBar&&t>-1){const e=t-5e3;this.seekTo(e)}break;case"ArrowRight":if(this.hasAdUI)break;if(this.isVod&&!this.hideSeekBar&&t>-1){const e=t+5e3;this.seekTo(e)}break;case"ArrowUp":this.hideModule.volume||(i>=0||i<=1)&&(s=i<=.9?i+.1:1,this.setVolume(s));break;case"ArrowDown":this.hideModule.volume||(i>=0||i<=1)&&(s=i>=.1?i-.1:0,this.setVolume(s));break;case"m":this.hideModule.volume||(this.getMute()?this.setMute(!1):this.setMute(!0));break;case"Escape":if(n.default.hasClass(this.dom.container,"rmp-module-overlay-open")){let e=this.dom.container.className;if(e){let t=/rmp-module-overlay-(quality|sharing|audio|captions|speed|related|chapters|volume)/i,a=e.match(t);a&&a[1]&&this.setModuleOverlayVisible(a[1],!1)}}break;case"0":this.isVod&&!this.hideSeekBar&&t>-1&&a>-1&&this.seekTo(0);break;case"1":this.isVod&&!this.hideSeekBar&&t>-1&&a>-1&&this.seekTo(.1*a);break;case"2":this.isVod&&!this.hideSeekBar&&t>-1&&a>-1&&this.seekTo(.2*a);break;case"3":this.isVod&&!this.hideSeekBar&&t>-1&&a>-1&&this.seekTo(.3*a);break;case"4":this.isVod&&!this.hideSeekBar&&t>-1&&a>-1&&this.seekTo(.4*a);break;case"5":this.isVod&&!this.hideSeekBar&&t>-1&&a>-1&&this.seekTo(.5*a);break;case"6":this.isVod&&!this.hideSeekBar&&t>-1&&a>-1&&this.seekTo(.6*a);break;case"7":this.isVod&&!this.hideSeekBar&&t>-1&&a>-1&&this.seekTo(.7*a);break;case"8":this.isVod&&!this.hideSeekBar&&t>-1&&a>-1&&this.seekTo(.8*a);break;case"9":this.isVod&&!this.hideSeekBar&&t>-1&&a>-1&&this.seekTo(.9*a)}};c.make=function(e,t,a,i){e&&(this.elementsFocus.push(e),this.dom.seekBar&&e===this.dom.seekBar||this.dom.desktopVolumeContainer&&e===this.dom.desktopVolumeContainer?(e.setAttribute("role","slider"),e.setAttribute("tabindex","0"),e.setAttribute("aria-valuemin","0"),e.setAttribute("aria-valuemax","100")):e===this.dom.container?(e.setAttribute("role","application"),e.setAttribute("tabindex","0")):"string"==typeof e.nodeName&&"button"===e.nodeName.toLowerCase()?e.setAttribute("type","button"):i&&"playlist"===i&&(e.setAttribute("role","button"),e.setAttribute("tabindex","0"),e.addEventListener("keydown",e=>{e&&"string"==typeof e.key&&" "===e.key&&(e.preventDefault(),e.stopPropagation(),d.default.playOrPause.call(this))})),t&&e.setAttribute("aria-label",t),a?e.addEventListener("keyup",t=>{if(t&&"string"==typeof t.key&&"Enter"===t.key)if(this.dom.cast&&e===this.dom.cast){let t=e.querySelector("google-cast-launcher");null!==t&&n.default.createStdEvent("click",t)}else n.default.createStdEvent("click",e)}):this.dom.seekBar&&e===this.dom.seekBar&&e.addEventListener("keyup",e=>{e&&"string"==typeof e.key&&"Enter"===e.key&&(e.stopPropagation(),d.default.playOrPause.call(this))}),e.addEventListener("blur",()=>{h.call(this,e)}))};const f=function(e){if(e&&"string"==typeof e.key&&"Tab"===e.key){const e=document.activeElement;for(let t=0,a=this.elementsFocus.length;t<a;t++)h.call(this,this.elementsFocus[t]);for(let t=0,a=this.elementsFocus.length;t<a;t++)if(this.elementsFocus[t]&&e===this.elementsFocus[t]){u.call(this,this.elementsFocus[t]);break}}};c.preventKeyDown=function(e){if(e&&"string"==typeof e.key&&""!==e.key)switch(e.key){case" ":case"ArrowRight":case"ArrowLeft":case"ArrowUp":case"ArrowDown":case"Escape":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"Enter":e.preventDefault()}},c.init=function(){let e=this.contentMetadata.title;c.make.call(this,this.dom.container,e,!1),""!==this.contentMetadata.description&&this.dom.container.setAttribute("aria-describedby","media-description-for-"+this.id),this.disableKeyboardControl||(this.addTabKeyDetection=(0,r.default)(f).call(f,this),document.addEventListener("keyup",this.addTabKeyDetection),this.removeFocusToContainer=(0,r.default)(h).call(h,this,this.dom.container),this.dom.container.addEventListener("blur",this.removeFocusToContainer),this.bindKeyboard=(0,r.default)(p).call(p,this),this.dom.container.addEventListener("keyup",this.bindKeyboard),this.dom.container.addEventListener("keydown",c.preventKeyDown)),this.dom.video.setAttribute("tabindex","-1")};var m=c;a.default=m},{"../../fw/fw":70,"../resize/resize":47,"../ui/core-ui":52,"../utils/utils":59,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.string.match":437,"core-js/modules/es.symbol.description":440}],32:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.symbol.description"),e("core-js/modules/es.regexp.to-string"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("../fw/fw")),o=i(e("../fw/env")),l=i(e("../vtt/thumbnails")),d=i(e("../vtt/transcripts")),c=i(e("./modules/chapters")),u=i(e("./playback")),h=i(e("./fullscreen")),p=i(e("./ready")),f=i(e("./events")),m=i(e("./quick")),g=i(e("./seek/seek")),b=i(e("./modules/quality")),v=i(e("./modules/speed")),y=i(e("./modules/pip")),k=i(e("./modules/sharing")),w=i(e("./volume/audio-only")),S=i(e("./volume/desktop")),C=i(e("./volume/mobile")),j=i(e("../ads/scheduler")),E=i(e("./accessible/accessible")),L=i(e("./ui/indicator")),A=i(e("./ui/core-ui")),T=i(e("./utils/error")),P=i(e("./dvr/dvr")),M=i(e("../abr/hls")),I=i(e("../abr/shaka")),x=i(e("../analytics/mux")),R=i(e("./id3/id3"));const D={},O=function(e){e&&e.stopPropagation(),this.touchRmp=!0,A.default.showChrome.call(this)},F=function(e){if(this.get5Ready()&&!this.touchRmp){if(e&&e.stopPropagation(),this.getAdOnStage()&&this.getAdLinear())return;if(this.video360&&!this.firstPlay)return;0,this.initiatePlayback()}},V=function(e){e&&e.stopPropagation(),this.getFullscreen()?this.setFullscreen(!1):this.setFullscreen(!0)},B=function(e){e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault()),A.default.showChrome.call(this)},q=function(){this.dom.video.removeEventListener("playing",this.unstalledBuffer),this.dom.video.removeEventListener("seeked",this.unstalledBuffer),this.dom.video.removeEventListener("canplay",this.unstalledBuffer),this.dom.video.removeEventListener("canplaythrough",this.unstalledBuffer),n.default.createStdEvent("buffernotstalledanymore",this.dom.container)},U=function(){this.dom.container.removeEventListener("playing",this.onMobileStartAutoHideCentralUI),this.dom.container.removeEventListener("adloaded",this.onMobileStartAutoHideCentralUI),this.dom.container.removeEventListener("aderror",this.onMobileStartAutoHideCentralUI),n.default.removeClass(this.dom.centralMobileUI,"rmp-mobile-show-play")},H=function(){this.dom.centralMobileUI=n.default.createElement("button","rmp-button rmp-mobile-central-ui rmp-mobile-show-play rmp-color-bg"),E.default.make.call(this,this.dom.centralMobileUI,this.labels.hint.play,!0),this.dom.centralMobileUIIcon=n.default.createElement("span","rmp-i rmp-i-play"),this.dom.centralMobileUI.appendChild(this.dom.centralMobileUIIcon),this.dom.container.appendChild(this.dom.centralMobileUI),this.onMobileStartAutoHideCentralUI=(0,r.default)(U).call(U,this),this.dom.container.addEventListener("playing",this.onMobileStartAutoHideCentralUI),this.dom.container.addEventListener("adloaded",this.onMobileStartAutoHideCentralUI),this.dom.container.addEventListener("aderror",this.onMobileStartAutoHideCentralUI)},N=function(){this.dom.overlayButton=n.default.createElement("button","rmp-button rmp-overlay-button rmp-color-bg"),E.default.make.call(this,this.dom.overlayButton,this.labels.hint.play,!0),this.dom.overlayButtonIcon=n.default.createElement("span","rmp-i rmp-i-play"),this.dom.overlayButton.appendChild(this.dom.overlayButtonIcon),this.dom.container.appendChild(this.dom.overlayButton)},_=function(){if(this.dom.loadingSpin=n.default.createElement("div","rmp-loading-spin rmp-color-bg"),"s1"===this.skin||"s3"===this.skin){const e=n.default.createElement("div","rmp-loading-spin-bounce rmpBounce1 rmp-color-bg-button"),t=n.default.createElement("div","rmp-loading-spin-bounce rmpBounce2 rmp-color-bg-button");this.dom.loadingSpin.appendChild(e),this.dom.loadingSpin.appendChild(t)}else{const e=n.default.createElement("div","rmp-loading-spin-circle");for(let t=1;t<13;t++){const a=n.default.createElement("div","rmp-circle rmp-circle-"+t);e.appendChild(a)}this.dom.loadingSpin.appendChild(e)}this.dom.container.appendChild(this.dom.loadingSpin)};D.prepare=function(){var e,t,a,i;((this.readingDash||this.readingHlsJS||this.readingHlsShaka)&&(this.readingMse=!0),(this.readingMse||this.readingOutstream)&&(this.readingPDorNative=!1),(this.readingOutstream||this.readingMp4||(this.audioOnly||this.audioOnlyUseVideoLayout)&&!this.audioOnlyIcecast)&&(this.detectLive=!1),this.readingMse&&(o.default.isMacosSafari[0]||o.default.isIpadOS)&&this.ads&&"rmp-vast"===this.adParser&&(this.ads=!1),this.dom.video.controls=!1,this.loop&&(this.dom.video.loop="loop"),""!==this.crossorigin&&this.dom.video.setAttribute("crossorigin",this.crossorigin),this.dom.video.setAttribute("x-webkit-airplay","allow"),"boolean"==typeof this.dom.video.playsInline&&(o.default.isIosIpad&&this.ads&&"ima"===this.adParser||this.dom.video.setAttribute("playsinline",!0)),o.default.isAndroidWebView&&(this.dom.video.poster=n.default.blackFrame),this.dom.content=n.default.createElement("div","rmp-content"),this.dom.content.appendChild(this.dom.video),""!==this.contentMetadata.description&&A.default.appendDescriptionLabel.call(this,"content"),this.dom.container.appendChild(this.dom.content),this.ads&&"ima"===this.adParser&&!this.adImaDai&&(this.dom.adContainer=n.default.createElement("div","rmp-ad-container"),this.dom.container.appendChild(this.dom.adContainer)),this.readingPDorNative?this.dom.video.preload=this.preload:"none"!==this.preload&&(this.readingHlsJS?(M.default.init.call(this),this.msePreloadRequested=!0):this.readingShaka&&(I.default.init.call(this),this.msePreloadRequested=!0)),this.durationchangeFn=(0,r.default)(e=f.default.durationchange).call(e,this),this.dom.video.addEventListener("durationchange",this.durationchangeFn),this.loadedmetadataFn=(0,r.default)(t=f.default.loadedmetadata).call(t,this),this.dom.video.addEventListener("loadedmetadata",this.loadedmetadataFn),this.waitingFn=(0,r.default)(a=f.default.waiting).call(a,this),this.unstalledBuffer=(0,r.default)(q).call(q,this),this.dom.video.addEventListener("waiting",this.waitingFn),this.isVod)&&(this.ended=(0,r.default)(i=f.default.ended).call(i,this),this.dom.video.addEventListener("ended",this.ended));f.default.auxiliaryEvents.call(this),o.default.isMobile?H.call(this):N.call(this),this.hideCentralPlayButton&&n.default.addClass(this.dom.container,"rmp-no-central-play"),_.call(this),this.hideCentralBuffering&&n.default.addClass(this.dom.container,"rmp-no-loading-spin"),this.hideControls&&A.default.protoHideControls.call(this),(this.hideExternalPlayerLabels||o.default.isMobile)&&n.default.addClass(this.dom.container,"rmp-no-hint"),this.muxData&&x.default.initHTML5.call(this),R.default.listen.call(this),n.default.createStdEvent("htmlmediaelementappendedtodom",this.dom.container)},D.appendSeekBar=function(){var e,t,a,i;this.dom.seekBar=n.default.createElement("div","rmp-seek-bar"),this.hideSeekBar&&n.default.addClass(this.dom.seekBar,"rmp-no-display"),this.dom.timetotal=n.default.createElement("div","rmp-time-total"),this.dom.loaded=n.default.createElement("div","rmp-loaded"),this.dom.timetotal.appendChild(this.dom.loaded),this.dom.current=n.default.createElement("div","rmp-current rmp-color-bg-button"),this.dom.timetotal.appendChild(this.dom.current),this.dom.handle=n.default.createElement("div","rmp-handle rmp-color-bg-button"),this.dom.timetotal.appendChild(this.dom.handle),this.dom.seekBar.addEventListener("touchend",(0,r.default)(e=g.default.touchend).call(e,this)),this.dom.seekBar.addEventListener("touchmove",(0,r.default)(t=g.default.touchmove).call(t,this),!!o.default.hasPassiveEventListeners&&{passive:!0}),this.mouseupDoc=(0,r.default)(a=g.default.mouseupDoc).call(a,this),this.mousemoveDoc=(0,r.default)(i=g.default.mousemoveDoc).call(i,this),this.dom.timetotal.addEventListener("mousedown",e=>{e&&e.stopPropagation(),this.draggingTimeCursor=!0,n.default.addClass(this.dom.timetotal,"grabbing"),document.addEventListener("mouseup",this.mouseupDoc),document.addEventListener("mousemove",this.mousemoveDoc)}),o.default.isMobile||(this.dom.indicator=n.default.createElement("div","rmp-indicator rmp-color-bg"),this.dom.timeIndicator=n.default.createElement("span","rmp-time-indicator",null,this.rtl),this.dom.indicator.appendChild(this.dom.timeIndicator),this.dom.timetotal.appendChild(this.dom.indicator),L.default.init.call(this),""!==this.seekBarThumbnailsLoc&&n.default.cssPropertySupport("backgroundImage")&&n.default.cssPropertySupport("backgroundPosition")&&l.default.init.call(this)),this.hasTranscripts&&d.default.init.call(this),this.dom.seekBar.appendChild(this.dom.timetotal),this.audioOnly?this.dom.controlBar.insertBefore(this.dom.seekBar,this.dom.timeElapsed.nextSibling):this.dom.controlBar.insertBefore(this.dom.seekBar,this.dom.fullscreen),E.default.make.call(this,this.dom.seekBar,this.labels.hint.seek,!1),this.dom.duration=n.default.createElement("div","rmp-duration rmp-color-bg",null,this.rtl),this.dom.controlBar.appendChild(this.dom.duration);const s=this.getDuration();this.isVod&&s>-1&&n.default.setText(this.dom.duration,n.default.readableTime(s/1e3));const c=this.getCurrentTime();if(s>-1&&c>-1){const e=n.default.precisionRound(100*c/s,2).toString(),t=n.default.readableTime(c/1e3)+" of "+n.default.readableTime(s/1e3);this.dom.seekBar.setAttribute("aria-valuenow",e),this.dom.seekBar.setAttribute("aria-valuetext",t)}},D.append=function(){var e,t,a,i,s,l,d;(n.default.addClass(this.dom.container,"rmp-wait-for-metadata"),this.dom.container.addEventListener("contextmenu",n.default.contextMenuInteraction),this.tvPlayerSkin||(this.containerTouch=(0,r.default)(O).call(O,this),n.default.addEvent("touchend",this.dom.container,this.containerTouch),this.containerClick=(0,r.default)(F).call(F,this),n.default.addEvent("click",this.dom.container,this.containerClick),this.doubleClickForFullscreen&&(this.containerDBClick=(0,r.default)(V).call(V,this),n.default.addEvent("dblclick",this.dom.container,this.containerDBClick))),this.readingPDorNative)&&(this.generateError=(0,r.default)(l=T.default.mediaTag).call(l,this),this.dom.video.addEventListener("error",this.generateError,!0));(this.dom.controlBar=n.default.createElement("div","rmp-control-bar rmp-color-bg"),this.dom.playPause=n.default.createElement("button","rmp-play-pause rmp-button rmp-i rmp-i-play"),this.dom.playPauseHint=n.default.createElement("div","rmp-control-bar-hint rmp-color-bg",this.labels.hint.play,this.rtl),this.dom.playPause.appendChild(this.dom.playPauseHint),this.dom.controlBar.appendChild(this.dom.playPause),this.volumeModuleUI?this.hideModule.volume||C.default.init.call(this):this.audioOnly||(S.default.init.call(this),this.hideModule.volume&&n.default.addClass(this.dom.desktopVolumeIcon,"rmp-force-no-show")),m.default.init.call(this),this.dom.timeElapsed=n.default.createElement("div","rmp-time-elapsed rmp-color-bg"),this.dom.timeElapsedText=n.default.createElement("span","rmp-time-elapsed-text",null,this.rtl),this.dom.timeElapsed.appendChild(this.dom.timeElapsedText),this.dom.controlBar.appendChild(this.dom.timeElapsed),((this.audioOnly||this.audioOnlyUseVideoLayout)&&!this.audioOnlyIcecast||this.readingMp4||this.readingOutstream||this.isLiveDvr)&&D.appendSeekBar.call(this),this.audioOnly&&(w.default.init.call(this),!this.audioOnlyUseVideoLayout&&this.hideModule.volume&&n.default.addClass(this.dom.audioOnlyVolumeIcon,"rmp-force-no-show")),h.default.append.call(this),this.isLiveDvr)&&(n.default.addEvent(["touchend","click"],this.dom.timeElapsed,(0,r.default)(d=P.default.setLiveMode).call(d,this)),P.default.resyncAfterLivePause.call(this));this.pauseFn=(0,r.default)(e=f.default.pause).call(e,this),this.dom.video.addEventListener("pause",this.pauseFn),this.playFn=(0,r.default)(t=f.default.play).call(t,this),this.dom.video.addEventListener("play",this.playFn),this.timeupdateFn=(0,r.default)(a=f.default.timeupdate).call(a,this),this.dom.video.addEventListener("timeupdate",this.timeupdateFn),this.readingMp4&&this.src.mp4.length>1&&!this.hideModule.quality&&b.default.setUpMP4UI.call(this),this.speed&&v.default.init.call(this),this.pip&&(this.hlsJSCapLevelToPlayerSize=!1,this.shakaCapLevelToPlayerSize=!1,y.default.init.call(this)),this.sharing&&this.sharingUrl&&k.default.init.call(this),this.showChrome=(0,r.default)(i=A.default.showChrome).call(i,this),this.dom.container.addEventListener("mousemove",this.showChrome),this.initiatePlayback=(0,r.default)(s=u.default.init).call(s,this),n.default.addEvent(["touchend","click"],this.dom.playPause,this.initiatePlayback),o.default.isMobile?n.default.addEvent(["touchend","click"],this.dom.centralMobileUI,this.initiatePlayback):n.default.addEvent(["touchend","click"],this.dom.overlayButton,this.initiatePlayback),n.default.addEvent(["touchend","click"],this.dom.controlBar,(0,r.default)(B).call(B,this)),this.dom.controlBar.addEventListener("dblclick",n.default.stopPropagation),o.default.isMobile||(this.dom.controlBar.addEventListener("mouseenter",e=>{e&&e.stopPropagation(),this.forceResetTimer=!0}),this.dom.controlBar.addEventListener("mouseleave",e=>{e&&e.stopPropagation(),this.forceResetTimer=!1})),this.ads&&this.adScheduleInput&&j.default.init.call(this),this.isVod&&""!==this.chaptersLoc&&c.default.init.call(this),E.default.make.call(this,this.dom.playPause,this.labels.hint.play,!0),E.default.make.call(this,this.dom.quickRewind,this.labels.hint.quickRewind,!0),E.default.make.call(this,this.dom.quickForward,this.labels.hint.quickForward,!0),E.default.make.call(this,this.dom.fullscreen,this.labels.hint.enterFullscreen,!0),p.default.init.call(this)};var W=D;a.default=W},{"../abr/hls":5,"../abr/shaka":7,"../ads/scheduler":13,"../analytics/mux":16,"../fw/env":69,"../fw/fw":70,"../vtt/thumbnails":77,"../vtt/transcripts":78,"./accessible/accessible":31,"./dvr/dvr":33,"./events":34,"./fullscreen":35,"./id3/id3":36,"./modules/chapters":37,"./modules/pip":40,"./modules/quality":41,"./modules/sharing":42,"./modules/speed":43,"./playback":44,"./quick":45,"./ready":46,"./seek/seek":50,"./ui/core-ui":52,"./ui/indicator":53,"./utils/error":56,"./volume/audio-only":61,"./volume/desktop":62,"./volume/mobile":64,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.regexp.to-string":435,"core-js/modules/es.symbol.description":440}],33:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),r=i(e("../../fw/fw"));const n={setLiveModeUI:function(){this.dvrLiveMode=!0,r.default.setStyle(this.dom.current,{width:"100%"}),r.default.setStyle(this.dom.handle,{left:"100%"}),r.default.removeClass(this.dom.container,"rmp-dvr-rec"),r.default.setText(this.dom.duration,this.labels.hint.live)},setRecModeUI:function(){this.dvrLiveMode=!1,r.default.addClass(this.dom.container,"rmp-dvr-rec"),r.default.setText(this.dom.duration,"-"),r.default.setText(this.dom.timeElapsedText,this.labels.hint.live)},setLiveMode:function(e){if(e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault()),!this.dvrLiveMode)if(n.setLiveModeUI.call(this),this.readingHlsJS){let e=this.hlsJS.liveSyncPosition;("number"!=typeof e||e<=0)&&(e=this.hlsJSLevelDuration),e>0&&r.default.setMediaCurrentTime(this.dom.video,e)}else if(this.readingShaka){const e=this.shakaPlayer.seekRange().end;r.default.isNumber(e)&&e>0&&r.default.setMediaCurrentTime(this.dom.video,e)}},resyncAfterLivePause:function(){let e=0,t=0,a=function(){if(this.dom.container.removeEventListener("timeupdate",this.playingDvr),this.readingHlsJS){let t=r.default.getMediaDuration(this.dom.video)-this.hlsJSLevelDuration;r.default.isNumber(t)&&r.default.isNumber(e)&&e>0&&this.dvrSeekTo(1e3*(e-t))}else if(this.readingShaka){const e=this.shakaPlayer.seekRange(),a=e.end,i=e.start;t=(r.default.getNow()-t)/1e3,r.default.isNumber(a)&&a>0&&this.dvrSeekTo(1e3*(a-i-t))}this.dom.container.addEventListener("pause",this.pauseDvr)},i=function(){this.dvrLiveMode&&(this.readingHlsJS?e=r.default.getMediaCurrentTime(this.dom.video):this.readingShaka&&(t=r.default.getNow()),this.dom.container.removeEventListener("pause",this.pauseDvr),this.dom.container.addEventListener("timeupdate",this.playingDvr))};this.pauseDvr=(0,s.default)(i).call(i,this),this.playingDvr=(0,s.default)(a).call(a,this),this.dom.container.addEventListener("pause",this.pauseDvr)}};var o=n;a.default=o},{"../../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],34:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/json/stringify")),n=i(e("@babel/runtime-corejs3/core-js-stable/set-timeout")),o=i(e("@babel/runtime-corejs3/core-js-stable/instance/for-each")),l=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),d=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),c=i(e("@babel/runtime-corejs3/core-js-stable/instance/sort")),u=i(e("@babel/runtime-corejs3/core-js-stable/instance/splice")),h=i(e("@babel/runtime-corejs3/core-js-stable/instance/trim")),p=i(e("../fw/fw")),f=i(e("../fw/env")),m=i(e("./ui/core-ui")),g=i(e("./dvr/dvr")),b=i(e("../core/dom")),v=i(e("../ads/ima-ads")),y=i(e("../ads/ads-helpers")),k=i(e("../playlist/related")),w=i(e("../playlist/playlist")),S=i(e("./modules/modules")),C=i(e("../core/utils/metadata"));const j={},E=function(){if(this.isLive)return;const e=this.dom.video,t=p.default.getMediaDuration(e);let a=0;const i=e.buffered,s=e.buffered.length,r=p.default.getMediaCurrentTime(e);let n=0;try{for(let e=s-1;e>=0;e--)if(r>=i.start(e)){n=e;break}s>0&&p.default.isNumber(t)&&(a=i.end(n)/t*100)}catch(o){return void p.default.trace(o)}if(p.default.isNumber(a)){const e={width:a+"%"};p.default.setStyle(this.dom.loaded,e)}};j.durationchange=function(){let e=this.getDuration();const t=this.dom.video.duration;if(this.readingHls&&this.detectLive&&("number"==typeof t&&Math.abs(t)===1/0?m.default.setLive.call(this):b.default.appendSeekBar.call(this),this.detectLive=!1),this.audioOnlyIcecast&&(this.audioOnly||this.audioOnlyUseVideoLayout)&&this.detectLive&&("number"==typeof t&&Math.abs(t)===1/0?m.default.setLive.call(this):b.default.appendSeekBar.call(this),this.detectLive=!1),this.isVod&&e>-1&&p.default.setText(this.dom.duration,p.default.readableTime(e/1e3)),this.isLiveDvr&&this.dvrLiveMode&&(p.default.setText(this.dom.duration,this.labels.hint.live),p.default.setText(this.dom.timeElapsedText,this.labels.hint.live)),this.firstDurationChange&&(this.firstDurationChange=!1,this.googleCast&&this.castConnected||!this.isLiveDvr||g.default.setLiveModeUI.call(this),this.ads&&this.adScheduleInput)){if(this.scheduledMidRolls){var a;let t=[];for(let a=0;a<this.adSchedule.midroll.length;a++)if("string"==typeof this.adSchedule.midroll[a][0])if(this.isVod&&e>-1){var i;let t=(0,h.default)(i=this.adSchedule.midroll[a][0]).call(i).split("%");t=t[0],this.adSchedule.midroll[a][0]=e*t/100}else t.push(a);if(t.length>0)for(let e=t.length-1;e>=0;e--){var s;(0,u.default)(s=this.adSchedule.midroll).call(s,t[e],1)}(0,c.default)(a=this.adSchedule.midroll).call(a,(e,t)=>e[0]-t[0])}if(this.adShowMarkers&&this.isVod){let t=[];if(this.adSchedule.preroll&&t.push(0),(0,d.default)(this.adSchedule.midroll))for(let e=0;e<this.adSchedule.midroll.length;e++)t.push(1e3*this.adSchedule.midroll[e][0]);this.adSchedule.postroll&&t.push(1/0),y.default.createMarkers.call(this,t,e)}}p.default.createStdEvent("durationchange",this.dom.container)},j.loadedmetadata=function(){this.hasLoadedMetadata||(p.default.removeClass(this.dom.container,"rmp-wait-for-metadata"),this.hasPlaylist&&p.default.createStdEvent("playlistitem",this.dom.container),this.hasRelated&&p.default.createStdEvent("relateditem",this.dom.container),this.hasLoadedMetadata=!0),p.default.createStdEvent("loadedmetadata",this.dom.container)},j.waiting=function(){m.default.showLoadingSpin.call(this),p.default.createStdEvent("waiting",this.dom.container),!this.readingOutstream&&this.hasLoadedMetadata&&(this.dom.video.addEventListener("playing",this.unstalledBuffer),this.dom.video.addEventListener("seeked",this.unstalledBuffer),this.dom.video.addEventListener("canplay",this.unstalledBuffer),this.dom.video.addEventListener("canplaythrough",this.unstalledBuffer),p.default.createStdEvent("bufferstalled",this.dom.container))};const L=function(){this.dom.container.removeEventListener("adstarted",this.onAdStartedPostRollUpdateCentralUI),this.isVod&&(p.default.hasClass(this.dom.overlayButtonIcon,"rmp-i-replay")?(p.default.removeClass(this.dom.overlayButtonIcon,"rmp-i-replay"),p.default.addClass(this.dom.overlayButtonIcon,"rmp-i-play")):f.default.isMobile&&p.default.hasClass(this.dom.centralMobileUIIcon,"rmp-i-replay")&&(p.default.removeClass(this.dom.centralMobileUIIcon,"rmp-i-replay"),p.default.addClass(this.dom.centralMobileUIIcon,"rmp-i-pause")))};j.endedPlaylistRelated=function(){this.hasRelated&&(void 0===this.relatedList[this.currentRelatedIndex+1]&&p.default.createStdEvent("relatedcomplete",this.dom.container),this.relatedUpNextAutoplay&&(this.relatedEndedLoop||!this.relatedEndedLoop&&void 0!==this.relatedList[this.currentRelatedIndex+1])&&(p.default.removeClass(this.dom.relatedSkipPreview,"rmp-force-show"),k.default.loadItem.call(this,this.currentRelatedIndex+1,null))),this.hasPlaylist&&(void 0===this.playlistList[this.currentPlaylistIndex+1]&&p.default.createStdEvent("playlistcomplete",this.dom.container),this.playlistUpNextAutoplay&&(this.playlistEndedLoop||!this.playlistEndedLoop&&void 0!==this.playlistList[this.currentPlaylistIndex+1])&&w.default.loadItem.call(this,this.currentPlaylistIndex+1,null))},j.ended=function(){this.loop||(this.getPaused()||this.pause(),this.ads&&("ima"===this.adParser&&(this.contentCompleteCalled=!0,v.default.contentCompleteAds.call(this)),this.onAdStartedPostRollUpdateCentralUI=(0,l.default)(L).call(L,this),this.dom.container.addEventListener("adstarted",this.onAdStartedPostRollUpdateCentralUI)),this.dom.poster&&(this.contentMetadata.endOfVideoPoster.length>0&&(this.endOfVideoPoster=C.default.getPoster(this.contentMetadata.endOfVideoPoster)),""!==this.endOfVideoPoster&&this.endOfVideoPoster!==this.poster&&this.setPoster(this.endOfVideoPoster),p.default.show(this.dom.poster)),f.default.isMobile?(p.default.removeClass(this.dom.centralMobileUIIcon,"rmp-i-play"),p.default.removeClass(this.dom.centralMobileUIIcon,"rmp-i-pause"),p.default.addClass(this.dom.centralMobileUIIcon,"rmp-i-replay")):(p.default.removeClass(this.dom.overlayButtonIcon,"rmp-i-play"),p.default.addClass(this.dom.overlayButtonIcon,"rmp-i-replay"))),j.endedPlaylistRelated.call(this),p.default.createStdEvent("ended",this.dom.container)},j.auxiliaryEvents=function(){const e=["loadstart","loadeddata","progress","canplay","canplaythrough","ratechange","seeking","seeked","playing"];(0,o.default)(e).call(e,e=>{this.dom.video.addEventListener(e,e=>{let t=e.type;if(t){switch(t){case"canplay":case"canplaythrough":case"seeked":m.default.hideLoadingSpin.call(this);break;case"playing":m.default.hideLoadingSpin.call(this),m.default.showChrome.call(this);break;case"loadeddata":case"progress":E.call(this)}p.default.createStdEvent(t,this.dom.container)}})})},j.pause=function(){if(this.googleCast&&this.pauseRequestedByLoadCastMedia)return void(this.pauseRequestedByLoadCastMedia=!1);p.default.addClass(this.dom.playPause,"rmp-i-play"),p.default.removeClass(this.dom.playPause,"rmp-i-pause");let e=this.labels.hint.play;p.default.updateAriaLabel(this.dom.playPause,e),p.default.setText(this.dom.playPauseHint,e),f.default.isMobile&&(p.default.removeClass(this.dom.centralMobileUIIcon,"rmp-i-pause"),p.default.addClass(this.dom.centralMobileUIIcon,"rmp-i-play"),p.default.updateAriaLabel(this.dom.centralMobileUI,e)),m.default.showCentralPlay.call(this),S.default.updatePlayPauseUI.call(this,!0),p.default.createStdEvent("pause",this.dom.container)},j.play=function(){p.default.addClass(this.dom.playPause,"rmp-i-pause"),p.default.removeClass(this.dom.playPause,"rmp-i-play");let e=this.labels.hint.pause;p.default.updateAriaLabel(this.dom.playPause,e),p.default.setText(this.dom.playPauseHint,e),f.default.isMobile&&(p.default.removeClass(this.dom.centralMobileUIIcon,"rmp-i-play"),p.default.addClass(this.dom.centralMobileUIIcon,"rmp-i-pause"),p.default.updateAriaLabel(this.dom.centralMobileUI,e)),m.default.hideCentralPlay.call(this),this.isVod&&(p.default.hasClass(this.dom.overlayButtonIcon,"rmp-i-replay")?(0,n.default)(()=>{p.default.removeClass(this.dom.overlayButtonIcon,"rmp-i-replay"),p.default.addClass(this.dom.overlayButtonIcon,"rmp-i-play")},400):f.default.isMobile&&p.default.hasClass(this.dom.centralMobileUIIcon,"rmp-i-replay")&&(p.default.removeClass(this.dom.centralMobileUIIcon,"rmp-i-replay"),p.default.addClass(this.dom.centralMobileUIIcon,"rmp-i-pause"))),S.default.updatePlayPauseUI.call(this,!1),p.default.hide(this.dom.poster),p.default.createStdEvent("play",this.dom.container)};const A=function(){const e=this.dom.transcriptsSideMenu.querySelectorAll(".rmp-transcripts-item");for(let t=0,a=e.length;t<a;t++)if(p.default.hasClass(e[t],"rmp-transcripts-current-item")){p.default.removeClass(e[t],"rmp-transcripts-current-item");break}};j.timeupdate=function(){if(this.rememberQuality&&f.default.localStorage(this.allowLocalStorage)&&(!this.getAdOnStage()||!this.getAdLinear())){let e=this.getCurrentBitrateIndex();-2!==e&&function(e){const t={value:Math.round(e).toString()};try{window.localStorage.setItem("rmpQuality",(0,r.default)(t))}catch(a){p.default.trace(a)}}(e)}if(this.currentTimeBeforeSeek=this.getCurrentTime(),this.isLive||this.isLiveDvr&&this.dvrLiveMode)return void p.default.createStdEvent("timeupdate",this.dom.container);if(!(this.currentTimeBeforeSeek>0&&this.rememberCurrentTime&&f.default.localStorage(this.allowLocalStorage))||this.getAdOnStage()&&this.getAdLinear()||function(e){const t={value:Math.round(e).toString()};try{window.localStorage.setItem("rmpCurrentTime",(0,r.default)(t))}catch(a){p.default.trace(a)}}(this.currentTimeBeforeSeek),this.hasTranscripts){const e=this.dom.transcriptsSideMenu.querySelectorAll(".rmp-transcripts-item");for(let t=0,a=e.length;t<a;t++){if(0===t){const a=e[t].getAttribute("data-start-time");if(1e3*p.default.dateToSeconds(a)>this.currentTimeBeforeSeek){A.call(this);break}}const i=e[t].getAttribute("data-end-time"),s=1e3*p.default.dateToSeconds(i);if(t===a-1&&this.currentTimeBeforeSeek>s){A.call(this);break}if(s>this.currentTimeBeforeSeek){p.default.hasClass(e[t],"rmp-transcripts-current-item")||(p.default.checkInView(this.dom.transcriptsSideMenu,e[t])||(this.dom.transcriptsSideMenu.scrollTop=e[t].offsetTop-1),A.call(this),p.default.addClass(e[t],"rmp-transcripts-current-item"));break}}}if(this.dom.video&&this.dom.current&&this.dom.handle&&!this.draggingTimeCursor&&!this.touchDown){let e,t,a,i,s,r;if(this.googleCast&&this.castConnected){const a=this.getCurrentTime();t=a>-1?Math.round(a/1e3):a,e=this.getDuration()/1e3}else if(e=p.default.getMediaDuration(this.dom.video),t=p.default.getMediaCurrentTime(this.dom.video),this.isLiveDvr)if(this.readingHlsJS){const a=e-this.hlsJSLevelDuration;e=this.hlsJSLevelDuration,t-=a}else this.readingShaka&&(a=this.shakaPlayer.seekRange(),i=a.start,s=a.end,e=s,p.default.isNumber(s)&&p.default.isNumber(i)&&s>0&&i>0&&(r=1-(s-t)/(s-i)));if(p.default.isNumber(e)&&e>0&&p.default.isNumber(t)&&t>=0){let a,s,n;a=this.isLiveDvr&&this.readingShaka?100*r:100/e*t,p.default.setStyle(this.dom.current,{width:a+"%"}),p.default.setStyle(this.dom.handle,{left:a+"%"}),this.isLiveDvr&&this.dom.duration?(n=this.dom.duration,s="-"+p.default.readableTime(e-t),this.readingHlsJS?this.dvrCurrentTime=t:this.readingShaka&&(this.dvrCurrentTime=t-i)):this.dom.timeElapsedText&&(n=this.dom.timeElapsedText,s=p.default.readableTime(t)),p.default.setText(n,s)}}const e=this.currentTimeBeforeSeek,t=this.getDuration();if(t>-1&&e>-1){const a=p.default.precisionRound(100*e/t,2).toString(),i=p.default.readableTime(e/1e3)+" of "+p.default.readableTime(t/1e3);0,this.dom.seekBar.setAttribute("aria-valuenow",a),this.dom.seekBar.setAttribute("aria-valuetext",i)}if((!this.googleCast||!this.castConnected)&&this.hasRelated&&this.relatedUpNextOffset>0&&e>-1&&t>-1){t-e<=1e3*this.relatedUpNextOffset?this.getAdOnStage()&&this.getAdLinear()?p.default.removeClass(this.dom.relatedSkipPreview,"rmp-force-show"):(p.default.createStdEvent("mousemove",this.dom.container),p.default.addClass(this.dom.relatedSkipPreview,"rmp-force-show")):p.default.removeClass(this.dom.relatedSkipPreview,"rmp-force-show")}if(this.ads&&(this.adScheduleInput||this.adVmapInput)&&this.adShowMarkers&&this.isVod){let t=document.querySelectorAll(".rmp-ad-markers");if(e>-1){let a=e/1e3;for(let e=0,i=t.length;e<i;e++){a>=t[e].getAttribute("data-marker-timestamp")&&this.dom.timetotal.removeChild(t[e])}}}if(this.loop&&this.isVod&&e>-1&&t>-1){t-e<250&&!this.loopEventFired&&(this.loopEventFired=!0,(0,n.default)(()=>{this.loopEventFired=!1},251),p.default.createStdEvent("loop",this.dom.container))}p.default.createStdEvent("timeupdate",this.dom.container)};var T=j;a.default=T},{"../ads/ads-helpers":9,"../ads/ima-ads":10,"../core/dom":32,"../core/utils/metadata":58,"../fw/env":69,"../fw/fw":70,"../playlist/playlist":72,"../playlist/related":73,"./dvr/dvr":33,"./modules/modules":39,"./ui/core-ui":52,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/for-each":85,"@babel/runtime-corejs3/core-js-stable/instance/sort":90,"@babel/runtime-corejs3/core-js-stable/instance/splice":91,"@babel/runtime-corejs3/core-js-stable/instance/trim":93,"@babel/runtime-corejs3/core-js-stable/json/stringify":94,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/set-timeout":104,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.regexp.to-string":435,"core-js/modules/es.string.split":439}],35:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),r=i(e("@babel/runtime-corejs3/core-js-stable/instance/starts-with")),n=i(e("../fw/fw")),o=i(e("../fw/env")),l=i(e("./resize/resize"));const d={},c=function(e){if(e&&e.type&&"orientationchange"===e.type)90===Math.abs(window.orientation)?this.setFullscreen(!0):this.getFullscreen()&&this.setFullscreen(!1);else if(e&&e.type&&"change"===e.type){var t;(0,r.default)(t=window.screen.orientation.type).call(t,"landscape")?this.setFullscreen(!0):this.getFullscreen()&&this.setFullscreen(!1)}},u=function(){this.dom.container.removeEventListener("playing",this.onPlayingAddFSOnOrientationChange),this.manageFSOnOrientationChange=(0,s.default)(c).call(c,this),o.default.hasScreenOrientationAPI?window.screen.orientation.addEventListener("change",this.manageFSOnOrientationChange):o.default.hasOlderScreenOrientationAPI&&window.addEventListener("orientationchange",this.manageFSOnOrientationChange)};d.append=function(){if(this.dom.fullscreen=n.default.createElement("button","rmp-fullscreen rmp-button rmp-i rmp-i-resize-full"),this.dom.fullscreenHint=n.default.createElement("div","rmp-control-bar-hint rmp-color-bg",this.labels.hint.enterFullscreen,this.rtl),this.dom.fullscreen.appendChild(this.dom.fullscreenHint),this.hideFullscreen&&n.default.addClass(this.dom.fullscreen,"rmp-no-display"),this.dom.controlBar.appendChild(this.dom.fullscreen),this.dom.container.appendChild(this.dom.controlBar),this.hasNativeFullscreenSupport){var e,t,a,i,r;if(o.default.isIos[0]&&!o.default.iosIpadOSHasCustomFullscreen)this.webkitbeginfullscreenFn=(0,s.default)(t=l.default.webkitbeginfullscreen).call(t,this),this.dom.video.addEventListener("webkitbeginfullscreen",this.webkitbeginfullscreenFn),this.webkitendfullscreenFn=(0,s.default)(a=l.default.webkitendfullscreen).call(a,this),this.dom.video.addEventListener("webkitendfullscreen",this.webkitendfullscreenFn);else this.fullscreenchange=(0,s.default)(i=l.default.fullscreenchange).call(i,this),document.addEventListener("fullscreenchange",this.fullscreenchange),this.fullscreenerror=(0,s.default)(r=l.default.fullscreenerror).call(r,this),document.addEventListener("fullscreenerror",this.fullscreenerror);n.default.addEvent(["touchend","click"],this.dom.fullscreen,(0,s.default)(e=l.default.fullscreenButtonInteraction).call(e,this))}else if(this.fullscreenFullWindowMode){var d;n.default.addEvent(["touchend","click"],this.dom.fullscreen,(0,s.default)(d=l.default.fullscreenButtonInteraction).call(d,this))}o.default.isMobile&&this.automaticFullscreenOnLandscape&&(this.onPlayingAddFSOnOrientationChange=(0,s.default)(u).call(u,this),this.dom.container.addEventListener("playing",this.onPlayingAddFSOnOrientationChange))};var h=d;a.default=h},{"../fw/env":69,"../fw/fw":70,"./resize/resize":47,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/starts-with":92,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],36:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("../../fw/fw"));const o={},l=function(e){let t;if("cuechange"===e.type&&e&&e.target&&e.target.activeCues&&e.target.activeCues.length>0&&(t=e.target.activeCues),!t)return void 0;this.meta.type="id3",this.meta.data={};const a=/http(s)?:.+\.(jpg|png|gif)/;let i;for(let s=0,r=t.length;s<r;s++)if(t[s].value){let e=t[s],r=e.value;if(!r.data&&!r.info)continue;switch("number"==typeof e.startTime&&e.startTime>=0&&("number"==typeof this.meta.data.start&&this.meta.data.start===e.startTime||(this.meta.data.start=e.startTime)),"number"==typeof e.endTime&&e.endTime>=0&&("number"==typeof this.meta.data.end&&this.meta.data.end===e.endTime||(this.meta.data.end=e.endTime)),r.key){case"TALB":this.meta.data.albumTitle=r.data.replace(/"/g,"");break;case"TDRC":this.meta.data.recordingTime=r.data.replace(/"/g,"");break;case"TDRL":this.meta.data.releaseTime=r.data.replace(/"/g,"");break;case"TCOM":this.meta.data.composer=r.data.replace(/"/g,"");break;case"TCON":this.meta.data.contentType=r.data.replace(/"/g,"");break;case"TFLT":this.meta.data.fileType=r.data.replace(/"/g,"");break;case"TIT1":this.meta.data.contentGroup=r.data.replace(/"/g,"");break;case"TIT2":this.meta.data.title=r.data.replace(/"/g,"");break;case"TLEN":this.meta.data.duration=r.data.replace(/"/g,"");break;case"TPE1":this.meta.data.artist=r.data.replace(/"/g,"");break;case"TPE2":this.meta.data.band=r.data.replace(/"/g,"");break;case"TPE3":this.meta.data.conductor=r.data.replace(/"/g,"");break;case"TRSN":this.meta.data.radioStationName=r.data.replace(/"/g,"");break;case"TRSO":this.meta.data.radioStationOwner=r.data.replace(/"/g,"");break;case"TSRC":this.meta.data.isrc=r.data.replace(/"/g,"");break;case"WCOM":this.meta.data.commercialInfo=r.data.replace(/"/g,"");break;case"WCOP":this.meta.data.copyrightInfo=r.data.replace(/"/g,"");break;case"WXXX":r.info?this.meta.data.url=r.info.replace(/"/g,""):r.data&&(this.meta.data.url=r.data.replace(/"/g,"")),i=this.meta.data.url.match(a),i&&i[0]?this.meta.data.url=i[0]:delete this.meta.data.url}}n.default.createStdEvent("meta",this.dom.container,this.meta)},d=function(e){if(e&&e.track&&e.track.kind&&"metadata"===e.track.kind){0;let t=e.track;"disabled"===t.mode&&(t.mode="hidden"),t.addEventListener("cuechange",(0,r.default)(l).call(l,this))}};o.listen=function(){try{this.dom.video.textTracks.addEventListener("addtrack",(0,r.default)(d).call(d,this))}catch(e){n.default.trace(e)}};var c=o;a.default=c},{"../../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.string.match":437,"core-js/modules/es.string.replace":438}],37:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/instance/trim")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),o=i(e("../../fw/fw")),l=i(e("./modules")),d=i(e("../accessible/accessible"));const c={},u=function(e,t){t&&(t.stopPropagation(),"touchend"===t.type&&t.preventDefault()),this.seekTo(e)},h=function(){for(let t=0,a=this.chaptersArray.length;t<a;t++)o.default.removeClass(this.chapterDivs[t],"rmp-overlay-level-active");const e=this.getCurrentTime();if(e>=0)for(let t=0,a=this.chaptersArray.length;t<a;t++){const i=this.chaptersArray[t].start;let s=this.chapterDivs[a-1];if(e>this.chaptersArray[a-1].start){o.default.addClass(s,"rmp-overlay-level-active");break}if(!(e>=i)){s=this.chapterDivs[t-1],o.default.addClass(s,"rmp-overlay-level-active");break}}},p=function(){this.dom.container.removeEventListener("loadedmetadata",this.onLoadedmetadaAddChapters);const e=this.getDuration();if(e>0&&this.chaptersArray.length>0){l.default.append.call(this,"chapters"),l.default.appendOverlay.call(this,"chapters"),l.default.deferredShow.call(this,"chapters"),this.chapterDivs=[];for(let t=0,a=this.chaptersArray.length;t<a;t++){const a=this.chaptersArray[t].start;if(a>=e)continue;let i="rmp-button rmp-overlay-level rmp-color-bg rmp-chapters-text";0===t&&(i+=" rmp-overlay-level-active"),this.chapterDivs[t]=o.default.createElement("button",i,this.chaptersArray[t].title),d.default.make.call(this,this.chapterDivs[t],this.chaptersArray[t].title,!0),o.default.addEvent(["touchend","click"],this.chapterDivs[t],(0,n.default)(u).call(u,this,a)),this.dom.chaptersOverlayLevelsArea.appendChild(this.chapterDivs[t])}this.updateCurrentChapter=(0,n.default)(h).call(h,this),this.dom.container.addEventListener("timeupdate",this.updateCurrentChapter),this.hasChapters=!0}},f=function(e){const t=e.split(/\r\n|\r|\n/g),a=/^\s*$/,i=[];for(let r=0,n=t.length;r<n;r++)a.test(t[r])||i.push(t[r]);if(!/WEBVTT/i.test(i[0]))return void 0;i.shift();const s=/^\s*\d*?:?\d*?:?\d+(\.\d+)?\s*-->\s*\d*?:?\d*?:?\d+(\.\d+)?\s*$/;for(let n=0,c=i.length;n<c;n++)if(i[n]&&i[n+1]&&s.test(i[n])){const e=i[n].split("--\x3e"),t=i[n+1];if(2===e.length){var l,d;const a=(0,r.default)(l=e[0]).call(l),i=(0,r.default)(d=e[1]).call(d);let s=a.replace(/\.\d+/i,"");/^00:/i.test(s)&&s.length>5&&(s=s.replace(/^00:/i,"")),this.chaptersArray.push({start:1e3*o.default.dateToSeconds(a),end:1e3*o.default.dateToSeconds(i),title:t+" "+this.uiSeparator+" "+s})}}this.onLoadedmetadaAddChapters=(0,n.default)(p).call(p,this),this.hasLoadedMetadata?this.onLoadedmetadaAddChapters():this.dom.container.addEventListener("loadedmetadata",this.onLoadedmetadaAddChapters)};c.init=function(){o.default.ajax(this.chaptersLoc,this.ajaxTimeout,this.ajaxWithCredentials,"GET").then(e=>{"string"==typeof e&&f.call(this,e)}).catch(e=>{o.default.trace(e)})};var m=c;a.default=m},{"../../fw/fw":70,"../accessible/accessible":31,"./modules":39,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/trim":93,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.string.replace":438,"core-js/modules/es.string.split":439}],38:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.string.replace"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/includes")),o=i(e("@babel/runtime-corejs3/core-js-stable/object/keys")),l=i(e("@babel/runtime-corejs3/core-js-stable/instance/slice")),d=i(e("@babel/runtime-corejs3/core-js-stable/parse-int")),c=i(e("../../fw/fw")),u=i(e("./modules")),h=i(e("../accessible/accessible"));const p={},f={fontColor:["white","black","red","green","blue","yellow","magenta","cyan"],fontOpacity:["100%","75%","50%","25%"],fontSize:["200%","175%","150%","125%","100%","75%","50%"],fontFamily:["arial","courier","georgia","impact","lucida console","tahoma","times new roman","trebuchet ms","verdana"],fontEdge:["none","raised","depressed","outline","drop shadow"],backgroundColor:["white","black","red","green","blue","yellow","magenta","cyan"],backgroundOpacity:["100%","75%","50%","25%","0%"],windowColor:["white","black","red","green","blue","yellow","magenta","cyan"],windowOpacity:["100%","75%","50%","25%","0%"]};p.displaySettings=function(e){e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault()),"none"===this.dom.captionsOverlayFCCSettingsArea.style.display?(c.default.hide(this.dom.captionsOverlayLevelsArea),c.default.show(this.dom.captionsOverlayFCCSettingsArea),u.default.closeButtonAdjust.call(this,"captions",!0)):(c.default.show(this.dom.captionsOverlayLevelsArea),c.default.hide(this.dom.captionsOverlayFCCSettingsArea),u.default.closeButtonAdjust.call(this,"captions",!1))};const m=function(e,t){let a;switch(e){case"white":a="rgba(255, 255, 255, "+t+")";break;case"black":a="rgba(0, 0, 0, "+t+")";break;case"red":a="rgba(255, 0, 0, "+t+")";break;case"green":a="rgba(0, 128, 0, "+t+")";break;case"blue":a="rgba(0, 0, 255, "+t+")";break;case"yellow":a="rgba(255, 255, 0, "+t+")";break;case"magenta":a="rgba(255, 0, 255, "+t+")";break;case"cyan":a="rgba(0, 255, 255, "+t+")";break;default:a="rgba(255, 255, 255, 1)"}return a},g=function(e,t,a,i){var s,r,n;let o,u;switch(i&&(i.stopPropagation(),"touchend"===i.type&&i.preventDefault()),e){case"fontColor":t?(this.fccFontColor="white",this.fccFontOpacity=1):a?(this.fccFontColor=this.ccFontColor,this.fccFontOpacity=this.ccFontOpacity):this.fccFontColor=i.target.value,o="{color: "+m(this.fccFontColor,this.fccFontOpacity)+" !important;}",u=this.readingShaka?"video.rmp-video::cue "+o:this.readingCaptionsFromNativeHls?".rmp-native-hls-captions video.rmp-video::cue "+o:".rmp-cc-cue "+o;break;case"fontOpacity":this.fccFontOpacity=(0,d.default)((0,l.default)(s=i.target.value).call(s,0,-1))/100,o="{color: "+m(this.fccFontColor,this.fccFontOpacity)+" !important;}",u=this.readingShaka?"video.rmp-video::cue "+o:this.readingCaptionsFromNativeHls?".rmp-native-hls-captions video.rmp-video::cue "+o:".rmp-cc-cue "+o;break;case"fontSize":if(t)this.fccFontSize=1;else if(a)this.fccFontSize=this.ccFontSize;else{var h;this.fccFontSize=(0,d.default)((0,l.default)(h=i.target.value).call(h,0,-1))/100}o="{font-size: "+17*this.fccFontSize+"px !important;}",u=this.readingShaka?"video.rmp-video::-webkit-media-text-track-display "+o:this.readingCaptionsFromNativeHls?".rmp-native-hls-captions video.rmp-video::-webkit-media-text-track-display "+o:".rmp-cc-display "+o;break;case"fontFamily":this.fccFontFamily=t?"Arial, Helvetica, sans-serif":a?this.ccFontFamily+", Helvetica, sans-serif":i.target.value+", Helvetica, sans-serif",o="{font-family: "+this.fccFontFamily+" !important;}",u=this.readingShaka?"video.rmp-video::cue "+o:this.readingCaptionsFromNativeHls?".rmp-native-hls-captions video.rmp-video::cue "+o:".rmp-cc-cue "+o;break;case"fontEdge":switch(this.fccFontEdge=t?"none":a?this.ccFontEdge:i.target.value,this.fccFontEdge){case"none":o="{text-shadow: none !important;}",u=this.readingShaka?"video.rmp-video::cue "+o:this.readingCaptionsFromNativeHls?".rmp-native-hls-captions video.rmp-video::cue "+o:".rmp-cc-cue "+o;break;case"raised":o="{text-shadow: rgb(0, 0, 0) 0px 0px 5px, rgb(0, 0, 0) 0px 1px 5px, rgb(0, 0, 0) 0px 2px 5px !important;}",u=this.readingShaka?"video.rmp-video::cue "+o:this.readingCaptionsFromNativeHls?".rmp-native-hls-captions video.rmp-video::cue "+o:".rmp-cc-cue "+o;break;case"depressed":o="{text-shadow: rgb(0, 0, 0) 0px -2px 1px !important;}",u=this.readingShaka?"video.rmp-video::cue "+o:this.readingCaptionsFromNativeHls?".rmp-native-hls-captions video.rmp-video::cue "+o:".rmp-cc-cue "+o;break;case"outline":o="{text-shadow: rgb(0, 0, 0) -2px 0px 1px, rgb(0, 0, 0) 2px 0px 1px, rgb(0, 0, 0) 0px -2px 1px, rgb(0, 0, 0) 0px 2px 1px, rgb(0, 0, 0) -1px 1px 1px, rgb(0, 0, 0) 1px 1px 1px, rgb(0, 0, 0) 1px -1px 1px, rgb(0, 0, 0) 1px 1px 1px !important;}",u=this.readingShaka?"video.rmp-video::cue "+o:this.readingCaptionsFromNativeHls?".rmp-native-hls-captions video.rmp-video::cue "+o:".rmp-cc-cue "+o;break;case"drop shadow":o="{text-shadow: rgb(0, 0, 0) 0px 2px 1px !important;}",u=this.readingShaka?"video.rmp-video::cue "+o:this.readingCaptionsFromNativeHls?".rmp-native-hls-captions video.rmp-video::cue "+o:".rmp-cc-cue "+o;break;default:o="{text-shadow: none !important;}",u=this.readingShaka?"video.rmp-video::cue "+o:this.readingCaptionsFromNativeHls?".rmp-native-hls-captions video.rmp-video::cue "+o:".rmp-cc-cue "+o}break;case"backgroundColor":t?(this.fccBackgroundColor="black",this.fccBackgroundOpacity=.5):a?(this.fccBackgroundColor=this.ccBackgroundColor,this.fccBackgroundOpacity=this.ccBackgroundOpacity):this.fccBackgroundColor=i.target.value,o="{background-color: "+m(this.fccBackgroundColor,this.fccBackgroundOpacity)+" !important;}",u=this.readingShaka?"video.rmp-video::cue "+o:this.readingCaptionsFromNativeHls?".rmp-native-hls-captions video.rmp-video::cue "+o:".rmp-cc-cue "+o;break;case"backgroundOpacity":this.fccBackgroundOpacity=(0,d.default)((0,l.default)(r=i.target.value).call(r,0,-1))/100,o="{background-color: "+m(this.fccBackgroundColor,this.fccBackgroundOpacity)+" !important;}",u=this.readingShaka?"video.rmp-video::cue "+o:this.readingCaptionsFromNativeHls?".rmp-native-hls-captions video.rmp-video::cue "+o:".rmp-cc-cue "+o;break;case"windowColor":t?(this.fccWindowColor="black",this.fccWindowOpacity=0):a?(this.fccWindowColor=this.ccWindowColor,this.fccWindowOpacity=this.ccWindowOpacity):this.fccWindowColor=i.target.value,o="{background-color: "+m(this.fccWindowColor,this.fccWindowOpacity)+" !important;}",u=this.readingShaka?"video.rmp-video::-webkit-media-text-track-display "+o:this.readingCaptionsFromNativeHls?".rmp-native-hls-captions video.rmp-video::-webkit-media-text-track-display "+o:".rmp-cc-display "+o;break;case"windowOpacity":this.fccWindowOpacity=(0,d.default)((0,l.default)(n=i.target.value).call(n,0,-1))/100,o="{background-color: "+m(this.fccWindowColor,this.fccWindowOpacity)+" !important;}",u=this.readingShaka?"video.rmp-video::-webkit-media-text-track-display "+o:this.readingCaptionsFromNativeHls?".rmp-native-hls-captions video.rmp-video::-webkit-media-text-track-display "+o:".rmp-cc-display "+o}u&&c.default.appendStyle(u)},b=function(e,t){g.call(this,"fontColor",e,t,null),g.call(this,"fontSize",e,t,null),g.call(this,"fontFamily",e,t,null),g.call(this,"fontEdge",e,t,null),g.call(this,"backgroundColor",e,t,null),g.call(this,"windowColor",e,t,null)},v=function(e){e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault()),this.googleCastCCForegroundColor="FFFFFF99",this.googleCastCCBackgroundColor="00000050",this.googleCastCCFontScale=1,this.googleCastCCFontFamily="arial",this.googleCastTextTrackEdgeType="NONE",this.googleCastCCWindowColor="00000000",b.call(this,!0,!1);const t=this.dom.container.querySelectorAll(".rmp-select");let a;if(t.length>0)for(let i=0,s=t.length;i<s;i++){switch(t[i].id){case"font-color":a="white";break;case"font-opacity":case"font-size":a="100%";break;case"font-family":a="arial";break;case"character-edge":a="none";break;case"background-color":a="black";break;case"background-opacity":a="50%";break;case"window-color":a="black";break;case"window-opacity":a="0%"}const e=t[i].querySelectorAll(".rmp-option");if(e.length>0)for(let t=0,i=e.length;t<i;t++)e[t].value===a?e[t].setAttribute("selected","selected"):e[t].removeAttribute("selected")}};p.filterInputSettings=function(){var e,t,a,i,s,r,l,d,c;let u=(0,o.default)(f);for(let o=0,h=u.length;o<h;o++)switch(u[o]){case"fontColor":(0,n.default)(e=f[u[o]]).call(e,this.ccFontColor)||(this.ccFontColor="white");break;case"fontOpacity":(0,n.default)(t=f[u[o]]).call(t,100*this.ccFontOpacity+"%")||(this.ccFontOpacity=1);break;case"fontSize":(0,n.default)(a=f[u[o]]).call(a,100*this.ccFontSize+"%")||(this.ccFontSize=1);break;case"fontFamily":(0,n.default)(i=f[u[o]]).call(i,this.ccFontFamily)||(this.ccFontSize="arial");break;case"fontEdge":(0,n.default)(s=f[u[o]]).call(s,this.ccFontEdge)||(this.ccFontEdge="none");break;case"backgroundColor":(0,n.default)(r=f[u[o]]).call(r,this.ccBackgroundColor)||(this.ccBackgroundColor="black");break;case"backgroundOpacity":(0,n.default)(l=f[u[o]]).call(l,100*this.ccBackgroundOpacity+"%")||(this.ccBackgroundOpacity=.5);break;case"windowColor":(0,n.default)(d=f[u[o]]).call(d,100*this.ccWindowColor)||(this.ccWindowColor="black");break;case"windowOpacity":(0,n.default)(c=f[u[o]]).call(c,100*this.ccWindowOpacity+"%")||(this.ccWindowOpacity=0)}},p.addModule=function(){var e,t;this.dom.fccCompliantSettings=c.default.createElement("button","rmp-button rmp-module-fcc-settings",this.labels.hint.settings),c.default.addEvent(["touchend","click"],this.dom.fccCompliantSettings,(0,r.default)(e=p.displaySettings).call(e,this)),this.dom.captionsOverlayLevelsArea.appendChild(this.dom.fccCompliantSettings),this.dom.captionsOverlayFCCSettingsArea=c.default.createElement("div","rmp-overlay-levels-area rmp-overlay-fcc-settings-area"),c.default.hide(this.dom.captionsOverlayFCCSettingsArea),this.dom.captionsOverlayWrapper.appendChild(this.dom.captionsOverlayFCCSettingsArea),h.default.make.call(this,this.dom.fccCompliantSettings,this.labels.hint.settings,!0),this.dom.goBackToCC=c.default.createElement("button","rmp-button rmp-module-fcc-settings",this.labels.hint.goBack),c.default.addEvent(["touchend","click"],this.dom.goBackToCC,(0,r.default)(t=p.displaySettings).call(t,this)),this.dom.captionsOverlayFCCSettingsArea.appendChild(this.dom.goBackToCC),h.default.make.call(this,this.dom.goBackToCC,this.labels.hint.goBack,!0);let a=(0,o.default)(this.labels.fccCaptions);for(let i=0,s=a.length;i<s;i++){const e=a[i];let t=this.labels.fccCaptions[e];const s=c.default.createElement("label","rmp-label",t);s.setAttribute("for",t.replace(/\s+/g,"-").toLowerCase());const n=c.default.createElement("select","rmp-select");n.setAttribute("id",t.replace(/\s+/g,"-").toLowerCase());for(let a=0,i=f[e].length;a<i;a++){let t=f[e][a];const i=c.default.createElement("option","rmp-option",t);i.setAttribute("value",t),n.appendChild(i),"fontColor"!==e||t!==this.ccFontColor?("fontOpacity"!==e||t!==100*this.ccFontOpacity+"%")&&("fontSize"!==e||t!==100*this.ccFontSize+"%")&&("fontFamily"!==e||t!==this.ccFontFamily)&&("fontEdge"!==e||t!==this.ccFontEdge)&&("backgroundColor"!==e||t!==this.ccBackgroundColor)&&("backgroundOpacity"!==e||t!==100*this.ccBackgroundOpacity+"%")&&("windowColor"!==e||t!==this.ccWindowColor)&&("windowOpacity"!==e||t!==100*this.ccWindowOpacity+"%")||i.setAttribute("selected","selected"):i.setAttribute("selected","selected")}n.addEventListener("change",(0,r.default)(g).call(g,this,e,!1,!1)),this.dom.captionsOverlayFCCSettingsArea.appendChild(s),this.dom.captionsOverlayFCCSettingsArea.appendChild(n)}b.call(this,!1,!0),this.dom.defaultFccCompliantSettings=c.default.createElement("button","rmp-button rmp-module-fcc-settings rmp-module-fcc-settings-default",this.labels.hint.default),c.default.addEvent(["touchend","click"],this.dom.defaultFccCompliantSettings,(0,r.default)(v).call(v,this)),this.dom.captionsOverlayFCCSettingsArea.appendChild(this.dom.defaultFccCompliantSettings),h.default.make.call(this,this.dom.defaultFccCompliantSettings,this.labels.hint.default,!0)};var y=p;a.default=y},{"../../fw/fw":70,"../accessible/accessible":31,"./modules":39,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/includes":86,"@babel/runtime-corejs3/core-js-stable/instance/slice":89,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/object/keys":99,"@babel/runtime-corejs3/core-js-stable/parse-int":101,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.string.replace":438}],39:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/set-timeout")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/for-each")),o=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),l=i(e("../../fw/fw")),d=i(e("../../fw/env")),c=i(e("../ui/core-ui")),u=i(e("../resize/resize")),h=i(e("../accessible/accessible")),p=i(e("./fcc"));const f={types:["quality","sharing","audio","captions","speed","related","chapters","volume","vr"]},m=/rmp-module-overlay-(quality|sharing|audio|captions|speed|related|chapters|volume|vr)/i,g=function(e,t){t&&(t.stopPropagation(),"touchend"===t.type&&t.preventDefault()),c.default.showChrome.call(this),e()},b=function(e){const t=l.default.getWidth(e);l.default.setStyle(e,{marginLeft:"-"+t/2+"px",left:"50%",right:"auto"})},v=function(e,t){const a=l.default.createElement("div","rmp-hint rmp-color-bg",t);if(this.dom[e].appendChild(a),this.firstHint)return this.firstHint=!1,void l.default.addClass(a,"rmp-first-hint");b(a)},y=function(e,t,a,i){this.dom[e]=document.createElement("button");let s=e.toLowerCase();s=s.replace(/\s+/g,"-"),this.dom[e].className="rmp-button rmp-"+s+" rmp-module rmp-color-bg";const r=l.default.createElement("div","rmp-module-button"),n=l.default.createElement("span","rmp-custom-module-icon");let d=".rmp-"+s+" .rmp-custom-module-icon {background-image: url("+t+")}";d+=".rmp-"+s+" .rmp-custom-module-icon:hover {background-image: url("+a+")}",l.default.appendStyle(d),r.appendChild(n),this.dom[e].appendChild(r),this.dom.container.appendChild(this.dom[e]),v.call(this,e,e),h.default.make.call(this,this.dom[e],e,!0),l.default.addEvent(["touchend","click"],this.dom[e],(0,o.default)(g).call(g,this,i)),this.dom[e].addEventListener("dblclick",l.default.stopPropagation)};f.customFilter=function(){var e;const t=[];(0,n.default)(e=this.customModule).call(e,e=>{"string"==typeof e.hint&&"string"==typeof e.svg&&"function"==typeof e.callback&&("string"!=typeof e.svgHover&&(e.svgHover=e.svg),t.push(e))}),this.customModule=t},f.customInit=function(){var e;(0,n.default)(e=this.customModule).call(e,e=>{const t=e.hint,a=e.svg,i=e.svgHover,s=e.callback;y.call(this,t,a,i,s)})},f.destroy=function(e){l.default.removeElement(this.dom[e]),l.default.removeElement(this.dom[e+"Overlay"])};const k=function(){l.default.removeClass(this.dom.container,"rmp-module-open-ui"),this.googleCast&&this.castConnected&&l.default.removeClass(this.dom.container,"rmp-casting-module-overlay-open"),this.getAdOnStage()&&this.getAdLinear()&&this.volumeModuleUI&&l.default.removeClass(this.dom.volume,"rmp-no-display"),c.default.showChrome.call(this)},w=function(){l.default.addClass(this.dom.container,"rmp-module-open-ui"),this.googleCast&&this.castConnected&&l.default.addClass(this.dom.container,"rmp-casting-module-overlay-open")};f.closeButtonAdjust=function(e,t){const a=Math.round(this.getPlayerWidth());let i;if(i=t?l.default.getClientWidth(this.dom.captionsOverlayFCCSettingsArea):l.default.getClientWidth(this.dom[e+"OverlayLevelsArea"]),this.dom[e+"Overlay"]){const t=this.dom[e+"Overlay"].querySelector(".rmp-module-overlay-close");null!==t&&(t.style.right=i<a?(8+a-i).toString()+"px":"8px")}},f.open=function(e,t){t&&(t.stopPropagation(),"touchend"===t.type&&t.preventDefault());let a=this.getPaused();this.getAdOnStage()&&this.getAdLinear()&&this.volumeModuleUI&&(a=this.getAdPaused()),a?(l.default.removeClass(this.dom[e+"OverlayPlayPause"],"rmp-i-pause"),l.default.addClass(this.dom[e+"OverlayPlayPause"],"rmp-i-play")):(l.default.removeClass(this.dom[e+"OverlayPlayPause"],"rmp-i-play"),l.default.addClass(this.dom[e+"OverlayPlayPause"],"rmp-i-pause")),w.call(this),"related"===e?(u.default.related.call(this),(0,r.default)(()=>{u.default.related.call(this)},401)):(0,r.default)(()=>{f.closeButtonAdjust.call(this,e,!1)},401),l.default.fadeIn(this.dom[e+"Overlay"]),l.default.addClass(this.dom.container,"rmp-module-overlay-"+e),l.default.addClass(this.dom.container,"rmp-module-overlay-open")},f.close=function(e,t,a){if(l.default.isVisible(this.dom[e+"Overlay"])){if(a&&(a.stopPropagation(),"touchend"===a.type&&a.preventDefault()),"captions"===e&&this.dom.captionsOverlayFCCSettingsArea&&"block"===this.dom.captionsOverlayFCCSettingsArea.style.display&&p.default.displaySettings.call(this,null),0===t){const e=this.dom.container.querySelectorAll(".rmp-module-overlay");if(e.length>0){const t={opacity:0,visibility:"hidden"};for(let a=0,i=e.length;a<i;a++)l.default.addClass(e[a],"rmp-transition-none"),l.default.setStyle(e[a],t),l.default.removeClass(e[a],"rmp-transition-none")}k.call(this)}else l.default.fadeOut(this.dom[e+"Overlay"]),(0,r.default)(()=>{k.call(this)},t);l.default.removeClass(this.dom.container,"rmp-module-overlay-"+e),l.default.removeClass(this.dom.container,"rmp-module-overlay-open")}},f.playPause=function(e){e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault());let t=this.getPaused();this.getAdOnStage()&&this.getAdLinear()&&this.volumeModuleUI&&(t=this.getAdPaused()),t?this.play():this.pause()},f.updatePlayPauseUI=function(e){if(l.default.hasClass(this.dom.container,"rmp-module-overlay-open"))if(e){let e=this.dom.container.className;if(e){let t=e.match(m);if(t&&t[1]){l.default.removeClass(this.dom[t[1]+"OverlayPlayPause"],"rmp-i-pause"),l.default.addClass(this.dom[t[1]+"OverlayPlayPause"],"rmp-i-play"),l.default.updateAriaLabel(this.dom[t[1]+"OverlayPlayPause"],this.labels.hint.play);let e=this.dom[t[1]+"OverlayPlayPause"].querySelector(".rmp-in-module-hint");null!==e&&l.default.setText(e,this.labels.hint.play)}}}else{let e=this.dom.container.className;if(e){let t=e.match(m);if(t&&t[1]){l.default.removeClass(this.dom[t[1]+"OverlayPlayPause"],"rmp-i-play"),l.default.addClass(this.dom[t[1]+"OverlayPlayPause"],"rmp-i-pause"),l.default.updateAriaLabel(this.dom[t[1]+"OverlayPlayPause"],this.labels.hint.pause);let e=this.dom[t[1]+"OverlayPlayPause"].querySelector(".rmp-in-module-hint");null!==e&&l.default.setText(e,this.labels.hint.pause)}}}},f.closeAll=function(){for(let e=0,t=f.types.length;e<t;e++)f.close.call(this,f.types[e],0,null)};const S=function(){for(let e=0,t=f.types.length;e<t;e++)if(l.default.isVisible(this.dom[f.types[e]+"Overlay"]))return!0;return!1};f.deferredShow=function(e){(S.call(this)||this.getAdOnStage()&&this.getAdLinear())&&l.default.addClass(this.dom[e],"rmp-no-display"),l.default.show(this.dom[e])},f.append=function(e){this.dom[e]=l.default.createElement("button","rmp-button rmp-"+e+" rmp-module rmp-color-bg"),d.default.isMobile||(this.dom[e].addEventListener("mouseenter",e=>{e&&e.stopPropagation(),this.forceResetTimer=!0}),this.dom[e].addEventListener("mouseleave",e=>{e&&e.stopPropagation(),this.forceResetTimer=!1}));const t=l.default.createElement("div","rmp-module-button");let a;if("cast"===e?a=this.googleCastCordova?l.default.createElement("span","rmp-i rmp-i-google-cast"):document.createElement("google-cast-launcher"):(a=l.default.createElement("span","rmp-i rmp-i-"+e),"quality"===e&&this.readingMse&&(this.dom.rmpQualityHD=l.default.createElement("span","rmp-quality-hd"),a.appendChild(this.dom.rmpQualityHD))),t.appendChild(a),this.dom[e].appendChild(t),"cast"===e||"airplay"===e){const t=this.dom.container.querySelectorAll(".rmp-module");if(t.length>0){const a=t[0];this.dom.container.insertBefore(this.dom[e],a)}else this.dom.container.appendChild(this.dom[e]);const a=this.dom.container.querySelector(".rmp-first-hint");null!==a&&(l.default.removeClass(a,"rmp-first-hint"),b(a),this.firstHint=!0)}else this.dom.container.appendChild(this.dom[e]);this.dom[e].addEventListener("dblclick",l.default.stopPropagation),v.call(this,e,this.labels.hint[e]),l.default.hide(this.dom[e]),h.default.make.call(this,this.dom[e],this.labels.hint[e],!0)},f.appendOverlay=function(e){var t,a,i;this.dom[e+"Overlay"]=l.default.createElement("div","rmp-module-overlay"),this.dom[e+"Overlay"].addEventListener("touchend",l.default.stopPropagation),this.dom[e+"Overlay"].addEventListener("click",l.default.stopPropagation),this.dom.container.appendChild(this.dom[e+"Overlay"]),this.dom[e+"OverlayWrapper"]=l.default.createElement("div","rmp-overlay-wrapper"),this.dom[e+"Overlay"].appendChild(this.dom[e+"OverlayWrapper"]);const s=l.default.createElement("div","rmp-overlay-title");let r=this.labels.hint[e];"sharing"===e&&""!==this.contentMetadata.title&&(r+=" "+this.uiSeparator+" "+this.contentMetadata.title);const n=l.default.createElement("span","rmp-overlay-title-text",r,this.rtl);s.appendChild(n),this.dom[e+"OverlayWrapper"].appendChild(s),this.dom[e+"OverlayPlayPause"]=l.default.createElement("button","rmp-button rmp-inline rmp-i rmp-module-overlay-icons rmp-module-overlay-play-pause"),l.default.addEvent(["touchend","click"],this.dom[e+"OverlayPlayPause"],(0,o.default)(t=f.playPause).call(t,this)),this.dom[e+"Overlay"].appendChild(this.dom[e+"OverlayPlayPause"]);let d=l.default.createElement("div","rmp-in-module-hint rmp-color-bg",this.labels.hint.play,this.rtl);this.dom[e+"OverlayPlayPause"].appendChild(d),h.default.make.call(this,this.dom[e+"OverlayPlayPause"],this.labels.hint.play,!0),this.dom[e+"OverlayClose"]=l.default.createElement("button","rmp-button rmp-inline rmp-i rmp-i-close rmp-module-overlay-icons rmp-module-overlay-close"),l.default.addEvent(["touchend","click"],this.dom[e+"OverlayClose"],(0,o.default)(a=f.close).call(a,this,e,400)),this.dom[e+"Overlay"].appendChild(this.dom[e+"OverlayClose"]);let c=l.default.createElement("div","rmp-in-module-hint rmp-color-bg",this.labels.hint.close,this.rtl);this.dom[e+"OverlayClose"].appendChild(c),h.default.make.call(this,this.dom[e+"OverlayClose"],this.labels.hint.close,!0),this.dom[e+"OverlayLevelsArea"]=document.createElement("div"),"related"!==e&&(this.dom[e+"OverlayLevelsArea"].className="rmp-overlay-levels-area"),"captions"===e&&p.default.addModule.call(this),this.dom[e+"OverlayWrapper"].appendChild(this.dom[e+"OverlayLevelsArea"]),l.default.addEvent(["touchend","click"],this.dom[e],(0,o.default)(i=f.open).call(i,this,e))},f.setActiveLevel=function(e,t){if(this.dom[e+"OverlayLevelsArea"]){const a=this.dom[e+"OverlayLevelsArea"].querySelectorAll(".rmp-overlay-level");if(a.length>0){for(let e=0,t=a.length;e<t;e++)l.default.removeClass(a[e],"rmp-overlay-level-active");l.default.addClass(a[t],"rmp-overlay-level-active")}}};var C=f;a.default=C},{"../../fw/env":69,"../../fw/fw":70,"../accessible/accessible":31,"../resize/resize":47,"../ui/core-ui":52,"./fcc":38,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/for-each":85,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/set-timeout":104,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.regexp.to-string":435,"core-js/modules/es.string.match":437,"core-js/modules/es.string.replace":438}],40:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),r=i(e("@babel/runtime-corejs3/core-js-stable/promise")),n=i(e("../../fw/fw")),o=i(e("../../fw/env")),l=i(e("./modules")),d=i(e("../../core/utils/error")),c=i(e("../../core/ui/core-ui"));const u={destroy:function(){return new r.default(e=>{if(this.dom.video.webkitSupportsPresentationMode&&"function"==typeof this.dom.video.webkitSetPresentationMode){if(o.default.isIphone)return void e();0,"picture-in-picture"===this.dom.video.webkitPresentationMode&&this.dom.video.webkitSetPresentationMode("inline"),e()}else document.pictureInPictureElement?document.exitPictureInPicture().then(()=>{e()}).catch(t=>{e()}):e()})}},h=function(e){e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault()),document.pictureInPictureElement?document.exitPictureInPicture().catch(e=>{0}):(this.dom.video.requestPictureInPicture().then(e=>{0}).catch(e=>{let t=null;e&&(t=e),d.default.warning.call(this,"Failed to enter picture to picture mode",1009,t)}),this.dom.video.addEventListener("enterpictureinpicture",()=>{n.default.addClass(this.dom.container,"rmp-pip-on"),n.default.createStdEvent("enterpictureinpicture",this.dom.container)}),this.dom.video.addEventListener("leavepictureinpicture",()=>{n.default.removeClass(this.dom.container,"rmp-pip-on"),n.default.createStdEvent("leavepictureinpicture",this.dom.container)}))},p=function(){this.dom.container.removeEventListener("loadedmetadata",this.onLoadedmetadataPiP),l.default.append.call(this,"pip"),l.default.deferredShow.call(this,"pip"),this.onPipClick=(0,s.default)(h).call(h,this),this.dom.pip.addEventListener("click",this.onPipClick)},f=function(){this.dom.container.removeEventListener("waiting",this.onWaitingHideLoadingSpin),c.default.hideLoadingSpin.call(this)},m=function(e){e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault());let t="picture-in-picture";"picture-in-picture"===this.dom.video.webkitPresentationMode&&(t="inline"),this.onWaitingHideLoadingSpin=(0,s.default)(f).call(f,this),(o.default.isIos[0]&&o.default.isIos[1]>11||o.default.isMacosSafari[0]&&o.default.isMacosSafari[1]>11||o.default.isIpadOS)&&this.dom.container.addEventListener("waiting",this.onWaitingHideLoadingSpin),this.dom.video.webkitSetPresentationMode(t)},g=function(){this.dom.container.removeEventListener("loadedmetadata",this.onLoadedmetadataPiPSafari),l.default.append.call(this,"pip"),l.default.deferredShow.call(this,"pip"),this.onPipClickSafari=(0,s.default)(m).call(m,this),this.dom.pip.addEventListener("click",this.onPipClickSafari)};u.init=function(){if(void 0!==document.pictureInPictureEnabled||this.dom.video.disablePictureInPicture)this.onLoadedmetadataPiP=(0,s.default)(p).call(p,this),this.dom.container.addEventListener("loadedmetadata",this.onLoadedmetadataPiP);else if(this.dom.video.webkitSupportsPresentationMode&&"function"==typeof this.dom.video.webkitSetPresentationMode){if(o.default.isIphone)return;0,this.onLoadedmetadataPiPSafari=(0,s.default)(g).call(g,this),this.dom.container.addEventListener("loadedmetadata",this.onLoadedmetadataPiPSafari)}else 0};var b=u;a.default=b},{"../../core/ui/core-ui":52,"../../core/utils/error":56,"../../fw/env":69,"../../fw/fw":70,"./modules":39,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/promise":102,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],41:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.regexp.to-string"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),o=i(e("../../fw/fw")),l=i(e("./modules")),d=i(e("../accessible/accessible"));const c={destroy:function(){this.readingMp4&&this.dom.container&&this.dom.container.removeEventListener("srcchanged",this.afterMp4BitrateSwitch),l.default.destroy.call(this,"quality")}},u=function(e,t){this.dom.container.removeEventListener("srcchanged",this.afterMp4BitrateSwitch),l.default.setActiveLevel.call(this,"quality",t),this.getPlayerInitialized()&&(this.play(),e>0&&this.seekTo(e))};c.setMp4Bitrate=function(e){this.dom.container.removeEventListener("srcchanged",this.afterMp4BitrateSwitch);let t=this.getCurrentTime();-1===t&&(t=0),this.afterMp4BitrateSwitch=(0,n.default)(u).call(u,this,t,e),this.dom.container.addEventListener("srcchanged",this.afterMp4BitrateSwitch),this.setSrcPDModule=!0,this.setSrc(this.src,null,e),o.default.createStdEvent("levelswitching",this.dom.container),this.setSrcPDModule=!1};const h=function(e){if((0,r.default)(this.labels.bitrates.renditions)&&this.labels.bitrates.renditions.length>=1&&"string"==typeof this.labels.bitrates.renditions[0])return this.labels.bitrates.renditions;{let t=[];switch(e){case 2:t=this.labels.bitrates.renditions[0];break;case 3:t=this.labels.bitrates.renditions[1];break;case 4:t=this.labels.bitrates.renditions[2];break;case 5:t=this.labels.bitrates.renditions[3];break;default:t=this.labels.bitrates.renditions[0]}return t}};c.setUpMP4UI=function(){const e=h.call(this,this.src.mp4.length);l.default.append.call(this,"quality"),l.default.appendOverlay.call(this,"quality");for(let a=0;a<this.src.mp4.length;a++){var t;const i=document.createElement("button");let s;a===this.initialBitrate?(i.className="rmp-button rmp-overlay-level rmp-overlay-level-active rmp-color-bg rmp-q"+a,i.setAttribute("data-src",this.src.mp4[this.initialBitrate])):(i.className="rmp-button rmp-overlay-level rmp-color-bg rmp-q"+a,i.setAttribute("data-src",this.src.mp4[a])),d.default.make.call(this,i,this.labels.hint.quality+" "+a,!0),s=e[a]?e[a].toString():"Bitrate "+a,o.default.setText(i,s),o.default.addEvent(["touchend","click"],i,(0,n.default)(t=c.setMp4Bitrate).call(t,this,a)),this.dom.qualityOverlayLevelsArea.appendChild(i)}};var p=c;a.default=p},{"../../fw/fw":70,"../accessible/accessible":31,"./modules":39,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.regexp.to-string":435}],42:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.string.replace"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/splice")),o=i(e("@babel/runtime-corejs3/core-js-stable/instance/index-of")),l=i(e("../../fw/fw")),d=i(e("../../fw/env")),c=i(e("./modules")),u=i(e("../utils/utils")),h=i(e("../accessible/accessible"));const p={},f=function(e,t){t&&t.stopPropagation(),e&&e.select()},m=function(e){const t=l.default.createElement("div","rmp-sharing-social");if((0,o.default)(e).call(e,"facebook")>-1){var a;const e=l.default.createElement("button","rmp-button rmp-inline rmp-i rmp-i-facebook rmp-sharing-social-icons"),i="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(this.sharingUrl);l.default.addEvent(["touchend","click"],e,(0,r.default)(a=u.default.openUrl).call(a,this,i)),h.default.make.call(this,e,"Facebook",!0),t.appendChild(e)}if((0,o.default)(e).call(e,"twitter")>-1){var i;const e=l.default.createElement("button","rmp-button rmp-inline rmp-i rmp-i-twitter rmp-sharing-social-icons"),a="https://twitter.com/share?url="+encodeURIComponent(this.sharingUrl);l.default.addEvent(["touchend","click"],e,(0,r.default)(i=u.default.openUrl).call(i,this,a)),h.default.make.call(this,e,"Twitter",!0),t.appendChild(e)}if((0,o.default)(e).call(e,"linkedin")>-1){var s;const e=l.default.createElement("button","rmp-button rmp-inline rmp-i rmp-i-linkedin rmp-sharing-social-icons"),a="https://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(this.sharingUrl);l.default.addEvent(["touchend","click"],e,(0,r.default)(s=u.default.openUrl).call(s,this,a)),h.default.make.call(this,e,"Linkedin",!0),t.appendChild(e)}if((0,o.default)(e).call(e,"reddit")>-1){var n;const e=l.default.createElement("button","rmp-button rmp-inline rmp-i rmp-i-reddit rmp-sharing-social-icons"),a="https://www.reddit.com/submit?url="+encodeURIComponent(this.sharingUrl);l.default.addEvent(["touchend","click"],e,(0,r.default)(n=u.default.openUrl).call(n,this,a)),h.default.make.call(this,e,"Reddit",!0),t.appendChild(e)}if((0,o.default)(e).call(e,"email")>-1){const e=l.default.createElement("button","rmp-button rmp-inline rmp-i rmp-i-email rmp-sharing-social-icons"),a=function(){window.location.href="mailto:?body="+encodeURIComponent(this.sharingUrl)};l.default.addEvent(["touchend","click"],e,(0,r.default)(a).call(a,this)),h.default.make.call(this,e,"Email",!0),t.appendChild(e)}this.dom.sharingOverlayLevelsArea.appendChild(t);const c=l.default.createElement("div","rmp-sharing-link");c.className="rmp-sharing-link";let p='<span class="rmp-i rmp-i-link"></span>';if(p+='<label for="rmp-sharing-link-'+this.id+'">Link to media</label>',p+='<input class="rmp-sharing-input" aria-label="'+this.labels.hint.sharingLink+'" id="rmp-sharing-link-'+this.id+'" type="text" value="'+this.sharingUrl+'"',this.rtl&&(p+=' dir="rtl"'),p+=">",c.innerHTML=p,this.dom.sharingOverlayLevelsArea.appendChild(c),""!==this.sharingCode){this.sharingCode=this.sharingCode.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");const e=l.default.createElement("div","rmp-sharing-code");let t='<span class="rmp-i rmp-i-code"></span>';t+='<label for="rmp-sharing-code-'+this.id+'">Embed code for media</label>',t+='<input class="rmp-sharing-input" aria-label="'+this.labels.hint.sharingEmbedCode+'" id="rmp-sharing-code-'+this.id+'" type="text" value="'+this.sharingCode+'"',this.rtl&&(t+=' dir="rtl"'),t+=">",e.innerHTML=t,this.dom.sharingOverlayLevelsArea.appendChild(e)}if(!d.default.isMobile&&this.dom.sharingOverlay){const e=this.dom.sharingOverlay.querySelectorAll(".rmp-sharing-input");for(let t=0,a=e.length;t<a;t++)l.default.addEvent("click",e[t],(0,r.default)(f).call(f,null,e[t]))}};p.init=function(){const e=function(e){const t=["facebook","twitter","linkedin","reddit","email"],a=[];for(let i=0,s=e.length;i<s;i++)-1===(0,o.default)(t).call(t,e[i])&&a.push(i);if(a.length>0)for(let i=a.length-1;i>=0;i--)(0,n.default)(e).call(e,a[i],1);return e}(this.sharingNetworks);c.default.append.call(this,"sharing"),c.default.appendOverlay.call(this,"sharing"),m.call(this,e)};var g=p;a.default=g},{"../../fw/env":69,"../../fw/fw":70,"../accessible/accessible":31,"../utils/utils":59,"./modules":39,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/index-of":87,"@babel/runtime-corejs3/core-js-stable/instance/splice":91,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.string.replace":438}],43:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.string.replace"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("@babel/runtime-corejs3/core-js-stable/parse-float")),o=i(e("../../fw/fw")),l=i(e("../ui/core-ui")),d=i(e("./modules")),c=i(e("../accessible/accessible"));const u={},h=function(e,t){t&&(t.stopPropagation(),"touchend"===t.type&&t.preventDefault());const a=this.dom.speedOverlayLevelsArea.querySelectorAll(".rmp-overlay-level");if(a.length>0&&a[e]){const t=a[e];let i=t.textContent;if("string"==typeof i&&""!==i){i=(0,n.default)(i.replace("x","")),this.setPlaybackRate(i);for(let e=0,t=a.length;e<t;e++)o.default.removeClass(a[e],"rmp-overlay-level-active");o.default.addClass(t,"rmp-overlay-level-active")}l.default.showChrome.call(this)}};u.init=function(){d.default.append.call(this,"speed"),d.default.appendOverlay.call(this,"speed");for(let e=0,t=this.speedRates.length;e<t;e++){const t=document.createElement("button");1===this.speedRates[e]?t.className="rmp-button rmp-overlay-level rmp-color-bg rmp-overlay-level-active":t.className="rmp-button rmp-overlay-level rmp-color-bg",c.default.make.call(this,t,this.labels.hint.speed+" x"+this.speedRates[e],!0),o.default.setText(t,"x"+this.speedRates[e]),o.default.addEvent(["touchend","click"],t,(0,r.default)(h).call(h,this,e)),this.dom.speedOverlayLevelsArea.appendChild(t)}};var p=u;a.default=p},{"../../fw/fw":70,"../accessible/accessible":31,"../ui/core-ui":52,"./modules":39,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/parse-float":100,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.string.replace":438}],44:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),r=i(e("@babel/runtime-corejs3/core-js-stable/set-timeout")),n=i(e("../fw/fw")),o=i(e("../fw/env")),l=i(e("../abr/hls")),d=i(e("../abr/shaka")),c=i(e("../ads/ads-helpers")),u=i(e("./ui/core-ui")),h=i(e("./utils/utils")),p=i(e("../cast/cast")),f=i(e("../cast/cordova-cast")),m=i(e("./events")),g=i(e("../core/utils/error")),b=i(e("../playlist/playlist")),v=i(e("../playlist/related"));const y={},k=function(){n.default.removeEvent("playing",this.dom.container,this.startUpLogPlaying),n.default.removeEvent("adloaded",this.dom.container,this.startUpLogPlaying),(0,r.default)(()=>{this.startUpPlaying=n.default.getNow(),this.startUpPlay>0&&this.startUpPlaying>this.startUpPlay&&(this.startUpTime=this.startUpPlaying-this.startUpPlay),this.firstFrameReached=!0,n.default.createStdEvent("firstframe",this.dom.container),n.default.createStdEvent("startuptimeavailable",this.dom.container)},0)},w=function(){h.default.autoplayFailureRestorePlayUI.call(this)},S=function(){const e=this.getAdLinear();null!==e&&(e||!e&&"rmp-vast"===this.adParser)&&h.default.fireAutoplaySuccess.call(this)},C=function(){this.onAdAutoplaySuccess=(0,s.default)(S).call(S,this),this.dom.container.addEventListener("adstarted",this.onAdAutoplaySuccess),this.onAdAutoplayFailed=(0,s.default)(w).call(w,this),this.dom.container.addEventListener("adinitialplayrequestfailed",this.onAdAutoplayFailed),this.dom.container.addEventListener("adinitialplayrequestsucceeded",this.onAdAutoplaySuccess)},j=function(){this.emptyInitAdTagUrl?h.default.playPromise.call(this):(this.adScheduleInput&&(this.adTagUrl=this.adSchedule.preroll),this.loadAds(this.adTagUrl,!0))},E=function(){this.startUpLogPlaying=(0,s.default)(k).call(k,this),this.dom.container.addEventListener("playing",this.startUpLogPlaying),this.dom.container.addEventListener("adloaded",this.startUpLogPlaying),this.ads&&!this.adImaDai?(this.autoplay&&C.call(this),j.call(this)):h.default.playPromise.call(this)},L=function(){if(this.googleCast)if(this.googleCastCordova){if(f.default.isMediaLoaded.call(this))return this.castMediaEnded?void this.loadCastMedia():void(this.getPaused()?(this.castMedia.play({}),m.default.play.call(this)):(this.castMedia.pause({}),m.default.pause.call(this)))}else{if(p.default.isMediaLoaded.call(this))return void this.remotePlayerController.playOrPause();if(this.castConnected&&"LOADING"===this.remotePlayerState)return void 0}if(this.firstPlay)return this.firstPlay=!1,void E.call(this);this.dom.video.paused?h.default.playPromise.call(this):this.dom.video.pause()},A=function e(){null!==this.processInitiatePlayback&&this.dom.container.removeEventListener("loadedmetadata",this.processInitiatePlayback),this.video360&&this.firstPlay&&"undefined"==typeof THREE?(0,r.default)(()=>{e.call(this)},10):this.ads&&this.firstPlay&&this.adParserLoaded?L.call(this):this.getAdOnStage()&&this.getAdLinear()&&!this.adImaDai?c.default.playPause.call(this):this.adOutStream||L.call(this)},T=function(){if(!this.playerInitialized){0;let e=!1;this.readingMse||this.hasLoadedMetadata&&"none"!==this.preload||(e=!0),this.playerInitialized=!0,n.default.hide(this.dom.poster),u.default.showLoadingSpin.call(this),this.ads?"ima"===this.adParser&&this.adDisplayContainer?(this.adDisplayContainer.initialize(),this.adDCInitialized=!0,(o.default.isMobile||e)&&this.dom.video.load()):"rmp-vast"===this.adParser&&this.rmpVast&&(this.rmpVast.initialize(),o.default.isMacosSafari[0]||o.default.isMobile||e&&this.dom.video.load()):e&&this.dom.video.load(),this.readingHlsJS?l.default.init.call(this):this.readingShaka&&d.default.init.call(this)}this.hasLoadedMetadata?A.call(this):null===this.processInitiatePlayback&&(this.processInitiatePlayback=(0,s.default)(A).call(A,this),this.dom.container.addEventListener("loadedmetadata",this.processInitiatePlayback))};y.init=function(e){if(e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault()),this.get5Ready()){if(this.firstPlay){if(this.ads&&!this.adParserLoaded)return void 0;this.startUpPlay=n.default.getNow()}this.hasPlaylist&&null!==this.playlistCallback&&this.firstPlay?(this.ads&&""===this.adTagUrl&&(this.emptyInitAdTagUrl=!1),b.default.callbackPromise.call(this).then(()=>{T.call(this)}).catch(e=>{T.call(this)})):this.hasRelated&&null!==this.relatedCallback&&this.firstPlay?(this.ads&&""===this.adTagUrl&&(this.emptyInitAdTagUrl=!1),v.default.callbackPromise.call(this).then(()=>{T.call(this)}).catch(e=>{T.call(this)})):T.call(this)}else g.default.warning.call(this,"not ready - cannot initiate playback - exit",1012,e)};var P=y;a.default=P},{"../abr/hls":5,"../abr/shaka":7,"../ads/ads-helpers":9,"../cast/cast":29,"../cast/cordova-cast":30,"../core/utils/error":56,"../fw/env":69,"../fw/fw":70,"../playlist/playlist":72,"../playlist/related":73,"./events":34,"./ui/core-ui":52,"./utils/utils":59,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/set-timeout":104,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],45:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/parse-int")),r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("../fw/fw"));const o={rewind:function(e,t){if(t&&(t.stopPropagation(),"touchend"===t.type&&t.preventDefault()),"number"==typeof e&&e>0){const t=this.getCurrentTime(),a=1e3*e;t>a&&(this.isLiveDvr?this.dvrLiveMode||this.dvrSeekTo(t-a):this.seekTo(t-a))}}},l=function(){var e;n.default.addClass(this.dom.container,"rmp-quick-rewind-or-forward-ui");let t="5";this.quickRewind>7.5&&this.quickRewind<20?t="10":this.quickRewind>20&&(t="30"),this.tvPlayerSkin&&(t="tv"),this.dom.quickRewind=n.default.createElement("button","rmp-quick-rewind-or-forward rmp-button rmp-i rmp-i-quick-rewind-"+t),this.tvPlayerSkin&&(t="10"),n.default.addEvent(["touchend","click"],this.dom.quickRewind,(0,r.default)(e=o.rewind).call(e,this,(0,s.default)(t))),this.dom.quickRewindHint=n.default.createElement("div","rmp-control-bar-hint rmp-color-bg",this.labels.hint.quickRewind,this.rtl),this.dom.quickRewind.appendChild(this.dom.quickRewindHint),this.dom.controlBar.appendChild(this.dom.quickRewind)};o.forward=function(e,t){if(t&&(t.stopPropagation(),"touchend"===t.type&&t.preventDefault()),"number"==typeof e&&e>0){const t=this.getCurrentTime(),a=1e3*e;this.isLiveDvr?this.dvrLiveMode||this.dvrSeekTo(t+a):this.seekTo(t+a)}};const d=function(){var e;this.quickRewind>0?n.default.addClass(this.dom.container,"rmp-quick-rewind-and-forward-ui"):n.default.addClass(this.dom.container,"rmp-quick-rewind-or-forward-ui");let t="5";this.quickForward>7.5&&this.quickForward<20?t="10":this.quickForward>20&&(t="30"),this.tvPlayerSkin&&(t="tv"),this.quickRewind>0?this.dom.quickForward=n.default.createElement("button","rmp-quick-rewind-or-forward rmp-button rmp-quick-rewind-and-forward rmp-i rmp-i-quick-forward-"+t):this.dom.quickForward=n.default.createElement("button","rmp-quick-rewind-or-forward rmp-button rmp-i rmp-i-quick-forward-"+t),this.tvPlayerSkin&&(t="10"),this.dom.quickForwardHint=n.default.createElement("div","rmp-control-bar-hint rmp-color-bg",this.labels.hint.quickForward,this.rtl),this.dom.quickForward.appendChild(this.dom.quickForwardHint),n.default.addEvent(["touchend","click"],this.dom.quickForward,(0,r.default)(e=o.forward).call(e,this,(0,s.default)(t))),this.dom.controlBar.appendChild(this.dom.quickForward)};o.init=function(){this.quickRewind>0&&l.call(this),this.quickForward>0&&d.call(this)};var c=o;a.default=c},{"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/parse-int":101,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],46:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.symbol.description"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),n=i(e("@babel/runtime-corejs3/core-js-stable/set-timeout")),o=i(e("@babel/runtime-corejs3/core-js-stable/parse-float")),l=i(e("@babel/runtime-corejs3/core-js-stable/parse-int")),d=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),c=i(e("../fw/fw")),u=i(e("../fw/env")),h=i(e("../vtt/captions")),p=i(e("../ads/ima-ads")),f=i(e("../ads/rmp-vast")),m=i(e("../ads/ads-helpers")),g=i(e("./resize/resize")),b=i(e("./ui/core-ui")),v=i(e("./ui/poster")),y=i(e("./ui/logo")),k=i(e("../cast/airplay")),w=i(e("./utils/utils")),S=i(e("../core/modules/modules"));const C={},j=function(){if(this.dom.playPauseHint){const e=c.default.getWidth(this.dom.playPauseHint);e>c.default.getWidth(this.dom.playPause)?c.default.setStyle(this.dom.playPauseHint,{marginLeft:0,left:"4px"}):c.default.setStyle(this.dom.playPauseHint,{marginLeft:-e/2+"px",left:"50%"})}if(this.dom.quickRewindHint){const e=c.default.getWidth(this.dom.quickRewindHint);c.default.setStyle(this.dom.quickRewindHint,{marginLeft:-e/2+"px"})}if(this.dom.quickForwardHint){const e=c.default.getWidth(this.dom.quickForwardHint);c.default.setStyle(this.dom.quickForwardHint,{marginLeft:-e/2+"px"})}let e=!0;if(this.dom.fullscreenHint){const t=c.default.getWidth(this.dom.fullscreenHint);t>c.default.getWidth(this.dom.fullscreen)||e&&"s3"===this.skin?(e=!1,c.default.setStyle(this.dom.fullscreenHint,{marginLeft:0,right:"4px",left:"auto"})):c.default.setStyle(this.dom.fullscreenHint,{marginLeft:-t/2+"px",right:"auto",left:"50%"})}};C.dispatchEvent=function(){this.alignControlBarHint=(0,d.default)(j).call(j,this),this.dom.container.addEventListener("enterfullscreen",this.alignControlBarHint),this.dom.container.addEventListener("exitfullscreen",this.alignControlBarHint),this.alignControlBarHint(),this.fadeInPlayer&&c.default.fadeIn(this.dom.container),C.updateTime.call(this),c.default.createStdEvent("ready",this.dom.container)},C.updateTime=function(){this.timeReady=c.default.getNow()-this.refTime};const E=function(){this.dom.container.removeEventListener("playing",this.onStartSeekToOffset),this.seekTo(this.offsetStartPosition)},L=function(){if(this.dom.container.removeEventListener("playing",this.onStartSetQuality),u.default.localStorage(this.allowLocalStorage)&&null!==window.localStorage.getItem("rmpQuality")){let e=JSON.parse(window.localStorage.getItem("rmpQuality"));if(e.value&&e.value>-1){let t=(0,l.default)(e.value),a=this.getBitrates();t>a.length-1&&(t=a.length-1),-1===t&&this.readingPDorNative&&(t=0),this.setBitrate(t)}}};C.minimalFire=function(){this.playerReady||(this.playerReady=!0,g.default.resize.call(this),C.dispatchEvent.call(this))},C.fire=function(){if(this.playerReady)return;this.playerReady=!0,g.default.resize.call(this);let e="00:00";if(this.dom.timeElapsed&&this.dom.timeElapsedText&&(this.isLiveDvr?(c.default.addClass(this.dom.timeElapsed,"rmp-i rmp-i-live"),e=this.labels.hint.live):this.audioOnly&&(e=" "),c.default.setText(this.dom.timeElapsedText,e)),this.dom.duration){const t=this.dom.duration.textContent;"string"==typeof t&&""!==t||c.default.setText(this.dom.duration,e)}if(u.default.isIos[0]&&(this.initialVolume=1,this.rememberVolume=!1),this.allowLocalStorage||(this.rememberVolume=!1,this.rememberCurrentTime=!1,this.rememberQuality=!1),this.isVod||(this.rememberCurrentTime=!1),this.rememberQuality&&(this.readingOutstream||this.readingPDorNative&&(this.readingHls||this.readingDash))&&(this.rememberQuality=!1),this.rememberCurrentTime&&u.default.localStorage(this.allowLocalStorage)&&null!==window.localStorage.getItem("rmpCurrentTime")){let e=JSON.parse(window.localStorage.getItem("rmpCurrentTime"));e.value&&(this.offsetStartPosition=(0,l.default)(e.value))}if(this.muted)this.setMute(!0);else if(this.initialVolume>1?this.initialVolume=1:this.initialVolume<0&&(this.initialVolume=0),this.forceInitialVolume)this.setVolume(this.initialVolume);else if(this.rememberVolume&&u.default.localStorage(this.allowLocalStorage)&&null!==window.localStorage.getItem("rmpVolume")){let e=JSON.parse(window.localStorage.getItem("rmpVolume"));e.value&&(e=(0,o.default)(e.value),e<=0?this.setMute(!0):e<1&&e>0?this.setVolume(e):e>=1&&(this.setVolume(e),this.onVolumeChange()))}else this.setVolume(this.initialVolume),this.initialVolume>=1&&this.onVolumeChange();this.autoplay?(this.onVolumeChange(),this.initialAutoplayRequest=!0,this.initiatePlayback()):b.default.showCentralPlay.call(this),this.offsetStartPosition>0&&this.isVod&&!this.ads&&(this.onStartSeekToOffset=(0,d.default)(E).call(E,this),this.dom.container.addEventListener("playing",this.onStartSeekToOffset)),this.rememberQuality&&(this.onStartSetQuality=(0,d.default)(L).call(L,this),this.dom.container.addEventListener("playing",this.onStartSetQuality)),this.adOutStream&&c.default.hide([this.dom.seekBar,this.dom.duration,this.dom.timeElapsed]),C.dispatchEvent.call(this),this.adBlockerDetection&&!0===window.rmpGlobals.adBlockerDetected&&c.default.createStdEvent("adblockerdetected",this.dom.container),this.hasExternalCCFiles&&h.default.init.call(this)};const A=function(){c.default.removeEvent(["playing","adloaded","adstarted","aderror","adloadererror","autoplayfailure"],this.dom.container,this.onAdOnStageUpdatePrerollMask),c.default.clearTimeout(this.prerollMaskRemovalTimeout),this.prerollMaskRemovalTimeout=(0,n.default)(()=>{c.default.hide(this.dom.prerollMask),c.default.removeElement(this.dom.prerollMask)},401),c.default.fadeOut(this.dom.prerollMask)},T=function(){if(this.adBlockerDetection&&!0===window.rmpGlobals.adBlockerDetected&&this.adBlockerDetectedPreventPlayback)return c.default.removeElement(this.dom.prerollMask),m.default.onAdBlockDetection.call(this),this.autoplay&&w.default.fireAutoplayFailure.call(this),this.offsetStartPosition=0,void C.fire.call(this);this.dom.prerollMask&&(this.onAdOnStageUpdatePrerollMask=(0,d.default)(A).call(A,this),c.default.addEvent(["playing","adloaded","adstarted","aderror","adloadererror","autoplayfailure"],this.dom.container,this.onAdOnStageUpdatePrerollMask)),"ima"===this.adParser?p.default.init.call(this):f.default.init.call(this)},P=function(){window.rmpGlobals.adBlockerDetected=!0,T.call(this)},M=function(){window.rmpGlobals.adBlockerDetected=!1,T.call(this)};C.init=function(){if(this.audioOnly||(this.ads&&!this.emptyInitAdTagUrl&&b.default.appendPrerollMask.call(this),v.default.append.call(this),c.default.show(this.dom.volume)),this.speed&&c.default.show(this.dom.speed),this.sharing&&c.default.show(this.dom.sharing),this.readingMp4&&c.default.show(this.dom.quality),void 0!==this.dom.audio&&c.default.show(this.dom.audio),this.airplay&&!this.readingDash&&k.default.init.call(this),""!==this.logo&&y.default.append.call(this),""!==this.contentMetadata.title&&b.default.appendContentTitle.call(this),""!==this.contentMetadata.description&&b.default.appendContentDescription.call(this),(0,r.default)(this.customModule)&&this.customModule.length>0&&c.default.isObject(this.customModule[0])?(S.default.customFilter.call(this),this.customModule.length>0&&S.default.customInit.call(this)):this.customModule=[],c.default.createStdEvent("mousemove",this.dom.container),this.ads)if(this.adBlockerDetection){if("boolean"==typeof window.rmpGlobals.adBlockerDetected&&window.rmpGlobals.adBlockerDetected)return void T.call(this);if(void 0===window.FuckAdBlock)return window.rmpGlobals.adBlockerDetected=!0,void T.call(this);this.onAdBlockDetected=(0,d.default)(P).call(P,this),this.onNoAdBlockDetected=(0,d.default)(M).call(M,this);const e=new FuckAdBlock;0,e.options.set({timeout:250}),e.on(!0,this.onAdBlockDetected).on(!1,this.onNoAdBlockDetected),e.check(["html","http"],{http:{baitMode:"import",baitUrl:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}})}else T.call(this);else C.fire.call(this)};var I=C;a.default=I},{"../ads/ads-helpers":9,"../ads/ima-ads":10,"../ads/rmp-vast":12,"../cast/airplay":28,"../core/modules/modules":39,"../fw/env":69,"../fw/fw":70,"../vtt/captions":75,"./resize/resize":47,"./ui/core-ui":52,"./ui/logo":54,"./ui/poster":55,"./utils/utils":59,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/parse-float":100,"@babel/runtime-corejs3/core-js-stable/parse-int":101,"@babel/runtime-corejs3/core-js-stable/set-timeout":104,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.symbol.description":440}],47:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.regexp.to-string"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/parse-int")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),o=i(e("@babel/runtime-corejs3/core-js-stable/set-timeout")),l=i(e("../../fw/fw")),d=i(e("../../fw/env")),c=i(e("../ui/core-ui")),u=i(e("../utils/error")),h=i(e("../../360/360")),p=i(e("../../vr/vr"));const f={},m=function(){l.default.removeClass(this.dom.container,"rmp-medium"),l.default.removeClass(this.dom.container,"rmp-small"),l.default.removeClass(this.dom.container,"rmp-extrasmall")};f.auxResize=function(){if(this.isHTML5){const e=d.default.getScreenDimension().width;if(e<=0)return;e>0&&e<375?(m.call(this),l.default.addClass(this.dom.container,"rmp-extrasmall")):e>0&&e<480?(m.call(this),l.default.addClass(this.dom.container,"rmp-small")):(m.call(this),l.default.addClass(this.dom.container,"rmp-medium")),this.getAdOnStage()&&f.resizeAds.call(this),this.video360&&h.default.resize.call(this),this.videoVR&&p.default.resize.call(this),this.hasRelated&&f.related.call(this),l.default.createStdEvent("resize",this.dom.container)}},f.resizeAds=function(){let e=-1,t=-1;if(this.isInFullscreen)if(this.hasNativeFullscreenSupport){const a=d.default.getScreenDimension();e=a.width,t=a.height}else if(this.fullscreenFullWindowMode){const a=d.default.getViewportSize();e=a.width,t=a.height}if("rmp-vast"===this.adParser)if(this.isInFullscreen){if(e>0&&t>0)if(this.hasNativeFullscreenSupport)try{this.rmpVast.resizeAd(e,t,"fullscreen")}catch(a){l.default.trace(a)}else if(this.fullscreenFullWindowMode)try{this.rmpVast.resizeAd(e,t,"normal")}catch(a){l.default.trace(a)}}else try{this.rmpVast.resizeAd(this.width,this.height,"normal")}catch(a){l.default.trace(a)}else if(this.isInFullscreen){if(e>0&&t>0)if(this.hasNativeFullscreenSupport)try{this.adsManager.resize(e,t,google.ima.ViewMode.FULLSCREEN)}catch(a){l.default.trace(a)}else if(this.fullscreenFullWindowMode)try{this.adsManager.resize(e,t,google.ima.ViewMode.NORMAL)}catch(a){l.default.trace(a)}}else try{this.adsManager.resize(this.width,this.height,google.ima.ViewMode.NORMAL)}catch(a){l.default.trace(a)}};const g=function(e){if(this.dom.relatedOverlay){const t=this.dom.relatedOverlay.querySelectorAll(".rmp-related-up-next");for(let e=0,i=t.length;e<i;e++)l.default.hide(t[e]);let a=this.currentRelatedIndex+1;if(void 0===e[this.currentRelatedIndex+1]&&(a=0),e[a]){const t=e[a].querySelector(".rmp-related-up-next");null!==t&&l.default.show(t)}}};f.related=function(){if(this.get5Ready()&&this.dom.relatedOverlayLevelsArea&&this.dom.relatedOverlay){const e=this.dom.relatedOverlayLevelsArea.querySelectorAll(".rmp-related-item"),t=[];let a=0;for(let f=0,m=e.length;f<m;f++)f!==this.currentRelatedIndex?(t.push(e[f]),l.default.show(e[f])):l.default.hide(e[f]);g.call(this,e);const i=this.dom.relatedOverlay.querySelector(".rmp-overlay-title");let s=8;null!==i&&(s+=l.default.getHeight(i)+8);const r=this.getPlayerWidth(),n=l.default.getClientWidth(this.dom.relatedOverlayLevelsArea);let o=r;const d=Math.round(r),c=this.dom.relatedOverlay.querySelector(".rmp-module-overlay-close");null!==c&&(n<d?("number"==typeof n&&n>0&&(o=n),c.style.right=(8+d-n).toString()+"px"):c.style.right="8px");let u=2;l.default.hasClass(this.dom.container,"rmp-medium")&&(u=3);const h=(o-16-8*(u-1))/u,p=9*h/16;if(h>0&&p>0){let e=1;for(let r=0,n=t.length;r<n;r++){r>=u*e&&e++;const i=t[r],n=r-(e-1)*u,o=s+8+p*(e-1)+8*(e-1),d={left:n*h+8*(n+1)+"px",top:o+"px",width:h+"px",height:p+"px"};l.default.setStyle(i,d),a=o+p}const i=this.dom.relatedOverlayLevelsArea.querySelector(".rmp-related-item-bottom-margin");l.default.setStyle(i,{top:a.toString()+"px"})}}},f.fullscreenchange=function(){this.isInFullscreen?(this.isInFullscreen=!1,l.default.removeClass(this.dom.fullscreen,"rmp-i-resize-small"),l.default.removeClass(this.dom.container,"rmp-fullscreen-on"),l.default.addClass(this.dom.fullscreen,"rmp-i-resize-full"),l.default.updateAriaLabel(this.dom.fullscreenHint,this.labels.hint.enterFullscreen),l.default.setText(this.dom.fullscreenHint,this.labels.hint.enterFullscreen),f.resize.call(this),d.default.iosIpadOSHasCustomFullscreen&&l.default.removeClass(this.dom.container,"rmp-fullscreen-on-ipad"),l.default.createStdEvent("exitfullscreen",this.dom.container)):(this.isInFullscreen=!0,l.default.removeClass(this.dom.fullscreen,"rmp-i-resize-full"),l.default.addClass(this.dom.fullscreen,"rmp-i-resize-small"),l.default.addClass(this.dom.container,"rmp-fullscreen-on"),l.default.updateAriaLabel(this.dom.fullscreenHint,this.labels.hint.exitFullscreen),l.default.setText(this.dom.fullscreenHint,this.labels.hint.exitFullscreen),f.auxResize.call(this),d.default.iosIpadOSHasCustomFullscreen&&l.default.addClass(this.dom.container,"rmp-fullscreen-on-ipad"),l.default.createStdEvent("enterfullscreen",this.dom.container))},f.fullscreenerror=function(e){let t=null;e&&(t=e),u.default.warning.call(this,"fullscreenerror",1003,t)},f.webkitbeginfullscreen=function(){this.isInFullscreen=!0,l.default.createStdEvent("enterfullscreen",this.dom.container)},f.webkitendfullscreen=function(){this.isInFullscreen=!1,f.resize.call(this),l.default.createStdEvent("exitfullscreen",this.dom.container)},f.resize=function(e){if(this.isInFullscreen){if(this.fullscreenFullWindowMode){const e=d.default.getViewportSize();e.width>-1&&e.height>-1&&this.setPlayerSize(e.width,e.height)}else f.auxResize.call(this);return}const t=this.dom.container.parentNode;if(t)if(this.iframeMode){if(e){const e={width:"100%",height:"100%"};this.audioOnly&&(e.height="40px"),l.default.setStyle(this.dom.container,e)}this.width=l.default.getTrueWidth(t),this.height=l.default.getTrueHeight(t),f.auxResize.call(this,this.width)}else{let e=0,a=0;const i=l.default.getTrueWidth(t);0,i>=this.initialWidth?(e=this.initialWidth,a=this.initialHeight):(e=i,a=i/this.initialAspectRatio),0===e||0===a?(this.autoHeightMode&&(this.autoHeightMode=!1,this.initialWidth=640,this.initialHeight=360,this.initialAspectRatio=1.7777777778),this.width=this.initialWidth,this.height=this.initialHeight,e=this.initialWidth+"px",a=this.initialHeight+"px"):(this.width=e,this.height=a,this.autoHeightMode?(e="100%",a+="px"):(this.audioOnly&&(a=40),e+="px",a+="px"));const s={width:e,height:a};l.default.setStyle(this.dom.container,s),f.auxResize.call(this,this.width)}},f.fullscreenInteraction=function(){if(this.hasNativeFullscreenSupport)this.isInFullscreen?this.ads&&"rmp-vast"===this.adParser&&this.getAdOnStage()&&this.getAdLinear()&&this.rmpVast&&"function"==typeof this.rmpVast.getVastPlayer?d.default.exitFullscreen(this.rmpVast.getVastPlayer()):d.default.exitFullscreen(this.dom.video):this.ads&&"rmp-vast"===this.adParser&&this.getAdOnStage()&&this.getAdLinear()&&this.rmpVast&&"function"==typeof this.rmpVast.getVastPlayer?d.default.requestFullscreen(this.dom.container,this.rmpVast.getVastPlayer()):d.default.requestFullscreen(this.dom.container,this.dom.video);else if(this.fullscreenFullWindowMode){let e=-1,t=-1;if(this.isInFullscreen)this.isInFullscreen=!1,e=this.initialWidth,t=this.initialHeight,l.default.removeClass(this.dom.fullscreen,"rmp-i-resize-small"),l.default.addClass(this.dom.fullscreen,"rmp-i-resize-full"),l.default.removeClass(this.dom.container,"rmp-full-window-on"),l.default.updateAriaLabel(this.dom.fullscreenHint,this.labels.hint.enterFullscreen),l.default.setText(this.dom.fullscreenHint,this.labels.hint.enterFullscreen),l.default.createStdEvent("exitfullscreen",this.dom.container),this.setPlayerSize(e,t),(0,o.default)(()=>{f.resize.call(this)},0);else{const a=d.default.getViewportSize();if(!(a.width>-1&&a.height>-1))return;e=a.width,t=a.height,this.isInFullscreen=!0,l.default.removeClass(this.dom.fullscreen,"rmp-i-resize-full"),l.default.addClass(this.dom.fullscreen,"rmp-i-resize-small"),l.default.addClass(this.dom.container,"rmp-full-window-on"),l.default.updateAriaLabel(this.dom.fullscreenHint,this.labels.hint.exitFullscreen),l.default.setText(this.dom.fullscreenHint,this.labels.hint.exitFullscreen),l.default.createStdEvent("enterfullscreen",this.dom.container),this.setPlayerSize(e,t)}}},f.fullscreenButtonInteraction=function(e){e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault()),c.default.showChrome.call(this),f.fullscreenInteraction.call(this)};const b=function(e){e&&("orientationchange"===e.type?(l.default.clearTimeout(this.orientationChangeResizeTimeout),this.orientationChangeResizeTimeout=(0,o.default)(()=>{f.resize.call(this)},200)):"resize"===e.type&&null===this.throttledResizeTimeout&&(l.default.clearTimeout(this.throttledResizeTimeout),this.throttledResizeTimeout=(0,o.default)(()=>{f.resize.call(this),this.throttledResizeTimeout=null},66)))};f.initialSizing=function(){this.throttledResize=(0,n.default)(b).call(b,this),window.addEventListener("resize",this.throttledResize),d.default.hasScreenOrientationAPI?window.screen.orientation.addEventListener("change",this.throttledResize):void 0!==window.onorientationchange&&window.addEventListener("orientationchange",this.throttledResize),this.iframeMode&&this.autoHeightMode&&(this.autoHeightMode=!1);const e=this.dom.container.parentNode;this.iframeMode?(this.width=l.default.getTrueWidth(e),this.height=l.default.getTrueHeight(e)):this.autoHeightMode?(this.width=l.default.getTrueWidth(e),this.height=this.width/this.autoHeightModeRatio):(this.autoHeightMode=!1,this.iframeMode=!1,this.width=(0,r.default)(this.width,10),this.height=(0,r.default)(this.height,10)),this.initialWidth=this.width,this.initialHeight=this.height,this.initialAspectRatio=this.initialWidth/this.initialHeight,this.autoHeightMode&&(this.initialWidth=999999,this.initialAspectRatio=this.autoHeightModeRatio),f.resize.call(this,!0)};var v=f;a.default=v},{"../../360/360":2,"../../fw/env":69,"../../fw/fw":70,"../../vr/vr":74,"../ui/core-ui":52,"../utils/error":56,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/parse-int":101,"@babel/runtime-corejs3/core-js-stable/set-timeout":104,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.regexp.to-string":435}],48:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.symbol.description"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("../../fw/fw")),n=i(e("../ready")),o=i(e("../utils/utils")),l=i(e("../ui/core-ui")),d=i(e("../utils/error"));const c={init:function(){this.dom.video=null,this.isHTML5=!1,this.googleCast=!1;const e=r.default.createElement("canvas","rmp-no-play");""!==this.contentMetadata.description&&l.default.appendDescriptionLabel.call(this,"noSupportWrapper");const t=r.default.createElement("div","rmp-no-play-text"),a=r.default.createElement("div",null,this.labels.error.noSupportMessage,this.rtl);let i;if(t.appendChild(a),this.hasMp4&&(i=this.src.mp4[0]),!this.audioOnly&&i&&this.isVod&&""!==this.labels.error.noSupportDownload){const e=document.createElement("div"),a=r.default.createElement("a","rmp-dl-link",this.labels.error.noSupportDownload,this.rtl);a.href=i,a.download="true",e.appendChild(a),t.appendChild(e)}if(!this.audioOnly&&""!==this.labels.error.noSupportInstallChrome){const e=document.createElement("div");let a;""!==this.labels.error.noSupportInstallChromeLink?(a=r.default.createElement("a","rmp-dl-link",null,this.rtl),a.href=this.labels.error.noSupportInstallChromeLink,a.target="_blank"):a=r.default.createElement("span",null,null,this.rtl),r.default.setText(a,this.labels.error.noSupportInstallChrome),e.appendChild(a),t.appendChild(e)}this.dom.container.appendChild(e),d.default.runNoiseBackground(this.getPlayerWidth(),this.getPlayerHeight(),e),this.dom.container.appendChild(t),this.autoplay&&o.default.fireAutoplayFailure.call(this),n.default.minimalFire.call(this)}};var u=c;a.default=u},{"../../fw/fw":70,"../ready":46,"../ui/core-ui":52,"../utils/error":56,"../utils/utils":59,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.symbol.description":440}],49:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),r=i(e("../../fw/fw")),n=i(e("../../fw/env")),o=i(e("../../abr/native-hls")),l=i(e("./runNoSupport")),d=i(e("../../core/utils/utils")),c=i(e("../../core/dom")),u=i(e("../../abr/fps"));const h={},p=function(){this.readingFps?u.default.init.call(this):this.dom.video.src=this.startingBitratePath,c.default.append.call(this)},f=function(e){c.default.prepare.call(this),d.default.checkStreams.call(this,(0,s.default)(p).call(p,this),this.backupSrc,e)},m=function(e){this.readingHls=!0;let t="hls";"string"==typeof e&&("hevc"===e?(this.readingHlsHevc=!0,t="hlsHevc"):"fps"===e&&(this.preload="auto",this.readingFps=!0,t="fps")),this.startingBitratePath=this.src[t],this.readingFps&&(t="hls"),o.default.init.call(this),f.call(this,t)},g=function(){n.default.isIos[0]&&n.default.isIos[1]>10||n.default.isMacosSafari[0]&&n.default.isMacosSafari[1]>10||n.default.isIpadOS?m.call(this,"hevc"):(this.okHlsJS&&"hlsjs"===this.hlsEngine?this.readingHlsJS=!0:this.okDash&&"shakaplayer"===this.hlsEngine&&(this.readingHlsShaka=!0,this.readingShaka=!0),this.readingHlsHevc=!0,this.startingBitratePath=this.src.hlsHevc,c.default.prepare.call(this),c.default.append.call(this))},b=function(){this.readingMp4=!0,this.readingWebM=!0,this.src.mp4=this.src.webm,this.initialBitrate=r.default.filterInitialBitrate(this.initialBitrate,this.src.mp4),this.startingBitratePath=this.src.mp4[this.initialBitrate],f.call(this,"webm")},v=function(){this.readingMp4=!0,this.readingWebM=!1,this.okMp4Hevc&&this.hasMp4Hevc&&(this.src.mp4=this.src.mp4Hevc,this.readingMp4Hevc=!0),this.initialBitrate=r.default.filterInitialBitrate(this.initialBitrate,this.src.mp4),this.startingBitratePath=this.src.mp4[this.initialBitrate],this.okMp4Hevc&&this.hasMp4Hevc?f.call(this,"mp4Hevc"):f.call(this,"mp4")},y=function(){this.hasLoadedMetadata=!0,this.readingOutstream=!0,c.default.prepare.call(this),c.default.append.call(this),r.default.removeClass(this.dom.container,"rmp-wait-for-metadata")},k=function(e){switch(e){case"m4a":this.readingM4a=!0;break;case"mp3":this.readingMp3=!0;break;case"ogg":this.readingOgg=!0}this.startingBitratePath=this.src[e],f.call(this,e)},w=function(){this.okM4a&&this.hasM4a?k.call(this,"m4a"):this.okMp3&&this.hasMp3?k.call(this,"mp3"):this.okOgg&&this.hasOgg?k.call(this,"ogg"):l.default.init.call(this)};h.init=function(){n.default.isAndroid[0]&&void 0!==this.dom.video.disableRemotePlayback&&(this.dom.video.disableRemotePlayback=!0),this.adOutStream?y.call(this):this.hasDash&&this.okDash&&this.dashFirst?(this.readingDash=!0,this.readingShaka=!0,this.startingBitratePath=this.src.dash,c.default.prepare.call(this),c.default.append.call(this)):this.hasFps&&this.okFps?m.call(this,"fps"):!this.audioOnly&&this.hasHlsHevc&&this.okHlsHevc?g.call(this):this.hasHls&&this.okHlsJS&&"hlsjs"===this.hlsEngine?(this.readingHlsJS=!0,this.startingBitratePath=this.src.hls,c.default.prepare.call(this),c.default.append.call(this)):this.hasHls&&this.okDash&&"shakaplayer"===this.hlsEngine?(this.readingHlsShaka=!0,this.readingShaka=!0,this.startingBitratePath=this.src.hls,c.default.prepare.call(this),c.default.append.call(this)):this.hasHls&&this.okHls?m.call(this):this.hasDash&&this.okDash&&!this.dashFirst?(this.readingDash=!0,this.readingShaka=!0,this.startingBitratePath=this.src.dash,c.default.prepare.call(this),c.default.append.call(this)):this.audioOnly?w.call(this):this.okWebM&&this.hasWebM&&this.webmFirst?b.call(this):this.okMp4&&this.hasMp4||this.okMp4Hevc&&this.hasMp4Hevc?v.call(this):this.okWebM&&this.hasWebM&&!this.webmFirst?b.call(this):this.playlistAudioOnly||this.relatedAudioOnly||this.audioOnlyUseVideoLayout?w.call(this):l.default.init.call(this)};var S=h;a.default=S},{"../../abr/fps":4,"../../abr/native-hls":6,"../../core/dom":32,"../../core/utils/utils":59,"../../fw/env":69,"../../fw/fw":70,"./runNoSupport":48,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],50:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("../../fw/fw")),r=i(e("../ui/core-ui")),n=i(e("../../core/dvr/dvr"));const o={do:function(e){let t,a,i;if(this.googleCast&&this.castConnected){const i=this.getDuration();t=-1===i?-1:Math.round(i/1e3),a=t*e}else if(this.isLiveDvr){if(this.readingHlsJS){if(t=s.default.getMediaDuration(this.dom.video),!s.default.isNumber(t))return;i=t-this.hlsJSLevelDuration,i<=0&&(i=0),a=this.hlsJSLevelDuration*e+i}else if(this.readingShaka){const i=this.shakaPlayer.seekRange(),r=i.start,n=i.end;s.default.isNumber(n)&&s.default.isNumber(r)&&r>0&&n>0&&(t=n,a=r+(n-r)*e)}}else t=s.default.getMediaDuration(this.dom.video),a=t*e;if(!s.default.isNumber(t)||t<=0||!s.default.isNumber(e))return;if(a<0||a>t)return;this.isLiveDvr&&n.default.setRecModeUI.call(this);const r={width:100*e+"%"};s.default.setStyle(this.dom.current,r);const o={left:100*e+"%"};s.default.setStyle(this.dom.handle,o),this.googleCast&&this.castConnected?this.seekTo(1e3*a):s.default.setMediaCurrentTime(this.dom.video,a)}},l=function(e){let t;t=e>=100?100:e<0?0:e;const a=this.getDuration();if(a>-1){let e,i;s.default.setStyle(this.dom.current,{width:t+"%"}),s.default.setStyle(this.dom.handle,{left:t+"%"}),this.isLiveDvr&&this.dom.duration?(i=this.dom.duration,e="-"+s.default.readableTime((a-t/100*a)/1e3)):this.dom.timeElapsedText&&(i=this.dom.timeElapsedText,e=s.default.readableTime(t*(a/1e3)/100)),s.default.setText(i,e)}};o.touchend=function(e){if(e){e.stopPropagation(),e.preventDefault();let t=(s.default.getPosXTouch(e)-s.default.getAbsLeft(this.dom.seekBar))/s.default.getWidth(this.dom.seekBar);if(!s.default.isNumber(t))return;t>=1?t=1:t<0&&(t=0),o.do.call(this,t),this.touchDown=!1}},o.touchmove=function(e){this.touchDown=!0,r.default.showChrome.call(this);const t=(s.default.getPosXTouch(e)-s.default.getAbsLeft(this.dom.seekBar))/s.default.getWidth(this.dom.seekBar)*100;s.default.isNumber(t)&&l.call(this,t)},o.mouseupDoc=function(e){if(e){e.stopPropagation(),this.draggingTimeCursor=!1,s.default.removeClass(this.dom.timetotal,"grabbing"),document.removeEventListener("mouseup",this.mouseupDoc),document.removeEventListener("mousemove",this.mousemoveDoc);const t=s.default.getPosX(e),a=s.default.getAbsLeft(this.dom.timetotal),i=s.default.getWidth(this.dom.timetotal);let r;r=t<a?0:t>a+i?.99:(t-a)/i,o.do.call(this,r)}},o.mousemoveDoc=function(e){const t=(s.default.getPosX(e)-s.default.getAbsLeft(this.dom.timetotal))/s.default.getWidth(this.dom.timetotal)*100;s.default.isNumber(t)&&l.call(this,t)};var d=o;a.default=d},{"../../core/dvr/dvr":33,"../../fw/fw":70,"../ui/core-ui":52,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],51:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/instance/index-of")),r=i(e("../../fw/fw"));const n={},o=function(){if(""===this.skinButtonColor&&(this.skinButtonColor="rgba(255, 255, 255, 1)"),""===this.skinAccentColor)switch(this.skin){case"s1":this.skinAccentColor="rgba(130, 177, 255, 1)";break;case"s2":this.skinAccentColor="rgba(255, 110, 64, 1)";break;case"s3":this.skinAccentColor="rgba(247, 25, 16, 1)";break;case"s4":this.skinAccentColor="rgba(105, 240, 174, 1)";break;default:this.skinAccentColor="rgba(130, 177, 255, 1)"}let e="google-cast-launcher {--disconnected-color: "+this.skinButtonColor+";--connected-color: "+this.skinAccentColor+";} ";e+="google-cast-launcher:hover {--disconnected-color: "+this.skinAccentColor+";}",r.default.appendStyle(e)},l=function(){let e=".rmp-color-bg:not(.rmp-overlay-level-active), .rmp-module-overlay-icons, .rmp-related-duration, .rmp-related-up-next, .rmp-related-title {background: "+this.skinBackgroundColor+";} ";e+=".rmp-overlay-level { border-color: "+this.skinBackgroundColor+";} ",e+=".rmp-overlay-level-active { color: "+this.skinBackgroundColor+";} ","s4"===this.skin&&(e+=".rmp-play-pause, .rmp-ad-info, .rmp-quick-rewind-or-forward, .rmp-audio-only.rmp-quick-rewind-and-forward .rmp-audio-only-volume-icon, .rmp-fullscreen, .rmp-seek-bar, .rmp-time-elapsed, .rmp-duration, .rmp-related-skip-next, .rmp-desktop-volume-icon { background: "+this.skinBackgroundColor+";} ",e+=".rmp-overlay-level-active.rmp-abr-active { border-color: "+this.skinBackgroundColor+";} "),r.default.appendStyle(e)},d=function(){let e=".rmp-color-button, .rmp-time-elapsed-text, .rmp-dvr-rec .rmp-i-live, .rmp-volume.rmp-volume-off-mute .rmp-hint, .rmp-hint, .rmp-in-module-hint,.rmp-dvr-rec .rmp-i-live .rmp-time-elapsed-text, .rmp-live-dvr.rmp-dvr-rec .rmp-i-live:hover .rmp-time-elapsed-text, .rmp-control-bar-hint, .rmp-ad-outstream .rmp-volume.rmp-volume-off-mute, .rmp-desktop-volume-indicator, .rmp-desktop-volume-hint, .rmp-transcripts-item.rmp-transcripts-current-item:hover {color: "+this.skinButtonColor+";} ";e+=".rmp-color-bg-button, .rmp-circle::before, .rmp-overlay-level-active, .rmp-desktop-volume-bar { background: "+this.skinButtonColor+";} ",e+=".rmp-overlay-title-text, .rmp-transcripts-header {border-bottom-color: "+this.skinButtonColor+";} ",e+=".rmp-module-fcc-settings {border-color: "+this.skinButtonColor+";} ","s3"===this.skin&&(e+=".rmp-time-total, .rmp-overlay-level, .rmp-overlay-level-active.rmp-abr-active, .rmp-desktop-volume-bar-container { border-color: "+this.skinButtonColor+";} ",this.hasPlaylist&&(e+=".rmp-playlist-side-menu {background: "+this.skinButtonColor+";}")),"s4"===this.skin&&(e+=".rmp-overlay-title-text {border-color: "+this.skinButtonColor+";} "),this.hasRelated&&(e+=".rmp-related-item {border-color: "+this.skinButtonColor+";} ",e+=".rmp-related-skip-preview-title, .rmp-related-skip-preview-up-next {color: "+this.skinButtonColor+" !important;}"),r.default.appendStyle(e)},c=function(){let e=".rmp-i:hover, .rmp-module:hover .rmp-i, .rmp-i-live, .rmp-dvr-rec .rmp-i-live:hover, .rmp-sup, .rmp-i-live, .rmp-pip-on .rmp-i-pip, .rmp-transcripts-item:hover, .rmp-overlay-level:hover:not(.rmp-overlay-level-active), .rmp-volume.rmp-volume-off-mute {color: "+this.skinAccentColor+";} ";"s3"===this.skin&&(e+=".rmp-overlay-level-active { color: "+this.skinAccentColor+";} ",e+=".rmp-loaded { background-color: "+this.skinAccentColor+";} "),e+=".rmp-module-fcc-settings:hover {border-color: "+this.skinAccentColor+"; color: "+this.skinAccentColor+";} ",e+=".rmp-abr-active {border-color: "+this.skinAccentColor+";} ",e+=".rmp-quality-hd, .rmp-ad-info-message, .rmp-transcripts-current-item, .rmp-transcripts-side-menu::-webkit-scrollbar-thumb {background: "+this.skinAccentColor+";} ",this.hasPlaylist&&(e+=".rmp-playlist-item-active .rmp-playlist-item-number {color: "+this.skinAccentColor+";} ",e+=".rmp-playlist-item-active .rmp-playlist-item-thumbnail {border-color: "+this.skinAccentColor+";} ",e+=".rmp-playlist-side-menu::-webkit-scrollbar-thumb {background: "+this.skinAccentColor+";} "),this.hasRelated&&(e+=".rmp-related-item:hover {border-color: "+this.skinAccentColor+";} "),this.ads&&(e+=".rmp-ad-current-time, .rmp-ad-markers {background: "+this.skinAccentColor+";} "),r.default.appendStyle(e)};n.apply=function(){var e,t,a;""!==this.skinBackgroundColor&&"s3"!==this.skin&&(-1===(0,s.default)(e=this.skinBackgroundColor).call(e,"rgba")&&(this.skinBackgroundColor="#"+this.skinBackgroundColor),l.call(this));""!==this.skinButtonColor&&(-1===(0,s.default)(t=this.skinButtonColor).call(t,"rgba")&&(this.skinButtonColor="#"+this.skinButtonColor),d.call(this));""!==this.skinAccentColor&&(-1===(0,s.default)(a=this.skinAccentColor).call(a,"rgba")&&(this.skinAccentColor="#"+this.skinAccentColor),c.call(this));this.googleCast&&o.call(this)};var u=n;a.default=u},{"../../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/instance/index-of":87,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],52:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.symbol.description"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/set-interval")),n=i(e("../../fw/fw")),o=i(e("../../fw/env"));const l={},d=function(){let e=!1;return this.forceResetTimer&&(e=!0),this.getAdOnStage()?(this.getAdLinear()&&this.getAdPaused()||!this.getAdLinear()&&this.getPaused())&&(e=!0):this.getPaused()&&(e=!0),e},c=function e(){n.default.clearInterval(this.chromeTimer),this.chromeTimer=(0,r.default)(()=>{d.call(this)?e.call(this):l.hideChrome.call(this)},this.delayToFade)};l.hideChrome=function(){n.default.removeClass(this.dom.container,"rmp-chrome"),n.default.addClass(this.dom.container,"rmp-no-chrome")},l.showChrome=function(){n.default.removeClass(this.dom.container,"rmp-no-chrome"),n.default.addClass(this.dom.container,"rmp-chrome"),c.call(this)},l.showCentralPlay=function(){l.hideLoadingSpin.call(this),o.default.isMobile?n.default.addClass(this.dom.centralMobileUI,"rmp-mobile-show-play"):n.default.fadeIn(this.dom.overlayButton),l.showChrome.call(this)},l.hideCentralPlay=function(){o.default.isMobile?n.default.removeClass(this.dom.centralMobileUI,"rmp-mobile-show-play"):n.default.fadeOut(this.dom.overlayButton)},l.showLoadingSpin=function(){this.getWaitingUI()||(n.default.addClass(this.dom.container,"rmp-waiting"),n.default.fadeIn(this.dom.loadingSpin))},l.hideLoadingSpin=function(){this.getWaitingUI()&&(n.default.removeClass(this.dom.container,"rmp-waiting"),n.default.fadeOut(this.dom.loadingSpin))},l.protoHideControls=function(){n.default.addClass(this.dom.container,"rmp-hide-controls"),this.controls=!1},l.protoShowControls=function(){n.default.removeClass(this.dom.container,"rmp-hide-controls"),l.showChrome.call(this),this.controls=!0},l.restorePlayUI=function(){n.default.addClass(this.dom.playPause,"rmp-i-play"),n.default.removeClass(this.dom.playPause,"rmp-i-pause"),n.default.setText(this.dom.playPauseHint,this.labels.hint.play),o.default.isMobile&&(n.default.removeClass(this.dom.centralMobileUIIcon,"rmp-i-pause"),n.default.addClass(this.dom.centralMobileUIIcon,"rmp-i-play")),l.showCentralPlay.call(this),n.default.createStdEvent("mousemove",this.dom.container)},l.appendContentTitle=function(){this.dom.contentTitle=n.default.createElement("div","rmp-title rmp-color-bg",this.contentMetadata.title,this.rtl),this.dom.contentTitle.setAttribute("title",this.contentMetadata.title),n.default.addClass(this.dom.container,"rmp-title-ui"),this.dom.container&&this.dom.controlBar&&this.dom.container.insertBefore(this.dom.contentTitle,this.dom.controlBar)},l.appendDescriptionLabel=function(e){this.dom.descriptionLabel=document.createElement("label",null,this.contentMetadata.description),n.default.hide(this.dom.descriptionLabel),this.dom.descriptionLabel.id="media-description-for-"+this.id,this.dom[e].appendChild(this.dom.descriptionLabel)},l.appendContentDescription=function(){this.dom.description=n.default.createElement("div","rmp-description rmp-color-bg",this.contentMetadata.description,this.rtl),this.dom.description.setAttribute("title",this.contentMetadata.description),this.dom.container.appendChild(this.dom.description)},l.appendPrerollMask=function(){this.dom.prerollMask=n.default.createElement("div","rmp-ad-preroll-mask"),n.default.setStyle(this.dom.prerollMask,{backgroundColor:"#"+this.backgroundColor}),this.dom.content.appendChild(this.dom.prerollMask)},l.setLive=function(){this.isVod=!1,this.isLive=!0,n.default.addClass(this.dom.container,"rmp-live"),n.default.addClass(this.dom.timeElapsed,"rmp-i rmp-i-live"),n.default.setText(this.dom.timeElapsedText,this.labels.hint.live)};var u=l;a.default=u},{"../../fw/env":69,"../../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/set-interval":103,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.symbol.description":440}],53:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.string.split"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/trim")),o=i(e("../../fw/fw"));const l={},d=function(e){let t=this.getDuration();if(t<=0)return;t/=1e3;let a=o.default.getPosX(e)-o.default.getAbsLeft(this.dom.timetotal);const i=o.default.getWidth(this.dom.timetotal);a<0?a=0:a>=i&&(a=i);const s=a/i;let r,l;r=this.isLiveDvr?t-s*t:s*t,r>=t?r=t:r<=0&&(r=0),l=this.isLiveDvr?0===r?this.labels.hint.live:"-"+o.default.readableTime(r):o.default.readableTime(r),o.default.setText(this.dom.timeIndicator,l),o.default.setStyle(this.dom.indicator,{left:a+"px"});for(let p=0,f=this.thumbnailsArray.length;p<f;p++){const e=this.thumbnailsArray[p];if(null!==e[0]&&null!==e[1]&&"string"==typeof e[2]&&r>=e[0]&&r<e[1]){var d,c,u,h;if(this.thumbnailURIs.length>1){let e;for(let t=0,a=this.thumbnailURIsTimestamps.length;t<a;t++)r>=this.thumbnailURIsTimestamps[t]&&(e=this.thumbnailURIs[t]);e&&e!==this.currentThumbnailURI&&(this.currentThumbnailURI=e,o.default.setStyle(this.dom.thumbnailsImg,{backgroundImage:'url("'+this.currentThumbnailURI+'")'}))}const t=e[2].split(","),a=(0,n.default)(d=t[0]).call(d),i=(0,n.default)(c=t[1]).call(c),s=(0,n.default)(u=t[2]).call(u),l=(0,n.default)(h=t[3]).call(h);o.default.setStyle(this.dom.thumbnailsImg,{backgroundPosition:"-"+a+"px -"+i+"px",height:l+"px",width:s+"px",top:"-"+l+"px"}),o.default.setStyle(this.dom.indicator,{width:s+"px",marginLeft:-s/2+"px"})}}},c=function(){this.hasLoadedMetadata&&o.default.fadeIn(this.dom.indicator)},u=function(){this.hasLoadedMetadata&&o.default.fadeOut(this.dom.indicator)};l.init=function(){o.default.addEvent("mousemove",this.dom.timetotal,(0,r.default)(d).call(d,this)),o.default.addEvent("mouseenter",this.dom.timetotal,(0,r.default)(c).call(c,this)),o.default.addEvent("mouseleave",this.dom.timetotal,(0,r.default)(u).call(u,this))};var h=l;a.default=h},{"../../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/trim":93,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.string.split":439}],54:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),r=i(e("../../fw/fw")),n=i(e("../utils/error")),o=i(e("../utils/utils"));const l={init:function(){this.audioOnly&&(this.logo=""),""!==this.logo&&"bottomleft"!==this.logoPosition&&"topleft"!==this.logoPosition&&"topright"!==this.logoPosition&&"bottomright"!==this.logoPosition&&(this.logoPosition="topleft")}},d=function(){this.dom.logoImg.removeEventListener("load",this.onLogoLoad),this.dom.logoImg.removeEventListener("error",this.onLogoError),this.logoAppended||(this.dom.container.insertBefore(this.dom.logoImg,this.dom.controlBar.nextSibling),this.logoAppended=!0)},c=function(e){this.dom.logoImg.removeEventListener("load",this.onLogoLoad),this.dom.logoImg.removeEventListener("error",this.onLogoError),r.default.removeEvent(["touchend","click"],this.dom.logoImg,this.openLogoUrl);let t=null;e&&(t=e),n.default.warning.call(this,"failed to load logo at "+this.logo,1e3,t)};l.append=function(){var e;/(\.png|\.jpg|\.gif)/i.test(this.logo)&&(this.dom.logoImg=document.createElement("img"),this.dom.logoImg.alt="Media player logo",this.logoWatermark?this.dom.logoImg.className="rmp-logo rmp-force-show":this.dom.logoImg.className="rmp-logo","8px"!==this.logoMargin&&r.default.setStyle(this.dom.logoImg,{margin:this.logoMargin}),"topleft"===this.logoPosition?r.default.addClass(this.dom.logoImg,"rmp-logo-top-left"):"bottomleft"===this.logoPosition?r.default.addClass(this.dom.logoImg,"rmp-logo-bottom-left"):"topright"===this.logoPosition?r.default.addClass(this.dom.logoImg,"rmp-logo-top-right"):"bottomright"===this.logoPosition&&r.default.addClass(this.dom.logoImg,"rmp-logo-bottom-right"),this.onLogoLoad=(0,s.default)(d).call(d,this),this.onLogoError=(0,s.default)(c).call(c,this),this.dom.logoImg.addEventListener("load",this.onLogoLoad),this.dom.logoImg.addEventListener("error",this.onLogoError),this.openLogoUrl=(0,s.default)(e=o.default.openUrl).call(e,this,this.logoLoc),r.default.addEvent(["touchend","click"],this.dom.logoImg,this.openLogoUrl),this.dom.logoImg.src=this.logo)},l.update=function(){var e;this.dom.logoImg.removeEventListener("load",this.onLogoLoad),this.dom.logoImg.removeEventListener("error",this.onLogoError),r.default.removeEvent(["touchend","click"],this.dom.logoImg,this.openLogoUrl),this.dom.logoImg.addEventListener("load",this.onLogoLoad),this.dom.logoImg.addEventListener("error",this.onLogoError),this.openLogoUrl=(0,s.default)(e=o.default.openUrl).call(e,this,this.logoLoc),r.default.addEvent(["touchend","click"],this.dom.logoImg,this.openLogoUrl),this.dom.logoImg.src=this.logo};var u=l;a.default=u},{"../../fw/fw":70,"../utils/error":56,"../utils/utils":59,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],55:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),r=i(e("../../fw/fw")),n=i(e("../utils/error"));const o={},l=function(){this.dom.posterImg.removeEventListener("load",this.onPosterLoad),this.dom.posterImg.removeEventListener("error",this.onPosterError),this.dom.poster.contains(this.dom.posterImg)||this.dom.poster.appendChild(this.dom.posterImg)},d=function(e){this.dom.posterImg.removeEventListener("load",this.onPosterLoad),this.dom.posterImg.removeEventListener("error",this.onPosterError);let t=null;e&&(t=e),n.default.warning.call(this,"failed to load poster at "+this.poster,1001,t)};o.append=function(){if(this.dom.poster=r.default.createElement("div","rmp-poster"),r.default.setStyle(this.dom.poster,{backgroundColor:"#"+this.backgroundColor}),this.dom.content.appendChild(this.dom.poster),this.autoplay&&r.default.hide(this.dom.poster),this.dom.posterImg=r.default.createElement("img","rmp-poster-img"),this.dom.posterImg.alt="Media player poster frame",r.default.cssPropertySupport("objectFit"))switch(this.posterScaleMode){case"letterbox":r.default.addClass(this.dom.posterImg,"rmp-object-fit-contain");break;case"zoom":r.default.addClass(this.dom.posterImg,"rmp-object-fit-cover");break;case"stretch":r.default.addClass(this.dom.posterImg,"rmp-object-fit-fill");break;case"none":r.default.addClass(this.dom.posterImg,"rmp-object-fit-none");break;default:r.default.addClass(this.dom.posterImg,"rmp-object-fit-contain")}else r.default.addClass(this.dom.posterImg,"rmp-poster-img-no-object-fit");this.onPosterLoad=(0,s.default)(l).call(l,this),this.onPosterError=(0,s.default)(d).call(d,this),this.dom.posterImg.addEventListener("load",this.onPosterLoad),this.dom.posterImg.addEventListener("error",this.onPosterError);let e=r.default.blackFrame;""!==this.poster?e=this.poster:this.hideInitialBlackFrameWhenNoPoster&&r.default.addClass(this.dom.poster,"rmp-no-display"),this.dom.posterImg.src=e};var c=o;a.default=c},{"../../fw/fw":70,"../utils/error":56,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],56:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.regexp.to-string"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/set-timeout")),n=i(e("@babel/runtime-corejs3/core-js-stable/set-interval")),o=i(e("../../fw/fw")),l=i(e("../modules/modules")),d=i(e("../ready")),c=i(e("../../abr/shaka")),u=i(e("../../abr/hls"));const h={runNoiseBackground:function(e,t,a){let i=null,s=0;a.width=e,a.height=t,i=a.getContext("2d"),(0,n.default)((function(){const a=i.createImageData(e,t),r=a.data;for(let e=0,t=r.length;e<t;e+=4){const t=7+Math.sin(e/2e5+s/7);r[e]=r[e+1]=r[e+2]=40*Math.random()*t,r[e+3]=85}i.putImageData(a,0,0),s=(s+1)%t}),67)},errorLayout:function(){this.playerReady||(this.googleCast=!1,d.default.minimalFire.call(this));let e=this.dom.container.querySelector(".rmp-error");if(null!==e&&o.default.removeElement(e),e=o.default.createElement("canvas","rmp-error"),this.dom.content||(this.dom.content=o.default.createElement("div","rmp-content"),this.dom.container.insertBefore(this.dom.content,this.dom.container.firstChild)),this.dom.content.appendChild(e),h.runNoiseBackground(this.getPlayerWidth(),this.getPlayerHeight(),e),""!==this.labels.error.customErrorMessage){const e=o.default.createElement("div","rmp-error-text",this.labels.error.customErrorMessage,this.rtl);this.dom.content.appendChild(e)}let t=!1;if((this.readingMp4&&this.src.mp4.length>1||this.hasPlaylist||this.hasRelated)&&(t=!0),this.changingSrc&&(this.changingSrc=!1),l.default.closeAll.call(this),t||this.readingPDorNative&&this.dom.video&&this.dom.video.removeEventListener("error",this.generateError,!0),o.default.addClass(this.dom.container,"rmp-error-ui"),this.readingHlsJS)u.default.destroy.call(this),o.default.createStdEvent("error",this.dom.container);else if(this.readingShaka)if(this.shakaPlayer){c.default.destroy.call(this);let e=!0;this.shakaPlayer.destroy().then(()=>{e&&(e=!1,o.default.createStdEvent("error",this.dom.container))}),(0,r.default)(()=>{e&&(e=!1,o.default.createStdEvent("error",this.dom.container))},1e3)}else o.default.createStdEvent("error",this.dom.container);else o.default.clearNativeHtml5Buffer(this.dom.video),o.default.createStdEvent("error",this.dom.container)}};h.isFatal=function(e){const t=e;if(t&&o.default.isObject(t.error)&&"number"==typeof t.error.code){const e=t.error.code;let a="";if("string"==typeof t.error.message&&(a=t.error.message),4===e)return!0}return!1},h.fatal=function(e,t,a){this.errorData={code:t,message:e,event:a,fatal:!0},h.errorLayout.call(this)},h.warning=function(e,t,a){this.errorData={code:t,message:e,event:a,fatal:!1},this.dom.container&&o.default.createStdEvent("warning",this.dom.container)},h.mediaTag=function(e){e&&e.target&&h.isFatal(e.target)&&h.fatal.call(this,"error on HTML5 media element",100,e)};var p=h;a.default=p},{"../../abr/hls":5,"../../abr/shaka":7,"../../fw/fw":70,"../modules/modules":39,"../ready":46,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/set-interval":103,"@babel/runtime-corejs3/core-js-stable/set-timeout":104,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.regexp.to-string":435}],57:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/instance/reverse")),n=i(e("@babel/runtime-corejs3/core-js-stable/set-timeout")),o=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),l=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),d=i(e("@babel/runtime-corejs3/core-js-stable/json/stringify")),c=i(e("@babel/runtime-corejs3/core-js-stable/parse-int")),u=i(e("@babel/runtime-corejs3/core-js-stable/instance/index-of")),h=i(e("../../fw/fw")),p=i(e("../../fw/env")),f=i(e("../ready"));const m={},g="https://cdn.radiantmediatechs.com/rmp/rr/vgs.json",b="https://cdn.radiantmediatechs.com/rmp/rr/vgt.json",v="https://cdn.radiantmediatechs.com/rmp/rr/vgrp.json",y=/(qqtv\.|fomny.com|streams.rip|brstreams.xyz|liluka-site.eu|epgssiptv.tk|mygoodstream.pw|elahmad.com|hdtvku.com|sportstreamshd.com|mygoaltv.com|trgooltv5.co|tvpoztmo.com|cialis99.com|adreach.co|rumahtv.com|mygstrm748463.tk|nhl.ru|diag-auto.site|onhockey.tv|purakuraplay.com|dailysport.club|minifreeza.eu)/i,k=36e5;let w=!1,S=!1;const C={"=":"a","+":"b",y:"c",z:"d",v:"e",u:"f",d:"g",b:"h",s:"i",q:"j",a:"k",c:"l",i:"m",k:"n",e:"o",g:"p",n:"q",o:"r",0:"s",7:"t",8:"u",9:"v",4:"w",5:"x",6:"y",1:"z",2:".",3:"-"},j=function(e){let t;if((0,u.default)(e).call(e,"!")>-1){t=e.split("!");const a={s:0,c:1,o:2,g:3,i:4,k:5,m:6,e:7,q:8,a:9},i=t[0].replace(/[scogikmeqa]/g,e=>a[e]);if(/^\d+$/.test(i)){const e=(0,c.default)(i,10);let a=new Date;const s=a.getTime();a=Math.round(s/1e3);return e>a+1382400||a>e?[!0,t[1],"expired"]:[!0,t[1],"notexpired"]}return[!0,t[1],"expired"]}return[!1,null,"notexpired"]},E=function(e){if(!e)return!1;if(e===this.originLocal&&/host$/.test(e)||e===this.rmpDev&&/\.rmp$/.test(e))return!0;if(/^\d+\.\d+\.\d+\.\d+$/i.test(e)){const t=/^192\.168\./i,a=/^172\.[1-3]/i,i=/^10\./i;if(e===this.altLocal||t.test(e)||a.test(e)||i.test(e))return!0}return!1},L=function(e,t){if(p.default.localStorage(t)){const t={value:e,timestamp:(new Date).getTime().toString()};window.localStorage.setItem("rmpLU",(0,d.default)(t))}},A=function(){const e=document.getElementById(this.id);e&&(e.removeEventListener("destroycompleted",this.licenseDestroyCompleted),h.default.removeElement(e))};m.endPlayer=function(e){this.licenseFailedDestroyRequested=!0,f.default.minimalFire.call(this),this.licenseDestroyCompleted=(0,l.default)(A).call(A,this),this.dom.container.addEventListener("destroycompleted",this.licenseDestroyCompleted),h.default.log("license","invalid license for Radiant Media Player"),this.destroy()};const T=function(e){let t;this.isLicValid="true";try{t=JSON.parse(e)}catch(i){return h.default.trace(i),void L("false",this.allowLocalStorage)}if(t&&(0,o.default)(t.sites)&&this.ragnarok){const e=t.sites;for(let t=0,i=e.length;t<i;t++){var a;if((0,u.default)(a=this.ragnarok).call(a,e[t])>-1){const a=e[t].split("."),i=a[a.length-2]+"."+a[a.length-1];if((0,u.default)(i).call(i,this.ragnarok)>-1){m.endPlayer.call(this,this.licType.toUpperCase()+" Edition auth failed"),this.isLicValid="false";break}}}}L(this.isLicValid,this.allowLocalStorage)},P=function(e){if(p.default.localStorage(this.allowLocalStorage)&&null!==window.localStorage.getItem("rmpLU")){const e=JSON.parse(window.localStorage.getItem("rmpLU")),t=(0,c.default)(e.timestamp);if(h.default.isNumber(t)){const t=e.value,a=(0,c.default)(e.timestamp),i=(new Date).getTime();if("true"===t&&a+k>i)return}}this.licUrl=e+"?rdm="+Math.floor((new Date).getTime()/k);const t=(0,l.default)(T).call(T,this);h.default.ajax(this.licUrl,this.ajaxInternalTimeout,!1,"GET").then(t).catch(e=>{h.default.clearTimeout(this.siteCheckerRetryTimeout),this.siteCheckerRetryTimeout=(0,n.default)(()=>{h.default.ajax(this.licUrl,this.ajaxInternalTimeout,!1,"GET").then(t).catch(e=>{L("false",this.allowLocalStorage)})},1e4)})},M=function(e){let t,a=[],i=[],s="";try{t=JSON.parse(e)}catch(c){return h.default.trace(c),void L(this.isLicValid,this.allowLocalStorage)}if(t&&(0,o.default)(t.sites)){const e=t.sites;for(let t=0,l=e.length;t<l;t++)if(e[t].license){var n;let l=e[t].license;if(l=(0,r.default)(n=l.split("")).call(n).join(""),l===this.licenseKey){this.isLicValid="true",w?(0,o.default)(e[t].appWhitelist)&&e[t].appWhitelist.length>0&&(i=e[t].appWhitelist):(0,o.default)(e[t].blacklist)&&e[t].blacklist.length>0?(a=e[t].blacklist,s="blacklist"):(0,o.default)(e[t].whitelist)&&e[t].whitelist.length>0&&(a=e[t].whitelist,s="whitelist");break}}}if("false"===this.isLicValid)return L(this.isLicValid,this.allowLocalStorage),void m.endPlayer.call(this,"PLATFORM Edition auth failed");if(S)return this.isLicValid="true",void L(this.isLicValid,this.allowLocalStorage);if(!w&&a.length>0){if("blacklist"===s){this.isLicValid="true";for(let e=0,t=a.length;e<t;e++){var l;if((0,u.default)(l=this.ragnarok).call(l,a[e])>-1){this.isLicValid="false";break}}}else if("whitelist"===s){this.isLicValid="false";for(let e=0,t=a.length;e<t;e++){var d;if((0,u.default)(d=this.ragnarok).call(d,a[e])>-1){this.isLicValid="true";break}}}}else if(w&&i.length>0&&"string"==typeof i[0]&&""!==i[0]){const e=this.dom.container.getAttribute("data-rwlan");if(e){let t;this.isLicValid="false";try{t=window.atob(e)}catch(c){t=null,h.default.log(null,c)}if(t)for(let e=0,a=i.length;e<a;e++)if((0,u.default)(t).call(t,i[e])>-1){this.isLicValid="true";break}}else this.isLicValid="false"}"false"===this.isLicValid&&m.endPlayer.call(this,"PLATFORM Edition auth failed"),L(this.isLicValid,this.allowLocalStorage)},I=function(e){if(p.default.localStorage(this.allowLocalStorage)&&null!==window.localStorage.getItem("rmpLU")){const e=JSON.parse(window.localStorage.getItem("rmpLU")),t=(0,c.default)(e.timestamp);if(h.default.isNumber(t)){const t=e.value,a=(0,c.default)(e.timestamp),i=(new Date).getTime();if("true"===t&&a+k>i)return}}this.licUrl=e+"?rdm="+Math.floor((new Date).getTime()/k),h.default.ajax(this.licUrl,this.ajaxInternalTimeout,!1,"GET").then((0,l.default)(M).call(M,this)).catch(e=>{h.default.clearTimeout(this.rmpPlusCheckerRetryTimeout),this.rmpPlusCheckerRetryTimeout=(0,n.default)(()=>{h.default.ajax(this.licUrl,this.ajaxInternalTimeout,!1,"GET").then((0,l.default)(M).call(M,this)).catch(e=>{L("false",this.allowLocalStorage)})},1e4)})};m.isValidSiteKey=function(e,t){let a;if("function"!=typeof window.atob)return 2;try{if(g!==window.atob("aHR0cHM6Ly9jZG4ucmFkaWFudG1lZGlhdGVjaHMuY29tL3JtcC9yci92Z3MuanNvbg==")||b!==window.atob("aHR0cHM6Ly9jZG4ucmFkaWFudG1lZGlhdGVjaHMuY29tL3JtcC9yci92Z3QuanNvbg==")||v!==window.atob("aHR0cHM6Ly9jZG4ucmFkaWFudG1lZGlhdGVjaHMuY29tL3JtcC9yci92Z3JwLmpzb24="))return 0;a=window.atob(e)}catch(l){return 0}if(y.test(this.ragnarok))return 0;"file:"===p.default.getProtocol?w=!0:S=E.call(this,t);if(/^\D{10}@\d+$/i.test(a))return this.licType="plus",I.call(this,v),3;if(!/\*_%.+/i.test(a))return 0;a=a.replace("*_%",""),a=a.replace("%_*","");let i=!1;if((0,u.default)(a).call(a,"?")>-1){"rom5dasis30db0A"===a.split("?")[1]&&(i=!0,a=a.replace("?rom5dasis30db0A",""))}const s=j.call(this,a),r=s[0];if(r&&(this.licType="trial",a=s[1],"expired"===s[2]))return h.default.log("license","trial has expired"),0;if(w&&!r)return 0;if(S){if(i||r)return 2;if(!i)return 1}const n=a.replace(/[=+yzvudbsqacikegno0789456123]/g,e=>C[e]);r?w||P.call(this,b,n):P.call(this,g,n);let o=!1;if(w)o=!0;else{const e=t.replace(/\d/g,"");(0,u.default)(e).call(e,n)>-1&&(o=!0)}return(r||i)&&o?2:i||r||!o?0:1},m.ck=function(){const e=m.isValidSiteKey.call(this,this.licenseKey,this.ragnarok);return 0!==e&&(1===e?!(this.video360||this.ads||!h.default.isEmptyObject(this.shakaDrm)||this.hasRelated):2===e||(3===e||void 0))};var x=m;a.default=x},{"../../fw/env":69,"../../fw/fw":70,"../ready":46,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/index-of":87,"@babel/runtime-corejs3/core-js-stable/instance/reverse":88,"@babel/runtime-corejs3/core-js-stable/json/stringify":94,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/parse-int":101,"@babel/runtime-corejs3/core-js-stable/set-timeout":104,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.regexp.to-string":435,"core-js/modules/es.string.replace":438,"core-js/modules/es.string.split":439}],58:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),r=i(e("@babel/runtime-corejs3/core-js-stable/object/keys")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/splice")),o=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),l=i(e("@babel/runtime-corejs3/core-js-stable/instance/filter")),d=i(e("../../fw/fw")),c=i(e("../../fw/env")),u=i(e("../../fw/defaults/input-defaults")),h=i(e("../../core/quick"));const p={getPoster:function(e){let t=c.default.devicePixelRatio;const a=(0,l.default)(e).call(e,(e,a)=>a+1>=t);return 0===a.length?e[e.length-1]:a[0]},assignPoster:function(){this.contentMetadata.poster.length>0&&(this.poster=p.getPoster(this.contentMetadata.poster)),this.contentMetadata.endOfVideoPoster.length>0&&(this.endOfVideoPoster=p.getPoster(this.contentMetadata.endOfVideoPoster))},filterPlaylist:function(e){const t=e,a=[];let i;for(let s=0,r=t.length;s<r;s++){if(d.default.srcExists(t[s].src.hlsHevc,"hlsHevc"))i="hlsHevc";else if(d.default.srcExists(t[s].src.hls,"hls"))i="hls";else if(d.default.srcExists(t[s].src.dash,"dash"))i="dash";else if(d.default.srcExists(t[s].src.mp4Hevc,"mp4Hevc"))i="mp4Hevc";else if(d.default.srcExists(t[s].src.mp4,"mp4"))i="mp4";else if(d.default.srcExists(t[s].src.webm,"webm"))i="webm";else if(d.default.srcExists(t[s].src.m4a,"m4a"))i="m4a";else if(d.default.srcExists(t[s].src.mp3,"mp3"))i="mp3";else{if(!d.default.srcExists(t[s].src.ogg,"ogg")){a.push(s);continue}i="ogg"}const e=["contentMetadata","adTagUrl","src","seekBarThumbnailsLoc","ccFiles"];for(let r=0,n=e.length;r<n;r++){const n=e[r];if("contentMetadata"!==n)if("adTagUrl"===n||"related"===n||"seekBarThumbnailsLoc"===n){if("string"!=typeof t[s][n]){t[s][n]="";continue}}else{if("thumbnail"===n&&("string"!=typeof t[s][n]||""===t[s][n])&&"string"==typeof t[s].poster&&""!==t[s].poster){t[s].thumbnail=t[s].poster;continue}if("src"===n){if("string"!=typeof t[s][n][i]&&!(0,o.default)(t[s][n][i])){a.push(s);continue}}else if("adTagWaterfall"===n){if(!(0,o.default)(t[s][n])||"string"!=typeof t[s][n][0]||""===t[s][n][0]){delete t[s][n];continue}}else if("ccFiles"===n&&!d.default.isValidTextTracksSet(t[s][n])){delete t[s][n];continue}}else t[s][n]=(0,l.default)(p).call(p,t[s][n])}}if(a.length>0)for(let s=a.length-1;s>=0;s--)(0,n.default)(t).call(t,a[s],1);return t},filter:function(e){let t=(0,r.default)(u.default.contentMetadata),a=e;e||(a=u.default.contentMetadata);for(let s=0,r=t.length;s<r;s++){let e=t[s];void 0!==a[e]&&typeof a[e]==typeof u.default.contentMetadata[e]||(a[e]=u.default.contentMetadata[e])}let i=(0,r.default)(a);for(let s=0,r=i.length;s<r;s++){let e=i[s];switch(e){case"title":case"description":case"artist":case"album":case"id":case"releaseDate":case"thumbnail":case"duration":case"googleCastType":"string"!=typeof a[e]&&a[e];break;case"artwork":case"poster":case"endOfVideoPoster":(0,o.default)(a[e])||a[e]}}if(0===a.artwork.length&&a.poster.length>0)for(let s=0,r=a.poster.length;s<r;s++)a.artwork[s]={},a.artwork[s].src=a.poster[s];return a}},f=function(){this.dom.container.removeEventListener("playing",this.onPlayingSetMetadata),void 0!==window.navigator.mediaSession&&(window.navigator.mediaSession.metadata=new MediaMetadata(this.contentMetadata),window.navigator.mediaSession.setActionHandler("seekbackward",()=>{h.default.rewind.call(this,10,null)}),window.navigator.mediaSession.setActionHandler("seekforward",()=>{h.default.forward.call(this,10,null)}),(this.hasPlaylist||this.hasRelated)&&(window.navigator.mediaSession.setActionHandler("previoustrack",()=>{if(this.hasPlaylist){const e=this.getCurrentPlaylistItemIndex();this.setPlaylistItem(e-1)}else if(this.hasRelated){const e=this.getCurrentRelatedItemIndex();this.setRelatedItem(e-1)}}),window.navigator.mediaSession.setActionHandler("nexttrack",()=>{if(this.hasPlaylist){const e=this.getCurrentPlaylistItemIndex();this.setPlaylistItem(e+1)}else if(this.hasRelated){const e=this.getCurrentRelatedItemIndex();this.setRelatedItem(e+1)}})))};p.init=function(){this.contentMetadata=(0,l.default)(p).call(p,this.contentMetadata),p.assignPoster.call(this),this.onPlayingSetMetadata=(0,s.default)(f).call(f,this),this.dom.container.addEventListener("playing",this.onPlayingSetMetadata)};var m=p;a.default=m},{"../../core/quick":45,"../../fw/defaults/input-defaults":67,"../../fw/env":69,"../../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/filter":82,"@babel/runtime-corejs3/core-js-stable/instance/splice":91,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/object/keys":99,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],59:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.regexp.to-string"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/object/keys")),n=i(e("@babel/runtime-corejs3/core-js-stable/json/stringify")),o=i(e("@babel/runtime-corejs3/core-js-stable/instance/trim")),l=i(e("@babel/runtime-corejs3/core-js-stable/instance/for-each")),d=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),c=i(e("../../fw/fw")),u=i(e("../../fw/env")),h=i(e("../../fw/defaults/input-defaults")),p=i(e("../ui/core-ui")),f=i(e("./error")),m=i(e("../../abr/fps"));const g={},b=/HD/,v=/UHD/;g.openUrl=function(e,t){t&&t.stopPropagation(),p.default.showChrome.call(this),"touchend"!==t.type&&"string"==typeof e&&""!==e&&(this.getPaused()||this.pause(),window.open(e,"_blank"))},g.getHeight=function(e){let t="",a="";"number"==typeof e.width&&e.width>0?e.width>1920?a="UHD":e.width>=1280&&(a="HD"):e.height>1080?a="UHD":e.height>=720&&(a="HD");let i=document.createElement("span");return t+=e.height.toString()+"p ",a&&(t+='<sup class="rmp-sup">'+a+"</sup>"),i.innerHTML=t,i},g.getBandwidth=function(e){const t=Math.round(e/1e3),a=c.default.precisionRound(t/1e3,1);let i=document.createElement("span");return"kbps"===this.bitrateDataDisplayed?i.textContent=t+" kbps":"mbps"===this.bitrateDataDisplayed&&(i.textContent=a+" Mbps"),i},g.updateQualityModuleIcon=function(e){let t=e.innerHTML;v.test(t)?(this.dom.rmpQualityHD.textContent="UHD",this.dom.rmpQualityHD.style.display="inline"):b.test(t)?(this.dom.rmpQualityHD.textContent="HD",this.dom.rmpQualityHD.style.display="inline"):(this.dom.rmpQualityHD.textContent="",this.dom.rmpQualityHD.style.display="none")};const y=function(e,t){let a=e;(0,d.default)(e)&&("string"==typeof e[this.initialBitrate]?a=e[this.initialBitrate]:"string"==typeof e[0]&&(this.initialBitrate=0,a=e[this.initialBitrate])),this.src=t,this.startingBitratePath=a,this.castUrl=a};g.checkStreams=function(e,t,a){if(!(0,d.default)(t)||t.length<1)e();else{let i=t;i.unshift(this.src);const s=[];(0,l.default)(i).call(i,e=>{c.default.srcExists(e[a],a)&&s.push(e)});let r=0;(function t(){const i=s[r],n=i[a];y.call(this,n,i),c.default.ajax(this.startingBitratePath,this.ajaxTimeout,this.ajaxWithCredentials,"HEAD").then(()=>{e()}).catch(()=>{r===s.length-1?e():(r++,f.default.warning.call(this,"URI "+this.startingBitratePath+" is unavailable - trying next",1007,null),t.call(this))})}).call(this)}},g.filterInput=function(e){const t={};for(let i in h.default){var a;if(Object.prototype.hasOwnProperty.call(h.default,i))if(void 0!==e[i]?"shakaCustomRequestFilter"===i||"playlistCallback"===i||"relatedCallback"===i?"function"==typeof e[i]?t[i]=e[i]:t[i]=null:typeof e[i]!=typeof h.default[i]?t[i]=h.default[i]:t[i]=e[i]:t[i]=h.default[i],"string"==typeof t[i])t[i]=(0,o.default)(a=t[i]).call(a)}for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(this[i]=t[i])},g.detectSrc=function(){c.default.srcExists(this.src.mp4,"mp4")&&(this.hasMp4=!0,this.isVod||(this.hasMp4=!1)),c.default.srcExists(this.src.mp4Hevc,"mp4Hevc")&&(this.hasMp4Hevc=!0,this.isVod||(this.hasMp4Hevc=!1)),c.default.srcExists(this.src.webm,"webm")&&(this.hasWebM=!0,this.isVod||(this.hasWebM=!1)),c.default.srcExists(this.src.hls,"hls")&&(this.hasHls=!0),c.default.srcExists(this.src.hlsHevc,"hlsHevc")&&(this.hasHlsHevc=!0),c.default.srcExists(this.src.dash,"dash")&&(this.hasDash=!0),c.default.isEmptyObject(this.shakaDrm)||(this.hasDash&&(this.dashFirst=!0,(this.hasHls||this.hasHlsHevc)&&(this.hlsEngine="hlsjs")),(u.default.isMacosSafari[0]||u.default.isIpadOS)&&(this.okDash=!1,this.hlsEngine="hlsjs")),c.default.srcExists(this.src.fps,"fps")&&(!c.default.isEmptyObject(this.fpsDrm)&&m.default.filterDrm.call(this)?(this.hasFps=!0,this.airplay=!1):f.default.warning.call(this,"FPS URI provided but invalid FPS DRM data were found",6002,null))},g.detectAudioSrc=function(){c.default.srcExists(this.src.m4a,"m4a")&&(this.hasM4a=!0,this.isVod||(this.hasM4a=!1)),c.default.srcExists(this.src.mp3,"mp3")&&(this.hasMp3=!0,this.isVod||(this.hasMp3=!1)),c.default.srcExists(this.src.ogg,"ogg")&&(this.hasOgg=!0,this.isVod||(this.hasOgg=!1)),c.default.srcExists(this.src.hls,"hls")&&(this.hasHls=!0),c.default.srcExists(this.src.fps,"fps")&&(this.hasFps=!0,this.airplay=!1),c.default.srcExists(this.src.dash,"dash")&&(this.hasDash=!0)},g.clearAdAutoplayEvents=function(){this.dom.container.removeEventListener("adstarted",this.onAdAutoplaySuccess),this.dom.container.removeEventListener("adinitialplayrequestsucceeded",this.onAdAutoplaySuccess),this.dom.container.removeEventListener("adinitialplayrequestfailed",this.onAdAutoplayFailed)},g.fireAutoplayFailure=function(){this.autoplay=!1,c.default.createStdEvent("autoplayfailure",this.dom.container)},g.autoplayFailureRestorePlayUI=function(){this.initialAutoplayRequest=!1,this.ads&&g.clearAdAutoplayEvents.call(this),c.default.show(this.dom.poster),p.default.restorePlayUI.call(this),g.fireAutoplayFailure.call(this)},g.fireAutoplaySuccess=function(){if(this.initialAutoplayRequest=!1,this.ads&&g.clearAdAutoplayEvents.call(this),u.default.localStorage(this.allowLocalStorage)&&this.autoplayCount!==1/0)try{let e=JSON.parse(window.localStorage.getItem("rmpAutoplayCount")),t=0;t=null===e||"number"!=typeof e.value?this.autoplayCount-1:e.value-1,t<0&&(t=0),window.localStorage.setItem("rmpAutoplayCount",(0,n.default)({value:t}))}catch(e){c.default.trace(e)}c.default.createStdEvent("autoplaysuccess",this.dom.container)};const k=function(){this.googleCastInit=!1,this.pause()};g.playPromise=function(){let e=!1;this.autoplay&&this.initialAutoplayRequest&&(e=!0,this.initialAutoplayRequest=!1);const t=this.dom.video.play();void 0!==t?t.then(()=>{e&&g.fireAutoplaySuccess.call(this),this.googleCastInit&&k.call(this)}).catch(t=>{e?g.autoplayFailureRestorePlayUI.call(this):p.default.restorePlayUI.call(this),this.googleCastInit&&k.call(this)}):e&&(g.fireAutoplaySuccess.call(this),this.googleCastInit&&k.call(this))},g.filterRetryParameters=function(){if(c.default.isEmptyObject(this.retryParameters))this.retryParameters=h.default.retryParameters;else{let e=(0,r.default)(h.default.retryParameters);for(let t=0,a=e.length;t<a;t++){let a=e[t];if(void 0===this.retryParameters[a])this.retryParameters[a]=h.default.retryParameters[a];else{let e=(0,r.default)(h.default.retryParameters[a]);for(let t=0,i=e.length;t<i;t++){let i=e[t];("number"!=typeof this.retryParameters[a][i]||this.retryParameters[a][i]<0)&&(this.retryParameters[a][i]=h.default.retryParameters[a][i])}}}}},g.filterHideModule=function(){if(c.default.isEmptyObject(this.hideModule))this.hideModule=h.default.hideModule;else{let e=(0,r.default)(h.default.hideModule);for(let t=0,a=e.length;t<a;t++){let a=e[t];"boolean"!=typeof this.hideModule[a]&&(this.hideModule[a]=h.default.hideModule[a])}}},g.playOrPause=function(){let e;e=this.getAdOnStage()&&this.getAdLinear()?this.getAdPaused():this.getPaused(),e?this.play():this.pause()};var w=g;a.default=w},{"../../abr/fps":4,"../../fw/defaults/input-defaults":67,"../../fw/env":69,"../../fw/fw":70,"../ui/core-ui":52,"./error":56,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/instance/for-each":85,"@babel/runtime-corejs3/core-js-stable/instance/trim":93,"@babel/runtime-corejs3/core-js-stable/json/stringify":94,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/object/keys":99,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.regexp.to-string":435}],60:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),r=i(e("@babel/runtime-corejs3/core-js-stable/instance/for-each")),n=i(e("../../fw/fw"));const o={destroy:function(){if(this.viewableAutoplay&&this.viewableObserver){0;try{this.viewableObserver.disconnect()}catch(e){n.default.trace(e)}}}},l=function(e){(0,r.default)(e).call(e,e=>{const t=this.getPlayerInitialized();e.intersectionRatio>this.viewablePreviousRatio?(this.viewableAutoplay&&this.play(),this.viewablePlayPause||t||o.destroy.call(this),this.playerVisible=!0,n.default.createStdEvent("playerinview",this.dom.container)):(this.viewablePlayPause&&t&&this.pause(),this.playerVisible=!1,n.default.createStdEvent("playeroutofview",this.dom.container)),this.viewablePreviousRatio=e.intersectionRatio})},d=function(){this.dom.container.removeEventListener("ready",this.attachViewableObserver);const e={root:null,rootMargin:"0px",threshold:[this.viewableThreshold]};this.viewablePreviousRatio=this.viewableThreshold,this.viewableObserver=new IntersectionObserver((0,s.default)(l).call(l,this),e),this.viewableObserver.observe(this.dom.container)};o.set=function(){this.attachViewableObserver=(0,s.default)(d).call(d,this),this.dom.container.addEventListener("ready",this.attachViewableObserver)};var c=o;a.default=c},{"../../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/for-each":85,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],61:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),r=i(e("../../fw/fw")),n=i(e("../../fw/env")),o=i(e("../ui/core-ui")),l=i(e("./helpers")),d=i(e("../accessible/accessible"));const c={},u=function(e){e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault()),o.default.showChrome.call(this),this.getMute()?this.setMute(!1):this.setMute(!0)},h=function(e){e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault()),o.default.showChrome.call(this);let t=this.getVolume();t<=1&&t>=0&&(t+=.1,t>=1&&(t=1),this.setVolume(t))},p=function(e){e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault()),o.default.showChrome.call(this);let t=this.getVolume();t<=1&&t>=0&&(t-=.1,t<=0&&(t=0),this.setVolume(t))},f=function(){let e=0;this.getMute()||(e=this.getVolume()),e>=0&&e<=1&&this.rememberVolume&&n.default.localStorage(this.allowLocalStorage)&&l.default.writeToLocalStorage(e),r.default.createStdEvent("volumechange",this.dom.container)};c.init=function(){this.dom.audioOnlyVolumeIcon=r.default.createElement("button","rmp-button rmp-audio-only-volume-icon rmp-i rmp-i-volume"),this.dom.controlBar.appendChild(this.dom.audioOnlyVolumeIcon),d.default.make.call(this,this.dom.audioOnlyVolumeIcon,this.labels.hint.volume,!0),r.default.addEvent(["touchend","click"],this.dom.audioOnlyVolumeIcon,(0,s.default)(u).call(u,this));const e=r.default.createElement("button","rmp-button rmp-i rmp-i-minus");this.dom.controlBar.appendChild(e),d.default.make.call(this,e,this.labels.hint.minus,!0),r.default.addEvent(["click","touchend"],e,(0,s.default)(p).call(p,this));const t=r.default.createElement("button","rmp-button rmp-i rmp-i-plus");this.dom.controlBar.appendChild(t),d.default.make.call(this,t,this.labels.hint.plus,!0),r.default.addEvent(["click","touchend"],t,(0,s.default)(h).call(h,this)),this.onVolumeChange=(0,s.default)(f).call(f,this),this.dom.video.addEventListener("volumechange",this.onVolumeChange)};var m=c;a.default=m},{"../../fw/env":69,"../../fw/fw":70,"../accessible/accessible":31,"../ui/core-ui":52,"./helpers":63,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],62:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.regexp.to-string"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/set-timeout")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),o=i(e("../../fw/fw")),l=i(e("../../fw/env")),d=i(e("./helpers")),c=i(e("../accessible/accessible"));const u={},h=function(e){const t=Math.round(100*e)+"%",a=100*e+"%";o.default.setStyle(this.dom.desktopVolumeBar,{height:a}),o.default.setText(this.dom.volumeIndicator,t)},p=function(){const e=this.getVolume();this.dom.desktopVolumeContainer.setAttribute("aria-valuenow",o.default.precisionRound(100*e,2)),this.dom.desktopVolumeContainer.setAttribute("aria-valuetext",o.default.precisionRound(100*e,2).toString()+"%")},f=function(){let e=0;this.getMute()?(o.default.updateAriaLabel(this.dom.desktopVolumeIcon,this.labels.hint.unmute),o.default.removeClass(this.dom.desktopVolumeIcon,"rmp-i-volume"),o.default.addClass(this.dom.desktopVolumeIcon,"rmp-i-off-volume")):(o.default.updateAriaLabel(this.dom.desktopVolumeIcon,this.labels.hint.mute),o.default.removeClass(this.dom.desktopVolumeIcon,"rmp-i-off-volume"),o.default.addClass(this.dom.desktopVolumeIcon,"rmp-i-volume"),e=this.getVolume()),e>=0&&e<=1&&(this.rememberVolume&&l.default.localStorage(this.allowLocalStorage)&&d.default.writeToLocalStorage(e),h.call(this,e)),this.dom.desktopVolumeContainer.setAttribute("aria-valuenow",o.default.precisionRound(100*e,2)),this.dom.desktopVolumeContainer.setAttribute("aria-valuetext",o.default.precisionRound(100*e,2).toString()+"%"),o.default.createStdEvent("volumechange",this.dom.container)},m=function(e){if(e){o.default.removeClass(this.dom.desktopVolumeBar,"grabbing"),e.stopPropagation(),this.draggingVolumeCursor=!1,document.removeEventListener("mouseup",this.volumeMouseup),document.removeEventListener("mousemove",this.volumeMousemove);const t=o.default.getPosY(e),a=o.default.getHeight(this.dom.desktopVolumeBarContainer),i=o.default.getAbsTop(this.dom.desktopVolumeBarContainer);let s;s=t>=i+a?0:t<=i?1:1-Math.abs(t-i)/a,this.setVolume(s)}},g=function(e){const t=o.default.getPosY(e),a=o.default.getHeight(this.dom.desktopVolumeBarContainer),i=o.default.getAbsTop(this.dom.desktopVolumeBarContainer),s=1-Math.abs(t-i)/a;!o.default.isNumber(s)||s<0||s>1||h.call(this,s)},b=function(){var e;this.dom.desktopVolumeIcon=o.default.createElement("button","rmp-button rmp-desktop-volume-icon rmp-i rmp-i-volume"),this.dom.controlBar.appendChild(this.dom.desktopVolumeIcon);let t=this.labels.hint.mute;if(this.getMute()&&(t=this.labels.hint.unmute),c.default.make.call(this,this.dom.desktopVolumeIcon,t,!0),o.default.addEvent(["touchend","click"],this.dom.desktopVolumeIcon,(0,n.default)(e=d.default.handleIosDesktop).call(e,this)),this.dom.desktopVolumeContainer=o.default.createElement("div","rmp-desktop-volume-container rmp-color-bg"),this.delayToFadeoutVolumeUI>0){const e=".rmp-desktop-volume-container {-webkit-transition-delay:"+this.delayToFadeoutVolumeUI+"ms;-moz-transition-delay:"+this.delayToFadeoutVolumeUI+"ms;transition-delay:"+this.delayToFadeoutVolumeUI+"ms;}";o.default.appendStyle(e)}c.default.make.call(this,this.dom.desktopVolumeContainer,this.labels.hint.volume,!1),this.dom.desktopVolumeBarContainer=o.default.createElement("div","rmp-desktop-volume-bar-container"),o.default.addEvent(["touchend","click"],this.dom.desktopVolumeContainer,o.default.stopPropagation),this.dom.desktopVolumeContainer.appendChild(this.dom.desktopVolumeBarContainer),this.dom.desktopVolumeBar=o.default.createElement("div","rmp-desktop-volume-bar"),this.dom.volumeHandle=o.default.createElement("div","rmp-desktop-volume-handle rmp-color-bg-button"),this.dom.desktopVolumeBar.appendChild(this.dom.volumeHandle),this.dom.desktopVolumeBarContainer.appendChild(this.dom.desktopVolumeBar),this.dom.desktopVolumeIcon.appendChild(this.dom.desktopVolumeContainer),this.dom.volumeIndicator=o.default.createElement("div","rmp-desktop-volume-indicator rmp-color-bg"),this.dom.desktopVolumeContainer.appendChild(this.dom.volumeIndicator);let a=this.initialVolume;"number"==typeof this.dom.video.volume&&this.dom.video.volume>=0&&(a=this.dom.video.volume),h.call(this,a);const i=o.default.createElement("div","rmp-desktop-volume-hint rmp-color-bg",this.labels.hint.volume,this.rtl);this.dom.desktopVolumeContainer.appendChild(i),(0,r.default)(()=>{const e=o.default.getWidth(i);i.style.marginLeft="-"+(e-40)/2+"px"},0),this.volumeMouseup=(0,n.default)(m).call(m,this),this.volumeMousemove=(0,n.default)(g).call(g,this),this.dom.desktopVolumeContainer.addEventListener("mousedown",e=>{e&&e.stopPropagation(),o.default.addClass(this.dom.desktopVolumeBar,"grabbing"),this.draggingVolumeCursor=!0,document.addEventListener("mouseup",this.volumeMouseup),document.addEventListener("mousemove",this.volumeMousemove)})};u.init=function(){b.call(this),this.onVolumeChange=(0,n.default)(f).call(f,this),this.onAdVolumeChanged=(0,n.default)(p).call(p,this),this.dom.video.addEventListener("volumechange",this.onVolumeChange),this.ads&&this.dom.container.addEventListener("advolumechanged",this.onAdVolumeChanged)};var v=u;a.default=v},{"../../fw/env":69,"../../fw/fw":70,"../accessible/accessible":31,"./helpers":63,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/set-timeout":104,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.regexp.to-string":435}],63:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.regexp.to-string"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/json/stringify")),n=i(e("../../fw/fw"));const o={writeToLocalStorage:function(e){let t=e;t=n.default.precisionRound(t,2);const a={value:t.toString()};try{window.localStorage.setItem("rmpVolume",(0,r.default)(a))}catch(i){n.default.trace(i)}},setAd:function(e){let t;t=e<0?0:e>1?1:e,"ima"===this.adParser&&this.adsManager&&"function"==typeof this.adsManager.setVolume?this.adsManager.setVolume(t):"rmp-vast"===this.adParser&&this.rmpVast&&"function"==typeof this.rmpVast.setVolume&&this.rmpVast.setVolume(t)},setMuteAd:function(e){if(e)"ima"===this.adParser?o.setAd.call(this,0):"rmp-vast"===this.adParser&&this.rmpVast&&"function"==typeof this.rmpVast.setMute&&this.rmpVast.setMute(!0);else{let e=this.getVolume();if(e<0||e>1)return;"ima"===this.adParser?(0===e&&(e=this.volumeBeforeMute),o.setAd.call(this,e)):"rmp-vast"===this.adParser&&this.rmpVast&&"function"==typeof this.rmpVast.setMute&&(this.rmpVast.setMute(!1),0===e&&(e=this.volumeBeforeMute,o.setAd.call(this,e)))}},handleIosDesktop:function(e){e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault());this.getMute()?this.setMute(!1):this.setMute(!0)}};var l=o;a.default=l},{"../../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/json/stringify":94,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.regexp.to-string":435}],64:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),r=i(e("../../fw/fw")),n=i(e("../../fw/env")),o=i(e("../modules/modules")),l=i(e("../volume/helpers"));const d={},c=function(){let e=0;this.getMute()?(r.default.updateAriaLabel(this.dom.volume,this.labels.hint.unmute),r.default.addClass(this.dom.volume,"rmp-volume-off-mute")):(r.default.updateAriaLabel(this.dom.volume,this.labels.hint.mute),r.default.removeClass(this.dom.volume,"rmp-volume-off-mute"),e=this.getVolume()),e>=0&&e<=1&&this.rememberVolume&&n.default.localStorage(this.allowLocalStorage)&&l.default.writeToLocalStorage(e),r.default.createStdEvent("volumechange",this.dom.container)};d.init=function(){var e;o.default.append.call(this,"volume"),r.default.updateAriaLabel(this.dom.volume,this.labels.hint.mute),r.default.addEvent(["touchend","click"],this.dom.volume,(0,s.default)(e=l.default.handleIosDesktop).call(e,this)),this.onVolumeChange=(0,s.default)(c).call(c,this),this.dom.video.addEventListener("volumechange",this.onVolumeChange)};var u=d;a.default=u},{"../../fw/env":69,"../../fw/fw":70,"../modules/modules":39,"../volume/helpers":63,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],65:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.array-buffer.slice"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/url")),n=i(e("@babel/runtime-corejs3/core-js-stable/set-timeout")),o=i(e("@babel/runtime-corejs3/core-js-stable/promise")),l=i(e("@babel/runtime-corejs3/core-js-stable/object/assign")),d=i(e("./fw")),c=i(e("./env"));const u={};function h(e){return(0,l.default)({muted:!1,timeout:250,inline:!1},e)}function p({muted:e,timeout:t,inline:a},i){let s,r,l,{element:d,source:c}=i();return d.muted=e,!0===e&&d.setAttribute("muted","muted"),!0===a&&d.setAttribute("playsinline","playsinline"),d.src=c,new o.default(e=>{s=d.play(),r=(0,n.default)(()=>{l(!1,new Error("Timeout "+t+" ms has been reached"))},t),l=(t,a=null)=>{clearTimeout(r),e({result:t,error:a})},void 0!==s?s.then(()=>l(!0)).catch(e=>l(!1,e)):l(!0)})}u.video=function(e){let t="";try{t=r.default.createObjectURL(new Blob([new Uint8Array([0,0,0,28,102,116,121,112,105,115,111,109,0,0,2,0,105,115,111,109,105,115,111,50,109,112,52,49,0,0,0,8,102,114,101,101,0,0,2,239,109,100,97,116,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0,0,2,194,109,111,111,118,0,0,0,108,109,118,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,47,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,1,236,116,114,97,107,0,0,0,92,116,107,104,100,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,101,100,116,115,0,0,0,28,101,108,115,116,0,0,0,0,0,0,0,1,0,0,0,47,0,0,0,0,0,1,0,0,0,0,1,100,109,100,105,97,0,0,0,32,109,100,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,172,68,0,0,8,0,85,196,0,0,0,0,0,45,104,100,108,114,0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0,0,0,1,15,109,105,110,102,0,0,0,16,115,109,104,100,0,0,0,0,0,0,0,0,0,0,0,36,100,105,110,102,0,0,0,28,100,114,101,102,0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1,0,0,0,211,115,116,98,108,0,0,0,103,115,116,115,100,0,0,0,0,0,0,0,1,0,0,0,87,109,112,52,97,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,172,68,0,0,0,0,0,51,101,115,100,115,0,0,0,0,3,128,128,128,34,0,2,0,4,128,128,128,20,64,21,0,0,0,0,1,244,0,0,1,243,249,5,128,128,128,2,18,16,6,128,128,128,1,2,0,0,0,24,115,116,116,115,0,0,0,0,0,0,0,1,0,0,0,2,0,0,4,0,0,0,0,28,115,116,115,99,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,28,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,115,0,0,1,116,0,0,0,20,115,116,99,111,0,0,0,0,0,0,0,1,0,0,0,44,0,0,0,98,117,100,116,97,0,0,0,90,109,101,116,97,0,0,0,0,0,0,0,33,104,100,108,114,0,0,0,0,0,0,0,0,109,100,105,114,97,112,112,108,0,0,0,0,0,0,0,0,0,0,0,0,45,105,108,115,116,0,0,0,37,169,116,111,111,0,0,0,29,100,97,116,97,0,0,0,1,0,0,0,0,76,97,118,102,53,54,46,52,48,46,49,48,49])],{type:"video/mp4"}))}catch(a){d.default.trace(a)}return p(e=h(e),()=>({element:document.createElement("video"),source:t}))},u.audio=function(e){let t="";try{t=r.default.createObjectURL(new Blob([new Uint8Array([255,227,24,196,0,0,0,3,72,1,64,0,0,4,132,16,31,227,192,225,76,255,67,12,255,221,27,255,228,97,73,63,255,195,131,69,192,232,223,255,255,207,102,239,255,255,255,101,158,206,70,20,59,255,254,95,70,149,66,4,16,128,0,2,2,32,240,138,255,36,106,183,255,227,24,196,59,11,34,62,80,49,135,40,0,253,29,191,209,200,141,71,7,255,252,152,74,15,130,33,185,6,63,255,252,195,70,203,86,53,15,255,255,247,103,76,121,64,32,47,255,34,227,194,209,138,76,65,77,69,51,46,57,55,170,170,170,170,170,170,170,170,170,170,255,227,24,196,73,13,153,210,100,81,135,56,0,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170])],{type:"audio/mpeg"}))}catch(a){d.default.trace(a)}return p(e=h(e),()=>({element:document.createElement("audio"),source:t}))},u.detect=function(e,t,a){return c.default.isSamsungSmartTV?new o.default(e=>{e("autoplay-with-sound")}):a?new o.default(a=>{u[e]({inline:!0,muted:!0,timeout:t}).then(({result:e,error:t})=>{a(!1===e?"no-autoplay":"muted-autoplay")})}):new o.default(a=>{u[e]({inline:!0,timeout:t}).then(({result:i,error:s})=>{!1===i?u[e]({inline:!0,muted:!0,timeout:t}).then(({result:e,error:t})=>{a(!1===e?"no-autoplay":"muted-autoplay")}):a("autoplay-with-sound")})})};var f=u;a.default=f},{"./env":69,"./fw":70,"@babel/runtime-corejs3/core-js-stable/object/assign":97,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/promise":102,"@babel/runtime-corejs3/core-js-stable/set-timeout":104,"@babel/runtime-corejs3/core-js-stable/url":105,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.array-buffer.slice":431,"core-js/modules/es.typed-array.to-locale-string":441,"core-js/modules/es.typed-array.uint8-array":443,"core-js/modules/web.dom-collections.iterator":444,"core-js/modules/web.url":446}],66:[function(e,t,a){"use strict";e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;const i=function(){return null},s="string"==typeof window.rmpGetRagnarok?window.rmpGetRagnarok:window.location&&window.location.hostname?window.location.hostname.toLowerCase():null,r={set:function(){this.playerVersion="5.10.2",this.inputSettings={},this.playerReady=!1,this.hasLoadedMetadata=!1,this.timeReady=0,this.isInFullscreen=!1,this.isVod=!0,this.isHTML5=!0,this.setSrcPDModule=!1,this.startingBitratePath="",this.firstPlay=!0,this.draggingTimeCursor=!1,this.volumeModuleUI=!1,this.draggingVolumeCursor=!1,this.touchDown=!1,this.mouseupDoc=i,this.mousemoveDoc=i,this.volumeMouseup=i,this.volumeMousemove=i,this.volumeBeforeMute=1,this.throttledResize=i,this.firstFrameReached=!1,this.msePreloadRequested=!1,this.msePreloadCompleted=!1,this.abrAutoMode=!0,this.currentTimeBeforeSeek=-1,this.elementsFocus=[],this.onStartSeekToOffset=i,this.onStartSetQuality=i,this.firstHint=!0,this.validatedLanguage="english",this.attachVolumechange=i,this.loopEventFired=!1,this.autoplayMode="unresolved",this.isLive=!1,this.detectLive=!0,this.tvPlayerSkin=!1,this.rtl=!1,this.frameRate=-1,this.poster="",this.endOfVideoPoster="",this.changingSrc=!1,this.afterMp4BitrateSwitch=i,this.afterSrcSwitch=null,this.initialAspectRatio=1.7777777778,this.initialWidth=-1,this.initialHeight=-1,this.hasNativeFullscreenSupport=!1,this.throttledResizeTimeout=null,this.onPosterLoad=i,this.onPosterError=i,this.logoAppended=!1,this.onLogoLoad=i,this.onLogoError=i,this.openLogoUrl=i,this.windowOnline=i,this.windowOffline=i,this.offlineStoreOperation=null,this.readingMp4=!1,this.readingMp4Hevc=!1,this.readingWebM=!1,this.readingM4a=!1,this.readingMp3=!1,this.readingOgg=!1,this.readingDash=!1,this.readingHlsJS=!1,this.readingHlsShaka=!1,this.readingShaka=!1,this.readingHls=!1,this.readingHlsHevc=!1,this.readingPDorNative=!0,this.readingOutstream=!1,this.readingMse=!1,this.hasMp4=!1,this.hasMp4Hevc=!1,this.hasWebM=!1,this.hasM4a=!1,this.hasMp3=!1,this.hasOgg=!1,this.hasHls=!1,this.hasHlsHevc=!1,this.hasFps=!1,this.hasDash=!1,this.okDash=!1,this.okHlsJS=!1,this.okFps=!1,this.okHls=!1,this.okWebM=!1,this.okMp4=!1,this.okMp4Hevc=!1,this.okM4a=!1,this.okMp3=!1,this.okOgg=!1,this.viewablePreviousRatio=.5,this.viewableObserver=null,this.attachViewableObserver=i,this.playerVisible=!1,this.processInitiatePlayback=null,this.initiatePlayback=i,this.bindKeyboard=i,this.showChrome=i,this.containerTouch=i,this.containerClick=i,this.containerDBClick=i,this.removeFocusToContainer=i,this.addTabKeyDetection=i,this.controls=!0,this.fullscreenchange=i,this.fullscreenerror=i,this.manageFSOnOrientationChange=i,this.onPlayingAddFSOnOrientationChange=i,this.alignControlBarHint=i,this.unstalledBuffer=i,this.licenseFailedDestroyRequested=!1,this.destroyRunning=!1,this.onStartSeekToOffset=i,this.forceResetTimer=!1,this.chromeTimer=null,this.touchRmp=!1,this.cssLink=null,this.cssLinkTimeout=null,this.initConfig=i,this.cssLoaded=!1,this.onLoadedCSS=i,this.durationchangeFn=i,this.loadedmetadataFn=i,this.waitingFn=i,this.pauseFn=i,this.playFn=i,this.timeupdateFn=i,this.webkitbeginfullscreenFn=i,this.webkitendfullscreenFn=i,this.onVolumeChange=i,this.onMobileStartAutoHideCentralUI=i,this.onLoadedmetadataPiP=i,this.onLoadedmetadataPiPSafari=i,this.onWaitingHideLoadingSpin=i,this.setSrcResetAdInterval=null,this.logRetryTimeout=null,this.logGaSeekingTimeout=null,this.prerollMaskRemovalTimeout=null,this.orientationChangeResizeTimeout=null,this.siteCheckerRetryTimeout=null,this.postStop=null,this.firstDurationChange=!0,this.startUpPlay=0,this.startUpPlaying=0,this.ended=i,this.generateError=i,this.errorData=null,this.onPlayingCurrentLevelResetTried=i,this.onPlayingSetMetadata=i,this.adDisplayContainer=null,this.adOnStage=!1,this.adsManager=null,this.adsLoader=null,this.contentCompleteCalled=!1,this.isLinear=!1,this.adPaused=!1,this.adDCInitialized=!1,this.adID="",this.adSystem="",this.adAdvertiserName="",this.adApiFramework="",this.adContentType="",this.adCreativeAdId="",this.adCreativeId="",this.adDealId="",this.adDescription="",this.adDuration=-1,this.adNonLinearHeight=-1,this.adMediaUrl="",this.adMinSuggestedDuration=-2,this.adSkipTimeOffset=-1,this.adSurveyUrl="",this.adTitle="",this.adTraffickingParameters=null,this.adTraffickingParametersString="",this.adUIElements=[],this.adUniversalAdIdRegistry="unknown",this.adUniversalAdIds=[],this.adUniversalAdIdValue="unknown",this.adVastMediaBitrate=0,this.adVastMediaHeight=0,this.adVastMediaWidth=0,this.adNonLinearWidth=-1,this.adWrapperAdIds=[],this.adWrapperAdSystems=[],this.adWrapperCreativeIds=[],this.hasAdUI=!1,this.playerInitialized=!1,this.emptyInitAdTagUrl=!1,this.adScheduleInput=!1,this.scheduledMidRolls=!1,this.currentAdForCompanion=null,this.adPodInfo=null,this.adErrorCode=-1,this.adErrorMessage="",this.adErrorType="",this.adVastErrorCode=-1,this.originalAdTagUrl=null,this.originalAdTagWaterfall=[],this.isVPAID=!1,this.adCountdownInterval=null,this.onEndedWaitForPlay=i,this.onRePlayLoadAdTag=i,this.onAdLoadedAfterReload=i,this.adRemainingTimeBarInterval=null,this.firstPreroll=!0,this.currentiOSSrc="",this.onAdBlockDetected=null,this.onNoAdBlockDetected=null,this.imaLoadTimeout=null,this.imaLoadCancel=!1,this.adSkipInterval=null,this.onAdDestroyLoadAds=i,this.onAdStartedPostRollUpdateCentralUI=i,this.onAdOnStageUpdatePrerollMask=i,this.setSrcAdReset=!1,this.setSrcResetIMA=i,this.runAdsManagerInterval=null,this.adOutStreamSkin=!1,this.postImaAdDestroy=null,this.adVmapInput=!1,this.adDisableCustomPlaybackForIOS10Plus=!1,this.imaDaiStreamManager=null,this.imaDaiLive=!1,this.imaDaiVod=!1,this.imaDaiAdCurrentTime=-1,this.imaDaiIsSkippable=!1,this.rmpVast=null,this.onRmpVastAdStarted=i,this.onRmpVastAdDestroyed=i,this.onRmpVastAdError=i,this.onRmpVastAdInteraction=i,this.onRmpVastAdLinearChanged=i,this.onRmpVastAdPlayPause=i,this.adErrorDetected=!1,this.onAdTagStartLoading=i,this.setSrcResetRmpVast=i,this.initialAutoplayRequest=!1,this.onAdAutoplayFailed=i,this.onAdAutoplaySuccess=i,this.loadRmpVast=i,this.liveAdSchedulerChecker=null,this.liveAdSchedulerCheckerIndex=0,this.adSchedulerChecker=i,this.adSchedulerEnded=i,this.playScheduler=i,this.pauseScheduler=i,this.adParserLoaded=!1,this.adParserLoadError=!1,this.analyticsSecondsPlayed=0,this.startUpTime=-1,this.startUpLogPlaying=i,this.appendFormDataAndSendLog=i,this.logGaReady=i,this.logGaPlayerStart=i,this.logGaSrcChanged=i,this.logGaError=i,this.logGaAdImpression=i,this.logGaAdLoaderError=i,this.logGaAdError=i,this.logGaFullscreen=i,this.logGaEnded=i,this.logGaSeeking=i,this.logGaAdClick=i,this.gaContext=!1,this.analyticsInterval=null,this.analyticsPlay=i,this.analyticsPause=i,this.gaCommand="send",this.gaSeekingSending=!1,this.runLogs=i,this.runLogsOnSrcChanged=i,this.licUrl="",this.isLicValid="false",this.shakaPlayer=null,this.shakaVideoRenditions=[],this.shakaTextTracks=[],this.shakaError=i,this.shakaAdaptationChanged=i,this.shakaTracksChanged=i,this.shakaFramerateCheck=i,this.shakaCurrentLevel=null,this.configureShakaCapLevelToPlayerSize=i,this.shakaOnPlayingResetRetriesCount=i,this.shakaDurationChange=i,this.shakaOfflineList=null,this.shakaOfflineDownloadProgress=-1,this.hlsJS=null,this.hlsFragmentData=null,this.hlsFragmentBeingPlayed=null,this.hlsLevelData=null,this.hlsManifestData={},this.hlsSessionData=[],this.hlsJSLevelDuration=-1,this.hlsOnPauseStopLoad=i,this.hlsOnPlayStartLoad=i,this.hlsOnFirstPlaying=i,this.hlsManifestParsed=i,this.shakaManifestParsed=i,this.hlsJSAttachMultiAudio=i,this.hlsJSOnLiveRetriesSuccess=i,this.initHLSJS=i,this.hlsJSAbrInterval=null,this.hlsJSErrorRetryTimeout=null,this.hlsJSrenderTextTracksNatively=!0,this.hlsJSHandleCCTracks=i,this.hlsJSFilteredAudioTracks=[],this.nativeHlsResizeLevelSwitch=i,this.nativeHlsSetUpAudioTracks=i,this.nativeHlsSetUpCCTracks=i,this.exitFSDestroy=null,this.proceedDestroy=!0,this.adsDestroyed=!1,this.dvrLiveMode=!0,this.dvrCurrentTime=-1,this.pauseDvr=i,this.playingDvr=i,this.castReady=i,this.castInit=i,this.castMedia=null,this.castMediaStatusUpdated=i,this.castMediaEnded=!1,this.remotePlayer=null,this.remotePlayerController=null,this.castSession=null,this.castSessionStopping=!1,this.castConnected=!1,this.castUrl="",this.loadCastMedia=i,this.remotePlayerState="",this.googleCastCCForegroundColor="FFFFFF99",this.googleCastCCBackgroundColor="00000050",this.googleCastCCFontScale=1,this.googleCastCCFontFamily="arial",this.googleCastTextTrackEdgeType="NONE",this.googleCastCCWindowColor="00000000",this.pauseRequestedByLoadCastMedia=!1,this.googleCastInit=!1,this.onAirPlayClick=i,this.onAirPlayAvailabilityChanged=i,this.onAirPlayCurrentPlaybackTargetIsWirelessChanged=i,this.onLoadedmetadataShowAirPlay=i,this.onMediaLoadedForcePlayOnLocalPlayer=i,this.airplayUIOn=!1,this.airplayConnectTimeout=null,this.defaultTrack=0,this.textTracks=[],this.textTracksCues=[],this.hasExternalCCFiles=!1,this.updateCuesResize=i,this.ccData=null,this.ccCues=[],this.ccEnabled=!1,this.loadedCCFiles=[],this.ccFilesReady=!1,this.hlsTextTracksCheckingInterval=null,this.startIndexCC=0,this.loadVTTFiles=i,this.resizeNativeCues=i,this.textTracksList=[],this.onAddTrack=i,this.textTracksLangList=[],this.readingCaptionsFromNativeHls=!1,this.fccFontColor="white",this.fccFontOpacity=1,this.fccFontSize=1,this.fccFontFamily="arial",this.fccFontEdge="none",this.fccBackgroundColor="black",this.fccBackgroundOpacity=.5,this.fccWindowColor="black",this.fccWindowOpacity=0,this.lat=0,this.lon=0,this.mouseDown=!1,this.dragStart={},this.progressiveInterval=null,this.progressiveMoveInprogress=!1,this.animate360=i,this.onReadyMain360=i,this.onPlayingUpdate360UI=i,this.requestAnimation360=null,this.texture360=null,this.renderer360=null,this.camera360=null,this.scene360=null,this.mesh360=null,this.canvas360=null,this.onXRClick=null,this.canvasVR=null,this.onSessionStarted=i,this.onSessionEnded=i,this.cameraVR=null,this.sceneVR=null,this.rendererVR=null,this.currentXRSession=null,this.textureVR=null,this.vrNeedsUpdateInterval=null,this.vrModeOn=!1,this.onLoadedmetadataShowVR=i,this.onReadyMainVR=i,this.updateVRFramerate=i,this.streamrootWrapper=null,this.hasStreamroot=!1,this.thumbnailsArray=[],this.thumbnailURIs=[],this.thumbnailURIsTimestamps=[],this.currentThumbnailURI="",this.hasThumbnails=!1,this.dummyThumbnailsImg=null,this.onThumbnailsLoad=i,this.onThumbnailsError=i,this.chaptersArray=[],this.hasChapters=!1,this.onLoadedmetadaAddChapters=i,this.updateCurrentChapter=i,this.licType="rmp",this.hasRelated=!1,this.relatedList=[],this.currentRelatedIndex=0,this.relatedOnSrcChangedLoadAd=i,this.hasPlaylist=!1,this.playlistList=[],this.currentPlaylistIndex=0,this.playlistOnSrcChangedLoadAd=i,this.hasTranscripts=!1,this.ajaxInternalTimeout=1e4,this.refTime=0,this.ragnarok=s,this.rmpDev="site.rmp",this.originLocal="localhost",this.altLocal="127.0.0.1",this.muxData=!1,this.muxDataHlsJSMonitored=!1,this.onHlsjsErrorEmitMuxError=i,this.meta={},this.meta.data={},this.meta.type=""}};var n=r;a.default=n},{"@babel/runtime-corejs3/core-js-stable/object/define-property":98}],67:[function(e,t,a){"use strict";e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;const i={licenseKey:"",width:640,height:360,iframeMode:!1,iframeAllowed:!0,autoHeightMode:!1,autoHeightModeRatio:1.7777777778,backgroundColor:"000000",skin:"s1",fullWindowSkin:!1,skinBackgroundColor:"",skinButtonColor:"",skinAccentColor:"",hideControls:!1,hideCentralPlayButton:!1,hideCentralBuffering:!1,hideSeekBar:!1,hideFullscreen:!1,hideVolume:!1,hideExternalPlayerLabels:!1,automaticFullscreenOnLandscape:!1,fullscreenFullWindowMode:!1,detectViewerLanguage:!0,doubleClickForFullscreen:!0,autoplay:!1,autoplayCount:1/0,requestAutoplayCapabilitiesData:!1,detectAutoplayTimeout:-1,viewableAutoplay:!1,viewablePlayPause:!1,viewableThreshold:.5,srcChangeAutoplay:!0,posterScaleMode:"letterbox",hideBlackFrameWhenNoPosterForLiveStream:!0,hideInitialBlackFrameWhenNoPoster:!0,scaleMode:"letterbox",loop:!1,muted:!1,permanentMuted:!1,initialVolume:1,forceInitialVolume:!1,rememberVolume:!0,rememberCurrentTime:!1,rememberQuality:!1,bitrateDataDisplayed:"none",disableKeyboardControl:!1,preload:"metadata",delayToFade:2800,delayToFadeoutVolumeUI:400,contentMetadata:{},appName:"",logo:"",logoLoc:"",logoWatermark:!1,logoPosition:"topleft",logoMargin:"8px",sharing:!1,sharingUrl:"",sharingCode:"",sharingNetworks:["facebook","twitter","email"],audioOnly:!1,audioOnlyUseVideoLayout:!1,audioOnlyIcecast:!1,debugLevel:1,debugOverlayEnv:!1,pathToRmpFiles:".",offsetStartPosition:0,quickRewind:0,quickForward:0,fadeInPlayer:!0,uiSeparator:"-",ajaxWithCredentials:!1,ajaxTimeout:1e4,allowLocalStorage:!0,pip:!0,retryParameters:{},dashFirst:!1,shakaStartLevel:-1,shakaCapLevelToPlayerSize:!0,shakaStreamingBufferBehind:30,shakaStreamingBufferingGoal:20,shakaDurationBackoff:1,shakaStreamingIgnoreTextStreamFailures:!0,shakaJumpLargeGaps:!1,shakaStreamingRebufferingGoal:2,shakaSmallGapLimit:.5,shakaStartAtSegmentBoundary:!1,shakaSafeSeekOffset:5,shakaIgnoreMinBufferTime:!1,shakaManifestDefaultPresentationDelay:0,shakaPreferredAudioLanguage:"",shakaPreferredTextLanguage:"",shakaRestrictions:{},shakaDrm:{},shakaRequestConfiguration:{},shakaCustomConfig:{},shakaCustomRequestFilter:null,shakaOffline:!1,shakaOfflinePreferredTrackQuality:-1,shakaAutoDetectPersistentLicenseSupport:!0,shakaUsePersistentLicense:!1,shakaBandwidthDowngradeTarget:.95,shakaBandwidthUpgradeTarget:.75,shakaSwitchInterval:8,hlsJSCapLevelToPlayerSize:!0,hlsJSCapLevelOnFPSDrop:!1,hlsJSMaxBufferLength:30,hlsJSMaxBufferSize:0,hlsJSStartLevel:-1,hlsJSFetchXhrWithCredentials:!1,hlsJSEnableCaptions:!0,hlsJSCaptionsTextTrack1Label:"CC1",hlsJSCaptionsTextTrack2Label:"CC2",hlsJSCaptionsTextTrack3Label:"CC3",hlsJSCaptionsTextTrack4Label:"CC4",hlsJSDefaultAudioCodec:"auto",hlsJSLiveSyncDurationCount:3,hlsJSLiveMaxLatencyDurationCount:1/0,hlsJSLiveSyncDuration:void 0,hlsJSLiveMaxLatencyDuration:void 0,hlsJSMinAutoBitrate:0,hlsJSAppleAppStoreCompliance:!1,hlsJSStopDownloadWhilePaused:!1,hlsJSAbrBandWidthFactor:.95,hlsJSAbrBandWidthUpFactor:.75,hlsJSMaxAudioFramesDrift:1,hlsJSCustomConfig:{},forceNativeHlsOverHlsJS:!1,hlsEngine:"hlsjs",hlsJSUseManifestRenditionName:!1,hlsJSInitialLiveManifestSize:1,hlsJSLiveBackBufferLength:1/0,manualSwitchingMode:"smooth",fpsDrm:{},bitrates:{},backupBitrates:{},src:{},backupSrc:[],initialBitrate:0,labels:{},webmCodecs:{video:"vp8",audio:"vorbis"},oggCodec:"vorbis",webmFirst:!1,liveRetries:1/0,isLiveDvr:!1,ccFiles:[],crossorigin:"",ccFontColor:"white",ccFontOpacity:1,ccFontSize:1,ccFontFamily:"arial",ccFontEdge:"none",ccBackgroundColor:"black",ccBackgroundOpacity:.5,ccWindowColor:"black",ccWindowOpacity:0,transcripts:[],gaTrackingId:"",gaCategory:"RMP",gaLabel:"RMP label",gaNamedTracker:"",gaEvents:[],gaAnonymizeIp:!1,gaNonInteractionEvents:!1,seekBarThumbnailsLoc:"",chaptersLoc:"",speed:!1,speedRates:[.25,.5,1,1.5,2,4],googleCast:!0,googleCastCordova:!1,googleCastCordovaDebug:!1,googleCastReceiverAppId:"C899A03E",googleCastVmapAdsRequest:"",googleCastAdTagUrl:"",airplay:!0,ads:!1,adTagUrl:"",adSkipButton:!1,adSkipOffset:5,adShowMarkers:!0,adsResponse:"",adImaTest:!1,adTagWaterfall:[],adLocale:"auto",adUseStyledNonLinearAds:!0,adSchedule:{},adVpaidMode:"insecure",adVpaidControls:!1,adContentDuration:0,adContentKeywords:"",adContentTitle:"",adForceNonLinearFullSlot:!1,adTagReloadOnEnded:!0,adShowRemainingTime:!1,adAutoAlign:!0,adEnablePreloading:!1,adCookiesEnabled:!0,adLiveStreamPrefetchSeconds:0,adContinuousPlayback:"auto",adImaDai:!1,adImaDaiVodContentSourceId:"",adImaDaiVodVideoId:"",adImaDaiLiveAssetKey:"",adImaDaiApiKey:"",adImaDaiBackupStream:"",adImaDaiAdTagParameters:{},adImaDaiStreamActivityMonitorId:"",adOutStream:!1,adOutStreamMutedAutoplay:!0,adAjaxWithCredentials:!1,adRmpVastEnableVpaid:!0,adLoadMediaTimeout:8e3,adLoadVastTimeout:5e3,adMaxNumRedirects:4,adCountDown:!0,adPauseOnClick:!0,adParser:"ima",adBlockerDetection:!1,adBlockerDetectedPreventPlayback:!1,relatedLoc:"",relatedData:[],relatedUpNextOffset:10,relatedUpNextAutoplay:!0,relatedEndedLoop:!1,relatedAudioOnly:!1,relatedCallback:null,playlistLoc:"",playlistData:[],playlistUpNextAutoplay:!0,playlistEndedLoop:!1,playlistAudioOnly:!1,playlistCallback:null,video360:!1,video360FocalLength:65,video360MaxFocalLength:115,video360MinFocalLength:25,video360InitialLat:0,video360InitialLon:0,video360FallbackBitrates:{},video360FallbackSrc:{},videoVR:!1,videoVRFocalLength:75,hideModule:{},customModule:[],streamrootConfig:{},muxDataSettings:{},muxDataUseListData:!0};i.hideModule={quality:!1,captions:!1,audio:!1,volume:!1},i.retryParameters={manifest:{timeout:1e4,maxTimeout:64e3,maxAttempts:2,delay:1e3},levels:{timeout:1e4,maxTimeout:64e3,maxAttempts:5,delay:1e3},segment:{timeout:2e4,maxTimeout:64e3,maxAttempts:7,delay:1e3},drm:{timeout:1e4,maxTimeout:64e3,maxAttempts:3,delay:1e3}},i.contentMetadata={title:"",description:"",artist:"",album:"",id:"",releaseDate:"",thumbnail:"",duration:"",googleCastType:"GENERIC",artwork:[],poster:[],endOfVideoPoster:[]};var s=i;a.default=s},{"@babel/runtime-corejs3/core-js-stable/object/define-property":98}],68:[function(e,t,a){"use strict";e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;const i={codes:{arabic:["ar","ar-AR","ar-MA","ar-SA"],chinese:["zh","zh-SG","zh-Hans","zh-CN"],danish:["da","da-DK"],finnish:["fi","fi-FI"],dutch:["nl","nl-BE","nl-NL"],english:["en","en-GB","en-AU","en-CA","en-IE","en-IN","en-PI","en-UD","en-US","en-ZA","en@pirate"],french:["fr","fr-CA","fr-FR","fr-BE","fr-CH"],german:["de","de-AT","de-DE","de-CH","yi-DE"],hebrew:["he","he-IL"],hindi:["hi","hi-IN"],hungarian:["hu","hu-HU"],indonesian:["id","id-ID"],italian:["it","it-IT"],japanese:["ja","ja-JP"],korean:["ko","ko-KR"],norwegian:["no"],polish:["pl","pl-PL"],portuguese:["pt","pt-PT"],portugueseBrazilian:["pt-BR"],russian:["ru","ru-RU"],spanish:["es","es-AR","es-419","es-CL","es-CO","es-EC","es-ES","es-LA","es-NI","es-MX","es-US","es-VE"],swedish:["sv","sv-SE"],taiwanese:["zh-TW"],thai:["th","th-TH"],turkish:["tr","tr-TR"],vietnamese:["vi","vi-VN"]},english:{bitrates:{auto:"Auto",renditions:[["Low Quality","High Quality"],["Low Quality","Medium Quality","High Quality"],["Low Quality","Medium Quality","High Quality","Maximum Quality"],["Low Quality","Medium Quality","High Quality","Higher Quality","Maximum Quality"]]},hint:{play:"Play",pause:"Pause",seek:"Seek Bar",enterFullscreen:"Full Screen",exitFullscreen:"Exit Full Screen",quickRewind:"Quick Rewind",quickForward:"Quick Forward",sharing:"Share",sharingLink:"Link To Video",sharingEmbedCode:"Embed Video",quality:"Quality",volume:"Volume",mute:"Mute",unmute:"Unmute",minus:"Minus",plus:"Plus",speed:"Speed",captions:"Captions",transcript:"Transcript",audio:"Audio Languages",chapters:"Chapters",live:"Live",pip:"PiP",close:"Close",settings:"Settings",goBack:"Go Back",cast:"Google Cast",airplay:"AirPlay",playlist:"Playlist",next:"Next",previous:"Previous",related:"Related",upNext:"Up Next",up:"Up",down:"Down",left:"Left",right:"Right",default:"Default",vr:"VR",off:"Off"},fccCaptions:{fontColor:"Font Color",fontOpacity:"Font Opacity",fontSize:"Font Size",fontFamily:"Font Family",fontEdge:"Font Edge",backgroundColor:"Background Color",backgroundOpacity:"Background Opacity",windowColor:"Window Color",windowOpacity:"Window Opacity"},error:{customErrorMessage:"This content is currently unavailable.",noSupportMessage:"This content cannot be played on this device.",noSupportDownload:"You may download video by clicking on that link",noSupportInstallChrome:"Using the latest version of Google Chrome may help to view this content.",noSupportInstallChromeLink:"https://www.google.com/chrome/"},ads:{controlBarCustomMessage:"Ad",skipMessage:"Skip Ad",skipWaitingMessage:"Skip Ad In",textForClickUIOnMobile:"Learn More",adBlockerDetectedMessage:"Ad-blocker detected. To view this content please disable your ad-blocker."}},arabic:{bitrates:{auto:"",renditions:[[" "," "],[" "," "," "],[" "," "," "," "],[" "," "," "," "," "]]},hint:{play:"",pause:"",seek:"",enterFullscreen:" ",exitFullscreen:"   ",quickRewind:" ",quickForward:" ",sharing:"",sharingLink:"  ",sharingEmbedCode:" ",quality:"",volume:"",mute:" ",unmute:"  ",minus:"",plus:"",speed:"",captions:" ",transcript:"  ",audio:" ",chapters:"",live:"",pip:"  ",close:"",cast:"Google Cast",airplay:"AirPlay",playlist:" ",next:"",previous:"",related:" ",upNext:"",up:"",down:"",left:"",right:"",default:"",vr:"VR",off:""},fccCaptions:{fontColor:" ",fontOpacity:" ",fontSize:" ",fontFamily:" ",fontEdge:"",backgroundColor:" ",backgroundOpacity:" ",windowColor:" ",windowOpacity:" "},error:{customErrorMessage:"    ",noSupportMessage:"       ",noSupportDownload:"       ",noSupportInstallChrome:"           ",noSupportInstallChromeLink:"https://www.google.com/intl/ar/chrome/"},ads:{controlBarCustomMessage:"",skipMessage:" ",skipWaitingMessage:"  ",textForClickUIOnMobile:" ",adBlockerDetectedMessage:"   .       ."}},french:{bitrates:{auto:"Auto",renditions:[["Basse qualit","Haute qualit"],["Basse qualit","Qualit moyenne","Haute qualit"],["Basse qualit","Qualit moyenne","Haute qualit","Qualit maximale"],["Basse qualit","Qualit moyenne","Haute qualit","Trs haute qualit","Qualit maximale"]]},hint:{play:"Lire",pause:"Pause",seek:"Barre de recherche",enterFullscreen:"Plein cran",exitFullscreen:"Quitter le mode plein cran",quickRewind:"Retour rapide",quickForward:"Avance rapide",sharing:"Partager",sharingLink:"Lien vers la vido",sharingEmbedCode:"Intgrer la vido",quality:"Qualit",volume:"Volume",mute:"Dsactiver le son",unmute:"Activer le son",minus:"Moins",plus:"Plus",speed:"Vitesse",captions:"Sous-titres",transcript:"Transcription",audio:"Langues audio",chapters:"Chapitres",live:"Direct",pip:"PiP",close:"Fermer",cast:"Google Cast",airplay:"AirPlay",playlist:"Playlist",next:"Suivant",previous:"Prcdent",related:"Mdias lis",upNext:"A suivre",up:"Vers le haut",down:"Vers le bas",left:"Vers la gauche",right:"Vers la droite",default:"Remise  zro",vr:"VR",off:"Dsactiv"},fccCaptions:{fontColor:"Couleur de la police",fontOpacity:"Transparence de la police",fontSize:"Taille de la police",fontFamily:"Type de la police",fontEdge:"Contour de la police",backgroundColor:"Couleur du fond",backgroundOpacity:"Transparence du fond",windowColor:"Couleur de la fentre",windowOpacity:"Transparence de la fentre"},error:{customErrorMessage:"Ce contenu n'est pas disponible pour le moment.",noSupportMessage:"Ce contenu ne peut tre lu sur cet appareil.",noSupportDownload:"Vous pouvez tlcharger cette vido en cliquant sur ce lien",noSupportInstallChrome:"Utiliser la dernire version de Google Chrome peut vous aider  lire ce contenu.",noSupportInstallChromeLink:"https://www.google.com/intl/fr/chrome/"},ads:{controlBarCustomMessage:"Publicit",skipMessage:"Passer la publicit",skipWaitingMessage:"Passer la publicit dans",textForClickUIOnMobile:"En savoir plus",adBlockerDetectedMessage:"Bloqueur de publicit dtect. Pour accder  ce contenu, merci de le dsactiver."}},german:{bitrates:{auto:"Automatisch",renditions:[["Geringe Qualitt","Gute Qualitt"],["Geringe Qualitt","Mittlere Qualitt","Gute Qualitt"],["Geringe Qualitt","Mittlere Qualitt","Gute Qualitt","Beste Qualitt"],["Geringe Qualitt","Mittlere Qualitt","Gute Qualitt","Bessere Qualitt","Beste Qualitt"]]},hint:{play:"Wiedergabe",pause:"Pause",seek:"Schieberegler fr Suche",enterFullscreen:"Vollbild",exitFullscreen:"Vollbildmodus beenden",quickRewind:"Schnellrcklauf",quickForward:"Schnellvorlauf",sharing:"Teilen",sharingLink:"Link zum Video",sharingEmbedCode:"Video teilen",quality:"Qualitt",volume:"Lautstrke",mute:"Stummschalten",unmute:"Stummschaltung aufheben",minus:"Minus",plus:"Plus",speed:"Geschwindigkeit",captions:"Untertitel",transcript:"Transkript",audio:"Audiosprache",chapters:"Kapitel",live:"Live",pip:"Bild-in-Bild",close:"Zurck",cast:"Google Cast",airplay:"AirPlay",playlist:"Wiedergabeliste",next:"Nchster",previous:"Bisherige",related:"hnliche Inhalte",upNext:"Als nchstes",up:"Oben",down:"Nach unten",left:"Links",right:"Rechts",default:"Zurcksetzen",vr:"VR",off:"Aus"},fccCaptions:{fontColor:"Schriftfarbe",fontOpacity:"Schriftopazitt",fontSize:"Schriftgre",fontFamily:"Schriftfamilie",fontEdge:"Schriftkante",backgroundColor:"Hintergrundfarbe",backgroundOpacity:"Hintergrundopazitt",windowColor:"Fensterfarbe",windowOpacity:"Fensteropazitt"},error:{customErrorMessage:"Dieser Inhalt ist zurzeit nicht erreichbar.",noSupportMessage:"Dieser Inhalt kann auf diesem Gert nicht wiedergegeben werden.",noSupportDownload:"Sie knnen das Video herunterladen, indem Sie auf diesen Link klicken",noSupportInstallChrome:"Mithilfe der neuesten Version von Google Chrome knnen Sie diesen Inhalt mglicherweise anzeigen.",noSupportInstallChromeLink:"https://www.google.com/intl/de/chrome/"},ads:{controlBarCustomMessage:"Werbung",skipMessage:"Werbung berspringen",skipWaitingMessage:"Werbung berspringen in",textForClickUIOnMobile:"Mehr erfahren",adBlockerDetectedMessage:"Werbeblocker erkannt. Deaktivieren Sie Ihren Werbeblocker, um diesen Inhalt anzuzeigen."}},hebrew:{bitrates:{auto:"",renditions:[[" "," "],[" "," "," "],[" "," "," "," "],[" "," "," ","  "," "]]},hint:{play:"",pause:"",seek:"",enterFullscreen:" ",exitFullscreen:"  ",quickRewind:"  ",quickForward:" ",sharing:"",sharingLink:" ",sharingEmbedCode:" ",quality:"",volume:" ",mute:"",unmute:" ",minus:"",plus:"",speed:"",captions:"",transcript:"",audio:" ",chapters:"",live:"",pip:"  ",close:"",cast:"Google Cast",airplay:"AirPlay",playlist:" ",next:"",previous:"",related:"",upNext:"",up:"",down:"",left:"",right:"",default:"",vr:"VR",off:""},fccCaptions:{fontColor:" ",fontOpacity:" ",fontSize:" ",fontFamily:" ",fontEdge:" ",backgroundColor:" ",backgroundOpacity:" ",windowColor:" ",windowOpacity:" "},error:{customErrorMessage:"    ",noSupportMessage:"       ",noSupportDownload:"         ",noSupportInstallChrome:"     Google Chrome     ",noSupportInstallChromeLink:"https://www.google.com/intl/iw/chrome/"},ads:{controlBarCustomMessage:"",skipMessage:"  ",skipWaitingMessage:"   ",textForClickUIOnMobile:" ",adBlockerDetectedMessage:"  .         ."}},spanish:{bitrates:{auto:"Auto",renditions:[["Baja calidad","Alta calidad"],["Baja calidad","Calidad media","Alta calidad"],["Baja calidad","Calidad media","Alta calidad","Mxima calidad"],["Baja calidad","Calidad media","Alta calidad","Mejor calidad","Mxima calidad"]]},hint:{play:"Botn de reproduccin",pause:"Pausa",seek:"Barra deslizante de bsqueda",enterFullscreen:"Pantalla completa",exitFullscreen:"Salir del modo de pantalla completa",quickRewind:"Rebobinado rpido",quickForward:"Avance rpido",sharing:"Compartir",sharingLink:"Enlace al video",sharingEmbedCode:"Compartir video",quality:"Calidad",volume:"Volumen",mute:"Silenciar",unmute:"Activar sonido",minus:"Menos",plus:"Ms",speed:"Velocidad",captions:"Subttulos",transcript:"Transcripcin",audio:"Idiomas",chapters:"Captulos",live:"Directo",pip:"Imagen en imagen",close:"Atrs",cast:"Google Cast",airplay:"AirPlay",playlist:"Playlist",next:"Siguiente",previous:"Anterior",related:"Relacionados",upNext:"Siguiente",up:"Arriba",down:"Abajo",left:"Izquierda",right:"Derecha",default:"Reajustar",vr:"VR",off:"Desactivado"},fccCaptions:{fontColor:"Color de fuente",fontOpacity:"Opacidad de fuente",fontSize:"Tamao de fuente",fontFamily:"Familia tipogrfica",fontEdge:"Borde de fuente",backgroundColor:"Color de fondo",backgroundOpacity:"Opacidad de fondo",windowColor:"Color de ventana",windowOpacity:"Opacidad de la ventana"},error:{customErrorMessage:"Contenido no disponible actualmente.",noSupportMessage:"Este contenido no se puede reproducir en este dispositivo.",noSupportDownload:"Puedes descargar el video haciendo clic en ese enlace",noSupportInstallChrome:"Usar la ltima versin de Google Chrome puede ayudar a ver este contenido.",noSupportInstallChromeLink:"https://www.google.com/intl/es/chrome/"},ads:{controlBarCustomMessage:"Publicidad",skipMessage:"Saltar publicidad",skipWaitingMessage:"Saltar publicidad en",textForClickUIOnMobile:"Saber ms",adBlockerDetectedMessage:"AdBlocker detectado. Para ver este contenido, por favor deshabilite su AdBlocker."}},portuguese:{bitrates:{auto:"Auto",renditions:[["Baixa qualidade","Alta qualidade"],["Baixa qualidade","Qualidade mdia","Alta qualidade"],["Baixa qualidade","Qualidade mdia","Alta qualidade","Mxima qualidade"],["Baixa qualidade","Qualidade mdia","Alta qualidade","Maior qualidade","Mxima qualidade"]]},hint:{play:"Reproduzir",pause:"Pausa",seek:"Boto deslizante de busca",enterFullscreen:"Ecr inteiro",exitFullscreen:"Sair do ecr inteiro",quickRewind:"Retrocesso rpido",quickForward:"Avano rpido",sharing:"Partilhar",sharingLink:"Link para vdeo",sharingEmbedCode:"Compartilhar vdeo",quality:"Qualidade",volume:"Volume",mute:"Desativar som",unmute:"Ativar som",minus:"Menos",plus:"Mais",speed:"Velocidade",captions:"Legendas",transcript:"Transcrio",audio:"Idiomas de udio",chapters:"Captulos",live:"Em direto",pip:"Ecr no ecr",close:"Voltar",cast:"Google Cast",airplay:"AirPlay",playlist:"Lista de reproduo",next:"Prximo",previous:"Anterior",related:"Relacionados",upNext:" seguir",up:"Acima",down:"Para baixo",left:"A esquerda",right:"Certa",default:"Restabelecer",vr:"VR",off:"Desativado"},fccCaptions:{fontColor:"Cor da fonte",fontOpacity:"Opacidade da fonte",fontSize:"Tamanho da fonte",fontFamily:"Famlia de fontes",fontEdge:"Beira",backgroundColor:"Cor de fundo",backgroundOpacity:"Opacidade de fundo",windowColor:"Cor da janela",windowOpacity:"Opacidade da janela"},error:{customErrorMessage:"Este contedo est neste momento indisponvel.",noSupportMessage:"Este contedo no pode ser reproduzido neste dispositivo.",noSupportDownload:"Voc pode baixar o vdeo clicando no link",noSupportInstallChrome:"Usar a verso mais recente do Google Chrome pode ajudar a visualizar esse contedo.",noSupportInstallChromeLink:"https://www.google.com/intl/pt-PT/chrome/"},ads:{controlBarCustomMessage:"Publicidade",skipMessage:"Ignorar publicidade",skipWaitingMessage:"Ignorar publicidade em",textForClickUIOnMobile:"Saber mais",adBlockerDetectedMessage:"Bloqueador de anncios detectado. Para visualizar este contedo, desative seu bloqueador de anncios."}},portugueseBrazilian:{bitrates:{auto:"Auto",renditions:[["Qualidade Baixa","Qualidade Alta"],["Qualidade Baixa","Qualidade Mdia","Qualidade Alta"],["Qualidade Baixa","Qualidade Mdia","Qualidade Alta","Qualidade Mxima"],["Qualidade Baixa","Qualidade Mdia","Qualidade Alta","Qualidade Altssima","Qualidade Mxima"]]},hint:{play:"Reproduzir",pause:"Pausa",seek:"Buscar",enterFullscreen:"Tela Cheia",exitFullscreen:"Sair da tela cheia",quickRewind:"Retroceder",quickForward:"Avanar",sharing:"Compartilhar",sharingLink:"Link",sharingEmbedCode:"Compartilhar vdeo",quality:"Qualidade",volume:"Volume",mute:"Mudo",unmute:"Ativar som",minus:"Menos",plus:"Mais",speed:"Velocidade",captions:"Legendas",transcript:"Transcrio",audio:"Idiomas de udio",chapters:"Captulos",live:"Ao vivo",pip:"PiP",close:"Fechar",cast:"Google Cast",airplay:"AirPlay",playlist:"Playlist",next:"Prximo",previous:"Anterior",related:"Relacionado",upNext:" seguir",up:"Acima",down:"Para baixo",left:"Esquerda",right:"Direita",default:"Restabelecer",vr:"VR",off:"Off"},fccCaptions:{fontColor:"Cor da fonte",fontOpacity:"Opacidade da fonte",fontSize:"Tamanho da fonte",fontFamily:"Famlia de fontes",fontEdge:"Beira",backgroundColor:"Cor de fundo",backgroundOpacity:"Opacidade de fundo",windowColor:"Cor da janela",windowOpacity:"Opacidade da janela"},error:{customErrorMessage:"Este contedo no est disponvel atualmente.",noSupportMessage:"Este contedo no pode ser reproduzido neste dispositivo.",noSupportDownload:"Voc pode baixar o vdeo clicando no link.",noSupportInstallChrome:"Use a verso mais recente do Google Chrome a visualizar este contedo.",noSupportInstallChromeLink:"https://www.google.com/intl/pt-BR/chrome/"},ads:{controlBarCustomMessage:"Publicidade",skipMessage:"Pular publicidade",skipWaitingMessage:"Pular publicidade em",textForClickUIOnMobile:"Saiba mais",adBlockerDetectedMessage:"Bloqueador de anncios detectado. Para visualizar este contedo, desative seu bloqueador de anncios."}},italian:{bitrates:{auto:"Auto",renditions:[["Di bassa qualit","Alta qualit"],["Di bassa qualit","Qualit media","Alta qualit"],["Di bassa qualit","Qualit media","Alta qualit","Massima qualit"],["Di bassa qualit","Qualit media","Alta qualit","Qualit migliore","Massima qualit"]]},hint:{play:"Riproduci",pause:"Pausa",seek:"Dispositivo di scorrimento",enterFullscreen:"Schermo intero",exitFullscreen:"Esci dalla modalit a schermo intero",quickRewind:"Riavvolgimento rapido",quickForward:"Avanti veloce",sharing:"Condividi",sharingLink:"Link al video",sharingEmbedCode:"Condividi il Video",quality:"Qualit",volume:"Volume",mute:"Disattiva audio",unmute:"Riattiva audio",minus:"Meno",plus:"Pi",speed:"Velocit",captions:"Sottotitoli",transcript:"Trascrizione",audio:"Lingue audio",chapters:"Capitoli",live:"Dal vivo",pip:"Picture in picture",close:"Indietro",cast:"Google Cast",airplay:"AirPlay",playlist:"Playlist",next:"Il prossimo",previous:"Precedente",related:"Correlati",upNext:"Avanti il prossimo",up:"Su",down:"Gi",left:"Sinistra",right:"Destra",default:"Il reset",vr:"VR",off:"Disattivato"},fccCaptions:{fontColor:"Colore del carattere",fontOpacity:"Opacit dei caratteri",fontSize:"Dimensione del font",fontFamily:"Famiglia di font",fontEdge:"Bordo",backgroundColor:"Colore di sfondo",backgroundOpacity:"Opacit dello sfondo",windowColor:"Colore finestra",windowOpacity:"Opacit della finestra"},error:{customErrorMessage:"Questo contenuto al momento non  disponibile.",noSupportMessage:"Questo contenuto non pu essere riprodotto su questo dispositivo.",noSupportDownload:"Puoi scaricare video cliccando su quel link",noSupportInstallChrome:"L'utilizzo dell'ultima versione di Google Chrome pu aiutare a visualizzare questo contenuto.",noSupportInstallChromeLink:"https://www.google.com/intl/it/chrome/"},ads:{controlBarCustomMessage:"Messaggio pubblicitario",skipMessage:"Salta pubblicit",skipWaitingMessage:"Salta la pubblicit in",textForClickUIOnMobile:"Per saperne di pi",adBlockerDetectedMessage:"Ad-blocker rilevato. Per visualizzare questo contenuto, si prega di disabilitare il tuo blocco per annunci pubblicitari."}},russian:{bitrates:{auto:"",renditions:[[" "," "],[" "," "," "],[" "," "," "," "],[" "," "," "," "," "]]},hint:{play:"",pause:"",seek:"",enterFullscreen:"  ",exitFullscreen:"   ",quickRewind:" ",quickForward:" ",sharing:"",sharingLink:"  ",sharingEmbedCode:" ",quality:"",volume:"",mute:" ",unmute:" ",minus:"",plus:"",speed:"",captions:"",transcript:"P",audio:" ",chapters:"",live:" ",pip:"  ",close:"",cast:"Google Cast",airplay:"AirPlay",playlist:"",next:"",previous:"",related:"",upNext:"",up:"B",down:"B",left:"O",right:"",default:"O",vr:"VR",off:""},fccCaptions:{fontColor:" ",fontOpacity:" ",fontSize:" ",fontFamily:" ",fontEdge:"",backgroundColor:" ",backgroundOpacity:" ",windowColor:" ",windowOpacity:" "},error:{customErrorMessage:"     ",noSupportMessage:"        ",noSupportDownload:"   ,    ",noSupportInstallChrome:"        Google Chrome",noSupportInstallChromeLink:"https://www.google.ru/intl/ru/chrome/"},ads:{controlBarCustomMessage:"P",skipMessage:" ",skipWaitingMessage:"  ",textForClickUIOnMobile:"",adBlockerDetectedMessage:"  .       ."}},taiwanese:{bitrates:{auto:"",renditions:[["SD","HD"],["SD","HD","Full HD"],["SD","HQ","HD","Full HD"],["SD","HQ","HD","Full HD","Max. HD"]]},hint:{play:"",pause:"",seek:"",enterFullscreen:"",exitFullscreen:"",quickRewind:"",quickForward:"",sharing:"",sharingLink:"Link to video",sharingEmbedCode:"Share video",quality:"",volume:"",mute:"",unmute:"",minus:"Minus",plus:"Plus",speed:"",captions:"",transcript:"Transcript",audio:"",chapters:"",live:"",pip:"",cast:"Google Cast",airplay:"AirPlay",playlist:"",next:"Next",previous:"Previous",related:"",upNext:"",up:"Up",down:"Down",left:"Left",right:"Right",default:"Default",vr:"VR",off:""},fccCaptions:{fontColor:"Font Color",fontOpacity:"Font Opacity",fontSize:"Font Size",fontFamily:"Font Family",fontEdge:"Font Edge",backgroundColor:"Background Color",backgroundOpacity:"Background Opacity",windowColor:"Window Color",windowOpacity:"Window Opacity"},error:{customErrorMessage:"",noSupportMessage:"",noSupportDownload:"",noSupportInstallChrome:"Google Chrome",noSupportInstallChromeLink:"https://www.google.com/intl/zh-TW/chrome/"},ads:{controlBarCustomMessage:"",skipMessage:"",skipWaitingMessage:"",textForClickUIOnMobile:"",adBlockerDetectedMessage:""}},dutch:{bitrates:{auto:"Automatisch",renditions:[["Lage kwaliteit","Hoge kwaliteit"],["Lage kwaliteit","Gemiddelde kwaliteit","Hoge kwaliteit"],["Lage kwaliteit","Gemiddelde kwaliteit","Hoge kwaliteit","Hogere kwaliteit"],["Lage kwaliteit","Gemiddelde kwaliteit","Hoge kwaliteit","Hogere kwaliteit","Maximale kwaliteit"]]},hint:{play:"Afspelen",pause:"Pauzeren",seek:"Zoekschuifbalk",enterFullscreen:"Volledig scherm",exitFullscreen:"Volledig scherm sluiten",quickRewind:"Terugspoelen",quickForward:"Vooruitspoelen",sharing:"Delen",sharingLink:"Link naar video",sharingEmbedCode:"Deel Video",quality:"Kwaliteit",volume:"Volume",mute:"Dempen",unmute:"Dempen opheffen",minus:"Min",plus:"Plus",speed:"Snelheid",captions:"Ondertiteling",transcript:"Vertaling",audio:"Taal",chapters:"Hoofdstukken",live:"Live",pip:"Scherm-in-scherm",close:"Terug",cast:"Google Cast",airplay:"AirPlay",playlist:"Afspeellijst",next:"Volgende",previous:"Voorgaand",related:"Gelijkaardig",upNext:"Volgende",up:"Omhoog",down:"Beneden",left:"Links",right:"Rechtsaf",default:"Opnieuw instellen",vr:"VR",off:"Uit"},fccCaptions:{fontColor:"Letterkleur",fontOpacity:"Ondoorzichtigheid",fontSize:"Lettertypegrootte",fontFamily:"Lettertypefamilie",fontEdge:"Rand",backgroundColor:"Achtergrond kleur",backgroundOpacity:"Achtergronddekking",windowColor:"Venster kleur",windowOpacity:"Venster ondoorzichtigheid"},error:{customErrorMessage:"Deze inhoud is momenteel niet beschikbaar",noSupportMessage:"Deze inhoud kan niet op dit apparaat worden afgespeeld",noSupportDownload:"U kunt de video downloaden door op die link te klikken",noSupportInstallChrome:"Het gebruik van de nieuwste versie van Google Chrome kan helpen om deze inhoud te bekijken",noSupportInstallChromeLink:"https://www.google.com/intl/zh-TW/chrome/"},ads:{controlBarCustomMessage:"Advertentie",skipMessage:"Advertentie overslaan",skipWaitingMessage:"Advertentie overslaan",textForClickUIOnMobile:"Kom meer te weten",adBlockerDetectedMessage:"Ad-blocker gedetecteerd. Schakel uw ad-blocker uit om deze inhoud te bekijken."}},polish:{bitrates:{auto:"Auto",renditions:[["Niska jako","Wysoka jako"],["Niska jako","rednia jako","Wysoka jako"],["Niska jako","rednia jako","Wysoka jako","Najwysza jako"],["Niska jako","rednia jako","Wysoka jako","Wysza jako","Najwysza jako"]]},hint:{play:"Odtwarzaj",pause:"Zatrzymaj",seek:"Suwak przewijania",enterFullscreen:"Peny ekran",exitFullscreen:"Zamknij peny ekran",quickRewind:"Szybkie przewijanie do tyu",quickForward:"Szybkie przewijanie do przodu",sharing:"Udostpnij",sharingLink:"Link do wideo",sharingEmbedCode:"Udostpnij film",quality:"Jako",volume:"Gono",mute:"Wycisz",unmute:"Wycz wyciszenie",minus:"Minus",plus:"Plus",speed:"Prdko",captions:"Napisy",transcript:"Transkrypcja",audio:"Jzyk",chapters:"Odcinki",live:"Na ywo",pip:"Obraz w obrazie",close:"Wstecz",cast:"Google Cast",airplay:"AirPlay",playlist:"Playlista",next:"Kolejny",previous:"Poprzedni",related:"Treci powizane",upNext:"Nastpny",up:"W gr",down:"Na d",left:"Lewo",right:"Dobrze",default:"Resetowanie",vr:"VR",off:"Wyczone"},fccCaptions:{fontColor:"Kolor czcionki",fontOpacity:"Krycie czcionki",fontSize:"Rozmiar czcionki",fontFamily:"Rodzina czcionek",fontEdge:"Krawd",backgroundColor:"Kolor ta",backgroundOpacity:"Krycie ta",windowColor:"Kolor okna",windowOpacity:"Krycie okna"},error:{customErrorMessage:"Ta tre jest aktualnie niedostpna",noSupportMessage:"Tej treci nie mona odtworzy na tym urzdzeniu",noSupportDownload:"Aby pobra film, kliknij ten link",noSupportInstallChrome:"Aby wywietli t tre, uyj najnowszej wersji Google Chrome",noSupportInstallChromeLink:"https://www.google.com/intl/pl/chrome/"},ads:{controlBarCustomMessage:"Reklama",skipMessage:"Pomi reklam",skipWaitingMessage:"Pomi reklam za",textForClickUIOnMobile:"Wicej informacji",adBlockerDetectedMessage:"Wykryto blokad reklam. Aby wywietli t tre, wycz blokowanie reklam."}},japanese:{bitrates:{auto:"",renditions:[["",""],["","",""],["","","",""],["","","","",""]]},hint:{play:"",pause:"",seek:" ",enterFullscreen:"",exitFullscreen:"",quickRewind:"",quickForward:"",sharing:"",sharingLink:"",sharingEmbedCode:"",quality:"",volume:"",mute:"",unmute:"",minus:"",plus:"",speed:"",captions:"",transcript:"",audio:"",chapters:"",live:"",pip:"  ",close:"",cast:"Google Cast",airplay:"AirPlay",playlist:"",next:"",previous:"",related:"",upNext:"",up:"",down:"",left:"",right:"",default:"",vr:"VR",off:""},fccCaptions:{fontColor:"",fontOpacity:"",fontSize:"",fontFamily:"",fontEdge:"",backgroundColor:"",backgroundOpacity:"",windowColor:"",windowOpacity:""},error:{customErrorMessage:"",noSupportMessage:"",noSupportDownload:"",noSupportInstallChrome:"Google Chrome",noSupportInstallChromeLink:"https://www.google.com/intl/ja/chrome/"},ads:{controlBarCustomMessage:"",skipMessage:"",skipWaitingMessage:"",textForClickUIOnMobile:"",adBlockerDetectedMessage:""}},chinese:{bitrates:{auto:"",renditions:[["",""],["","",""],["","","",""],["","","","",""]]},hint:{play:"",pause:"",seek:"",enterFullscreen:"",exitFullscreen:"",quickRewind:"",quickForward:"",sharing:"",sharingLink:"",sharingEmbedCode:"",quality:"",volume:"",mute:"",unmute:"",minus:"",plus:"",speed:"",captions:"",transcript:"",audio:"",chapters:"",live:"",pip:"",close:"",cast:"Google Cast",airplay:"AirPlay",playlist:"",next:"",previous:"",related:"",upNext:"",up:"",down:"",left:"",right:"",default:"",vr:"VR",off:""},fccCaptions:{fontColor:"",fontOpacity:"",fontSize:"",fontFamily:"",fontEdge:"",backgroundColor:"",backgroundOpacity:"",windowColor:"",windowOpacity:""},error:{customErrorMessage:"",noSupportMessage:"",noSupportDownload:"",noSupportInstallChrome:" Google Chrome ",noSupportInstallChromeLink:"https://www.google.com/intl/zh-CN/chrome/"},ads:{controlBarCustomMessage:"",skipMessage:"",skipWaitingMessage:"",textForClickUIOnMobile:"",adBlockerDetectedMessage:""}},korean:{bitrates:{auto:"",renditions:[["",""],["","",""],["","","",""],["","","","  ",""]]},hint:{play:"",pause:"",seek:"",enterFullscreen:"",exitFullscreen:" ",quickRewind:" ",quickForward:" ",sharing:"",sharingLink:" ",sharingEmbedCode:" ",quality:"",volume:"",mute:"",unmute:" ",minus:"",plus:"",speed:"",captions:"",transcript:" ",audio:" ",chapters:"",live:"",pip:"PIP ",close:"",cast:"Google Cast",airplay:"AirPlay",playlist:"",next:"",previous:"",related:" ",upNext:" ",up:"",down:"",left:"",right:"",default:"",vr:"VR",off:""},fccCaptions:{fontColor:" ",fontOpacity:" ",fontSize:" ",fontFamily:" ",fontEdge:"",backgroundColor:"",backgroundOpacity:" ",windowColor:" ",windowOpacity:" "},error:{customErrorMessage:"    ",noSupportMessage:"    ",noSupportDownload:"      ",noSupportInstallChrome:"  Google Chrome       ",noSupportInstallChromeLink:"https://www.google.com/intl/ko/chrome/"},ads:{controlBarCustomMessage:"",skipMessage:" ",skipWaitingMessage:"   ",textForClickUIOnMobile:" ",adBlockerDetectedMessage:"  .      ."}},swedish:{bitrates:{auto:"Auto",renditions:[["Lg kvalitet","Hg kvalitet"],["Lg kvalitet","Medium kvalitet","Hg kvalitet"],["Lg kvalitet","Medium kvalitet","Hg kvalitet","Hgst kvalitet"],["Lg kvalitet","Medium kvalitet","Hg kvalitet","Hgre kvalitet","Hgst kvalitet"]]},hint:{play:"Spela",pause:"Pausa",seek:"Sk",enterFullscreen:"Fullskrm",exitFullscreen:"G ur fullskrm",quickRewind:"Spola bakt",quickForward:"Spola framt",sharing:"Dela",sharingLink:"Lnk till video",sharingEmbedCode:"Bdda in video",quality:"Kvalitet",volume:"Volym",mute:"Ljud av",unmute:"Ljud p",minus:"Minus",plus:"Plus",speed:"Hastighet",captions:"Undertexter",transcript:"Transkript",audio:"Ljudsprk",chapters:"Kapitel",live:"Live",pip:"PiP",close:"Stng",cast:"Google Cast",airplay:"AirPlay",playlist:"Spellista",next:"Nsta",previous:"Fregende",related:"Relaterat",upNext:"Kommande",up:"Upp",down:"Ner",left:"Vnster",right:"Rtt",default:"terstlla",vr:"VR",off:"Av"},fccCaptions:{fontColor:"Fontfrg",fontOpacity:"Typ av teckensnitt",fontSize:"Textstorlek",fontFamily:"Typsnittsfamilj",fontEdge:"Kant",backgroundColor:"Bakgrundsfrg",backgroundOpacity:"Bakgrundens opacitet",windowColor:"Fnsterfrg",windowOpacity:"Fnster Opacitet"},error:{customErrorMessage:"Detta innehll r fr tillfllet inte tillgngligt",noSupportMessage:"Detta innehll kan inte spelas upp p denna enhet",noSupportDownload:"Du kan ladda ner videon genom att klicka p lnken",noSupportInstallChrome:"Att anvnda senaste versionen av Google Chrome kan mjligen underltta att se detta innehll.",noSupportInstallChromeLink:"https://www.google.com/intl/sv/chrome/"},ads:{controlBarCustomMessage:"Annons",skipMessage:"Hoppa ver annons",skipWaitingMessage:"Hoppa ver annons om",textForClickUIOnMobile:"Ls mer",adBlockerDetectedMessage:"Annonsblockerare upptckt. Fr att se detta innehll vnligen avaktivera annonsblockeraren."}},thai:{bitrates:{auto:"",renditions:[["",""],["","",""],["","","",""],["","","","",""]]},hint:{play:"",pause:"",seek:"",enterFullscreen:"",exitFullscreen:"",quickRewind:"",quickForward:"",sharing:"",sharingLink:"",sharingEmbedCode:"",quality:"",volume:"",mute:"",unmute:"",minus:"",plus:"",speed:"",captions:"",transcript:"",audio:"",chapters:"",live:"",pip:"",close:"",cast:"Google Cast",airplay:"AirPlay",playlist:"",next:"",previous:"",related:"",upNext:"",up:"",down:"",left:"",right:"",default:"",vr:"VR",off:""},fccCaptions:{fontColor:"",fontOpacity:"",fontSize:"",fontFamily:"",fontEdge:"",backgroundColor:"",backgroundOpacity:"",windowColor:"",windowOpacity:""},error:{customErrorMessage:"",noSupportMessage:"",noSupportDownload:"",noSupportInstallChrome:" Google Chrome ",noSupportInstallChromeLink:"https://www.google.com/intl/th/chrome/"},ads:{controlBarCustomMessage:"",skipMessage:"",skipWaitingMessage:"",textForClickUIOnMobile:"",adBlockerDetectedMessage:"   "}},turkish:{bitrates:{auto:"Otomatik",renditions:[["Dk kalite","Yksek kalite"],["Dk kalite","Orta kalite","Yksek kalite"],["Dk kalite","Orta kalite","Yksek kalite","Maksimum kalite"],["Dk kalite","Orta kalite","Yksek kalite","Daha yksek kalite","Maksimum kalite"]]},hint:{play:"Oynat",pause:"Duraklat",seek:"Arama kaydrma ubuu",enterFullscreen:"Tam ekran",exitFullscreen:"Tam ekrandan k",quickRewind:"Hzl geri al",quickForward:"Hzl ileri al",sharing:"Payla",sharingLink:"Video balants",sharingEmbedCode:"Videoyu gm",quality:"znrlk",volume:"Ses dzeyi",mute:"Sesi kapat",unmute:"Sesi a",minus:"Eksi",plus:"Art",speed:"Hz",captions:"Altyazlar",transcript:"Transcript",audio:"Ses dilleri",chapters:"Blmler",live:"Canl",pip:"Pencere iinde Pencere",close:"Geri",cast:"Google Cast",airplay:"AirPlay",playlist:"alma listesi",next:"Sonraki",previous:"nceki",related:"lgili",upNext:"Bir sonraki",up:"Yukar",down:"Aa",left:"Ayrld",right:"Sa",default:"Sfrla",vr:"VR",off:"Kapal"},fccCaptions:{fontColor:"Yaz rengi",fontOpacity:"Yaz Tipi Opakl",fontSize:"Yaz Boyutu",fontFamily:"Font ailesi",fontEdge:"Kenar",backgroundColor:"Arka plan rengi",backgroundOpacity:"Arka Plan effafl",windowColor:"Pencere Rengi",windowOpacity:"Pencere effafl"},error:{customErrorMessage:"Bu ierik u anda kullanlamyor",noSupportMessage:"Bu ierik bu cihazda oynatlamyor",noSupportDownload:"Bu linke tklayarak videoyu indirebilirsiniz",noSupportInstallChrome:"Google Chrome'un en son srmn kullanmak bu ierii grntlemenize yardmc olabilir",noSupportInstallChromeLink:"https://www.google.com/intl/tr/chrome/"},ads:{controlBarCustomMessage:"Reklam",skipMessage:"Reklam atla",skipWaitingMessage:"Reklam atlamaya",textForClickUIOnMobile:"Daha fazla bilgi",adBlockerDetectedMessage:"Reklam engelleyici tespit edildi. Bu ierii grntlemek iin ltfen reklam engelleyicinizi devre d brakn."}},vietnamese:{bitrates:{auto:"Cht lng t ng",renditions:[["Cht lng thp","Cht lng cao"],["Cht lng thp","Cht lng trung bnh","Cht lng cao"],["Cht lng thp","Cht lng trung bnh","Cht lng cao","Cht lng ti a"],["Cht lng thp","Cht lng trung bnh","Cht lng cao","Daha yksek kalite","Cht lng ti a"]]},hint:{play:"c",pause:"Dng",seek:"Tm",enterFullscreen:"Ch  ton mn hnh",exitFullscreen:"Thot khi ch  ton mn hnh",quickRewind:"Lui nhanh",quickForward:"Ti nhanh",sharing:"Chia s",sharingLink:"ng dn n video",sharingEmbedCode:"Gn video",quality:"Cht lng",volume:"m lng",mute:"Tt ting",unmute:"Bt ting",minus:"Tr",plus:"Cng",speed:"Tc ",captions:"Ph ",transcript:"Bng im",audio:"Ngn ng m thanh",chapters:"Chng",live:"Live",pip:"Hin th hnh trong hnh",close:"ng",cast:"Google Cast",airplay:"AirPlay",playlist:"Playlist",next:"Tip theo",previous:"Trc",related:"C lin quan",upNext:"Ln tip",up:"Ln",down:"Xung",left:"Tri",right:"ng",default:"Ci li",vr:"VR",off:"Tt"},fccCaptions:{fontColor:"Mu ch",fontOpacity:" m phng ch",fontSize:"C ch",fontFamily:"H Phng ch",fontEdge:"Cnh",backgroundColor:"Mu nn",backgroundOpacity:" m nn",windowColor:"Mu ca s",windowOpacity:" m ca s"},error:{customErrorMessage:"Ni dung ny hin khng c",noSupportMessage:"Ni dung ny khng th c trn thit b ny",noSupportDownload:"Bn c th ti video ny xung bng cch nhp vo ng dn ny",noSupportInstallChrome:"S dng phin bn mi nht ca Google Chrome c th gip xem ni dung ny",noSupportInstallChromeLink:"https://www.google.com/intl/vi/chrome/"},ads:{controlBarCustomMessage:"Qung co",skipMessage:"B qung co",skipWaitingMessage:"B qung co sau",textForClickUIOnMobile:"Tm hiu thm",adBlockerDetectedMessage:" pht hin trnh chn qung co.  xem ni dung ny xin vui lng tt trnh chn qung co ca bn."}},danish:{bitrates:{auto:"Automatisk",renditions:[["Lav kvalitet","Maksimal kvalitet"],["Lav kvalitet","Medium kvalitet","Maksimal kvalitet"],["Lav kvalitet","Medium kvalitet","Hj kvalitet","Maksimal kvalitet"],["Lav kvalitet","Medium kvalitet","Hj kvalitet","Hjere kvalitet","Maksimal kvalitet"]]},hint:{play:"Afspil",pause:"Pause",seek:"Sg",enterFullscreen:"Fuld skrm",exitFullscreen:"Annuller fuld skrm",quickRewind:"Hurtig tilbagespoling",quickForward:"Hurtig fremadspoling",sharing:"Del",sharingLink:"Link til video",sharingEmbedCode:"Indlejr video",quality:"Kvalitet",volume:"Lydstyrke",mute:"Lydls",unmute:"Annuller lydls",minus:"Minus",plus:"Plus",speed:"Hastighed",captions:"Billedtekster",transcript:"Udskrift",audio:"Lydsprog",chapters:"Kapitler",live:"Live",pip:"PiP",close:"Luk",cast:"Google Cast",airplay:"AirPlay",playlist:"Afspilningsliste",next:"Nste",previous:"Forrige",related:"Relateret",upNext:"Nste",up:"Op",down:"Ned",left:"Venstre",right:"Ret",default:"Nulstil",vr:"VR",off:"Fra"},fccCaptions:{fontColor:"Skrift farve",fontOpacity:"Skrifttthed",fontSize:"Skriftstrrelse",fontFamily:"Fontfamilie",fontEdge:"Kant",backgroundColor:"Baggrundsfarve",backgroundOpacity:"Baggrundsdensitet",windowColor:"Vinduesfarve",windowOpacity:"Vinduesgennemsigtighed"},error:{customErrorMessage:"Dette indhold er ikke tilgngeligt for jeblikket",noSupportMessage:"Dette indhold kan ikke afspilles p denne enhed",noSupportDownload:"Du kan downloade video ved at klikke p det link",noSupportInstallChrome:"Hvis du bruger den nyeste version af Google Chrome, kan det hjlpe til at f vist dette indhold",noSupportInstallChromeLink:"https://www.google.com/intl/da/chrome/"},ads:{controlBarCustomMessage:"Annonce",skipMessage:"Spring annonce over",skipWaitingMessage:"Spring annonce over om",textForClickUIOnMobile:"Lr mere",adBlockerDetectedMessage:"Annonceblokering registreret. For at se dette indhold skal du deaktivere annonceblokering."}},finnish:{bitrates:{auto:"Automaattinen",renditions:[["Matala laatu","Maksimilaatu"],["Matala laatu","Keskitasoinen laatu","Maksimilaatu"],["Matala laatu","Keskitasoinen laatu","Hyv laatu","Maksimilaatu"],["Matala laatu","Keskitasoinen laatu","Hyv laatu","Parempi laatu","Maksimilaatu"]]},hint:{play:"Toista",pause:"Keskeyt",seek:"Hae",enterFullscreen:"Koko nytt",exitFullscreen:"Poistu koko nytst",quickRewind:"Pikakelaus taakse",quickForward:"Pikakelaus eteen",sharing:"Jaa",sharingLink:"Linkki videoon",sharingEmbedCode:"Liit video",quality:"Laatu",volume:"nenvoimakkuus",mute:"Mykist",unmute:"Peru mykistys",minus:"Miinus",plus:"Plus",speed:"Nopeus",captions:"Kuvakaappaus",transcript:"Jljenns",audio:"Audiokielet",chapters:"Kappaleet",live:"Live",pip:"PiP",close:"Sulje",cast:"Google Cast",airplay:"AirPlay",playlist:"Soittolista",next:"Seuraava",previous:"Edellinen",related:"Asiaan liittyv",upNext:"Seuraava yls",up:"Yls",down:"Alas",left:"Vasen",right:"Oikea",default:"Nollaa",vr:"VR",off:"Off"},fccCaptions:{fontColor:"Fontin vri",fontOpacity:"Fontin lpinkyvyys",fontSize:"Fonttikoko",fontFamily:"Fonttiperhe",fontEdge:"Reuna",backgroundColor:"Taustavri",backgroundOpacity:"Taustan peittvyys",windowColor:"Ikkunan vri",windowOpacity:"Ikkunan peittvyys"},error:{customErrorMessage:"Tm sislt ei ole nyt kytettviss",noSupportMessage:"Sislt ei voi toistaa tll laitteeella",noSupportDownload:"Voit ladata videon napsauttamalla linkki",noSupportInstallChrome:"Jos kytt uusinta  Google Chrome -versiota, tmn sislln katsominen voi olla helpompaa.",noSupportInstallChromeLink:"https://www.google.com/intl/fi/chrome/"},ads:{controlBarCustomMessage:"Mainos",skipMessage:"Jt mainos vliin",skipWaitingMessage:"Jt mainos vliin",textForClickUIOnMobile:"Listietoja",adBlockerDetectedMessage:"Ad-blocker havaittu. Jotta voisit katsoa tt sislt,  Ad-blockerin toiminta on katkaistava."}},norwegian:{bitrates:{auto:"Automatisk",renditions:[["Lav kvalitet","Maksimal kvalitet"],["Lav kvalitet","Middels kvalitet","Maksimal kvalitet"],["Lav kvalitet","Middels kvalitet","Hy kvalitet","Maksimal kvalitet"],["Lav kvalitet","Middels kvalitet","Hy kvalitet","Hyere kvalitet","Maksimal kvalitet"]]},hint:{play:"Spill av",pause:"Pause",seek:"Hopp",enterFullscreen:"Fullskjerm",exitFullscreen:"Avslutt fullskjerm",quickRewind:"Rask tilbakespoling",quickForward:"Rask fremoverspoling",sharing:"Del",sharingLink:"Link til videoen",sharingEmbedCode:"Bygg inn videoen",quality:"Kvalitet",volume:"Volum",mute:"Kutt lyden",unmute:"Sl p lyden",minus:"Minus",plus:"Pluss",speed:"Hastighet",captions:"Teksting",transcript:"Transkripsjon",audio:"Lydsprk",chapters:"Kapitler",live:"Direkte",pip:"BIB",close:"Lukk",cast:"Google Cast",airplay:"AirPlay",playlist:"Spilleliste",next:"Neste",previous:"Forrige",related:"Relatert",upNext:"Neste",up:"Opp",down:"Ned",left:"Venstre",right:"Ikke sant",default:"Nullstille",vr:"VR",off:"Av"},fccCaptions:{fontColor:"Fontin vri",fontOpacity:"Fontin lpinkyvyys",fontSize:"Fonttikoko",fontFamily:"Fonttiperhe",fontEdge:"Reuna",backgroundColor:"Taustavri",backgroundOpacity:"Taustan peittvyys",windowColor:"Ikkunan vri",windowOpacity:"Ikkunan peittvyys"},error:{customErrorMessage:"Dette innholdet er for tiden ikke tilgjengelig",noSupportMessage:"Dette innholdet kan ikke spilles av p denne enheten",noSupportDownload:"Du kan laste ned videoen ved  klikke p linken",noSupportInstallChrome:"Bruk den nyeste versjonen av Google Chrome hvis du opplever problemer med  se dette innholdet.",noSupportInstallChromeLink:"https://www.google.com/intl/no/chrome/"},ads:{controlBarCustomMessage:"Annonse",skipMessage:"Hopp over annonsen",skipWaitingMessage:"Hopp over annonsen om",textForClickUIOnMobile:"Finn ut mer",adBlockerDetectedMessage:"Annonseblokkering oppdaget. For  se dette innholdet m du deaktivere annonseblokkeringen."}},indonesian:{bitrates:{auto:"Otomatis",renditions:[["Kualitas rendah","Kualitas maksimal"],["Kualitas rendah","Kualitas sedang","Kualitas maksimal"],["Kualitas rendah","Kualitas sedang","Kualitas tinggi","Kualitas maksimal"],["Kualitas rendah","Kualitas sedang","Kualitas tinggi","Kualitas lebih tinggi","Kualitas maksimal"]]},hint:{play:"Mainkan",pause:"Jeda",seek:"Cari",enterFullscreen:"Layar penuh",exitFullscreen:"Keluar layar penuh",quickRewind:"Mundur cepat",quickForward:"Maju cepat",sharing:"Bagikan",sharingLink:"Tautan ke video",sharingEmbedCode:"Tempel video",quality:"Kualitas",volume:"Volume",mute:"Bisukan",unmute:"Bersuara",minus:"Minus",plus:"Plus",speed:"Kecepatan",captions:"Keterangan",transcript:"Transkrip",audio:"Bahasa audio",chapters:"Bab",live:"Langsung",pip:"PiP",close:"Tutup",cast:"Google Cast",airplay:"AirPlay",playlist:"Playlist",next:"Selanjutnya",previous:"Sebelumnya",related:"Terkait",upNext:"Teruskan selanjutnya",up:"Naik",down:"Turun",left:"Kiri",right:"Baik",default:"Atur ulang",vr:"VR",off:"Off"},fccCaptions:{fontColor:"Warna huruf",fontOpacity:"Opasitas Font",fontSize:"Ukuran huruf",fontFamily:"Keluarga Font",fontEdge:"Tepi",backgroundColor:"Warna latar belakang",backgroundOpacity:"Opasitas Latar Belakang",windowColor:"Warna Jendela",windowOpacity:"Opasitas Jendela"},error:{customErrorMessage:"Saat ini konten tidak tersedia",noSupportMessage:"Konten ini tidak dapat dimainkan pada perangkat",noSupportDownload:"Anda mungkin mengunduh video dengan mengklik pada tautan itu",noSupportInstallChrome:"Menggunakaan versi terbaru dari Google Chrome dapat membantu melihat konten ini",noSupportInstallChromeLink:"https://www.google.com/intl/id/chrome/"},ads:{controlBarCustomMessage:"Iklan",skipMessage:"Lewati iklan",skipWaitingMessage:"Lewati iklan di",textForClickUIOnMobile:"Pelajari lebih lanjut",adBlockerDetectedMessage:"Pemblokir iklan terdeteksi Untuk melihat konten ini, harap menonaktifkan pemblokir iklan"}},hindi:{bitrates:{auto:"",renditions:[[" "," "],[" "," "," "],[" "," "," "," "],[" "," "," "," "," "]]},hint:{play:"",pause:"",seek:"",enterFullscreen:" ",exitFullscreen:"    ",quickRewind:"-",quickForward:"-",sharing:" ",sharingLink:"   ",sharingEmbedCode:"  ",quality:"",volume:"",mute:" ",unmute:" ",minus:"",plus:"",speed:"",captions:"",transcript:"",audio:" ",chapters:"",live:"",pip:"   (PiP)",close:" ",cast:"Google Cast",airplay:"AirPlay",playlist:"",next:"",previous:"",related:"",upNext:" ",up:"",down:"",left:"",right:"",default:"",vr:"VR",off:""},fccCaptions:{fontColor:"  ",fontOpacity:" ",fontSize:" ",fontFamily:" ",fontEdge:"",backgroundColor:"  ",backgroundOpacity:"  ",windowColor:"  ",windowOpacity:" "},error:{customErrorMessage:"    ",noSupportMessage:"        ",noSupportDownload:"          ",noSupportInstallChrome:"Google Chrome               ",noSupportInstallChromeLink:"https://www.google.com/intl/hi/chrome/"},ads:{controlBarCustomMessage:"",skipMessage:" ",skipWaitingMessage:"  ",textForClickUIOnMobile:" ",adBlockerDetectedMessage:"-             -   "}},hungarian:{bitrates:{auto:"Automatikus",renditions:[["Gyenge minsg","J minsg"],["Gyenge minsg","Kzepes minsg","J minsg"],["Gyenge minsg","Kzepes minsg","J minsg","Legjobb minsg"],["Gyenge minsg","Kzepes minsg","J minsg","Kivl minsg","Legjobb minsg"]]},hint:{play:"Lejtszs",pause:"Sznet",seek:"Keress",enterFullscreen:"Teljes kperny",exitFullscreen:"Kilps teljes kpernybl",quickRewind:"Gyors visszatekers",quickForward:"Gyors elretekers",sharing:"Megoszts",sharingLink:"Hivatkozs a videra",sharingEmbedCode:"Vide begyazsa",quality:"Minsg",volume:"Hanger",mute:"Nmts",unmute:"Nmts felolds",minus:"Mnusz",plus:"Plusz",speed:"Sebessg",captions:"Feliratok",transcript:"Msolat",audio:"Nyelvek",chapters:"Fejezetek",live:"l",pip:"PiP",close:"Bezrs",cast:"Google Cast",airplay:"AirPlay",playlist:"Lejtszsi lista",next:"Kvetkez",previous:"Elz",related:"Kapcsold tartalom",upNext:"Kvetkez",up:"Fel",down:"Le",left:"Balra",right:"Jobbra",default:"Alaprtelmezett",vr:"VR",off:"Kikapcsolva"},fccCaptions:{fontColor:"Bet szn",fontOpacity:"Bet tltszatlansga",fontSize:"Betmret",fontFamily:"Bettpus csald",fontEdge:"l",backgroundColor:"Httrszn",backgroundOpacity:"Httr tltszatlansga",windowColor:"Ablak szne",windowOpacity:"Ablak tltszatlansga"},error:{customErrorMessage:"A tartalom jelenleg nem elrhet",noSupportMessage:"A tartalom nem lejtszhat az eszkzn",noSupportDownload:"Vide letltse a linken keresztl",noSupportInstallChrome:"A tartalom megtekintshez ajnlott a legfrisebb Google Chrome hasznlata",noSupportInstallChromeLink:"https://www.google.com/intl/hu/chrome/"},ads:{controlBarCustomMessage:"Hirdets",skipMessage:"Hirdets tugrsa",skipWaitingMessage:"Hirdets tugrsa",textForClickUIOnMobile:"Bvebben",adBlockerDetectedMessage:"Ennek a tartalomnak a megtekintshe ki kell kapcsolni a hirdets blokkolt"}}};var s=i;a.default=s},{"@babel/runtime-corejs3/core-js-stable/object/define-property":98}],69:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.array-buffer.slice"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.match"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.to-locale-string"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/instance/index-of")),n=i(e("@babel/runtime-corejs3/core-js-stable/object/define-property")),o=i(e("@babel/runtime-corejs3/core-js-stable/instance/for-each")),l=i(e("@babel/runtime-corejs3/core-js-stable/parse-int")),d=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),c=i(e("./fw"));const u={};window.MediaSource=window.MediaSource||window.WebKitMediaSource;const h=window.navigator||null,p=document.createElement("video"),f=void 0!==p.canPlayType,m=document.createElement("audio"),g=void 0!==m.canPlayType,b=!!(void 0!==window.ontouchstart||window.DocumentTouch&&document instanceof window.DocumentTouch);u.hasTouchEvents=b;const v=h&&h.userAgent?h.userAgent:null,y=h&&h.platform?h.platform:null,k=window.location&&window.location.protocol?window.location.protocol.toLowerCase():null,w=function(e,t){if(null!==v){const a=v.match(e);if(t&&(0,d.default)(a)&&void 0!==a[2])return(0,l.default)(a[2],10);if((0,d.default)(a)&&void 0!==a[1])return(0,l.default)(a[1],10)}return-1},S=w(/os\s+(\d+)_(\d+)/i,!0),C=/(ipad|iphone|ipod)/i,j=/os\s+(\d+)/i,E=function(){let e=[!1,-1];return b&&C.test(v)&&(e=[!0,w(j,!1)]),e}(),L=!(!b||!/(iphone|ipod)/i.test(v)),A=/ipad/i,T=/(macintosh|mac\s+os)/i,P=/mac\s+os\s+x\s+(\d+)_(\d+)/i,M=function(){let e=!1,t=-1;return E[0]||T.test(v)&&(e=!0,t=w(P,!0)),[e,t]}(),I=/(windows\s+nt)/i,x=!!(y&&/(win32|win64|windows|wince)/i.test(y)||I.test(v)),R=/android/i,D=/android\s*(\d+)/i,O=function(){let e=[!1,-1];return E[0]||!b||R.test(v)&&(e=[!0,w(D,!1)]),e}(),F=/safari\/[.0-9]*/i,V=/version\/(\d+)/i,B=/(samsungbrowser\/|firefox\/|opr\/|edg\/|edge\/|fxios)/i,q=/(chrome|chromium|crios)/i,U=function(){let e=!1,t=-1;return!F.test(v)||q.test(v)||B.test(v)||O[0]||(e=!0,t=w(V,!1)),[e,t]}();let H=[!1,-1];M[0]&&U[0]&&(H=[!0,U[1]]);const N=!!/cros/i.test(v),_=/chrome\/[.0-9]*/i,W=/chrome\s*\/(\d+)/i,z=function(){let e=[!1,-1];return _.test(v)&&!B.test(v)&&(e=[!0,w(W,!1)]),e}(),J=/tizen/i,G=/smart-tv/i,K=!!(/version\/|samsungbrowser\//i.test(v)&&J.test(v)&&G.test(v)),Q=/AFT/i,Y=!(!/AmazonWebAppPlatform/i.test(v)||!Q.test(v)),X=function(){let e=1;return"number"==typeof window.devicePixelRatio&&window.devicePixelRatio>1&&(e=window.devicePixelRatio),e}(),$=!!(b&&!E[0]&&H[0]&&H[1]>12&&M[1]>14&&X>1);let Z=!1;(E[0]||O[0]||$)&&(Z=!0);const ee=!!(E[0]&&h&&void 0!==h.standalone&&h.standalone)||!(!O[0]||"function"!=typeof window.matchMedia||!window.matchMedia("(display-mode: standalone)").matches),te=/wv/,ae=/version\/[.0-9]*/i,ie=/(version\/|safari\/|crios|fxios)/i;u.isAndroidWebView=!(B.test(v)||!O[0]||ee||!(O[1]<5&&ae.test(v))&&!(O[1]>=5&&_.test(v)&&te.test(v))),u.isIosIpadOSWebView=!(!E[0]||ie.test(v)||ee);let se=!1;(u.isAndroidWebView||u.isIosIpadOSWebView)&&(se=!0),u.isWebView=se;const re=/samsungbrowser/i,ne=/samsungbrowser\/(\d+)/i,oe=function(){let e=[!1,-1];return O[0]&&re.test(v)&&(e=[!0,w(ne,!1)]),e}();u.isAndroidSamsungInternet=oe;u.hasMobilePreload=!!(oe[0]&&oe[1]>=9||E[0]&&E[1]>=13&&S>=2||O[0]&&z[0]&&z[1]>=64||$);const le=function(){if(f){if(""!==p.canPlayType('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'))return!0}return!1},de=le(),ce=/vp9|vp09\./i,ue=!(!f||void 0===window.MediaSource||"function"!=typeof window.MediaSource.isTypeSupported),he=void 0!==window.MediaKeys||void 0!==window.WebKitMediaKeys||void 0!==window.MSMediaKeys,pe=function(){let e=-1,t=-1;return c.default.isNumber(window.innerWidth)&&window.innerWidth>0&&c.default.isNumber(window.innerHeight)&&window.innerHeight>0&&(e=window.innerWidth,t=window.innerHeight),{width:e,height:t}};u.getViewportSize=pe,u.initialViewportSize=pe(),u.userAgent=v||"null",u.platform=y||"null",u.isInIframe=function(){try{if(window.parent!==window)return!0}catch(e){return c.default.trace(e),!1}return!1}(),u.okMp4=le(),u.testWebM=function(e){let t="vp8",a="vorbis";e&&e.video&&e.audio&&(ce.test(e.video)&&(t=e.video),"opus"===e.audio&&(a=e.audio));const i='video/webm; codecs="'+t+", "+a+'"';if(f){if(""!==p.canPlayType(i))return!0}return!1},u.okWebM=function(){if(f){if(""!==p.canPlayType('video/webm; codecs="vp8,vorbis"'))return!0}return!1}(),u.hasHevcSupport=!(E[0]||H[0]||$||!f||""===p.canPlayType('video/mp4; codecs="hvc1.1.6.L63.90,mp4a.40.29"')&&""===p.canPlayType('video/mp4; codecs="hev1.1.6.L63.90,mp4a.40.29"')),u.hasMseHevcSupport=!(!ue||!window.MediaSource.isTypeSupported('video/mp4; codecs="hvc1.1.6.L63.90,mp4a.40.29"')&&!window.MediaSource.isTypeSupported('video/mp4; codecs="hev1.1.6.L63.90,mp4a.40.29"')),u.okM4a=function(){let e=!1;if(g){""!==m.canPlayType('audio/mp4; codecs="mp4a.40.2"')&&(e=!0)}return e}(),u.okMp3=function(){let e=!1;if(g){""!==m.canPlayType("audio/mpeg")&&(e=!0)}return e}(),u.testOgg=function(e){let t="vorbis";if("opus"===e&&(t=e),g){const e='audio/ogg; codecs="'+t+'"';0;if(""!==m.canPlayType(e))return!0}return!1},u.okHls=function(){if(f&&de){const e=p.canPlayType("application/vnd.apple.mpegurl"),t=p.canPlayType("application/x-mpegurl");if(""!==e||""!==t)return!0}return!1}(),u.okHlsJS=!(!ue||!window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')),u.okHlsHevc=function(e,t,a,i){if(f){if(E[0]&&E[1]>10||$)return!0;if(H[0]&&H[1]>10&&a)return!0;if(a&&t||e&&(i||a))return!0}return!1}(u.okHls,u.okHlsJS,u.hasMseHevcSupport,u.hasHevcSupport),u.okDash=!(!ue||void 0===window.Promise||void 0===window.Uint8Array||void 0===(0,o.default)(Array.prototype)||H[0]&&H[1]<9),u.okFps=!!(f&&he&&(H[0]&&H[1]>=9||E[0]&&E[1]>10||$)),u.ok360=function(){let e=!1;try{const t=document.createElement("canvas"),a=t.getContext("webgl")||t.getContext("experimental-webgl")||t.getContext("webgl2");"function"==typeof window.requestAnimationFrame&&"function"==typeof window.cancelAnimationFrame&&a&&a instanceof window.WebGLRenderingContext&&(e=!0)}catch(t){e=!1,c.default.trace(t)}return e}(),u.hasIntersectionObserver=void 0!==window.IntersectionObserver,u.html5Video=f,u.html5Audio=g,u.getProtocol=k,u.isIos=E,u.isIpadOS=$,u.isMacOS=M,u.isWindows=x,u.isChromeOS=N,u.isChrome=z,u.canUseOfflinePersistentLicense=!!(z[0]&&z[1]>62&&(O[0]&&O[1]>5||N))||!(!(z[0]&&z[1]>64)||B.test(v)),u.isIphone=L,u.isIphoneIos10Plus=!1,u.isIphone&&u.isIos[0]&&u.isIos[1]>=10&&(u.isIphoneIos10Plus=!0),u.isIosIpad=!!(b&&A.test(v)&&E[0]&&E[1]<13),u.isMacosSafari=H,u.isSamsungSmartTV=K,u.isFireTV=Y,u.isAndroid=O,u.isMobile=Z,u.isStandalone=ee,u.okMse=ue,u.okEme=he,u.devicePixelRatio=X,u.iosIpadOSHasCustomFullscreen=!1,(u.isIosIpad&&u.isIos[1]>=12&&S>=2||u.isIpadOS)&&(u.iosIpadOSHasCustomFullscreen=!0);u.hasPassiveEventListeners=function(){let e=!1;try{const t=(0,n.default)({},"passive",{get:function(){return e=!0,e}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(t){c.default.trace(t)}return e}();u.hasScreenOrientationAPI=void 0!==window.screen.orientation&&"string"==typeof window.screen.orientation.type&&"function"==typeof window.screen.orientation.addEventListener&&"function"==typeof window.screen.orientation.removeEventListener;u.hasOlderScreenOrientationAPI=void 0!==window.onorientationchange&&"number"==typeof window.orientation,u.getOrientation=function(){if(u.hasScreenOrientationAPI){const e=window.screen.orientation.type;if("landscape-primary"===e||"landscape-secondary"===e)return"landscape";if("portrait-secondary"===e||"portrait-primary"===e)return"portrait"}else if(u.hasOlderScreenOrientationAPI)return 0===window.orientation||180===window.orientation?"portrait":"landscape";return null},u.initialOrientation=u.getOrientation();u.getScreenDimension=function(){let e={width:-1,height:-1},t=window.screen&&"number"==typeof window.screen.width&&window.screen.width>0?window.screen.width:-1,a=window.screen&&"number"==typeof window.screen.height&&window.screen.height>0?window.screen.height:-1;const i=u.getOrientation();return null!==i?"landscape"===i?(e.width=Math.max(t,a),e.height=Math.min(t,a)):(e.width=Math.min(t,a),e.height=Math.max(t,a)):(e.width=t,e.height=a),e},u.screenDimension=u.getScreenDimension();u.fallbackArbitraryBWEstimate=function(){let e=7e5;if(Z)e=35e4,X>=3&&(e=525e3);else{const t=u.getScreenDimension();Math.max(t.width,t.height)>=3840&&(e=14e5)}return e}(),u.localStorage=function(e){if(!e)return!1;try{if(window.localStorage){const e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}return!1}catch(t){return c.default.trace(t),!1}},u.formData=function(){if(void 0!==window.FormData)try{return(new FormData).append("test","test"),!0}catch(e){return!1}return!1},u.isOnline=function(){return!h||"boolean"!=typeof h.onLine||!1!==h.onLine};u.hasNativeFullscreenSupport=function(){const e=document.documentElement;return!(!e||void 0===e.requestFullscreen&&void 0===e.webkitRequestFullscreen&&void 0===e.mozRequestFullScreen&&void 0===e.msRequestFullscreen&&void 0===p.webkitEnterFullscreen)}(),u.requestFullscreen=function(e,t){if(e&&t)try{void 0!==e.requestFullscreen?e.requestFullscreen().catch(e=>{0}):void 0!==e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):void 0!==e.mozRequestFullScreen?e.mozRequestFullScreen():void 0!==e.msRequestFullscreen?e.msRequestFullscreen():t&&void 0!==t.webkitEnterFullscreen&&t.webkitEnterFullscreen()}catch(a){c.default.trace(a)}},u.exitFullscreen=function(e){try{void 0!==document.exitFullscreen?document.exitFullscreen().catch(e=>{0}):void 0!==document.webkitExitFullscreen?document.webkitExitFullscreen():void 0!==document.mozCancelFullScreen?document.mozCancelFullScreen():void 0!==document.msExitFullscreen?document.msExitFullscreen():e&&void 0!==e.webkitExitFullscreen&&e.webkitExitFullscreen()}catch(t){c.default.trace(t)}},u.canPlayType=function(e,t,a,i,s,n){const o=["video","audio"],l=["mp4","webm","mp3","m4a","mp2t","ogg","oga"],d=["native","mse"];let c="video";(0,r.default)(o).call(o,t)>-1&&(c=t);let u,h,b,v="mp4";(0,r.default)(l).call(l,a)>-1&&(v=a),"string"==typeof s&&""!==s&&(u=s),"string"==typeof i&&""!==i&&(h=i),"string"==typeof n&&""!==n&&(b=n);let y,k="native";switch((0,r.default)(d).call(d,e)>-1&&(k=e),c){case"video":if(!f)return!1;y=p;break;case"audio":if(!g)return!1;y=m}let w=c+"/"+v;if("video"===c&&h&&u)w+='; codecs="'+h+", "+u+'"';else if("video"===c&&h&&!u)w+='; codecs="'+h+'"';else{if("audio"!==c||!u)return null;w+='; codecs="'+u+'"'}b&&(w+='; eotf="'+b+'"');let S=!1;if("native"===k){0;""!==y.canPlayType(w)&&(S=!0)}else ue&&window.MediaSource.isTypeSupported(w)&&(S=!0);return S},u.polyfillNavigatorLanguages=function(){h&&!h.languages&&(0,n.default)(window.navigator,"languages",{get:()=>window.navigator.language?[window.navigator.language]:["en"]})};var fe=u;a.default=fe},{"./fw":70,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/instance/for-each":85,"@babel/runtime-corejs3/core-js-stable/instance/index-of":87,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/parse-int":101,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.array-buffer.slice":431,"core-js/modules/es.promise":433,"core-js/modules/es.string.match":437,"core-js/modules/es.typed-array.to-locale-string":441,"core-js/modules/es.typed-array.uint8-array":443}],70:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/instance/includes")),n=i(e("@babel/runtime-corejs3/core-js-stable/json/stringify")),o=i(e("@babel/runtime-corejs3/core-js-stable/date/now")),l=i(e("@babel/runtime-corejs3/core-js-stable/promise")),d=i(e("@babel/runtime-corejs3/core-js-stable/parse-int")),c=i(e("@babel/runtime-corejs3/core-js-stable/set-timeout")),u=i(e("@babel/runtime-corejs3/core-js-stable/instance/for-each")),h=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),p=i(e("@babel/runtime-corejs3/core-js-stable/parse-float")),f=i(e("@babel/runtime-corejs3/core-js-stable/instance/index-of")),m=i(e("@babel/runtime-corejs3/core-js-stable/object/keys")),g=i(e("@babel/runtime-corejs3/core-js-stable/number/is-finite"));const b={blackFrame:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII=",nullFn:function(){return null}},v=function(e){return document[e]?document[e]:null!==document.querySelector(e)?document.querySelector(e):null},y=function(){if("number"==typeof window.pageXOffset)return window.pageXOffset;if(document.documentElement&&"number"==typeof document.documentElement.scrollLeft&&document.documentElement.scrollLeft>0)return document.documentElement.scrollLeft;{const e=v("body");if(e&&"number"==typeof e.scrollLeft&&e.scrollLeft>0)return e.scrollLeft}return 0},k=function(){if("number"==typeof window.pageYOffset)return window.pageYOffset;if(document.documentElement&&"number"==typeof document.documentElement.scrollTop&&document.documentElement.scrollTop>0)return document.documentElement.scrollTop;{const e=v("body");if(e&&"number"==typeof e.scrollTop&&e.scrollTop>0)return e.scrollTop}return 0};b.getPosX=function(e){if(e){if("number"==typeof e.pageX)return e.pageX;if("number"==typeof e.clientX)return e.clientX+y()}return 0},b.getPosXTouch=function(e){return e&&e.changedTouches&&e.changedTouches[0]&&b.isNumber(e.changedTouches[0].pageX)?e.changedTouches[0].pageX:0},b.getPosY=function(e){if(e){if("number"==typeof e.pageY)return e.pageY;if("number"==typeof e.clientY)return e.clientY+k()}return 0},b.getPosYTouch=function(e){return e&&e.changedTouches&&e.changedTouches[0]&&b.isNumber(e.changedTouches[0].pageY)?e.changedTouches[0].pageY:0},b.isNumber=function(e){return!("number"!=typeof e||!(0,g.default)(e))},b.setStyle=function(e,t){if(e&&b.isObject(t)){const a=(0,m.default)(t);for(let i=0,s=a.length;i<s;i++){const s=a[i];e.style[s]=t[s]}}};const w=function(e,t){let a=function(e,t){let a="";if(e&&"function"==typeof window.getComputedStyle){const i=window.getComputedStyle(e,null);i&&(a=i.getPropertyValue(t),a=a.toString().toLowerCase())}return a}(e,t)||0;return a=a.toString(),(0,f.default)(a).call(a,"px")>-1&&(a=a.replace("px","")),(0,p.default)(a)};b.getWidth=function(e){return e?"number"==typeof e.offsetWidth&&0!==e.offsetWidth?e.offsetWidth:w(e,"width"):0},b.getTrueWidth=function(e){let t=0;if(e&&(t=b.getWidth(e),t>0)){let a=0;const i=w(e,"padding-left");i>0&&(a+=i);const s=w(e,"padding-right");s>0&&(a+=s);const r=w(e,"border-left-width");r>0&&(a+=r);const n=w(e,"border-right-width");n>0&&(a+=n),t-=a}return t},b.getHeight=function(e){return e?"number"==typeof e.offsetHeight&&0!==e.offsetHeight?e.offsetHeight:w(e,"height"):0},b.getTrueHeight=function(e){let t=0;if(e&&(t=b.getHeight(e),t>0)){let a=0;const i=w(e,"padding-top");i>0&&(a+=i);const s=w(e,"padding-bottom");s>0&&(a+=s);const r=w(e,"border-top-width");r>0&&(a+=r);const n=w(e,"border-bottom-width");n>0&&(a+=n),t-=a}return t},b.getAbsLeft=function(e){if(e){return e.getBoundingClientRect().left+y()||0}return 0},b.getAbsTop=function(e){if(e){return e.getBoundingClientRect().top+k()||0}return 0},b.addClass=function(e,t){var a;e&&void 0!==e.className&&"string"==typeof t&&""!==t&&(""!==e.className?-1===(0,f.default)(a=e.className).call(a,t)&&(e.className=(e.className+" "+t).replace(/\s\s+/g," ")):e.className=t)},b.removeClass=function(e,t){var a;e&&void 0!==e.className&&"string"==typeof t&&""!==t&&((0,f.default)(a=e.className).call(a,t)>-1&&(e.className=e.className.replace(t,"").replace(/\s\s+/g," ")))},b.hasClass=function(e,t){var a;if(e&&"string"==typeof e.className&&"string"==typeof t&&""!==t&&(0,f.default)(a=e.className).call(a,t)>-1)return!0;return!1},b.setText=function(e,t){void 0!==e&&"string"==typeof t&&(e.textContent=t)},b.removeElement=function(e){if(e&&e.parentNode)try{e.parentNode.removeChild(e)}catch(t){b.trace(t)}};b.createStdEvent=function(e,t,a){let i;if(t)if("function"==typeof window.Event)try{0,i=new Event(e),t.dispatchEvent(i)}catch(s){b.trace(s)}else try{0,i=document.createEvent("Event"),i.initEvent(e,!0,!0),t.dispatchEvent(i)}catch(s){b.trace(s)}},b.removeEvent=function(e,t,a){"function"==typeof a&&t&&((0,h.default)(e)?(0,u.default)(e).call(e,e=>{t.removeEventListener(e,a)}):t.removeEventListener(e,a))},b.addEvent=function(e,t,a){"function"==typeof a&&t&&((0,h.default)(e)?(0,u.default)(e).call(e,e=>{t.addEventListener(e,a)}):t.addEventListener(e,a))},b.appendToHead=function(e){try{let t=v("head");t||(t=v("body")),t&&e&&t.appendChild(e)}catch(t){b.trace(t)}},b.isVisible=function(e){return!(!e||"visible"!==e.style.visibility)},b.show=function(e,t){let a="block";if(t&&(a=t),(0,h.default)(e))for(let i=0,s=e.length;i<s;i++)e[i]&&(e[i].style.display=a);else e&&(e.style.display=a)},b.fadeIn=function(e){e&&(1===e.style.opacity&&"visible"===e.style.visibility||(0,c.default)(()=>{b.setStyle(e,{opacity:1,visibility:"visible"})},0))},b.hide=function(e){if((0,h.default)(e))for(let t=0,a=e.length;t<a;t++)e[t]&&(e[t].style.display="none");else e&&(e.style.display="none")},b.fadeOut=function(e){e&&(0===e.style.opacity&&"hidden"===e.style.visibility||(0,c.default)(()=>{b.setStyle(e,{opacity:0,visibility:"hidden"})},0))},b.readableTime=function(e){if("number"==typeof e&&e>=0){let t=Math.floor(e%60),a=Math.floor(1*e/60),i=0;return a>59&&(i=Math.floor(1*e/3600),a=Math.floor(1*e/3600%1*60),t=Math.floor(e%60)),t<10&&(t="0"+t),a<10&&(a="0"+a),i>0?i+=":":0===i&&(i=""),i+a+":"+t}return""},b.dateToSeconds=function(e){const t=e.match(/(\d+:)?(\d+):(\d\d?)\.?(\d+)?/);if(!(t.length>1))return null;t.shift();let a=0;if(t[0]){let e=t[0];(0,f.default)(e).call(e,":")>-1&&(e=e.replace(":","")),a+=60*(0,d.default)(e)*60}return t[1]&&(a+=60*(0,d.default)(t[1])),t[2]&&(a+=(0,d.default)(t[2])),t[3]&&(a+=(0,d.default)(t[3])/1e3),a},b.srcExists=function(e,t){if("mp4"===t||"webm"===t||"mp4Hevc"===t){if((0,h.default)(e)&&"string"==typeof e[0]&&""!==e[0])return!0}else if("string"==typeof e&&""!==e)return!0;return!1},b.filterInitialBitrate=function(e,t){return e<0||"string"!=typeof t[e]?0:e},b.isObject=function(e){return null!=e&&"object"==typeof e},b.isEmptyObject=function(e){return!(!b.isObject(e)||0!==(0,m.default)(e).length)},b.ajax=function(e,t,a,i){return new l.default((s,r)=>{if("undefined"!=typeof XMLHttpRequest){const n=new XMLHttpRequest;n.open(i,e,!0),n.timeout=t,a&&(n.withCredentials=!0),n.onloadend=function(){"number"==typeof n.status&&n.status>=200&&n.status<300?"HEAD"===i?s():"string"==typeof n.responseText&&""!==n.responseText?s(n.responseText):r():r()},n.ontimeout=function(){r()},n.send(null)}else r()})},b.getNow=function(){return window.performance&&window.performance.now?Math.round(window.performance.now()):window.Date?(0,o.default)():void 0},b.getRandomInt=function(e,t){const a=Math.ceil(e),i=Math.floor(t);return Math.floor(Math.random()*(i-a))+a},b.cssPropertySupport=function(e){let t=!1,a=document.createElement("div");try{a&&"string"==typeof e&&void 0!==a.style[e]&&(t=!0)}catch(i){b.trace(i)}return a=null,t},b.stopPropagation=function(e){e&&e.stopPropagation()},b.contextMenuInteraction=function(e){e&&(e.stopPropagation(),e.preventDefault())},b.updateAriaLabel=function(e,t){t&&e&&e.setAttribute("aria-label",t)};let S=!1,C=!1,j=!1;void 0!==window.console&&("function"==typeof window.console.log&&(S=!0),"function"==typeof window.console.dir&&(C=!0),"function"==typeof window.console.trace&&(j=!0));const E="color: white; background-color: #3949AB; padding:1px 3px; border-radius: 3px; margin-right: 7px; text-transform: uppercase;";b.log=function(e,t,a){S&&void 0!==t&&("string"==typeof t&&e?"warning"===e?window.console.log("%crmp%c"+e+"%c"+t,E,"color: white; background-color: #FF6D00; padding:1px 3px; border-radius: 3px; margin-right: 7px; text-transform: uppercase;",""):"error"===e?window.console.log("%crmp%c"+e+"%c"+t,E,"color: white; background-color: #D50000; padding:1px 3px; border-radius: 3px; margin-right: 7px; text-transform: uppercase;",""):window.console.log("%crmp%c"+e+"%c"+t,E,"color: white; background-color: #0091EA; padding:1px 3px; border-radius: 3px; margin-right: 7px; text-transform: uppercase;",""):"object"==typeof t&&C&&!a?window.console.dir(t):"object"==typeof t&&a?window.console.log(JSON.parse((0,n.default)(t))):window.console.log(t))},b.trace=function(e){0},b.appendStyle=function(e){if(e){const t=document.createElement("style");t.type="text/css",t.appendChild(document.createTextNode(e)),b.appendToHead(t)}},b.filterTextTracks=function(e){const t=[];if(!e||e.length<1)return t;const a=/(captions|subtitles|subtitle)/i;for(let r=0,n=e.length;r<n;r++){const i=e[r];("string"==typeof i.kind&&a.test(i.kind)||"string"==typeof i.type&&a.test(i.type))&&t.push(i)}const i=[],s=[];for(let n=0,o=t.length;n<o;n++){const e=t[n],a=e.language||e.lang||"";if(a)if(0===i.length)i.push(a),s.push(e);else{if((0,r.default)(i).call(i,a))continue;i.push(a),s.push(e)}else s.push(e)}return s},b.isValidTextTracksSet=function(e){return!!((0,h.default)(e)&&(0,h.default)(e[0])&&e[0][0]&&e[0][1]&&e[0][2])},b.clearTimeout=function(e){e&&clearTimeout(e)},b.clearInterval=function(e){e&&clearInterval(e)},b.addEventListenerCSS=function(){let e=document.createElement("link"),t=!1;return e.addEventListener&&(t=!0),e=null,t},b.getScript=function(e,t,a){if("string"==typeof e&&"function"==typeof t&&"function"==typeof a){const i=document.createElement("script");void 0!==i.onload&&void 0!==i.onerror&&(void 0!==i.async&&(i.async=!0),i.onload=t,i.onerror=a),i.src=e,b.appendToHead(i)}},b.setMediaCurrentTime=function(e,t){if(e&&b.isNumber(t)&&t>=0)try{e.currentTime=t}catch(a){b.trace(a)}},b.getMediaCurrentTime=function(e){return e&&void 0!==e.currentTime&&b.isNumber(e.currentTime)&&e.currentTime>=0?e.currentTime:-1},b.getMediaDuration=function(e){return e&&void 0!==e.duration&&b.isNumber(e.duration)&&e.duration>=0?e.duration:-1},b.clearNativeHtml5Buffer=function(e){try{e&&(e.removeAttribute("src"),e.load())}catch(t){b.trace(t)}},b.createElement=function(e,t,a,i){let s=null;return"string"==typeof e&&""!==e&&(s=document.createElement(e),"string"==typeof t&&""!==t?(i&&s.setAttribute("dir","rtl"),s.className=t):null===t&&i&&s.setAttribute("dir","rtl"),"string"==typeof a&&(s.textContent=a)),s},b.precisionRound=function(e,t){const a=Math.pow(10,t);return Math.round(e*a)/a},b.stopPrevent=function(e){e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault())},b.checkInView=function(e,t){let a=e.scrollTop,i=a+e.clientHeight,s=t.offsetTop+60,r=s+t.clientHeight;return s>=a&&r<=i},b.getClientWidth=function(e){if(void 0!==e&&"number"==typeof e.clientWidth&&e.clientWidth>0)return e.clientWidth};var L=b;a.default=L},{"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/date/now":80,"@babel/runtime-corejs3/core-js-stable/instance/for-each":85,"@babel/runtime-corejs3/core-js-stable/instance/includes":86,"@babel/runtime-corejs3/core-js-stable/instance/index-of":87,"@babel/runtime-corejs3/core-js-stable/json/stringify":94,"@babel/runtime-corejs3/core-js-stable/number/is-finite":95,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/object/keys":99,"@babel/runtime-corejs3/core-js-stable/parse-float":100,"@babel/runtime-corejs3/core-js-stable/parse-int":101,"@babel/runtime-corejs3/core-js-stable/promise":102,"@babel/runtime-corejs3/core-js-stable/set-timeout":104,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.regexp.to-string":435,"core-js/modules/es.string.match":437,"core-js/modules/es.string.replace":438}],71:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.iterator");var s=i(e("@babel/runtime-corejs3/core-js-stable/set-timeout")),r=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),n=i(e("@babel/runtime-corejs3/core-js-stable/object/keys")),o=i(e("@babel/runtime-corejs3/core-js-stable/instance/index-of")),l=i(e("@babel/runtime-corejs3/core-js-stable/instance/for-each")),d=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),c=i(e("./fw/env")),u=i(e("./fw/fw")),h=i(e("./analytics/analytics")),p=i(e("./analytics/mux")),f=i(e("./core/utils/license")),m=i(e("./360/360")),g=i(e("./vr/vr")),b=i(e("./playlist/related")),v=i(e("./playlist/playlist")),y=i(e("./core/accessible/accessible")),k=i(e("./core/run-player/runPlayer")),w=i(e("./core/resize/resize")),S=i(e("./fw/defaults/inner-defaults")),C=i(e("./core/utils/utils")),j=i(e("./core/utils/viewable")),E=i(e("./core/ui/logo")),L=i(e("./analytics/logs")),A=i(e("./core/ui/colors")),T=i(e("./ads/ads-helpers")),P=i(e("./cast/cast")),M=i(e("./cast/cordova-cast")),I=i(e("./core/modules/fcc")),x=i(e("./vtt/transcripts")),R=i(e("./api/api")),D=i(e("./api/ads")),O=i(e("./api/playlist")),F=i(e("./api/related")),V=i(e("./api/bitrates")),B=i(e("./api/src")),q=i(e("./api/audio")),U=i(e("./api/destroy")),H=i(e("./api/offline")),N=i(e("./api/analytics")),_=i(e("./api/metadata")),W=i(e("./fw/autoplay")),z=i(e("./fw/defaults/language-defaults")),J=i(e("./core/utils/metadata")),G=i(e("./core/utils/error"));(()=>{var e;if("undefined"==typeof window||void 0===window.document)return void(0,d.default)(e=G.default.fatal).call(e,void 0,"cannot render Radiant Media Player - missing window or document object",103,null);if(void 0!==window.RadiantMP)return void G.default.warning.call(void 0,"RadiantMP constructor already exists - no need to load rmp.min.js twice",1013,null);u.default.isObject(window.rmpGlobals)||(window.rmpGlobals={},window.rmpGlobals.castApiInitialized=!1,window.rmpGlobals.adBlockerDetected=null),window.RadiantMP=function(e){var t;"string"==typeof e&&""!==e?(this.id=e,this.dom={},this.dom.container=document.getElementById(this.id),S.default.set.call(this)):(0,d.default)(t=G.default.fatal).call(t,this,"id parameter for new RadiantMP is not a string or is an empty string - exit",105,null)},R.default.attach(window.RadiantMP),D.default.attach(window.RadiantMP),O.default.attach(window.RadiantMP),F.default.attach(window.RadiantMP),V.default.attach(window.RadiantMP),B.default.attach(window.RadiantMP),q.default.attach(window.RadiantMP),U.default.attach(window.RadiantMP),H.default.attach(window.RadiantMP),N.default.attach(window.RadiantMP),_.default.attach(window.RadiantMP);const t=function(e){if(e&&e.type){const t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();u.default.createStdEvent(t,document)}};document.addEventListener("webkitfullscreenchange",t),document.addEventListener("webkitfullscreenerror",t),document.addEventListener("mozfullscreenchange",t),document.addEventListener("mozfullscreenerror",t),document.addEventListener("MSFullscreenChange",t),document.addEventListener("MSFullscreenError",t);const a=function(){if(this.licenseFailedDestroyRequested){var e;(0,d.default)(e=G.default.fatal).call(e,this,"could not launch player - destroy has been requested in the meantime due to invalid license",104,null)}else{if(this.hasRelated)return this.relatedAudioOnly&&u.default.addClass(this.dom.container,"rmp-related-audio-only"),void b.default.init.call(this);if(this.hasPlaylist)return this.playlistAudioOnly&&u.default.addClass(this.dom.container,"rmp-playlist-audio-only"),void v.default.init.call(this);h.default.init.call(this),L.default.init.call(this),k.default.init.call(this)}},i=function(){if(w.default.initialSizing.call(this),this.audioOnly?this.dom.video=document.createElement("audio"):this.dom.video=document.createElement("video"),u.default.cssPropertySupport("objectFit")&&!this.audioOnly)switch(this.scaleMode){case"letterbox":u.default.addClass(this.dom.video,"rmp-object-fit-contain");break;case"zoom":u.default.addClass(this.dom.video,"rmp-object-fit-cover");break;case"stretch":u.default.addClass(this.dom.video,"rmp-object-fit-fill");break;case"none":u.default.addClass(this.dom.video,"rmp-object-fit-none");break;default:u.default.addClass(this.dom.video,"rmp-object-fit-contain")}if(A.default.apply.call(this),u.default.addClass(this.dom.video,"rmp-video"),"auto"!==this.preload&&"metadata"!==this.preload&&(this.preload="none"),c.default.isMobile&&(c.default.hasMobilePreload&&!this.ads||(this.preload="none"),this.audioOnly||this.permanentMuted?this.volumeModuleUI=!1:this.volumeModuleUI=!0,u.default.addClass(this.dom.container,"rmp-mobile")),this.detectViewerLanguage){c.default.polyfillNavigatorLanguages();const t=window.navigator.languages[0],a=["arabic","chinese","danish","dutch","english","french","finnish","german","hebrew","hindi","hungarian","indonesian","italian","japanese","korean","norwegian","polish","portuguese","portugueseBrazilian","russian","spanish","swedish","taiwanese","thai","turkish","vietnamese"],i=/(hebrew|arabic)/i;(0,l.default)(a).call(a,e=>{u.default.isEmptyObject(this.labels[e])&&(this.labels[e]=z.default[e])});for(let s=0,r=a.length;s<r;s++){var e;if((0,o.default)(e=z.default.codes[a[s]]).call(e,t)>-1){this.validatedLanguage=a[s],i.test(this.validatedLanguage)&&(this.rtl=!0);break}}this.labels=z.default[this.validatedLanguage]}else if(u.default.isEmptyObject(this.labels))this.labels=z.default[this.validatedLanguage];else{let e=(0,n.default)(z.default.english);for(let t=0,a=e.length;t<a;t++){let a=(0,n.default)(z.default.english[e[t]]);if(this.labels[e[t]])for(let i=0,s=a.length;i<s;i++)typeof this.labels[e[t]][a[i]]==typeof z.default.english[e[t]][a[i]]&&(z.default.english[e[t]][a[i]]=this.labels[e[t]][a[i]])}this.labels=z.default.english}if(this.ads)if(""!==this.chaptersLoc&&(this.adShowMarkers=!1),"rmp-vast"!==this.adParser&&(this.adParser="ima"),this.adSkipButton&&"ima"===this.adParser&&(this.adSkipButton=!1),c.default.isIos[0]&&this.loop&&(this.loop=!1),this.adImaDai)this.adParser="ima",this.hlsEngine="hlsjs",this.adImaDaiLiveAssetKey?this.imaDaiLive=!0:this.adImaDaiVodContentSourceId&&this.adImaDaiVodVideoId?this.imaDaiVod=!0:this.ads=!1,c.default.isIos[0]&&(this.ads=!1,this.adImaDaiBackupStream?this.src={hls:this.adImaDaiBackupStream}:this.src={});else{if(this.adOutStream&&(this.googleCast=!1,this.src={},this.adSchedule={},this.airplay=!1),!u.default.isEmptyObject(this.adSchedule)){if((0,r.default)(this.adSchedule.midrollRepeat)&&"number"==typeof this.adSchedule.midrollRepeat[0]&&"string"==typeof this.adSchedule.midrollRepeat[1]){this.adSchedule.midroll=[];for(let e=0,t=50;e<t;e++)this.adSchedule.midroll[e]=[this.adSchedule.midrollRepeat[0]*(e+1),this.adSchedule.midrollRepeat[1]];delete this.adSchedule.midrollRepeat}(0,r.default)(this.adSchedule.preroll)&&(this.adSchedule.preroll=this.adSchedule.preroll[0]),(0,r.default)(this.adSchedule.postroll)&&(this.adSchedule.postroll=this.adSchedule.postroll[0]),(0,r.default)(this.adSchedule.midroll)&&(0,r.default)(this.adSchedule.midroll[0])&&2===this.adSchedule.midroll[0].length&&(this.scheduledMidRolls=!0),(this.adSchedule.preroll||this.adSchedule.postroll||this.scheduledMidRolls)&&(this.adScheduleInput=!0,this.adTagUrl="",this.adTagWaterfall=[],this.adSchedule.postroll&&this.loop&&delete this.adSchedule.postroll,this.adSchedule.preroll||(this.emptyInitAdTagUrl=!0,this.adSchedule.preroll=""),this.adSchedule.postroll||(this.adSchedule.postroll=""))}""!==this.adTagUrl||""===this.adsResponse||this.adScheduleInput||this.hasRelated||this.hasPlaylist||(this.adTagUrl=this.adsResponse),(this.isVod||this.adOutStream)&&this.adTagReloadOnEnded&&(this.originalAdTagUrl=this.adTagUrl,this.originalAdTagWaterfall=[...this.adTagWaterfall],this.adScheduleInput&&(this.originalAdSchedule={},this.originalAdSchedule.preroll=this.adSchedule.preroll,this.originalAdSchedule.midroll=[...this.adSchedule.midroll],this.originalAdSchedule.postroll=this.adSchedule.postroll),this.adOutStream||T.default.onEndedReloadAdTag.call(this)),this.hasRelated||this.hasPlaylist||this.adScheduleInput||""!==this.adTagUrl||(this.emptyInitAdTagUrl=!0)}c.default.hasIntersectionObserver&&this.viewableAutoplay&&((c.default.isMobile||c.default.isMacosSafari[0])&&(this.muted=!0),j.default.set.call(this)),this.isLiveDvr&&(this.isVod=!1,this.detectLive=!1,u.default.addClass(this.dom.container,"rmp-live-dvr")),this.dom.ccItems=[],u.default.isValidTextTracksSet(this.ccFiles)&&(this.hasExternalCCFiles=!0,c.default.isIos[0]&&(this.fullscreenFullWindowMode=!0)),I.default.filterInputSettings.call(this),this.audioOnly?(u.default.addClass(this.dom.container,"rmp-audio-only"),c.default.isIos[0]&&u.default.addClass(this.dom.container,"rmp-audio-only-ios"),this.labels.error.noSupportDownload="",this.labels.error.noSupportInstallChrome="",this.sharing=!1,this.contentMetadata.title="",this.seekBarThumbnailsLoc="",this.speed=!1,this.ads&&(this.adParser="ima"),C.default.detectAudioSrc.call(this)):this.hasRelated||this.hasPlaylist||this.adOutStream||(this.audioOnlyUseVideoLayout?C.default.detectAudioSrc.call(this):C.default.detectSrc.call(this)),this.sharing&&""===this.sharingUrl&&(this.sharingUrl=document.URL),c.default.isIos[0]&&c.default.isIos[1]<10&&this.loop&&(this.loop=!1),E.default.init.call(this),this.videoVR&&(u.default.addClass(this.dom.container,"rmp-vr-ui"),this.crossorigin="anonymous",this.hlsJSCapLevelToPlayerSize=!1,this.shakaCapLevelToPlayerSize=!1,g.default.load.call(this));const t=function(){this.hasMp4=!1,this.hasMp4Hevc=!1,this.hasWebM=!1,this.hasHls=!1,this.hasHlsHevc=!1,this.hasDash=!1,this.hasFps=!1,this.hasM4a=!1,this.hasMp3=!1,this.okOgg=!1};this.video360&&(c.default.ok360?(u.default.addClass(this.dom.container,"rmp-360-ui"),c.default.isIos[0]?(this.ads&&"rmp-vast"===this.adParser&&(this.ads=!1),c.default.iosIpadOSHasCustomFullscreen||(this.fullscreenFullWindowMode=!0)):(c.default.isMacosSafari[0]||c.default.isIpadOS)&&this.ads&&"rmp-vast"===this.adParser&&(this.ads=!1),this.pip=!1,this.googleCast=!1,this.airplay=!1,this.hlsJSCapLevelToPlayerSize=!1,this.shakaCapLevelToPlayerSize=!1,this.crossorigin="anonymous",m.default.load.call(this)):u.default.isEmptyObject(this.video360FallbackSrc)?(t.call(this),this.video360=!1):(this.src=this.video360FallbackSrc,this.video360=!1,t.call(this),C.default.detectSrc.call(this))),this.hasNativeFullscreenSupport=c.default.hasNativeFullscreenSupport,this.ads&&"ima"===this.adParser&&c.default.isIphoneIos10Plus&&(this.fullscreenFullWindowMode=!0,this.adDisableCustomPlaybackForIOS10Plus=!0),c.default.isInIframe&&(this.fullscreenFullWindowMode=!1,this.adDisableCustomPlaybackForIOS10Plus=!1),this.fullscreenFullWindowMode&&(this.hasNativeFullscreenSupport=!1),J.default.init.call(this),this.hideBlackFrameWhenNoPosterForLiveStream||(this.hideInitialBlackFrameWhenNoPoster=!1),y.default.init.call(this),a.call(this)},K=function(e){u.default.clearTimeout(this.cssLinkTimeout),this.cssLoaded||(this.cssLoaded=!0,u.default.addEventListenerCSS&&(this.cssLink.removeEventListener("load",this.onLoadedCSS),this.cssLink.removeEventListener("error",this.onLoadedCSS)),this.initConfig())},Q=function(){if(this.initConfig=(0,d.default)(i).call(i,this),null===document.getElementById("rmp-dress-code")){0;let e=this.pathToRmpFiles+"css/rmp-"+this.skin+".min.css";0,this.cssLink=document.createElement("link"),this.cssLink.id="rmp-dress-code",this.cssLink.type="text/css",this.cssLink.rel="stylesheet",this.cssLink.href=e,u.default.addEventListenerCSS?(this.onLoadedCSS=(0,d.default)(K).call(K,this),this.cssLink.addEventListener("load",this.onLoadedCSS),this.cssLink.addEventListener("error",this.onLoadedCSS),u.default.clearTimeout(this.cssLinkTimeout),this.cssLinkTimeout=(0,s.default)(this.onLoadedCSS,2500),u.default.appendToHead(this.cssLink)):(u.default.appendToHead(this.cssLink),this.initConfig())}else this.initConfig()},Y=function(){(""!==this.relatedLoc||(0,r.default)(this.relatedData)&&u.default.isObject(this.relatedData[0]))&&(this.hasRelated=!0,""!==this.relatedLoc&&(0,r.default)(this.relatedData)&&u.default.isObject(this.relatedData[0])&&(this.relatedLoc=""),this.quickRewind=0,this.quickForward=0,this.srcChangeAutoplay||(this.relatedUpNextAutoplay=!1),this.relatedUpNextAutoplay&&(this.loop=!1)),(""!==this.playlistLoc||(0,r.default)(this.playlistData)&&u.default.isObject(this.playlistData[0]))&&(this.hasPlaylist=!0,""!==this.playlistLoc&&(0,r.default)(this.playlistData)&&u.default.isObject(this.playlistData[0])&&(this.playlistLoc=""),this.autoHeightMode=!0,this.srcChangeAutoplay||(this.playlistUpNextAutoplay=!1),this.playlistUpNextAutoplay&&(this.loop=!1)),x.default.detect.call(this)&&(this.hasTranscripts=!0,this.autoHeightMode=!0),!this.autoplay||"muted-autoplay"!==this.autoplayMode&&"autoplay-with-sound"!==this.autoplayMode||(this.preload="auto"),this.audioOnly&&this.audioOnlyUseVideoLayout&&(u.default.addClass(this.dom.container,"rmp-audio-only-use-video-layout"),this.audioOnly=!1),(this.hasPlaylist||this.hasRelated)&&(this.video360=!1,this.audioOnly=!1,this.isLiveDvr=!1,this.adSchedule={},this.backupSrc=[],this.chaptersLoc=""),this.bitrateDataDisplayed=this.bitrateDataDisplayed.toLowerCase(),this.audioOnly&&(this.video360=!1,this.hlsJSCapLevelToPlayerSize=!1,this.shakaCapLevelToPlayerSize=!1,this.autoHeightMode=!1,this.height=40,this.pip=!1,"s2"!==this.skin&&(this.skin="s1"),""===this.skinBackgroundColor&&(this.skinBackgroundColor="212121")),Q.call(this)};var X;(window.RadiantMP.prototype.init=function(e){var t;if(null===this.dom.container)return void(0,d.default)(t=G.default.fatal).call(t,this,"could not find player container with id "+this.id+" on page - exit",106,null);if(this.refTime=u.default.getNow(),this.inputSettings=e,C.default.filterInput.call(this,e),C.default.filterRetryParameters.call(this),C.default.filterHideModule.call(this),this.hideVolume&&(this.hideModule.volume=!0),"string"==typeof this.src.mp4&&""!==this.src.mp4&&(this.src.mp4=[this.src.mp4]),"string"==typeof this.src.webm&&""!==this.src.webm&&(this.src.webm=[this.src.webm]),""===this.licenseKey)return void u.default.log("license","no license key provided - exit");if(u.default.addClass(this.dom.container,"rmp-container rmp-color-button"),c.default.isInIframe&&(this.fadeInPlayer=!1,!this.iframeAllowed))return void f.default.endPlayer.call(this,"iframe embedding not allowed");if(this.fadeInPlayer){const e={opacity:0,visibility:"hidden"};u.default.setStyle(this.dom.container,e),u.default.addClass(this.dom.container,"rmp-container-fade-in")}if("/"!==this.pathToRmpFiles.substr(this.pathToRmpFiles.length-1)&&(this.pathToRmpFiles=this.pathToRmpFiles+"/"),!f.default.ck.call(this))return void f.default.endPlayer.call(this,"license key check failed");const a=function(){u.default.createStdEvent("online",this.dom.container)};this.windowOnline=(0,d.default)(a).call(a,this),window.addEventListener("online",this.windowOnline);const i=function(){u.default.createStdEvent("offline",this.dom.container)};this.windowOffline=(0,d.default)(i).call(i,this),window.addEventListener("offline",this.windowOffline),this.okDash=c.default.okDash,this.okHls=c.default.okHls,this.okHlsHevc=c.default.okHlsHevc,this.okHlsJS=c.default.okHlsJS,c.default.isIos[0]&&(this.forceNativeHlsOverHlsJS=!0),(c.default.isAndroid[0]||c.default.isSamsungSmartTV||c.default.isFireTV)&&(this.okHls=!0,(c.default.isAndroid[1]<5||c.default.isSamsungSmartTV||c.default.isFireTV)&&(this.forceNativeHlsOverHlsJS=!0)),this.forceNativeHlsOverHlsJS&&this.okHlsJS&&this.okHls&&(this.okHlsJS=!1),(c.default.isIpadOS||c.default.isMacosSafari[0])&&this.okHlsJS&&this.okHls&&(this.isLiveDvr||(this.okHlsJS=!1),this.adImaDai&&(this.okHlsJS=!0)),this.isLiveDvr&&(!this.okHlsJS&&u.default.srcExists(this.src.hls,"hls")&&this.okHls||u.default.srcExists(this.src.hlsHevc,"hlsHevc")&&this.okHlsHevc)&&(this.isLiveDvr=!1),this.okFps=c.default.okFps,this.okWebM=c.default.testWebM(this.webmCodecs,c.default.html5Video),this.okMp4=c.default.okMp4,this.okMp4Hevc=c.default.hasHevcSupport,(this.audioOnly||this.playlistAudioOnly||this.relatedAudioOnly||this.audioOnlyUseVideoLayout)&&(this.okM4a=c.default.okM4a,this.okMp3=c.default.okMp3,this.okOgg=c.default.testOgg(this.oggCodec,c.default.html5Audio)),c.default.isStandalone?u.default.addClass(this.dom.container,"rmp-standalone"):c.default.isWebView&&u.default.addClass(this.dom.container,"rmp-webview"),this.audioOnly?u.default.setStyle(this.dom.container,{backgroundColor:"transparent"}):"000000"!==this.backgroundColor&&u.default.setStyle(this.dom.container,{backgroundColor:"#"+this.backgroundColor});const s="html, body { height: 100%; width: 100%; background-color: #000; overflow: hidden; margin: 0; padding: 0;}";switch(this.skin){case"s1":case"s2":case"s3":case"s4":this.fullWindowSkin&&(this.iframeMode=!0,u.default.appendStyle(s));break;case"tv":this.tvPlayerSkin=!0,this.skin="s3",this.iframeMode=!0,this.disableKeyboardControl=!0,this.hideFullscreen=!0,this.googleCast=!1,this.airplay=!1,this.hideModule.volume=!0,this.quickForward=10,this.quickRewind=10,this.hideExternalPlayerLabels=!0,this.hlsJSCapLevelToPlayerSize=!1,this.shakaCapLevelToPlayerSize=!1,u.default.addClass(this.dom.container,"rmp-tv-player"),u.default.appendStyle(s);break;case"outstream":this.adOutStreamSkin=!0,this.skin="s1",this.skinBackgroundColor="",this.adShowRemainingTime=!0,u.default.addClass(this.dom.container,"rmp-ad-outstream");break;default:this.skin="s1"}var r,n;(this.permanentMuted&&(this.rememberVolume=!1,this.googleCast=!1,this.muted=!0),void 0===window.chrome&&(this.googleCast=!1),this.googleCast)&&(window.rmpGlobals.castApiInitialized||(window.rmpGlobals.castApiInitialized=!0,this.googleCastCordova?(this.castReady=(0,d.default)(r=M.default.ready).call(r,this),this.googleCastCordovaDebug?M.default.loadDebug.call(this):this.dom.container.addEventListener("ready",this.castReady)):(this.castReady=(0,d.default)(n=P.default.ready).call(n,this),this.dom.container.addEventListener("ready",this.castReady))));p.default.detect.call(this);let o="video";this.audioOnly&&(o="audio");let l=this.detectAutoplayTimeout;if(l<=0&&(l=2500,c.default.isMobile&&(l=5e3)),this.viewablePlayPause&&(this.viewableAutoplay=!0),this.autoplay||this.viewableAutoplay){if(this.adOutStream&&this.adOutStreamMutedAutoplay&&(this.muted=!0),c.default.localStorage(this.allowLocalStorage)&&this.autoplayCount!==1/0)try{let e=JSON.parse(window.localStorage.getItem("rmpAutoplayCount"));0,null!==e&&"number"==typeof e.value&&e.value<=0&&(this.autoplay=!1)}catch(h){u.default.trace(h)}W.default.detect(o,l,this.muted).then(e=>{switch(this.autoplayMode=e,u.default.createStdEvent("autoplaymodedetected",this.dom.container),this.autoplayMode){case"no-autoplay":C.default.fireAutoplayFailure.call(this);break;case"muted-autoplay":this.muted||(this.muted=!0)}Y.call(this)})}else this.requestAutoplayCapabilitiesData?(W.default.detect(o,l,this.muted).then(e=>{this.autoplayMode=e,u.default.createStdEvent("autoplaymodedetected",this.dom.container)}),Y.call(this)):Y.call(this)},(0,r.default)(window.rmpAsyncPlayers)&&u.default.isObject(window.rmpAsyncPlayers[0])&&"string"==typeof window.rmpAsyncPlayers[0].asyncElementID&&""!==window.rmpAsyncPlayers[0].asyncElementID)&&(window.rmpAsyncPlayerInstances=[],(0,l.default)(X=window.rmpAsyncPlayers).call(X,e=>{const t=e.asyncElementID,a=document.getElementById(t);if(null!==a){const i=new window.RadiantMP(t);0,window.rmpAsyncPlayerInstances.push(i),u.default.createStdEvent("rmpasyncplayerinstanceavailable",a),delete e.asyncElementID,i.init(e)}}))})()},{"./360/360":2,"./ads/ads-helpers":9,"./analytics/analytics":14,"./analytics/logs":15,"./analytics/mux":16,"./api/ads":17,"./api/analytics":18,"./api/api":19,"./api/audio":20,"./api/bitrates":21,"./api/destroy":22,"./api/metadata":23,"./api/offline":24,"./api/playlist":25,"./api/related":26,"./api/src":27,"./cast/cast":29,"./cast/cordova-cast":30,"./core/accessible/accessible":31,"./core/modules/fcc":38,"./core/resize/resize":47,"./core/run-player/runPlayer":49,"./core/ui/colors":51,"./core/ui/logo":54,"./core/utils/error":56,"./core/utils/license":57,"./core/utils/metadata":58,"./core/utils/utils":59,"./core/utils/viewable":60,"./fw/autoplay":65,"./fw/defaults/inner-defaults":66,"./fw/defaults/language-defaults":68,"./fw/env":69,"./fw/fw":70,"./playlist/playlist":72,"./playlist/related":73,"./vr/vr":74,"./vtt/transcripts":78,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/for-each":85,"@babel/runtime-corejs3/core-js-stable/instance/index-of":87,"@babel/runtime-corejs3/core-js-stable/object/keys":99,"@babel/runtime-corejs3/core-js-stable/set-timeout":104,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.regexp.to-string":435,"core-js/modules/es.string.replace":438,"core-js/modules/web.dom-collections.iterator":444}],72:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.symbol.description"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/web.dom-collections.iterator"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),o=i(e("@babel/runtime-corejs3/core-js-stable/promise")),l=i(e("../fw/fw")),d=i(e("../core/utils/utils")),c=i(e("../core/utils/metadata")),u=i(e("../core/run-player/runPlayer")),h=i(e("../analytics/analytics")),p=i(e("../analytics/logs")),f=i(e("../core/utils/error")),m=i(e("../core/accessible/accessible"));const g={},b=function(){this.dom.container.removeEventListener("srcchanged",this.playlistOnSrcChangedLoadAd),this.dom.container.removeEventListener("error",this.playlistOnSrcChangeError),l.default.createStdEvent("playlistitem",this.dom.container),l.default.isValidTextTracksSet(this.ccFiles)&&this.setCaptionsList(this.ccFiles),null===this.playlistCallback&&this.ads&&this.adTagUrl&&this.loadAds(this.adTagUrl)},v=function(){this.dom.container.removeEventListener("srcchanged",this.playlistOnSrcChangedLoadAd),this.dom.container.removeEventListener("error",this.playlistOnSrcChangeError)},y=function(e){if(this.dom.playlistContainer){const t=this.dom.playlistContainer.querySelectorAll(".rmp-playlist-item");for(let e=0,a=t.length;e<a;e++)l.default.removeClass(t[e],"rmp-playlist-item-active");l.default.addClass(t[e],"rmp-playlist-item-active")}},k=function(e){if(this.currentPlaylistIndex=e,void 0===this.playlistList[this.currentPlaylistIndex]&&(this.currentPlaylistIndex=0,this.dom.playlistSideMenu.scrollTop=0),l.default.isObject(this.playlistList[this.currentPlaylistIndex])){const e=this.playlistList[this.currentPlaylistIndex];this.ads&&("string"==typeof e.adTagUrl&&""!==e.adTagUrl?(this.adTagUrl=e.adTagUrl,e.adTagWaterfall?this.adTagWaterfall=[...e.adTagWaterfall]:this.adTagWaterfall=[]):this.adTagUrl=null),l.default.isValidTextTracksSet(e.ccFiles)&&(this.ccFiles=e.ccFiles),this.setContentMetadata(e.contentMetadata,!0),""!==this.gaTrackingId&&this.setGALabel(e.contentMetadata.title),this.muxData&&this.muxDataUseListData&&(this.muxDataSettings.data.video_title=e.contentMetadata.title,window.mux.emit("#"+this.id+" .rmp-video","videochange",{video_title:this.muxDataSettings.data.video_title})),y.call(this,this.currentPlaylistIndex);let t=e.src;this.getPlayerInitialized()?(this.dom.container.addEventListener("srcchanged",this.playlistOnSrcChangedLoadAd),this.dom.container.addEventListener("error",this.playlistOnSrcChangeError),this.setSrc(t)):this.setSrc(t),e.seekBarThumbnailsLoc&&this.setThumbnails(e.seekBarThumbnailsLoc)}};g.callbackPromise=function(){return new o.default((e,t)=>{this.playlistCallback().then(()=>{e()}).catch(e=>{t()})})},g.loadItem=function(e,t){t&&t.stopPropagation(),this.changingSrc||(null!==this.playlistCallback?g.callbackPromise.call(this).then(()=>{k.call(this,e)}).catch(t=>{k.call(this,e)}):k.call(this,e))};const w=function(e){if(l.default.isObject(this.playlistList[e])){var t;const a=this.playlistList[e],i=l.default.createElement("div","rmp-playlist-item");m.default.make.call(this,i,a.contentMetadata.title,!0,"playlist");const s=l.default.createElement("div","rmp-playlist-item-number",(e+1).toString());i.appendChild(s);const r=l.default.createElement("div","rmp-playlist-item-thumbnail-wrapper"),o=l.default.createElement("img","rmp-playlist-item-thumbnail");o.alt=a.contentMetadata.title,o.src=a.contentMetadata.thumbnail,r.appendChild(o),i.appendChild(r);const d=l.default.createElement("div","rmp-playlist-item-text-area"),c=l.default.createElement("div","rmp-playlist-item-title",a.contentMetadata.title,this.rtl);d.appendChild(c);const u=l.default.createElement("div","rmp-playlist-item-description",a.contentMetadata.description,this.rtl);d.appendChild(u),i.appendChild(d),l.default.addEvent("click",i,(0,n.default)(t=g.loadItem).call(t,this,e)),this.dom.playlistSideMenu.appendChild(i)}},S=function(e,t){t&&(t.stopPropagation(),"touchend"===t.type&&t.preventDefault());let a=this.currentPlaylistIndex-1;e&&(a=this.currentPlaylistIndex+1),g.loadItem.call(this,a,null)},C=function(){this.dom.playlistLeftArrow=l.default.createElement("button","rmp-button rmp-playlist-left-arrow rmp-color-bg"),m.default.make.call(this,this.dom.playlistLeftArrow,this.labels.hint.previousItem,!0);const e=l.default.createElement("span","rmp-i rmp-i-previous");this.dom.playlistLeftArrow.appendChild(e),this.dom.container.appendChild(this.dom.playlistLeftArrow),l.default.addEvent(["touchend","click"],this.dom.playlistLeftArrow,(0,n.default)(S).call(S,this,!1)),this.dom.playlistRightArrow=l.default.createElement("button","rmp-button rmp-playlist-right-arrow rmp-color-bg"),m.default.make.call(this,this.dom.playlistRightArrow,this.labels.hint.nextItem,!0);const t=l.default.createElement("span","rmp-i rmp-i-next");this.dom.playlistRightArrow.appendChild(t),this.dom.container.appendChild(this.dom.playlistRightArrow),l.default.addEvent(["touchend","click"],this.dom.playlistRightArrow,(0,n.default)(S).call(S,this,!0))},j=function(e){this.playlistList=c.default.filterPlaylist(e),l.default.createStdEvent("playlist",this.dom.container)},E=function(e){if(j.call(this,e),this.dom.playlistSideMenu){const e=this.dom.playlistSideMenu.querySelectorAll(".rmp-playlist-item");for(let t=0,a=e.length;t<a;t++)l.default.removeElement(e[t]);for(let t=0,a=this.playlistList.length;t<a;t++)w.call(this,t);g.loadItem.call(this,0,null)}};g.setData=function(e){if("string"==typeof e)this.playlistLoc=e;else if((0,r.default)(e))return void E.call(this,e);l.default.ajax(this.playlistLoc,this.ajaxTimeout,this.ajaxWithCredentials,"GET").then(e=>{let t;try{t=JSON.parse(e),(0,r.default)(t.playlist)&&E.call(this,t.playlist)}catch(a){f.default.fatal.call(this,"error loading or parsing input playlist",101,a)}}).catch(e=>{f.default.fatal.call(this,"error loading or parsing input playlist",101,e)})};const L=function(){if(this.dom.playlistContainer=this.dom.container.parentNode.parentNode,!l.default.hasClass(this.dom.playlistContainer,"rmp-playlist-container"))return void f.default.warning.call(this,"cannot append playlist layout - missing rmp-playlist-container container",1006,null);l.default.addClass(this.dom.container,"rmp-playlist-ui"),C.call(this),this.dom.playlistSideMenu=l.default.createElement("div","rmp-playlist-side-menu rmp-color-bg rmp-color-button");const e=l.default.createElement("div","rmp-playlist-header",this.labels.hint.playlist,this.rtl);this.dom.playlistSideMenu.appendChild(e);for(let t=0,a=this.playlistList.length;t<a;t++)w.call(this,t);this.dom.playlistContainer.appendChild(this.dom.playlistSideMenu),y.call(this,0)},A=function(e){if(j.call(this,e),this.playlistList.length>0&&l.default.isObject(this.playlistList[0])){const e=this.playlistList[0];this.src=e.src,this.seekBarThumbnailsLoc=e.seekBarThumbnailsLoc,l.default.isValidTextTracksSet(e.ccFiles)&&(this.ccFiles=e.ccFiles,this.hasExternalCCFiles=!0),this.ads&&(this.adTagUrl=e.adTagUrl,""===e.adTagUrl&&(this.emptyInitAdTagUrl=!0),e.adTagWaterfall&&(this.adTagWaterfall=[...e.adTagWaterfall])),this.setContentMetadata(e.contentMetadata,!0),""!==this.gaTrackingId&&this.setGALabel(this.contentMetadata.title),this.muxData&&this.muxDataUseListData&&(this.muxDataSettings.data.video_title=this.contentMetadata.title),this.playlistOnSrcChangedLoadAd=(0,n.default)(b).call(b,this),this.playlistOnSrcChangeError=(0,n.default)(v).call(v,this),this.playlistAudioOnly?d.default.detectAudioSrc.call(this):d.default.detectSrc.call(this),h.default.init.call(this),p.default.init.call(this),u.default.init.call(this),L.call(this)}else f.default.fatal.call(this,"error loading or parsing input playlist",101,null)};g.init=function(){""===this.playlistLoc?A.call(this,this.playlistData):l.default.ajax(this.playlistLoc,this.ajaxTimeout,this.ajaxWithCredentials,"GET").then(e=>{let t;try{t=JSON.parse(e)}catch(a){f.default.fatal.call(this,"error loading or parsing input playlist",101,a)}(0,r.default)(t.playlist)?A.call(this,t.playlist):f.default.fatal.call(this,"error loading or parsing input playlist",101,null)}).catch(e=>{f.default.fatal.call(this,"error loading or parsing input playlist",101,e)})};var T=g;a.default=T},{"../analytics/analytics":14,"../analytics/logs":15,"../core/accessible/accessible":31,"../core/run-player/runPlayer":49,"../core/utils/error":56,"../core/utils/metadata":58,"../core/utils/utils":59,"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/promise":102,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.regexp.to-string":435,"core-js/modules/es.symbol.description":440,"core-js/modules/web.dom-collections.iterator":444}],73:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/web.dom-collections.iterator"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/promise")),n=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),o=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),l=i(e("../fw/fw")),d=i(e("../fw/env")),c=i(e("../core/utils/utils")),u=i(e("../core/utils/metadata")),h=i(e("../core/ui/core-ui")),p=i(e("../core/run-player/runPlayer")),f=i(e("../analytics/analytics")),m=i(e("../analytics/logs")),g=i(e("../core/utils/error")),b=i(e("../core/modules/modules")),v=i(e("../core/accessible/accessible"));const y={},k=function(){l.default.removeClass(this.dom.relatedSkipPreview,"rmp-force-show");let e=this.currentRelatedIndex+1;this.relatedList[e]||(e=0),this.dom.relatedSkipImg.src=this.relatedList[e].contentMetadata.thumbnail,l.default.setText(this.dom.relatedSkipText,this.relatedList[e].contentMetadata.title)},w=function(){this.dom.container.removeEventListener("srcchanged",this.relatedOnSrcChangedLoadAd),this.dom.container.removeEventListener("error",this.relatedOnSrcChangeError),l.default.createStdEvent("relateditem",this.dom.container),l.default.isValidTextTracksSet(this.ccFiles)&&this.setCaptionsList(this.ccFiles),null===this.relatedCallback&&this.ads&&this.adTagUrl&&this.loadAds(this.adTagUrl)},S=function(){this.dom.container.removeEventListener("srcchanged",this.relatedOnSrcChangedLoadAd),this.dom.container.removeEventListener("error",this.relatedOnSrcChangeError)},C=function(){if(l.default.isObject(this.relatedList[this.currentRelatedIndex])){const e=this.relatedList[this.currentRelatedIndex];this.ads&&("string"==typeof e.adTagUrl&&""!==e.adTagUrl?(this.adTagUrl=e.adTagUrl,e.adTagWaterfall?this.adTagWaterfall=[...e.adTagWaterfall]:this.adTagWaterfall=[]):this.adTagUrl=null),l.default.isValidTextTracksSet(e.ccFiles)&&(this.ccFiles=e.ccFiles),this.setContentMetadata(e.contentMetadata,!0),""!==this.gaTrackingId&&this.setGALabel(e.contentMetadata.title),this.muxData&&this.muxDataUseListData&&(this.muxDataSettings.data.video_title=e.contentMetadata.title,window.mux.emit("#"+this.id+" .rmp-video","videochange",{video_title:this.muxDataSettings.data.video_title})),h.default.hideCentralPlay.call(this);let t=e.src;this.getPlayerInitialized()?(this.dom.container.addEventListener("srcchanged",this.relatedOnSrcChangedLoadAd),this.dom.container.addEventListener("error",this.relatedOnSrcChangeError),this.setSrc(t)):(b.default.closeAll.call(this),this.setSrc(t)),k.call(this),e.seekBarThumbnailsLoc&&this.setThumbnails(e.seekBarThumbnailsLoc)}},j=function(){const e=l.default.createElement("div","rmp-related-item-bottom-margin");this.dom.relatedOverlayLevelsArea.appendChild(e)},E=function(e){if(l.default.isObject(this.relatedList[e])){var t;const a=this.relatedList[e],i=l.default.createElement("button","rmp-button rmp-related-item");v.default.make.call(this,i,a.contentMetadata.title,!0);const s=l.default.createElement("img","rmp-related-thumbnail");s.alt=a.contentMetadata.title,s.src=a.contentMetadata.thumbnail,i.appendChild(s);const r=l.default.createElement("div","rmp-related-title",a.contentMetadata.title,this.rtl);if(i.appendChild(r),a.duration){const e=l.default.createElement("div","rmp-related-duration",a.duration,this.rtl);i.appendChild(e)}const n=l.default.createElement("div","rmp-related-up-next",this.labels.hint.upNext,this.rtl);l.default.hide(n),i.appendChild(n),i.addEventListener("click",(0,o.default)(t=y.loadItem).call(t,this,e)),this.dom.relatedOverlayLevelsArea.appendChild(i)}},L=function(e){this.relatedList=u.default.filterPlaylist(e),l.default.createStdEvent("related",this.dom.container)},A=function(e){if(!this.dom.relatedOverlayLevelsArea)return;L.call(this,e),this.currentRelatedIndex=0;const t=this.dom.relatedOverlayLevelsArea.querySelectorAll(".rmp-related-item");for(let i=0,s=t.length;i<s;i++)l.default.removeElement(t[i]);const a=this.dom.relatedOverlayLevelsArea.querySelector(".rmp-related-item-bottom-margin");null!==a&&l.default.removeElement(a);for(let i=0,s=this.relatedList.length;i<s;i++)E.call(this,i);j.call(this),C.call(this)};y.setData=function(e,t){if(t)this.relatedLoc=this.relatedList[this.currentRelatedIndex].related;else if("string"==typeof e)this.relatedLoc=e;else if((0,n.default)(e))return void A.call(this,e);l.default.ajax(this.relatedLoc,this.ajaxTimeout,this.ajaxWithCredentials,"GET").then(e=>{let t;try{t=JSON.parse(e),(0,n.default)(t.playlist)&&A.call(this,t.playlist)}catch(a){l.default.trace(a)}}).catch(e=>{l.default.trace(e)})},y.callbackPromise=function(){return new r.default((e,t)=>{this.relatedCallback().then(()=>{e()}).catch(e=>{t()})})};const T=function(e){this.currentRelatedIndex=e,void 0===this.relatedList[this.currentRelatedIndex]&&(this.currentRelatedIndex=0),this.relatedList[this.currentRelatedIndex].related?y.setData.call(this,null,!0):C.call(this)};y.loadItem=function(e,t){t&&t.stopPropagation(),this.changingSrc||(null!==this.relatedCallback?y.callbackPromise.call(this).then(()=>{T.call(this,e)}).catch(t=>{T.call(this,e)}):T.call(this,e))};const P=function(){l.default.addClass(this.dom.container,"rmp-related-ui"),b.default.append.call(this,"related"),b.default.appendOverlay.call(this,"related");for(let e=0,t=this.relatedList.length;e<t;e++)E.call(this,e);j.call(this),l.default.show(this.dom.related)},M=function(e){e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault()),y.loadItem.call(this,this.currentRelatedIndex+1,null)},I=function(){let e=this.currentRelatedIndex+1;if(void 0===this.relatedList[e]&&(e=0),this.dom.controlBar){this.dom.relatedSkip=l.default.createElement("button","rmp-button rmp-related-skip-next rmp-i rmp-i-skip-next"),v.default.make.call(this,this.dom.relatedSkip,this.labels.hint.upNext,!0),l.default.addEvent(["touchend","click"],this.dom.relatedSkip,(0,o.default)(M).call(M,this)),this.dom.controlBar.insertBefore(this.dom.relatedSkip,this.dom.timeElapsed),this.dom.relatedSkipPreview=l.default.createElement("div","rmp-related-skip-preview"),l.default.addEvent(["touchend","click"],this.dom.relatedSkipPreview,(0,o.default)(M).call(M,this)),this.dom.relatedSkip.appendChild(this.dom.relatedSkipPreview),this.dom.relatedSkipImg=l.default.createElement("img","rmp-related-skip-preview-img"),this.dom.relatedSkipImg.alt="Next playlist item image preview",this.dom.relatedSkipImg.src=this.relatedList[e].contentMetadata.thumbnail,this.dom.relatedSkipPreview.appendChild(this.dom.relatedSkipImg),this.dom.relatedSkipText=l.default.createElement("div","rmp-related-skip-preview-title rmp-color-bg",this.relatedList[e].contentMetadata.title),this.dom.relatedSkipPreview.appendChild(this.dom.relatedSkipText);const t=l.default.createElement("div","rmp-related-skip-preview-up-next rmp-color-bg",this.labels.hint.upNext,this.rtl);this.dom.relatedSkipPreview.appendChild(t),d.default.isMobile||(this.dom.relatedSkip.addEventListener("mouseenter",e=>{e&&e.stopPropagation(),this.forceResetTimer=!0,l.default.fadeIn(this.dom.relatedSkipPreview)}),this.dom.relatedSkip.addEventListener("mouseleave",e=>{e&&e.stopPropagation(),this.forceResetTimer=!1,l.default.fadeOut(this.dom.relatedSkipPreview)}))}},x=function(){g.default.fatal.call(this,"error loading or parsing input related",102,null)},R=function(e){if(L.call(this,e),this.relatedList.length>0&&l.default.isObject(this.relatedList[0])){const e=this.relatedList[0];this.src=e.src,this.seekBarThumbnailsLoc=e.seekBarThumbnailsLoc,l.default.isValidTextTracksSet(e.ccFiles)&&(this.ccFiles=e.ccFiles,this.hasExternalCCFiles=!0),this.ads&&(this.adTagUrl=e.adTagUrl,""===e.adTagUrl&&(this.emptyInitAdTagUrl=!0),e.adTagWaterfall&&(this.adTagWaterfall=[...e.adTagWaterfall])),this.setContentMetadata(e.contentMetadata,!0),""!==this.gaTrackingId&&this.setGALabel(this.contentMetadata.title),this.muxData&&this.muxDataUseListData&&(this.muxDataSettings.data.video_title=this.contentMetadata.title),this.relatedOnSrcChangedLoadAd=(0,o.default)(w).call(w,this),this.relatedOnSrcChangeError=(0,o.default)(S).call(S,this),this.relatedAudioOnly?c.default.detectAudioSrc.call(this):c.default.detectSrc.call(this),f.default.init.call(this),m.default.init.call(this),p.default.init.call(this),P.call(this),I.call(this)}else x.call(this)};y.init=function(){""===this.relatedLoc?R.call(this,this.relatedData):l.default.ajax(this.relatedLoc,this.ajaxTimeout,this.ajaxWithCredentials,"GET").then(e=>{let t;try{t=JSON.parse(e)}catch(a){l.default.trace(a),x.call(this)}(0,n.default)(t.playlist)?R.call(this,t.playlist):x.call(this)}).catch(e=>{l.default.trace(e),x.call(this)})};var D=y;a.default=D},{"../analytics/analytics":14,"../analytics/logs":15,"../core/accessible/accessible":31,"../core/modules/modules":39,"../core/run-player/runPlayer":49,"../core/ui/core-ui":52,"../core/utils/error":56,"../core/utils/metadata":58,"../core/utils/utils":59,"../fw/env":69,"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/promise":102,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/web.dom-collections.iterator":444}],74:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault");e("@babel/runtime-corejs3/core-js-stable/object/define-property")(a,"__esModule",{value:!0}),a.default=void 0;var s=i(e("@babel/runtime-corejs3/core-js-stable/set-interval")),r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("../fw/fw")),o=i(e("../fw/env")),l=i(e("../core/modules/modules")),d=i(e("../core/utils/error"));const c={};c.destroy=function(){this.currentXRSession&&this.currentXRSession.removeEventListener("end",this.onSessionEnded),this.vrNeedsUpdateInterval&&clearInterval(this.vrNeedsUpdateInterval),this.dom.container&&(this.dom.container.removeEventListener("loadedmetadata",this.onLoadedmetadataShowVR),this.dom.container.removeEventListener("ready",this.onReadyMainVR))},c.resize=function(){if(this.rendererVR&&this.cameraVR)if(this.vrModeOn)this.cameraVR.aspect=window.innerWidth/window.innerHeight,this.rendererVR.setSize(window.innerWidth,window.innerHeight),this.cameraVR.updateProjectionMatrix();else{let e=-1,t=-1;if(this.isInFullscreen){if(this.hasNativeFullscreenSupport){const a=o.default.getScreenDimension();e=a.width,t=a.height}else if(this.fullscreenFullWindowMode){const a=o.default.getViewportSize();a.width>-1&&a.height>-1&&(e=a.width,t=a.height)}}else e=this.width,t=this.height;e>0&&t>0&&(this.rendererVR.setSize(e,t),this.cameraVR.aspect=e/t,this.cameraVR.updateProjectionMatrix())}};const u=function(e){this.currentXRSession=e,this.currentXRSession.addEventListener("end",this.onSessionEnded),this.rendererVR.xr.setSession(e),this.vrModeOn=!0},h=function(){this.currentXRSession.removeEventListener("end",this.onSessionEnded),this.rendererVR.xr.setSession(null),this.currentXRSession=null,this.vrModeOn=!1},p=function(e){if(e&&(e.stopPropagation(),"touchend"===e.type&&e.preventDefault()),null===this.currentXRSession){const e={optionalFeatures:["local-floor","bounded-floor"]};navigator.xr.requestSession("immersive-vr",e).then(this.onSessionStarted).catch(e=>{0})}else this.currentXRSession.end()},f=function(){this.currentXRSession=null,this.vrModeOn=!1,n.default.hide(this.dom.vr)},m=function(e){e&&e.referenceSpaceType&&this.rendererVR.xr.setReferenceSpaceType(e.referenceSpaceType),void 0!==navigator.xr&&void 0!==navigator.xr.isSessionSupported?navigator.xr.isSessionSupported("immersive-vr").then(e=>{e?(this.onXRClick=(0,r.default)(p).call(p,this),this.onSessionStarted=(0,r.default)(u).call(u,this),this.onSessionEnded=(0,r.default)(h).call(h,this),n.default.addEvent(["touchend","click"],this.dom.vr,this.onXRClick)):f.call(this)}).catch(e=>{f.call(this)}):f.call(this)},g=function(){this.rendererVR.render(this.sceneVR,this.cameraVR)},b=function(){clearInterval(this.vrNeedsUpdateInterval);let e=this.getFramerate();this.vrNeedsUpdateInterval=(0,s.default)(()=>{this.hasLoadedMetadata&&(this.textureVR.needsUpdate=!0)},Math.round(1e3/e))},v=function(){l.default.deferredShow.call(this,"vr");const e=this.getPlayerWidth(),t=this.getPlayerHeight(),a=e/t;this.cameraVR=new THREE.PerspectiveCamera(this.videoVRFocalLength,a,1,2e3),this.cameraVR.layers.enable(1),this.textureVR=new THREE.Texture(this.dom.video),this.textureVR.generateMipmaps=!1,this.textureVR.minFilter=THREE.NearestFilter,this.textureVR.magFilter=THREE.NearestFilter,this.textureVR.format=THREE.RGBFormat;let i=this.getFramerate();i<=0&&(i=24),this.vrNeedsUpdateInterval=(0,s.default)(()=>{this.hasLoadedMetadata&&(this.textureVR.needsUpdate=!0)},Math.round(1e3/i)),this.updateVRFramerate=(0,r.default)(b).call(b,this),this.dom.container.addEventListener("frameratechange",this.updateVRFramerate),this.sceneVR=new THREE.Scene,this.sceneVR.background=new THREE.Color(1052688);const d=2*Math.round(60/a/2),c=new THREE.SphereBufferGeometry(500,60,d);c.scale(-1,1,1);const u=c.attributes.uv.array;for(let s=0;s<u.length;s+=2)u[s]*=.5;const h=new THREE.MeshBasicMaterial({map:this.textureVR}),p=new THREE.Mesh(c,h);p.rotation.y=-Math.PI/2,p.layers.set(1),this.sceneVR.add(p);const f=new THREE.SphereBufferGeometry(500,60,d);f.scale(-1,1,1);const v=f.attributes.uv.array;for(let s=0;s<v.length;s+=2)v[s]*=.5,v[s]+=.5;const y=new THREE.MeshBasicMaterial({map:this.textureVR}),k=new THREE.Mesh(f,y);k.rotation.y=-Math.PI/2,k.layers.set(2),this.sceneVR.add(k),this.rendererVR=new THREE.WebGLRenderer,this.rendererVR.setPixelRatio(o.default.devicePixelRatio),this.rendererVR.setSize(e,t),this.rendererVR.xr.enabled=!0,this.canvasVR=this.rendererVR.domElement,this.canvasVR.className="rmp-canvas-vr",this.dom.content.insertBefore(this.canvasVR,this.dom.poster),n.default.hide(this.dom.video),m.call(this,{referenceSpaceType:"local"}),this.rendererVR.setAnimationLoop((0,r.default)(g).call(g,this))},y=function(){this.dom.container.removeEventListener("loadedmetadata",this.onLoadedmetadataShowVR),v.call(this)},k=function(){this.dom.container.removeEventListener("ready",this.onReadyMainVR),l.default.append.call(this,"vr"),this.hasLoadedMetadata?v.call(this):(this.onLoadedmetadataShowVR=(0,r.default)(y).call(y,this),this.dom.container.addEventListener("loadedmetadata",this.onLoadedmetadataShowVR))},w=function(){if("undefined"!=typeof WebXRPolyfill){new WebXRPolyfill;0}this.onReadyMainVR=(0,r.default)(k).call(k,this),this.get5Ready()?this.onReadyMainVR():this.dom.container.addEventListener("ready",this.onReadyMainVR)};c.load=function(){if("undefined"!=typeof THREE)w.call(this);else{var e;let t=this.pathToRmpFiles+"three/three-xr.min.js";0,n.default.getScript(t,(0,r.default)(w).call(w,this),(0,r.default)(e=d.default.fatal).call(e,this,"failed to load required lib three.js (VR video)",500,null))}};var S=c;a.default=S},{"../core/modules/modules":39,"../core/utils/error":56,"../fw/env":69,"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/set-interval":103,"@babel/runtime-corejs3/helpers/interopRequireDefault":106}],75:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/web.dom-collections.iterator"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/promise")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/splice")),o=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),l=i(e("../fw/fw")),d=i(e("../core/accessible/accessible")),c=i(e("../core/ui/core-ui")),u=i(e("../core/modules/modules")),h=i(e("../core/utils/error")),p=i(e("../cast/cast")),f=i(e("./native-captions")),m=i(e("../abr/native-hls"));const g={},b={white:"FFFFFF",black:"000000",red:"FF0000",green:"008000",blue:"0000FF",yellow:"FFFF00",magenta:"FF00FF",cyan:"00FFFF"};g.filterGoogleCast=function(){let e=this.fccFontColor;switch(this.fccFontColor){case"white":case"black":case"red":case"green":case"blue":case"yellow":case"magenta":case"cyan":e=b[this.fccFontColor];break;default:e="FFFFFF"}let t=this.fccFontOpacity;t>=1&&(t=.99),this.googleCastCCForegroundColor=e+(100*t).toString();let a=this.fccBackgroundColor;switch(this.fccBackgroundColor){case"white":case"black":case"red":case"green":case"blue":case"yellow":case"magenta":case"cyan":a=b[this.fccBackgroundColor];break;default:a="FFFFFF"}let i=this.fccBackgroundOpacity;i>=1&&(i=.99),this.googleCastCCBackgroundColor=a+(100*i).toString(),this.googleCastTextTrackEdgeType=this.fccFontEdge.toUpperCase(),this.googleCastCCFontFamily=this.fccFontFamily,this.googleCastCCFontScale=this.fccFontSize;let s=this.fccWindowColor;switch(this.fccWindowColor){case"white":case"black":case"red":case"green":case"blue":case"yellow":case"magenta":case"cyan":s=b[this.fccWindowColor];break;default:s="FFFFFF"}let r=this.fccWindowOpacity;r>=1&&(r=.99),this.googleCastCCWindowColor=s+(100*r).toString()};const v=function(){this.shakaPlayer&&this.shakaPlayer.setTextTrackVisibility(!1)},y=function(e){this.shakaPlayer&&(this.shakaPlayer.setTextTrackVisibility(!0),this.shakaPlayer.selectTextTrack(e))},k=function(){if(this.hasExternalCCFiles?(this.ccEnabled=!1,l.default.hide(this.dom.ccArea),this.ccData=null):this.readingShaka?v.call(this):this.readingCaptionsFromNativeHls?m.default.hideAllCaptions.call(this):f.default.hideAll.call(this),this.googleCast&&this.remotePlayer&&this.remotePlayer.isMediaLoaded)try{const e=new chrome.cast.media.EditTracksInfoRequest([]);this.castMedia.editTracksInfo(e,l.default.trace,l.default.trace)}catch(e){l.default.trace(e)}};g.destroy=function(){k.call(this),this.dom.container&&(this.dom.container.removeEventListener("timeupdate",this.updateCuesResize),this.dom.container.removeEventListener("resize",this.updateCuesResize)),this.hasExternalCCFiles&&this.textTracks.length>0&&(this.startIndexCC+=this.textTracks.length),this.textTracks=[],u.default.destroy.call(this,"captions"),this.ccCues=[],this.defaultTrack=0,this.loadedCCFiles=[],this.updateCuesResize=l.default.nullFn},g.getData=function(){return this.hasExternalCCFiles?this.ccData:this.textTracks.length>0?this.textTracks:null};const w=function(e){if("string"==typeof e)try{var t,a;this.ccCues=[];const i=new WebVTT.Parser(window,WebVTT.StringDecoder());i.oncue=(0,o.default)(t=function(e){this.ccCues.push(e)}).call(t,this),i.onparsingerror=(0,o.default)(a=function(e){let t=null;e&&(t=e),h.default.warning.call(this,"vtt.js parsing error",4001,t)}).call(a,this),i.parse(e),i.flush()}catch(i){l.default.trace(i)}};g.menuItemInteraction=function(e){if(!this.dom.captionsOverlayLevelsArea)return;let t=null,a=null;if(e&&e.type&&e.target?(e.stopPropagation(),"touchend"===e.type&&e.preventDefault(),t=e.target,a=t.getAttribute("lang")):"string"==typeof e&&""!==e&&(a=e,t=this.dom.captionsOverlayLevelsArea.querySelector('[lang="'+a+'"]')),null===t||null===a)return;c.default.showChrome.call(this);const i=this.dom.captionsOverlayLevelsArea.querySelectorAll(".rmp-overlay-level");for(let s=0,r=i.length;s<r;s++)l.default.removeClass(i[s],"rmp-overlay-level-active");for(let s=0,r=this.loadedCCFiles.length;s<r;s++){if(l.default.hasClass(t,"captions-off")){this.defaultTrack=0,l.default.addClass(t,"rmp-overlay-level-active"),k.call(this),l.default.createStdEvent("texttrackchanged",this.dom.container);break}if(this.loadedCCFiles[s][0]===a){this.defaultTrack=s+1,l.default.addClass(t,"rmp-overlay-level-active"),this.hasExternalCCFiles?(this.ccEnabled=!0,l.default.show(this.dom.ccArea),w.call(this,this.loadedCCFiles[s][2]),this.ccData=this.ccCues):this.readingShaka?y.call(this,this.shakaTextTracks[s]):this.readingCaptionsFromNativeHls?m.default.showCaptions.call(this,s):f.default.show.call(this,s),this.googleCast&&p.default.setTextTrack.call(this,s),l.default.createStdEvent("texttrackchanged",this.dom.container);break}}};const S=function(e,t,a,i){var s;const r=l.default.createElement("button",e+" rmp-button rmp-overlay-level rmp-color-bg");return t.length>0&&(r.setAttribute("lang",t),d.default.make.call(this,r,a,!0)),i===this.defaultTrack&&(l.default.addClass(r,"rmp-overlay-level-active"),"captions-off"!==e&&i-1>-1&&(this.hasExternalCCFiles?(this.ccEnabled=!0,l.default.show(this.dom.ccArea),w.call(this,this.loadedCCFiles[i-1][2]),this.ccData=this.ccCues):this.readingShaka?y.call(this,this.shakaTextTracks[i-1]):this.readingCaptionsFromNativeHls?m.default.showCaptions.call(this,i-1):f.default.show.call(this,i-1),l.default.createStdEvent("texttrackchanged",this.dom.container))),r.appendChild(document.createTextNode(a)),this.dom.ccItems.push(r),l.default.addEvent(["touchend","click"],r,(0,o.default)(s=g.menuItemInteraction).call(s,this)),r};g.appendUI=function(){if(this.hasExternalCCFiles){for(let t=0,a=this.loadedCCFiles.length;t<a;t++){var e;if(null===this.loadedCCFiles[t])(0,n.default)(e=this.loadedCCFiles).call(e,t,1)}if(this.loadedCCFiles.length<1)return;this.dom.ccArea=l.default.createElement("div","rmp-cc-area"),l.default.hide(this.dom.ccArea),this.dom.content.insertBefore(this.dom.ccArea,this.dom.video.nextSibling),this.ccFilesReady=!0}for(let t=0,a=this.loadedCCFiles.length;t<a;t++)if("string"==typeof this.loadedCCFiles[t][3]&&"default"===this.loadedCCFiles[t][3]){this.defaultTrack=t+1;break}l.default.createStdEvent("alltexttracksloaded",this.dom.container),u.default.append.call(this,"captions"),u.default.appendOverlay.call(this,"captions"),u.default.deferredShow.call(this,"captions"),this.dom.captionsOverlayLevelsArea.appendChild(S.call(this,"captions-off","off",this.labels.hint.off,0));for(let t=0,a=this.loadedCCFiles.length;t<a;t++){const e=this.loadedCCFiles[t][0],a=this.loadedCCFiles[t][1];this.dom.captionsOverlayLevelsArea.appendChild(S.call(this,"captions-"+e,e,a,t+1))}};const C=function(e){return l.default.ajax(this.ccFiles[e][2],this.ajaxTimeout,this.ajaxWithCredentials,"GET").then(t=>{if("string"==typeof t){let a="";"string"==typeof this.ccFiles[e][3]&&"default"===this.ccFiles[e][3]&&(a=this.ccFiles[e][3]),this.loadedCCFiles[e]=[this.ccFiles[e][0],this.ccFiles[e][1],t,a],l.default.createStdEvent("texttrackloaded",this.dom.container)}}).catch(t=>{this.loadedCCFiles[e]=null,l.default.createStdEvent("texttrackloaderror",this.dom.container);let a=null;t&&(a=t),h.default.warning.call(this,"failed to load text track at "+this.ccFiles[e][2],4002,a)})},j=function(e){let t=this.getCurrentTime();if(t>-1){t/=1e3;const a=[];for(let e=0,i=this.ccCues.length;e<i;e++){const i=this.ccCues[e].startTime,s=this.ccCues[e].endTime;t>=i&&t<=s&&a.push(this.ccCues[e])}a[0]&&this.ccEnabled?(l.default.show(this.dom.ccArea),l.default.setStyle(this.dom.ccArea,{width:this.getPlayerWidth()+"px",height:this.getPlayerHeight()+"px"}),WebVTT.processCues(window,a,this.dom.ccArea,e)):l.default.hide(this.dom.ccArea)}},E=function(){this.updateCuesResize=(0,o.default)(j).call(j,this,!0),this.dom.container.addEventListener("timeupdate",this.updateCuesResize),this.dom.container.addEventListener("resize",this.updateCuesResize);const e=[];for(let t=0,a=this.ccFiles.length;t<a;t++)e[t]=C.call(this,t);r.default.all(e).then(()=>{g.appendUI.call(this)})},L=function(){if(this.loadVTTFiles=(0,o.default)(E).call(E,this),"undefined"!=typeof WebVTT)this.loadVTTFiles();else{var e;0;let t=this.pathToRmpFiles+"vtt/vtt.min.js";0,l.default.getScript(t,this.loadVTTFiles,(0,o.default)(e=h.default.warning).call(e,this,"failed to load vtt.js",4e3,null))}};g.init=function(){this.hideModule.captions||L.call(this)};var A=g;a.default=A},{"../abr/native-hls":6,"../cast/cast":29,"../core/accessible/accessible":31,"../core/modules/modules":39,"../core/ui/core-ui":52,"../core/utils/error":56,"../fw/fw":70,"./native-captions":76,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/splice":91,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/promise":102,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.promise":433,"core-js/modules/es.regexp.to-string":435,"core-js/modules/web.dom-collections.iterator":444}],76:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.string.replace"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/instance/includes")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),o=i(e("@babel/runtime-corejs3/core-js-stable/parse-int")),l=i(e("@babel/runtime-corejs3/core-js-stable/instance/slice")),d=i(e("@babel/runtime-corejs3/core-js-stable/instance/index-of")),c=i(e("../fw/fw"));const u={},h=/captions|caption|subtitles|subtitle/i;u.destroy=function(){try{c.default.removeClass(this.dom.container,"rmp-native-captions"),c.default.removeElement(this.dom.ccArea),this.dom.video.textTracks.removeEventListener("addtrack",this.onAddTrack),this.dom.container.removeEventListener("resize",this.resizeNativeCues)}catch(e){c.default.log(null,e)}},u.hideAll=function(){for(let e=0,t=this.textTracksList.length;e<t;e++)this.textTracksList[e].mode="disabled";if(this.dom.ccArea){const e=this.dom.ccArea.querySelectorAll(".rmp-cc-container");if(e.length>0)for(let t=0,a=e.length;t<a;t++){const a=e[t];c.default.addClass(a,"rmp-no-display")}c.default.hide(this.dom.ccArea)}};const p=function(e){let t=0,a=0;const i=e.querySelectorAll(".rmp-cc-display");if(i.length>0){for(let e=0,a=i.length;e<a;e++)t+=c.default.getHeight(i[e]);for(let e=0,s=i.length;e<s;e++)a+=c.default.getHeight(i[e]),i[e].style.bottom=t-a+"px"}},f=function(e,t){let a;if(t&&t.type&&"cuechange"===t.type&&t.target){0;const e=t.target;e.activeCues&&"number"==typeof e.activeCues.length&&(a=e.activeCues),"hidden"!==e.mode&&(e.mode="hidden")}const i=this.dom.ccArea.querySelector('.rmp-cc-container[data-lang="'+e+'"]');if(null!==i)if(a&&a.length>0){const e=[],t=i.querySelectorAll(".rmp-cc-display");if(t.length>0)for(let a=0,i=t.length;a<i;a++){const e=t[a];c.default.removeElement(e)}0;for(let s=0,r=a.length;s<r;s++){const t=a[s];if("string"==typeof t.text&&""!==t.text&&"number"==typeof t.endTime&&"number"==typeof t.startTime){if((0,d.default)(e).call(e,t.text)>-1){c.default.log("captions","skip activeCue - text duplicate: "+t.text);continue}if(t.endTime>t.startTime&&t.endTime-t.startTime>=60){c.default.log("captions","skip activeCue - spread endTime/startTime too large: "+t.endTime-t.startTime+"s");continue}let a=t.text;a=a.replace(/<.+?>/g,"");const s=c.default.createElement("div","rmp-cc-cue");s.textContent=a,e.push(a);const r=c.default.createElement("div","rmp-cc-display");r.setAttribute("data-end-time",1e3*t.endTime),r.setAttribute("data-start-time",1e3*t.startTime),r.setAttribute("data-cc-text",a);let n="";if(t.vertical&&(n+="vertical:"+t.vertical+"_"),t.line&&(n+="line:"+t.line+"_"),t.position&&(n+="position:"+t.position+"_"),t.size&&(n+="size:"+t.size+"_"),t.align){let e=t.align;"center"===e&&(e="middle"),n+="align:"+e+"_"}n&&(n=(0,l.default)(n).call(n,0,-1)),r.setAttribute("data-cue-settings",n),r.appendChild(s),i.appendChild(r)}}p(i),c.default.show(i)}else c.default.hide(i)};u.show=function(e){for(let t=0,a=this.textTracksList.length;t<a;t++)if(t===e){this.textTracksList[t].mode="hidden";break}if(this.dom.ccArea){const t=this.dom.ccArea.querySelectorAll(".rmp-cc-container");if(t.length>0)for(let a=0,i=t.length;a<i;a++){const i=t[a];(0,o.default)(i.getAttribute("data-id"))===e?c.default.removeClass(i,"rmp-no-display"):c.default.addClass(i,"rmp-no-display")}c.default.show(this.dom.ccArea)}};const m=function(e){e.addEventListener("cuechange",(0,n.default)(f).call(f,this,e.language)),this.textTracksList.push(e)},g=function(e){if(e&&e.track&&e.track.kind&&h.test(e.track.kind)){const a=e.track;if(a.mode="disabled",a.language)if(0===this.textTracksLangList.length)this.textTracksLangList.push(a.language),m.call(this,a);else{var t;if((0,r.default)(t=this.textTracksLangList).call(t,a.language))return;this.textTracksLangList.push(a.language),m.call(this,a)}else m.call(this,a)}},b=function(){c.default.setStyle(this.dom.ccArea,{width:this.getPlayerWidth()+"px",height:this.getPlayerHeight()+"px"});const e=this.dom.ccArea.querySelectorAll(".rmp-cc-container");if(e.length>0)for(let t=0,a=e.length;t<a;t++){const a=e[t];"block"===a.style.display&&p(a)}};u.appendCCContainer=function(e,t){const a=c.default.createElement("div","rmp-cc-container rmp-no-display");a.setAttribute("data-lang",e),a.setAttribute("data-id",t),a.style.display="none",this.dom.ccArea.appendChild(a)},u.init=function(){c.default.addClass(this.dom.container,"rmp-native-captions"),this.dom.ccArea=c.default.createElement("div","rmp-cc-area"),this.dom.content.appendChild(this.dom.ccArea),c.default.setStyle(this.dom.ccArea,{width:this.getPlayerWidth()+"px",height:this.getPlayerHeight()+"px"}),c.default.hide(this.dom.ccArea),this.onAddTrack=(0,n.default)(g).call(g,this),this.dom.video.textTracks.addEventListener("addtrack",this.onAddTrack),this.resizeNativeCues=(0,n.default)(b).call(b,this),this.dom.container.addEventListener("resize",this.resizeNativeCues)};var v=u;a.default=v},{"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/includes":86,"@babel/runtime-corejs3/core-js-stable/instance/index-of":87,"@babel/runtime-corejs3/core-js-stable/instance/slice":89,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/core-js-stable/parse-int":101,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.string.replace":438}],77:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.string.split"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/index-of")),o=i(e("@babel/runtime-corejs3/core-js-stable/instance/trim")),l=i(e("../fw/fw")),d=i(e("../core/utils/error"));const c={},u=function(e){this.dummyThumbnailsImg.removeEventListener("load",this.onThumbnailsLoad),this.dummyThumbnailsImg.removeEventListener("error",this.onThumbnailsError),this.dummyThumbnailsImg=null,this.hasThumbnails=!0,this.dom.thumbnailsImg=l.default.createElement("div","rmp-thumbnails"),l.default.addClass(this.dom.seekBar,"rmp-seek-bar-thumbnails"),l.default.setStyle(this.dom.thumbnailsImg,{backgroundImage:'url("'+e+'")'}),this.dom.indicator.appendChild(this.dom.thumbnailsImg)},h=function(e){this.dummyThumbnailsImg.removeEventListener("load",this.onThumbnailsLoad),this.dummyThumbnailsImg.removeEventListener("error",this.onThumbnailsError),this.dummyThumbnailsImg=null;let t=null;e&&(t=e),d.default.warning.call(this,"failed to load sprite image at URI "+this.thumbnailURIs[0],8001,t)},p=function(e,t){const a=e.split("/"),i=t.split("/");a.pop();for(let s=0;s<i.length;s++)"."!==i[s]&&(".."===i[s]?a.pop():a.push(i[s]));return a.join("/")},f=function(e){const t=e.split(/\r\n|\r|\n/g),a=/^\s*$/,i=[];for(let r=0,n=t.length;r<n;r++)a.test(t[r])||i.push(t[r]);if(!/WEBVTT/i.test(i[0]))return void d.default.warning.call(this,"not a valid VTT file - no further action taken",8002,event);i.shift(),this.thumbnailURIs=[],this.thumbnailURIsTimestamps=[];const s=/^(https?:)?\/\//i,c=/^\s*\d*?:?\d*?:?\d+(\.\d+)?\s*-->\s*\d*?:?\d*?:?\d+(\.\d+)?\s*$/;for(let r=0,d=i.length;r<d;r++)if(i[r]&&i[r+1]&&c.test(i[r])){const e=i[r].split("--\x3e"),t=i[r+1].split("#xywh=");if(2===e.length&&(2===t.length||1===t.length)){var f,m,g;const a=(0,o.default)(f=e[0]).call(f),i=(0,o.default)(m=e[1]).call(m),r=[l.default.dateToSeconds(a),l.default.dateToSeconds(i)];let d=t[0];s.test(d)||(d=p(this.seekBarThumbnailsLoc,d)),-1===(0,n.default)(g=this.thumbnailURIs).call(g,d)&&(this.thumbnailURIs.push(d),this.thumbnailURIsTimestamps.push(l.default.dateToSeconds(a))),t[1]?r.push(t[1]):r.push("0,0,128,72"),this.thumbnailsArray.push(r)}}0!==this.thumbnailsArray.length&&0!==this.thumbnailsArray.thumbnailURIs&&0!==this.thumbnailsArray.thumbnailURIsTimestamps?(this.dummyThumbnailsImg=document.createElement("img"),this.currentThumbnailURI=this.thumbnailURIs[0],this.onThumbnailsLoad=(0,r.default)(u).call(u,this,this.currentThumbnailURI),this.onThumbnailsError=(0,r.default)(h).call(h,this),this.dummyThumbnailsImg.addEventListener("load",this.onThumbnailsLoad),this.dummyThumbnailsImg.addEventListener("error",this.onThumbnailsError),this.dummyThumbnailsImg.src=this.currentThumbnailURI):d.default.warning.call(this,"could not parse thumbnails VTT file - corrupted data found",8003,event)};c.destroy=function(){this.dummyThumbnailsImg&&(this.dummyThumbnailsImg.removeEventListener("load",this.onThumbnailsLoad),this.dummyThumbnailsImg.removeEventListener("error",this.onThumbnailsError),this.dummyThumbnailsImg=null),l.default.removeClass(this.dom.seekBar,"rmp-seek-bar-thumbnails"),l.default.removeElement(this.dom.thumbnailsImg),this.hasThumbnails=!1},c.init=function(){l.default.ajax(this.seekBarThumbnailsLoc,this.ajaxTimeout,this.ajaxWithCredentials,"GET").then(e=>{"string"==typeof e&&f.call(this,e)}).catch(e=>{let t=null;e&&(t=e),d.default.warning.call(this,"failed to load VTT thumbnail file at URI "+this.seekBarThumbnailsLoc,8e3,t)})};var m=c;a.default=m},{"../core/utils/error":56,"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/index-of":87,"@babel/runtime-corejs3/core-js-stable/instance/trim":93,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.string.split":439}],78:[function(e,t,a){"use strict";var i=e("@babel/runtime-corejs3/helpers/interopRequireDefault"),s=e("@babel/runtime-corejs3/core-js-stable/object/define-property");e("core-js/modules/es.string.split"),s(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("@babel/runtime-corejs3/core-js-stable/array/is-array")),n=i(e("@babel/runtime-corejs3/core-js-stable/instance/trim")),o=i(e("@babel/runtime-corejs3/core-js-stable/instance/bind")),l=i(e("../fw/fw")),d=i(e("../core/utils/error"));const c={},u=function(e){if(e&&e.target){const t=e.target.getAttribute("data-start-time"),a=1e3*l.default.dateToSeconds(t);0,this.seekTo(a)}},h=function(){if(this.dom.transcriptsContainer=this.dom.container.parentNode.parentNode,!l.default.hasClass(this.dom.transcriptsContainer,"rmp-transcripts-container"))return void d.default.warning.call(this,"cannot append transcripts layout - missing rmp-transcripts-container container",9004,null);this.dom.transcriptsSideMenu=l.default.createElement("div","rmp-transcripts-side-menu rmp-color-bg rmp-color-button");const e=l.default.createElement("div","rmp-transcripts-header",this.labels.hint.transcript,this.rtl);this.dom.transcriptsSideMenu.appendChild(e);const t=l.default.createElement("div","rmp-transcripts-body");let a="";for(let i=0,s=this.transcriptsData.length;i<s;i++)a+='<span data-start-time="'+this.transcriptsData[i].start+'" data-end-time="'+this.transcriptsData[i].end+'" data-cue-settings="'+this.transcriptsData[i].cueSettings+'" class="rmp-transcripts-item">'+this.transcriptsData[i].text+"</span>";t.innerHTML=a,t.addEventListener("click",(0,o.default)(u).call(u,this)),this.dom.transcriptsSideMenu.appendChild(t),this.dom.transcriptsContainer.appendChild(this.dom.transcriptsSideMenu)},p=function(e){const t=e.split(/\r\n|\r|\n/g),a=/^\s*$/,i=[];for(let n=0,d=t.length;n<d;n++)a.test(t[n])||i.push(t[n]);if(!/WEBVTT/i.test(i[0]))return void d.default.warning.call(this,"not a valid VTT file - no further action taken",9002,null);i.shift(),this.transcriptsData=[];const s=/^\s*\d*?:?\d*?:?\d+(\.\d+)?\s*-->\s*\d*?:?\d*?:?\d+(\.\d+)?(\s*|\s+.+)$/,r=/^\d+$/;for(let d=0,c=i.length;d<c;d++)if(i[d]&&i[d+1]&&s.test(i[d])){var o,l;const e=i[d].split("--\x3e"),t=(0,n.default)(o=e[0]).call(o);let a=(0,n.default)(l=e[1]).call(l);const s=a.split(" ");a=s[0];let c="";if(s.length>1)for(let i=1,r=s.length;i<r;i++)c+=s[i],i!==r-1&&(c+="_");let u=i[d+1];i[d+2]&&!r.test(i[d+2])&&(u+=" "+i[d+2],i[d+3]&&!r.test(i[d+3])&&(u+=" "+i[d+3])),2===e.length&&this.transcriptsData.push({start:t,end:a,text:u,cueSettings:c})}0!==this.transcriptsData.length?h.call(this):d.default.warning.call(this,"could not parse transcripts VTT file - corrupted data found",9003,null)};c.detect=function(){return!(!(0,r.default)(this.transcripts[0])||2!==this.transcripts[0].length||"string"!=typeof this.transcripts[0][1]||""===this.transcripts[0][1])},c.init=function(){l.default.ajax(this.transcripts[0][1],this.ajaxTimeout,this.ajaxWithCredentials,"GET").then(e=>{"string"==typeof e&&p.call(this,e)}).catch(e=>{let t=null;e&&(t=e),d.default.warning.call(this,"failed to load VTT transcripts file at URI "+this.transcripts[0][1],9e3,t)})};var f=c;a.default=f},{"../core/utils/error":56,"../fw/fw":70,"@babel/runtime-corejs3/core-js-stable/array/is-array":79,"@babel/runtime-corejs3/core-js-stable/instance/bind":81,"@babel/runtime-corejs3/core-js-stable/instance/trim":93,"@babel/runtime-corejs3/core-js-stable/object/define-property":98,"@babel/runtime-corejs3/helpers/interopRequireDefault":106,"core-js/modules/es.string.split":439}],79:[function(e,t,a){t.exports=e("core-js-pure/stable/array/is-array")},{"core-js-pure/stable/array/is-array":287}],80:[function(e,t,a){t.exports=e("core-js-pure/stable/date/now")},{"core-js-pure/stable/date/now":289}],81:[function(e,t,a){t.exports=e("core-js-pure/stable/instance/bind")},{"core-js-pure/stable/instance/bind":290}],82:[function(e,t,a){t.exports=e("core-js-pure/stable/instance/filter")},{"core-js-pure/stable/instance/filter":291}],83:[function(e,t,a){t.exports=e("core-js-pure/stable/instance/find-index")},{"core-js-pure/stable/instance/find-index":292}],84:[function(e,t,a){t.exports=e("core-js-pure/stable/instance/find")},{"core-js-pure/stable/instance/find":293}],85:[function(e,t,a){t.exports=e("core-js-pure/stable/instance/for-each")},{"core-js-pure/stable/instance/for-each":294}],86:[function(e,t,a){t.exports=e("core-js-pure/stable/instance/includes")},{"core-js-pure/stable/instance/includes":295}],87:[function(e,t,a){t.exports=e("core-js-pure/stable/instance/index-of")},{"core-js-pure/stable/instance/index-of":296}],88:[function(e,t,a){t.exports=e("core-js-pure/stable/instance/reverse")},{"core-js-pure/stable/instance/reverse":297}],89:[function(e,t,a){t.exports=e("core-js-pure/stable/instance/slice")},{"core-js-pure/stable/instance/slice":298}],90:[function(e,t,a){t.exports=e("core-js-pure/stable/instance/sort")},{"core-js-pure/stable/instance/sort":299}],91:[function(e,t,a){t.exports=e("core-js-pure/stable/instance/splice")},{"core-js-pure/stable/instance/splice":300}],92:[function(e,t,a){t.exports=e("core-js-pure/stable/instance/starts-with")},{"core-js-pure/stable/instance/starts-with":301}],93:[function(e,t,a){t.exports=e("core-js-pure/stable/instance/trim")},{"core-js-pure/stable/instance/trim":302}],94:[function(e,t,a){t.exports=e("core-js-pure/stable/json/stringify")},{"core-js-pure/stable/json/stringify":303}],95:[function(e,t,a){t.exports=e("core-js-pure/stable/number/is-finite")},{"core-js-pure/stable/number/is-finite":304}],96:[function(e,t,a){t.exports=e("core-js-pure/stable/number/is-nan")},{"core-js-pure/stable/number/is-nan":305}],97:[function(e,t,a){t.exports=e("core-js-pure/stable/object/assign")},{"core-js-pure/stable/object/assign":306}],98:[function(e,t,a){t.exports=e("core-js-pure/stable/object/define-property")},{"core-js-pure/stable/object/define-property":307}],99:[function(e,t,a){t.exports=e("core-js-pure/stable/object/keys")},{"core-js-pure/stable/object/keys":308}],100:[function(e,t,a){t.exports=e("core-js-pure/stable/parse-float")},{"core-js-pure/stable/parse-float":309}],101:[function(e,t,a){t.exports=e("core-js-pure/stable/parse-int")},{"core-js-pure/stable/parse-int":310}],102:[function(e,t,a){t.exports=e("core-js-pure/stable/promise")},{"core-js-pure/stable/promise":311}],103:[function(e,t,a){t.exports=e("core-js-pure/stable/set-interval")},{"core-js-pure/stable/set-interval":312}],104:[function(e,t,a){t.exports=e("core-js-pure/stable/set-timeout")},{"core-js-pure/stable/set-timeout":313}],105:[function(e,t,a){t.exports=e("core-js-pure/stable/url")},{"core-js-pure/stable/url":314}],106:[function(e,t,a){t.exports=function(e){return e&&e.__esModule?e:{default:e}}},{}],107:[function(e,t,a){e("../../modules/es.array.is-array");var i=e("../../internals/path");t.exports=i.Array.isArray},{"../../internals/path":223,"../../modules/es.array.is-array":258}],108:[function(e,t,a){e("../../../modules/es.array.filter");var i=e("../../../internals/entry-virtual");t.exports=i("Array").filter},{"../../../internals/entry-virtual":174,"../../../modules/es.array.filter":252}],109:[function(e,t,a){e("../../../modules/es.array.find-index");var i=e("../../../internals/entry-virtual");t.exports=i("Array").findIndex},{"../../../internals/entry-virtual":174,"../../../modules/es.array.find-index":253}],110:[function(e,t,a){e("../../../modules/es.array.find");var i=e("../../../internals/entry-virtual");t.exports=i("Array").find},{"../../../internals/entry-virtual":174,"../../../modules/es.array.find":254}],111:[function(e,t,a){e("../../../modules/es.array.for-each");var i=e("../../../internals/entry-virtual");t.exports=i("Array").forEach},{"../../../internals/entry-virtual":174,"../../../modules/es.array.for-each":255}],112:[function(e,t,a){e("../../../modules/es.array.includes");var i=e("../../../internals/entry-virtual");t.exports=i("Array").includes},{"../../../internals/entry-virtual":174,"../../../modules/es.array.includes":256}],113:[function(e,t,a){e("../../../modules/es.array.index-of");var i=e("../../../internals/entry-virtual");t.exports=i("Array").indexOf},{"../../../internals/entry-virtual":174,"../../../modules/es.array.index-of":257}],114:[function(e,t,a){e("../../../modules/es.array.reverse");var i=e("../../../internals/entry-virtual");t.exports=i("Array").reverse},{"../../../internals/entry-virtual":174,"../../../modules/es.array.reverse":260}],115:[function(e,t,a){e("../../../modules/es.array.slice");var i=e("../../../internals/entry-virtual");t.exports=i("Array").slice},{"../../../internals/entry-virtual":174,"../../../modules/es.array.slice":261}],116:[function(e,t,a){e("../../../modules/es.array.sort");var i=e("../../../internals/entry-virtual");t.exports=i("Array").sort},{"../../../internals/entry-virtual":174,"../../../modules/es.array.sort":262}],117:[function(e,t,a){e("../../../modules/es.array.splice");var i=e("../../../internals/entry-virtual");t.exports=i("Array").splice},{"../../../internals/entry-virtual":174,"../../../modules/es.array.splice":263}],118:[function(e,t,a){e("../../modules/es.date.now");var i=e("../../internals/path");t.exports=i.Date.now},{"../../internals/path":223,"../../modules/es.date.now":264}],119:[function(e,t,a){e("../../../modules/es.function.bind");var i=e("../../../internals/entry-virtual");t.exports=i("Function").bind},{"../../../internals/entry-virtual":174,"../../../modules/es.function.bind":265}],120:[function(e,t,a){var i=e("../function/virtual/bind"),s=Function.prototype;t.exports=function(e){var t=e.bind;return e===s||e instanceof Function&&t===s.bind?i:t}},{"../function/virtual/bind":119}],121:[function(e,t,a){var i=e("../array/virtual/filter"),s=Array.prototype;t.exports=function(e){var t=e.filter;return e===s||e instanceof Array&&t===s.filter?i:t}},{"../array/virtual/filter":108}],122:[function(e,t,a){var i=e("../array/virtual/find-index"),s=Array.prototype;t.exports=function(e){var t=e.findIndex;return e===s||e instanceof Array&&t===s.findIndex?i:t}},{"../array/virtual/find-index":109}],123:[function(e,t,a){var i=e("../array/virtual/find"),s=Array.prototype;t.exports=function(e){var t=e.find;return e===s||e instanceof Array&&t===s.find?i:t}},{"../array/virtual/find":110}],124:[function(e,t,a){var i=e("../array/virtual/includes"),s=e("../string/virtual/includes"),r=Array.prototype,n=String.prototype;t.exports=function(e){var t=e.includes;return e===r||e instanceof Array&&t===r.includes?i:"string"==typeof e||e===n||e instanceof String&&t===n.includes?s:t}},{"../array/virtual/includes":112,"../string/virtual/includes":141}],125:[function(e,t,a){var i=e("../array/virtual/index-of"),s=Array.prototype;t.exports=function(e){var t=e.indexOf;return e===s||e instanceof Array&&t===s.indexOf?i:t}},{"../array/virtual/index-of":113}],126:[function(e,t,a){var i=e("../array/virtual/reverse"),s=Array.prototype;t.exports=function(e){var t=e.reverse;return e===s||e instanceof Array&&t===s.reverse?i:t}},{"../array/virtual/reverse":114}],127:[function(e,t,a){var i=e("../array/virtual/slice"),s=Array.prototype;t.exports=function(e){var t=e.slice;return e===s||e instanceof Array&&t===s.slice?i:t}},{"../array/virtual/slice":115}],128:[function(e,t,a){var i=e("../array/virtual/sort"),s=Array.prototype;t.exports=function(e){var t=e.sort;return e===s||e instanceof Array&&t===s.sort?i:t}},{"../array/virtual/sort":116}],129:[function(e,t,a){var i=e("../array/virtual/splice"),s=Array.prototype;t.exports=function(e){var t=e.splice;return e===s||e instanceof Array&&t===s.splice?i:t}},{"../array/virtual/splice":117}],130:[function(e,t,a){var i=e("../string/virtual/starts-with"),s=String.prototype;t.exports=function(e){var t=e.startsWith;return"string"==typeof e||e===s||e instanceof String&&t===s.startsWith?i:t}},{"../string/virtual/starts-with":142}],131:[function(e,t,a){var i=e("../string/virtual/trim"),s=String.prototype;t.exports=function(e){var t=e.trim;return"string"==typeof e||e===s||e instanceof String&&t===s.trim?i:t}},{"../string/virtual/trim":143}],132:[function(e,t,a){e("../../modules/es.json.stringify");var i=e("../../internals/path");i.JSON||(i.JSON={stringify:JSON.stringify}),t.exports=function(e,t,a){return i.JSON.stringify.apply(null,arguments)}},{"../../internals/path":223,"../../modules/es.json.stringify":266}],133:[function(e,t,a){e("../../modules/es.number.is-finite");var i=e("../../internals/path");t.exports=i.Number.isFinite},{"../../internals/path":223,"../../modules/es.number.is-finite":267}],134:[function(e,t,a){e("../../modules/es.number.is-nan");var i=e("../../internals/path");t.exports=i.Number.isNaN},{"../../internals/path":223,"../../modules/es.number.is-nan":268}],135:[function(e,t,a){e("../../modules/es.object.assign");var i=e("../../internals/path");t.exports=i.Object.assign},{"../../internals/path":223,"../../modules/es.object.assign":269}],136:[function(e,t,a){e("../../modules/es.object.define-property");var i=e("../../internals/path").Object,s=t.exports=function(e,t,a){return i.defineProperty(e,t,a)};i.defineProperty.sham&&(s.sham=!0)},{"../../internals/path":223,"../../modules/es.object.define-property":270}],137:[function(e,t,a){e("../../modules/es.object.keys");var i=e("../../internals/path");t.exports=i.Object.keys},{"../../internals/path":223,"../../modules/es.object.keys":271}],138:[function(e,t,a){e("../modules/es.parse-float");var i=e("../internals/path");t.exports=i.parseFloat},{"../internals/path":223,"../modules/es.parse-float":273}],139:[function(e,t,a){e("../modules/es.parse-int");var i=e("../internals/path");t.exports=i.parseInt},{"../internals/path":223,"../modules/es.parse-int":274}],140:[function(e,t,a){e("../../modules/es.object.to-string"),e("../../modules/es.string.iterator"),e("../../modules/web.dom-collections.iterator"),e("../../modules/es.promise"),e("../../modules/es.promise.all-settled"),e("../../modules/es.promise.finally");var i=e("../../internals/path");t.exports=i.Promise},{"../../internals/path":223,"../../modules/es.object.to-string":272,"../../modules/es.promise":277,"../../modules/es.promise.all-settled":275,"../../modules/es.promise.finally":276,"../../modules/es.string.iterator":279,"../../modules/web.dom-collections.iterator":282}],141:[function(e,t,a){e("../../../modules/es.string.includes");var i=e("../../../internals/entry-virtual");t.exports=i("String").includes},{"../../../internals/entry-virtual":174,"../../../modules/es.string.includes":278}],142:[function(e,t,a){e("../../../modules/es.string.starts-with");var i=e("../../../internals/entry-virtual");t.exports=i("String").startsWith},{"../../../internals/entry-virtual":174,"../../../modules/es.string.starts-with":280}],143:[function(e,t,a){e("../../../modules/es.string.trim");var i=e("../../../internals/entry-virtual");t.exports=i("String").trim},{"../../../internals/entry-virtual":174,"../../../modules/es.string.trim":281}],144:[function(e,t,a){t.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},{}],145:[function(e,t,a){var i=e("../internals/is-object");t.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},{"../internals/is-object":195}],146:[function(e,t,a){t.exports=function(){}},{}],147:[function(e,t,a){t.exports=function(e,t,a){if(!(e instanceof t))throw TypeError("Incorrect "+(a?a+" ":"")+"invocation");return e}},{}],148:[function(e,t,a){var i=e("../internals/is-object");t.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},{"../internals/is-object":195}],149:[function(e,t,a){"use strict";var i=e("../internals/array-iteration").forEach,s=e("../internals/array-method-is-strict"),r=e("../internals/array-method-uses-to-length"),n=s("forEach"),o=r("forEach");t.exports=n&&o?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},{"../internals/array-iteration":152,"../internals/array-method-is-strict":154,"../internals/array-method-uses-to-length":155}],150:[function(e,t,a){"use strict";var i=e("../internals/function-bind-context"),s=e("../internals/to-object"),r=e("../internals/call-with-safe-iteration-closing"),n=e("../internals/is-array-iterator-method"),o=e("../internals/to-length"),l=e("../internals/create-property"),d=e("../internals/get-iterator-method");t.exports=function(e){var t,a,c,u,h,p,f=s(e),m="function"==typeof this?this:Array,g=arguments.length,b=g>1?arguments[1]:void 0,v=void 0!==b,y=d(f),k=0;if(v&&(b=i(b,g>2?arguments[2]:void 0,2)),null==y||m==Array&&n(y))for(a=new m(t=o(f.length));t>k;k++)p=v?b(f[k],k):f[k],l(a,k,p);else for(h=(u=y.call(f)).next,a=new m;!(c=h.call(u)).done;k++)p=v?r(u,b,[c.value,k],!0):c.value,l(a,k,p);return a.length=k,a}},{"../internals/call-with-safe-iteration-closing":157,"../internals/create-property":166,"../internals/function-bind-context":178,"../internals/get-iterator-method":181,"../internals/is-array-iterator-method":192,"../internals/to-length":244,"../internals/to-object":245}],151:[function(e,t,a){var i=e("../internals/to-indexed-object"),s=e("../internals/to-length"),r=e("../internals/to-absolute-index"),n=function(e){return function(t,a,n){var o,l=i(t),d=s(l.length),c=r(n,d);if(e&&a!=a){for(;d>c;)if((o=l[c++])!=o)return!0}else for(;d>c;c++)if((e||c in l)&&l[c]===a)return e||c||0;return!e&&-1}};t.exports={includes:n(!0),indexOf:n(!1)}},{"../internals/to-absolute-index":241,"../internals/to-indexed-object":242,"../internals/to-length":244}],152:[function(e,t,a){var i=e("../internals/function-bind-context"),s=e("../internals/indexed-object"),r=e("../internals/to-object"),n=e("../internals/to-length"),o=e("../internals/array-species-create"),l=[].push,d=function(e){var t=1==e,a=2==e,d=3==e,c=4==e,u=6==e,h=5==e||u;return function(p,f,m,g){for(var b,v,y=r(p),k=s(y),w=i(f,m,3),S=n(k.length),C=0,j=g||o,E=t?j(p,S):a?j(p,0):void 0;S>C;C++)if((h||C in k)&&(v=w(b=k[C],C,y),e))if(t)E[C]=v;else if(v)switch(e){case 3:return!0;case 5:return b;case 6:return C;case 2:l.call(E,b)}else if(c)return!1;return u?-1:d||c?c:E}};t.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6)}},{"../internals/array-species-create":156,"../internals/function-bind-context":178,"../internals/indexed-object":189,"../internals/to-length":244,"../internals/to-object":245}],153:[function(e,t,a){var i=e("../internals/fails"),s=e("../internals/well-known-symbol"),r=e("../internals/engine-v8-version"),n=s("species");t.exports=function(e){return r>=51||!i((function(){var t=[];return(t.constructor={})[n]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},{"../internals/engine-v8-version":173,"../internals/fails":177,"../internals/well-known-symbol":250}],154:[function(e,t,a){"use strict";var i=e("../internals/fails");t.exports=function(e,t){var a=[][e];return!!a&&i((function(){a.call(null,t||function(){throw 1},1)}))}},{"../internals/fails":177}],155:[function(e,t,a){var i=e("../internals/descriptors"),s=e("../internals/fails"),r=e("../internals/has"),n=Object.defineProperty,o={},l=function(e){throw e};t.exports=function(e,t){if(r(o,e))return o[e];t||(t={});var a=[][e],d=!!r(t,"ACCESSORS")&&t.ACCESSORS,c=r(t,0)?t[0]:l,u=r(t,1)?t[1]:void 0;return o[e]=!!a&&!s((function(){if(d&&!i)return!0;var e={length:-1};d?n(e,1,{enumerable:!0,get:l}):e[1]=1,a.call(e,c,u)}))}},{"../internals/descriptors":168,"../internals/fails":177,"../internals/has":184}],156:[function(e,t,a){var i=e("../internals/is-object"),s=e("../internals/is-array"),r=e("../internals/well-known-symbol")("species");t.exports=function(e,t){var a;return s(e)&&("function"!=typeof(a=e.constructor)||a!==Array&&!s(a.prototype)?i(a)&&null===(a=a[r])&&(a=void 0):a=void 0),new(void 0===a?Array:a)(0===t?0:t)}},{"../internals/is-array":193,"../internals/is-object":195,"../internals/well-known-symbol":250}],157:[function(e,t,a){var i=e("../internals/an-object");t.exports=function(e,t,a,s){try{return s?t(i(a)[0],a[1]):t(a)}catch(n){var r=e.return;throw void 0!==r&&i(r.call(e)),n}}},{"../internals/an-object":148}],158:[function(e,t,a){var i=e("../internals/well-known-symbol")("iterator"),s=!1;try{var r=0,n={next:function(){return{done:!!r++}},return:function(){s=!0}};n[i]=function(){return this},Array.from(n,(function(){throw 2}))}catch(o){}t.exports=function(e,t){if(!t&&!s)return!1;var a=!1;try{var r={};r[i]=function(){return{next:function(){return{done:a=!0}}}},e(r)}catch(o){}return a}},{"../internals/well-known-symbol":250}],159:[function(e,t,a){var i={}.toString;t.exports=function(e){return i.call(e).slice(8,-1)}},{}],160:[function(e,t,a){var i=e("../internals/to-string-tag-support"),s=e("../internals/classof-raw"),r=e("../internals/well-known-symbol")("toStringTag"),n="Arguments"==s(function(){return arguments}());t.exports=i?s:function(e){var t,a,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(a=function(e,t){try{return e[t]}catch(a){}}(t=Object(e),r))?a:n?s(t):"Object"==(i=s(t))&&"function"==typeof t.callee?"Arguments":i}},{"../internals/classof-raw":159,"../internals/to-string-tag-support":247,"../internals/well-known-symbol":250}],161:[function(e,t,a){var i=e("../internals/well-known-symbol")("match");t.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[i]=!1,"/./"[e](t)}catch(s){}}return!1}},{"../internals/well-known-symbol":250}],162:[function(e,t,a){var i=e("../internals/fails");t.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},{"../internals/fails":177}],163:[function(e,t,a){"use strict";var i=e("../internals/iterators-core").IteratorPrototype,s=e("../internals/object-create"),r=e("../internals/create-property-descriptor"),n=e("../internals/set-to-string-tag"),o=e("../internals/iterators"),l=function(){return this};t.exports=function(e,t,a){var d=t+" Iterator";return e.prototype=s(i,{next:r(1,a)}),n(e,d,!1,!0),o[d]=l,e}},{"../internals/create-property-descriptor":165,"../internals/iterators":200,"../internals/iterators-core":199,"../internals/object-create":212,"../internals/set-to-string-tag":231}],164:[function(e,t,a){var i=e("../internals/descriptors"),s=e("../internals/object-define-property"),r=e("../internals/create-property-descriptor");t.exports=i?function(e,t,a){return s.f(e,t,r(1,a))}:function(e,t,a){return e[t]=a,e}},{"../internals/create-property-descriptor":165,"../internals/descriptors":168,"../internals/object-define-property":214}],165:[function(e,t,a){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],166:[function(e,t,a){"use strict";var i=e("../internals/to-primitive"),s=e("../internals/object-define-property"),r=e("../internals/create-property-descriptor");t.exports=function(e,t,a){var n=i(t);n in e?s.f(e,n,r(0,a)):e[n]=a}},{"../internals/create-property-descriptor":165,"../internals/object-define-property":214,"../internals/to-primitive":246}],167:[function(e,t,a){"use strict";var i=e("../internals/export"),s=e("../internals/create-iterator-constructor"),r=e("../internals/object-get-prototype-of"),n=e("../internals/object-set-prototype-of"),o=e("../internals/set-to-string-tag"),l=e("../internals/create-non-enumerable-property"),d=e("../internals/redefine"),c=e("../internals/well-known-symbol"),u=e("../internals/is-pure"),h=e("../internals/iterators"),p=e("../internals/iterators-core"),f=p.IteratorPrototype,m=p.BUGGY_SAFARI_ITERATORS,g=c("iterator"),b=function(){return this};t.exports=function(e,t,a,c,p,v,y){s(a,t,c);var k,w,S,C=function(e){if(e===p&&T)return T;if(!m&&e in L)return L[e];switch(e){case"keys":case"values":case"entries":return function(){return new a(this,e)}}return function(){return new a(this)}},j=t+" Iterator",E=!1,L=e.prototype,A=L[g]||L["@@iterator"]||p&&L[p],T=!m&&A||C(p),P="Array"==t&&L.entries||A;if(P&&(k=r(P.call(new e)),f!==Object.prototype&&k.next&&(u||r(k)===f||(n?n(k,f):"function"!=typeof k[g]&&l(k,g,b)),o(k,j,!0,!0),u&&(h[j]=b))),"values"==p&&A&&"values"!==A.name&&(E=!0,T=function(){return A.call(this)}),u&&!y||L[g]===T||l(L,g,T),h[t]=T,p)if(w={values:C("values"),keys:v?T:C("keys"),entries:C("entries")},y)for(S in w)(m||E||!(S in L))&&d(L,S,w[S]);else i({target:t,proto:!0,forced:m||E},w);return w}},{"../internals/create-iterator-constructor":163,"../internals/create-non-enumerable-property":164,"../internals/export":176,"../internals/is-pure":196,"../internals/iterators":200,"../internals/iterators-core":199,"../internals/object-get-prototype-of":217,"../internals/object-set-prototype-of":221,"../internals/redefine":227,"../internals/set-to-string-tag":231,"../internals/well-known-symbol":250}],168:[function(e,t,a){var i=e("../internals/fails");t.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},{"../internals/fails":177}],169:[function(e,t,a){var i=e("../internals/global"),s=e("../internals/is-object"),r=i.document,n=s(r)&&s(r.createElement);t.exports=function(e){return n?r.createElement(e):{}}},{"../internals/global":183,"../internals/is-object":195}],170:[function(e,t,a){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],171:[function(e,t,a){var i=e("../internals/engine-user-agent");t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(i)},{"../internals/engine-user-agent":172}],172:[function(e,t,a){var i=e("../internals/get-built-in");t.exports=i("navigator","userAgent")||""},{"../internals/get-built-in":180}],173:[function(e,t,a){var i,s,r=e("../internals/global"),n=e("../internals/engine-user-agent"),o=r.process,l=o&&o.versions,d=l&&l.v8;d?s=(i=d.split("."))[0]+i[1]:n&&(!(i=n.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=n.match(/Chrome\/(\d+)/))&&(s=i[1]),t.exports=s&&+s},{"../internals/engine-user-agent":172,"../internals/global":183}],174:[function(e,t,a){var i=e("../internals/path");t.exports=function(e){return i[e+"Prototype"]}},{"../internals/path":223}],175:[function(e,t,a){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],176:[function(e,t,a){"use strict";var i=e("../internals/global"),s=e("../internals/object-get-own-property-descriptor").f,r=e("../internals/is-forced"),n=e("../internals/path"),o=e("../internals/function-bind-context"),l=e("../internals/create-non-enumerable-property"),d=e("../internals/has"),c=function(e){var t=function(t,a,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,a)}return new e(t,a,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t};t.exports=function(e,t){var a,u,h,p,f,m,g,b,v=e.target,y=e.global,k=e.stat,w=e.proto,S=y?i:k?i[v]:(i[v]||{}).prototype,C=y?n:n[v]||(n[v]={}),j=C.prototype;for(h in t)a=!r(y?h:v+(k?".":"#")+h,e.forced)&&S&&d(S,h),f=C[h],a&&(m=e.noTargetGet?(b=s(S,h))&&b.value:S[h]),p=a&&m?m:t[h],a&&typeof f==typeof p||(g=e.bind&&a?o(p,i):e.wrap&&a?c(p):w&&"function"==typeof p?o(Function.call,p):p,(e.sham||p&&p.sham||f&&f.sham)&&l(g,"sham",!0),C[h]=g,w&&(d(n,u=v+"Prototype")||l(n,u,{}),n[u][h]=p,e.real&&j&&!j[h]&&l(j,h,p)))}},{"../internals/create-non-enumerable-property":164,"../internals/function-bind-context":178,"../internals/global":183,"../internals/has":184,"../internals/is-forced":194,"../internals/object-get-own-property-descriptor":215,"../internals/path":223}],177:[function(e,t,a){t.exports=function(e){try{return!!e()}catch(t){return!0}}},{}],178:[function(e,t,a){var i=e("../internals/a-function");t.exports=function(e,t,a){if(i(e),void 0===t)return e;switch(a){case 0:return function(){return e.call(t)};case 1:return function(a){return e.call(t,a)};case 2:return function(a,i){return e.call(t,a,i)};case 3:return function(a,i,s){return e.call(t,a,i,s)}}return function(){return e.apply(t,arguments)}}},{"../internals/a-function":144}],179:[function(e,t,a){"use strict";var i=e("../internals/a-function"),s=e("../internals/is-object"),r=[].slice,n={},o=function(e,t,a){if(!(t in n)){for(var i=[],s=0;s<t;s++)i[s]="a["+s+"]";n[t]=Function("C,a","return new C("+i.join(",")+")")}return n[t](e,a)};t.exports=Function.bind||function(e){var t=i(this),a=r.call(arguments,1),n=function(){var i=a.concat(r.call(arguments));return this instanceof n?o(t,i.length,i):t.apply(e,i)};return s(t.prototype)&&(n.prototype=t.prototype),n}},{"../internals/a-function":144,"../internals/is-object":195}],180:[function(e,t,a){var i=e("../internals/path"),s=e("../internals/global"),r=function(e){return"function"==typeof e?e:void 0};t.exports=function(e,t){return arguments.length<2?r(i[e])||r(s[e]):i[e]&&i[e][t]||s[e]&&s[e][t]}},{"../internals/global":183,"../internals/path":223}],181:[function(e,t,a){var i=e("../internals/classof"),s=e("../internals/iterators"),r=e("../internals/well-known-symbol")("iterator");t.exports=function(e){if(null!=e)return e[r]||e["@@iterator"]||s[i(e)]}},{"../internals/classof":160,"../internals/iterators":200,"../internals/well-known-symbol":250}],182:[function(e,t,a){var i=e("../internals/an-object"),s=e("../internals/get-iterator-method");t.exports=function(e){var t=s(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return i(t.call(e))}},{"../internals/an-object":148,"../internals/get-iterator-method":181}],183:[function(e,t,a){(function(e){var a=function(e){return e&&e.Math==Math&&e};t.exports=a("object"==typeof globalThis&&globalThis)||a("object"==typeof window&&window)||a("object"==typeof self&&self)||a("object"==typeof e&&e)||Function("return this")()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],184:[function(e,t,a){var i={}.hasOwnProperty;t.exports=function(e,t){return i.call(e,t)}},{}],185:[function(e,t,a){t.exports={}},{}],186:[function(e,t,a){var i=e("../internals/global");t.exports=function(e,t){var a=i.console;a&&a.error&&(1===arguments.length?a.error(e):a.error(e,t))}},{"../internals/global":183}],187:[function(e,t,a){var i=e("../internals/get-built-in");t.exports=i("document","documentElement")},{"../internals/get-built-in":180}],188:[function(e,t,a){var i=e("../internals/descriptors"),s=e("../internals/fails"),r=e("../internals/document-create-element");t.exports=!i&&!s((function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},{"../internals/descriptors":168,"../internals/document-create-element":169,"../internals/fails":177}],189:[function(e,t,a){var i=e("../internals/fails"),s=e("../internals/classof-raw"),r="".split;t.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?r.call(e,""):Object(e)}:Object},{"../internals/classof-raw":159,"../internals/fails":177}],190:[function(e,t,a){var i=e("../internals/shared-store"),s=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return s.call(e)}),t.exports=i.inspectSource},{"../internals/shared-store":233}],191:[function(e,t,a){var i,s,r,n=e("../internals/native-weak-map"),o=e("../internals/global"),l=e("../internals/is-object"),d=e("../internals/create-non-enumerable-property"),c=e("../internals/has"),u=e("../internals/shared-key"),h=e("../internals/hidden-keys"),p=o.WeakMap;if(n){var f=new p,m=f.get,g=f.has,b=f.set;i=function(e,t){return b.call(f,e,t),t},s=function(e){return m.call(f,e)||{}},r=function(e){return g.call(f,e)}}else{var v=u("state");h[v]=!0,i=function(e,t){return d(e,v,t),t},s=function(e){return c(e,v)?e[v]:{}},r=function(e){return c(e,v)}}t.exports={set:i,get:s,has:r,enforce:function(e){return r(e)?s(e):i(e,{})},getterFor:function(e){return function(t){var a;if(!l(t)||(a=s(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return a}}}},{"../internals/create-non-enumerable-property":164,"../internals/global":183,"../internals/has":184,"../internals/hidden-keys":185,"../internals/is-object":195,"../internals/native-weak-map":205,"../internals/shared-key":232}],192:[function(e,t,a){var i=e("../internals/well-known-symbol"),s=e("../internals/iterators"),r=i("iterator"),n=Array.prototype;t.exports=function(e){return void 0!==e&&(s.Array===e||n[r]===e)}},{"../internals/iterators":200,"../internals/well-known-symbol":250}],193:[function(e,t,a){var i=e("../internals/classof-raw");t.exports=Array.isArray||function(e){return"Array"==i(e)}},{"../internals/classof-raw":159}],194:[function(e,t,a){var i=e("../internals/fails"),s=/#|\.prototype\./,r=function(e,t){var a=o[n(e)];return a==d||a!=l&&("function"==typeof t?i(t):!!t)},n=r.normalize=function(e){return String(e).replace(s,".").toLowerCase()},o=r.data={},l=r.NATIVE="N",d=r.POLYFILL="P";t.exports=r},{"../internals/fails":177}],195:[function(e,t,a){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],196:[function(e,t,a){t.exports=!0},{}],197:[function(e,t,a){var i=e("../internals/is-object"),s=e("../internals/classof-raw"),r=e("../internals/well-known-symbol")("match");t.exports=function(e){var t;return i(e)&&(void 0!==(t=e[r])?!!t:"RegExp"==s(e))}},{"../internals/classof-raw":159,"../internals/is-object":195,"../internals/well-known-symbol":250}],198:[function(e,t,a){var i=e("../internals/an-object"),s=e("../internals/is-array-iterator-method"),r=e("../internals/to-length"),n=e("../internals/function-bind-context"),o=e("../internals/get-iterator-method"),l=e("../internals/call-with-safe-iteration-closing"),d=function(e,t){this.stopped=e,this.result=t};(t.exports=function(e,t,a,c,u){var h,p,f,m,g,b,v,y=n(t,a,c?2:1);if(u)h=e;else{if("function"!=typeof(p=o(e)))throw TypeError("Target is not iterable");if(s(p)){for(f=0,m=r(e.length);m>f;f++)if((g=c?y(i(v=e[f])[0],v[1]):y(e[f]))&&g instanceof d)return g;return new d(!1)}h=p.call(e)}for(b=h.next;!(v=b.call(h)).done;)if("object"==typeof(g=l(h,y,v.value,c))&&g&&g instanceof d)return g;return new d(!1)}).stop=function(e){return new d(!0,e)}},{"../internals/an-object":148,"../internals/call-with-safe-iteration-closing":157,"../internals/function-bind-context":178,"../internals/get-iterator-method":181,"../internals/is-array-iterator-method":192,"../internals/to-length":244}],199:[function(e,t,a){"use strict";var i,s,r,n=e("../internals/object-get-prototype-of"),o=e("../internals/create-non-enumerable-property"),l=e("../internals/has"),d=e("../internals/well-known-symbol"),c=e("../internals/is-pure"),u=d("iterator"),h=!1;[].keys&&("next"in(r=[].keys())?(s=n(n(r)))!==Object.prototype&&(i=s):h=!0),null==i&&(i={}),c||l(i,u)||o(i,u,(function(){return this})),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:h}},{"../internals/create-non-enumerable-property":164,"../internals/has":184,"../internals/is-pure":196,"../internals/object-get-prototype-of":217,"../internals/well-known-symbol":250}],200:[function(e,t,a){arguments[4][185][0].apply(a,arguments)},{dup:185}],201:[function(e,t,a){var i,s,r,n,o,l,d,c,u=e("../internals/global"),h=e("../internals/object-get-own-property-descriptor").f,p=e("../internals/classof-raw"),f=e("../internals/task").set,m=e("../internals/engine-is-ios"),g=u.MutationObserver||u.WebKitMutationObserver,b=u.process,v=u.Promise,y="process"==p(b),k=h(u,"queueMicrotask"),w=k&&k.value;w||(i=function(){var e,t;for(y&&(e=b.domain)&&e.exit();s;){t=s.fn,s=s.next;try{t()}catch(a){throw s?n():r=void 0,a}}r=void 0,e&&e.enter()},y?n=function(){b.nextTick(i)}:g&&!m?(o=!0,l=document.createTextNode(""),new g(i).observe(l,{characterData:!0}),n=function(){l.data=o=!o}):v&&v.resolve?(d=v.resolve(void 0),c=d.then,n=function(){c.call(d,i)}):n=function(){f.call(u,i)}),t.exports=w||function(e){var t={fn:e,next:void 0};r&&(r.next=t),s||(s=t,n()),r=t}},{"../internals/classof-raw":159,"../internals/engine-is-ios":171,"../internals/global":183,"../internals/object-get-own-property-descriptor":215,"../internals/task":240}],202:[function(e,t,a){var i=e("../internals/global");t.exports=i.Promise},{"../internals/global":183}],203:[function(e,t,a){var i=e("../internals/fails");t.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())}))},{"../internals/fails":177}],204:[function(e,t,a){var i=e("../internals/fails"),s=e("../internals/well-known-symbol"),r=e("../internals/is-pure"),n=s("iterator");t.exports=!i((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,a="";return e.pathname="c%20d",t.forEach((function(e,i){t.delete("b"),a+=i+e})),r&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[n]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==a||"x"!==new URL("http://x",void 0).host}))},{"../internals/fails":177,"../internals/is-pure":196,"../internals/well-known-symbol":250}],205:[function(e,t,a){var i=e("../internals/global"),s=e("../internals/inspect-source"),r=i.WeakMap;t.exports="function"==typeof r&&/native code/.test(s(r))},{"../internals/global":183,"../internals/inspect-source":190}],206:[function(e,t,a){"use strict";var i=e("../internals/a-function"),s=function(e){var t,a;this.promise=new e((function(e,i){if(void 0!==t||void 0!==a)throw TypeError("Bad Promise constructor");t=e,a=i})),this.resolve=i(t),this.reject=i(a)};t.exports.f=function(e){return new s(e)}},{"../internals/a-function":144}],207:[function(e,t,a){var i=e("../internals/is-regexp");t.exports=function(e){if(i(e))throw TypeError("The method doesn't accept regular expressions");return e}},{"../internals/is-regexp":197}],208:[function(e,t,a){var i=e("../internals/global").isFinite;t.exports=Number.isFinite||function(e){return"number"==typeof e&&i(e)}},{"../internals/global":183}],209:[function(e,t,a){var i=e("../internals/global"),s=e("../internals/string-trim").trim,r=e("../internals/whitespaces"),n=i.parseFloat,o=1/n(r+"-0")!=-1/0;t.exports=o?function(e){var t=s(String(e)),a=n(t);return 0===a&&"-"==t.charAt(0)?-0:a}:n},{"../internals/global":183,"../internals/string-trim":239,"../internals/whitespaces":251}],210:[function(e,t,a){var i=e("../internals/global"),s=e("../internals/string-trim").trim,r=e("../internals/whitespaces"),n=i.parseInt,o=/^[+-]?0[Xx]/,l=8!==n(r+"08")||22!==n(r+"0x16");t.exports=l?function(e,t){var a=s(String(e));return n(a,t>>>0||(o.test(a)?16:10))}:n},{"../internals/global":183,"../internals/string-trim":239,"../internals/whitespaces":251}],211:[function(e,t,a){"use strict";var i=e("../internals/descriptors"),s=e("../internals/fails"),r=e("../internals/object-keys"),n=e("../internals/object-get-own-property-symbols"),o=e("../internals/object-property-is-enumerable"),l=e("../internals/to-object"),d=e("../internals/indexed-object"),c=Object.assign,u=Object.defineProperty;t.exports=!c||s((function(){if(i&&1!==c({b:1},c(u({},"a",{enumerable:!0,get:function(){u(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},a=Symbol();return e[a]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=c({},e)[a]||"abcdefghijklmnopqrst"!=r(c({},t)).join("")}))?function(e,t){for(var a=l(e),s=arguments.length,c=1,u=n.f,h=o.f;s>c;)for(var p,f=d(arguments[c++]),m=u?r(f).concat(u(f)):r(f),g=m.length,b=0;g>b;)p=m[b++],i&&!h.call(f,p)||(a[p]=f[p]);return a}:c},{"../internals/descriptors":168,"../internals/fails":177,"../internals/indexed-object":189,"../internals/object-get-own-property-symbols":216,"../internals/object-keys":219,"../internals/object-property-is-enumerable":220,"../internals/to-object":245}],212:[function(e,t,a){var i,s=e("../internals/an-object"),r=e("../internals/object-define-properties"),n=e("../internals/enum-bug-keys"),o=e("../internals/hidden-keys"),l=e("../internals/html"),d=e("../internals/document-create-element"),c=e("../internals/shared-key"),u=c("IE_PROTO"),h=function(){},p=function(e){return"<script>"+e+"<\/script>"},f=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(s){}var e,t;f=i?function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t}(i):((t=d("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F);for(var a=n.length;a--;)delete f.prototype[n[a]];return f()};o[u]=!0,t.exports=Object.create||function(e,t){var a;return null!==e?(h.prototype=s(e),a=new h,h.prototype=null,a[u]=e):a=f(),void 0===t?a:r(a,t)}},{"../internals/an-object":148,"../internals/document-create-element":169,"../internals/enum-bug-keys":175,"../internals/hidden-keys":185,"../internals/html":187,"../internals/object-define-properties":213,"../internals/shared-key":232}],213:[function(e,t,a){var i=e("../internals/descriptors"),s=e("../internals/object-define-property"),r=e("../internals/an-object"),n=e("../internals/object-keys");t.exports=i?Object.defineProperties:function(e,t){r(e);for(var a,i=n(t),o=i.length,l=0;o>l;)s.f(e,a=i[l++],t[a]);return e}},{"../internals/an-object":148,"../internals/descriptors":168,"../internals/object-define-property":214,"../internals/object-keys":219}],214:[function(e,t,a){var i=e("../internals/descriptors"),s=e("../internals/ie8-dom-define"),r=e("../internals/an-object"),n=e("../internals/to-primitive"),o=Object.defineProperty;a.f=i?o:function(e,t,a){if(r(e),t=n(t,!0),r(a),s)try{return o(e,t,a)}catch(i){}if("get"in a||"set"in a)throw TypeError("Accessors not supported");return"value"in a&&(e[t]=a.value),e}},{"../internals/an-object":148,"../internals/descriptors":168,"../internals/ie8-dom-define":188,"../internals/to-primitive":246}],215:[function(e,t,a){var i=e("../internals/descriptors"),s=e("../internals/object-property-is-enumerable"),r=e("../internals/create-property-descriptor"),n=e("../internals/to-indexed-object"),o=e("../internals/to-primitive"),l=e("../internals/has"),d=e("../internals/ie8-dom-define"),c=Object.getOwnPropertyDescriptor;a.f=i?c:function(e,t){if(e=n(e),t=o(t,!0),d)try{return c(e,t)}catch(a){}if(l(e,t))return r(!s.f.call(e,t),e[t])}},{"../internals/create-property-descriptor":165,"../internals/descriptors":168,"../internals/has":184,"../internals/ie8-dom-define":188,"../internals/object-property-is-enumerable":220,"../internals/to-indexed-object":242,"../internals/to-primitive":246}],216:[function(e,t,a){a.f=Object.getOwnPropertySymbols},{}],217:[function(e,t,a){var i=e("../internals/has"),s=e("../internals/to-object"),r=e("../internals/shared-key"),n=e("../internals/correct-prototype-getter"),o=r("IE_PROTO"),l=Object.prototype;t.exports=n?Object.getPrototypeOf:function(e){return e=s(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},{"../internals/correct-prototype-getter":162,"../internals/has":184,"../internals/shared-key":232,"../internals/to-object":245}],218:[function(e,t,a){var i=e("../internals/has"),s=e("../internals/to-indexed-object"),r=e("../internals/array-includes").indexOf,n=e("../internals/hidden-keys");t.exports=function(e,t){var a,o=s(e),l=0,d=[];for(a in o)!i(n,a)&&i(o,a)&&d.push(a);for(;t.length>l;)i(o,a=t[l++])&&(~r(d,a)||d.push(a));return d}},{"../internals/array-includes":151,"../internals/has":184,"../internals/hidden-keys":185,"../internals/to-indexed-object":242}],219:[function(e,t,a){var i=e("../internals/object-keys-internal"),s=e("../internals/enum-bug-keys");t.exports=Object.keys||function(e){return i(e,s)}},{"../internals/enum-bug-keys":175,"../internals/object-keys-internal":218}],220:[function(e,t,a){"use strict";var i={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,r=s&&!i.call({1:2},1);a.f=r?function(e){var t=s(this,e);return!!t&&t.enumerable}:i},{}],221:[function(e,t,a){var i=e("../internals/an-object"),s=e("../internals/a-possible-prototype");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,a={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(a,[]),t=a instanceof Array}catch(r){}return function(a,r){return i(a),s(r),t?e.call(a,r):a.__proto__=r,a}}():void 0)},{"../internals/a-possible-prototype":145,"../internals/an-object":148}],222:[function(e,t,a){"use strict";var i=e("../internals/to-string-tag-support"),s=e("../internals/classof");t.exports=i?{}.toString:function(){return"[object "+s(this)+"]"}},{"../internals/classof":160,"../internals/to-string-tag-support":247}],223:[function(e,t,a){arguments[4][185][0].apply(a,arguments)},{dup:185}],224:[function(e,t,a){t.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},{}],225:[function(e,t,a){var i=e("../internals/an-object"),s=e("../internals/is-object"),r=e("../internals/new-promise-capability");t.exports=function(e,t){if(i(e),s(t)&&t.constructor===e)return t;var a=r.f(e);return(0,a.resolve)(t),a.promise}},{"../internals/an-object":148,"../internals/is-object":195,"../internals/new-promise-capability":206}],226:[function(e,t,a){var i=e("../internals/redefine");t.exports=function(e,t,a){for(var s in t)a&&a.unsafe&&e[s]?e[s]=t[s]:i(e,s,t[s],a);return e}},{"../internals/redefine":227}],227:[function(e,t,a){var i=e("../internals/create-non-enumerable-property");t.exports=function(e,t,a,s){s&&s.enumerable?e[t]=a:i(e,t,a)}},{"../internals/create-non-enumerable-property":164}],228:[function(e,t,a){t.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},{}],229:[function(e,t,a){var i=e("../internals/global"),s=e("../internals/create-non-enumerable-property");t.exports=function(e,t){try{s(i,e,t)}catch(a){i[e]=t}return t}},{"../internals/create-non-enumerable-property":164,"../internals/global":183}],230:[function(e,t,a){"use strict";var i=e("../internals/get-built-in"),s=e("../internals/object-define-property"),r=e("../internals/well-known-symbol"),n=e("../internals/descriptors"),o=r("species");t.exports=function(e){var t=i(e),a=s.f;n&&t&&!t[o]&&a(t,o,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":168,"../internals/get-built-in":180,"../internals/object-define-property":214,"../internals/well-known-symbol":250}],231:[function(e,t,a){var i=e("../internals/to-string-tag-support"),s=e("../internals/object-define-property").f,r=e("../internals/create-non-enumerable-property"),n=e("../internals/has"),o=e("../internals/object-to-string"),l=e("../internals/well-known-symbol")("toStringTag");t.exports=function(e,t,a,d){if(e){var c=a?e:e.prototype;n(c,l)||s(c,l,{configurable:!0,value:t}),d&&!i&&r(c,"toString",o)}}},{"../internals/create-non-enumerable-property":164,"../internals/has":184,"../internals/object-define-property":214,"../internals/object-to-string":222,"../internals/to-string-tag-support":247,"../internals/well-known-symbol":250}],232:[function(e,t,a){var i=e("../internals/shared"),s=e("../internals/uid"),r=i("keys");t.exports=function(e){return r[e]||(r[e]=s(e))}},{"../internals/shared":234,"../internals/uid":248}],233:[function(e,t,a){var i=e("../internals/global"),s=e("../internals/set-global"),r=i["__core-js_shared__"]||s("__core-js_shared__",{});t.exports=r},{"../internals/global":183,"../internals/set-global":229}],234:[function(e,t,a){var i=e("../internals/is-pure"),s=e("../internals/shared-store");(t.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.4",mode:i?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":196,"../internals/shared-store":233}],235:[function(e,t,a){var i=e("../internals/an-object"),s=e("../internals/a-function"),r=e("../internals/well-known-symbol")("species");t.exports=function(e,t){var a,n=i(e).constructor;return void 0===n||null==(a=i(n)[r])?t:s(a)}},{"../internals/a-function":144,"../internals/an-object":148,"../internals/well-known-symbol":250}],236:[function(e,t,a){var i=e("../internals/to-integer"),s=e("../internals/require-object-coercible"),r=function(e){return function(t,a){var r,n,o=String(s(t)),l=i(a),d=o.length;return l<0||l>=d?e?"":void 0:(r=o.charCodeAt(l))<55296||r>56319||l+1===d||(n=o.charCodeAt(l+1))<56320||n>57343?e?o.charAt(l):r:e?o.slice(l,l+2):n-56320+(r-55296<<10)+65536}};t.exports={codeAt:r(!1),charAt:r(!0)}},{"../internals/require-object-coercible":228,"../internals/to-integer":243}],237:[function(e,t,a){"use strict";var i=/[^\0-\u007E]/,s=/[.\u3002\uFF0E\uFF61]/g,r="Overflow: input needs wider integers to process",n=Math.floor,o=String.fromCharCode,l=function(e){return e+22+75*(e<26)},d=function(e,t,a){var i=0;for(e=a?n(e/700):e>>1,e+=n(e/t);e>455;i+=36)e=n(e/35);return n(i+36*e/(e+38))},c=function(e){var t,a,i=[],s=(e=function(e){for(var t=[],a=0,i=e.length;a<i;){var s=e.charCodeAt(a++);if(s>=55296&&s<=56319&&a<i){var r=e.charCodeAt(a++);56320==(64512&r)?t.push(((1023&s)<<10)+(1023&r)+65536):(t.push(s),a--)}else t.push(s)}return t}(e)).length,c=128,u=0,h=72;for(t=0;t<e.length;t++)(a=e[t])<128&&i.push(o(a));var p=i.length,f=p;for(p&&i.push("-");f<s;){var m=2147483647;for(t=0;t<e.length;t++)(a=e[t])>=c&&a<m&&(m=a);var g=f+1;if(m-c>n((2147483647-u)/g))throw RangeError(r);for(u+=(m-c)*g,c=m,t=0;t<e.length;t++){if((a=e[t])<c&&++u>2147483647)throw RangeError(r);if(a==c){for(var b=u,v=36;;v+=36){var y=v<=h?1:v>=h+26?26:v-h;if(b<y)break;var k=b-y,w=36-y;i.push(o(l(y+k%w))),b=n(k/w)}i.push(o(l(b))),h=d(u,g,f==p),u=0,++f}}++u,++c}return i.join("")};t.exports=function(e){var t,a,r=[],n=e.toLowerCase().replace(s,".").split(".");for(t=0;t<n.length;t++)a=n[t],r.push(i.test(a)?"xn--"+c(a):a);return r.join(".")}},{}],238:[function(e,t,a){var i=e("../internals/fails"),s=e("../internals/whitespaces");t.exports=function(e){return i((function(){return!!s[e]()||""!=""[e]()||s[e].name!==e}))}},{"../internals/fails":177,"../internals/whitespaces":251}],239:[function(e,t,a){var i=e("../internals/require-object-coercible"),s="["+e("../internals/whitespaces")+"]",r=RegExp("^"+s+s+"*"),n=RegExp(s+s+"*$"),o=function(e){return function(t){var a=String(i(t));return 1&e&&(a=a.replace(r,"")),2&e&&(a=a.replace(n,"")),a}};t.exports={start:o(1),end:o(2),trim:o(3)}},{"../internals/require-object-coercible":228,"../internals/whitespaces":251}],240:[function(e,t,a){var i,s,r,n=e("../internals/global"),o=e("../internals/fails"),l=e("../internals/classof-raw"),d=e("../internals/function-bind-context"),c=e("../internals/html"),u=e("../internals/document-create-element"),h=e("../internals/engine-is-ios"),p=n.location,f=n.setImmediate,m=n.clearImmediate,g=n.process,b=n.MessageChannel,v=n.Dispatch,y=0,k={},w=function(e){if(k.hasOwnProperty(e)){var t=k[e];delete k[e],t()}},S=function(e){return function(){w(e)}},C=function(e){w(e.data)},j=function(e){n.postMessage(e+"",p.protocol+"//"+p.host)};f&&m||(f=function(e){for(var t=[],a=1;arguments.length>a;)t.push(arguments[a++]);return k[++y]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(y),y},m=function(e){delete k[e]},"process"==l(g)?i=function(e){g.nextTick(S(e))}:v&&v.now?i=function(e){v.now(S(e))}:b&&!h?(r=(s=new b).port2,s.port1.onmessage=C,i=d(r.postMessage,r,1)):!n.addEventListener||"function"!=typeof postMessage||n.importScripts||o(j)||"file:"===p.protocol?i="onreadystatechange"in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),w(e)}}:function(e){setTimeout(S(e),0)}:(i=j,n.addEventListener("message",C,!1))),t.exports={set:f,clear:m}},{"../internals/classof-raw":159,"../internals/document-create-element":169,"../internals/engine-is-ios":171,"../internals/fails":177,"../internals/function-bind-context":178,"../internals/global":183,"../internals/html":187}],241:[function(e,t,a){var i=e("../internals/to-integer"),s=Math.max,r=Math.min;t.exports=function(e,t){var a=i(e);return a<0?s(a+t,0):r(a,t)}},{"../internals/to-integer":243}],242:[function(e,t,a){var i=e("../internals/indexed-object"),s=e("../internals/require-object-coercible");t.exports=function(e){return i(s(e))}},{"../internals/indexed-object":189,"../internals/require-object-coercible":228}],243:[function(e,t,a){var i=Math.ceil,s=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?s:i)(e)}},{}],244:[function(e,t,a){var i=e("../internals/to-integer"),s=Math.min;t.exports=function(e){return e>0?s(i(e),9007199254740991):0}},{"../internals/to-integer":243}],245:[function(e,t,a){var i=e("../internals/require-object-coercible");t.exports=function(e){return Object(i(e))}},{"../internals/require-object-coercible":228}],246:[function(e,t,a){var i=e("../internals/is-object");t.exports=function(e,t){if(!i(e))return e;var a,s;if(t&&"function"==typeof(a=e.toString)&&!i(s=a.call(e)))return s;if("function"==typeof(a=e.valueOf)&&!i(s=a.call(e)))return s;if(!t&&"function"==typeof(a=e.toString)&&!i(s=a.call(e)))return s;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":195}],247:[function(e,t,a){var i={};i[e("../internals/well-known-symbol")("toStringTag")]="z",t.exports="[object z]"===String(i)},{"../internals/well-known-symbol":250}],248:[function(e,t,a){var i=0,s=Math.random();t.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++i+s).toString(36)}},{}],249:[function(e,t,a){var i=e("../internals/native-symbol");t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},{"../internals/native-symbol":203}],250:[function(e,t,a){var i=e("../internals/global"),s=e("../internals/shared"),r=e("../internals/has"),n=e("../internals/uid"),o=e("../internals/native-symbol"),l=e("../internals/use-symbol-as-uid"),d=s("wks"),c=i.Symbol,u=l?c:c&&c.withoutSetter||n;t.exports=function(e){return r(d,e)||(o&&r(c,e)?d[e]=c[e]:d[e]=u("Symbol."+e)),d[e]}},{"../internals/global":183,"../internals/has":184,"../internals/native-symbol":203,"../internals/shared":234,"../internals/uid":248,"../internals/use-symbol-as-uid":249}],251:[function(e,t,a){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},{}],252:[function(e,t,a){"use strict";var i=e("../internals/export"),s=e("../internals/array-iteration").filter,r=e("../internals/array-method-has-species-support"),n=e("../internals/array-method-uses-to-length"),o=r("filter"),l=n("filter");i({target:"Array",proto:!0,forced:!o||!l},{filter:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},{"../internals/array-iteration":152,"../internals/array-method-has-species-support":153,"../internals/array-method-uses-to-length":155,"../internals/export":176}],253:[function(e,t,a){"use strict";var i=e("../internals/export"),s=e("../internals/array-iteration").findIndex,r=e("../internals/add-to-unscopables"),n=e("../internals/array-method-uses-to-length"),o=!0,l=n("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){o=!1})),i({target:"Array",proto:!0,forced:o||!l},{findIndex:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),r("findIndex")},{"../internals/add-to-unscopables":146,"../internals/array-iteration":152,"../internals/array-method-uses-to-length":155,"../internals/export":176}],254:[function(e,t,a){"use strict";var i=e("../internals/export"),s=e("../internals/array-iteration").find,r=e("../internals/add-to-unscopables"),n=e("../internals/array-method-uses-to-length"),o=!0,l=n("find");"find"in[]&&Array(1).find((function(){o=!1})),i({target:"Array",proto:!0,forced:o||!l},{find:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),r("find")},{"../internals/add-to-unscopables":146,"../internals/array-iteration":152,"../internals/array-method-uses-to-length":155,"../internals/export":176}],255:[function(e,t,a){"use strict";var i=e("../internals/export"),s=e("../internals/array-for-each");i({target:"Array",proto:!0,forced:[].forEach!=s},{forEach:s})},{"../internals/array-for-each":149,"../internals/export":176}],256:[function(e,t,a){"use strict";var i=e("../internals/export"),s=e("../internals/array-includes").includes,r=e("../internals/add-to-unscopables");i({target:"Array",proto:!0,forced:!e("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),r("includes")},{"../internals/add-to-unscopables":146,"../internals/array-includes":151,"../internals/array-method-uses-to-length":155,"../internals/export":176}],257:[function(e,t,a){"use strict";var i=e("../internals/export"),s=e("../internals/array-includes").indexOf,r=e("../internals/array-method-is-strict"),n=e("../internals/array-method-uses-to-length"),o=[].indexOf,l=!!o&&1/[1].indexOf(1,-0)<0,d=r("indexOf"),c=n("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:l||!d||!c},{indexOf:function(e){return l?o.apply(this,arguments)||0:s(this,e,arguments.length>1?arguments[1]:void 0)}})},{"../internals/array-includes":151,"../internals/array-method-is-strict":154,"../internals/array-method-uses-to-length":155,"../internals/export":176}],258:[function(e,t,a){e("../internals/export")({target:"Array",stat:!0},{isArray:e("../internals/is-array")})},{"../internals/export":176,"../internals/is-array":193}],259:[function(e,t,a){"use strict";var i=e("../internals/to-indexed-object"),s=e("../internals/add-to-unscopables"),r=e("../internals/iterators"),n=e("../internals/internal-state"),o=e("../internals/define-iterator"),l=n.set,d=n.getterFor("Array Iterator");t.exports=o(Array,"Array",(function(e,t){l(this,{type:"Array Iterator",target:i(e),index:0,kind:t})}),(function(){var e=d(this),t=e.target,a=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==a?{value:i,done:!1}:"values"==a?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),r.Arguments=r.Array,s("keys"),s("values"),s("entries")},{"../internals/add-to-unscopables":146,"../internals/define-iterator":167,"../internals/internal-state":191,"../internals/iterators":200,"../internals/to-indexed-object":242}],260:[function(e,t,a){"use strict";var i=e("../internals/export"),s=e("../internals/is-array"),r=[].reverse,n=[1,2];i({target:"Array",proto:!0,forced:String(n)===String(n.reverse())},{reverse:function(){return s(this)&&(this.length=this.length),r.call(this)}})},{"../internals/export":176,"../internals/is-array":193}],261:[function(e,t,a){"use strict";var i=e("../internals/export"),s=e("../internals/is-object"),r=e("../internals/is-array"),n=e("../internals/to-absolute-index"),o=e("../internals/to-length"),l=e("../internals/to-indexed-object"),d=e("../internals/create-property"),c=e("../internals/well-known-symbol"),u=e("../internals/array-method-has-species-support"),h=e("../internals/array-method-uses-to-length"),p=u("slice"),f=h("slice",{ACCESSORS:!0,0:0,1:2}),m=c("species"),g=[].slice,b=Math.max;i({target:"Array",proto:!0,forced:!p||!f},{slice:function(e,t){var a,i,c,u=l(this),h=o(u.length),p=n(e,h),f=n(void 0===t?h:t,h);if(r(u)&&("function"!=typeof(a=u.constructor)||a!==Array&&!r(a.prototype)?s(a)&&null===(a=a[m])&&(a=void 0):a=void 0,a===Array||void 0===a))return g.call(u,p,f);for(i=new(void 0===a?Array:a)(b(f-p,0)),c=0;p<f;p++,c++)p in u&&d(i,c,u[p]);return i.length=c,i}})},{"../internals/array-method-has-species-support":153,"../internals/array-method-uses-to-length":155,"../internals/create-property":166,"../internals/export":176,"../internals/is-array":193,"../internals/is-object":195,"../internals/to-absolute-index":241,"../internals/to-indexed-object":242,"../internals/to-length":244,"../internals/well-known-symbol":250}],262:[function(e,t,a){"use strict";var i=e("../internals/export"),s=e("../internals/a-function"),r=e("../internals/to-object"),n=e("../internals/fails"),o=e("../internals/array-method-is-strict"),l=[],d=l.sort,c=n((function(){l.sort(void 0)})),u=n((function(){l.sort(null)})),h=o("sort");i({target:"Array",proto:!0,forced:c||!u||!h},{sort:function(e){return void 0===e?d.call(r(this)):d.call(r(this),s(e))}})},{"../internals/a-function":144,"../internals/array-method-is-strict":154,"../internals/export":176,"../internals/fails":177,"../internals/to-object":245}],263:[function(e,t,a){"use strict";var i=e("../internals/export"),s=e("../internals/to-absolute-index"),r=e("../internals/to-integer"),n=e("../internals/to-length"),o=e("../internals/to-object"),l=e("../internals/array-species-create"),d=e("../internals/create-property"),c=e("../internals/array-method-has-species-support"),u=e("../internals/array-method-uses-to-length"),h=c("splice"),p=u("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,m=Math.min;i({target:"Array",proto:!0,forced:!h||!p},{splice:function(e,t){var a,i,c,u,h,p,g=o(this),b=n(g.length),v=s(e,b),y=arguments.length;if(0===y?a=i=0:1===y?(a=0,i=b-v):(a=y-2,i=m(f(r(t),0),b-v)),b+a-i>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(c=l(g,i),u=0;u<i;u++)(h=v+u)in g&&d(c,u,g[h]);if(c.length=i,a<i){for(u=v;u<b-i;u++)p=u+a,(h=u+i)in g?g[p]=g[h]:delete g[p];for(u=b;u>b-i+a;u--)delete g[u-1]}else if(a>i)for(u=b-i;u>v;u--)p=u+a-1,(h=u+i-1)in g?g[p]=g[h]:delete g[p];for(u=0;u<a;u++)g[u+v]=arguments[u+2];return g.length=b-i+a,c}})},{"../internals/array-method-has-species-support":153,"../internals/array-method-uses-to-length":155,"../internals/array-species-create":156,"../internals/create-property":166,"../internals/export":176,"../internals/to-absolute-index":241,"../internals/to-integer":243,"../internals/to-length":244,"../internals/to-object":245}],264:[function(e,t,a){e("../internals/export")({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},{"../internals/export":176}],265:[function(e,t,a){e("../internals/export")({target:"Function",proto:!0},{bind:e("../internals/function-bind")})},{"../internals/export":176,"../internals/function-bind":179}],266:[function(e,t,a){var i=e("../internals/export"),s=e("../internals/get-built-in"),r=e("../internals/fails"),n=s("JSON","stringify"),o=/[\uD800-\uDFFF]/g,l=/^[\uD800-\uDBFF]$/,d=/^[\uDC00-\uDFFF]$/,c=function(e,t,a){var i=a.charAt(t-1),s=a.charAt(t+1);return l.test(e)&&!d.test(s)||d.test(e)&&!l.test(i)?"\\u"+e.charCodeAt(0).toString(16):e},u=r((function(){return'"\\udf06\\ud834"'!==n("\udf06\ud834")||'"\\udead"'!==n("\udead")}));n&&i({target:"JSON",stat:!0,forced:u},{stringify:function(e,t,a){var i=n.apply(null,arguments);return"string"==typeof i?i.replace(o,c):i}})},{"../internals/export":176,"../internals/fails":177,"../internals/get-built-in":180}],267:[function(e,t,a){e("../internals/export")({target:"Number",stat:!0},{isFinite:e("../internals/number-is-finite")})},{"../internals/export":176,"../internals/number-is-finite":208}],268:[function(e,t,a){e("../internals/export")({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},{"../internals/export":176}],269:[function(e,t,a){var i=e("../internals/export"),s=e("../internals/object-assign");i({target:"Object",stat:!0,forced:Object.assign!==s},{assign:s})},{"../internals/export":176,"../internals/object-assign":211}],270:[function(e,t,a){var i=e("../internals/export"),s=e("../internals/descriptors");i({target:"Object",stat:!0,forced:!s,sham:!s},{defineProperty:e("../internals/object-define-property").f})},{"../internals/descriptors":168,"../internals/export":176,"../internals/object-define-property":214}],271:[function(e,t,a){var i=e("../internals/export"),s=e("../internals/to-object"),r=e("../internals/object-keys");i({target:"Object",stat:!0,forced:e("../internals/fails")((function(){r(1)}))},{keys:function(e){return r(s(e))}})},{"../internals/export":176,"../internals/fails":177,"../internals/object-keys":219,"../internals/to-object":245}],272:[function(e,t,a){},{}],273:[function(e,t,a){var i=e("../internals/export"),s=e("../internals/number-parse-float");i({global:!0,forced:parseFloat!=s},{parseFloat:s})},{"../internals/export":176,"../internals/number-parse-float":209}],274:[function(e,t,a){var i=e("../internals/export"),s=e("../internals/number-parse-int");i({global:!0,forced:parseInt!=s},{parseInt:s})},{"../internals/export":176,"../internals/number-parse-int":210}],275:[function(e,t,a){"use strict";var i=e("../internals/export"),s=e("../internals/a-function"),r=e("../internals/new-promise-capability"),n=e("../internals/perform"),o=e("../internals/iterate");i({target:"Promise",stat:!0},{allSettled:function(e){var t=this,a=r.f(t),i=a.resolve,l=a.reject,d=n((function(){var a=s(t.resolve),r=[],n=0,l=1;o(e,(function(e){var s=n++,o=!1;r.push(void 0),l++,a.call(t,e).then((function(e){o||(o=!0,r[s]={status:"fulfilled",value:e},--l||i(r))}),(function(e){o||(o=!0,r[s]={status:"rejected",reason:e},--l||i(r))}))})),--l||i(r)}));return d.error&&l(d.value),a.promise}})},{"../internals/a-function":144,"../internals/export":176,"../internals/iterate":198,"../internals/new-promise-capability":206,"../internals/perform":224}],276:[function(e,t,a){"use strict";var i=e("../internals/export"),s=e("../internals/is-pure"),r=e("../internals/native-promise-constructor"),n=e("../internals/fails"),o=e("../internals/get-built-in"),l=e("../internals/species-constructor"),d=e("../internals/promise-resolve"),c=e("../internals/redefine");i({target:"Promise",proto:!0,real:!0,forced:!!r&&n((function(){r.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=l(this,o("Promise")),a="function"==typeof e;return this.then(a?function(a){return d(t,e()).then((function(){return a}))}:e,a?function(a){return d(t,e()).then((function(){throw a}))}:e)}}),s||"function"!=typeof r||r.prototype.finally||c(r.prototype,"finally",o("Promise").prototype.finally)},{"../internals/export":176,"../internals/fails":177,"../internals/get-built-in":180,"../internals/is-pure":196,"../internals/native-promise-constructor":202,"../internals/promise-resolve":225,"../internals/redefine":227,"../internals/species-constructor":235}],277:[function(e,t,a){"use strict";var i,s,r,n,o=e("../internals/export"),l=e("../internals/is-pure"),d=e("../internals/global"),c=e("../internals/get-built-in"),u=e("../internals/native-promise-constructor"),h=e("../internals/redefine"),p=e("../internals/redefine-all"),f=e("../internals/set-to-string-tag"),m=e("../internals/set-species"),g=e("../internals/is-object"),b=e("../internals/a-function"),v=e("../internals/an-instance"),y=e("../internals/classof-raw"),k=e("../internals/inspect-source"),w=e("../internals/iterate"),S=e("../internals/check-correctness-of-iteration"),C=e("../internals/species-constructor"),j=e("../internals/task").set,E=e("../internals/microtask"),L=e("../internals/promise-resolve"),A=e("../internals/host-report-errors"),T=e("../internals/new-promise-capability"),P=e("../internals/perform"),M=e("../internals/internal-state"),I=e("../internals/is-forced"),x=e("../internals/well-known-symbol"),R=e("../internals/engine-v8-version"),D=x("species"),O="Promise",F=M.get,V=M.set,B=M.getterFor(O),q=u,U=d.TypeError,H=d.document,N=d.process,_=c("fetch"),W=T.f,z=W,J="process"==y(N),G=!!(H&&H.createEvent&&d.dispatchEvent),K=I(O,(function(){if(!(k(q)!==String(q))){if(66===R)return!0;if(!J&&"function"!=typeof PromiseRejectionEvent)return!0}if(l&&!q.prototype.finally)return!0;if(R>=51&&/native code/.test(q))return!1;var e=q.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[D]=t,!(e.then((function(){}))instanceof t)})),Q=K||!S((function(e){q.all(e).catch((function(){}))})),Y=function(e){var t;return!(!g(e)||"function"!=typeof(t=e.then))&&t},X=function(e,t,a){if(!t.notified){t.notified=!0;var i=t.reactions;E((function(){for(var s=t.value,r=1==t.state,n=0;i.length>n;){var o,l,d,c=i[n++],u=r?c.ok:c.fail,h=c.resolve,p=c.reject,f=c.domain;try{u?(r||(2===t.rejection&&te(e,t),t.rejection=1),!0===u?o=s:(f&&f.enter(),o=u(s),f&&(f.exit(),d=!0)),o===c.promise?p(U("Promise-chain cycle")):(l=Y(o))?l.call(o,h,p):h(o)):p(s)}catch(m){f&&!d&&f.exit(),p(m)}}t.reactions=[],t.notified=!1,a&&!t.rejection&&Z(e,t)}))}},$=function(e,t,a){var i,s;G?((i=H.createEvent("Event")).promise=t,i.reason=a,i.initEvent(e,!1,!0),d.dispatchEvent(i)):i={promise:t,reason:a},(s=d["on"+e])?s(i):"unhandledrejection"===e&&A("Unhandled promise rejection",a)},Z=function(e,t){j.call(d,(function(){var a,i=t.value;if(ee(t)&&(a=P((function(){J?N.emit("unhandledRejection",i,e):$("unhandledrejection",e,i)})),t.rejection=J||ee(t)?2:1,a.error))throw a.value}))},ee=function(e){return 1!==e.rejection&&!e.parent},te=function(e,t){j.call(d,(function(){J?N.emit("rejectionHandled",e):$("rejectionhandled",e,t.value)}))},ae=function(e,t,a,i){return function(s){e(t,a,s,i)}},ie=function(e,t,a,i){t.done||(t.done=!0,i&&(t=i),t.value=a,t.state=2,X(e,t,!0))},se=function(e,t,a,i){if(!t.done){t.done=!0,i&&(t=i);try{if(e===a)throw U("Promise can't be resolved itself");var s=Y(a);s?E((function(){var i={done:!1};try{s.call(a,ae(se,e,i,t),ae(ie,e,i,t))}catch(r){ie(e,i,r,t)}})):(t.value=a,t.state=1,X(e,t,!1))}catch(r){ie(e,{done:!1},r,t)}}};K&&(q=function(e){v(this,q,O),b(e),i.call(this);var t=F(this);try{e(ae(se,this,t),ae(ie,this,t))}catch(a){ie(this,t,a)}},(i=function(e){V(this,{type:O,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(q.prototype,{then:function(e,t){var a=B(this),i=W(C(this,q));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=J?N.domain:void 0,a.parent=!0,a.reactions.push(i),0!=a.state&&X(this,a,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),s=function(){var e=new i,t=F(e);this.promise=e,this.resolve=ae(se,e,t),this.reject=ae(ie,e,t)},T.f=W=function(e){return e===q||e===r?new s(e):z(e)},l||"function"!=typeof u||(n=u.prototype.then,h(u.prototype,"then",(function(e,t){var a=this;return new q((function(e,t){n.call(a,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof _&&o({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return L(q,_.apply(d,arguments))}}))),o({global:!0,wrap:!0,forced:K},{Promise:q}),f(q,O,!1,!0),m(O),r=c(O),o({target:O,stat:!0,forced:K},{reject:function(e){var t=W(this);return t.reject.call(void 0,e),t.promise}}),o({target:O,stat:!0,forced:l||K},{resolve:function(e){return L(l&&this===r?q:this,e)}}),o({target:O,stat:!0,forced:Q},{all:function(e){var t=this,a=W(t),i=a.resolve,s=a.reject,r=P((function(){var a=b(t.resolve),r=[],n=0,o=1;w(e,(function(e){var l=n++,d=!1;r.push(void 0),o++,a.call(t,e).then((function(e){d||(d=!0,r[l]=e,--o||i(r))}),s)})),--o||i(r)}));return r.error&&s(r.value),a.promise},race:function(e){var t=this,a=W(t),i=a.reject,s=P((function(){var s=b(t.resolve);w(e,(function(e){s.call(t,e).then(a.resolve,i)}))}));return s.error&&i(s.value),a.promise}})},{"../internals/a-function":144,"../internals/an-instance":147,"../internals/check-correctness-of-iteration":158,"../internals/classof-raw":159,"../internals/engine-v8-version":173,"../internals/export":176,"../internals/get-built-in":180,"../internals/global":183,"../internals/host-report-errors":186,"../internals/inspect-source":190,"../internals/internal-state":191,"../internals/is-forced":194,"../internals/is-object":195,"../internals/is-pure":196,"../internals/iterate":198,"../internals/microtask":201,"../internals/native-promise-constructor":202,"../internals/new-promise-capability":206,"../internals/perform":224,"../internals/promise-resolve":225,"../internals/redefine":227,"../internals/redefine-all":226,"../internals/set-species":230,"../internals/set-to-string-tag":231,"../internals/species-constructor":235,"../internals/task":240,"../internals/well-known-symbol":250}],278:[function(e,t,a){"use strict";var i=e("../internals/export"),s=e("../internals/not-a-regexp"),r=e("../internals/require-object-coercible");i({target:"String",proto:!0,forced:!e("../internals/correct-is-regexp-logic")("includes")},{includes:function(e){return!!~String(r(this)).indexOf(s(e),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":161,"../internals/export":176,"../internals/not-a-regexp":207,"../internals/require-object-coercible":228}],279:[function(e,t,a){"use strict";var i=e("../internals/string-multibyte").charAt,s=e("../internals/internal-state"),r=e("../internals/define-iterator"),n=s.set,o=s.getterFor("String Iterator");r(String,"String",(function(e){n(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=o(this),a=t.string,s=t.index;return s>=a.length?{value:void 0,done:!0}:(e=i(a,s),t.index+=e.length,{value:e,done:!1})}))},{"../internals/define-iterator":167,"../internals/internal-state":191,"../internals/string-multibyte":236}],280:[function(e,t,a){"use strict";var i,s=e("../internals/export"),r=e("../internals/object-get-own-property-descriptor").f,n=e("../internals/to-length"),o=e("../internals/not-a-regexp"),l=e("../internals/require-object-coercible"),d=e("../internals/correct-is-regexp-logic"),c=e("../internals/is-pure"),u="".startsWith,h=Math.min,p=d("startsWith");s({target:"String",proto:!0,forced:!!(c||p||(i=r(String.prototype,"startsWith"),!i||i.writable))&&!p},{startsWith:function(e){var t=String(l(this));o(e);var a=n(h(arguments.length>1?arguments[1]:void 0,t.length)),i=String(e);return u?u.call(t,i,a):t.slice(a,a+i.length)===i}})},{"../internals/correct-is-regexp-logic":161,"../internals/export":176,"../internals/is-pure":196,"../internals/not-a-regexp":207,"../internals/object-get-own-property-descriptor":215,"../internals/require-object-coercible":228,"../internals/to-length":244}],281:[function(e,t,a){"use strict";var i=e("../internals/export"),s=e("../internals/string-trim").trim;i({target:"String",proto:!0,forced:e("../internals/string-trim-forced")("trim")},{trim:function(){return s(this)}})},{"../internals/export":176,"../internals/string-trim":239,"../internals/string-trim-forced":238}],282:[function(e,t,a){e("./es.array.iterator");var i=e("../internals/dom-iterables"),s=e("../internals/global"),r=e("../internals/classof"),n=e("../internals/create-non-enumerable-property"),o=e("../internals/iterators"),l=e("../internals/well-known-symbol")("toStringTag");for(var d in i){var c=s[d],u=c&&c.prototype;u&&r(u)!==l&&n(u,l,d),o[d]=o.Array}},{"../internals/classof":160,"../internals/create-non-enumerable-property":164,"../internals/dom-iterables":170,"../internals/global":183,"../internals/iterators":200,"../internals/well-known-symbol":250,"./es.array.iterator":259}],283:[function(e,t,a){var i=e("../internals/export"),s=e("../internals/global"),r=e("../internals/engine-user-agent"),n=[].slice,o=function(e){return function(t,a){var i=arguments.length>2,s=i?n.call(arguments,2):void 0;return e(i?function(){("function"==typeof t?t:Function(t)).apply(this,s)}:t,a)}};i({global:!0,bind:!0,forced:/MSIE .\./.test(r)},{setTimeout:o(s.setTimeout),setInterval:o(s.setInterval)})},{"../internals/engine-user-agent":172,"../internals/export":176,"../internals/global":183}],284:[function(e,t,a){"use strict";e("../modules/es.array.iterator");var i=e("../internals/export"),s=e("../internals/get-built-in"),r=e("../internals/native-url"),n=e("../internals/redefine"),o=e("../internals/redefine-all"),l=e("../internals/set-to-string-tag"),d=e("../internals/create-iterator-constructor"),c=e("../internals/internal-state"),u=e("../internals/an-instance"),h=e("../internals/has"),p=e("../internals/function-bind-context"),f=e("../internals/classof"),m=e("../internals/an-object"),g=e("../internals/is-object"),b=e("../internals/object-create"),v=e("../internals/create-property-descriptor"),y=e("../internals/get-iterator"),k=e("../internals/get-iterator-method"),w=e("../internals/well-known-symbol"),S=s("fetch"),C=s("Headers"),j=w("iterator"),E=c.set,L=c.getterFor("URLSearchParams"),A=c.getterFor("URLSearchParamsIterator"),T=/\+/g,P=Array(4),M=function(e){return P[e-1]||(P[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},I=function(e){try{return decodeURIComponent(e)}catch(t){return e}},x=function(e){var t=e.replace(T," "),a=4;try{return decodeURIComponent(t)}catch(i){for(;a;)t=t.replace(M(a--),I);return t}},R=/[!'()~]|%20/g,D={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},O=function(e){return D[e]},F=function(e){return encodeURIComponent(e).replace(R,O)},V=function(e,t){if(t)for(var a,i,s=t.split("&"),r=0;r<s.length;)(a=s[r++]).length&&(i=a.split("="),e.push({key:x(i.shift()),value:x(i.join("="))}))},B=function(e){this.entries.length=0,V(this.entries,e)},q=function(e,t){if(e<t)throw TypeError("Not enough arguments")},U=d((function(e,t){E(this,{type:"URLSearchParamsIterator",iterator:y(L(e).entries),kind:t})}),"Iterator",(function(){var e=A(this),t=e.kind,a=e.iterator.next(),i=a.value;return a.done||(a.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),a})),H=function(){u(this,H,"URLSearchParams");var e,t,a,i,s,r,n,o,l,d=arguments.length>0?arguments[0]:void 0,c=this,p=[];if(E(c,{type:"URLSearchParams",entries:p,updateURL:function(){},updateSearchParams:B}),void 0!==d)if(g(d))if("function"==typeof(e=k(d)))for(a=(t=e.call(d)).next;!(i=a.call(t)).done;){if((n=(r=(s=y(m(i.value))).next).call(s)).done||(o=r.call(s)).done||!r.call(s).done)throw TypeError("Expected sequence with length 2");p.push({key:n.value+"",value:o.value+""})}else for(l in d)h(d,l)&&p.push({key:l,value:d[l]+""});else V(p,"string"==typeof d?"?"===d.charAt(0)?d.slice(1):d:d+"")},N=H.prototype;o(N,{append:function(e,t){q(arguments.length,2);var a=L(this);a.entries.push({key:e+"",value:t+""}),a.updateURL()},delete:function(e){q(arguments.length,1);for(var t=L(this),a=t.entries,i=e+"",s=0;s<a.length;)a[s].key===i?a.splice(s,1):s++;t.updateURL()},get:function(e){q(arguments.length,1);for(var t=L(this).entries,a=e+"",i=0;i<t.length;i++)if(t[i].key===a)return t[i].value;return null},getAll:function(e){q(arguments.length,1);for(var t=L(this).entries,a=e+"",i=[],s=0;s<t.length;s++)t[s].key===a&&i.push(t[s].value);return i},has:function(e){q(arguments.length,1);for(var t=L(this).entries,a=e+"",i=0;i<t.length;)if(t[i++].key===a)return!0;return!1},set:function(e,t){q(arguments.length,1);for(var a,i=L(this),s=i.entries,r=!1,n=e+"",o=t+"",l=0;l<s.length;l++)(a=s[l]).key===n&&(r?s.splice(l--,1):(r=!0,a.value=o));r||s.push({key:n,value:o}),i.updateURL()},sort:function(){var e,t,a,i=L(this),s=i.entries,r=s.slice();for(s.length=0,a=0;a<r.length;a++){for(e=r[a],t=0;t<a;t++)if(s[t].key>e.key){s.splice(t,0,e);break}t===a&&s.push(e)}i.updateURL()},forEach:function(e){for(var t,a=L(this).entries,i=p(e,arguments.length>1?arguments[1]:void 0,3),s=0;s<a.length;)i((t=a[s++]).value,t.key,this)},keys:function(){return new U(this,"keys")},values:function(){return new U(this,"values")},entries:function(){return new U(this,"entries")}},{enumerable:!0}),n(N,j,N.entries),n(N,"toString",(function(){for(var e,t=L(this).entries,a=[],i=0;i<t.length;)e=t[i++],a.push(F(e.key)+"="+F(e.value));return a.join("&")}),{enumerable:!0}),l(H,"URLSearchParams"),i({global:!0,forced:!r},{URLSearchParams:H}),r||"function"!=typeof S||"function"!=typeof C||i({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,a,i,s=[e];return arguments.length>1&&(g(t=arguments[1])&&(a=t.body,"URLSearchParams"===f(a)&&((i=t.headers?new C(t.headers):new C).has("content-type")||i.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=b(t,{body:v(0,String(a)),headers:v(0,i)}))),s.push(t)),S.apply(this,s)}}),t.exports={URLSearchParams:H,getState:L}},{"../internals/an-instance":147,"../internals/an-object":148,"../internals/classof":160,"../internals/create-iterator-constructor":163,"../internals/create-property-descriptor":165,"../internals/export":176,"../internals/function-bind-context":178,"../internals/get-built-in":180,"../internals/get-iterator":182,"../internals/get-iterator-method":181,"../internals/has":184,"../internals/internal-state":191,"../internals/is-object":195,"../internals/native-url":204,"../internals/object-create":212,"../internals/redefine":227,"../internals/redefine-all":226,"../internals/set-to-string-tag":231,"../internals/well-known-symbol":250,"../modules/es.array.iterator":259}],285:[function(e,t,a){"use strict";e("../modules/es.string.iterator");var i,s=e("../internals/export"),r=e("../internals/descriptors"),n=e("../internals/native-url"),o=e("../internals/global"),l=e("../internals/object-define-properties"),d=e("../internals/redefine"),c=e("../internals/an-instance"),u=e("../internals/has"),h=e("../internals/object-assign"),p=e("../internals/array-from"),f=e("../internals/string-multibyte").codeAt,m=e("../internals/string-punycode-to-ascii"),g=e("../internals/set-to-string-tag"),b=e("../modules/web.url-search-params"),v=e("../internals/internal-state"),y=o.URL,k=b.URLSearchParams,w=b.getState,S=v.set,C=v.getterFor("URL"),j=Math.floor,E=Math.pow,L=/[A-Za-z]/,A=/[\d+-.A-Za-z]/,T=/\d/,P=/^(0x|0X)/,M=/^[0-7]+$/,I=/^\d+$/,x=/^[\dA-Fa-f]+$/,R=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,D=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,O=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,F=/[\u0009\u000A\u000D]/g,V=function(e,t){var a,i,s;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";if(!(a=q(t.slice(1,-1))))return"Invalid host";e.host=a}else if(G(e)){if(t=m(t),R.test(t))return"Invalid host";if(null===(a=B(t)))return"Invalid host";e.host=a}else{if(D.test(t))return"Invalid host";for(a="",i=p(t),s=0;s<i.length;s++)a+=z(i[s],H);e.host=a}},B=function(e){var t,a,i,s,r,n,o,l=e.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),(t=l.length)>4)return e;for(a=[],i=0;i<t;i++){if(""==(s=l[i]))return e;if(r=10,s.length>1&&"0"==s.charAt(0)&&(r=P.test(s)?16:8,s=s.slice(8==r?1:2)),""===s)n=0;else{if(!(10==r?I:8==r?M:x).test(s))return e;n=parseInt(s,r)}a.push(n)}for(i=0;i<t;i++)if(n=a[i],i==t-1){if(n>=E(256,5-t))return null}else if(n>255)return null;for(o=a.pop(),i=0;i<a.length;i++)o+=a[i]*E(256,3-i);return o},q=function(e){var t,a,i,s,r,n,o,l=[0,0,0,0,0,0,0,0],d=0,c=null,u=0,h=function(){return e.charAt(u)};if(":"==h()){if(":"!=e.charAt(1))return;u+=2,c=++d}for(;h();){if(8==d)return;if(":"!=h()){for(t=a=0;a<4&&x.test(h());)t=16*t+parseInt(h(),16),u++,a++;if("."==h()){if(0==a)return;if(u-=a,d>6)return;for(i=0;h();){if(s=null,i>0){if(!("."==h()&&i<4))return;u++}if(!T.test(h()))return;for(;T.test(h());){if(r=parseInt(h(),10),null===s)s=r;else{if(0==s)return;s=10*s+r}if(s>255)return;u++}l[d]=256*l[d]+s,2!=++i&&4!=i||d++}if(4!=i)return;break}if(":"==h()){if(u++,!h())return}else if(h())return;l[d++]=t}else{if(null!==c)return;u++,c=++d}}if(null!==c)for(n=d-c,d=7;0!=d&&n>0;)o=l[d],l[d--]=l[c+n-1],l[c+--n]=o;else if(8!=d)return;return l},U=function(e){var t,a,i,s;if("number"==typeof e){for(t=[],a=0;a<4;a++)t.unshift(e%256),e=j(e/256);return t.join(".")}if("object"==typeof e){for(t="",i=function(e){for(var t=null,a=1,i=null,s=0,r=0;r<8;r++)0!==e[r]?(s>a&&(t=i,a=s),i=null,s=0):(null===i&&(i=r),++s);return s>a&&(t=i,a=s),t}(e),a=0;a<8;a++)s&&0===e[a]||(s&&(s=!1),i===a?(t+=a?":":"::",s=!0):(t+=e[a].toString(16),a<7&&(t+=":")));return"["+t+"]"}return e},H={},N=h({},H,{" ":1,'"':1,"<":1,">":1,"`":1}),_=h({},N,{"#":1,"?":1,"{":1,"}":1}),W=h({},_,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),z=function(e,t){var a=f(e,0);return a>32&&a<127&&!u(t,e)?e:encodeURIComponent(e)},J={ftp:21,file:null,http:80,https:443,ws:80,wss:443},G=function(e){return u(J,e.scheme)},K=function(e){return""!=e.username||""!=e.password},Q=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Y=function(e,t){var a;return 2==e.length&&L.test(e.charAt(0))&&(":"==(a=e.charAt(1))||!t&&"|"==a)},X=function(e){var t;return e.length>1&&Y(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},$=function(e){var t=e.path,a=t.length;!a||"file"==e.scheme&&1==a&&Y(t[0],!0)||t.pop()},Z=function(e){return"."===e||"%2e"===e.toLowerCase()},ee={},te={},ae={},ie={},se={},re={},ne={},oe={},le={},de={},ce={},ue={},he={},pe={},fe={},me={},ge={},be={},ve={},ye={},ke={},we=function(e,t,a,s){var r,n,o,l,d,c=a||ee,h=0,f="",m=!1,g=!1,b=!1;for(a||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(O,"")),t=t.replace(F,""),r=p(t);h<=r.length;){switch(n=r[h],c){case ee:if(!n||!L.test(n)){if(a)return"Invalid scheme";c=ae;continue}f+=n.toLowerCase(),c=te;break;case te:if(n&&(A.test(n)||"+"==n||"-"==n||"."==n))f+=n.toLowerCase();else{if(":"!=n){if(a)return"Invalid scheme";f="",c=ae,h=0;continue}if(a&&(G(e)!=u(J,f)||"file"==f&&(K(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=f,a)return void(G(e)&&J[e.scheme]==e.port&&(e.port=null));f="","file"==e.scheme?c=pe:G(e)&&s&&s.scheme==e.scheme?c=ie:G(e)?c=oe:"/"==r[h+1]?(c=se,h++):(e.cannotBeABaseURL=!0,e.path.push(""),c=ve)}break;case ae:if(!s||s.cannotBeABaseURL&&"#"!=n)return"Invalid scheme";if(s.cannotBeABaseURL&&"#"==n){e.scheme=s.scheme,e.path=s.path.slice(),e.query=s.query,e.fragment="",e.cannotBeABaseURL=!0,c=ke;break}c="file"==s.scheme?pe:re;continue;case ie:if("/"!=n||"/"!=r[h+1]){c=re;continue}c=le,h++;break;case se:if("/"==n){c=de;break}c=be;continue;case re:if(e.scheme=s.scheme,n==i)e.username=s.username,e.password=s.password,e.host=s.host,e.port=s.port,e.path=s.path.slice(),e.query=s.query;else if("/"==n||"\\"==n&&G(e))c=ne;else if("?"==n)e.username=s.username,e.password=s.password,e.host=s.host,e.port=s.port,e.path=s.path.slice(),e.query="",c=ye;else{if("#"!=n){e.username=s.username,e.password=s.password,e.host=s.host,e.port=s.port,e.path=s.path.slice(),e.path.pop(),c=be;continue}e.username=s.username,e.password=s.password,e.host=s.host,e.port=s.port,e.path=s.path.slice(),e.query=s.query,e.fragment="",c=ke}break;case ne:if(!G(e)||"/"!=n&&"\\"!=n){if("/"!=n){e.username=s.username,e.password=s.password,e.host=s.host,e.port=s.port,c=be;continue}c=de}else c=le;break;case oe:if(c=le,"/"!=n||"/"!=f.charAt(h+1))continue;h++;break;case le:if("/"!=n&&"\\"!=n){c=de;continue}break;case de:if("@"==n){m&&(f="%40"+f),m=!0,o=p(f);for(var v=0;v<o.length;v++){var y=o[v];if(":"!=y||b){var k=z(y,W);b?e.password+=k:e.username+=k}else b=!0}f=""}else if(n==i||"/"==n||"?"==n||"#"==n||"\\"==n&&G(e)){if(m&&""==f)return"Invalid authority";h-=p(f).length+1,f="",c=ce}else f+=n;break;case ce:case ue:if(a&&"file"==e.scheme){c=me;continue}if(":"!=n||g){if(n==i||"/"==n||"?"==n||"#"==n||"\\"==n&&G(e)){if(G(e)&&""==f)return"Invalid host";if(a&&""==f&&(K(e)||null!==e.port))return;if(l=V(e,f))return l;if(f="",c=ge,a)return;continue}"["==n?g=!0:"]"==n&&(g=!1),f+=n}else{if(""==f)return"Invalid host";if(l=V(e,f))return l;if(f="",c=he,a==ue)return}break;case he:if(!T.test(n)){if(n==i||"/"==n||"?"==n||"#"==n||"\\"==n&&G(e)||a){if(""!=f){var w=parseInt(f,10);if(w>65535)return"Invalid port";e.port=G(e)&&w===J[e.scheme]?null:w,f=""}if(a)return;c=ge;continue}return"Invalid port"}f+=n;break;case pe:if(e.scheme="file","/"==n||"\\"==n)c=fe;else{if(!s||"file"!=s.scheme){c=be;continue}if(n==i)e.host=s.host,e.path=s.path.slice(),e.query=s.query;else if("?"==n)e.host=s.host,e.path=s.path.slice(),e.query="",c=ye;else{if("#"!=n){X(r.slice(h).join(""))||(e.host=s.host,e.path=s.path.slice(),$(e)),c=be;continue}e.host=s.host,e.path=s.path.slice(),e.query=s.query,e.fragment="",c=ke}}break;case fe:if("/"==n||"\\"==n){c=me;break}s&&"file"==s.scheme&&!X(r.slice(h).join(""))&&(Y(s.path[0],!0)?e.path.push(s.path[0]):e.host=s.host),c=be;continue;case me:if(n==i||"/"==n||"\\"==n||"?"==n||"#"==n){if(!a&&Y(f))c=be;else if(""==f){if(e.host="",a)return;c=ge}else{if(l=V(e,f))return l;if("localhost"==e.host&&(e.host=""),a)return;f="",c=ge}continue}f+=n;break;case ge:if(G(e)){if(c=be,"/"!=n&&"\\"!=n)continue}else if(a||"?"!=n)if(a||"#"!=n){if(n!=i&&(c=be,"/"!=n))continue}else e.fragment="",c=ke;else e.query="",c=ye;break;case be:if(n==i||"/"==n||"\\"==n&&G(e)||!a&&("?"==n||"#"==n)){if(".."===(d=(d=f).toLowerCase())||"%2e."===d||".%2e"===d||"%2e%2e"===d?($(e),"/"==n||"\\"==n&&G(e)||e.path.push("")):Z(f)?"/"==n||"\\"==n&&G(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Y(f)&&(e.host&&(e.host=""),f=f.charAt(0)+":"),e.path.push(f)),f="","file"==e.scheme&&(n==i||"?"==n||"#"==n))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==n?(e.query="",c=ye):"#"==n&&(e.fragment="",c=ke)}else f+=z(n,_);break;case ve:"?"==n?(e.query="",c=ye):"#"==n?(e.fragment="",c=ke):n!=i&&(e.path[0]+=z(n,H));break;case ye:a||"#"!=n?n!=i&&("'"==n&&G(e)?e.query+="%27":e.query+="#"==n?"%23":z(n,H)):(e.fragment="",c=ke);break;case ke:n!=i&&(e.fragment+=z(n,N))}h++}},Se=function(e){var t,a,i=c(this,Se,"URL"),s=arguments.length>1?arguments[1]:void 0,n=String(e),o=S(i,{type:"URL"});if(void 0!==s)if(s instanceof Se)t=C(s);else if(a=we(t={},String(s)))throw TypeError(a);if(a=we(o,n,null,t))throw TypeError(a);var l=o.searchParams=new k,d=w(l);d.updateSearchParams(o.query),d.updateURL=function(){o.query=String(l)||null},r||(i.href=je.call(i),i.origin=Ee.call(i),i.protocol=Le.call(i),i.username=Ae.call(i),i.password=Te.call(i),i.host=Pe.call(i),i.hostname=Me.call(i),i.port=Ie.call(i),i.pathname=xe.call(i),i.search=Re.call(i),i.searchParams=De.call(i),i.hash=Oe.call(i))},Ce=Se.prototype,je=function(){var e=C(this),t=e.scheme,a=e.username,i=e.password,s=e.host,r=e.port,n=e.path,o=e.query,l=e.fragment,d=t+":";return null!==s?(d+="//",K(e)&&(d+=a+(i?":"+i:"")+"@"),d+=U(s),null!==r&&(d+=":"+r)):"file"==t&&(d+="//"),d+=e.cannotBeABaseURL?n[0]:n.length?"/"+n.join("/"):"",null!==o&&(d+="?"+o),null!==l&&(d+="#"+l),d},Ee=function(){var e=C(this),t=e.scheme,a=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(i){return"null"}return"file"!=t&&G(e)?t+"://"+U(e.host)+(null!==a?":"+a:""):"null"},Le=function(){return C(this).scheme+":"},Ae=function(){return C(this).username},Te=function(){return C(this).password},Pe=function(){var e=C(this),t=e.host,a=e.port;return null===t?"":null===a?U(t):U(t)+":"+a},Me=function(){var e=C(this).host;return null===e?"":U(e)},Ie=function(){var e=C(this).port;return null===e?"":String(e)},xe=function(){var e=C(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Re=function(){var e=C(this).query;return e?"?"+e:""},De=function(){return C(this).searchParams},Oe=function(){var e=C(this).fragment;return e?"#"+e:""},Fe=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(r&&l(Ce,{href:Fe(je,(function(e){var t=C(this),a=String(e),i=we(t,a);if(i)throw TypeError(i);w(t.searchParams).updateSearchParams(t.query)})),origin:Fe(Ee),protocol:Fe(Le,(function(e){var t=C(this);we(t,String(e)+":",ee)})),username:Fe(Ae,(function(e){var t=C(this),a=p(String(e));if(!Q(t)){t.username="";for(var i=0;i<a.length;i++)t.username+=z(a[i],W)}})),password:Fe(Te,(function(e){var t=C(this),a=p(String(e));if(!Q(t)){t.password="";for(var i=0;i<a.length;i++)t.password+=z(a[i],W)}})),host:Fe(Pe,(function(e){var t=C(this);t.cannotBeABaseURL||we(t,String(e),ce)})),hostname:Fe(Me,(function(e){var t=C(this);t.cannotBeABaseURL||we(t,String(e),ue)})),port:Fe(Ie,(function(e){var t=C(this);Q(t)||(""==(e=String(e))?t.port=null:we(t,e,he))})),pathname:Fe(xe,(function(e){var t=C(this);t.cannotBeABaseURL||(t.path=[],we(t,e+"",ge))})),search:Fe(Re,(function(e){var t=C(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",we(t,e,ye)),w(t.searchParams).updateSearchParams(t.query)})),searchParams:Fe(De),hash:Fe(Oe,(function(e){var t=C(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",we(t,e,ke)):t.fragment=null}))}),d(Ce,"toJSON",(function(){return je.call(this)}),{enumerable:!0}),d(Ce,"toString",(function(){return je.call(this)}),{enumerable:!0}),y){var Ve=y.createObjectURL,Be=y.revokeObjectURL;Ve&&d(Se,"createObjectURL",(function(e){return Ve.apply(y,arguments)})),Be&&d(Se,"revokeObjectURL",(function(e){return Be.apply(y,arguments)}))}g(Se,"URL"),s({global:!0,forced:!n,sham:!r},{URL:Se})},{"../internals/an-instance":147,"../internals/array-from":150,"../internals/descriptors":168,"../internals/export":176,"../internals/global":183,"../internals/has":184,"../internals/internal-state":191,"../internals/native-url":204,"../internals/object-assign":211,"../internals/object-define-properties":213,"../internals/redefine":227,"../internals/set-to-string-tag":231,"../internals/string-multibyte":236,"../internals/string-punycode-to-ascii":237,"../modules/es.string.iterator":279,"../modules/web.url-search-params":284}],286:[function(e,t,a){arguments[4][272][0].apply(a,arguments)},{dup:272}],287:[function(e,t,a){var i=e("../../es/array/is-array");t.exports=i},{"../../es/array/is-array":107}],288:[function(e,t,a){var i=e("../../../es/array/virtual/for-each");t.exports=i},{"../../../es/array/virtual/for-each":111}],289:[function(e,t,a){var i=e("../../es/date/now");t.exports=i},{"../../es/date/now":118}],290:[function(e,t,a){var i=e("../../es/instance/bind");t.exports=i},{"../../es/instance/bind":120}],291:[function(e,t,a){var i=e("../../es/instance/filter");t.exports=i},{"../../es/instance/filter":121}],292:[function(e,t,a){var i=e("../../es/instance/find-index");t.exports=i},{"../../es/instance/find-index":122}],293:[function(e,t,a){var i=e("../../es/instance/find");t.exports=i},{"../../es/instance/find":123}],294:[function(e,t,a){e("../../modules/web.dom-collections.iterator");var i=e("../array/virtual/for-each"),s=e("../../internals/classof"),r=Array.prototype,n={DOMTokenList:!0,NodeList:!0};t.exports=function(e){var t=e.forEach;return e===r||e instanceof Array&&t===r.forEach||n.hasOwnProperty(s(e))?i:t}},{"../../internals/classof":160,"../../modules/web.dom-collections.iterator":282,"../array/virtual/for-each":288}],295:[function(e,t,a){var i=e("../../es/instance/includes");t.exports=i},{"../../es/instance/includes":124}],296:[function(e,t,a){var i=e("../../es/instance/index-of");t.exports=i},{"../../es/instance/index-of":125}],297:[function(e,t,a){var i=e("../../es/instance/reverse");t.exports=i},{"../../es/instance/reverse":126}],298:[function(e,t,a){var i=e("../../es/instance/slice");t.exports=i},{"../../es/instance/slice":127}],299:[function(e,t,a){var i=e("../../es/instance/sort");t.exports=i},{"../../es/instance/sort":128}],300:[function(e,t,a){var i=e("../../es/instance/splice");t.exports=i},{"../../es/instance/splice":129}],301:[function(e,t,a){var i=e("../../es/instance/starts-with");t.exports=i},{"../../es/instance/starts-with":130}],302:[function(e,t,a){var i=e("../../es/instance/trim");t.exports=i},{"../../es/instance/trim":131}],303:[function(e,t,a){var i=e("../../es/json/stringify");t.exports=i},{"../../es/json/stringify":132}],304:[function(e,t,a){var i=e("../../es/number/is-finite");t.exports=i},{"../../es/number/is-finite":133}],305:[function(e,t,a){var i=e("../../es/number/is-nan");t.exports=i},{"../../es/number/is-nan":134}],306:[function(e,t,a){var i=e("../../es/object/assign");t.exports=i},{"../../es/object/assign":135}],307:[function(e,t,a){var i=e("../../es/object/define-property");t.exports=i},{"../../es/object/define-property":136}],308:[function(e,t,a){var i=e("../../es/object/keys");t.exports=i},{"../../es/object/keys":137}],309:[function(e,t,a){var i=e("../es/parse-float");t.exports=i},{"../es/parse-float":138}],310:[function(e,t,a){var i=e("../es/parse-int");t.exports=i},{"../es/parse-int":139}],311:[function(e,t,a){var i=e("../../es/promise");t.exports=i},{"../../es/promise":140}],312:[function(e,t,a){e("../modules/web.timers");var i=e("../internals/path");t.exports=i.setInterval},{"../internals/path":223,"../modules/web.timers":283}],313:[function(e,t,a){e("../modules/web.timers");var i=e("../internals/path");t.exports=i.setTimeout},{"../internals/path":223,"../modules/web.timers":283}],314:[function(e,t,a){var i=e("../../web/url");t.exports=i},{"../../web/url":315}],315:[function(e,t,a){e("../modules/web.url"),e("../modules/web.url.to-json"),e("../modules/web.url-search-params");var i=e("../internals/path");t.exports=i.URL},{"../internals/path":223,"../modules/web.url":285,"../modules/web.url-search-params":284,"../modules/web.url.to-json":286}],316:[function(e,t,a){arguments[4][144][0].apply(a,arguments)},{dup:144}],317:[function(e,t,a){arguments[4][145][0].apply(a,arguments)},{"../internals/is-object":369,dup:145}],318:[function(e,t,a){var i=e("../internals/well-known-symbol"),s=e("../internals/object-create"),r=e("../internals/object-define-property"),n=i("unscopables"),o=Array.prototype;null==o[n]&&r.f(o,n,{configurable:!0,value:s(null)}),t.exports=function(e){o[n][e]=!0}},{"../internals/object-create":382,"../internals/object-define-property":384,"../internals/well-known-symbol":429}],319:[function(e,t,a){"use strict";var i=e("../internals/string-multibyte").charAt;t.exports=function(e,t,a){return t+(a?i(e,t).length:1)}},{"../internals/string-multibyte":411}],320:[function(e,t,a){arguments[4][147][0].apply(a,arguments)},{dup:147}],321:[function(e,t,a){arguments[4][148][0].apply(a,arguments)},{"../internals/is-object":369,dup:148}],322:[function(e,t,a){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},{}],323:[function(e,t,a){"use strict";var i,s=e("../internals/array-buffer-native"),r=e("../internals/descriptors"),n=e("../internals/global"),o=e("../internals/is-object"),l=e("../internals/has"),d=e("../internals/classof"),c=e("../internals/create-non-enumerable-property"),u=e("../internals/redefine"),h=e("../internals/object-define-property").f,p=e("../internals/object-get-prototype-of"),f=e("../internals/object-set-prototype-of"),m=e("../internals/well-known-symbol"),g=e("../internals/uid"),b=n.Int8Array,v=b&&b.prototype,y=n.Uint8ClampedArray,k=y&&y.prototype,w=b&&p(b),S=v&&p(v),C=Object.prototype,j=C.isPrototypeOf,E=m("toStringTag"),L=g("TYPED_ARRAY_TAG"),A=s&&!!f&&"Opera"!==d(n.opera),T=!1,P={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},M=function(e){return o(e)&&l(P,d(e))};for(i in P)n[i]||(A=!1);if((!A||"function"!=typeof w||w===Function.prototype)&&(w=function(){throw TypeError("Incorrect invocation")},A))for(i in P)n[i]&&f(n[i],w);if((!A||!S||S===C)&&(S=w.prototype,A))for(i in P)n[i]&&f(n[i].prototype,S);if(A&&p(k)!==S&&f(k,S),r&&!l(S,E))for(i in T=!0,h(S,E,{get:function(){return o(this)?this[L]:void 0}}),P)n[i]&&c(n[i],L,i);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:A,TYPED_ARRAY_TAG:T&&L,aTypedArray:function(e){if(M(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(f){if(j.call(w,e))return e}else for(var t in P)if(l(P,i)){var a=n[t];if(a&&(e===a||j.call(a,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,a){if(r){if(a)for(var i in P){var s=n[i];s&&l(s.prototype,e)&&delete s.prototype[e]}S[e]&&!a||u(S,e,a?t:A&&v[e]||t)}},exportTypedArrayStaticMethod:function(e,t,a){var i,s;if(r){if(f){if(a)for(i in P)(s=n[i])&&l(s,e)&&delete s[e];if(w[e]&&!a)return;try{return u(w,e,a?t:A&&b[e]||t)}catch(o){}}for(i in P)!(s=n[i])||s[e]&&!a||u(s,e,t)}},isView:function(e){var t=d(e);return"DataView"===t||l(P,t)},isTypedArray:M,TypedArray:w,TypedArrayPrototype:S}},{"../internals/array-buffer-native":322,"../internals/classof":333,"../internals/create-non-enumerable-property":337,"../internals/descriptors":341,"../internals/global":355,"../internals/has":356,"../internals/is-object":369,"../internals/object-define-property":384,"../internals/object-get-prototype-of":388,"../internals/object-set-prototype-of":392,"../internals/redefine":398,"../internals/uid":427,"../internals/well-known-symbol":429}],324:[function(e,t,a){"use strict";var i=e("../internals/global"),s=e("../internals/descriptors"),r=e("../internals/array-buffer-native"),n=e("../internals/create-non-enumerable-property"),o=e("../internals/redefine-all"),l=e("../internals/fails"),d=e("../internals/an-instance"),c=e("../internals/to-integer"),u=e("../internals/to-length"),h=e("../internals/to-index"),p=e("../internals/ieee754"),f=e("../internals/object-get-prototype-of"),m=e("../internals/object-set-prototype-of"),g=e("../internals/object-get-own-property-names").f,b=e("../internals/object-define-property").f,v=e("../internals/array-fill"),y=e("../internals/set-to-string-tag"),k=e("../internals/internal-state"),w=k.get,S=k.set,C=i.ArrayBuffer,j=C,E=i.DataView,L=E&&E.prototype,A=Object.prototype,T=i.RangeError,P=p.pack,M=p.unpack,I=function(e){return[255&e]},x=function(e){return[255&e,e>>8&255]},R=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},D=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},O=function(e){return P(e,23,4)},F=function(e){return P(e,52,8)},V=function(e,t){b(e.prototype,t,{get:function(){return w(this)[t]}})},B=function(e,t,a,i){var s=h(a),r=w(e);if(s+t>r.byteLength)throw T("Wrong index");var n=w(r.buffer).bytes,o=s+r.byteOffset,l=n.slice(o,o+t);return i?l:l.reverse()},q=function(e,t,a,i,s,r){var n=h(a),o=w(e);if(n+t>o.byteLength)throw T("Wrong index");for(var l=w(o.buffer).bytes,d=n+o.byteOffset,c=i(+s),u=0;u<t;u++)l[d+u]=c[r?u:t-u-1]};if(r){if(!l((function(){C(1)}))||!l((function(){new C(-1)}))||l((function(){return new C,new C(1.5),new C(NaN),"ArrayBuffer"!=C.name}))){for(var U,H=(j=function(e){return d(this,j),new C(h(e))}).prototype=C.prototype,N=g(C),_=0;N.length>_;)(U=N[_++])in j||n(j,U,C[U]);H.constructor=j}m&&f(L)!==A&&m(L,A);var W=new E(new j(2)),z=L.setInt8;W.setInt8(0,2147483648),W.setInt8(1,2147483649),!W.getInt8(0)&&W.getInt8(1)||o(L,{setInt8:function(e,t){z.call(this,e,t<<24>>24)},setUint8:function(e,t){z.call(this,e,t<<24>>24)}},{unsafe:!0})}else j=function(e){d(this,j,"ArrayBuffer");var t=h(e);S(this,{bytes:v.call(new Array(t),0),byteLength:t}),s||(this.byteLength=t)},E=function(e,t,a){d(this,E,"DataView"),d(e,j,"DataView");var i=w(e).byteLength,r=c(t);if(r<0||r>i)throw T("Wrong offset");if(r+(a=void 0===a?i-r:u(a))>i)throw T("Wrong length");S(this,{buffer:e,byteLength:a,byteOffset:r}),s||(this.buffer=e,this.byteLength=a,this.byteOffset=r)},s&&(V(j,"byteLength"),V(E,"buffer"),V(E,"byteLength"),V(E,"byteOffset")),o(E.prototype,{getInt8:function(e){return B(this,1,e)[0]<<24>>24},getUint8:function(e){return B(this,1,e)[0]},getInt16:function(e){var t=B(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=B(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return D(B(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return D(B(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return M(B(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return M(B(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){q(this,1,e,I,t)},setUint8:function(e,t){q(this,1,e,I,t)},setInt16:function(e,t){q(this,2,e,x,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){q(this,2,e,x,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){q(this,4,e,R,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){q(this,4,e,R,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){q(this,4,e,O,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){q(this,8,e,F,t,arguments.length>2?arguments[2]:void 0)}});y(j,"ArrayBuffer"),y(E,"DataView"),t.exports={ArrayBuffer:j,DataView:E}},{"../internals/an-instance":320,"../internals/array-buffer-native":322,"../internals/array-fill":325,"../internals/create-non-enumerable-property":337,"../internals/descriptors":341,"../internals/fails":349,"../internals/global":355,"../internals/ieee754":361,"../internals/internal-state":365,"../internals/object-define-property":384,"../internals/object-get-own-property-names":386,"../internals/object-get-prototype-of":388,"../internals/object-set-prototype-of":392,"../internals/redefine-all":397,"../internals/set-to-string-tag":406,"../internals/to-index":415,"../internals/to-integer":417,"../internals/to-length":418}],325:[function(e,t,a){"use strict";var i=e("../internals/to-object"),s=e("../internals/to-absolute-index"),r=e("../internals/to-length");t.exports=function(e){for(var t=i(this),a=r(t.length),n=arguments.length,o=s(n>1?arguments[1]:void 0,a),l=n>2?arguments[2]:void 0,d=void 0===l?a:s(l,a);d>o;)t[o++]=e;return t}},{"../internals/to-absolute-index":414,"../internals/to-length":418,"../internals/to-object":419}],326:[function(e,t,a){arguments[4][150][0].apply(a,arguments)},{"../internals/call-with-safe-iteration-closing":330,"../internals/create-property":339,"../internals/function-bind-context":351,"../internals/get-iterator-method":353,"../internals/is-array-iterator-method":366,"../internals/to-length":418,"../internals/to-object":419,dup:150}],327:[function(e,t,a){arguments[4][151][0].apply(a,arguments)},{"../internals/to-absolute-index":414,"../internals/to-indexed-object":416,"../internals/to-length":418,dup:151}],328:[function(e,t,a){arguments[4][152][0].apply(a,arguments)},{"../internals/array-species-create":329,"../internals/function-bind-context":351,"../internals/indexed-object":362,"../internals/to-length":418,"../internals/to-object":419,dup:152}],329:[function(e,t,a){arguments[4][156][0].apply(a,arguments)},{"../internals/is-array":367,"../internals/is-object":369,"../internals/well-known-symbol":429,dup:156}],330:[function(e,t,a){arguments[4][157][0].apply(a,arguments)},{"../internals/an-object":321,dup:157}],331:[function(e,t,a){arguments[4][158][0].apply(a,arguments)},{"../internals/well-known-symbol":429,dup:158}],332:[function(e,t,a){arguments[4][159][0].apply(a,arguments)},{dup:159}],333:[function(e,t,a){arguments[4][160][0].apply(a,arguments)},{"../internals/classof-raw":332,"../internals/to-string-tag-support":423,"../internals/well-known-symbol":429,dup:160}],334:[function(e,t,a){var i=e("../internals/has"),s=e("../internals/own-keys"),r=e("../internals/object-get-own-property-descriptor"),n=e("../internals/object-define-property");t.exports=function(e,t){for(var a=s(t),o=n.f,l=r.f,d=0;d<a.length;d++){var c=a[d];i(e,c)||o(e,c,l(t,c))}}},{"../internals/has":356,"../internals/object-define-property":384,"../internals/object-get-own-property-descriptor":385,"../internals/own-keys":393}],335:[function(e,t,a){arguments[4][162][0].apply(a,arguments)},{"../internals/fails":349,dup:162}],336:[function(e,t,a){arguments[4][163][0].apply(a,arguments)},{"../internals/create-property-descriptor":338,"../internals/iterators":374,"../internals/iterators-core":373,"../internals/object-create":382,"../internals/set-to-string-tag":406,dup:163}],337:[function(e,t,a){arguments[4][164][0].apply(a,arguments)},{"../internals/create-property-descriptor":338,"../internals/descriptors":341,"../internals/object-define-property":384,dup:164}],338:[function(e,t,a){arguments[4][165][0].apply(a,arguments)},{dup:165}],339:[function(e,t,a){arguments[4][166][0].apply(a,arguments)},{"../internals/create-property-descriptor":338,"../internals/object-define-property":384,"../internals/to-primitive":422,dup:166}],340:[function(e,t,a){arguments[4][167][0].apply(a,arguments)},{"../internals/create-iterator-constructor":336,"../internals/create-non-enumerable-property":337,"../internals/export":348,"../internals/is-pure":370,"../internals/iterators":374,"../internals/iterators-core":373,"../internals/object-get-prototype-of":388,"../internals/object-set-prototype-of":392,"../internals/redefine":398,"../internals/set-to-string-tag":406,"../internals/well-known-symbol":429,dup:167}],341:[function(e,t,a){arguments[4][168][0].apply(a,arguments)},{"../internals/fails":349,dup:168}],342:[function(e,t,a){arguments[4][169][0].apply(a,arguments)},{"../internals/global":355,"../internals/is-object":369,dup:169}],343:[function(e,t,a){arguments[4][170][0].apply(a,arguments)},{dup:170}],344:[function(e,t,a){arguments[4][171][0].apply(a,arguments)},{"../internals/engine-user-agent":345,dup:171}],345:[function(e,t,a){arguments[4][172][0].apply(a,arguments)},{"../internals/get-built-in":352,dup:172}],346:[function(e,t,a){arguments[4][173][0].apply(a,arguments)},{"../internals/engine-user-agent":345,"../internals/global":355,dup:173}],347:[function(e,t,a){arguments[4][175][0].apply(a,arguments)},{dup:175}],348:[function(e,t,a){var i=e("../internals/global"),s=e("../internals/object-get-own-property-descriptor").f,r=e("../internals/create-non-enumerable-property"),n=e("../internals/redefine"),o=e("../internals/set-global"),l=e("../internals/copy-constructor-properties"),d=e("../internals/is-forced");t.exports=function(e,t){var a,c,u,h,p,f=e.target,m=e.global,g=e.stat;if(a=m?i:g?i[f]||o(f,{}):(i[f]||{}).prototype)for(c in t){if(h=t[c],u=e.noTargetGet?(p=s(a,c))&&p.value:a[c],!d(m?c:f+(g?".":"#")+c,e.forced)&&void 0!==u){if(typeof h==typeof u)continue;l(h,u)}(e.sham||u&&u.sham)&&r(h,"sham",!0),n(a,c,h,e)}}},{"../internals/copy-constructor-properties":334,"../internals/create-non-enumerable-property":337,"../internals/global":355,"../internals/is-forced":368,"../internals/object-get-own-property-descriptor":385,"../internals/redefine":398,"../internals/set-global":404}],349:[function(e,t,a){arguments[4][177][0].apply(a,arguments)},{dup:177}],350:[function(e,t,a){"use strict";e("../modules/es.regexp.exec");var i=e("../internals/redefine"),s=e("../internals/fails"),r=e("../internals/well-known-symbol"),n=e("../internals/regexp-exec"),o=e("../internals/create-non-enumerable-property"),l=r("species"),d=!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),c="$0"==="a".replace(/./,"$0"),u=r("replace"),h=!!/./[u]&&""===/./[u]("a","$0"),p=!s((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));t.exports=function(e,t,a,u){var f=r(e),m=!s((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),g=m&&!s((function(){var t=!1,a=/a/;return"split"===e&&((a={}).constructor={},a.constructor[l]=function(){return a},a.flags="",a[f]=/./[f]),a.exec=function(){return t=!0,null},a[f](""),!t}));if(!m||!g||"replace"===e&&(!d||!c||h)||"split"===e&&!p){var b=/./[f],v=a(f,""[e],(function(e,t,a,i,s){return t.exec===n?m&&!s?{done:!0,value:b.call(t,a,i)}:{done:!0,value:e.call(a,t,i)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:h}),y=v[0],k=v[1];i(String.prototype,e,y),i(RegExp.prototype,f,2==t?function(e,t){return k.call(e,this,t)}:function(e){return k.call(e,this)})}u&&o(RegExp.prototype[f],"sham",!0)}},{"../internals/create-non-enumerable-property":337,"../internals/fails":349,"../internals/redefine":398,"../internals/regexp-exec":400,"../internals/well-known-symbol":429,"../modules/es.regexp.exec":434}],351:[function(e,t,a){arguments[4][178][0].apply(a,arguments)},{"../internals/a-function":316,dup:178}],352:[function(e,t,a){arguments[4][180][0].apply(a,arguments)},{"../internals/global":355,"../internals/path":394,dup:180}],353:[function(e,t,a){arguments[4][181][0].apply(a,arguments)},{"../internals/classof":333,"../internals/iterators":374,"../internals/well-known-symbol":429,dup:181}],354:[function(e,t,a){arguments[4][182][0].apply(a,arguments)},{"../internals/an-object":321,"../internals/get-iterator-method":353,dup:182}],355:[function(e,t,a){arguments[4][183][0].apply(a,arguments)},{dup:183}],356:[function(e,t,a){arguments[4][184][0].apply(a,arguments)},{dup:184}],357:[function(e,t,a){arguments[4][185][0].apply(a,arguments)},{dup:185}],358:[function(e,t,a){arguments[4][186][0].apply(a,arguments)},{"../internals/global":355,dup:186}],359:[function(e,t,a){arguments[4][187][0].apply(a,arguments)},{"../internals/get-built-in":352,dup:187}],360:[function(e,t,a){arguments[4][188][0].apply(a,arguments)},{"../internals/descriptors":341,"../internals/document-create-element":342,"../internals/fails":349,dup:188}],361:[function(e,t,a){var i=Math.abs,s=Math.pow,r=Math.floor,n=Math.log,o=Math.LN2;t.exports={pack:function(e,t,a){var l,d,c,u=new Array(a),h=8*a-t-1,p=(1<<h)-1,f=p>>1,m=23===t?s(2,-24)-s(2,-77):0,g=e<0||0===e&&1/e<0?1:0,b=0;for((e=i(e))!=e||e===1/0?(d=e!=e?1:0,l=p):(l=r(n(e)/o),e*(c=s(2,-l))<1&&(l--,c*=2),(e+=l+f>=1?m/c:m*s(2,1-f))*c>=2&&(l++,c/=2),l+f>=p?(d=0,l=p):l+f>=1?(d=(e*c-1)*s(2,t),l+=f):(d=e*s(2,f-1)*s(2,t),l=0));t>=8;u[b++]=255&d,d/=256,t-=8);for(l=l<<t|d,h+=t;h>0;u[b++]=255&l,l/=256,h-=8);return u[--b]|=128*g,u},unpack:function(e,t){var a,i=e.length,r=8*i-t-1,n=(1<<r)-1,o=n>>1,l=r-7,d=i-1,c=e[d--],u=127&c;for(c>>=7;l>0;u=256*u+e[d],d--,l-=8);for(a=u&(1<<-l)-1,u>>=-l,l+=t;l>0;a=256*a+e[d],d--,l-=8);if(0===u)u=1-o;else{if(u===n)return a?NaN:c?-1/0:1/0;a+=s(2,t),u-=o}return(c?-1:1)*a*s(2,u-t)}}},{}],362:[function(e,t,a){arguments[4][189][0].apply(a,arguments)},{"../internals/classof-raw":332,"../internals/fails":349,dup:189}],363:[function(e,t,a){var i=e("../internals/is-object"),s=e("../internals/object-set-prototype-of");t.exports=function(e,t,a){var r,n;return s&&"function"==typeof(r=t.constructor)&&r!==a&&i(n=r.prototype)&&n!==a.prototype&&s(e,n),e}},{"../internals/is-object":369,"../internals/object-set-prototype-of":392}],364:[function(e,t,a){arguments[4][190][0].apply(a,arguments)},{"../internals/shared-store":408,dup:190}],365:[function(e,t,a){arguments[4][191][0].apply(a,arguments)},{"../internals/create-non-enumerable-property":337,"../internals/global":355,"../internals/has":356,"../internals/hidden-keys":357,"../internals/is-object":369,"../internals/native-weak-map":379,"../internals/shared-key":407,dup:191}],366:[function(e,t,a){arguments[4][192][0].apply(a,arguments)},{"../internals/iterators":374,"../internals/well-known-symbol":429,dup:192}],367:[function(e,t,a){arguments[4][193][0].apply(a,arguments)},{"../internals/classof-raw":332,dup:193}],368:[function(e,t,a){arguments[4][194][0].apply(a,arguments)},{"../internals/fails":349,dup:194}],369:[function(e,t,a){arguments[4][195][0].apply(a,arguments)},{dup:195}],370:[function(e,t,a){t.exports=!1},{}],371:[function(e,t,a){arguments[4][197][0].apply(a,arguments)},{"../internals/classof-raw":332,"../internals/is-object":369,"../internals/well-known-symbol":429,dup:197}],372:[function(e,t,a){arguments[4][198][0].apply(a,arguments)},{"../internals/an-object":321,"../internals/call-with-safe-iteration-closing":330,"../internals/function-bind-context":351,"../internals/get-iterator-method":353,"../internals/is-array-iterator-method":366,"../internals/to-length":418,dup:198}],373:[function(e,t,a){arguments[4][199][0].apply(a,arguments)},{"../internals/create-non-enumerable-property":337,"../internals/has":356,"../internals/is-pure":370,"../internals/object-get-prototype-of":388,"../internals/well-known-symbol":429,dup:199}],374:[function(e,t,a){arguments[4][185][0].apply(a,arguments)},{dup:185}],375:[function(e,t,a){arguments[4][201][0].apply(a,arguments)},{"../internals/classof-raw":332,"../internals/engine-is-ios":344,"../internals/global":355,"../internals/object-get-own-property-descriptor":385,"../internals/task":413,dup:201}],376:[function(e,t,a){arguments[4][202][0].apply(a,arguments)},{"../internals/global":355,dup:202}],377:[function(e,t,a){arguments[4][203][0].apply(a,arguments)},{"../internals/fails":349,dup:203}],378:[function(e,t,a){arguments[4][204][0].apply(a,arguments)},{"../internals/fails":349,"../internals/is-pure":370,"../internals/well-known-symbol":429,dup:204}],379:[function(e,t,a){arguments[4][205][0].apply(a,arguments)},{"../internals/global":355,"../internals/inspect-source":364,dup:205}],380:[function(e,t,a){arguments[4][206][0].apply(a,arguments)},{"../internals/a-function":316,dup:206}],381:[function(e,t,a){arguments[4][211][0].apply(a,arguments)},{"../internals/descriptors":341,"../internals/fails":349,"../internals/indexed-object":362,"../internals/object-get-own-property-symbols":387,"../internals/object-keys":390,"../internals/object-property-is-enumerable":391,"../internals/to-object":419,dup:211}],382:[function(e,t,a){arguments[4][212][0].apply(a,arguments)},{"../internals/an-object":321,"../internals/document-create-element":342,"../internals/enum-bug-keys":347,"../internals/hidden-keys":357,"../internals/html":359,"../internals/object-define-properties":383,"../internals/shared-key":407,dup:212}],383:[function(e,t,a){arguments[4][213][0].apply(a,arguments)},{"../internals/an-object":321,"../internals/descriptors":341,"../internals/object-define-property":384,"../internals/object-keys":390,dup:213}],384:[function(e,t,a){arguments[4][214][0].apply(a,arguments)},{"../internals/an-object":321,"../internals/descriptors":341,"../internals/ie8-dom-define":360,"../internals/to-primitive":422,dup:214}],385:[function(e,t,a){arguments[4][215][0].apply(a,arguments)},{"../internals/create-property-descriptor":338,"../internals/descriptors":341,"../internals/has":356,"../internals/ie8-dom-define":360,"../internals/object-property-is-enumerable":391,"../internals/to-indexed-object":416,"../internals/to-primitive":422,dup:215}],386:[function(e,t,a){var i=e("../internals/object-keys-internal"),s=e("../internals/enum-bug-keys").concat("length","prototype");a.f=Object.getOwnPropertyNames||function(e){return i(e,s)}},{"../internals/enum-bug-keys":347,"../internals/object-keys-internal":389}],387:[function(e,t,a){arguments[4][216][0].apply(a,arguments)},{dup:216}],388:[function(e,t,a){arguments[4][217][0].apply(a,arguments)},{"../internals/correct-prototype-getter":335,"../internals/has":356,"../internals/shared-key":407,"../internals/to-object":419,dup:217}],389:[function(e,t,a){arguments[4][218][0].apply(a,arguments)},{"../internals/array-includes":327,"../internals/has":356,"../internals/hidden-keys":357,"../internals/to-indexed-object":416,dup:218}],390:[function(e,t,a){arguments[4][219][0].apply(a,arguments)},{"../internals/enum-bug-keys":347,"../internals/object-keys-internal":389,dup:219}],391:[function(e,t,a){arguments[4][220][0].apply(a,arguments)},{dup:220}],392:[function(e,t,a){arguments[4][221][0].apply(a,arguments)},{"../internals/a-possible-prototype":317,"../internals/an-object":321,dup:221}],393:[function(e,t,a){var i=e("../internals/get-built-in"),s=e("../internals/object-get-own-property-names"),r=e("../internals/object-get-own-property-symbols"),n=e("../internals/an-object");t.exports=i("Reflect","ownKeys")||function(e){var t=s.f(n(e)),a=r.f;return a?t.concat(a(e)):t}},{"../internals/an-object":321,"../internals/get-built-in":352,"../internals/object-get-own-property-names":386,"../internals/object-get-own-property-symbols":387}],394:[function(e,t,a){var i=e("../internals/global");t.exports=i},{"../internals/global":355}],395:[function(e,t,a){arguments[4][224][0].apply(a,arguments)},{dup:224}],396:[function(e,t,a){arguments[4][225][0].apply(a,arguments)},{"../internals/an-object":321,"../internals/is-object":369,"../internals/new-promise-capability":380,dup:225}],397:[function(e,t,a){var i=e("../internals/redefine");t.exports=function(e,t,a){for(var s in t)i(e,s,t[s],a);return e}},{"../internals/redefine":398}],398:[function(e,t,a){var i=e("../internals/global"),s=e("../internals/create-non-enumerable-property"),r=e("../internals/has"),n=e("../internals/set-global"),o=e("../internals/inspect-source"),l=e("../internals/internal-state"),d=l.get,c=l.enforce,u=String(String).split("String");(t.exports=function(e,t,a,o){var l=!!o&&!!o.unsafe,d=!!o&&!!o.enumerable,h=!!o&&!!o.noTargetGet;"function"==typeof a&&("string"!=typeof t||r(a,"name")||s(a,"name",t),c(a).source=u.join("string"==typeof t?t:"")),e!==i?(l?!h&&e[t]&&(d=!0):delete e[t],d?e[t]=a:s(e,t,a)):d?e[t]=a:n(t,a)})(Function.prototype,"toString",(function(){return"function"==typeof this&&d(this).source||o(this)}))},{"../internals/create-non-enumerable-property":337,"../internals/global":355,"../internals/has":356,"../internals/inspect-source":364,"../internals/internal-state":365,"../internals/set-global":404}],399:[function(e,t,a){var i=e("./classof-raw"),s=e("./regexp-exec");t.exports=function(e,t){var a=e.exec;if("function"==typeof a){var r=a.call(e,t);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==i(e))throw TypeError("RegExp#exec called on incompatible receiver");return s.call(e,t)}},{"./classof-raw":332,"./regexp-exec":400}],400:[function(e,t,a){"use strict";var i,s,r=e("./regexp-flags"),n=e("./regexp-sticky-helpers"),o=RegExp.prototype.exec,l=String.prototype.replace,d=o,c=(i=/a/,s=/b*/g,o.call(i,"a"),o.call(s,"a"),0!==i.lastIndex||0!==s.lastIndex),u=n.UNSUPPORTED_Y||n.BROKEN_CARET,h=void 0!==/()??/.exec("")[1];(c||h||u)&&(d=function(e){var t,a,i,s,n=this,d=u&&n.sticky,p=r.call(n),f=n.source,m=0,g=e;return d&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),g=String(e).slice(n.lastIndex),n.lastIndex>0&&(!n.multiline||n.multiline&&"\n"!==e[n.lastIndex-1])&&(f="(?: "+f+")",g=" "+g,m++),a=new RegExp("^(?:"+f+")",p)),h&&(a=new RegExp("^"+f+"$(?!\\s)",p)),c&&(t=n.lastIndex),i=o.call(d?a:n,g),d?i?(i.input=i.input.slice(m),i[0]=i[0].slice(m),i.index=n.lastIndex,n.lastIndex+=i[0].length):n.lastIndex=0:c&&i&&(n.lastIndex=n.global?i.index+i[0].length:t),h&&i&&i.length>1&&l.call(i[0],a,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i}),t.exports=d},{"./regexp-flags":401,"./regexp-sticky-helpers":402}],401:[function(e,t,a){"use strict";var i=e("../internals/an-object");t.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},{"../internals/an-object":321}],402:[function(e,t,a){"use strict";var i=e("./fails");function s(e,t){return RegExp(e,t)}a.UNSUPPORTED_Y=i((function(){var e=s("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),a.BROKEN_CARET=i((function(){var e=s("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},{"./fails":349}],403:[function(e,t,a){arguments[4][228][0].apply(a,arguments)},{dup:228}],404:[function(e,t,a){arguments[4][229][0].apply(a,arguments)},{"../internals/create-non-enumerable-property":337,"../internals/global":355,dup:229}],405:[function(e,t,a){arguments[4][230][0].apply(a,arguments)},{"../internals/descriptors":341,"../internals/get-built-in":352,"../internals/object-define-property":384,"../internals/well-known-symbol":429,dup:230}],406:[function(e,t,a){var i=e("../internals/object-define-property").f,s=e("../internals/has"),r=e("../internals/well-known-symbol")("toStringTag");t.exports=function(e,t,a){e&&!s(e=a?e:e.prototype,r)&&i(e,r,{configurable:!0,value:t})}},{"../internals/has":356,"../internals/object-define-property":384,"../internals/well-known-symbol":429}],407:[function(e,t,a){arguments[4][232][0].apply(a,arguments)},{"../internals/shared":409,"../internals/uid":427,dup:232}],408:[function(e,t,a){arguments[4][233][0].apply(a,arguments)},{"../internals/global":355,"../internals/set-global":404,dup:233}],409:[function(e,t,a){var i=e("../internals/is-pure"),s=e("../internals/shared-store");(t.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:i?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":370,"../internals/shared-store":408}],410:[function(e,t,a){arguments[4][235][0].apply(a,arguments)},{"../internals/a-function":316,"../internals/an-object":321,"../internals/well-known-symbol":429,dup:235}],411:[function(e,t,a){arguments[4][236][0].apply(a,arguments)},{"../internals/require-object-coercible":403,"../internals/to-integer":417,dup:236}],412:[function(e,t,a){arguments[4][237][0].apply(a,arguments)},{dup:237}],413:[function(e,t,a){arguments[4][240][0].apply(a,arguments)},{"../internals/classof-raw":332,"../internals/document-create-element":342,"../internals/engine-is-ios":344,"../internals/fails":349,"../internals/function-bind-context":351,"../internals/global":355,"../internals/html":359,dup:240}],414:[function(e,t,a){arguments[4][241][0].apply(a,arguments)},{"../internals/to-integer":417,dup:241}],415:[function(e,t,a){var i=e("../internals/to-integer"),s=e("../internals/to-length");t.exports=function(e){if(void 0===e)return 0;var t=i(e),a=s(t);if(t!==a)throw RangeError("Wrong length or index");return a}},{"../internals/to-integer":417,"../internals/to-length":418}],416:[function(e,t,a){arguments[4][242][0].apply(a,arguments)},{"../internals/indexed-object":362,"../internals/require-object-coercible":403,dup:242}],417:[function(e,t,a){arguments[4][243][0].apply(a,arguments)},{dup:243}],418:[function(e,t,a){arguments[4][244][0].apply(a,arguments)},{"../internals/to-integer":417,dup:244}],419:[function(e,t,a){arguments[4][245][0].apply(a,arguments)},{"../internals/require-object-coercible":403,dup:245}],420:[function(e,t,a){var i=e("../internals/to-positive-integer");t.exports=function(e,t){var a=i(e);if(a%t)throw RangeError("Wrong offset");return a}},{"../internals/to-positive-integer":421}],421:[function(e,t,a){var i=e("../internals/to-integer");t.exports=function(e){var t=i(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},{"../internals/to-integer":417}],422:[function(e,t,a){arguments[4][246][0].apply(a,arguments)},{"../internals/is-object":369,dup:246}],423:[function(e,t,a){arguments[4][247][0].apply(a,arguments)},{"../internals/well-known-symbol":429,dup:247}],424:[function(e,t,a){"use strict";var i=e("../internals/export"),s=e("../internals/global"),r=e("../internals/descriptors"),n=e("../internals/typed-array-constructors-require-wrappers"),o=e("../internals/array-buffer-view-core"),l=e("../internals/array-buffer"),d=e("../internals/an-instance"),c=e("../internals/create-property-descriptor"),u=e("../internals/create-non-enumerable-property"),h=e("../internals/to-length"),p=e("../internals/to-index"),f=e("../internals/to-offset"),m=e("../internals/to-primitive"),g=e("../internals/has"),b=e("../internals/classof"),v=e("../internals/is-object"),y=e("../internals/object-create"),k=e("../internals/object-set-prototype-of"),w=e("../internals/object-get-own-property-names").f,S=e("../internals/typed-array-from"),C=e("../internals/array-iteration").forEach,j=e("../internals/set-species"),E=e("../internals/object-define-property"),L=e("../internals/object-get-own-property-descriptor"),A=e("../internals/internal-state"),T=e("../internals/inherit-if-required"),P=A.get,M=A.set,I=E.f,x=L.f,R=Math.round,D=s.RangeError,O=l.ArrayBuffer,F=l.DataView,V=o.NATIVE_ARRAY_BUFFER_VIEWS,B=o.TYPED_ARRAY_TAG,q=o.TypedArray,U=o.TypedArrayPrototype,H=o.aTypedArrayConstructor,N=o.isTypedArray,_=function(e,t){for(var a=0,i=t.length,s=new(H(e))(i);i>a;)s[a]=t[a++];return s},W=function(e,t){I(e,t,{get:function(){return P(this)[t]}})},z=function(e){var t;return e instanceof O||"ArrayBuffer"==(t=b(e))||"SharedArrayBuffer"==t},J=function(e,t){return N(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},G=function(e,t){return J(e,t=m(t,!0))?c(2,e[t]):x(e,t)},K=function(e,t,a){return!(J(e,t=m(t,!0))&&v(a)&&g(a,"value"))||g(a,"get")||g(a,"set")||a.configurable||g(a,"writable")&&!a.writable||g(a,"enumerable")&&!a.enumerable?I(e,t,a):(e[t]=a.value,e)};r?(V||(L.f=G,E.f=K,W(U,"buffer"),W(U,"byteOffset"),W(U,"byteLength"),W(U,"length")),i({target:"Object",stat:!0,forced:!V},{getOwnPropertyDescriptor:G,defineProperty:K}),t.exports=function(e,t,a){var r=e.match(/\d+$/)[0]/8,o=e+(a?"Clamped":"")+"Array",l="get"+e,c="set"+e,m=s[o],g=m,b=g&&g.prototype,E={},L=function(e,t){I(e,t,{get:function(){return function(e,t){var a=P(e);return a.view[l](t*r+a.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){var s=P(e);a&&(i=(i=R(i))<0?0:i>255?255:255&i),s.view[c](t*r+s.byteOffset,i,!0)}(this,t,e)},enumerable:!0})};V?n&&(g=t((function(e,t,a,i){return d(e,g,o),T(v(t)?z(t)?void 0!==i?new m(t,f(a,r),i):void 0!==a?new m(t,f(a,r)):new m(t):N(t)?_(g,t):S.call(g,t):new m(p(t)),e,g)})),k&&k(g,q),C(w(m),(function(e){e in g||u(g,e,m[e])})),g.prototype=b):(g=t((function(e,t,a,i){d(e,g,o);var s,n,l,c=0,u=0;if(v(t)){if(!z(t))return N(t)?_(g,t):S.call(g,t);s=t,u=f(a,r);var m=t.byteLength;if(void 0===i){if(m%r)throw D("Wrong length");if((n=m-u)<0)throw D("Wrong length")}else if((n=h(i)*r)+u>m)throw D("Wrong length");l=n/r}else l=p(t),s=new O(n=l*r);for(M(e,{buffer:s,byteOffset:u,byteLength:n,length:l,view:new F(s)});c<l;)L(e,c++)})),k&&k(g,q),b=g.prototype=y(U)),b.constructor!==g&&u(b,"constructor",g),B&&u(b,B,o),E[o]=g,i({global:!0,forced:g!=m,sham:!V},E),"BYTES_PER_ELEMENT"in g||u(g,"BYTES_PER_ELEMENT",r),"BYTES_PER_ELEMENT"in b||u(b,"BYTES_PER_ELEMENT",r),j(o)}):t.exports=function(){}},{"../internals/an-instance":320,"../internals/array-buffer":324,"../internals/array-buffer-view-core":323,"../internals/array-iteration":328,"../internals/classof":333,"../internals/create-non-enumerable-property":337,"../internals/create-property-descriptor":338,"../internals/descriptors":341,"../internals/export":348,"../internals/global":355,"../internals/has":356,"../internals/inherit-if-required":363,"../internals/internal-state":365,"../internals/is-object":369,"../internals/object-create":382,"../internals/object-define-property":384,"../internals/object-get-own-property-descriptor":385,"../internals/object-get-own-property-names":386,"../internals/object-set-prototype-of":392,"../internals/set-species":405,"../internals/to-index":415,"../internals/to-length":418,"../internals/to-offset":420,"../internals/to-primitive":422,"../internals/typed-array-constructors-require-wrappers":425,"../internals/typed-array-from":426}],425:[function(e,t,a){var i=e("../internals/global"),s=e("../internals/fails"),r=e("../internals/check-correctness-of-iteration"),n=e("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,o=i.ArrayBuffer,l=i.Int8Array;t.exports=!n||!s((function(){l(1)}))||!s((function(){new l(-1)}))||!r((function(e){new l,new l(null),new l(1.5),new l(e)}),!0)||s((function(){return 1!==new l(new o(2),1,void 0).length}))},{"../internals/array-buffer-view-core":323,"../internals/check-correctness-of-iteration":331,"../internals/fails":349,"../internals/global":355}],426:[function(e,t,a){var i=e("../internals/to-object"),s=e("../internals/to-length"),r=e("../internals/get-iterator-method"),n=e("../internals/is-array-iterator-method"),o=e("../internals/function-bind-context"),l=e("../internals/array-buffer-view-core").aTypedArrayConstructor;t.exports=function(e){var t,a,d,c,u,h,p=i(e),f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m,b=r(p);if(null!=b&&!n(b))for(h=(u=b.call(p)).next,p=[];!(c=h.call(u)).done;)p.push(c.value);for(g&&f>2&&(m=o(m,arguments[2],2)),a=s(p.length),d=new(l(this))(a),t=0;a>t;t++)d[t]=g?m(p[t],t):p[t];return d}},{"../internals/array-buffer-view-core":323,"../internals/function-bind-context":351,"../internals/get-iterator-method":353,"../internals/is-array-iterator-method":366,"../internals/to-length":418,"../internals/to-object":419}],427:[function(e,t,a){arguments[4][248][0].apply(a,arguments)},{dup:248}],428:[function(e,t,a){arguments[4][249][0].apply(a,arguments)},{"../internals/native-symbol":377,dup:249}],429:[function(e,t,a){arguments[4][250][0].apply(a,arguments)},{"../internals/global":355,"../internals/has":356,"../internals/native-symbol":377,"../internals/shared":409,"../internals/uid":427,"../internals/use-symbol-as-uid":428,dup:250}],430:[function(e,t,a){"use strict";var i=e("../internals/export"),s=e("../internals/global"),r=e("../internals/array-buffer"),n=e("../internals/set-species"),o=r.ArrayBuffer;i({global:!0,forced:s.ArrayBuffer!==o},{ArrayBuffer:o}),n("ArrayBuffer")},{"../internals/array-buffer":324,"../internals/export":348,"../internals/global":355,"../internals/set-species":405}],431:[function(e,t,a){"use strict";var i=e("../internals/export"),s=e("../internals/fails"),r=e("../internals/array-buffer"),n=e("../internals/an-object"),o=e("../internals/to-absolute-index"),l=e("../internals/to-length"),d=e("../internals/species-constructor"),c=r.ArrayBuffer,u=r.DataView,h=c.prototype.slice;i({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:s((function(){return!new c(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==h&&void 0===t)return h.call(n(this),e);for(var a=n(this).byteLength,i=o(e,a),s=o(void 0===t?a:t,a),r=new(d(this,c))(l(s-i)),p=new u(this),f=new u(r),m=0;i<s;)f.setUint8(m++,p.getUint8(i++));return r}})},{"../internals/an-object":321,"../internals/array-buffer":324,"../internals/export":348,"../internals/fails":349,"../internals/species-constructor":410,"../internals/to-absolute-index":414,"../internals/to-length":418}],432:[function(e,t,a){arguments[4][259][0].apply(a,arguments)},{"../internals/add-to-unscopables":318,"../internals/define-iterator":340,"../internals/internal-state":365,"../internals/iterators":374,"../internals/to-indexed-object":416,dup:259}],433:[function(e,t,a){arguments[4][277][0].apply(a,arguments)},{"../internals/a-function":316,"../internals/an-instance":320,"../internals/check-correctness-of-iteration":331,"../internals/classof-raw":332,"../internals/engine-v8-version":346,"../internals/export":348,"../internals/get-built-in":352,"../internals/global":355,"../internals/host-report-errors":358,"../internals/inspect-source":364,"../internals/internal-state":365,"../internals/is-forced":368,"../internals/is-object":369,"../internals/is-pure":370,"../internals/iterate":372,"../internals/microtask":375,"../internals/native-promise-constructor":376,"../internals/new-promise-capability":380,"../internals/perform":395,"../internals/promise-resolve":396,"../internals/redefine":398,"../internals/redefine-all":397,"../internals/set-species":405,"../internals/set-to-string-tag":406,"../internals/species-constructor":410,"../internals/task":413,"../internals/well-known-symbol":429,dup:277}],434:[function(e,t,a){"use strict";var i=e("../internals/export"),s=e("../internals/regexp-exec");i({target:"RegExp",proto:!0,forced:/./.exec!==s},{exec:s})},{"../internals/export":348,"../internals/regexp-exec":400}],435:[function(e,t,a){"use strict";var i=e("../internals/redefine"),s=e("../internals/an-object"),r=e("../internals/fails"),n=e("../internals/regexp-flags"),o=RegExp.prototype,l=o.toString,d=r((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),c="toString"!=l.name;(d||c)&&i(RegExp.prototype,"toString",(function(){var e=s(this),t=String(e.source),a=e.flags;return"/"+t+"/"+String(void 0===a&&e instanceof RegExp&&!("flags"in o)?n.call(e):a)}),{unsafe:!0})},{"../internals/an-object":321,"../internals/fails":349,"../internals/redefine":398,"../internals/regexp-flags":401}],436:[function(e,t,a){arguments[4][279][0].apply(a,arguments)},{"../internals/define-iterator":340,"../internals/internal-state":365,"../internals/string-multibyte":411,dup:279}],437:[function(e,t,a){"use strict";var i=e("../internals/fix-regexp-well-known-symbol-logic"),s=e("../internals/an-object"),r=e("../internals/to-length"),n=e("../internals/require-object-coercible"),o=e("../internals/advance-string-index"),l=e("../internals/regexp-exec-abstract");i("match",1,(function(e,t,a){return[function(t){var a=n(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,a):new RegExp(t)[e](String(a))},function(e){var i=a(t,e,this);if(i.done)return i.value;var n=s(e),d=String(this);if(!n.global)return l(n,d);var c=n.unicode;n.lastIndex=0;for(var u,h=[],p=0;null!==(u=l(n,d));){var f=String(u[0]);h[p]=f,""===f&&(n.lastIndex=o(d,r(n.lastIndex),c)),p++}return 0===p?null:h}]}))},{"../internals/advance-string-index":319,"../internals/an-object":321,"../internals/fix-regexp-well-known-symbol-logic":350,"../internals/regexp-exec-abstract":399,"../internals/require-object-coercible":403,"../internals/to-length":418}],438:[function(e,t,a){"use strict";var i=e("../internals/fix-regexp-well-known-symbol-logic"),s=e("../internals/an-object"),r=e("../internals/to-object"),n=e("../internals/to-length"),o=e("../internals/to-integer"),l=e("../internals/require-object-coercible"),d=e("../internals/advance-string-index"),c=e("../internals/regexp-exec-abstract"),u=Math.max,h=Math.min,p=Math.floor,f=/\$([$&'`]|\d\d?|<[^>]*>)/g,m=/\$([$&'`]|\d\d?)/g;i("replace",2,(function(e,t,a,i){var g=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=i.REPLACE_KEEPS_$0,v=g?"$":"$0";return[function(a,i){var s=l(this),r=null==a?void 0:a[e];return void 0!==r?r.call(a,s,i):t.call(String(s),a,i)},function(e,i){if(!g&&b||"string"==typeof i&&-1===i.indexOf(v)){var r=a(t,e,this,i);if(r.done)return r.value}var l=s(e),p=String(this),f="function"==typeof i;f||(i=String(i));var m=l.global;if(m){var k=l.unicode;l.lastIndex=0}for(var w=[];;){var S=c(l,p);if(null===S)break;if(w.push(S),!m)break;""===String(S[0])&&(l.lastIndex=d(p,n(l.lastIndex),k))}for(var C,j="",E=0,L=0;L<w.length;L++){S=w[L];for(var A=String(S[0]),T=u(h(o(S.index),p.length),0),P=[],M=1;M<S.length;M++)P.push(void 0===(C=S[M])?C:String(C));var I=S.groups;if(f){var x=[A].concat(P,T,p);void 0!==I&&x.push(I);var R=String(i.apply(void 0,x))}else R=y(A,p,T,P,I,i);T>=E&&(j+=p.slice(E,T)+R,E=T+A.length)}return j+p.slice(E)}];function y(e,a,i,s,n,o){var l=i+e.length,d=s.length,c=m;return void 0!==n&&(n=r(n),c=f),t.call(o,c,(function(t,r){var o;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return a.slice(0,i);case"'":return a.slice(l);case"<":o=n[r.slice(1,-1)];break;default:var c=+r;if(0===c)return t;if(c>d){var u=p(c/10);return 0===u?t:u<=d?void 0===s[u-1]?r.charAt(1):s[u-1]+r.charAt(1):t}o=s[c-1]}return void 0===o?"":o}))}}))},{"../internals/advance-string-index":319,"../internals/an-object":321,"../internals/fix-regexp-well-known-symbol-logic":350,"../internals/regexp-exec-abstract":399,"../internals/require-object-coercible":403,"../internals/to-integer":417,"../internals/to-length":418,"../internals/to-object":419}],439:[function(e,t,a){"use strict";var i=e("../internals/fix-regexp-well-known-symbol-logic"),s=e("../internals/is-regexp"),r=e("../internals/an-object"),n=e("../internals/require-object-coercible"),o=e("../internals/species-constructor"),l=e("../internals/advance-string-index"),d=e("../internals/to-length"),c=e("../internals/regexp-exec-abstract"),u=e("../internals/regexp-exec"),h=e("../internals/fails"),p=[].push,f=Math.min,m=!h((function(){return!RegExp(4294967295,"y")}));i("split",2,(function(e,t,a){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var i=String(n(this)),r=void 0===a?4294967295:a>>>0;if(0===r)return[];if(void 0===e)return[i];if(!s(e))return t.call(i,e,r);for(var o,l,d,c=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,m=new RegExp(e.source,h+"g");(o=u.call(m,i))&&!((l=m.lastIndex)>f&&(c.push(i.slice(f,o.index)),o.length>1&&o.index<i.length&&p.apply(c,o.slice(1)),d=o[0].length,f=l,c.length>=r));)m.lastIndex===o.index&&m.lastIndex++;return f===i.length?!d&&m.test("")||c.push(""):c.push(i.slice(f)),c.length>r?c.slice(0,r):c}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:t.call(this,e,a)}:t,[function(t,a){var s=n(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,s,a):i.call(String(s),t,a)},function(e,s){var n=a(i,e,this,s,i!==t);if(n.done)return n.value;var u=r(e),h=String(this),p=o(u,RegExp),g=u.unicode,b=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(m?"y":"g"),v=new p(m?u:"^(?:"+u.source+")",b),y=void 0===s?4294967295:s>>>0;if(0===y)return[];if(0===h.length)return null===c(v,h)?[h]:[];for(var k=0,w=0,S=[];w<h.length;){v.lastIndex=m?w:0;var C,j=c(v,m?h:h.slice(w));if(null===j||(C=f(d(v.lastIndex+(m?0:w)),h.length))===k)w=l(h,w,g);else{if(S.push(h.slice(k,w)),S.length===y)return S;for(var E=1;E<=j.length-1;E++)if(S.push(j[E]),S.length===y)return S;w=k=C}}return S.push(h.slice(k)),S}]}),!m)},{"../internals/advance-string-index":319,"../internals/an-object":321,"../internals/fails":349,"../internals/fix-regexp-well-known-symbol-logic":350,"../internals/is-regexp":371,"../internals/regexp-exec":400,"../internals/regexp-exec-abstract":399,"../internals/require-object-coercible":403,"../internals/species-constructor":410,"../internals/to-length":418}],440:[function(e,t,a){"use strict";var i=e("../internals/export"),s=e("../internals/descriptors"),r=e("../internals/global"),n=e("../internals/has"),o=e("../internals/is-object"),l=e("../internals/object-define-property").f,d=e("../internals/copy-constructor-properties"),c=r.Symbol;if(s&&"function"==typeof c&&(!("description"in c.prototype)||void 0!==c().description)){var u={},h=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof h?new c(e):void 0===e?c():c(e);return""===e&&(u[t]=!0),t};d(h,c);var p=h.prototype=c.prototype;p.constructor=h;var f=p.toString,m="Symbol(test)"==String(c("test")),g=/^Symbol\((.*)\)[^)]+$/;l(p,"description",{configurable:!0,get:function(){var e=o(this)?this.valueOf():this,t=f.call(e);if(n(u,e))return"";var a=m?t.slice(7,-1):t.replace(g,"$1");return""===a?void 0:a}}),i({global:!0,forced:!0},{Symbol:h})}},{"../internals/copy-constructor-properties":334,"../internals/descriptors":341,"../internals/export":348,"../internals/global":355,"../internals/has":356,"../internals/is-object":369,"../internals/object-define-property":384}],441:[function(e,t,a){"use strict";var i=e("../internals/global"),s=e("../internals/array-buffer-view-core"),r=e("../internals/fails"),n=i.Int8Array,o=s.aTypedArray,l=s.exportTypedArrayMethod,d=[].toLocaleString,c=[].slice,u=!!n&&r((function(){d.call(new n(1))}));l("toLocaleString",(function(){return d.apply(u?c.call(o(this)):o(this),arguments)}),r((function(){return[1,2].toLocaleString()!=new n([1,2]).toLocaleString()}))||!r((function(){n.prototype.toLocaleString.call([1,2])})))},{"../internals/array-buffer-view-core":323,"../internals/fails":349,"../internals/global":355}],442:[function(e,t,a){e("../internals/typed-array-constructor")("Uint16",(function(e){return function(t,a,i){return e(this,t,a,i)}}))},{"../internals/typed-array-constructor":424}],443:[function(e,t,a){e("../internals/typed-array-constructor")("Uint8",(function(e){return function(t,a,i){return e(this,t,a,i)}}))},{"../internals/typed-array-constructor":424}],444:[function(e,t,a){var i=e("../internals/global"),s=e("../internals/dom-iterables"),r=e("../modules/es.array.iterator"),n=e("../internals/create-non-enumerable-property"),o=e("../internals/well-known-symbol"),l=o("iterator"),d=o("toStringTag"),c=r.values;for(var u in s){var h=i[u],p=h&&h.prototype;if(p){if(p[l]!==c)try{n(p,l,c)}catch(m){p[l]=c}if(p[d]||n(p,d,u),s[u])for(var f in r)if(p[f]!==r[f])try{n(p,f,r[f])}catch(m){p[f]=r[f]}}}},{"../internals/create-non-enumerable-property":337,"../internals/dom-iterables":343,"../internals/global":355,"../internals/well-known-symbol":429,"../modules/es.array.iterator":432}],445:[function(e,t,a){arguments[4][284][0].apply(a,arguments)},{"../internals/an-instance":320,"../internals/an-object":321,"../internals/classof":333,"../internals/create-iterator-constructor":336,"../internals/create-property-descriptor":338,"../internals/export":348,"../internals/function-bind-context":351,"../internals/get-built-in":352,"../internals/get-iterator":354,"../internals/get-iterator-method":353,"../internals/has":356,"../internals/internal-state":365,"../internals/is-object":369,"../internals/native-url":378,"../internals/object-create":382,"../internals/redefine":398,"../internals/redefine-all":397,"../internals/set-to-string-tag":406,"../internals/well-known-symbol":429,"../modules/es.array.iterator":432,dup:284}],446:[function(e,t,a){arguments[4][285][0].apply(a,arguments)},{"../internals/an-instance":320,"../internals/array-from":326,"../internals/descriptors":341,"../internals/export":348,"../internals/global":355,"../internals/has":356,"../internals/internal-state":365,"../internals/native-url":378,"../internals/object-assign":381,"../internals/object-define-properties":383,"../internals/redefine":398,"../internals/set-to-string-tag":406,"../internals/string-multibyte":411,"../internals/string-punycode-to-ascii":412,"../modules/es.string.iterator":436,"../modules/web.url-search-params":445,dup:285}]},{},[71]);